<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<meta property="og:title" content="Assisted Installer for OpenShift Container Platform Assisted Installer for OpenShift Container Platform 2022 | Red Hat Customer Portal" />
<meta property="og:description" content="Information about the Assisted Installer and its usage" />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="Information about the Assisted Installer and its usage" />
<meta name="twitter:title" content="Assisted Installer for OpenShift Container Platform Assisted Installer for OpenShift Container Platform 2022 | Red Hat Customer Portal" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="title" content="Assisted Installer for OpenShift Container Platform Assisted Installer for OpenShift Container Platform 2022 | Red Hat Customer Portal" />
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="id" href="https://access.redhat.com/documentation/id-id/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="th" href="https://access.redhat.com/documentation/th-th/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<link rel="alternate" hreflang="vi" href="https://access.redhat.com/documentation/vi-vn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform/index" />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="revision" product="eaeb48dd-1e4b-4328-a0ea-76ba9618d6cd" title="b75d435d-9ac5-4503-ac22-357e0311ea7c" page="352dc848-571e-45d2-b4ef-fecd5735dddf" revision="17c003c10a49787b9b27c8c0f56e57642f2ce527:en-us" body="f17ca09d9e55a557f2059411baa4c3d4.html" toc="a0932445ce9df03ed1089eead5f35ed8.json" />

    <title>Assisted Installer for OpenShift Container Platform Assisted Installer for OpenShift Container Platform 2022 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />
<link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css" />

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/assisted_installer_for_openshift_container_platform\/2022\/html-single\/assisted_installer_for_openshift_container_platform\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"d8ea0bce2d740dacbdfe0257cf55baa0e33f7fb8468a26d055ce75daaaa2d315"}}</script>
<script src="/sites/dxp-docs/files/js/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
  <script src="//www.redhat.com/dtm.js"></script><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-139-77b4fb8768-25dr9" />
<meta name="avalon-version" content="27861f77" />
<meta name="cp-chrome-build-date" content="2023-10-06T19:17:59.039Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "27861f77",
        builddate : "2023-10-06T19:17:59.039Z",        fetchdate : "2023-10-10T17:45:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico" /><link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap-grid.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/main.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/components.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/pages.css?v=27861f77" />

<link href="https://access.redhat.com/webassets/avalon/s/chosen.css?v=27861f77" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/pfe-navigation--lightdom.min.css" />
<!-- /cssInclude -->
<script src="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/ie-polyfills.js?v=27861f77"></script>

<script async>
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="https://access.redhat.com/webassets/avalon/j/lib/require.js?v=27861f77" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="https://access.redhat.com/chrome_themes/nimbus/js/new-nav.js?v=27861f77" ></script>
<!-- /CP_PRIMER_HEAD -->

  </head>
  <body>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#cp-main" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg" />
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linkType="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linkType="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="//www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linkType="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat&#039;s specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linkType="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="//redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linkType="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>                            <div>Or <a href="/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu">
                    <button class="pfe-navigation__secondary-link">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true"></pfe-icon>English
                    </button>

                    <pfe-navigation-dropdown dropdown-width="single">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en" data-analytics-text="English">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown>
                </div>                <rh-account-dropdown slot="account"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing" slot="main-menu__dropdown--product__product-listing" consistent-height>
                    <h3 slot="details-nav">Infrastructure and Management                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Cloud Computing                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Storage                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Runtimes                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Integration and Automation                    </h3>
                    <div slot="details">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linkType="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            </pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["Assisted Installer for OpenShift Container Platform","\/documentation\/en-us\/assisted_installer_for_openshift_container_platform"],["2022","\/documentation\/en-us\/assisted_installer_for_openshift_container_platform\/2022"],["Assisted Installer for OpenShift Container Platform","\/documentation\/en-us\/assisted_installer_for_openshift_container_platform\/2022\/html\/assisted_installer_for_openshift_container_platform"],["Assisted Installer for OpenShift Container Platform","\/documentation\/en-us\/assisted_installer_for_openshift_container_platform\/2022\/html\/assisted_installer_for_openshift_container_platform\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback class="hidden"></div>


    </div>
        <div class="container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer pvof-doc__content-wrapper__outer--css-not-removed">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container">
              <button class="j-sidebar__menu-trigger content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" class="j-doc-nav__link ">
    Assisted Installer for OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-on-prem-assisted" class="j-doc-nav__link j-doc-nav__link--has-children">
    1. Installing an on-premise cluster using the Assisted Installer
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1. Installing an on-premise cluster using the Assisted Installer"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1. Installing an on-premise cluster using the Assisted Installer"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#using-the-assisted-installer_installing-on-prem-assisted" class="j-doc-nav__link ">
    1.1. Using the Assisted Installer
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assisted-installer-api-support-policy" class="j-doc-nav__link ">
    1.2. API support for the Assisted Installer
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#preparing-to-install-with-ai" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Preparing to install with the Assisted Installer
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Preparing to install with the Assisted Installer"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Preparing to install with the Assisted Installer"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assisted-installer-prerequisites" class="j-doc-nav__link ">
    2.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assisted-installer-prerequisites_assisted-installer-preparing-to-install" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.2. Assisted Installer prerequisites
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.2. Assisted Installer prerequisites"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.2. Assisted Installer prerequisites"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#cpu_architectures" class="j-doc-nav__link ">
    2.2.1. CPU Architectures
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#hardware" class="j-doc-nav__link ">
    2.2.2. Hardware
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#networking" class="j-doc-nav__link ">
    2.2.3. Networking
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#preflight_validations" class="j-doc-nav__link ">
    2.2.4. Preflight validations
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-with-ui" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Installing with the Assisted Installer UI
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Installing with the Assisted Installer UI"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Installing with the Assisted Installer UI"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#pre-installation-considerations_installing-with-ui" class="j-doc-nav__link ">
    3.1. Pre-installation considerations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#setting-the-cluster-details_installing-with-ui" class="j-doc-nav__link ">
    3.2. Setting the cluster details
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-static-networks_installing-with-ui" class="j-doc-nav__link ">
    3.3. Optional: Configuring static networks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-operators_installing-with-ui" class="j-doc-nav__link ">
    3.4. Configuring Operators
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts-to-the-cluster_installing-with-ui" class="j-doc-nav__link ">
    3.5. Adding hosts to the cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-hosts_installing-with-ui" class="j-doc-nav__link ">
    3.6. Configuring hosts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-storage_installing-with-ui" class="j-doc-nav__link ">
    3.7. Configuring storage disks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-networking_installing-with-ui" class="j-doc-nav__link ">
    3.8. Configuring networking
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#pre-installation-validation_installing-with-ui" class="j-doc-nav__link ">
    3.9. Pre-installation validation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-the-cluster_installing-with-ui" class="j-doc-nav__link ">
    3.10. Installing the cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#completing-the-installation_installing-with-ui" class="j-doc-nav__link ">
    3.11. Completing the installation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-with-api" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Installing with the Assisted Installer API
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Installing with the Assisted Installer API"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Installing with the Assisted Installer API"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-the-openshift-cluster-manager-cli_installing-with-api" class="j-doc-nav__link ">
    4.1. Optional: Installing the OpenShift Cluster Manager CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#authenticating-with-the-rest-api_installing-with-api" class="j-doc-nav__link ">
    4.2. Authenticating with the REST API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#configuring-the-pull-secret_installing-with-api" class="j-doc-nav__link ">
    4.3. Configuring the pull secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#registering-a-new-cluster_installing-with-api" class="j-doc-nav__link ">
    4.4. Registering a new cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#modifying-a-cluster_installing-with-api" class="j-doc-nav__link ">
    4.5. Modifying a cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#registering-a-new-infrastructure-environment_installing-with-api" class="j-doc-nav__link ">
    4.6. Registering a new infrastructure environment
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#modifying-an-infrastructure-environment_installing-with-api" class="j-doc-nav__link ">
    4.7. Modifying an infrastructure environment
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts_installing-with-api" class="j-doc-nav__link ">
    4.8. Adding hosts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#modifying-hosts_installing-with-api" class="j-doc-nav__link ">
    4.9. Modifying hosts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#pre-installation-validation_installing-with-api" class="j-doc-nav__link ">
    4.10. Pre-installation validation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-the-cluster_installing-with-api" class="j-doc-nav__link ">
    4.11. Installing the cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_enabling-disk-encryption" class="j-doc-nav__link j-doc-nav__link--has-children">
    5. Optional: Enabling disk encryption
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5. Optional: Enabling disk encryption"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5. Optional: Enabling disk encryption"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_enabling-tpm-v2-encryption_assembly_enabling-disk-encryption" class="j-doc-nav__link ">
    5.1. Enabling TPM v2 encryption
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_enabling-tang-encryption_assembly_enabling-disk-encryption" class="j-doc-nav__link ">
    5.2. Enabling Tang encryption
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources" class="j-doc-nav__link ">
    5.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_installing-operators" class="j-doc-nav__link j-doc-nav__link--has-children">
    6. Optional: Installing and modifying Operators
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6. Optional: Installing and modifying Operators"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6. Optional: Installing and modifying Operators"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_configuring-operators-intro_assembly_installing-operators" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.1. Installing Operators
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.1. Installing Operators"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.1. Installing Operators"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_installing-openshift-virtualization_assembly_installing-operators" class="j-doc-nav__link ">
    6.1.1. Installing OpenShift Virtualization
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_installing-multicluster-engine_assembly_installing-operators" class="j-doc-nav__link ">
    6.1.2. Installing Multicluster Engine (MCE)
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_installing-openshift-data-foundation_assembly_installing-operators" class="j-doc-nav__link ">
    6.1.3. Installing OpenShift Data Foundation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#modifying-operators_assembly_installing-operators" class="j-doc-nav__link ">
    6.2. Modifying Operators
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_configuring-the-discovery-image" class="j-doc-nav__link j-doc-nav__link--has-children">
    7. Configuring the discovery image
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7. Configuring the discovery image"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7. Configuring the discovery image"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#creating-an-ignition-configuration-file_assembly_configuring-the-discovery-image" class="j-doc-nav__link ">
    7.1. Creating an Ignition configuration file
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#modifying-the-discovery-image-with-ignition_assembly_configuring-the-discovery-image" class="j-doc-nav__link ">
    7.2. Modifying the discovery image with Ignition
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_booting-hosts-with-the-discovery-image" class="j-doc-nav__link j-doc-nav__link--has-children">
    8. Booting hosts with the discovery image
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8. Booting hosts with the discovery image"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8. Booting hosts with the discovery image"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#creating-an-iso-image-on-a-usb-drive_assembly_booting-hosts-with-the-discovery-image" class="j-doc-nav__link ">
    8.1. Creating an ISO image on a USB drive
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#booting-with-a-usb-drive_assembly_booting-hosts-with-the-discovery-image" class="j-doc-nav__link ">
    8.2. Booting with a USB drive
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#install-booting-from-an-iso-over-http-redfish_assembly_booting-hosts-with-the-discovery-image" class="j-doc-nav__link ">
    8.3. Booting from an HTTP-hosted ISO image using the Redfish API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#booting-hosts-using-ipxe_assembly_booting-hosts-with-the-discovery-image" class="j-doc-nav__link ">
    8.4. Booting hosts using iPXE
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_role-assignment" class="j-doc-nav__link j-doc-nav__link--has-children">
    9. Assigning roles to hosts
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9. Assigning roles to hosts"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9. Assigning roles to hosts"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_assign-role-from-the-ui_assembly_role-assignment" class="j-doc-nav__link ">
    9.1. Select a role using the UI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#select-a-role-using-the-api_assembly_role-assignment" class="j-doc-nav__link ">
    9.2. Select a role using the API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_auto-assign-role_assembly_role-assignment" class="j-doc-nav__link ">
    9.3. Auto-assigning roles
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources_2" class="j-doc-nav__link ">
    9.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_pre-installation-validation" class="j-doc-nav__link j-doc-nav__link--has-children">
    10. Pre-installation validation
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10. Pre-installation validation"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10. Pre-installation validation"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_definition-of-pre-installation-validations_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.1. Definition of pre-installation validations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_blocking-and-non-blocking-validations_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.2. Blocking and non blocking validations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_validation-types_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.3. Validation types
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#host_validations" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.4. Host validations
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.4. Host validations"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.4. Host validations"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_getting-host-validations-by-using-rest-api_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.4.1. Getting host validations by using the REST API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#ref_host-validations-in-detail_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.4.2. Host validations in detail
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#cluster_validations" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.5. Cluster validations
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.5. Cluster validations"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.5. Cluster validations"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_getting-cluster-validations-by-using-rest-api_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.5.1. Getting cluster validations by using the REST API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#ref_cluster-validations-in-detail_assembly_pre-installation-validation" class="j-doc-nav__link ">
    10.5.2. Cluster validations in detail
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11. Network configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11. Network configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11. Network configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_cluster-networking_assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.1. Cluster networking
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.1. Cluster networking"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.1. Cluster networking"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#limitations" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.1.1. Limitations
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.1.1. Limitations"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.1.1. Limitations"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#sdn" class="j-doc-nav__link ">
    11.1.1.1. SDN
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#ovn_kubernetes" class="j-doc-nav__link ">
    11.1.1.2. OVN-Kubernetes
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#cluster_network" class="j-doc-nav__link ">
    11.1.2. Cluster network
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#machine_network" class="j-doc-nav__link ">
    11.1.3. Machine network
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#sno_compared_to_multi_node_cluster" class="j-doc-nav__link ">
    11.1.4. SNO compared to multi-node cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#air_gapped_environments" class="j-doc-nav__link ">
    11.1.5. Air-gapped environments
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_dhcp-vip-allocation_assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.2. DHCP VIP allocation
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.2. DHCP VIP allocation"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.2. DHCP VIP allocation"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_payload_to_enable_autoallocation" class="j-doc-nav__link ">
    11.2.1. Example payload to enable autoallocation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_payload_to_disable_autoallocation" class="j-doc-nav__link ">
    11.2.2. Example payload to disable autoallocation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources_3" class="j-doc-nav__link ">
    11.3. Additional resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_understanding-differences-between-user-managed-networking-and-cluster-managed-networking_assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.4. Understanding differences between User Managed Networking and Cluster Managed Networking
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.4. Understanding differences between User Managed Networking and Cluster Managed Networking"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.4. Understanding differences between User Managed Networking and Cluster Managed Networking"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#validations" class="j-doc-nav__link ">
    11.4.1. Validations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_static-network-configuration_assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.5. Static network configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.5. Static network configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.5. Static network configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#prerequisites" class="j-doc-nav__link ">
    11.5.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#nmstate_configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.5.2. NMState configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.5.2. NMState configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.5.2. NMState configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_of_nmstate_configuration" class="j-doc-nav__link ">
    11.5.2.1. Example of NMState configuration
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#mac_interface_mapping" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.5.3. MAC interface mapping
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.5.3. MAC interface mapping"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.5.3. MAC interface mapping"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_of_mac_interface_mapping" class="j-doc-nav__link ">
    11.5.3.1. Example of MAC interface mapping
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_nmstate_configuration_examples" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.5.4. Additional NMState configuration examples
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.5.4. Additional NMState configuration examples"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.5.4. Additional NMState configuration examples"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#tagged_vlan" class="j-doc-nav__link ">
    11.5.4.1. Tagged VLAN
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#network_bond" class="j-doc-nav__link ">
    11.5.4.2. Network bond
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#applying-static-network-configuration_assembly_network-configuration" class="j-doc-nav__link ">
    11.6. Applying a static network configuration with the API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources_4" class="j-doc-nav__link ">
    11.7. Additional resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_converting-to-dual-stack-networking_assembly_network-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.8. Converting to dual-stack networking
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.8. Converting to dual-stack networking"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.8. Converting to dual-stack networking"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#prerequisites_2" class="j-doc-nav__link ">
    11.8.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_payload_for_single_node_openshift" class="j-doc-nav__link ">
    11.8.2. Example payload for Single Node OpenShift
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#example_payload_for_an_openshift_container_platform_cluster_consisting_of_many_nodes" class="j-doc-nav__link ">
    11.8.3. Example payload for an OpenShift Container Platform cluster consisting of many nodes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#limitations_2" class="j-doc-nav__link ">
    11.8.4. Limitations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources_5" class="j-doc-nav__link ">
    11.9. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#expanding-the-cluster" class="j-doc-nav__link j-doc-nav__link--has-children">
    12. Expanding the cluster
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12. Expanding the cluster"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12. Expanding the cluster"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#prerequisites_3" class="j-doc-nav__link ">
    12.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#checking-for-multiple-architectures_expanding-the-cluster" class="j-doc-nav__link ">
    12.2. Checking for multiple architectures
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts-with-the-ui_expanding-the-cluster" class="j-doc-nav__link ">
    12.3. Adding hosts with the UI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#ai-adding-hosts-with-the-api_expanding-the-cluster" class="j-doc-nav__link ">
    12.4. Adding hosts with the API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-primary-control-plane-node-healthy-cluster_expanding-the-cluster" class="j-doc-nav__link ">
    12.5. Installing a primary control plane node on a healthy cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-primary-control-plane-node-unhealthy-cluster_expanding-the-cluster" class="j-doc-nav__link ">
    12.6. Installing a primary control plane node on an unhealthy cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#additional_resources_6" class="j-doc-nav__link ">
    12.7. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_installing-on-nutanix" class="j-doc-nav__link j-doc-nav__link--has-children">
    13. Optional: Installing on Nutanix
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13. Optional: Installing on Nutanix"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13. Optional: Installing on Nutanix"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts-on-nutanix-with-the-ui_assembly_installing-on-nutanix" class="j-doc-nav__link ">
    13.1. Adding hosts on Nutanix with the UI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts-on-nutanix-with-the-api_assembly_installing-on-nutanix" class="j-doc-nav__link ">
    13.2. Adding hosts on Nutanix with the API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#nutanix-post-installation-configuration_assembly_installing-on-nutanix" class="j-doc-nav__link ">
    13.3. Nutanix post-installation configuration
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#installing-on-vsphere" class="j-doc-nav__link j-doc-nav__link--has-children">
    14. Optional: Installing on vSphere
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14. Optional: Installing on vSphere"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14. Optional: Installing on vSphere"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#adding-hosts-on-vsphere_installing-on-vsphere" class="j-doc-nav__link ">
    14.1. Adding hosts on vSphere
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#vsphere-post-installation-configuration_installing-on-vsphere" class="j-doc-nav__link ">
    14.2. vSphere post-installation configuration using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#vsphere-post-installation-configuration-console_installing-on-vsphere" class="j-doc-nav__link ">
    14.3. vSphere post-installation configuration using the UI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#assembly_troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    15. Troubleshooting
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15. Troubleshooting"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15. Troubleshooting"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#prerequisites_4" class="j-doc-nav__link ">
    15.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_troubleshooting-discovery-iso-issues_assembly_troubleshooting" class="j-doc-nav__link ">
    15.2. Troubleshooting discovery ISO issues
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#con_minimal-iso-image_assembly_troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.3. Minimal ISO Image
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.3. Minimal ISO Image"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.3. Minimal ISO Image"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#troubleshooting_minimal_iso_boot_failures" class="j-doc-nav__link ">
    15.3.1. Troubleshooting minimal ISO boot failures
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_verify-the-discovery-agent-is-running_assembly_troubleshooting" class="j-doc-nav__link ">
    15.4. Verify the discovery agent is running
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_verify-the-discovery-agent-can-access-the-assisted-service_assembly_troubleshooting" class="j-doc-nav__link ">
    15.5. Verify the agent can access the assisted-service
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_incorrect-boot-order_assembly_troubleshooting" class="j-doc-nav__link ">
    15.6. Correcting a host’s boot order
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#proc_partially-successful-installations_assembly_troubleshooting" class="j-doc-nav__link ">
    15.7. Rectifying partially-successful installations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform#idm140603917967408" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select">
                  <option value="/documentation/zh-cn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            한국어
          </option>
                  <option value="/documentation/ja-jp/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            日本語
          </option>
                  <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" selected=''>
            English
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/zh-cn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">한국어</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">English</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select">
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/pdf/assisted_installer_for_openshift_container_platform/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/pdf/assisted_installer_for_openshift_container_platform/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner">
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select">
                  <option value="/documentation/zh-cn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            한국어
          </option>
                  <option value="/documentation/ja-jp/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" >
            日本語
          </option>
                  <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" selected=''>
            English
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/zh-cn/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">한국어</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">日本語</a>
            </li>
                      <li>
              <a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">English</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select">
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/pdf/assisted_installer_for_openshift_container_platform/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html-single/assisted_installer_for_openshift_container_platform">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/pdf/assisted_installer_for_openshift_container_platform/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Assisted Installer for OpenShift Container Platform</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140603919290672"><div class="titlepage"><div><div class="producttitle"><span class="productname">Assisted Installer for OpenShift Container Platform</span> <span class="productnumber">2022</span></div><div><h2 class="subtitle">Assisted Installer User Guide</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm140603917967408">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Information about the Assisted Installer and its usage
			</div></div></div></div><hr/></div><section class="chapter" id="installing-on-prem-assisted"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Installing an on-premise cluster using the Assisted Installer</h1></div></div></div><p>
			You can install OpenShift Container Platform on on-premise hardware or on-premise VMs using the Assisted Installer. Installing OpenShift Container Platform using the Assisted Installer supports <code class="literal">x86_64</code>, <code class="literal">ppc64le</code>, <code class="literal">s390x</code> and <code class="literal">arm64</code> CPU architectures.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Currently installing OpenShift Container Platform on IBM zSystems (s390x) is only supported with RHEL KVM installations.
			</p></div></div><section class="section" id="using-the-assisted-installer_installing-on-prem-assisted"><div class="titlepage"><div><div><h2 class="title">1.1. Using the Assisted Installer</h2></div></div></div><p>
				The OpenShift Container Platform <a class="link" href="https://console.redhat.com/openshift/assisted-installer/clusters/~new">Assisted Installer</a> is a user-friendly installation solution offered on the <a class="link" href="http://console.redhat.com">Red Hat Hybrid Cloud Console</a>. The Assisted Installer supports the various deployment platforms with a focus on bare metal and vSphere infrastructures.
			</p><p>
				The Assisted Installer provides installation functionality as a service. This software-as-a-service (SaaS) approach has the following advantages:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Web user interface:</strong></span> The web user interface performs cluster installation without the user having to create the installation configuration files manually.
					</li><li class="listitem">
						<span class="strong strong"><strong>No bootstrap node:</strong></span> A bootstrap node is not required when installing with the Assisted Installer. The bootstrapping process executes on a node within the cluster.
					</li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Hosting:</strong></span> The Assisted Installer hosts:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Ignition files
							</li><li class="listitem">
								The installation configuration
							</li><li class="listitem">
								A discovery ISO
							</li><li class="listitem">
								The installer
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Streamlined installation workflow:</strong></span> Deployment does not require in-depth knowledge of OpenShift Container Platform. The Assisted Installer provides reasonable defaults and provides the installer as a service, which:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Eliminates the need to install and run the OpenShift Container Platform installer locally.
							</li><li class="listitem">
								Ensures the latest version of the installer up to the latest tested z-stream releases. Older versions remain available, if needed.
							</li><li class="listitem">
								Enables building automation by using the API without the need to run the OpenShift Container Platform installer locally.
							</li></ul></div></li><li class="listitem">
						<span class="strong strong"><strong>Advanced networking:</strong></span> The Assisted Installer supports IPv4 networking with SDN and OVN, IPv6 and dual stack networking with OVN only, NMState-based static IP addressing, and an HTTP/S proxy. OVN is the default Container Network Interface (CNI) for OpenShift Container Platform 4.12 and later releases, but you can still switch to use SDN.
					</li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Pre-installation validation:</strong></span> The Assisted Installer validates the configuration before installation to ensure a high probability of success. Validation includes:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Ensuring network connectivity
							</li><li class="listitem">
								Ensuring sufficient network bandwidth
							</li><li class="listitem">
								Ensuring connectivity to the registry
							</li><li class="listitem">
								Ensuring time synchronization between cluster nodes
							</li><li class="listitem">
								Verifying that the cluster nodes meet the minimum hardware requirements
							</li><li class="listitem">
								Validating the installation configuration parameters
							</li></ul></div></li><li class="listitem">
						<span class="strong strong"><strong>REST API:</strong></span> The Assisted Installer has a REST API, enabling automation.
					</li></ul></div><p>
				The Assisted Installer supports installing OpenShift Container Platform on premises in a connected environment, including with an optional HTTP/S proxy. It can install the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Highly available OpenShift Container Platform or Single Node OpenShift (SNO)
					</li><li class="listitem">
						OpenShift Container Platform on bare metal or vSphere with full platform integration, or other virtualization platforms without integration
					</li><li class="listitem">
						Optionally OpenShift Virtualization and OpenShift Data Foundation (formerly OpenShift Container Storage)
					</li></ul></div><p>
				The user interface provides an intuitive interactive workflow where automation does not exist or is not required. Users may also automate installations using the REST API.
			</p><p>
				See <a class="link" href="https://console.redhat.com/openshift/assisted-installer/clusters/~new">Install OpenShift with the Assisted Installer</a> to create an OpenShift Container Platform cluster with the Assisted Installer.
			</p></section><section class="section" id="assisted-installer-api-support-policy"><div class="titlepage"><div><div><h2 class="title">1.2. API support for the Assisted Installer</h2></div></div></div><p>
				Supported APIs for the Assisted Installer are stable for a minimum of three months from the announcement of deprecation.
			</p></section></section><section class="chapter" id="preparing-to-install-with-ai"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Preparing to install with the Assisted Installer</h1></div></div></div><p>
			Before installing a cluster, you must ensure the cluster nodes and network meet the requirements.
		</p><section class="section" id="assisted-installer-prerequisites"><div class="titlepage"><div><div><h2 class="title">2.1. Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You reviewed details about the OpenShift Container Platform installation and update processes.
					</li><li class="listitem">
						You read the documentation on selecting a cluster installation method and preparing it for users.
					</li><li class="listitem">
						If you use a firewall, you must configure it so that Assisted Installer can access the resources it requires to function.
					</li></ul></div></section><section class="section" id="assisted-installer-prerequisites_assisted-installer-preparing-to-install"><div class="titlepage"><div><div><h2 class="title">2.2. Assisted Installer prerequisites</h2></div></div></div><p>
				The Assisted Installer validates the following prerequisites to ensure successful installation.
			</p><section class="section" id="cpu_architectures"><div class="titlepage"><div><div><h3 class="title">2.2.1. CPU Architectures</h3></div></div></div><p>
					The Assisted installer is supported on the following cpu architectures:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							x86_64
						</li><li class="listitem">
							arm64
						</li><li class="listitem">
							ppc64le
						</li><li class="listitem">
							s390x
						</li></ul></div></section><section class="section" id="hardware"><div class="titlepage"><div><div><h3 class="title">2.2.2. Hardware</h3></div></div></div><p>
					The Assisted Installer requires one host with at least 8 CPU cores, 16.00 GiB RAM, and 100 GB disk size.
				</p><p>
					For the control plane, hosts must have at least the following resources:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							4 CPU cores
						</li><li class="listitem">
							16.00 GiB RAM
						</li><li class="listitem">
							100 GB storage
						</li><li class="listitem">
							10ms write speed or less for etcd <code class="literal">wal_fsync_duration_seconds</code>
						</li></ul></div><p>
					For workers, each host must have at least the following resources:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							2 CPU cores
						</li><li class="listitem">
							8.00 GiB RAM
						</li><li class="listitem">
							100 GB storage
						</li></ul></div></section><section class="section" id="networking"><div class="titlepage"><div><div><h3 class="title">2.2.3. Networking</h3></div></div></div><p>
					The network must meet the following requirements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A DHCP server unless using static IP addressing.
						</li><li class="listitem"><p class="simpara">
							A base domain name. You must ensure that the following requirements are met:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									There is no wildcard, such as <code class="literal">*.&lt;cluster_name&gt;.&lt;base_domain&gt;</code>, or the installation will not proceed.
								</li><li class="listitem">
									A DNS A/AAAA record for <code class="literal">api.&lt;cluster_name&gt;.&lt;base_domain&gt;</code>.
								</li><li class="listitem">
									A DNS A/AAAA record with a wildcard for <code class="literal">*.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;</code>.
								</li></ul></div></li><li class="listitem">
							Port <code class="literal">6443</code> is open for the API URL if you intend to allow users outside the firewall to access the cluster via the <code class="literal">oc</code> CLI tool.
						</li><li class="listitem">
							Port <code class="literal">443</code> is open for the console if you intend to allow users outside the firewall to access the console.
						</li><li class="listitem">
							A DNS A/AAAA record for each node in the cluster when using User Managed Networking, or the installation will not proceed. DNS A/AAAA records are required for each node in the cluster when using Cluster Managed Networking after installation is complete in order to connect to the cluster, but installation can proceed without the A/AAAA records when using Cluster Managed Networking.
						</li><li class="listitem">
							A DNS PTR record for each node in the cluster if you want to boot with the preset hostname when using static IP addressing. Otherwise, the Assisted Installer has an automatic node renaming feature when using static IP addressing that will rename the nodes to their network interface MAC address.
						</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						DNS A/AAAA record settings at top-level domain registrars can take significant time to update. Ensure the A/AAAA record DNS settings are working before installation to prevent installation delays.
					</p></div></div><p>
					The OpenShift Container Platform cluster’s network must also meet the following requirements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Connectivity between all cluster nodes
						</li><li class="listitem">
							Connectivity for each node to the internet
						</li><li class="listitem">
							Access to an NTP server for time synchronization between the cluster nodes
						</li></ul></div></section><section class="section" id="preflight_validations"><div class="titlepage"><div><div><h3 class="title">2.2.4. Preflight validations</h3></div></div></div><p>
					The Assisted Installer ensures the cluster meets the prerequisites before installation, because it eliminates complex post-installation troubleshooting, thereby saving significant amounts of time and effort. Before installing software on the nodes, the Assisted Installer conducts the following validations:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensures network connectivity
						</li><li class="listitem">
							Ensures sufficient network bandwidth
						</li><li class="listitem">
							Ensures connectivity to the registry
						</li><li class="listitem">
							Ensures time synchronization between cluster nodes
						</li><li class="listitem">
							Verifies that the cluster nodes meet the minimum hardware requirements
						</li><li class="listitem">
							Validates the installation configuration parameters
						</li></ul></div><p>
					If the Assisted Installer does not successfully validate the foregoing requirements, installation will not proceed.
				</p></section></section></section><section class="chapter" id="installing-with-ui"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Installing with the Assisted Installer UI</h1></div></div></div><p>
			After you ensure the cluster nodes and network requirements are met, you can begin installing the cluster.
		</p><section class="section" id="pre-installation-considerations_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.1. Pre-installation considerations</h2></div></div></div><p>
				Before installing OpenShift Container Platform with the Assisted Installer, you must consider the following configuration choices:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Which base domain to use
					</li><li class="listitem">
						Which OpenShift Container Platform product version to install
					</li><li class="listitem">
						Whether to install a full cluster or single-node OpenShift
					</li><li class="listitem">
						Whether to use a DHCP server or a static network configuration
					</li><li class="listitem">
						Whether to use IPv4 or dual-stack networking
					</li><li class="listitem">
						Whether to install OpenShift Virtualization
					</li><li class="listitem">
						Whether to install Red Hat OpenShift Data Foundation
					</li><li class="listitem">
						Whether to install Multicluster Engine
					</li><li class="listitem">
						Whether to integrate with the platform when installing on vSphere or Nutanix
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you intend to install any of the Operators, refer to the relevant hardware and storage requirements in <a class="link" href="#assembly_installing-operators" title="Chapter 6. Optional: Installing and modifying Operators">Optional:Installing Operators</a>.
				</p></div></div></section><section class="section" id="setting-the-cluster-details_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.2. Setting the cluster details</h2></div></div></div><p>
				To create a cluster with the Assisted Installer web user interface, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the <a class="link" href="https://console.redhat.com">RedHat Hybrid Cloud Console</a>.
					</li><li class="listitem">
						In the menu, click <span class="strong strong"><strong>OpenShift</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create cluster</strong></span>.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Datacenter</strong></span> tab.
					</li><li class="listitem">
						Under the <span class="strong strong"><strong>Assisted Installer</strong></span> section, select <span class="strong strong"><strong>Create cluster</strong></span>.
					</li><li class="listitem">
						Enter a name for the cluster in the <span class="strong strong"><strong>Cluster name</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Enter a base domain for the cluster in the <span class="strong strong"><strong>Base domain</strong></span> field. All subdomains for the cluster will use this base domain.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The base domain must be a valid DNS name. You must not have a wild card domain set up for the base domain.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Select the version of OpenShift Container Platform to install.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For IBM Power and IBM zSystems platforms, only OpenShift Container Platform version 4.13 and later is supported.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optional: Select <span class="strong strong"><strong>Install single node Openshift (SNO)</strong></span> if you want to install OpenShift Container Platform on a single node.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Currently, SNO is not supported on IBM zSystems and IBM Power platforms.
						</p></div></div></li><li class="listitem">
						Optional: The Assisted Installer already has the pull secret associated to your account. If you want to use a different pull secret, select <span class="strong strong"><strong>Edit pull secret</strong></span>.
					</li><li class="listitem">
						Optional: Assisted Installer defaults to using <code class="literal">x86_64</code> CPU architecture. If you are installing OpenShift Container Platform on a different architecture select the respective architecture to use. Valid values are <code class="literal">arm64</code>, <code class="literal">ppc64le</code>, and <code class="literal">s390x</code>. Keep in mind, some features are not available with <code class="literal">arm64</code>, <code class="literal">ppc64le</code>, and <code class="literal">s390x</code> CPU architectures.
					</li><li class="listitem">
						Optional: The Assisted Installer defaults to DHCP networking. If you are using a static IP configuration, bridges or bonds for the cluster nodes instead of DHCP reservations, select <span class="strong strong"><strong>Static IP, bridges, and bonds</strong></span>.
					</li><li class="listitem">
						Optional: If you want to enable encryption of the installation disks, under <span class="strong strong"><strong>Enable encryption of installation disks</strong></span> you can select <span class="strong strong"><strong>Control plane node, worker</strong></span> for single-node OpenShift. For multi-node clusters, you can select <span class="strong strong"><strong>Control plane nodes</strong></span> to encrypt the control plane node installation disks and select <span class="strong strong"><strong>Workers</strong></span> to encrypt worker node installation disks.
					</li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You cannot change the base domain, the SNO checkbox, the CPU architecture, the host’s network configuration, or the disk-encryption after installation begins.
				</p></div></div></section><section class="section" id="configuring-static-networks_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.3. Optional: Configuring static networks</h2></div></div></div><p>
				The Assisted Installer supports IPv4 networking with SDN and OVN, and supports IPv6 and dual stack networking with OVN only. The Assisted Installer supports configuring the network with static network interfaces with IP address/MAC address mapping. The Assisted Installer also supports configuring host network interfaces with the NMState library, a declarative network manager API for hosts. You can use NMState to deploy hosts with static IP addressing, bonds, VLANs and other advanced networking features. First, you must set network-wide configurations. Then, you must create a host-specific configuration for each host.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select the internet protocol version. Valid options are <span class="strong strong"><strong>IPv4</strong></span> and <span class="strong strong"><strong>Dual stack</strong></span>.
					</li><li class="listitem">
						If the cluster hosts are on a shared VLAN, enter the VLAN ID.
					</li><li class="listitem"><p class="simpara">
						Enter the network-wide IP addresses. If you selected <span class="strong strong"><strong>Dual stack</strong></span> networking, you must enter both IPv4 and IPv6 addresses.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the cluster network’s IP address range in CIDR notation.
							</li><li class="listitem">
								Enter the default gateway IP address.
							</li><li class="listitem">
								Enter the DNS server IP addresss.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Enter the host-specific configuration.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								If you are only setting a static IP address that uses a single network interface, use the form view to enter the IP address and the MAC address for each host.
							</li><li class="listitem">
								If you are using multiple interfaces, bonding, or other advanced networking features, use the YAML view and enter the desired network state for each host using NMState syntax. Then, add the MAC address and interface name for each host interface used in your network configuration.
							</li></ol></div></li></ol></div><div class="itemizedlist _additional_resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional_resources" type="disc"><li class="listitem">
						<a class="link" href="http://nmstate.io">NMState version 2.1.4</a>
					</li></ul></div></section><section class="section" id="configuring-operators_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.4. Configuring Operators</h2></div></div></div><p>
				The Assisted Installer can install with certain Operators configured. The Operators include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						OpenShift Virtualization
					</li><li class="listitem">
						Multicluster Engine (MCE) for Kubernetes
					</li><li class="listitem">
						OpenShift Data Foundation
					</li><li class="listitem">
						Logical Volume Manager (LVM) Storage
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					For a detailed description of each of the Operators, together with hardware requirements, storage considerations, interdependencies, and additional installation instructions, see <span class="emphasis"><em>Additional Resources</em></span>.
				</p></div></div><p>
				This step is optional. You can complete the installation without selecting an Operator.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						To install OpenShift Virtualization, select <span class="strong strong"><strong>Install OpenShift Virtualization</strong></span>.
					</li><li class="listitem">
						To install Multicluster Engine (MCE), select <span class="strong strong"><strong>Install multicluster engine</strong></span>.
					</li><li class="listitem">
						To install OpenShift Data Foundation, select <span class="strong strong"><strong>Install OpenShift Data Foundation</strong></span>.
					</li><li class="listitem">
						To install Logical Volume Manager, select <span class="strong strong"><strong>Install Logical Volume Manager</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span> to proceed to the next step.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_installing-openshift-virtualization_assembly_installing-operators" title="6.1.1. Installing OpenShift Virtualization">Installing the OpenShift Virtualization Operator</a>
					</li><li class="listitem">
						<a class="link" href="#proc_installing-multicluster-engine_assembly_installing-operators" title="6.1.2. Installing Multicluster Engine (MCE)">Installing the Multicluster Engine (MCE) Operator</a>
					</li><li class="listitem">
						<a class="link" href="#proc_installing-openshift-data-foundation_assembly_installing-operators" title="6.1.3. Installing OpenShift Data Foundation">Installing the OpenShift Data Foundation Operator</a>
					</li></ul></div></section><section class="section" id="adding-hosts-to-the-cluster_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.5. Adding hosts to the cluster</h2></div></div></div><p>
				You must add one or more hosts to the cluster. Adding a host to the cluster involves generating a discovery ISO. The discovery ISO runs Red Hat Enterprise Linux CoreOS (RHCOS) in-memory with an agent.
			</p><p>
				Perform the following procedure for each host on the cluster.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click the <span class="strong strong"><strong>Add hosts</strong></span> button and select the installation media.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <span class="strong strong"><strong>Minimal image file: Provision with virtual media</strong></span> to download a smaller image that will fetch the data needed to boot. The nodes must have virtual media capability. This is the recommended method for <code class="literal">x86_64</code> and <code class="literal">arm64</code> architectures.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Full image file: Provision with physical media</strong></span> to download the larger full image. This is the recommended method for the <code class="literal">ppc64le</code> architecture.
							</li><li class="listitem"><p class="simpara">
								Select <span class="strong strong"><strong>iPXE: Provision from your network server</strong></span> to boot the hosts using iPXE. This is the recommended method for the <code class="literal">s390x</code> architecture.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you install with iPXE on RHEL KVM, in some circumstances, the VMs on the KVM host are not rebooted on first boot and need to be started manually.
								</p></div></div></li></ol></div></li><li class="listitem">
						Optional: If the cluster hosts are behind a firewall that requires the use of a proxy, select <span class="strong strong"><strong>Configure cluster-wide proxy settings</strong></span>. Enter the username, password, IP address and port for the HTTP and HTTPS URLs of the proxy server.
					</li><li class="listitem">
						Add an SSH public key so that you can connect to the cluster nodes as the <code class="literal">core</code> user. Having a login to the cluster nodes can provide you with debugging information during the installation.
					</li><li class="listitem">
						Optional: If the cluster hosts are in a network with a re-encrypting man-in-the-middle (MITM) proxy, or if the cluster needs to trust certificates for other purposes such as container image registries, select <span class="strong strong"><strong>Configure cluster-wide trusted certificates</strong></span>. Add additional certificates in X.509 format.
					</li><li class="listitem">
						Configure the discovery image if needed.
					</li><li class="listitem">
						Optional: If you are installing on a platform and want to integrate with the platform, select <span class="strong strong"><strong>Integrate with your virtualization platform</strong></span>. You must boot all hosts and ensure they appear in the host inventory. All the hosts must be on the same platform.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Generate Discovery ISO</strong></span> or <span class="strong strong"><strong>Generate Script File</strong></span>.
					</li><li class="listitem">
						Download the discovery ISO or iPXE script.
					</li><li class="listitem">
						Boot the host(s) with the discovery image or iPXE script.
					</li></ol></div><div class="itemizedlist _additional_resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional_resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_configuring-the-discovery-image" title="Chapter 7. Configuring the discovery image">Configuring the discovery image</a> for additional details.
					</li><li class="listitem">
						<a class="link" href="#assembly_booting-hosts-with-the-discovery-image" title="Chapter 8. Booting hosts with the discovery image">Booting hosts with the discovery image</a> for additional details.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/de-de/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index#assembly_creating-virtual-machines_virt-getting-started">Red Hat Enterprise Linux 9 - Configuring and managing virtualization</a> for additional details.
					</li><li class="listitem">
						<a class="link" href="https://www.ibm.com/support/pages/how-configure-vios-media-repositoryvirtual-media-library-ex-aix-installrestore">How to configure a VIOS Media Repository/Virtual Media Library</a> for additional details.
					</li><li class="listitem">
						<a class="link" href="#adding-hosts-on-nutanix-with-the-ui_assembly_installing-on-nutanix" title="13.1. Adding hosts on Nutanix with the UI">Adding hosts on Nutanix with the UI</a>
					</li><li class="listitem">
						<a class="link" href="#adding-hosts-on-vsphere_installing-on-vsphere" title="14.1. Adding hosts on vSphere">Adding hosts on vSphere</a>
					</li></ul></div></section><section class="section" id="configuring-hosts_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.6. Configuring hosts</h2></div></div></div><p>
				After booting the hosts with the discovery ISO, the hosts will appear in the table at the bottom of the page. You can optionally configure the hostname and role for each host. You can also delete a host if necessary.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						From the <span class="strong strong"><strong>Options</strong></span> (⋮) menu for a host, select <span class="strong strong"><strong>Change hostname</strong></span>. If necessary, enter a new name for the host and click <span class="strong strong"><strong>Change</strong></span>. You must ensure that each host has a valid and unique hostname.
					</p><p class="simpara">
						Alternatively, from the <span class="strong strong"><strong>Actions</strong></span> list, select <span class="strong strong"><strong>Change hostname</strong></span> to rename multiple selected hosts. In the <span class="strong strong"><strong>Change Hostname</strong></span> dialog, type the new name and include <code class="literal">{{n}}</code> to make each hostname unique. Then click <span class="strong strong"><strong>Change</strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can see the new names appearing in the <span class="strong strong"><strong>Preview</strong></span> pane as you type. The name will be identical for all selected hosts, with the exception of a single-digit increment per host.
						</p></div></div></li><li class="listitem"><p class="simpara">
						From the <span class="strong strong"><strong>Options</strong></span> (⋮) menu, you can select <span class="strong strong"><strong>Delete host</strong></span> to delete a host. Click <span class="strong strong"><strong>Delete</strong></span> to confirm the deletion.
					</p><p class="simpara">
						Alternatively, from the <span class="strong strong"><strong>Actions</strong></span> list, select <span class="strong strong"><strong>Delete</strong></span> to delete multiple selected hosts at the same time. Then click <span class="strong strong"><strong>Delete hosts</strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In a regular deployment, a cluster can have three or more hosts, and three of these must be control plane hosts. If you delete a host that is also a control plane, or if you are left with only two hosts, you will get a message saying that the system is not ready. To restore a host, you will need to reboot it from the discovery ISO.
						</p></div></div></li><li class="listitem">
						From the <span class="strong strong"><strong>Options</strong></span> (⋮) menu for the host, optionally select <span class="strong strong"><strong>View host events</strong></span>. The events in the list are presented chronologically.
					</li><li class="listitem"><p class="simpara">
						For multi-host clusters, in the <span class="strong strong"><strong>Role</strong></span> column next to the host name, you can click on the menu to change the role of the host.
					</p><p class="simpara">
						If you do not select a role, the Assisted Installer will assign the role automatically. The minimum hardware requirements for control plane nodes exceed that of worker nodes. If you assign a role to a host, ensure that you assign the control plane role to hosts that meet the minimum hardware requirements.
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Status</strong></span> link to view hardware, network and operator validations for the host.
					</li><li class="listitem">
						Click the arrow to the left of a host name to expand the host details.
					</li></ol></div><p>
				Once all cluster hosts appear with a status of <span class="strong strong"><strong>Ready</strong></span>, proceed to the next step.
			</p></section><section class="section" id="configuring-storage_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.7. Configuring storage disks</h2></div></div></div><p>
				After discovering and configuring the cluster hosts, you can optionally configure the storage disks for each host.
			</p><p>
				Any host configurations possible here are discussed in the Configuring Hosts section. See the additional resources below for the link.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						To the left of the checkbox next to a host name, click to display the storage disks for that host.
					</li><li class="listitem">
						If there are multiple storage disks for a host, you can select a different disk to act as the installation disk. Click the <span class="strong strong"><strong>Role</strong></span> dropdown list for the disk, and then select <span class="strong strong"><strong>Installation disk</strong></span>. The role of the previous installation disk changes to <span class="strong strong"><strong>None</strong></span>.
					</li><li class="listitem">
						All bootable disks are marked for reformatting during the installation by default, with the exception of read-only disks such as CDROMs. Deselect the <span class="strong strong"><strong>Format</strong></span> checkbox to prevent a disk from being reformatted. The installation disk must be reformatted. Back up any sensitive data before proceeding.
					</li></ol></div><p>
				Once all disk drives appear with a status of <span class="strong strong"><strong>Ready</strong></span>, proceed to the next step.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-hosts_installing-with-ui" title="3.6. Configuring hosts">Configuring hosts</a>
					</li></ul></div></section><section class="section" id="configuring-networking_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.8. Configuring networking</h2></div></div></div><p>
				Before installing OpenShift Container Platform, you must configure the cluster network.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Networking</strong></span> page, select one of the following if it is not already selected for you:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Cluster-Managed Networking:</strong></span> Selecting cluster-managed networking means that the Assisted Installer will configure a standard network topology, including <code class="literal">keepalived</code> and Virtual Router Redundancy Protocol (VRRP) for managing the API and Ingress VIP addresses.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Currently, Cluster-Managed Networking is not supported on IBM zSystems and IBM Power in OpenShift Container Platform version 4.13.
								</p></div></div></li><li class="listitem">
								<span class="strong strong"><strong>User-Managed Networking</strong></span>: Selecting user-managed networking allows you to deploy OpenShift Container Platform with a non-standard network topology. For example, if you want to deploy with an external load balancer instead of <code class="literal">keepalived</code> and VRRP, or if you intend to deploy the cluster nodes across many distinct L2 network segments.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						For cluster-managed networking, configure the following settings:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Define the <span class="strong strong"><strong>Machine network</strong></span>. You can use the default network or select a subnet.
							</li><li class="listitem">
								Define an <span class="strong strong"><strong>API virtual IP</strong></span>. An API virtual IP provides an endpoint for all users to interact with, and configure the platform.
							</li><li class="listitem">
								Define an <span class="strong strong"><strong>Ingress virtual IP</strong></span>. An Ingress virtual IP provides an endpoint for application traffic flowing from outside the cluster.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						For user-managed networking, configure the following settings:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Select your <span class="strong strong"><strong>Networking stack type</strong></span>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>IPv4</strong></span>: Select this type when your hosts are only using IPv4.
									</li><li class="listitem">
										<span class="strong strong"><strong>Dual-stack</strong></span>: You can select dual-stack when your hosts are using IPv4 together with IPv6.
									</li></ul></div></li><li class="listitem">
								Define the <span class="strong strong"><strong>Machine network</strong></span>. You can use the default network or select a subnet.
							</li><li class="listitem">
								Define an <span class="strong strong"><strong>API virtual IP</strong></span>. An API virtual IP provides an endpoint for all users to interact with, and configure the platform.
							</li><li class="listitem">
								Define an <span class="strong strong"><strong>Ingress virtual IP</strong></span>. An Ingress virtual IP provides an endpoint for application traffic flowing from outside the cluster.
							</li><li class="listitem">
								Optional: You can select <span class="strong strong"><strong>Allocate IPs via DHCP server</strong></span> to automatically allocate the <span class="strong strong"><strong>API IP</strong></span> and <span class="strong strong"><strong>Ingress IP</strong></span> using the DHCP server.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Optional: Select <span class="strong strong"><strong>Use advanced networking</strong></span> to configure the following advanced networking properties:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Cluster network CIDR</strong></span>: Define an IP address block from which Pod IP addresses are allocated.
							</li><li class="listitem">
								<span class="strong strong"><strong>Cluster network host prefix</strong></span>: Define a subnet prefix length to assign to each node.
							</li><li class="listitem">
								<span class="strong strong"><strong>Service network CIDR</strong></span>: Define an IP address to use for service IP addresses.
							</li><li class="listitem">
								<span class="strong strong"><strong>Network type</strong></span>: Select either <span class="strong strong"><strong>Software-Defined Networking (SDN)</strong></span> for standard networking or <span class="strong strong"><strong>Open Virtual Networking (OVN)</strong></span> for IPv6, dual-stack networking, and telco features. In OpenShift Container Platform 4.12 and later releases, OVN is the default Container Network Interface (CNI).
							</li></ul></div></li></ol></div><div class="itemizedlist _additional_resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional_resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_network-configuration" title="Chapter 11. Network configuration">Network configuration</a>
					</li></ul></div></section><section class="section" id="pre-installation-validation_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.9. Pre-installation validation</h2></div></div></div><p>
				The Assisted Installer ensures the cluster meets the prerequisites before installation, because it eliminates complex post-installation troubleshooting, thereby saving significant amounts of time and effort. Before installing the cluster, ensure the cluster and each host pass pre-installation validation.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_pre-installation-validation" title="Chapter 10. Pre-installation validation">Pre-installation validation</a>
					</li></ul></div></section><section class="section" id="installing-the-cluster_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.10. Installing the cluster</h2></div></div></div><p>
				After you have completed the configuration and all the nodes are <span class="strong strong"><strong>Ready</strong></span>, you can begin installation. The installation process takes a considerable amount of time, and you can monitor the installation from the Assisted Installer web console. Nodes will reboot during the installation, and they will initialize after installation.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Press <span class="strong strong"><strong>Begin installation</strong></span>.
					</li><li class="listitem">
						Click on the link in the <span class="strong strong"><strong>Status</strong></span> column of the <span class="strong strong"><strong>Host Inventory</strong></span> list to see the installation status of a particular host.
					</li></ol></div></section><section class="section" id="completing-the-installation_installing-with-ui"><div class="titlepage"><div><div><h2 class="title">3.11. Completing the installation</h2></div></div></div><p>
				After the cluster is installed and initialized, the Assisted Installer indicates that the installation is finished. The Assisted Installer provides the console URL, the <code class="literal">kubeadmin</code> username and password, and the <code class="literal">kubeconfig</code> file. Additionally, the Assisted Installer provides cluster details including the OpenShift Container Platform version, base domain, CPU architecture, API and Ingress IP addresses, and the cluster and service network IP addresses.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed the <code class="literal">oc</code> CLI tool.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Make a copy of the <code class="literal">kubeadmin</code> username and password.
					</li><li class="listitem"><p class="simpara">
						Download the <code class="literal">kubeconfig</code> file and copy it to the <code class="literal">auth</code> directory under your working directory:
					</p><pre class="programlisting language-terminal">$ mkdir -p &lt;working_directory&gt;/auth</pre><pre class="programlisting language-terminal">$ cp kubeadmin &lt;working_directory&gt;/auth</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">kubeconfig</code> file is available for download for 24 hours after completing the installation.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">kubeconfig</code> file to your environment:
					</p><pre class="programlisting language-terminal">$ export KUBECONFIG=&lt;your working directory&gt;/auth/kubeconfig</pre></li><li class="listitem"><p class="simpara">
						Login with the <code class="literal">oc</code> CLI tool:
					</p><pre class="programlisting language-terminal">$ oc login -u kubeadmin -p &lt;password&gt;</pre><p class="simpara">
						Replace <code class="literal">&lt;password&gt;</code> with the password of the <code class="literal">kubeadmin</code> user.
					</p></li><li class="listitem">
						Click on the web console URL or click <span class="strong strong"><strong>Launch OpenShift Console</strong></span> to open the console.
					</li><li class="listitem">
						Enter the <code class="literal">kubeadmin</code> username and password. Follow the instructions in the OpenShift Container Platform console to configure an identity provider and configure alert receivers.
					</li><li class="listitem">
						Add a bookmark of the OpenShift Container Platform console.
					</li><li class="listitem">
						Complete any post-installation platform integration steps.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#nutanix-post-installation-configuration_assembly_installing-on-nutanix" title="13.3. Nutanix post-installation configuration">Nutanix post-installation configuration</a>
					</li><li class="listitem">
						<a class="link" href="#vsphere-post-installation-configuration_installing-on-vsphere" title="14.2. vSphere post-installation configuration using the CLI">vSphere post-installation configuration</a>
					</li></ul></div></section></section><section class="chapter" id="installing-with-api"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Installing with the Assisted Installer API</h1></div></div></div><p>
			After you ensure the cluster nodes and network requirements are met, you can begin installing the cluster using the Assisted Installer API. To use the API, you must perform the following procedures:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Set up the API authentication.
				</li><li class="listitem">
					Configure the pull secret.
				</li><li class="listitem">
					Register a new cluster definition.
				</li><li class="listitem">
					Create an infrastructure environment for the cluster.
				</li></ul></div><p>
			Once you perform these steps, you can modify the cluster definition, create discovery ISOs, add hosts to the cluster, and install the cluster. This document does not cover every endpoint of the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">Assisted Installer API</a>, but you can review all of the endpoints in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> or the <a class="link" href="https://github.com/openshift/assisted-service/blob/master/swagger.yaml">swagger.yaml</a> file.
		</p><section class="section" id="installing-the-openshift-cluster-manager-cli_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.1. Optional: Installing the OpenShift Cluster Manager CLI</h2></div></div></div><p>
				The OpenShift Cluster Manager (ocm) CLI tool enables you to interact with the OpenShift Cluster Manager from the command line. You can execute REST GET, POST, PATCH, and DELETE operations, generate API tokens, and list clusters among other features.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					OpenShift Cluster Manager CLI is a Developer Preview feature only. Developer Preview features are not supported by Red Hat in any way and are not functionally complete or production-ready. Do not use Developer Preview features for production or business-critical workloads. Developer Preview features provide early access to upcoming product features in advance of their possible inclusion in a Red Hat product offering, enabling customers to test functionality and provide feedback during the development process. These features might not have any documentation, are subject to change or removal at any time, and testing is limited. Red Hat might provide ways to submit feedback on Developer Preview features without an associated SLA.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install <code class="literal">jq</code>.
					</li><li class="listitem">
						Log in to the <a class="link" href="https://console.redhat.com/openshift/assisted-installer/clusters">OpenShift Cluster Manager</a> as a user with cluster creation privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the menu, click <span class="strong strong"><strong>OpenShift</strong></span>.
					</li><li class="listitem">
						In the submenu, click <span class="strong strong"><strong>Downloads</strong></span>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Tokens</strong></span> section under <span class="strong strong"><strong>OpenShift Cluster Manager API Token</strong></span>, click <span class="strong strong"><strong>View API Token</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Load Token</strong></span>.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Disable pop-up blockers.
						</p></div></div></li><li class="listitem">
						In the <span class="strong strong"><strong>Your API token</strong></span> section, copy the offline token.
					</li><li class="listitem"><p class="simpara">
						In your terminal, set the offline token to the <code class="literal">OFFLINE_TOKEN</code> variable:
					</p><pre class="programlisting language-terminal">$ export OFFLINE_TOKEN=&lt;copied_api_token&gt;</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						To make the offline token permanent, add it to your profile.
					</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Download ocm CLI</strong></span>.
					</li><li class="listitem">
						Copy the downloaded file to your path. For example, copy the file to <code class="literal">/usr/bin</code> or <code class="literal">~/.local/bin</code> and create an <code class="literal">ocm</code> symbolic link.
					</li><li class="listitem"><p class="simpara">
						Copy and paste the authentication command to your terminal and press <span class="strong strong"><strong>Enter</strong></span> to login:
					</p><pre class="programlisting language-terminal">$ ocm login --token="${OFFLINE_TOKEN}"</pre></li></ol></div></section><section class="section" id="authenticating-with-the-rest-api_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.2. Authenticating with the REST API</h2></div></div></div><p>
				API calls require authentication with the API token. Assuming you use <code class="literal">API_TOKEN</code> as a variable name, add <code class="literal">-H "Authorization: Bearer ${API_TOKEN}"</code> to API calls to authenticate with the REST API.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The API token expires after 15 minutes.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						(Optional) You have installed the OpenShift Cluster Manager (ocm) CLI tool.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the <code class="literal">API_TOKEN</code> variable using the <code class="literal">OFFLINE_TOKEN</code> to validate the user.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								(Optional) On the command line terminal, execute the following command:
							</p><pre class="programlisting language-terminal">$ export API_TOKEN=$( \
  curl \
  --silent \
  --header "Accept: application/json" \
  --header "Content-Type: application/x-www-form-urlencoded" \
  --data-urlencode "grant_type=refresh_token" \
  --data-urlencode "client_id=cloud-services" \
  --data-urlencode "refresh_token=${OFFLINE_TOKEN}" \
  "https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token" \
  | jq --raw-output ".access_token" \
)</pre></li><li class="listitem"><p class="simpara">
								(Optional) On the command line terminal, login to the <code class="literal">ocm</code> client:
							</p><pre class="programlisting language-terminal">$ ocm login --token="${OFFLINE_TOKEN}"</pre><p class="simpara">
								Then, generate an API token:
							</p><pre class="programlisting language-terminal">$ export API_TOKEN=$(ocm token)</pre></li></ol></div></li></ol></div><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p class="simpara">
						Create a script in your path for one of the token generating methods. For example:
					</p><pre class="programlisting language-terminal">$ vim ~/.local/bin/refresh-token</pre><pre class="programlisting language-bash">export API_TOKEN=$( \
  curl \
  --silent \
  --header "Accept: application/json" \
  --header "Content-Type: application/x-www-form-urlencoded" \
  --data-urlencode "grant_type=refresh_token" \
  --data-urlencode "client_id=cloud-services" \
  --data-urlencode "refresh_token=${OFFLINE_TOKEN}" \
  "https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token" \
  | jq --raw-output ".access_token" \
)</pre><p class="simpara">
						Then, save the file.
					</p></li><li class="listitem"><p class="simpara">
						Change the file mode to make it executable:
					</p><pre class="programlisting language-terminal">$ chmod +x ~/.local/bin/refresh-token</pre></li><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Verify that you can access the API by running the following command:
					</p><pre class="programlisting language-terminal">$ curl -s https://api.openshift.com/api/assisted-install/v2/component-versions -H "Authorization: Bearer ${API_TOKEN}" | jq</pre><div class="white-space-pre white-space-pre"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-bash">{
  "release_tag": "v2.11.3",
  "versions": {
    "assisted-installer": "registry.redhat.io/rhai-tech-preview/assisted-installer-rhel8:v1.0.0-211",
    "assisted-installer-controller": "registry.redhat.io/rhai-tech-preview/assisted-installer-reporter-rhel8:v1.0.0-266",
    "assisted-installer-service": "quay.io/app-sre/assisted-service:78d113a",
    "discovery-agent": "registry.redhat.io/rhai-tech-preview/assisted-installer-agent-rhel8:v1.0.0-195"
  }
}</pre>

						</p></div></li></ol></div></section><section class="section" id="configuring-the-pull-secret_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.3. Configuring the pull secret</h2></div></div></div><p>
				Many of the Assisted Installer API calls require the pull secret. Download the pull secret to a file so that you can reference it in API calls. The pull secret is a JSON object that will be included as a value within the request’s JSON object. The pull secret JSON must be formatted to escape the quotes. For example:
			</p><div class="formalpara"><p class="title"><strong>Before</strong></p><p>
					
<pre class="programlisting language-javscript">{"auths":{"cloud.openshift.com": ...</pre>

				</p></div><div class="formalpara"><p class="title"><strong>After</strong></p><p>
					
<pre class="programlisting language-javascript">{\"auths\":{\"cloud.openshift.com\": ...</pre>

				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the menu, click <span class="strong strong"><strong>OpenShift</strong></span>.
					</li><li class="listitem">
						In the submenu, click <span class="strong strong"><strong>Downloads</strong></span>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Tokens</strong></span> section under <span class="strong strong"><strong>Pull secret</strong></span>, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						To use the pull secret from a shell variable, execute the following command:
					</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ export PULL_SECRET=$(cat ~/Downloads/pull-secret.txt | jq -R .)</pre></li><li class="listitem"><p class="simpara">
						To slurp the pull secret file using <code class="literal">jq</code>, reference it in the <code class="literal">pull_secret</code> variable, piping the value to <code class="literal">tojson</code> to ensure that it is properly formatted as escaped JSON. For example:
					</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl https://api.openshift.com/api/assisted-install/v2/clusters \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
        --slurpfile pull_secret ~/Downloads/pull-secret.txt ' <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>
    {
        "name": "testcluster",
        "high_availability_mode": "None",
        "openshift_version": "4.11",
        "pull_secret": $pull_secret[0] | tojson, <span id="CO1-2"><!--Empty--></span><span class="callout">2</span>
        "base_dns_domain": "example.com"
    }
')"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Slurp the pull secret file.
							</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Format the pull secret to escaped JSON format.
							</div></dd></dl></div></li></ol></div></section><section class="section" id="registering-a-new-cluster_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.4. Registering a new cluster</h2></div></div></div><p>
				To register a new cluster definition with the API, use the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/v2RegisterCluster">/v2/clusters</a> endpoint. Registering a new cluster requires the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">name</code>
					</li><li class="listitem">
						<code class="literal">openshift-version</code>
					</li><li class="listitem">
						<code class="literal">pull_secret</code>
					</li><li class="listitem">
						<code class="literal">cpu_architecture</code>
					</li></ul></div><p>
				See the <code class="literal">cluster-create-params</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> for details on the fields you can set when registering a new cluster. When setting the <code class="literal">olm_operators</code> field, see <span class="emphasis"><em>Additional Resources</em></span> for details on installing Operators.
			</p><p>
				After you create the cluster definition, you can modify the cluster definition and provide values for additional settings. For details on modifying a cluster, see <span class="emphasis"><em>Additional Resources</em></span>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a valid <code class="literal">API_TOKEN</code>. Tokens expire every 15 minutes.
					</li><li class="listitem">
						You have downloaded the pull secret.
					</li><li class="listitem">
						Optional: You have assigned the pull secret to the <code class="literal">$PULL_SECRET</code> variable.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Register a new cluster.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Optional: You can register a new cluster by slurping the pull secret file in the request:
							</p><pre class="programlisting language-terminal">$ curl -s -X POST https://api.openshift.com/api/assisted-install/v2/clusters \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
    --slurpfile pull_secret ~/Downloads/pull-secret.txt '
{
    "name": "testcluster",
    "openshift_version": "4.11",
    "cpu_architecture" : "&lt;architecture_name&gt;" <span id="CO2-1"><!--Empty--></span><span class="callout">1</span>
    "high_availability_mode": &lt;cluster_type&gt;, <span id="CO2-2"><!--Empty--></span><span class="callout">2</span>
    "base_dns_domain": "example.com",
    "pull_secret": $pull_secret[0] | tojson
}
')" | jq '.id'</pre><div class="admonition note"><div class="admonition_header">Note</div><div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Use any of the following values: <code class="literal">x86_64</code>, <code class="literal">arm64</code>, <code class="literal">ppc64le</code>, <code class="literal">s390x</code>, <code class="literal">multi</code>.
										</div></dd><dt><a href="#CO2-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Use the default value <code class="literal">full</code> to represent a multi-node OpenShift cluster, or <code class="literal">none</code> to represent a single-node OpenShift cluster.
										</div></dd></dl></div></div></div></li><li class="listitem"><p class="simpara">
								Optional: You can register a new cluster by writing the configuration to a JSON file and then referencing it in the request:
							</p><pre class="programlisting language-bash white-space-pre white-space-pre">cat &lt;&lt; EOF &gt; cluster.json
{
  "name": "testcluster",
  "openshift_version": "4.11",
  "high_availability_mode": "&lt;cluster_type&gt;",
  "base_dns_domain": "example.com",
  "pull_secret": $PULL_SECRET
}
EOF</pre><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl -s -X POST "https://api.openshift.com/api/assisted-install/v2/clusters" \
  -d @./cluster.json \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
  | jq '.id'</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Assign the returned <code class="literal">cluster_id</code> to the <code class="literal">CLUSTER_ID</code> variable and export it:
					</p><pre class="programlisting language-terminal">$ export CLUSTER_ID=&lt;cluster_id&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you close your terminal session, you need to export the <code class="literal">CLUSTER_ID</code> variable again in a new terminal session.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Check the status of the new cluster:
					</p><pre class="screen white-space-pre white-space-pre">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
  | jq</pre></li></ol></div><p>
				Once you register a new cluster definition, create the infrastructure environment for the cluster.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot see the cluster configuration settings in the Assisted Installer user interface until you create the infrastructure environment.
				</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_installing-operators" title="Chapter 6. Optional: Installing and modifying Operators">Installing Operators</a>
					</li><li class="listitem">
						<a class="link" href="#modifying-a-cluster_installing-with-api" title="4.5. Modifying a cluster">Modifying a cluster</a>
					</li></ul></div></section><section class="section" id="modifying-a-cluster_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.5. Modifying a cluster</h2></div></div></div><p>
				To modify a cluster definition with the API, use the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/V2UpdateCluster">/v2/clusters/{cluster_id}</a> endpoint. Modifying a cluster resource is a common operation for adding settings such as changing the network type or enabling user-managed networking. See the <code class="literal">v2-cluster-update-params</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> for details on the fields you can set when modifying a cluster definition. See <a class="link" href="#assembly_installing-operators" title="Chapter 6. Optional: Installing and modifying Operators">Installing and modifying Operators</a> for details on defining Operators within a cluster.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a new cluster resource.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Modify the cluster. For example:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/clusters/${CLUSTER_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
{
    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDZrD4LMkAEeoU2vShhF8VM+cCZtVRgB7tqtsMxms2q3TOJZAgfuqReKYWm+OLOZTD+DO3Hn1pah/mU3u7uJfTUg4wEX0Le8zBu9xJVym0BVmSFkzHfIJVTn6SfZ81NqcalisGWkpmkKXVCdnVAX6RsbHfpGKk9YPQarmRCn5KzkelJK4hrSWpBPjdzkFXaIpf64JBZtew9XVYA3QeXkIcFuq7NBuUH9BonroPEmIXNOa41PUP1IWq3mERNgzHZiuU8Ks/pFuU5HCMvv4qbTOIhiig7vidImHPpqYT/TCkuVi5w0ZZgkkBeLnxWxH0ldrfzgFBYAxnpTU8Ih/4VhG538Ix1hxPaM6cXds2ic71mBbtbSrk+zjtNPaeYk1O7UpcCw4jjHspU/rVV/DY51D5gSiiuaFPBMucnYPgUxy4FMBFfGrmGLIzTKiLzcz0DiSz1jBeTQOX++1nz+KDLBD8CPdi5k4dq7lLkapRk85qdEvgaG5RlHMSPSS3wDrQ51fD8= user@hostname"
}
' | jq</pre></li></ol></div></section><section class="section" id="registering-a-new-infrastructure-environment_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.6. Registering a new infrastructure environment</h2></div></div></div><p>
				Once you register a new cluster definition with the Assisted Installer API, create an infrastructure environment using the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/RegisterInfraEnv">v2/infra-envs</a> endpoint. Registering a new infrastructure environment requires the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">name</code>
					</li><li class="listitem">
						<code class="literal">pull_secret</code>
					</li><li class="listitem">
						<code class="literal">cpu_architecture</code>
					</li></ul></div><p>
				See the <code class="literal">infra-env-create-params</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> for details on the fields you can set when registering a new infrastructure environment. You can modify an infrastructure environment after you create it. As a best practice, consider including the <code class="literal">cluster_id</code> when creating a new infrastructure environment. The <code class="literal">cluster_id</code> will associate the infrastructure environment with a cluster definition. When creating the new infrastructure environment, the Assisted Installer will also generate a discovery ISO.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a valid <code class="literal">API_TOKEN</code>. Tokens expire every 15 minutes.
					</li><li class="listitem">
						You have downloaded the pull secret.
					</li><li class="listitem">
						Optional: You have registered a new cluster definition and exported the <code class="literal">cluster_id</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="screen white-space-pre white-space-pre">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Register a new infrastructure environment. Provide a name, preferably something including the cluster name. This example provides the cluster ID to associate the infrastructure environment with the cluster resource. The following example specifies the <code class="literal">image_type</code>. You can specify either <code class="literal">full-iso</code> or <code class="literal">minimal-iso</code>. The default value is <code class="literal">minimal-iso</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Optional: You can register a new infrastructure environment by slurping the pull secret file in the request:
							</p><pre class="screen white-space-pre white-space-pre">$ curl https://api.openshift.com/api/assisted-install/v2/infra-envs \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
  --slurpfile pull_secret ~/Downloads/pull-secret.txt \
  --arg cluster_id ${CLUSTER_ID} '
    {
      "name": "testcluster-infra-env",
      "image_type":"full-iso",
      "cluster_id": $cluster_id,
      "cpu_architecture" : "&lt;architecture_name&gt;" <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
      "pull_secret": $pull_secret[0] | tojson
    }
')" | jq '.id'</pre><div class="admonition note"><div class="admonition_header">Note</div><div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Indicates the valid values. They are: x86_64, arm64, ppc64le, s390x, multi
										</div></dd></dl></div></div></div></li><li class="listitem"><p class="simpara">
								Optional: You can register a new infrastructure environment by writing the configuration to a JSON file and then referencing it in the request:
							</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ cat &lt;&lt; EOF &gt; infra-envs.json
{
 "name": "testcluster-infra-env",
 "image_type": "full-iso",
 "cluster_id": "$CLUSTER_ID",
 "pull_secret": $PULL_SECRET
}
EOF</pre><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl -s -X POST "https://api.openshift.com/api/assisted-install/v2/infra-envs" \
 -d @./infra-envs.json \
 -H "Content-Type: application/json" \
 -H "Authorization: Bearer $API_TOKEN" \
 | jq '.id'</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Assign the returned <code class="literal">id</code> to the <code class="literal">INFRA_ENV_ID</code> variable and export it:
					</p><pre class="programlisting language-terminal">$ export INFRA_ENV_ID=&lt;id&gt;</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Once you create an infrastructure environment and associate it to a cluster definition via the <code class="literal">cluster_id</code>, you can see the cluster settings in the Assisted Installer web user interface. If you close your terminal session, you need to re-export the <code class="literal">id</code> in a new terminal session.
				</p></div></div></section><section class="section" id="modifying-an-infrastructure-environment_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.7. Modifying an infrastructure environment</h2></div></div></div><p>
				You can modify an infrastructure environment using the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/UpdateInfraEnv">/v2/infra-envs/{infra_env_id}</a> endpoint. Modifying an infrastructure environment is a common operation for adding settings such as networking, SSH keys, or ignition configuration overrides.
			</p><p>
				See the <code class="literal">infra-env-update-params</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> for details on the fields you can set when modifying an infrastructure environment. When modifying the new infrastructure environment, the Assisted Installer will also re-generate the discovery ISO.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a new infrastructure environment.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Modify the infrastructure environment:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/infra-envs/${INFRA_ENV_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
  --slurpfile pull_secret ~/Downloads/pull-secret.txt '
    {
      "image_type":"minimal-iso",
      "pull_secret": $pull_secret[0] | tojson
    }
')" | jq</pre></li></ol></div></section><section class="section" id="adding-hosts_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.8. Adding hosts</h2></div></div></div><p>
				After configuring the cluster resource and infrastructure environment, download the discovery ISO image. You can choose from two images:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Full ISO image:</strong></span> Use the full ISO image when booting must be self-contained. The image includes everything needed to boot and start the Assisted Installer agent. The ISO image is about 1GB in size.
					</li><li class="listitem">
						<span class="strong strong"><strong>Minimal ISO image:</strong></span> Use the minimal ISO image when bandwidth over the virtual media connection is limited. This is the default setting. The image includes only what is required to boot a host with networking. The majority of the content is downloaded upon boot. The ISO image is about 100MB in size.
					</li></ul></div><p>
				Both images lead to the same installation procedure. To change the image type, modify the <code class="literal">image_type</code> setting in the infrastructure environment before performing this procedure.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a cluster.
					</li><li class="listitem">
						You have created an infrastructure environment.
					</li><li class="listitem">
						You have completed the configuration.
					</li><li class="listitem">
						If the cluster hosts are behind a firewall that requires the use of a proxy, you have configured the username, password, IP address and port for the HTTP and HTTPS URLs of the proxy server.
					</li><li class="listitem">
						You have selected an image type or will use the default <code class="literal">minimal-iso</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Configure the discovery image if needed.
					</li><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Get the download URL:
					</p><pre class="programlisting language-terminal">$ curl -H "Authorization: Bearer ${API_TOKEN}" \
https://api.openshift.com/api/assisted-install/v2/infra-envs/${INFRA_ENV_ID}/downloads/image-url</pre></li><li class="listitem"><p class="simpara">
						Download the discovery image:
					</p><pre class="programlisting language-terminal">$ wget -O discovery.iso '&lt;url&gt;'</pre><p class="simpara">
						Replace <code class="literal">&lt;url&gt;</code> with the download URL from the previous step.
					</p></li><li class="listitem">
						Boot the host(s) with the discovery image. If you are installing on a platform and want to integrate with the platform, see the additional resources below for details.
					</li><li class="listitem">
						Assign a role to host(s).
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_configuring-the-discovery-image" title="Chapter 7. Configuring the discovery image">Configuring the discovery image</a>
					</li><li class="listitem">
						<a class="link" href="#assembly_booting-hosts-with-the-discovery-image" title="Chapter 8. Booting hosts with the discovery image">Booting hosts with the discovery image</a>
					</li><li class="listitem">
						<a class="link" href="#adding-hosts-on-nutanix-with-the-api_assembly_installing-on-nutanix" title="13.2. Adding hosts on Nutanix with the API">Adding hosts on Nutanix with the API</a>
					</li><li class="listitem">
						<a class="link" href="#adding-hosts-on-vsphere_installing-on-vsphere" title="14.1. Adding hosts on vSphere">Adding hosts on vSphere</a>
					</li><li class="listitem">
						<a class="link" href="#assembly_role-assignment" title="Chapter 9. Assigning roles to hosts">Assigning roles to hosts</a>
					</li></ul></div></section><section class="section" id="modifying-hosts_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.9. Modifying hosts</h2></div></div></div><p>
				After adding hosts, modify the hosts as needed. The most common modifications are to the <code class="literal">host_name</code> and the <code class="literal">host_role</code> parameters.
			</p><p>
				You can modify a host using the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/v2UpdateHost">/v2/infra-envs/{infra_env_id}/hosts/{host_id}</a> endpoint. See the <code class="literal">host-update-params</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">API viewer</a> for details on the fields you can set when modifying a host.
			</p><p>
				A host may be one of two roles:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">master</code>: A host with the <code class="literal">master</code> role will operate as a control plane host.
					</li><li class="listitem">
						<code class="literal">worker</code>: A host with the <code class="literal">worker</code> role will operate as a worker host.
					</li></ul></div><p>
				By default, the Assisted Installer sets a host to <code class="literal">auto-assign</code>, which means the installer will determine whether the host is a <code class="literal">master</code> or <code class="literal">worker</code> role automatically. Use this procedure to set the host’s role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have added hosts to the cluster.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Get the host IDs:
					</p><pre class="programlisting language-terminal">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID" \
--header "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
| jq '.host_networks[].host_ids'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">[
  "1062663e-7989-8b2d-7fbb-e6f4d5bb28e5"
]</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Modify the host:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/infra-envs/${INFRA_ENV_ID}/hosts/&lt;host_id&gt; \ <span id="CO4-1"><!--Empty--></span><span class="callout">1</span>
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
    {
      "host_role":"worker"
      "host_name" : "worker-1"
    }
' | jq</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;host_id&gt;</code> with the ID of the host.
							</div></dd></dl></div></li></ol></div></section><section class="section" id="pre-installation-validation_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.10. Pre-installation validation</h2></div></div></div><p>
				The Assisted Installer ensures the cluster meets the prerequisites before installation, because it eliminates complex post-installation troubleshooting, thereby saving significant amounts of time and effort. Before installing the cluster, ensure the cluster and each host pass pre-installation validation.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_pre-installation-validation" title="Chapter 10. Pre-installation validation">Pre-installation validation</a>
					</li></ul></div></section><section class="section" id="installing-the-cluster_installing-with-api"><div class="titlepage"><div><div><h2 class="title">4.11. Installing the cluster</h2></div></div></div><p>
				Once the cluster hosts past validation, you can install the cluster.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a cluster and infrastructure environment.
					</li><li class="listitem">
						You have added hosts to the infrastructure environment.
					</li><li class="listitem">
						The hosts have passed validation.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Install the cluster:
					</p><pre class="programlisting language-terminal">$ curl -H "Authorization: Bearer $API_TOKEN" \
-X POST \
https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID/actions/install | jq</pre></li><li class="listitem">
						Complete any post-installation platform integration steps.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#nutanix-post-installation-configuration_assembly_installing-on-nutanix" title="13.3. Nutanix post-installation configuration">Nutanix post-installation configuration</a>
					</li><li class="listitem">
						<a class="link" href="#vsphere-post-installation-configuration_installing-on-vsphere" title="14.2. vSphere post-installation configuration using the CLI">vSphere post-installation configuration</a>
					</li></ul></div></section></section><section class="chapter" id="assembly_enabling-disk-encryption"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Optional: Enabling disk encryption</h1></div></div></div><p>
			You can enable encryption of installation disks using either the TPM v2 or Tang encryption modes.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				In some situations, when you enable TPM disk encryption in the firmware for a bare-metal host and then boot it from an ISO that you generate with the Assisted Installer, the cluster deployment can get stuck. This can happen if there are left-over TPM encryption keys from a previous installation on the host. For more information, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2011634">BZ#2011634</a>. If you experience this problem, contact Red Hat support.
			</p></div></div><section class="section" id="proc_enabling-tpm-v2-encryption_assembly_enabling-disk-encryption"><div class="titlepage"><div><div><h2 class="title">5.1. Enabling TPM v2 encryption</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Check to see if TPM v2 encryption is enabled in the BIOS on each host. Most Dell systems require this. Check the manual for your computer. The Assisted Installer will also validate that TPM is enabled in the firmware. See the <code class="literal">disk-encruption</code> model in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service">Assisted Installer API</a> for additional details.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Verify that a TPM v2 encryption chip is installed on each node and enabled in the firmware.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Optional: Using the UI, in the <span class="strong strong"><strong>Cluster details</strong></span> step of the user interface wizard, choose to enable TPM v2 encryption on either the control plane nodes, workers, or both.
					</li><li class="listitem"><p class="simpara">
						Optional: Using the API, follow the "Modifying hosts" procedure. Set the <code class="literal">disk_encryption.enable_on</code> setting to <code class="literal">all</code>, <code class="literal">masters</code>, or <code class="literal">workers</code>. Set the <code class="literal">disk_encryption.mode</code> setting to <code class="literal">tpmv2</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Refresh the API token:
							</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
								Enable TPM v2 encryption:
							</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl https://api.openshift.com/api/assisted-install/v2/clusters/${CLUSTER_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
{
  "disk_encryption": {
    "enable_on": "none",
    "mode": "tpmv2"
  }
}
' | jq</pre><p class="simpara">
								Valid settings for <code class="literal">enable_on</code> are <code class="literal">all</code>, <code class="literal">master</code>, <code class="literal">worker</code>, or <code class="literal">none</code>.
							</p></li></ol></div></li></ol></div></section><section class="section" id="proc_enabling-tang-encryption_assembly_enabling-disk-encryption"><div class="titlepage"><div><div><h2 class="title">5.2. Enabling Tang encryption</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to a Red Hat Enterprise Linux (RHEL) 8 machine that can be used to generate a thumbprint of the Tang exchange key.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Set up a Tang server or access an existing one. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/security_hardening/configuring-automated-unlocking-of-encrypted-volumes-using-policy-based-decryption_security-hardening#network-bound-disk-encryption_configuring-automated-unlocking-of-encrypted-volumes-using-policy-based-decryption">Network-bound disk encryption</a> for instructions. You can set multiple Tang servers, but the Assisted Installer must be able to connect to all of them during installation.
					</li><li class="listitem"><p class="simpara">
						On the Tang server, retrieve the thumbprint for the Tang server using <code class="literal">tang-show-keys</code>:
					</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ tang-show-keys &lt;port&gt;</pre><p class="simpara">
						Optional: Replace <code class="literal">&lt;port&gt;</code> with the port number. The default port number is <code class="literal">80</code>.
					</p><div class="white-space-pre white-space-pre"><p class="title"><strong>Example thumbprint</strong></p><p>
							
<pre class="programlisting language-terminal">1gYTN_LpU9ZMB35yn5IbADY5OQ0</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Optional: Retrieve the thumbprint for the Tang server using <code class="literal">jose</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Ensure <code class="literal">jose</code> is installed on the Tang server:
							</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ sudo dnf install jose</pre></li><li class="listitem"><p class="simpara">
								On the Tang server, retrieve the thumbprint using <code class="literal">jose</code>:
							</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ sudo jose jwk thp -i /var/db/tang/&lt;public_key&gt;.jwk</pre><p class="simpara">
								Replace <code class="literal">&lt;public_key&gt;</code> with the public exchange key for the Tang server.
							</p><div class="white-space-pre white-space-pre"><p class="title"><strong>Example thumbprint</strong></p><p>
									
<pre class="programlisting language-terminal">1gYTN_LpU9ZMB35yn5IbADY5OQ0</pre>

								</p></div></li></ol></div></li><li class="listitem">
						Optional: In the <span class="strong strong"><strong>Cluster details</strong></span> step of the user interface wizard, choose to enable Tang encryption on either the control plane nodes, workers, or both. You will be required to enter URLs and thumbprints for the Tang servers.
					</li><li class="listitem"><p class="simpara">
						Optional: Using the API, follow the "Modifying hosts" procedure.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Refresh the API token:
							</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">disk_encryption.enable_on</code> setting to <code class="literal">all</code>, <code class="literal">masters</code>, or <code class="literal">workers</code>. Set the <code class="literal">disk_encryption.mode</code> setting to <code class="literal">tang</code>. Set <code class="literal">disk_encyrption.tang_servers</code> to provide the URL and thumbprint details about one or more Tang servers:
							</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl https://api.openshift.com/api/assisted-install/v2/clusters/${CLUSTER_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
{
  "disk_encryption": {
    "enable_on": "all",
    "mode": "tang",
    "tang_servers": "[{\"url\":\"http://tang.example.com:7500\",\"thumbprint\":\"PLjNyRdGw03zlRoGjQYMahSZGu9\"},{\"url\":\"http://tang2.example.com:7500\",\"thumbprint\":\"XYjNyRdGw03zlRoGjQYMahSZGu3\"}]"
  }
}
' | jq</pre><p class="simpara">
								Valid settings for <code class="literal">enable_on</code> are <code class="literal">all</code>, <code class="literal">master</code>, <code class="literal">worker</code>, or <code class="literal">none</code>. Within the <code class="literal">tang_servers</code> value, comment out the quotes within the object(s).
							</p></li></ol></div></li></ol></div></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h2 class="title">5.3. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#modifying-hosts_installing-with-api" title="4.9. Modifying hosts">Modifying hosts</a>
					</li></ul></div></section></section><section class="chapter" id="assembly_installing-operators"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Optional: Installing and modifying Operators</h1></div></div></div><p>
			The Assisted Installer can install select Operators for you with default configurations in either the UI or API. If you require advanced options, install the desired Operators after installing the cluster.
		</p><p>
			The Assisted Installer monitors the installation of the selected operators as part of the cluster installation and reports their status. If one or more Operators encounter errors during installation, the Assisted Installer reports that the cluster installation has completed with a warning that one or more operators failed to install.
		</p><p>
			See the sections below for the Operators you can set when installing or modifying a cluster definition using the Assisted Installer UI or API. For full instructions on installing an OpenShift Container Platform cluster, see <a class="link" href="#installing-with-ui" title="Chapter 3. Installing with the Assisted Installer UI">Installing with the Assisted Installer UI</a> or <a class="link" href="#installing-with-api" title="Chapter 4. Installing with the Assisted Installer API">Installing with the Assisted Installer API</a> respectively.
		</p><section class="section" id="con_configuring-operators-intro_assembly_installing-operators"><div class="titlepage"><div><div><h2 class="title">6.1. Installing Operators</h2></div></div></div><p>
				When installng Operators using the Assisted Installer UI, select the Operators on the <span class="strong strong"><strong>Operators</strong></span> page of the wizard. When installing Operators using the Assisted Installer API, use the POST method in the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/v2RegisterCluster">/v2/clusters</a> endpoint.
			</p><section class="section" id="proc_installing-openshift-virtualization_assembly_installing-operators"><div class="titlepage"><div><div><h3 class="title">6.1.1. Installing OpenShift Virtualization</h3></div></div></div><p>
					When you configure the cluster, you can enable <a class="link" href="https://docs.openshift.com/container-platform/4.11/virt/about-virt.html">OpenShift Virtualization</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Currently, OpenShift Virtualization is not supported on IBM zSystems and IBM Power.
					</p></div></div><p>
					If enabled, the Assisted Installer:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Validates that your environment meets the prerequisites outlined below.
						</li><li class="listitem"><p class="simpara">
							Configures virtual machine storage as follows:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									For single-node OpenShift clusters version 4.10 and newer, the Assisted Installer configures the <a class="link" href="https://docs.openshift.com/container-platform/4.11/virt/virtual_machines/virtual_disks/virt-configuring-local-storage-for-vms.html#virt-about-hostpath-provisioner_virt-configuring-local-storage-for-vms">hostpath provisioner</a>.
								</li><li class="listitem">
									For single-node OpenShift clusters on earlier versions, the Assisted Installer configures the <a class="link" href="https://docs.openshift.com/container-platform/4.11/storage/persistent_storage/persistent-storage-local.html">Local Storage Operator</a>.
								</li><li class="listitem">
									For multi-node clusters, the Assisted Installer configures OpenShift Data Foundation.
								</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Supported by Red Hat Enterprise Linux (RHEL) 8
						</li><li class="listitem">
							Support for Intel 64 or AMD64 CPU extensions
						</li><li class="listitem">
							Intel Virtualization Technology or AMD-V hardware virtualization extensions enabled
						</li><li class="listitem">
							NX (no execute) flag enabled
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer UI:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									In the <span class="strong strong"><strong>Operators</strong></span> step of the wizard, enable the <span class="strong strong"><strong>Install OpenShift Virtualization</strong></span> checkbox.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer API:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									When registering a new cluster, add the <code class="literal">"olm_operators: [{"name": "cnv"}]"</code> statement.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										CNV stands for container-native virtualization.
									</p></div></div><p class="simpara">
									For example:
								</p><pre class="programlisting language-terminal">$ curl -s -X POST https://api.openshift.com/api/assisted-install/v2/clusters \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
   --slurpfile pull_secret ~/Downloads/pull-secret.txt '
{
   "name": "testcluster",
   "openshift_version": "4.11",
   "cpu_architecture" : "x86_64",
   "base_dns_domain": "example.com",
   "olm_operators: [{"name": "cnv"}]"
   "pull_secret": $pull_secret[0] | tojson
}
')" | jq '.id'</pre></li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							For more details about preparing your cluster for OpenShift Virtualization, see the <a class="link" href="https://docs.openshift.com/container-platform/4.11/virt/install/preparing-cluster-for-virt.html">OpenShift Documentation</a>.
						</li></ul></div></section><section class="section" id="proc_installing-multicluster-engine_assembly_installing-operators"><div class="titlepage"><div><div><h3 class="title">6.1.2. Installing Multicluster Engine (MCE)</h3></div></div></div><p>
					When you configure the cluster, you can enable the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.8/html/clusters/cluster_mce_overview#mce-install-intro">Multicluster Engine (MCE)</a> Operator. The Multicluster Engine (MCE) Operator allows you to install additional clusters from the cluster that you are currently installing.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							OpenShift version 4.10 and above
						</li><li class="listitem">
							An additional 4 CPU cores and 16GB of RAM for multi-node OpenShift clusters.
						</li><li class="listitem">
							An additional 8 CPU cores and 32GB RAM for single-node OpenShift clusters.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Storage considerations</strong></p><p>
						Prior to installation, you must consider the storage required for managing the clusters to be deployed from the Multicluster Engine. You can choose one of the following scenarios for automating storage:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Install OpenShift Data Foundation (ODF) on a multi-node cluster. ODF is the recommended storage for clusters, but requires an additional subscription. For details, see <span class="emphasis"><em>Installing OpenShift Data Foundation</em></span> in this chapter.
						</li><li class="listitem">
							Install Logical Volume Management Storage (LVMS) on a single-node OpenShift (SNO) cluster.
						</li><li class="listitem">
							Install Multicluster Engine on a multi-node cluster without configuring storage. Then configure a storage of your choice and enable the Central Infrastructure Management (CIM) service following the installation. For details, see <span class="emphasis"><em>Additional Resources</em></span> in this chapter.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer UI:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									In the <span class="strong strong"><strong>Operators</strong></span> step of the wizard, enable the <span class="strong strong"><strong>Install multicluster engine</strong></span> checkbox.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer API:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									When registering a new cluster, use the <code class="literal">"olm_operators: [{"name": "mce"}]"</code> statement, for example:
								</p><pre class="programlisting language-terminal">$ curl -s -X POST https://api.openshift.com/api/assisted-install/v2/clusters \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
    --slurpfile pull_secret ~/Downloads/pull-secret.txt '
{
    "name": "testcluster",
    "openshift_version": "4.11",
    "cpu_architecture" : "x86_64"
    "base_dns_domain": "example.com",
    "olm_operators: [{"name": "mce"}]",
    "pull_secret": $pull_secret[0] | tojson
}
')" | jq '.id'</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Post-installation steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the Assisted Installer technology with the Multicluster Engine, enable the Central Infrastructure Management service. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.8/html/clusters/cluster_mce_overview#enable-cim">Enabling the Central Infrastructure Management service</a>.
						</li><li class="listitem">
							To deploy OpenShift Container Platform clusters using hosted control planes, configure the hosted control planes. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.8/html/clusters/cluster_mce_overview#hosted-control-planes-intro">Hosted Control Planes</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							For Advanced Cluster Management documentation related to the Multicluster Engine (MCE) Operator, see <a class="link" href="https://https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.8/html/clusters/index">Red Hat Advanced Cluster Mangement for Kubernetes</a>
						</li><li class="listitem">
							For OpenShift Container Platform documentation related to the Multicluster Engine (MCE) Operator, see <a class="link" href="https://docs.openshift.com/container-platform/4.11/architecture/mce-overview-ocp.html">Multicluster Engine for Kubernetes Operator</a>.
						</li></ul></div></section><section class="section" id="proc_installing-openshift-data-foundation_assembly_installing-operators"><div class="titlepage"><div><div><h3 class="title">6.1.3. Installing OpenShift Data Foundation</h3></div></div></div><p>
					When you configure the cluster, you can enable <a class="link" href="https://docs.openshift.com/container-platform/4.11/storage/persistent_storage/persistent-storage-ocs.html">OpenShift Data Foundation</a>. If enabled, the Assisted Installer:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Validates that your environment meets the prerequisites outlined below. It does not validate that the disk devices have been reformatted, which you must verify before starting.
						</li><li class="listitem">
							Configures the storage to use all available disks.
						</li></ol></div><p>
					When you enable OpenShift Data Foundation, the Assisted Installer creates a <code class="literal">StorageCluster</code> resource that specifies all available disks for use with OpenShift Data Foundation. If a different configuration is desired, modify the configuration after installing the cluster or install the Operator after the cluster is installed.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The cluster is a three-node OpenShift cluster or has at least 3 worker nodes.
						</li><li class="listitem">
							Each host has at least one non-installation disk of at least 25GB.
						</li><li class="listitem">
							The disk devices you use must be empty. There should be no Physical Volumes (PVs), Volume Groups (VGs), or Logical Volumes (LVs) remaining on the disks.
						</li><li class="listitem">
							Each host has 6 CPU cores for three-node OpenShift or 8 CPU cores for standard clusters, in addition to other CPU requirements.
						</li><li class="listitem">
							Each host has 19 GiB RAM, in addition to other RAM requirements.
						</li><li class="listitem">
							Each host has 2 CPU cores and 5GiB RAM per storage disk in addition to other CPU and RAM requirements.
						</li><li class="listitem">
							You have assigned control plane or worker roles for each host (and not auto-assign).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer UI:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									In the <span class="strong strong"><strong>Operators</strong></span> step of the wizard, enable the <span class="strong strong"><strong>Install OpenShift Data Foundation</strong></span> checkbox.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If you are using the Assisted Installer API:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									When registering a new cluster, add the <code class="literal">"olm_operators: [{"name": "odf"}]"</code> statement. For example:
								</p><pre class="programlisting language-terminal">$ curl -s -X POST https://api.openshift.com/api/assisted-install/v2/clusters \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d "$(jq --null-input \
   --slurpfile pull_secret ~/Downloads/pull-secret.txt '
{
   "name": "testcluster",
   "openshift_version": "4.11",
   "cpu_architecture" : "x86_64",
   "base_dns_domain": "example.com",
   "olm_operators: [{"name": "odf"}]",
   "pull_secret": $pull_secret[0] | tojson
}
')" | jq '.id'</pre></li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							For more details about OpenShift Data Foundation, see the <a class="link" href="https://docs.openshift.com/container-platform/4.11/storage/persistent_storage/persistent-storage-ocs.html">OpenShift Documentation</a>.
						</li></ul></div></section></section><section class="section" id="modifying-operators_assembly_installing-operators"><div class="titlepage"><div><div><h2 class="title">6.2. Modifying Operators</h2></div></div></div><p>
				In the Assisted Installer, you can add or remove Operators for a cluster resource that has already been registered as part of a previous installation step. This is only possible before you start the OpenShift Container Platform installation.
			</p><p>
				To modify the defined Operators:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are using the Assisted Installer UI, navigate to the <span class="strong strong"><strong>Operators</strong></span> page of the wizard and modify your selection. For details, see <span class="emphasis"><em>Installing Operators</em></span> in this section.
					</li><li class="listitem">
						If you are using the Assisted Installer API, set the required Operator definition using the PATCH method for the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/V2UpdateCluster">/v2/clusters/{cluster_id}</a> endpoint.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a new cluster resource.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Identify the <code class="literal">CLUSTER_ID</code> variable by listing the existing clusters, as follows:
					</p><pre class="programlisting language-terminal">$ curl -s https://api.openshift.com/api/assisted-install/v2/clusters -H "Authorization: Bearer ${API_TOKEN}" | jq '[ .[] | { "name": .name, "id": .id } ]'</pre><div class="formalpara"><p class="title"><strong>Sample output</strong></p><p>
							
<pre class="programlisting language-terminal">[
  {
    "name": "lvmtest",
    "id": "475358f9-ed3a-442f-ab9e-48fd68bc8188" <span id="CO5-1"><!--Empty--></span><span class="callout">1</span>
  },
  {
    "name": "mcetest",
    "id": "b5259f97-be09-430e-b5eb-d78420ee509a"
  }
]</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The <code class="literal">id</code> value is the <code class="literal">&lt;cluster_id&gt;</code>.
								</div></dd></dl></div></div></div></li><li class="listitem"><p class="simpara">
						Assign the returned <code class="literal">&lt;cluster_id&gt;</code> to the <code class="literal">CLUSTER_ID</code> variable and export it:
					</p><pre class="programlisting language-terminal">$ export CLUSTER_ID=&lt;cluster_id&gt;</pre></li><li class="listitem"><p class="simpara">
						Update the cluster with the new Operators:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/clusters/${CLUSTER_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
{
    "olm_operators": [{"name": "mce"}, {"name": "cnv"}], <span id="CO6-1"><!--Empty--></span><span class="callout">1</span>
}
' | jq '.id'</pre><div class="admonition note"><div class="admonition_header">Note</div><div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Indicates the Operators to be installed. Valid values include <code class="literal">mce</code>, <code class="literal">cnv</code>, <code class="literal">lvm</code>, and <code class="literal">odf</code>. To remove a previously installed Operator, exclude it from the list of values. To remove all previously installed Operators, type <code class="literal">"olm_operators": []</code>.
								</div></dd></dl></div></div></div><div class="formalpara"><p class="title"><strong>Sample output</strong></p><p>
							
<pre class="programlisting language-terminal">{
  &lt;various cluster properties&gt;,
  "monitored_operators": [
    {
      "cluster_id": "b5259f97-be09-430e-b5eb-d78420ee509a",
      "name": "console",
      "operator_type": "builtin",
      "status_updated_at": "0001-01-01T00:00:00.000Z",
      "timeout_seconds": 3600
    },
    {
      "cluster_id": "b5259f97-be09-430e-b5eb-d78420ee509a",
      "name": "cvo",
      "operator_type": "builtin",
      "status_updated_at": "0001-01-01T00:00:00.000Z",
      "timeout_seconds": 3600
    },
    {
      "cluster_id": "b5259f97-be09-430e-b5eb-d78420ee509a",
      "name": "mce",
      "namespace": "multicluster-engine",
      "operator_type": "olm",
      "status_updated_at": "0001-01-01T00:00:00.000Z",
      "subscription_name": "multicluster-engine",
      "timeout_seconds": 3600
    },
    {
      "cluster_id": "b5259f97-be09-430e-b5eb-d78420ee509a",
      "name": "cnv",
      "namespace": "openshift-cnv",
      "operator_type": "olm",
      "status_updated_at": "0001-01-01T00:00:00.000Z",
      "subscription_name": "hco-operatorhub",
      "timeout_seconds": 3600
    },
    {
      "cluster_id": "b5259f97-be09-430e-b5eb-d78420ee509a",
      "name": "lvm",
      "namespace": "openshift-local-storage",
      "operator_type": "olm",
      "status_updated_at": "0001-01-01T00:00:00.000Z",
      "subscription_name": "local-storage-operator",
      "timeout_seconds": 4200
    }
  ],
  &lt;more cluster properties&gt;</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The output is the description of the new cluster state. The <code class="literal">monitored_operators</code> property in the output contains Operators of two types:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">"operator_type": "builtin"</code>: Operators of this type are an integral part of OpenShift Container Platform.
								</li><li class="listitem">
									<code class="literal">"operator_type": "olm"</code>: Operators of this type are added either manually by a user or automatically due to dependencies. In the example, the <code class="literal">lso</code> Operator was added automatically because the <code class="literal">cnv</code> Operator requires it.
								</li></ul></div></div></div></li></ol></div></section></section><section class="chapter" id="assembly_configuring-the-discovery-image"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Configuring the discovery image</h1></div></div></div><p>
			The Assisted Installer uses an initial image to run an agent that performs hardware and network validations before attempting to install OpenShift Container Platform. You can use <a class="link" href="https://coreos.github.io/ignition/">Ignition</a> to customize the discovery image.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Modifications to the discovery image will not persist in the system.
			</p></div></div><section class="section" id="creating-an-ignition-configuration-file_assembly_configuring-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">7.1. Creating an Ignition configuration file</h2></div></div></div><p>
				Ignition is a low-level system configuration utility, which is part of the temporary initial root filesystem, the <span class="emphasis"><em>initramfs</em></span>. When Ignition runs on the first boot, it finds configuration data in the Ignition configuration file and applies it to the host before <code class="literal">switch_root</code> is called to pivot to the host’s root filesystem.
			</p><p>
				Ignition uses a JSON <a class="link" href="https://coreos.github.io/ignition/configuration-v3_2/">configuration specification</a> file to represent the set of changes that occur on the first boot.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Ignition versions newer than 3.2 are not supported, and will raise an error.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create an Ignition file and specify the configuration specification version:
					</p><pre class="programlisting language-terminal">$ vim ~/ignition.conf</pre><pre class="programlisting language-javascript">{
  "ignition": { "version": "3.1.0" }
}</pre></li><li class="listitem"><p class="simpara">
						Add configuration data to the Ignition file. For example, add a password to the <code class="literal">core</code> user.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Generate a password hash:
							</p><pre class="programlisting language-terminal">$ openssl passwd -6</pre></li><li class="listitem"><p class="simpara">
								Add the generated password hash to the <code class="literal">core</code> user:
							</p><pre class="programlisting language-javascript">{
  "ignition": { "version": "3.1.0" },
  "passwd": {
    "users": [
      {
        "name": "core",
        "passwordHash": "$6$spam$M5LGSMGyVD.9XOboxcwrsnwNdF4irpJdAWy.1Ry55syyUiUssIzIAHaOrUHr2zg6ruD8YNBPW9kW0H8EnKXyc1"
      }
    ]
  }
}</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Save the Ignition file and export it to the <code class="literal">IGNITION_FILE</code> variable:
					</p><pre class="programlisting language-bash">$ export IGNITION_FILE=~/ignition.conf</pre></li></ol></div></section><section class="section" id="modifying-the-discovery-image-with-ignition_assembly_configuring-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">7.2. Modifying the discovery image with Ignition</h2></div></div></div><p>
				Once you create an Ignition configuration file, you can modify the discovery image by patching the infrastructure environment using the Assisted Installer API.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you used the UI to create the cluster, you have set up the API authentication.
					</li><li class="listitem">
						You have an infrastructure environment and you have exported the infrastructure environment <code class="literal">id</code> to the <code class="literal">INFRA_ENV_ID</code> variable.
					</li><li class="listitem">
						You have a valid Ignition file and have exported the file name as <code class="literal">$IGNITION_FILE</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create an <code class="literal">ignition_config_override</code> JSON object and redirect it to a file:
					</p><pre class="programlisting language-terminal">$ jq -n \
  --arg IGNITION "$(jq -c . $IGNITION_FILE)" \
  '{ignition_config_override: $IGNITION}' \
  &gt; discovery_ignition.json</pre></li><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Patch the infrastructure environment:
					</p><pre class="programlisting language-terminal">$ curl \
  --header "Authorization: Bearer $API_TOKEN" \
  --header "Content-Type: application/json" \
  -XPATCH \
  -d @discovery_ignition.json \
  https://api.openshift.com/api/assisted-install/v2/infra-envs/$INFRA_ENV_ID | jq</pre><p class="simpara">
						The <code class="literal">ignition_config_override</code> object references the Ignition file.
					</p></li><li class="listitem">
						Download the updated discovery image.
					</li></ol></div></section></section><section class="chapter" id="assembly_booting-hosts-with-the-discovery-image"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Booting hosts with the discovery image</h1></div></div></div><p>
			The Assisted Installer uses an initial image to run an agent that performs hardware and network validations before attempting to install OpenShift Container Platform. You can boot hosts with the discovery image using three methods:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					USB drive
				</li><li class="listitem">
					Redfish virtual media
				</li><li class="listitem">
					iPXE
				</li></ul></div><section class="section" id="creating-an-iso-image-on-a-usb-drive_assembly_booting-hosts-with-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">8.1. Creating an ISO image on a USB drive</h2></div></div></div><p>
				You can install the Assisted Installer agent using a USB drive that contains the discovery ISO image. Starting the host with the USB drive prepares the host for the software installation.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						On the administration host, insert a USB drive into a USB port.
					</li><li class="listitem"><p class="simpara">
						Copy the ISO image to the USB drive, for example:
					</p><pre class="programlisting language-terminal"># dd if=&lt;path_to_iso&gt; of=&lt;path_to_usb&gt; status=progress</pre><p class="simpara">
						where:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;path_to_iso&gt;</span></dt><dd>
									is the relative path to the downloaded discovery ISO file, for example, <code class="literal">discovery.iso</code>.
								</dd><dt><span class="term">&lt;path_to_usb&gt;</span></dt><dd><p class="simpara">
									is the location of the connected USB drive, for example, <code class="literal">/dev/sdb</code>.
								</p><p class="simpara">
									After the ISO is copied to the USB drive, you can use the USB drive to install the Assisted Installer agent on the cluster host.
								</p></dd></dl></div></li></ol></div></section><section class="section" id="booting-with-a-usb-drive_assembly_booting-hosts-with-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">8.2. Booting with a USB drive</h2></div></div></div><p>
				To register nodes with the Assisted Installer using a bootable USB drive, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Insert the RHCOS discovery ISO USB drive into the target host.
					</li><li class="listitem">
						Configure the boot drive order in the server firmware settings to boot from the attached discovery ISO, and then reboot the server.
					</li><li class="listitem"><p class="simpara">
						Wait for the host to boot up.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								For UI installations, on the administration host, return to the browser. Wait for the host to appear in the list of discovered hosts.
							</li><li class="listitem"><p class="simpara">
								For API installations, refresh the token, check the enabled host count, and gather the host IDs:
							</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ source refresh-token</pre><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID" \
--header "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
| jq '.enabled_host_count'</pre><pre class="programlisting language-bash white-space-pre white-space-pre">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID" \
--header "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
| jq '.host_networks[].host_ids'</pre><div class="white-space-pre white-space-pre"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-bash">[
  "1062663e-7989-8b2d-7fbb-e6f4d5bb28e5"
]</pre>

								</p></div></li></ol></div></li></ol></div></section><section class="section" id="install-booting-from-an-iso-over-http-redfish_assembly_booting-hosts-with-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">8.3. Booting from an HTTP-hosted ISO image using the Redfish API</h2></div></div></div><p>
				You can provision hosts in your network using ISOs that you install using the Redfish Baseboard Management Controller (BMC) API.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Download the installation Red Hat Enterprise Linux CoreOS (RHCOS) ISO.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Copy the ISO file to an HTTP server accessible in your network.
					</li><li class="listitem"><p class="simpara">
						Boot the host from the hosted ISO file, for example:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Call the redfish API to set the hosted ISO as the <code class="literal">VirtualMedia</code> boot media by running the following command:
							</p><pre class="programlisting language-terminal">$ curl -k -u &lt;bmc_username&gt;:&lt;bmc_password&gt; \
-d '{"Image":"&lt;hosted_iso_file&gt;", "Inserted": true}' \
-H "Content-Type: application/json" \
-X POST &lt;host_bmc_address&gt;/redfish/v1/Managers/iDRAC.Embedded.1/VirtualMedia/CD/Actions/VirtualMedia.InsertMedia</pre><p class="simpara">
								Where:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;bmc_username&gt;:&lt;bmc_password&gt;</span></dt><dd>
											Is the username and password for the target host BMC.
										</dd><dt><span class="term">&lt;hosted_iso_file&gt;</span></dt><dd>
											Is the URL for the hosted installation ISO, for example: <code class="literal"><a class="link" href="http://webserver.example.com/rhcos-live-minimal.iso">http://webserver.example.com/rhcos-live-minimal.iso</a></code>. The ISO must be accessible from the target host machine.
										</dd><dt><span class="term">&lt;host_bmc_address&gt;</span></dt><dd>
											Is the BMC IP address of the target host machine.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Set the host to boot from the <code class="literal">VirtualMedia</code> device by running the following command:
							</p><pre class="programlisting language-terminal">$ curl -k -u &lt;bmc_username&gt;:&lt;bmc_password&gt; \
-X PATCH -H 'Content-Type: application/json' \
-d '{"Boot": {"BootSourceOverrideTarget": "Cd", "BootSourceOverrideMode": "UEFI", "BootSourceOverrideEnabled": "Once"}}' \
&lt;host_bmc_address&gt;/redfish/v1/Systems/System.Embedded.1</pre></li><li class="listitem"><p class="simpara">
								Reboot the host:
							</p><pre class="programlisting language-terminal">$ curl -k -u &lt;bmc_username&gt;:&lt;bmc_password&gt; \
-d '{"ResetType": "ForceRestart"}' \
-H 'Content-type: application/json' \
-X POST &lt;host_bmc_address&gt;/redfish/v1/Systems/System.Embedded.1/Actions/ComputerSystem.Reset</pre></li><li class="listitem"><p class="simpara">
								Optional: If the host is powered off, you can boot it using the <code class="literal">{"ResetType": "On"}</code> switch. Run the following command:
							</p><pre class="programlisting language-terminal">$ curl -k -u &lt;bmc_username&gt;:&lt;bmc_password&gt; \
-d '{"ResetType": "On"}' -H 'Content-type: application/json' \
-X POST &lt;host_bmc_address&gt;/redfish/v1/Systems/System.Embedded.1/Actions/ComputerSystem.Reset</pre></li></ol></div></li></ol></div></section><section class="section" id="booting-hosts-using-ipxe_assembly_booting-hosts-with-the-discovery-image"><div class="titlepage"><div><div><h2 class="title">8.4. Booting hosts using iPXE</h2></div></div></div><p>
				The Assisted Installer provides an iPXE script including all the artifacts needed to boot the discovery image for an infrastructure environment. Due to the limitations of the current HTTPS implementation of iPXE, the recommendation is to download and expose the needed artifacts in an HTTP server. Currently, even if iPXE supports HTTPS protocol, the supported algorithms are old and not recommended.
			</p><p>
				The full list of supported ciphers is in <a class="link" href="https://ipxe.org/crypto">https://ipxe.org/crypto</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created an infrastructure environment by using the API or you have created a cluster by using the UI.
					</li><li class="listitem">
						You have your infrastructure environment ID exported in your shell as <code class="literal">$INFRA_ENV_ID</code>.
					</li><li class="listitem">
						You have credentials to use when accessing the API and have exported a token as <code class="literal">$API_TOKEN</code> in your shell.
					</li><li class="listitem">
						You have an HTTP server to host the images.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When configuring via the UI, the <code class="literal">$INFRA_ENV_ID</code> and <code class="literal">$API_TOKEN</code> variables are already provided.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					IBM Power only supports PXE, which also requires: <span class="strong strong"><strong> You have installed grub2 at <code class="literal">/var/lib/tftpboot</code></strong></span> You have installed DHCP and TFTP for PXE
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download the iPXE script directly from the UI, or get the iPXE script from the Assisted Installer:
					</p><pre class="programlisting language-terminal">$ curl \
  --silent \
  --header "Authorization: Bearer $API_TOKEN" \
  https://api.openshift.com/api/assisted-install/v2/infra-envs/$INFRA_ENV_ID/downloads/files?file_name=ipxe-script &gt; ipxe-script</pre><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-ipxe">#!ipxe
initrd --name initrd http://api.openshift.com/api/assisted-images/images/&lt;infra_env_id&gt;/pxe-initrd?arch=x86_64&amp;image_token=&lt;token_string&gt;&amp;version=4.10
kernel http://api.openshift.com/api/assisted-images/boot-artifacts/kernel?arch=x86_64&amp;version=4.10 initrd=initrd coreos.live.rootfs_url=http://api.openshift.com/api/assisted-images/boot-artifacts/rootfs?arch=x86_64&amp;version=4.10 random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8"
boot</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Download the required artifacts by extracting URLs from the <code class="literal">ipxe-script</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Download the initial RAM disk:
							</p><pre class="programlisting language-terminal">$ awk '/^initrd /{print $NF}' ipxe-script | curl -o initrd.img</pre></li><li class="listitem"><p class="simpara">
								Download the linux kernel:
							</p><pre class="programlisting language-terminal">$ awk '/^kernel /{print $2}' ipxe-script | curl -o kernel</pre></li><li class="listitem"><p class="simpara">
								Download the root filesystem:
							</p><pre class="programlisting language-terminal">$ grep ^kernel ipxe-script | xargs -n1| grep ^coreos.live.rootfs_url | cut -d = -f 2- | curl -o rootfs.img</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Change the URLs to the different artifacts in the <code class="literal">ipxe-script`</code> to match your local HTTP server. For example:
					</p><pre class="programlisting language-ipxe">#!ipxe
set webserver http://192.168.0.1
initrd --name initrd $webserver/initrd.img
kernel $webserver/kernel initrd=initrd coreos.live.rootfs_url=$webserver/rootfs.img random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8"
boot</pre></li><li class="listitem"><p class="simpara">
						Optional: When installing with RHEL KVM on IBM zSystems you must boot the host by specifying additional kernel arguments
					</p><pre class="programlisting language-terminal">random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you install with iPXE on RHEL KVM, in some circumstances, the VMs on the VM host are not rebooted on first boot and need to be started manually.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optional: When installing on IBM Power you must download intramfs, kernel, and root as follows:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Copy initrd.img and kernel.img to PXE directory `/var/lib/tftpboot/rhcos `
							</li><li class="listitem">
								Copy rootfs.img to HTTPD directory `/var/www/html/install `
							</li><li class="listitem"><p class="simpara">
								Add following entry to `/var/lib/tftpboot/boot/grub2/grub.cfg `:
							</p><pre class="programlisting language-terminal">if [ ${net_default_mac} == fa:1d:67:35:13:20 ]; then
default=0
fallback=1
timeout=1
menuentry "CoreOS (BIOS)" {
echo "Loading kernel"
linux "/rhcos/kernel.img" ip=dhcp rd.neednet=1 ignition.platform.id=metal ignition.firstboot coreos.live.rootfs_url=http://9.114.98.8:8000/install/rootfs.img
echo "Loading initrd"
initrd "/rhcos/initrd.img"
}
fi</pre></li></ol></div></li></ol></div></section></section><section class="chapter" id="assembly_role-assignment"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Assigning roles to hosts</h1></div></div></div><p>
			You can assign roles to your discovered hosts. These roles define the function of the host within the cluster. The roles can be one of the standard Kubernetes types: <span class="strong strong"><strong>control plane (master)</strong></span> or <span class="strong strong"><strong>worker</strong></span>.
		</p><p>
			The host must meet the minimum requirements for the role you selected. You can find the hardware requirements by referring to the Prerequisites section of this document or using the preflight requirement API.
		</p><p>
			If you do not select a role, the system selects one for you. You can change the role at any time before installation starts.
		</p><section class="section" id="proc_assign-role-from-the-ui_assembly_role-assignment"><div class="titlepage"><div><div><h2 class="title">9.1. Select a role using the UI</h2></div></div></div><p>
				You can select a role after the host finishes its discovery.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Go to the <span class="strong strong"><strong>Host Discovery</strong></span> tab and scroll down to the <span class="strong strong"><strong>Host Inventory</strong></span> table.
					</li><li class="listitem"><p class="simpara">
						Select the <span class="strong strong"><strong>Auto-assign</strong></span> drop-down for the required host.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <span class="strong strong"><strong>Control plane node</strong></span> to assign this host a control plane role.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Worker</strong></span> to assign this host a worker role.
							</li></ol></div></li><li class="listitem">
						Check the validation status.
					</li></ol></div></section><section class="section" id="select-a-role-using-the-api_assembly_role-assignment"><div class="titlepage"><div><div><h2 class="title">9.2. Select a role using the API</h2></div></div></div><p>
				You can select a role for the host using the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/v2UpdateHost">/v2/infra-envs/{infra_env_id}/hosts/{host_id}</a> endpoint. A host may be one of two roles:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">master</code>: A host with the <code class="literal">master</code> role will operate as a control plane host.
					</li><li class="listitem">
						<code class="literal">worker</code>: A host with the <code class="literal">worker</code> role will operate as a worker host.
					</li></ul></div><p>
				By default, the Assisted Installer sets a host to <code class="literal">auto-assign</code>, which means the installer will determine whether the host is a <code class="literal">master</code> or <code class="literal">worker</code> role automatically. Use this procedure to set the host’s role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have added hosts to the cluster.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Get the host IDs:
					</p><pre class="programlisting language-terminal">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID" \
--header "Content-Type: application/json" \
  -H "Authorization: Bearer $API_TOKEN" \
| jq '.host_networks[].host_ids'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">[
  "1062663e-7989-8b2d-7fbb-e6f4d5bb28e5"
]</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Modify the <code class="literal">host_role</code> setting:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/infra-envs/${INFRA_ENV_ID}/hosts/&lt;host_id&gt; \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
    {
      "host_role":"worker"
    }
' | jq</pre><p class="simpara">
						Replace <code class="literal">&lt;host_id&gt;</code> with the ID of the host.
					</p></li></ol></div></section><section class="section" id="con_auto-assign-role_assembly_role-assignment"><div class="titlepage"><div><div><h2 class="title">9.3. Auto-assigning roles</h2></div></div></div><p>
				Assisted Installer selects a role automatically for hosts if you do not assign a role yourself. The role selection mechanism factors the host’s memory, CPU, and disk space. It aims to assign a control plane role to the 3 weakest hosts that meet the minimum requirements for control plane nodes. All other hosts default to worker nodes. The goal is to provide enough resources to run the control plane and reserve the more capacity-intensive hosts for running the actual workloads.
			</p><p>
				You can override the auto-assign decision at any time before installation.
			</p><p>
				The validations make sure that the auto selection is a valid one.
			</p></section><section class="section _additional-resources" id="additional_resources_2"><div class="titlepage"><div><div><h2 class="title">9.4. Additional resources</h2></div></div></div><p>
				<a class="link" href="#assisted-installer-prerequisites" title="2.1. Prerequisites">Prerequisites</a>
			</p></section></section><section class="chapter" id="assembly_pre-installation-validation"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Pre-installation validation</h1></div></div></div><section class="section" id="con_definition-of-pre-installation-validations_assembly_pre-installation-validation"><div class="titlepage"><div><div><h2 class="title">10.1. Definition of pre-installation validations</h2></div></div></div><p>
				The Assisted Installer aims to make cluster installation as simple, efficient, and error-free as possible. The Assisted Installer performs validation checks on the configuration and the gathered telemetry before starting an installation.
			</p><p>
				The Assisted Installer will use the information provided prior to installation, such as control plane topology, network configuration and hostnames. It will also use real time telemetry from the hosts you are attempting to install.
			</p><p>
				When a host boots the discovery ISO, an agent will start on the host. The agent will send information about the state of the host to the Assisted Installer.
			</p><p>
				The Assisted Installer uses all of this information to compute real time pre-installation validations. All validations are either blocking or non-blocking to the installation.
			</p></section><section class="section" id="con_blocking-and-non-blocking-validations_assembly_pre-installation-validation"><div class="titlepage"><div><div><h2 class="title">10.2. Blocking and non blocking validations</h2></div></div></div><p>
				A blocking validation will prevent progress of the installation, meaning that you will need to resolve the issue and pass the blocking validation before you can proceed.
			</p><p>
				A non blocking validation is a warning and will tell you of things that might cause you a problem.
			</p></section><section class="section" id="con_validation-types_assembly_pre-installation-validation"><div class="titlepage"><div><div><h2 class="title">10.3. Validation types</h2></div></div></div><p>
				The Assisted Installer performs two types of validation:
			</p><div class="formalpara"><p class="title"><strong>Host</strong></p><p>
					Host validations ensure that the configuration of a given host is valid for installation.
				</p></div><div class="formalpara"><p class="title"><strong>Cluster</strong></p><p>
					Cluster validations ensure that the configuration of the whole cluster is valid for installation.
				</p></div></section><section class="section" id="host_validations"><div class="titlepage"><div><div><h2 class="title">10.4. Host validations</h2></div></div></div><section class="section" id="proc_getting-host-validations-by-using-rest-api_assembly_pre-installation-validation"><div class="titlepage"><div><div><h3 class="title">10.4.1. Getting host validations by using the REST API</h3></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you use the web based UI, many of these validations will not show up by name. To get a list of validations consistent with the labels, use the following procedure.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed the <code class="literal">jq</code> utility.
						</li><li class="listitem">
							You have created an Infrastructure Environment by using the API or have created a cluster by using the UI.
						</li><li class="listitem">
							You have hosts booted with the discovery ISO
						</li><li class="listitem">
							You have your Cluster ID exported in your shell as <code class="literal">CLUSTER_ID</code>.
						</li><li class="listitem">
							You have credentials to use when accessing the API and have exported a token as <code class="literal">API_TOKEN</code> in your shell.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedures</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Refresh the API token:
						</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
							Get all validations for all hosts:
						</p><pre class="programlisting language-bash">$ curl \
  --silent \
  --header "Authorization: Bearer $API_TOKEN" \
  https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID/hosts \
  | jq -r .[].validations_info \
  | jq 'map(.[])'</pre></li><li class="listitem"><p class="simpara">
							Get non-passing validations for all hosts:
						</p><pre class="programlisting language-bash">$ curl \
  --silent \
  --header "Authorization: Bearer $API_TOKEN" \
  https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID/hosts \
  | jq -r .[].validations_info \
  | jq 'map(.[]) | map(select(.status=="failure" or .status=="pending")) | select(length&gt;0)'</pre></li></ol></div></section><section class="section" id="ref_host-validations-in-detail_assembly_pre-installation-validation"><div class="titlepage"><div><div><h3 class="title">10.4.2. Host validations in detail</h3></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 50%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140603908293024" scope="col">Parameter</th><th align="left" valign="top" id="idm140603908291936" scope="col">Validation type</th><th align="left" valign="top" id="idm140603908290848" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">connected</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the host has recently communicated with the Assisted Installer.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-inventory</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the Assisted Installer received the inventory from the host.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-min-cpu-cores</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the number of CPU cores meets the minimum requirements.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-min-memory</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the amount of memory meets the minimum requirements.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-min-valid-disks</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that at least one available disk meets the eligibility criteria.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-cpu-cores-for-role</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the number of cores meets the minimum requirements for the host role.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-memory-for-role</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the amount of memory meets the minimum requirements for the host role.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">ignition-downloadable</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									For day 2 hosts, checks that the host can download ignition configuration from the day 1 cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">belongs-to-majority-group</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									The majority group is the largest full-mesh connectivity group on the cluster, where all members can communicate with all other members. This validation checks that hosts in a multi-node, day 1 cluster are in the majority group.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">valid-platform-network-settings</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the platform is valid for the network settings.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">ntp-synced</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks if an NTP server has been successfully used to synchronize time on the host.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">container-images-available</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks if container images have been successfully pulled from the image registry.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">sufficient-installation-disk-speed</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that disk speed metrics from an earlier installation meet requirements, if they exist.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">sufficient-network-latency-requirement-for-role</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the average network latency between hosts in the cluster meets the requirements.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">sufficient-packet-loss-requirement-for-role</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the network packet loss between hosts in the cluster meets the requirements.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">has-default-route</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the host has a default route configured.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">api-domain-name-resolved-correctly</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									For a multi node cluster with user managed networking. Checks that the host is able to resolve the API domain name for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">api-int-domain-name-resolved-correctly</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									For a multi node cluster with user managed networking. Checks that the host is able to resolve the internal API domain name for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">apps-domain-name-resolved-correctly</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									For a multi node cluster with user managed networking. Checks that the host is able to resolve the internal apps domain name for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">compatible-with-cluster-platform</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the host is compatible with the cluster platform
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">dns-wildcard-not-configured</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the wildcard DNS *.&lt;cluster_name&gt;.&lt;base_domain&gt; is not configured, because this causes known problems for OpenShift
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">disk-encryption-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the type of host and disk encryption configured meet the requirements.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">non-overlapping-subnets</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that this host does not have any overlapping subnets.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">hostname-unique</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the hostname is unique in the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">hostname-valid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks the validity of the hostname, meaning that it matches the general form of hostnames and is not forbidden.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">belongs-to-machine-cidr</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the host IP is in the address range of the machine CIDR.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">lso-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Validates that the cluster meets the requirements of the Local Storage Operator.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">odf-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Validates that the cluster meets the requirements of the Openshift Data Foundation Operator.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The cluster has a minimum of 3 hosts.
										</li><li class="listitem">
											The cluster has only 3 masters or a minimum of 3 workers.
										</li><li class="listitem">
											The cluster has 3 eligible disks and each host must have an eligible disk.
										</li><li class="listitem">
											The host role must not be "Auto Assign" for clusters with more than three hosts.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">cnv-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Validates that the cluster meets the requirements of Container Native Virtualization.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The BIOS of the host must have CPU virtualization enabled.
										</li><li class="listitem">
											Host must have enough CPU cores and RAM available for Container Native Virtualization.
										</li><li class="listitem">
											Will validate the Host Path Provisioner if necessary.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">lvm-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Validates that the cluster meets the requirements of the Logical Volume Manager Operator.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Host has at least one additional empty disk, not partitioned and not formatted.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">vsphere-disk-uuid-enabled</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Verifies that each valid disk sets <span class="emphasis"><em>disk.EnableUUID</em></span> to <span class="emphasis"><em>true</em></span>. In VSphere this will result in each disk having a UUID.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">compatible-agent</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the discovery agent version is compatible with the agent docker image version.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">no-skip-installation-disk</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that installation disk is not skipping disk formatting.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">no-skip-missing-disk</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that all disks marked to skip formatting are in the inventory. A disk ID can change on reboot, and this validation prevents issues caused by that.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">media-connected</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks the connection of the installation media to the host.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">machine-cidr-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the machine network definition exists for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603908293024"> <p>
									<code class="literal">id-platform-network-settings</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603908291936"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603908290848"> <p>
									Checks that the platform is compatible with the network settings. Some platforms are only permitted when installing Single Node Openshift or when using User Managed Networking.
								</p>
								 </td></tr></tbody></table></div></section></section><section class="section" id="cluster_validations"><div class="titlepage"><div><div><h2 class="title">10.5. Cluster validations</h2></div></div></div><section class="section" id="proc_getting-cluster-validations-by-using-rest-api_assembly_pre-installation-validation"><div class="titlepage"><div><div><h3 class="title">10.5.1. Getting cluster validations by using the REST API</h3></div></div></div><p>
					<span class="emphasis"><em>Note: If you use the web based UI, many of these validations will not show up by name. To get a list of validations consistent with the labels, use the following procedure.</em></span>
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed the <code class="literal">jq</code> utility.
						</li><li class="listitem">
							You have created an Infrastructure Environment by using the API or have created a cluster by using the UI.
						</li><li class="listitem">
							You have your Cluster ID exported in your shell as <code class="literal">CLUSTER_ID</code>.
						</li><li class="listitem">
							You have credentials to use when accessing the API and have exported a token as <code class="literal">API_TOKEN</code> in your shell.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedures</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Refresh the API token:
						</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
							Get all cluster validations:
						</p><pre class="programlisting language-bash">$ curl \
  --silent \
  --header "Authorization: Bearer $API_TOKEN" \
  https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID \
  | jq -r .validations_info \
  | jq 'map(.[])'</pre></li><li class="listitem"><p class="simpara">
							Get non-passing cluster validations:
						</p><pre class="programlisting language-bash">$ curl \
  --silent \
  --header "Authorization: Bearer $API_TOKEN" \
  https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID \
  | jq -r .validations_info \
  | jq '. | map(.[] | select(.status=="failure" or .status=="pending")) | select(length&gt;0)'</pre></li></ol></div></section><section class="section" id="ref_cluster-validations-in-detail_assembly_pre-installation-validation"><div class="titlepage"><div><div><h3 class="title">10.5.2. Cluster validations in detail</h3></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 50%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140603915258352" scope="col">Parameter</th><th align="left" valign="top" id="idm140603915257264" scope="col">Validation type</th><th align="left" valign="top" id="idm140603915256176" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">machine-cidr-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the machine network definition exists for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">cluster-cidr-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the cluster network definition exists for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">service-cidr-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the service network definition exists for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">no-cidrs-overlapping</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the defined networks do not overlap.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">networks-same-address-families</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the defined networks share the same address families (valid address families are IPv4, IPv6)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">network-prefix-valid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks the cluster network prefix to ensure that it is valid and allows enough address space for all hosts.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">machine-cidr-equals-to-calculated-cidr</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									For a non user managed networking cluster. Checks that <code class="literal">apiVIPs</code> or <code class="literal">ingressVIPs</code> are members of the machine CIDR if they exist.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">api-vips-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									For a non user managed networking cluster. Checks that <code class="literal">apiVIPs</code> exist.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">api-vips-valid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									For a non user managed networking cluster. Checks if the <code class="literal">apiVIPs</code> belong to the machine CIDR and are not in use.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">ingress-vips-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									For a non user managed networking cluster. Checks that <code class="literal">ingressVIPs</code> exist.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">ingress-vips-valid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									For a non user managed networking cluster. Checks if the <code class="literal">ingressVIPs</code> belong to the machine CIDR and are not in use.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">all-hosts-are-ready-to-install</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that all hosts in the cluster are in the "ready to install" status.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">sufficient-masters-count</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									This validation only applies to multi-node clusters.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The cluster must have exactly three masters.
										</li><li class="listitem">
											If the cluster has worker nodes, a minimum of 2 worker nodes must exist.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">dns-domain-defined</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the base DNS domain exists for the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">pull-secret-set</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									non-blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that the pull secret exists. Does not check that the pull secret is valid or authorized.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">ntp-server-configured</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks that each of the host clocks are no more than 4 minutes out of sync with each other.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">lso-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Validates that the cluster meets the requirements of the Local Storage Operator.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">odf-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Validates that the cluster meets the requirements of the Openshift Data Foundation Operator.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The cluster has a minimum of 3 hosts.
										</li><li class="listitem">
											The cluster has only 3 masters or a minimum of 3 workers.
										</li><li class="listitem">
											The cluster has 3 eligible disks and each host must have an eligible disk.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">cnv-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Validates that the cluster meets the requirements of Container Native Virtualization.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The CPU architecture for the cluster is x86
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">lvm-requirements-satisfied</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Validates that the cluster meets the requirements of the Logical Volume Manager Operator.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The cluster must be single node.
										</li><li class="listitem">
											The cluster must be running Openshift &gt;= 4.11.0.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603915258352"> <p>
									<code class="literal">network-type-valid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603915257264"> <p>
									blocking
								</p>
								 </td><td align="left" valign="top" headers="idm140603915256176"> <p>
									Checks the validity of the network type if it exists.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The network type must be OpenshiftSDN or OVNKubernetes.
										</li><li class="listitem">
											OpenshiftSDN does not support IPv6 or Single Node Openshift.
										</li><li class="listitem">
											OVNKubernetes does not support VIP DHCP allocation.
										</li></ul></div>
								 </td></tr></tbody></table></div></section></section></section><section class="chapter" id="assembly_network-configuration"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Network configuration</h1></div></div></div><p>
			This section describes the basics of network configuration using the Assisted Installer.
		</p><section class="section" id="con_cluster-networking_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.1. Cluster networking</h2></div></div></div><p>
				There are various network types and addresses used by OpenShift and listed in the table below.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 40%; " class="col_2"><!--Empty--></col><col style="width: 40%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140603908302128" scope="col">Type</th><th align="left" valign="top" id="idm140603908301040" scope="col">DNS</th><th align="left" valign="top" id="idm140603908299952" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">clusterNetwork</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The IP address pools from which Pod IP addresses are allocated.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">serviceNetwork</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The IP address pool for services.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">machineNetwork</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The IP address blocks for machines forming the cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">apiVIP</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> <p>
								<code class="literal">api.&lt;clustername.clusterdomain&gt;</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The VIP to use for API communication. This setting must either be provided or pre-configured in the DNS so that the default name resolves correctly. If you are deploying with dual-stack networking, this must be the IPv4 address.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">apiVIPs</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> <p>
								<code class="literal">api.&lt;clustername.clusterdomain&gt;</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The VIPs to use for API communication. This setting must either be provided or pre-configured in the DNS so that the default name resolves correctly. If using dual stack networking, the first address must be the IPv4 address and the second address must be the IPv6 address. You must also set the <code class="literal">apiVIP</code> setting.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">ingressVIP</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> <p>
								<code class="literal">*.apps.&lt;clustername.clusterdomain&gt;</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The VIP to use for ingress traffic. If you are deploying with dual-stack networking, this must be the IPv4 address.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603908302128"> <p>
								<code class="literal">ingressVIPs</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908301040"> <p>
								<code class="literal">*.apps.&lt;clustername.clusterdomain&gt;</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140603908299952"> <p>
								The VIPs to use for ingress traffic. If you are deploying with dual-stack networking, the first address must be the IPv4 address and the second address must be the IPv6 address. You must also set the <code class="literal">ingressVIP</code> setting.
							</p>
							 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					OpenShift Container Platform 4.12 introduces the new <code class="literal">apiVIPs</code> and <code class="literal">ingressVIPs</code> settings to accept multiple IP addresses for dual-stack networking. When using dual-stack networking, the first IP address must be the IPv4 address and the second IP address must be the IPv6 address. The new settings will replace <code class="literal">apiVIP</code> and <code class="literal">IngressVIP</code>, but you must set both the new and old settings when modifying the configuration using the API.
				</p></div></div><p>
				Depending on the desired network stack, you can choose different network controllers. Currently, the Assisted Service can deploy OpenShift Container Platform clusters using one of the following configurations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						IPv4
					</li><li class="listitem">
						IPv6
					</li><li class="listitem">
						Dual-stack (IPv4 + IPv6)
					</li></ul></div><p>
				Supported network controllers depend on the selected stack and are summarized in the table below. For a detailed Container Network Interface (CNI) network provider feature comparison, refer to the <a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/openshift_sdn/about-openshift-sdn.html#nw-ovn-kubernetes-matrix_about-openshift-sdn">OCP Networking documentation</a>.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140603911621024" scope="col">Stack</th><th align="left" valign="top" id="idm140603911619936" scope="col">SDN</th><th align="left" valign="top" id="idm140603911618848" scope="col">OVN</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140603911621024"> <p>
								IPv4
							</p>
							 </td><td align="left" valign="top" headers="idm140603911619936"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140603911618848"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603911621024"> <p>
								IPv6
							</p>
							 </td><td align="left" valign="top" headers="idm140603911619936"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140603911618848"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140603911621024"> <p>
								Dual-stack
							</p>
							 </td><td align="left" valign="top" headers="idm140603911619936"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140603911618848"> <p>
								Yes
							</p>
							 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					OVN is the default Container Network Interface (CNI) in OpenShift Container Platform 4.12 and later releases.
				</p></div></div><section class="section" id="limitations"><div class="titlepage"><div><div><h3 class="title">11.1.1. Limitations</h3></div></div></div><section class="section" id="sdn"><div class="titlepage"><div><div><h4 class="title">11.1.1.1. SDN</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With Single Node OpenShift (SNO), the SDN controller is not supported.
							</li><li class="listitem">
								The SDN controller does not support IPv6.
							</li></ul></div></section><section class="section" id="ovn_kubernetes"><div class="titlepage"><div><div><h4 class="title">11.1.1.2. OVN-Kubernetes</h4></div></div></div><p>
						Please see the <a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/ovn_kubernetes_network_provider/about-ovn-kubernetes.html#nw-ovn-kubernetes-limitations_about-ovn-kubernetes">OVN-Kubernetes limitations section in the OCP documentation</a>.
					</p></section></section><section class="section" id="cluster_network"><div class="titlepage"><div><div><h3 class="title">11.1.2. Cluster network</h3></div></div></div><p>
					The cluster network is a network from which every Pod deployed in the cluster gets its IP address. Given that the workload may live across many nodes forming the cluster, it’s important for the network provider to be able to easily find an individual node based on the Pod’s IP address. To do this, <code class="literal">clusterNetwork.cidr</code> is further split into subnets of the size defined in <code class="literal">clusterNetwork.hostPrefix</code>.
				</p><p>
					The host prefix specifies a length of the subnet assigned to each individual node in the cluster. An example of how a cluster may assign addresses for the multi-node cluster:
				</p><pre class="programlisting language-yaml">---
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
---</pre><p>
					Creating a 3-node cluster using the snippet above may create the following network topology:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Pods scheduled in node #1 get IPs from <code class="literal">10.128.0.0/23</code>
						</li><li class="listitem">
							Pods scheduled in node #2 get IPs from <code class="literal">10.128.2.0/23</code>
						</li><li class="listitem">
							Pods scheduled in node #3 get IPs from <code class="literal">10.128.4.0/23</code>
						</li></ul></div><p>
					Explaining OVN-K8s internals is out of scope for this document, but the pattern described above provides a way to route Pod-to-Pod traffic between different nodes without keeping a big list of mapping between Pods and their corresponding nodes.
				</p></section><section class="section" id="machine_network"><div class="titlepage"><div><div><h3 class="title">11.1.3. Machine network</h3></div></div></div><p>
					The machine network is a network used by all the hosts forming the cluster to communicate with each other. This is also the subnet that must include the API and Ingress VIPs.
				</p></section><section class="section" id="sno_compared_to_multi_node_cluster"><div class="titlepage"><div><div><h3 class="title">11.1.4. SNO compared to multi-node cluster</h3></div></div></div><p>
					Depending on whether you are deploying a Single Node OpenShift or a multi-node cluster, different values are mandatory. The table below explains this in more detail.
				</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140603912007392" scope="col">Parameter</th><th align="left" valign="top" id="idm140603912006304" scope="col">SNO</th><th align="left" valign="top" id="idm140603912005216" scope="col">Multi-Node Cluster with DHCP mode</th><th align="left" valign="top" id="idm140603912004112" scope="col">Multi-Node Cluster without DHCP mode</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">clusterNetwork</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Required
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Required
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">serviceNetwork</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Required
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Required
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">machineNetwork</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Auto-assign possible (*)
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Auto-assign possible (*)
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Auto-assign possible (*)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">apiVIP</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">apiVIPs</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required in 4.12 and later releases
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">ingressVIP</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140603912007392"> <p>
									<code class="literal">ingressVIPs</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140603912006304"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912005216"> <p>
									Forbidden
								</p>
								 </td><td align="left" valign="top" headers="idm140603912004112"> <p>
									Required in 4.12 and later releases
								</p>
								 </td></tr></tbody></table></div><p>
					(*) Auto assignment of the machine network CIDR happens if there is only a single host network. Otherwise you need to specify it explicitly.
				</p></section><section class="section" id="air_gapped_environments"><div class="titlepage"><div><div><h3 class="title">11.1.5. Air-gapped environments</h3></div></div></div><p>
					The workflow for deploying a cluster without Internet access has some prerequisites which are out of scope of this document. You may consult the <a class="link" href="https://github.com/jparrill/ztp-the-hard-way/blob/main/docs/disconnected-ZTP-flow-hub-deployment.md">Zero Touch Provisioning the hard way Git repository</a> for some insights.
				</p></section></section><section class="section" id="con_dhcp-vip-allocation_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.2. DHCP VIP allocation</h2></div></div></div><p>
				The VIP DHCP allocation is a feature allowing users to skip the requirement of manually providing virtual IPs for API and Ingress by leveraging the ability of a service to automatically assign those IP addresses from the DHCP server.
			</p><p>
				If you enable the feature, instead of using <code class="literal">api_vips</code> and <code class="literal">ingress_vips</code> from the cluster configuration, the service will send a lease allocation request and based on the reply it will use VIPs accordingly. The service will allocate the IP addresses from the Machine Network.
			</p><p>
				Please note this is not an OpenShift Container Platform feature and it has been implemented in the Assisted Service to make the configuration easier.
			</p><section class="section" id="example_payload_to_enable_autoallocation"><div class="titlepage"><div><div><h3 class="title">11.2.1. Example payload to enable autoallocation</h3></div></div></div><pre class="programlisting language-json">---
{
  "vip_dhcp_allocation": true,
  "network_type": "OVNKubernetes",
  "user_managed_networking": false,
  "cluster_networks": [
    {
      "cidr": "10.128.0.0/14",
      "host_prefix": 23
    }
  ],
  "service_networks": [
    {
      "cidr": "172.30.0.0/16"
    }
  ],
  "machine_networks": [
    {
      "cidr": "192.168.127.0/24"
    }
  ]
}
---</pre></section><section class="section" id="example_payload_to_disable_autoallocation"><div class="titlepage"><div><div><h3 class="title">11.2.2. Example payload to disable autoallocation</h3></div></div></div><pre class="programlisting language-json">---
{
  "api_vip": "192.168.127.100",
  "api_vips": [
    {
        "ip": "192.168.127.100"
    }
  ],
  "ingress_vip": "192.168.127.101",
  "ingress_vips": [
    {
        "ip": "192.168.127.101"
    }
  ],
  "vip_dhcp_allocation": false,
  "network_type": "OVNKubernetes",
  "user_managed_networking": false,
  "cluster_networks": [
    {
      "cidr": "10.128.0.0/14",
      "host_prefix": 23
    }
  ],
  "service_networks": [
    {
      "cidr": "172.30.0.0/16"
    }
  ]
}
---</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In OpenShift Container Platform 4.12, you must set both the legacy <code class="literal">api_vip</code> and <code class="literal">ingress_vip</code> settings, and the new <code class="literal">api_vips</code> and <code class="literal">ingress_vips</code> settings.
					</p></div></div></section></section><section class="section _additional-resources" id="additional_resources_3"><div class="titlepage"><div><div><h2 class="title">11.3. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#additional-install-config-parameters_ipi-install-installation-workflow">Bare metal IPI documentation</a> provides additional explanation of the syntax for the VIP addresses.
					</li></ul></div></section><section class="section" id="con_understanding-differences-between-user-managed-networking-and-cluster-managed-networking_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.4. Understanding differences between User Managed Networking and Cluster Managed Networking</h2></div></div></div><p>
				User managed networking is a feature in the Assisted Installer that allows customers with non-standard network topologies to deploy OpenShift Container Platform clusters. Examples include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Customers with an external load balancer who do not want to use <code class="literal">keepalived</code> and VRRP for handling VIP addressses.
					</li><li class="listitem">
						Deployments with cluster nodes distributed across many distinct L2 network segments.
					</li></ul></div><section class="section" id="validations"><div class="titlepage"><div><div><h3 class="title">11.4.1. Validations</h3></div></div></div><p>
					There are various network validations happening in the Assisted Installer before it allows the installation to start. When you enable User Managed Networking, the following validations change:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							L3 connectivity check (ICMP) is performed instead of L2 check (ARP)
						</li></ul></div></section></section><section class="section" id="con_static-network-configuration_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.5. Static network configuration</h2></div></div></div><p>
				You may use static network configurations when generating or updating the discovery ISO.
			</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">11.5.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You are familiar with <a class="link" href="https://nmstate.io/examples.html">NMState</a>.
						</li></ul></div></section><section class="section" id="nmstate_configuration"><div class="titlepage"><div><div><h3 class="title">11.5.2. NMState configuration</h3></div></div></div><p>
					The NMState file in YAML format specifies the desired network configuration for the host. It has the logical names of the interfaces that will be replaced with the actual name of the interface at discovery time.
				</p><section class="section" id="example_of_nmstate_configuration"><div class="titlepage"><div><div><h4 class="title">11.5.2.1. Example of NMState configuration</h4></div></div></div><pre class="programlisting language-yaml">---
dns-resolver:
  config:
    server:
    - 192.168.126.1
interfaces:
- ipv4:
    address:
    - ip: 192.168.126.30
      prefix-length: 24
    dhcp: false
    enabled: true
  name: eth0
  state: up
  type: ethernet
- ipv4:
    address:
    - ip: 192.168.141.30
      prefix-length: 24
    dhcp: false
    enabled: true
  name: eth1
  state: up
  type: ethernet
routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.168.126.1
    next-hop-interface: eth0
    table-id: 254
---</pre></section></section><section class="section" id="mac_interface_mapping"><div class="titlepage"><div><div><h3 class="title">11.5.3. MAC interface mapping</h3></div></div></div><p>
					MAC interface map is an attribute that maps logical interfaces defined in the NMState configuration with the actual interfaces present on the host.
				</p><p>
					The mapping should always use physical interfaces present on the host. For example, when the NMState configuration defines a bond or VLAN, the mapping should only contain an entry for parent interfaces.
				</p><section class="section" id="example_of_mac_interface_mapping"><div class="titlepage"><div><div><h4 class="title">11.5.3.1. Example of MAC interface mapping</h4></div></div></div><pre class="programlisting language-yaml">---
mac_interface_map: [
    {
      mac_address: 02:00:00:2c:23:a5,
      logical_nic_name: eth0
    },
    {
      mac_address: 02:00:00:68:73:dc,
      logical_nic_name: eth1
    }
]
---</pre></section></section><section class="section" id="additional_nmstate_configuration_examples"><div class="titlepage"><div><div><h3 class="title">11.5.4. Additional NMState configuration examples</h3></div></div></div><p>
					The examples below are only meant to show a partial configuration. They are not meant to be used as-is, and you should always adjust to the environment where they will be used. If used incorrectly, they may leave your machines with no network connectivity.
				</p><section class="section" id="tagged_vlan"><div class="titlepage"><div><div><h4 class="title">11.5.4.1. Tagged VLAN</h4></div></div></div><pre class="programlisting language-yaml">---
    interfaces:
    - ipv4:
        address:
        - ip: 192.168.143.15
          prefix-length: 24
        dhcp: false
        enabled: true
      ipv6:
        enabled: false
      name: eth0.404
      state: up
      type: vlan
      vlan:
        base-iface: eth0
        id: 404
---</pre></section><section class="section" id="network_bond"><div class="titlepage"><div><div><h4 class="title">11.5.4.2. Network bond</h4></div></div></div><pre class="programlisting language-yaml">---
    interfaces:
    - ipv4:
        address:
        - ip: 192.168.138.15
          prefix-length: 24
        dhcp: false
        enabled: true
      ipv6:
        enabled: false
      link-aggregation:
        mode: active-backup
        options:
          all_slaves_active: delivered
          miimon: "140"
        slaves:
        - eth0
        - eth1
      name: bond0
      state: up
      type: bond
---</pre></section></section></section><section class="section" id="applying-static-network-configuration_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.6. Applying a static network configuration with the API</h2></div></div></div><p>
				You can apply a static network configuration using the Assisted Installer API.
			</p><div class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						You have created an infrastructure environment using the API or have created a cluster using the UI.
					</li><li class="listitem">
						You have your infrastructure environment ID exported in your shell as <code class="literal">$INFRA_ENV_ID</code>.
					</li><li class="listitem">
						You have credentials to use when accessing the API and have exported a token as <code class="literal">$API_TOKEN</code> in your shell.
					</li><li class="listitem">
						You have YAML files with a static network configuration available as <code class="literal">server-a.yaml</code> and <code class="literal">server-b.yaml</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a temporary file <code class="literal">/tmp/request-body.txt</code> with the API request:
					</p><pre class="programlisting language-bash">---
jq -n --arg NMSTATE_YAML1 "$(cat server-a.yaml)" --arg NMSTATE_YAML2 "$(cat server-b.yaml)" \
'{
  "static_network_config": [
    {
      "network_yaml": $NMSTATE_YAML1,
      "mac_interface_map": [{"mac_address": "02:00:00:2c:23:a5", "logical_nic_name": "eth0"}, {"mac_address": "02:00:00:68:73:dc", "logical_nic_name": "eth1"}]
    },
    {
      "network_yaml": $NMSTATE_YAML2,
      "mac_interface_map": [{"mac_address": "02:00:00:9f:85:eb", "logical_nic_name": "eth1"}, {"mac_address": "02:00:00:c8:be:9b", "logical_nic_name": "eth0"}]
     }
  ]
}' &gt;&gt; /tmp/request-body.txt
---</pre></li><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Send the request to the Assisted Service API endpoint:
					</p><pre class="programlisting language-bash">---
curl -H "Content-Type: application/json" \
-X PATCH -d @/tmp/request-body.txt \
-H "Authorization: Bearer ${API_TOKEN}" \
https://api.openshift.com/api/assisted-install/v2/infra-envs/$INFRA_ENV_ID
---</pre></li></ol></div></section><section class="section _additional-resources" id="additional_resources_4"><div class="titlepage"><div><div><h2 class="title">11.7. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#configuring-static-networks_installing-with-ui" title="3.3. Optional: Configuring static networks">Applying a static network configuration with the UI</a>
					</li></ul></div></section><section class="section" id="con_converting-to-dual-stack-networking_assembly_network-configuration"><div class="titlepage"><div><div><h2 class="title">11.8. Converting to dual-stack networking</h2></div></div></div><p>
				Dual-stack IPv4/IPv6 configuration allows deployment of a cluster with pods residing in both IPv4 and IPv6 subnets.
			</p><section class="section" id="prerequisites_2"><div class="titlepage"><div><div><h3 class="title">11.8.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You are familiar with <a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/ovn_kubernetes_network_provider/converting-to-dual-stack.html">OVN-K8s documentation</a>
						</li></ul></div></section><section class="section" id="example_payload_for_single_node_openshift"><div class="titlepage"><div><div><h3 class="title">11.8.2. Example payload for Single Node OpenShift</h3></div></div></div><pre class="programlisting language-json">---
{
  "network_type": "OVNKubernetes",
  "user_managed_networking": false,
  "cluster_networks": [
    {
      "cidr": "10.128.0.0/14",
      "host_prefix": 23
    },
    {
      "cidr": "fd01::/48",
      "host_prefix": 64
    }
  ],
  "service_networks": [
    {"cidr": "172.30.0.0/16"}, {"cidr": "fd02::/112"}
  ],
  "machine_networks": [
    {"cidr": "192.168.127.0/24"},{"cidr": "1001:db8::/120"}
  ]
}
---</pre></section><section class="section" id="example_payload_for_an_openshift_container_platform_cluster_consisting_of_many_nodes"><div class="titlepage"><div><div><h3 class="title">11.8.3. Example payload for an OpenShift Container Platform cluster consisting of many nodes</h3></div></div></div><pre class="programlisting language-json">---
{
  "vip_dhcp_allocation": false,
  "network_type": "OVNKubernetes",
  "user_managed_networking": false,
  "api_vip": "192.168.127.100",
  "api_vips": [
     {
        "ip": "192.168.127.100"
     },
     {
        "ip": "2001:0db8:85a3:0000:0000:8a2e:0370:7334"
     }
  ],
  "ingress_vip": "192.168.127.101",
  "ingress_vips": [
     {
        "ip": "192.168.127.101"
     },
     {
        "ip": "2001:0db8:85a3:0000:0000:8a2e:0370:7335"
     }
  ],
  "cluster_networks": [
    {
      "cidr": "10.128.0.0/14",
      "host_prefix": 23
    },
    {
      "cidr": "fd01::/48",
      "host_prefix": 64
    }
  ],
  "service_networks": [
    {"cidr": "172.30.0.0/16"}, {"cidr": "fd02::/112"}
  ],
  "machine_networks": [
    {"cidr": "192.168.127.0/24"},{"cidr": "1001:db8::/120"}
  ]
}
---</pre></section><section class="section" id="limitations_2"><div class="titlepage"><div><div><h3 class="title">11.8.4. Limitations</h3></div></div></div><p>
					The <code class="literal">api_vip</code> IP address and <code class="literal">ingress_vip</code> IP address settings must be of the primary IP address family when using dual-stack networking, which must be IPv4 addresses. Currently, Red Hat does not support dual-stack VIPs or dual-stack networking with IPv6 as the primary IP address family. Red Hat supports dual-stack networking with IPv4 as the primary IP address family and IPv6 as the secondary IP address family. Therefore, you must place the IPv4 entries before the IPv6 entries when entering the IP address values.
				</p><p>
					In OpenShift Container Platform 4.12, you must set both the legacy <code class="literal">api_vip</code> and <code class="literal">ingress_vip</code> settings, and the new <code class="literal">api_vips</code> and <code class="literal">ingress_vips</code> settings if you want to use dual stack networking on the VIP addresses. Since the legacy <code class="literal">api_vip</code> and <code class="literal">ingress_vip</code> settings only take one value each, they must be IPv4 addresses.
				</p></section></section><section class="section _additional-resources" id="additional_resources_5"><div class="titlepage"><div><div><h2 class="title">11.9. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/understanding-networking.html">Understanding OpenShift networking</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/openshift_sdn/about-openshift-sdn.html">OpenShift SDN - CNI network provider</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/ovn_kubernetes_network_provider/about-ovn-kubernetes.html">OVN-Kubernetes - CNI network provider</a>
					</li><li class="listitem">
						<a class="link" href="https://kubernetes.io/docs/concepts/services-networking/dual-stack/#dual-stack-service-configuration-scenarios">Dual-stack Service configuration scenarios</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/installing/installing_bare_metal/installing-bare-metal-network-customizations.html#installation-configuration-parameters-network_installing-bare-metal-network-customizations">Installing on bare metal OCP</a>.
					</li><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.11/networking/cluster-network-operator.html#nw-operator-cr-cno-object_cluster-network-operator">Cluster Network Operator configuration</a>.
					</li></ul></div></section></section><section class="chapter" id="expanding-the-cluster"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Expanding the cluster</h1></div></div></div><p>
			You can expand a cluster installed with the Assisted Installer by adding hosts using the user interface or the API.
		</p><section class="section" id="prerequisites_3"><div class="titlepage"><div><div><h2 class="title">12.1. Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have access to an Assisted Installer cluster.
					</li><li class="listitem">
						You must install the OpenShift CLI (<code class="literal">oc</code>).
					</li><li class="listitem">
						Ensure that all the required DNS records exist for the cluster that you are adding the worker node to.
					</li><li class="listitem">
						If you are adding a worker node to a cluster with multiple CPU architectures, you must ensure that the architecture is set to <code class="literal">multi</code>.
					</li></ul></div></section><section class="section" id="checking-for-multiple-architectures_expanding-the-cluster"><div class="titlepage"><div><div><h2 class="title">12.2. Checking for multiple architectures</h2></div></div></div><p>
				When adding a node to a cluster with multiple architectures, ensure that the <code class="literal">architecture</code> setting is set to <code class="literal">multi</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the cluster using the CLI.
					</li><li class="listitem"><p class="simpara">
						Check the <code class="literal">architecture</code> setting:
					</p><pre class="programlisting language-bash white-space-pre white-space-pre">$ oc adm release info -o json | jq .metadata.metadata</pre><p class="simpara">
						Ensure that the <code class="literal">architecture</code> setting is set to 'multi'.
					</p><pre class="programlisting language-bash white-space-pre white-space-pre">{
  "release.openshift.io/architecture": "multi"
}</pre></li></ol></div></section><section class="section" id="adding-hosts-with-the-ui_expanding-the-cluster"><div class="titlepage"><div><div><h2 class="title">12.3. Adding hosts with the UI</h2></div></div></div><p>
				You can add hosts to clusters that were created using the <a class="link" href="https://console.redhat.com/openshift/assisted-installer/clusters/~new">Assisted Installer</a>.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Adding hosts to Assisted Installer clusters is only supported for clusters running OpenShift Container Platform version 4.11 and up.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to <a class="link" href="https://console.redhat.com/openshift">OpenShift Cluster Manager</a> and click the cluster that you want to expand.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add hosts</strong></span> and download the discovery ISO for the new host, adding an SSH public key and configuring cluster-wide proxy settings as needed.
					</li><li class="listitem">
						Optional: Modify ignition files as needed.
					</li><li class="listitem">
						Boot the target host using the discovery ISO, and wait for the host to be discovered in the console.
					</li><li class="listitem">
						Select the host role. It can be either a <code class="literal">worker</code> or a <code class="literal">control plane</code> host.
					</li><li class="listitem">
						Start the installation.
					</li><li class="listitem"><p class="simpara">
						As the installation proceeds, the installation generates pending certificate signing requests (CSRs) for the host. When prompted, approve the pending CSRs to complete the installation.
					</p><p class="simpara">
						When the host is sucessfully installed, it is listed as a host in the cluster web console.
					</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					New hosts will be encrypted using the same method as the original cluster.
				</p></div></div></section><section class="section" id="ai-adding-hosts-with-the-api_expanding-the-cluster"><div class="titlepage"><div><div><h2 class="title">12.4. Adding hosts with the API</h2></div></div></div><p>
				You can add hosts to clusters using the Assisted Installer REST API.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the OpenShift Cluster Manager CLI (<code class="literal">ocm</code>).
					</li><li class="listitem">
						Log in to <a class="link" href="https://console.redhat.com/openshift/assisted-installer/clusters">OpenShift Cluster Manager</a> as a user with cluster creation privileges.
					</li><li class="listitem">
						Install <code class="literal">jq</code>.
					</li><li class="listitem">
						Ensure that all the required DNS records exist for the cluster that you want to expand.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Authenticate against the Assisted Installer REST API and generate an API token for your session. The generated token is valid for 15 minutes only.
					</li><li class="listitem"><p class="simpara">
						Set the <code class="literal">$API_URL</code> variable by running the following command:
					</p><pre class="programlisting language-terminal">$ export API_URL=&lt;api_url&gt; <span id="CO7-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;api_url&gt;</code> with the Assisted Installer API URL, for example, <code class="literal"><a class="link" href="https://api.openshift.com">https://api.openshift.com</a></code>
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Import the cluster by running the following commands:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Set the <code class="literal">$CLUSTER_ID</code> variable. Log in to the cluster and run the following command:
							</p><pre class="programlisting language-terminal">$ export CLUSTER_ID=$(oc get clusterversion -o jsonpath='{.items[].spec.clusterID}')</pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">$CLUSTER_REQUEST</code> variable that is used to import the cluster:
							</p><pre class="programlisting language-terminal">$ export CLUSTER_REQUEST=$(jq --null-input --arg openshift_cluster_id "$CLUSTER_ID" '{
  "api_vip_dnsname": "&lt;api_vip&gt;", <span id="CO8-1"><!--Empty--></span><span class="callout">1</span>
  "openshift_cluster_id": $CLUSTER_ID,
  "name": "&lt;openshift_cluster_name&gt;" <span id="CO8-2"><!--Empty--></span><span class="callout">2</span>
}')</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;api_vip&gt;</code> with the hostname for the cluster’s API server. This can be the DNS domain for the API server or the IP address of the single node which the host can reach. For example, <code class="literal">api.compute-1.example.com</code>.
									</div></dd><dt><a href="#CO8-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;openshift_cluster_name&gt;</code> with the plain text name for the cluster. The cluster name should match the cluster name that was set during the Day 1 cluster installation.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Import the cluster and set the <code class="literal">$CLUSTER_ID</code> variable. Run the following command:
							</p><pre class="programlisting language-terminal">$ CLUSTER_ID=$(curl "$API_URL/api/assisted-install/v2/clusters/import" -H "Authorization: Bearer ${API_TOKEN}" -H 'accept: application/json' -H 'Content-Type: application/json' \
  -d "$CLUSTER_REQUEST" | tee /dev/stderr | jq -r '.id')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Generate the <code class="literal">InfraEnv</code> resource for the cluster and set the <code class="literal">$INFRA_ENV_ID</code> variable by running the following commands:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Download the pull secret file from Red Hat OpenShift Cluster Manager at <a class="link" href="console.redhat.com/openshift/install/pull-secret">console.redhat.com</a>.
							</li><li class="listitem"><p class="simpara">
								Set the <code class="literal">$INFRA_ENV_REQUEST</code> variable:
							</p><pre class="programlisting language-terminal">export INFRA_ENV_REQUEST=$(jq --null-input \
    --slurpfile pull_secret &lt;path_to_pull_secret_file&gt; \<span id="CO9-1"><!--Empty--></span><span class="callout">1</span>
    --arg ssh_pub_key "$(cat &lt;path_to_ssh_pub_key&gt;)" \<span id="CO9-2"><!--Empty--></span><span class="callout">2</span>
    --arg cluster_id "$CLUSTER_ID" '{
  "name": "&lt;infraenv_name&gt;", <span id="CO9-3"><!--Empty--></span><span class="callout">3</span>
  "pull_secret": $pull_secret[0] | tojson,
  "cluster_id": $cluster_id,
  "ssh_authorized_key": $ssh_pub_key,
  "image_type": "&lt;iso_image_type&gt;" <span id="CO9-4"><!--Empty--></span><span class="callout">4</span>
}')</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO9-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;path_to_pull_secret_file&gt;</code> with the path to the local file containing the downloaded pull secret from Red Hat OpenShift Cluster Manager at <a class="link" href="console.redhat.com/openshift/install/pull-secret">console.redhat.com</a>.
									</div></dd><dt><a href="#CO9-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;path_to_ssh_pub_key&gt;</code> with the path to the public SSH key required to access the host. If you do not set this value, you cannot access the host while in discovery mode.
									</div></dd><dt><a href="#CO9-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;infraenv_name&gt;</code> with the plain text name for the <code class="literal">InfraEnv</code> resource.
									</div></dd><dt><a href="#CO9-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;iso_image_type&gt;</code> with the ISO image type, either <code class="literal">full-iso</code> or <code class="literal">minimal-iso</code>.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Post the <code class="literal">$INFRA_ENV_REQUEST</code> to the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/RegisterInfraEnv">/v2/infra-envs</a> API and set the <code class="literal">$INFRA_ENV_ID</code> variable:
							</p><pre class="programlisting language-terminal">$ INFRA_ENV_ID=$(curl "$API_URL/api/assisted-install/v2/infra-envs" -H "Authorization: Bearer ${API_TOKEN}" -H 'accept: application/json' -H 'Content-Type: application/json' -d "$INFRA_ENV_REQUEST" | tee /dev/stderr | jq -r '.id')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Get the URL of the discovery ISO for the cluster host by running the following command:
					</p><pre class="programlisting language-terminal">$ curl -s "$API_URL/api/assisted-install/v2/infra-envs/$INFRA_ENV_ID" -H "Authorization: Bearer ${API_TOKEN}" | jq -r '.download_url'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">https://api.openshift.com/api/assisted-images/images/41b91e72-c33e-42ee-b80f-b5c5bbf6431a?arch=x86_64&amp;image_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTYwMjYzNzEsInN1YiI6IjQxYjkxZTcyLWMzM2UtNDJlZS1iODBmLWI1YzViYmY2NDMxYSJ9.1EX_VGaMNejMhrAvVRBS7PDPIQtbOOc8LtG8OukE1a4&amp;type=minimal-iso&amp;version=4.12</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Download the ISO:
					</p><pre class="programlisting language-terminal">$ curl -L -s '&lt;iso_url&gt;' --output rhcos-live-minimal.iso <span id="CO10-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO10-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;iso_url&gt;</code> with the URL for the ISO from the previous step.
							</div></dd></dl></div></li><li class="listitem">
						Boot the new worker host from the downloaded <code class="literal">rhcos-live-minimal.iso</code>.
					</li><li class="listitem"><p class="simpara">
						Get the list of hosts in the cluster that are <span class="emphasis"><em>not</em></span> installed. Keep running the following command until the new host shows up:
					</p><pre class="programlisting language-terminal">$ curl -s "$API_URL/api/assisted-install/v2/clusters/$CLUSTER_ID" -H "Authorization: Bearer ${API_TOKEN}" | jq -r '.hosts[] | select(.status != "installed").id'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">2294ba03-c264-4f11-ac08-2f1bb2f8c296</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">$HOST_ID</code> variable for the new host, for example:
					</p><pre class="programlisting language-terminal">$ HOST_ID=&lt;host_id&gt; <span id="CO11-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO11-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;host_id&gt;</code> with the host ID from the previous step.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Check that the host is ready to install by running the following command:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Ensure that you copy the entire command including the complete <code class="literal">jq</code> expression.
						</p></div></div><pre class="programlisting language-terminal">$ curl -s $API_URL/api/assisted-install/v2/clusters/$CLUSTER_ID -H "Authorization: Bearer ${API_TOKEN}" | jq '
def host_name($host):
    if (.suggested_hostname // "") == "" then
        if (.inventory // "") == "" then
            "Unknown hostname, please wait"
        else
            .inventory | fromjson | .hostname
        end
    else
        .suggested_hostname
    end;

def is_notable($validation):
    ["failure", "pending", "error"] | any(. == $validation.status);

def notable_validations($validations_info):
    [
        $validations_info // "{}"
        | fromjson
        | to_entries[].value[]
        | select(is_notable(.))
    ];

{
    "Hosts validations": {
        "Hosts": [
            .hosts[]
            | select(.status != "installed")
            | {
                "id": .id,
                "name": host_name(.),
                "status": .status,
                "notable_validations": notable_validations(.validations_info)
            }
        ]
    },
    "Cluster validations info": {
        "notable_validations": notable_validations(.validations_info)
    }
}
' -r</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">{
  "Hosts validations": {
    "Hosts": [
      {
        "id": "97ec378c-3568-460c-bc22-df54534ff08f",
        "name": "localhost.localdomain",
        "status": "insufficient",
        "notable_validations": [
          {
            "id": "ntp-synced",
            "status": "failure",
            "message": "Host couldn't synchronize with any NTP server"
          },
          {
            "id": "api-domain-name-resolved-correctly",
            "status": "error",
            "message": "Parse error for domain name resolutions result"
          },
          {
            "id": "api-int-domain-name-resolved-correctly",
            "status": "error",
            "message": "Parse error for domain name resolutions result"
          },
          {
            "id": "apps-domain-name-resolved-correctly",
            "status": "error",
            "message": "Parse error for domain name resolutions result"
          }
        ]
      }
    ]
  },
  "Cluster validations info": {
    "notable_validations": []
  }
}</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						When the previous command shows that the host is ready, start the installation using the <a class="link" href="https://api.openshift.com/?urls.primaryName=assisted-service%20service#/installer/v2InstallHost">/v2/infra-envs/{infra_env_id}/hosts/{host_id}/actions/install</a> API by running the following command:
					</p><pre class="programlisting language-terminal">$ curl -X POST -s "$API_URL/api/assisted-install/v2/infra-envs/$INFRA_ENV_ID/hosts/$HOST_ID/actions/install"  -H "Authorization: Bearer ${API_TOKEN}"</pre></li><li class="listitem"><p class="simpara">
						As the installation proceeds, the installation generates pending certificate signing requests (CSRs) for the host.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You must approve the CSRs to complete the installation.
						</p></div></div><p class="simpara">
						Keep running the following API call to monitor the cluster installation:
					</p><pre class="programlisting language-terminal">$ curl -s "$API_URL/api/assisted-install/v2/clusters/$CLUSTER_ID" -H "Authorization: Bearer ${API_TOKEN}" | jq '{
    "Cluster day-2 hosts":
        [
            .hosts[]
            | select(.status != "installed")
            | {id, requested_hostname, status, status_info, progress, status_updated_at, updated_at, infra_env_id, cluster_id, created_at}
        ]
}'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">{
  "Cluster day-2 hosts": [
    {
      "id": "a1c52dde-3432-4f59-b2ae-0a530c851480",
      "requested_hostname": "control-plane-1",
      "status": "added-to-existing-cluster",
      "status_info": "Host has rebooted and no further updates will be posted. Please check console for progress and to possibly approve pending CSRs",
      "progress": {
        "current_stage": "Done",
        "installation_percentage": 100,
        "stage_started_at": "2022-07-08T10:56:20.476Z",
        "stage_updated_at": "2022-07-08T10:56:20.476Z"
      },
      "status_updated_at": "2022-07-08T10:56:20.476Z",
      "updated_at": "2022-07-08T10:57:15.306369Z",
      "infra_env_id": "b74ec0c3-d5b5-4717-a866-5b6854791bd3",
      "cluster_id": "8f721322-419d-4eed-aa5b-61b50ea586ae",
      "created_at": "2022-07-06T22:54:57.161614Z"
    }
  ]
}</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Optional: Run the following command to see all the events for the cluster:
					</p><pre class="programlisting language-terminal">$ curl -s "$API_URL/api/assisted-install/v2/events?cluster_id=$CLUSTER_ID" -H "Authorization: Bearer ${API_TOKEN}" | jq -c '.[] | {severity, message, event_time, host_id}'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">{"severity":"info","message":"Host compute-0: updated status from insufficient to known (Host is ready to be installed)","event_time":"2022-07-08T11:21:46.346Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}
{"severity":"info","message":"Host compute-0: updated status from known to installing (Installation is in progress)","event_time":"2022-07-08T11:28:28.647Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}
{"severity":"info","message":"Host compute-0: updated status from installing to installing-in-progress (Starting installation)","event_time":"2022-07-08T11:28:52.068Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}
{"severity":"info","message":"Uploaded logs for host compute-0 cluster 8f721322-419d-4eed-aa5b-61b50ea586ae","event_time":"2022-07-08T11:29:47.802Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}
{"severity":"info","message":"Host compute-0: updated status from installing-in-progress to added-to-existing-cluster (Host has rebooted and no further updates will be posted. Please check console for progress and to possibly approve pending CSRs)","event_time":"2022-07-08T11:29:48.259Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}
{"severity":"info","message":"Host: compute-0, reached installation stage Rebooting","event_time":"2022-07-08T11:29:48.261Z","host_id":"9d7b3b44-1125-4ad0-9b14-76550087b445"}</pre>

						</p></div></li><li class="listitem">
						Log in to the cluster and approve the pending CSRs to complete the installation.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check that the new host was successfully added to the cluster with a status of <code class="literal">Ready</code>:
					</p><pre class="programlisting language-terminal">$ oc get nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME                           STATUS   ROLES           AGE   VERSION
control-plane-1.example.com    Ready    master,worker   56m   v1.25.0
compute-1.example.com          Ready    worker          11m   v1.25.0</pre>

						</p></div></li></ul></div></section><section class="section" id="installing-primary-control-plane-node-healthy-cluster_expanding-the-cluster"><div class="titlepage"><div><div><h2 class="title">12.5. Installing a primary control plane node on a healthy cluster</h2></div></div></div><p>
				This procedure describes how to install a primary control plane node on a healthy OpenShift Container Platform cluster.
			</p><p>
				If the cluster is unhealthy, additional operations are required before they can be managed. See <a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/index#installing-primary-control-plane-node-unhealthy-cluster_expanding-the-cluster">Installing a primary control plane node on an unhealthy cluster</a> for additional information.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are using OpenShift Container Platform 4.11 or newer with the correct <code class="literal">etcd-operator</code> version.
					</li><li class="listitem">
						You have <a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/installing-on-prem-assisted">installed</a> a healthy cluster with a minimum of three nodes.
					</li><li class="listitem">
						You have <a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/assembly_role-assignment">assigned</a> <code class="literal">role: master</code> to a single node.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Review and approve CSRs
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Review the <code class="literal">CertificateSigningRequests</code> (CSRs):
							</p><pre class="programlisting language-terminal">$ oc get csr | grep Pending</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">csr-5sd59   8m19s   kubernetes.io/kube-apiserver-client-kubelet   system:serviceaccount:openshift-machine-config-operator:node-bootstrapper   &lt;none&gt;              Pending
csr-xzqts   10s     kubernetes.io/kubelet-serving                 system:node:worker-6                                                   &lt;none&gt;              Pending</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Approve all pending CSRs:
							</p><pre class="programlisting language-terminal">$ oc get csr -o go-template='{{range .items}}{{if not .status}}{{.metadata.name}}{{"\n"}}{{end}}{{end}}' | xargs --no-run-if-empty oc adm certificate approve</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									You must approve the CSRs to complete the installation.
								</p></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Confirm the primary node is in <code class="literal">Ready</code> status:
					</p><pre class="programlisting language-terminal">$ oc get nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       STATUS   ROLES    AGE     VERSION
master-0   Ready    master   4h42m   v1.24.0+3882f8f
worker-1   Ready    worker   4h29m   v1.24.0+3882f8f
master-2   Ready    master   4h43m   v1.24.0+3882f8f
master-3   Ready    master   4h27m   v1.24.0+3882f8f
worker-4   Ready    worker   4h30m   v1.24.0+3882f8f
master-5   Ready    master   105s    v1.24.0+3882f8f</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">etcd-operator</code> requires a <code class="literal">Machine</code> Custom Resources (CRs) referencing the new node when the cluster runs with a functional Machine API.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Link the <code class="literal">Machine</code> CR with <code class="literal">BareMetalHost</code> and <code class="literal">Node</code>:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the <code class="literal">BareMetalHost</code> CR with a unique <code class="literal">.metadata.name</code> value":
							</p><pre class="programlisting language-terminal">apiVersion: metal3.io/v1alpha1
kind: BareMetalHost
metadata:
  name: custom-master3
  namespace: openshift-machine-api
  annotations:
spec:
  automatedCleaningMode: metadata
  bootMACAddress: 00:00:00:00:00:02
  bootMode: UEFI
  customDeploy:
    method: install_coreos
  externallyProvisioned: true
  online: true
  userData:
    name: master-user-data-managed
    namespace: openshift-machine-api</pre><pre class="programlisting language-terminal">$ oc create -f &lt;filename&gt;</pre></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">BareMetalHost</code> CR:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;filename&gt;</pre></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">Machine</code> CR using the unique <code class="literal">.machine.name</code> value:
							</p><pre class="programlisting language-terminal">apiVersion: machine.openshift.io/v1beta1
kind: Machine
metadata:
  annotations:
    machine.openshift.io/instance-state: externally provisioned
    metal3.io/BareMetalHost: openshift-machine-api/custom-master3
  finalizers:
  - machine.machine.openshift.io
  generation: 3
  labels:
    machine.openshift.io/cluster-api-cluster: test-day2-1-6qv96
    machine.openshift.io/cluster-api-machine-role: master
    machine.openshift.io/cluster-api-machine-type: master
  name: custom-master3
  namespace: openshift-machine-api
spec:
  metadata: {}
  providerSpec:
    value:
      apiVersion: baremetal.cluster.k8s.io/v1alpha1
      customDeploy:
        method: install_coreos
      hostSelector: {}
      image:
        checksum: ""
        url: ""
      kind: BareMetalMachineProviderSpec
      metadata:
        creationTimestamp: null
      userData:
        name: master-user-data-managed</pre><pre class="programlisting language-terminal">$ oc create -f &lt;filename&gt;</pre></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">Machine</code> CR:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;filename&gt;</pre></li><li class="listitem"><p class="simpara">
								Link <code class="literal">BareMetalHost</code>, <code class="literal">Machine</code>, and <code class="literal">Node</code> using the <code class="literal">link-machine-and-node.sh</code> script:
							</p><pre class="programlisting language-bash">#!/bin/bash

# Credit goes to https://bugzilla.redhat.com/show_bug.cgi?id=1801238.
# This script will link Machine object and Node object. This is needed
# in order to have IP address of the Node present in the status of the Machine.

set -x
set -e

machine="$1"
node="$2"

if [ -z "$machine" -o -z "$node" ]; then
    echo "Usage: $0 MACHINE NODE"
    exit 1
fi

uid=$(echo $node | cut -f1 -d':')
node_name=$(echo $node | cut -f2 -d':')

oc proxy &amp;
proxy_pid=$!
function kill_proxy {
    kill $proxy_pid
}
trap kill_proxy EXIT SIGINT

HOST_PROXY_API_PATH="http://localhost:8001/apis/metal3.io/v1alpha1/namespaces/openshift-machine-api/baremetalhosts"

function wait_for_json() {
    local name
    local url
    local curl_opts
    local timeout

    local start_time
    local curr_time
    local time_diff

    name="$1"
    url="$2"
    timeout="$3"
    shift 3
    curl_opts="$@"
    echo -n "Waiting for $name to respond"
    start_time=$(date +%s)
    until curl -g -X GET "$url" "${curl_opts[@]}" 2&gt; /dev/null | jq '.' 2&gt; /dev/null &gt; /dev/null; do
        echo -n "."
        curr_time=$(date +%s)
        time_diff=$(($curr_time - $start_time))
        if [[ $time_diff -gt $timeout ]]; then
            echo "\nTimed out waiting for $name"
            return 1
        fi
        sleep 5
    done
    echo " Success!"
    return 0
}
wait_for_json oc_proxy "${HOST_PROXY_API_PATH}" 10 -H "Accept: application/json" -H "Content-Type: application/json"

addresses=$(oc get node -n openshift-machine-api ${node_name} -o json | jq -c '.status.addresses')

machine_data=$(oc get machine -n openshift-machine-api -o json ${machine})
host=$(echo "$machine_data" | jq '.metadata.annotations["metal3.io/BareMetalHost"]' | cut -f2 -d/ | sed 's/"//g')

if [ -z "$host" ]; then
    echo "Machine $machine is not linked to a host yet." 1&gt;&amp;2
    exit 1
fi

# The address structure on the host doesn't match the node, so extract
# the values we want into separate variables so we can build the patch
# we need.
hostname=$(echo "${addresses}" | jq '.[] | select(. | .type == "Hostname") | .address' | sed 's/"//g')
ipaddr=$(echo "${addresses}" | jq '.[] | select(. | .type == "InternalIP") | .address' | sed 's/"//g')

host_patch='
{
  "status": {
    "hardware": {
      "hostname": "'${hostname}'",
      "nics": [
        {
          "ip": "'${ipaddr}'",
          "mac": "00:00:00:00:00:00",
          "model": "unknown",
          "speedGbps": 10,
          "vlanId": 0,
          "pxe": true,
          "name": "eth1"
        }
      ],
      "systemVendor": {
        "manufacturer": "Red Hat",
        "productName": "product name",
        "serialNumber": ""
      },
      "firmware": {
        "bios": {
          "date": "04/01/2014",
          "vendor": "SeaBIOS",
          "version": "1.11.0-2.el7"
        }
      },
      "ramMebibytes": 0,
      "storage": [],
      "cpu": {
        "arch": "x86_64",
        "model": "Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz",
        "clockMegahertz": 2199.998,
        "count": 4,
        "flags": []
      }
    }
  }
}
'

echo "PATCHING HOST"
echo "${host_patch}" | jq .

curl -s \
     -X PATCH \
     ${HOST_PROXY_API_PATH}/${host}/status \
     -H "Content-type: application/merge-patch+json" \
     -d "${host_patch}"

oc get baremetalhost -n openshift-machine-api -o yaml "${host}"</pre><pre class="programlisting language-terminal">$ bash link-machine-and-node.sh custom-master3 worker-5</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Confirm <code class="literal">etcd</code> members:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-2
etcdctl member list -w table</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+--------+---------+--------+--------------+--------------+---------+
|   ID   |  STATUS |  NAME  |  PEER ADDRS  | CLIENT ADDRS | LEARNER |
+--------+---------+--------+--------------+--------------+---------+
|2c18942f| started |worker-3|192.168.111.26|192.168.111.26|  false  |
|61e2a860| started |worker-2|192.168.111.25|192.168.111.25|  false  |
|ead4f280| started |worker-5|192.168.111.28|192.168.111.28|  false  |
+--------+---------+--------+--------------+--------------+---------+</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">etcd-operator</code> configuration applies to all nodes:
					</p><pre class="programlisting language-terminal">$ oc get clusteroperator etcd</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME   VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE   MESSAGE
etcd   4.11.5    True        False         False      5h54m</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm <code class="literal">etcd-operator</code> health:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-0
etcdctl endpoint health</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">192.168.111.26 is healthy: committed proposal: took = 11.297561ms
192.168.111.25 is healthy: committed proposal: took = 13.892416ms
192.168.111.28 is healthy: committed proposal: took = 11.870755ms</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm node health:
					</p><pre class="programlisting language-terminal">$ oc get Nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       STATUS   ROLES    AGE     VERSION
master-0   Ready    master   6h20m   v1.24.0+3882f8f
worker-1   Ready    worker   6h7m    v1.24.0+3882f8f
master-2   Ready    master   6h20m   v1.24.0+3882f8f
master-3   Ready    master   6h4m    v1.24.0+3882f8f
worker-4   Ready    worker   6h7m    v1.24.0+3882f8f
master-5   Ready    master   99m     v1.24.0+3882f8f</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">ClusterOperators</code> health:
					</p><pre class="programlisting language-terminal">$ oc get ClusterOperators</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME                                      VERSION AVAILABLE PROGRESSING DEGRADED SINCE MSG
authentication                            4.11.5  True      False       False    5h57m
baremetal                                 4.11.5  True      False       False    6h19m
cloud-controller-manager                  4.11.5  True      False       False    6h20m
cloud-credential                          4.11.5  True      False       False    6h23m
cluster-autoscaler                        4.11.5  True      False       False    6h18m
config-operator                           4.11.5  True      False       False    6h19m
console                                   4.11.5  True      False       False    6h4m
csi-snapshot-controller                   4.11.5  True      False       False    6h19m
dns                                       4.11.5  True      False       False    6h18m
etcd                                      4.11.5  True      False       False    6h17m
image-registry                            4.11.5  True      False       False    6h7m
ingress                                   4.11.5  True      False       False    6h6m
insights                                  4.11.5  True      False       False    6h12m
kube-apiserver                            4.11.5  True      False       False    6h16m
kube-controller-manager                   4.11.5  True      False       False    6h16m
kube-scheduler                            4.11.5  True      False       False    6h16m
kube-storage-version-migrator             4.11.5  True      False       False    6h19m
machine-api                               4.11.5  True      False       False    6h15m
machine-approver                          4.11.5  True      False       False    6h19m
machine-config                            4.11.5  True      False       False    6h18m
marketplace                               4.11.5  True      False       False    6h18m
monitoring                                4.11.5  True      False       False    6h4m
network                                   4.11.5  True      False       False    6h20m
node-tuning                               4.11.5  True      False       False    6h18m
openshift-apiserver                       4.11.5  True      False       False    6h8m
openshift-controller-manager              4.11.5  True      False       False    6h7m
openshift-samples                         4.11.5  True      False       False    6h12m
operator-lifecycle-manager                4.11.5  True      False       False    6h18m
operator-lifecycle-manager-catalog        4.11.5  True      False       False    6h19m
operator-lifecycle-manager-pkgsvr         4.11.5  True      False       False    6h12m
service-ca                                4.11.5  True      False       False    6h19m
storage                                   4.11.5  True      False       False    6h19m</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">ClusterVersion</code>:
					</p><pre class="programlisting language-terminal">$ oc get ClusterVersion</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME      VERSION   AVAILABLE   PROGRESSING   SINCE   STATUS
version   4.11.5    True        False         5h57m   Cluster version is 4.11.5</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Remove the old control plane node:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Delete the <code class="literal">BareMetalHost</code> CR:
							</p><pre class="programlisting language-terminal">$ oc delete bmh -n openshift-machine-api custom-master3</pre></li><li class="listitem"><p class="simpara">
								Confirm the <code class="literal">Machine</code> is unhealthy:
							</p><pre class="programlisting language-terminal">$ oc get machine -A</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAMESPACE              NAME                              PHASE    AGE
openshift-machine-api  custom-master3                    Running  14h
openshift-machine-api  test-day2-1-6qv96-master-0        Failed   20h
openshift-machine-api  test-day2-1-6qv96-master-1        Running  20h
openshift-machine-api  test-day2-1-6qv96-master-2        Running  20h
openshift-machine-api  test-day2-1-6qv96-worker-0-8w7vr  Running  19h
openshift-machine-api  test-day2-1-6qv96-worker-0-rxddj  Running  19h</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Delete the <code class="literal">Machine</code> CR:
							</p><pre class="programlisting language-terminal">$ oc delete machine -n openshift-machine-api   test-day2-1-6qv96-master-0
machine.machine.openshift.io "test-day2-1-6qv96-master-0" deleted</pre></li><li class="listitem"><p class="simpara">
								Confirm removal of the <code class="literal">Node</code> CR:
							</p><pre class="programlisting language-terminal">$ oc get nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME       STATUS   ROLES    AGE   VERSION
worker-1   Ready    worker   19h   v1.24.0+3882f8f
master-2   Ready    master   20h   v1.24.0+3882f8f
master-3   Ready    master   19h   v1.24.0+3882f8f
worker-4   Ready    worker   19h   v1.24.0+3882f8f
master-5   Ready    master   15h   v1.24.0+3882f8f</pre>

								</p></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Check <code class="literal">etcd-operator</code> logs to confirm status of the <code class="literal">etcd</code> cluster:
					</p><pre class="programlisting language-terminal">$ oc logs -n openshift-etcd-operator etcd-operator-8668df65d-lvpjf</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">E0927 07:53:10.597523       1 base_controller.go:272] ClusterMemberRemovalController reconciliation failed: cannot remove member: 192.168.111.23 because it is reported as healthy but it doesn't have a machine nor a node resource</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Remove the physical machine to allow <code class="literal">etcd-operator</code> to reconcile the cluster members:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-2
etcdctl member list -w table; etcdctl endpoint health</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+--------+---------+--------+--------------+--------------+---------+
|   ID   |  STATUS |  NAME  |  PEER ADDRS  | CLIENT ADDRS | LEARNER |
+--------+---------+--------+--------------+--------------+---------+
|2c18942f| started |worker-3|192.168.111.26|192.168.111.26|  false  |
|61e2a860| started |worker-2|192.168.111.25|192.168.111.25|  false  |
|ead4f280| started |worker-5|192.168.111.28|192.168.111.28|  false  |
+--------+---------+--------+--------------+--------------+---------+
192.168.111.26 is healthy: committed proposal: took = 10.458132ms
192.168.111.25 is healthy: committed proposal: took = 11.047349ms
192.168.111.28 is healthy: committed proposal: took = 11.414402ms</pre>

						</p></div></li></ol></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/index#installing-primary-control-plane-node-unhealthy-cluster_expanding-the-cluster">Installing a primary control plane node on an unhealthy cluster</a>
				</p></div></section><section class="section" id="installing-primary-control-plane-node-unhealthy-cluster_expanding-the-cluster"><div class="titlepage"><div><div><h2 class="title">12.6. Installing a primary control plane node on an unhealthy cluster</h2></div></div></div><p>
				This procedure describes how to install a primary control plane node on an unhealthy OpenShift Container Platform cluster.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are using OpenShift Container Platform 4.11 or newer with the correct <code class="literal">etcd-operator</code> version.
					</li><li class="listitem">
						You have <a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/installing-on-prem-assisted">installed</a> a healthy cluster with a minimum of two nodes.
					</li><li class="listitem">
						You have created the Day 2 control plane.
					</li><li class="listitem">
						You have <a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/assembly_role-assignment">assigned</a> <code class="literal">role: master</code> to a single node.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Confirm initial state of the cluster:
					</p><pre class="programlisting language-terminal">$ oc get nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       STATUS     ROLES    AGE   VERSION
worker-1   Ready      worker   20h   v1.24.0+3882f8f
master-2   NotReady   master   20h   v1.24.0+3882f8f
master-3   Ready      master   20h   v1.24.0+3882f8f
worker-4   Ready      worker   20h   v1.24.0+3882f8f
master-5   Ready      master   15h   v1.24.0+3882f8f</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">etcd-operator</code> detects the cluster as unhealthy:
					</p><pre class="programlisting language-terminal">$ oc logs -n openshift-etcd-operator etcd-operator-8668df65d-lvpjf</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">E0927 08:24:23.983733       1 base_controller.go:272] DefragController reconciliation failed: cluster is unhealthy: 2 of 3 members are available, worker-2 is unhealthy</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">etcdctl</code> members:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-3
etcdctl member list -w table</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+--------+---------+--------+--------------+--------------+---------+
|   ID   | STATUS  |  NAME  |  PEER ADDRS  | CLIENT ADDRS | LEARNER |
+--------+---------+--------+--------------+--------------+---------+
|2c18942f| started |worker-3|192.168.111.26|192.168.111.26|  false  |
|61e2a860| started |worker-2|192.168.111.25|192.168.111.25|  false  |
|ead4f280| started |worker-5|192.168.111.28|192.168.111.28|  false  |
+--------+---------+--------+--------------+--------------+---------+</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm that <code class="literal">etcdctl</code> reports an unhealthy member of the cluster:
					</p><pre class="programlisting language-terminal">$ etcdctl endpoint health</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">{"level":"warn","ts":"2022-09-27T08:25:35.953Z","logger":"client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000680380/192.168.111.25","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.111.25: connect: no route to host\""}
192.168.111.28 is healthy: committed proposal: took = 12.465641ms
192.168.111.26 is healthy: committed proposal: took = 12.297059ms
192.168.111.25 is unhealthy: failed to commit proposal: context deadline exceeded
Error: unhealthy cluster</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Remove the unhealthy control plane by deleting the <code class="literal">Machine</code> Custom Resource:
					</p><pre class="programlisting language-terminal">$ oc delete machine -n openshift-machine-api test-day2-1-6qv96-master-2</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">Machine</code> and <code class="literal">Node</code> Custom Resources (CRs) will not be deleted if the unhealthy cluster cannot run successfully.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Confirm that <code class="literal">etcd-operator</code> has not removed the unhealthy machine:
					</p><pre class="programlisting language-terminal">$ oc logs -n openshift-etcd-operator etcd-operator-8668df65d-lvpjf -f</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">I0927 08:58:41.249222       1 machinedeletionhooks.go:135] skip removing the deletion hook from machine test-day2-1-6qv96-master-2 since its member is still present with any of: [{InternalIP } {InternalIP 192.168.111.26}]</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Remove the unhealthy <code class="literal">etcdctl</code> member manually:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-3\
etcdctl member list -w table</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+--------+---------+--------+--------------+--------------+---------+
|   ID   |  STATUS |  NAME  |  PEER ADDRS  | CLIENT ADDRS | LEARNER |
+--------+---------+--------+--------------+--------------+---------+
|2c18942f| started |worker-3|192.168.111.26|192.168.111.26|  false  |
|61e2a860| started |worker-2|192.168.111.25|192.168.111.25|  false  |
|ead4f280| started |worker-5|192.168.111.28|192.168.111.28|  false  |
+--------+---------+--------+--------------+--------------+---------+</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm that <code class="literal">etcdctl</code> reports an unhealthy member of the cluster:
					</p><pre class="programlisting language-terminal">$ etcdctl endpoint health</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">{"level":"warn","ts":"2022-09-27T10:31:07.227Z","logger":"client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0000d6e00/192.168.111.25","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 192.168.111.25: connect: no route to host\""}
192.168.111.28 is healthy: committed proposal: took = 13.038278ms
192.168.111.26 is healthy: committed proposal: took = 12.950355ms
192.168.111.25 is unhealthy: failed to commit proposal: context deadline exceeded
Error: unhealthy cluster</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Remove the unhealthy cluster by deleting the <code class="literal">etcdctl</code> member Custom Resource:
					</p><pre class="programlisting language-terminal">$ etcdctl member remove 61e2a86084aafa62</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Member 61e2a86084aafa62 removed from cluster 6881c977b97990d7</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm members of <code class="literal">etcdctl</code> by running the following command:
					</p><pre class="programlisting language-terminal">$ etcdctl member list -w table</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+----------+---------+--------+--------------+--------------+-------+
|    ID    | STATUS  |  NAME  |  PEER ADDRS  | CLIENT ADDRS |LEARNER|
+----------+---------+--------+--------------+--------------+-------+
| 2c18942f | started |worker-3|192.168.111.26|192.168.111.26| false |
| ead4f280 | started |worker-5|192.168.111.28|192.168.111.28| false |
+----------+---------+--------+--------------+--------------+-------+</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Review and approve Certificate Signing Requests
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Review the Certificate Signing Requests (CSRs):
							</p><pre class="programlisting language-terminal">$ oc get csr | grep Pending</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">csr-5sd59   8m19s   kubernetes.io/kube-apiserver-client-kubelet   system:serviceaccount:openshift-machine-config-operator:node-bootstrapper   &lt;none&gt;              Pending
csr-xzqts   10s     kubernetes.io/kubelet-serving                 system:node:worker-6                                                   &lt;none&gt;              Pending</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Approve all pending CSRs:
							</p><pre class="programlisting language-terminal">$ oc get csr -o go-template='{{range .items}}{{if not .status}}{{.metadata.name}}{{"\n"}}{{end}}{{end}}' | xargs --no-run-if-empty oc adm certificate approve</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You must approve the CSRs to complete the installation.
								</p></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Confirm ready status of the control plane node:
					</p><pre class="programlisting language-terminal">$ oc get nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       STATUS   ROLES    AGE     VERSION
worker-1   Ready    worker   22h     v1.24.0+3882f8f
master-3   Ready    master   22h     v1.24.0+3882f8f
worker-4   Ready    worker   22h     v1.24.0+3882f8f
master-5   Ready    master   17h     v1.24.0+3882f8f
master-6   Ready    master   2m52s   v1.24.0+3882f8f</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Validate the <code class="literal">Machine</code>, <code class="literal">Node</code> and <code class="literal">BareMetalHost</code> Custom Resources.
					</p><p class="simpara">
						The <code class="literal">etcd-operator</code> requires <code class="literal">Machine</code> CRs to be present if the cluster is running with the functional Machine API. <code class="literal">Machine</code> CRs are displayed during the <code class="literal">Running</code> phase when present.
					</p></li><li class="listitem"><p class="simpara">
						Create <code class="literal">Machine</code> Custom Resource linked with <code class="literal">BareMetalHost</code> and <code class="literal">Node</code>.
					</p><p class="simpara">
						Make sure there is a <code class="literal">Machine</code> CR referencing the newly added node.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Boot-it-yourself will not create <code class="literal">BareMetalHost</code> and <code class="literal">Machine</code> CRs, so you must create them. Failure to create the <code class="literal">BareMetalHost</code> and <code class="literal">Machine</code> CRs will generate errors when running <code class="literal">etcd-operator</code>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Add <code class="literal">BareMetalHost</code> Custom Resource:
					</p><pre class="programlisting language-terminal">$ oc create bmh -n openshift-machine-api custom-master3</pre></li><li class="listitem"><p class="simpara">
						Add <code class="literal">Machine</code> Custom Resource:
					</p><pre class="programlisting language-terminal">$ oc create machine -n openshift-machine-api custom-master3</pre></li><li class="listitem"><p class="simpara">
						Link <code class="literal">BareMetalHost</code>, <code class="literal">Machine</code>, and <code class="literal">Node</code> by running the <code class="literal">link-machine-and-node.sh</code> script:
					</p><pre class="programlisting language-bash">#!/bin/bash

# Credit goes to https://bugzilla.redhat.com/show_bug.cgi?id=1801238.
# This script will link Machine object and Node object. This is needed
# in order to have IP address of the Node present in the status of the Machine.

set -x
set -e

machine="$1"
node="$2"

if [ -z "$machine" -o -z "$node" ]; then
    echo "Usage: $0 MACHINE NODE"
    exit 1
fi

uid=$(echo $node | cut -f1 -d':')
node_name=$(echo $node | cut -f2 -d':')

oc proxy &amp;
proxy_pid=$!
function kill_proxy {
    kill $proxy_pid
}
trap kill_proxy EXIT SIGINT

HOST_PROXY_API_PATH="http://localhost:8001/apis/metal3.io/v1alpha1/namespaces/openshift-machine-api/baremetalhosts"

function wait_for_json() {
    local name
    local url
    local curl_opts
    local timeout

    local start_time
    local curr_time
    local time_diff

    name="$1"
    url="$2"
    timeout="$3"
    shift 3
    curl_opts="$@"
    echo -n "Waiting for $name to respond"
    start_time=$(date +%s)
    until curl -g -X GET "$url" "${curl_opts[@]}" 2&gt; /dev/null | jq '.' 2&gt; /dev/null &gt; /dev/null; do
        echo -n "."
        curr_time=$(date +%s)
        time_diff=$(($curr_time - $start_time))
        if [[ $time_diff -gt $timeout ]]; then
            echo "\nTimed out waiting for $name"
            return 1
        fi
        sleep 5
    done
    echo " Success!"
    return 0
}
wait_for_json oc_proxy "${HOST_PROXY_API_PATH}" 10 -H "Accept: application/json" -H "Content-Type: application/json"

addresses=$(oc get node -n openshift-machine-api ${node_name} -o json | jq -c '.status.addresses')

machine_data=$(oc get machine -n openshift-machine-api -o json ${machine})
host=$(echo "$machine_data" | jq '.metadata.annotations["metal3.io/BareMetalHost"]' | cut -f2 -d/ | sed 's/"//g')

if [ -z "$host" ]; then
    echo "Machine $machine is not linked to a host yet." 1&gt;&amp;2
    exit 1
fi

# The address structure on the host doesn't match the node, so extract
# the values we want into separate variables so we can build the patch
# we need.
hostname=$(echo "${addresses}" | jq '.[] | select(. | .type == "Hostname") | .address' | sed 's/"//g')
ipaddr=$(echo "${addresses}" | jq '.[] | select(. | .type == "InternalIP") | .address' | sed 's/"//g')

host_patch='
{
  "status": {
    "hardware": {
      "hostname": "'${hostname}'",
      "nics": [
        {
          "ip": "'${ipaddr}'",
          "mac": "00:00:00:00:00:00",
          "model": "unknown",
          "speedGbps": 10,
          "vlanId": 0,
          "pxe": true,
          "name": "eth1"
        }
      ],
      "systemVendor": {
        "manufacturer": "Red Hat",
        "productName": "product name",
        "serialNumber": ""
      },
      "firmware": {
        "bios": {
          "date": "04/01/2014",
          "vendor": "SeaBIOS",
          "version": "1.11.0-2.el7"
        }
      },
      "ramMebibytes": 0,
      "storage": [],
      "cpu": {
        "arch": "x86_64",
        "model": "Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz",
        "clockMegahertz": 2199.998,
        "count": 4,
        "flags": []
      }
    }
  }
}
'

echo "PATCHING HOST"
echo "${host_patch}" | jq .

curl -s \
     -X PATCH \
     ${HOST_PROXY_API_PATH}/${host}/status \
     -H "Content-type: application/merge-patch+json" \
     -d "${host_patch}"

oc get baremetalhost -n openshift-machine-api -o yaml "${host}"</pre><pre class="programlisting language-terminal">$ bash link-machine-and-node.sh custom-master3 worker-3</pre></li><li class="listitem"><p class="simpara">
						Confirm members of <code class="literal">etcdctl</code> by running the following command:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-3
etcdctl member list -w table</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">+---------+-------+--------+--------------+--------------+-------+
|   ID    | STATUS|  NAME  |   PEER ADDRS | CLIENT ADDRS |LEARNER|
+---------+-------+--------+--------------+--------------+-------+
| 2c18942f|started|worker-3|192.168.111.26|192.168.111.26| false |
| ead4f280|started|worker-5|192.168.111.28|192.168.111.28| false |
| 79153c5a|started|worker-6|192.168.111.29|192.168.111.29| false |
+---------+-------+--------+--------------+--------------+-------+</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">etcd</code> operator has configured all nodes:
					</p><pre class="programlisting language-terminal">$ oc get clusteroperator etcd</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME   VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE
etcd   4.11.5    True        False         False      22h</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm health of <code class="literal">etcdctl</code>:
					</p><pre class="programlisting language-terminal">$ oc rsh -n openshift-etcd etcd-worker-3
etcdctl endpoint health</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">192.168.111.26 is healthy: committed proposal: took = 9.105375ms
192.168.111.28 is healthy: committed proposal: took = 9.15205ms
192.168.111.29 is healthy: committed proposal: took = 10.277577ms</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the health of the nodes:
					</p><pre class="programlisting language-terminal">$ oc get Nodes</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       STATUS   ROLES    AGE   VERSION
worker-1   Ready    worker   22h   v1.24.0+3882f8f
master-3   Ready    master   22h   v1.24.0+3882f8f
worker-4   Ready    worker   22h   v1.24.0+3882f8f
master-5   Ready    master   18h   v1.24.0+3882f8f
master-6   Ready    master   40m   v1.24.0+3882f8f</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the health of the <code class="literal">ClusterOperators</code>:
					</p><pre class="programlisting language-terminal">$ oc get ClusterOperators</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME                               VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE
authentication                     4.11.5    True        False         False      150m
baremetal                          4.11.5    True        False         False      22h
cloud-controller-manager           4.11.5    True        False         False      22h
cloud-credential                   4.11.5    True        False         False      22h
cluster-autoscaler                 4.11.5    True        False         False      22h
config-operator                    4.11.5    True        False         False      22h
console                            4.11.5    True        False         False      145m
csi-snapshot-controller            4.11.5    True        False         False      22h
dns                                4.11.5    True        False         False      22h
etcd                               4.11.5    True        False         False      22h
image-registry                     4.11.5    True        False         False      22h
ingress                            4.11.5    True        False         False      22h
insights                           4.11.5    True        False         False      22h
kube-apiserver                     4.11.5    True        False         False      22h
kube-controller-manager            4.11.5    True        False         False      22h
kube-scheduler                     4.11.5    True        False         False      22h
kube-storage-version-migrator      4.11.5    True        False         False      148m
machine-api                        4.11.5    True        False         False      22h
machine-approver                   4.11.5    True        False         False      22h
machine-config                     4.11.5    True        False         False      110m
marketplace                        4.11.5    True        False         False      22h
monitoring                         4.11.5    True        False         False      22h
network                            4.11.5    True        False         False      22h
node-tuning                        4.11.5    True        False         False      22h
openshift-apiserver                4.11.5    True        False         False      163m
openshift-controller-manager       4.11.5    True        False         False      22h
openshift-samples                  4.11.5    True        False         False      22h
operator-lifecycle-manager         4.11.5    True        False         False      22h
operator-lifecycle-manager-catalog 4.11.5    True        False         False      22h
operator-lifecycle-manager-pkgsvr  4.11.5    True        False         False      22h
service-ca                         4.11.5    True        False         False      22h
storage                            4.11.5    True        False         False      22h</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Confirm the <code class="literal">ClusterVersion</code>:
					</p><pre class="programlisting language-terminal">$ oc get ClusterVersion</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME      VERSION   AVAILABLE   PROGRESSING   SINCE   STATUS
version   4.11.5    True        False         22h     Cluster version is 4.11.5</pre>

						</p></div></li></ol></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2022/html/assisted_installer_for_openshift_container_platform/index#installing-primary-control-plane-node-healthy-cluster_expanding-the-cluster">Installing a primary control plane node on a healthy cluster</a>
				</p></div></section><section class="section _additional-resources" id="additional_resources_6"><div class="titlepage"><div><div><h2 class="title">12.7. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#authenticating-with-the-rest-api_installing-with-api" title="4.2. Authenticating with the REST API">Authenticating with the REST API</a>
					</li></ul></div></section></section><section class="chapter" id="assembly_installing-on-nutanix"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Optional: Installing on Nutanix</h1></div></div></div><p>
			If you install OpenShift Container Platform on Nutanix, the Assisted Installer can integrate the OpenShift Container Platform cluster with the Nutanix platform, which exposes the Machine API to Nutanix and enables autoscaling and dynamically provisioning storage containers with the Nutanix Container Storage Interface (CSI).
		</p><section class="section" id="adding-hosts-on-nutanix-with-the-ui_assembly_installing-on-nutanix"><div class="titlepage"><div><div><h2 class="title">13.1. Adding hosts on Nutanix with the UI</h2></div></div></div><p>
				To add hosts on Nutanix with the user interface (UI), generate the discovery image ISO from the Assisted Installer. Use the minimal discovery image ISO. This is the default setting. The image includes only what is required to boot a host with networking. The majority of the content is downloaded upon boot. The ISO image is about 100MB in size.
			</p><p>
				Once this is complete, you must create an image for the Nutanix platform and create the Nutanix virtual machines.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created a cluster profile in the Assisted Installer UI.
					</li><li class="listitem">
						You have a Nutanix cluster environment set up, and made a note of the cluster name and subnet name.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In <span class="strong strong"><strong>Host discovery</strong></span>, click the <span class="strong strong"><strong>Add hosts</strong></span> button and select the installation media.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Minimal image file: Provision with virtual media</strong></span> to download a smaller image that will fetch the data needed to boot.
					</li><li class="listitem">
						Add an SSH public key so that you can connect to the Nutanix VMs as the <code class="literal">core</code> user. Having a login to the cluster hosts can provide you with debugging information during the installation.
					</li><li class="listitem">
						Optional: If the cluster hosts are behind a firewall that requires the use of a proxy, select <span class="strong strong"><strong>Configure cluster-wide proxy settings</strong></span>. Enter the username, password, IP address and port for the HTTP and HTTPS URLs of the proxy server.
					</li><li class="listitem">
						Optional: Configure the discovery image if you want to boot it with an ignition file. See <a class="link" href="#assembly_configuring-the-discovery-image" title="Chapter 7. Configuring the discovery image">Configuring the discovery image</a> for additional details.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Generate Discovery ISO</strong></span>.
					</li><li class="listitem">
						Copy the <span class="strong strong"><strong>Discovery ISO URL</strong></span>.
					</li><li class="listitem">
						In the Nutanix Prism UI, follow the directions to <a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Prism-Central-Guide-vpc_2022_6:mul-images-upload-from-remote-server-pc-t.html">upload the discovery image from the Assisted Installer</a>.
					</li><li class="listitem"><p class="simpara">
						In the Nutanix Prism UI, create the control plane (master) VMs <a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Prism-Central-Guide-Prism-vpc:mul-vm-create-acropolis-pc-t.html">through Prism Central</a>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the <span class="strong strong"><strong>Name</strong></span>. For example, <code class="literal">control-plane</code> or <code class="literal">master</code>.
							</li><li class="listitem">
								Enter the <span class="strong strong"><strong>Number of VMs</strong></span>. This should be 3 for the control plane.
							</li><li class="listitem">
								Ensure the remaining settings meet the minimum requirements for control plane hosts.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						In the Nutanix Prism UI, create the worker VMs <a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Prism-Central-Guide-Prism-vpc:mul-vm-create-acropolis-pc-t.html">through Prism Central</a>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the <span class="strong strong"><strong>Name</strong></span>. For example, <code class="literal">worker</code>.
							</li><li class="listitem">
								Enter the <span class="strong strong"><strong>Number of VMs</strong></span>. You should create at least 2 worker nodes.
							</li><li class="listitem">
								Ensure the remaining settings meet the minimum requirements for worker hosts.
							</li></ol></div></li><li class="listitem">
						Return to the Assisted Installer user interface and wait until the Assisted Installer discovers the hosts and each of them have a <code class="literal">Ready</code> status.
					</li><li class="listitem">
						Move the <span class="strong strong"><strong>Integrate with your virtualization platform</strong></span> slider to enable integration with Nutanix.
					</li><li class="listitem">
						Continue with the installation procedure.
					</li></ol></div></section><section class="section" id="adding-hosts-on-nutanix-with-the-api_assembly_installing-on-nutanix"><div class="titlepage"><div><div><h2 class="title">13.2. Adding hosts on Nutanix with the API</h2></div></div></div><p>
				To add hosts on Nutanix with the API, generate the discovery image ISO from the Assisted Installer. Use the minimal discovery image ISO. This is the default setting. The image includes only what is required to boot a host with networking. The majority of the content is downloaded upon boot. The ISO image is about 100MB in size.
			</p><p>
				Once this is complete, you must create an image for the Nutanix platform and create the Nutanix virtual machines.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have set up the Assisted Installer API authentication.
					</li><li class="listitem">
						You have created an Assisted Installer cluster profile.
					</li><li class="listitem">
						You have created an Assisted Installer infrastructure environment.
					</li><li class="listitem">
						You have your infrastructure environment ID exported in your shell as <code class="literal">$INFRA_ENV_ID</code>.
					</li><li class="listitem">
						You have completed the Assisted Installer cluster configuration.
					</li><li class="listitem">
						You have a Nutanix cluster environment set up, and made a note of the cluster name and subnet name.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Configure the discovery image if you want it to boot with an ignition file.
					</li><li class="listitem"><p class="simpara">
						Create a Nutanix cluster configuration file to hold the environment variables:
					</p><pre class="programlisting language-terminal">$ touch ~/nutanix-cluster-env.sh</pre><pre class="programlisting language-terminal">$ chmod +x ~/nutanix-cluster-env.sh</pre><p class="simpara">
						If you have to start a new terminal session, you can reload the environment variables easily. For example:
					</p><pre class="programlisting language-terminal">$ source ~/nutanix-cluster-env.sh</pre></li><li class="listitem"><p class="simpara">
						Assign the Nutanix cluster’s name to the <code class="literal">NTX_CLUSTER_NAME</code> environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_CLUSTER_NAME=&lt;cluster_name&gt;
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;cluster_name&gt;</code> with the name of the Nutanix cluster.
					</p></li><li class="listitem"><p class="simpara">
						Assign the Nutanix cluster’s subnet name to the <code class="literal">NTX_SUBNET_NAME</code> environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_SUBNET_NAME=&lt;subnet_name&gt;
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;subnet_name&gt;</code> with the name of the Nutanix cluster’s subnet.
					</p></li><li class="listitem"><p class="simpara">
						Refresh the API token:
					</p><pre class="programlisting language-terminal">$ source refresh-token</pre></li><li class="listitem"><p class="simpara">
						Get the download URL:
					</p><pre class="programlisting language-terminal">$ curl -H "Authorization: Bearer ${API_TOKEN}" \
https://api.openshift.com/api/assisted-install/v2/infra-envs/${INFRA_ENV_ID}/downloads/image-url</pre></li><li class="listitem"><p class="simpara">
						Create the Nutanix image configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt; create-image.json
{
  "spec": {
    "name": "ocp_ai_discovery_image.iso",
    "description": "ocp_ai_discovery_image.iso",
    "resources": {
      "architecture": "X86_64",
      "image_type": "ISO_IMAGE",
      "source_uri": "&lt;image_url&gt;",
      "source_options": {
        "allow_insecure_connection": true
      }
    }
  },
  "metadata": {
    "spec_version": 3,
    "kind": "image"
  }
}
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;image_url&gt;</code> with the image URL downloaded from the previous step.
					</p></li><li class="listitem"><p class="simpara">
						Create the Nutanix image:
					</p><pre class="programlisting language-terminal">$ curl  -k -u &lt;user&gt;:'&lt;password&gt;' -X 'POST' \
'https://&lt;domain-or-ip&gt;:&lt;port&gt;/api/nutanix/v3/images \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d @./create-image.json | jq '.metadata.uuid'</pre><p class="simpara">
						Replace <code class="literal">&lt;user&gt;</code> with the Nutanix user name. Replace <code class="literal">'&lt;password&gt;'</code> with the Nutanix password. Replace <code class="literal">&lt;domain-or-ip&gt;</code> with the domain name or IP address of the Nutanix plaform. Replace <code class="literal">&lt;port&gt;</code> with the port for the Nutanix server. The port defaults to <code class="literal">9440</code>.
					</p></li><li class="listitem"><p class="simpara">
						Assign the returned UUID to the <code class="literal">NTX_IMAGE_UUID</code> environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_IMAGE_UUID=&lt;uuid&gt;
EOF</pre></li><li class="listitem"><p class="simpara">
						Get the Nutanix cluster UUID:
					</p><pre class="screen white-space-pre white-space-pre">$ curl -k -u &lt;user&gt;:'&lt;password&gt;' -X 'POST' \
  'https://&lt;domain-or-ip&gt;:&lt;port&gt;/api/nutanix/v3/clusters/list' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "kind": "cluster"
}'  | jq '.entities[] | select(.spec.name=="&lt;nutanix_cluster_name&gt;") | .metadata.uuid'</pre><p class="simpara">
						Replace <code class="literal">&lt;user&gt;</code> with the Nutanix user name. Replace <code class="literal">'&lt;password&gt;'</code> with the Nutanix password. Replace <code class="literal">&lt;domain-or-ip&gt;</code> with the domain name or IP address of the Nutanix plaform. Replace <code class="literal">&lt;port&gt;</code> with the port for the Nutanix server. The port defaults to <code class="literal">9440</code>. Replace <code class="literal">&lt;nutanix_cluster_name&gt;</code> with the name of the Nutanix cluster.
					</p></li><li class="listitem"><p class="simpara">
						Assign the returned Nutanix cluster UUID to the <code class="literal">NTX_CLUSTER_UUID</code> environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_CLUSTER_UUID=&lt;uuid&gt;
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;uuid&gt;</code> with the returned UUID of the Nutanix cluster.
					</p></li><li class="listitem"><p class="simpara">
						Get the Nutanix cluster’s subnet UUID:
					</p><pre class="screen white-space-pre white-space-pre">$ curl -k -u &lt;user&gt;:'&lt;password&gt;' -X 'POST' \
  'https://&lt;domain-or-ip&gt;:&lt;port&gt;/api/nutanix/v3/subnets/list' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "kind": "subnet",
  "filter": "name==&lt;subnet_name&gt;"
}' | jq '.entities[].metadata.uuid'</pre><p class="simpara">
						Replace <code class="literal">&lt;user&gt;</code> with the Nutanix user name. Replace <code class="literal">'&lt;password&gt;'</code> with the Nutanix password. Replace <code class="literal">&lt;domain-or-ip&gt;</code> with the domain name or IP address of the Nutanix plaform. Replace <code class="literal">&lt;port&gt;</code> with the port for the Nutanix server. The port defaults to <code class="literal">9440</code>. Replace <code class="literal">&lt;subnet_name&gt;</code> with the name of the cluster’s subnet.
					</p></li><li class="listitem"><p class="simpara">
						Assign the returned Nutanix subnet UUID to the <code class="literal">NTX_CLUSTER_UUID</code> environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_SUBNET_UUID=&lt;uuid&gt;
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;uuid&gt;</code> with the returned UUID of the cluster subnet.
					</p></li><li class="listitem"><p class="simpara">
						Ensure the Nutanix environment variables are set:
					</p><pre class="programlisting language-terminal">$ source ~/nutanix-cluster-env.sh</pre></li><li class="listitem"><p class="simpara">
						Create a VM configuration file for each Nutanix host. Create three control plane (master) VMs and at least two worker VMs. For example:
					</p><pre class="programlisting language-terminal">$ touch create-master-0.json</pre><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt; create-master-0.json
{
   "spec": {
      "name": "&lt;host_name&gt;",
      "resources": {
         "power_state": "ON",
         "num_vcpus_per_socket": 1,
         "num_sockets": 16,
         "memory_size_mib": 32768,
         "disk_list": [
            {
               "disk_size_mib": 122880,
               "device_properties": {
                  "device_type": "DISK"
               }
            },
            {
               "device_properties": {
                  "device_type": "CDROM"
               },
               "data_source_reference": {
                 "kind": "image",
                 "uuid": "$NTX_IMAGE_UUID"
              }
            }
         ],
         "nic_list": [
            {
               "nic_type": "NORMAL_NIC",
               "is_connected": true,
               "ip_endpoint_list": [
                  {
                     "ip_type": "DHCP"
                  }
               ],
               "subnet_reference": {
                  "kind": "subnet",
                  "name": "$NTX_SUBNET_NAME",
                  "uuid": "$NTX_SUBNET_UUID"
               }
            }
         ],
         "guest_tools": {
            "nutanix_guest_tools": {
               "state": "ENABLED",
               "iso_mount_state": "MOUNTED"
            }
         }
      },
      "cluster_reference": {
         "kind": "cluster",
         "name": "$NTX_CLUSTER_NAME",
         "uuid": "$NTX_CLUSTER_UUID"
      }
   },
   "api_version": "3.1.0",
   "metadata": {
      "kind": "vm"
   }
}
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;host_name&gt;</code> with the name of the host.
					</p></li><li class="listitem"><p class="simpara">
						Boot each Nutanix virtual machine:
					</p><pre class="programlisting language-terminal">$ curl -k -u &lt;user&gt;:'&lt;password&gt;' -X 'POST' \
  'https://&lt;domain-or-ip&gt;:&lt;port&gt;/api/nutanix/v3/vms' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d @./&lt;vm_config_file_name&gt; | jq '.metadata.uuid'</pre><p class="simpara">
						Replace <code class="literal">&lt;user&gt;</code> with the Nutanix user name. Replace <code class="literal">'&lt;password&gt;'</code> with the Nutanix password. Replace <code class="literal">&lt;domain-or-ip&gt;</code> with the domain name or IP address of the Nutanix plaform. Replace <code class="literal">&lt;port&gt;</code> with the port for the Nutanix server. The port defaults to <code class="literal">9440</code>. Replace <code class="literal">&lt;vm_config_file_name&gt;</code> with the name of the VM configuration file.
					</p></li><li class="listitem"><p class="simpara">
						Assign the returned VM UUID to a unique environment variable in the configuration file:
					</p><pre class="programlisting language-bash">$ cat &lt;&lt; EOF &gt;&gt; ~/nutanix-cluster-env.sh
export NTX_MASTER_0_UUID=&lt;uuid&gt;
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;uuid&gt;</code> with the returned UUID of the VM.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The environment variable must have a unique name for each VM.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Wait until the Assisted Installer has discovered each VM and they have passed validation.
					</p><pre class="programlisting language-terminal">$ curl -s -X GET "https://api.openshift.com/api/assisted-install/v2/clusters/$CLUSTER_ID"
--header "Content-Type: application/json"
-H "Authorization: Bearer $API_TOKEN"
| jq '.enabled_host_count'</pre></li><li class="listitem"><p class="simpara">
						Modify the cluster definition to enable integration with Nutanix:
					</p><pre class="programlisting language-terminal">$ curl https://api.openshift.com/api/assisted-install/v2/clusters/${CLUSTER_ID} \
-X PATCH \
-H "Authorization: Bearer ${API_TOKEN}" \
-H "Content-Type: application/json" \
-d '
{
    "platform_type":"nutanix"
}
' | jq</pre></li><li class="listitem">
						Continue with the installation procedure.
					</li></ol></div></section><section class="section" id="nutanix-post-installation-configuration_assembly_installing-on-nutanix"><div class="titlepage"><div><div><h2 class="title">13.3. Nutanix post-installation configuration</h2></div></div></div><p>
				After installing the OpenShift Container Platform on the Nutanix platform with platform integration enabled, you must update the following Nutanix configuration settings manually:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">&lt;prismcentral_address&gt;</code>: The Nutanix Prism Central IP address.
					</li><li class="listitem">
						<code class="literal">&lt;prismcentral_port&gt;</code>: The Nutanix Prism Central port.
					</li><li class="listitem">
						<code class="literal">&lt;prismelement_address&gt;</code>: The Nutanix Prism Element IP address.
					</li><li class="listitem">
						<code class="literal">&lt;prismelement_port&gt;</code>: The Nutanix Prism Element port.
					</li><li class="listitem">
						<code class="literal">&lt;prismelement_clustername&gt;</code>: The Nutanix Prism Element cluster name.
					</li><li class="listitem">
						<code class="literal">&lt;nutanix_username&gt;</code>: The Nutanix Prism Element login.
					</li><li class="listitem">
						<code class="literal">&lt;nutanix_password&gt;</code>: Nutanix Prism Element password.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Assisted Installer has finished installing the cluster successfully.
					</li><li class="listitem">
						The cluster is connected to <a class="link" href="https://console.redhat.com/">console.redhat.com</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Update the Nutanix configuration:
					</p><pre class="screen white-space-pre white-space-pre">$ oc patch infrastructure/cluster --type=merge --patch-file=/dev/stdin &lt;&lt;-EOF
{
  "spec": {
    "platformSpec": {
      "nutanix": {
        "prismCentral": {
          "address": "&lt;prismcentral_address&gt;", <span id="CO12-1"><!--Empty--></span><span class="callout">1</span>
          "port": &lt;prismcentral_port&gt; <span id="CO12-2"><!--Empty--></span><span class="callout">2</span>
        },
        "prismElements": [
          {
            "endpoint": {
              "address": "&lt;prismelement_address&gt;", <span id="CO12-3"><!--Empty--></span><span class="callout">3</span>
              "port": &lt;prismelement_port&gt; <span id="CO12-4"><!--Empty--></span><span class="callout">4</span>
            },
            "name": "&lt;prismelement_clustername&gt;" <span id="CO12-5"><!--Empty--></span><span class="callout">5</span>
          }
        ]
      },
      "type": "Nutanix"
    }
  }
}
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO12-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;prismcentral_address&gt;</code> with the Nutanix Prism Central IP address.
							</div></dd><dt><a href="#CO12-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;prismcentral_port&gt;</code> with the Nutanix Prism Central port.
							</div></dd><dt><a href="#CO12-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;prismelement_address&gt;</code> with Nutanix Prism Element IP address.
							</div></dd><dt><a href="#CO12-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;prismelement_port&gt;</code> with the Nutanix Prism Element port.
							</div></dd><dt><a href="#CO12-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;prismelement_clustername&gt;</code> with the Nutanix Prism Element cluster name.
							</div></dd></dl></div><p class="simpara">
						For additional details, see <a class="link" href="https://docs.openshift.com/container-platform/4.11/machine_management/creating_machinesets/creating-machineset-nutanix.html">Creating a machine set on Nutanix</a>.
					</p></li><li class="listitem"><p class="simpara">
						Update the secret:
					</p><pre class="screen white-space-pre white-space-pre">$ cat &lt;&lt;EOF | oc create -f -
apiVersion: v1
kind: Secret
metadata:
   name: nutanix-credentials
   namespace: openshift-machine-api
type: Opaque
stringData:
  credentials: |
    [{"type":"basic_auth","data":{"prismCentral":{"username":"&lt;nutanix_username&gt;","password":"&lt;nutanix_password&gt;"},"prismElements":null}}]
EOF</pre><p class="simpara">
						Replace <code class="literal">&lt;nutanix_username&gt;</code> with the Nutanix Prism Element login. Replace <code class="literal">&lt;nutanix_password&gt;</code> with the Nutanix Prism Element password.
					</p><p class="simpara">
						For additional details, see <a class="link" href="https://docs.openshift.com/container-platform/4.11/installing/installing_nutanix/installing-nutanix-installer-provisioned.html#configuring-the-default-storage-container">Configuring the default storage container</a>.
					</p></li></ol></div></section></section><section class="chapter" id="installing-on-vsphere"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Optional: Installing on vSphere</h1></div></div></div><p class="_abstract _abstract">
			If you install OpenShift Container Platform on vSphere, the Assisted Installer can integrate the OpenShift Container Platform cluster with the vSphere platform, which exposes the Machine API to vSphere and enables autoscaling.
		</p><section class="section" id="adding-hosts-on-vsphere_installing-on-vsphere"><div class="titlepage"><div><div><h2 class="title">14.1. Adding hosts on vSphere</h2></div></div></div><p>
				You can add hosts to the Assisted Installer cluster using the online vSphere client or the <code class="literal">govc</code> vSphere CLI tool. The following procedure demonstrates adding hosts with the <code class="literal">govc</code> CLI tool. To use the online vSphere Client, refer to the documentation for vSphere.
			</p><p>
				To add hosts on vSphere with the vSphere <code class="literal">govc</code> CLI, generate the discovery image ISO from the Assisted Installer. The minimal discovery image ISO is the default setting. This image includes only what is required to boot a host with networking. The majority of the content is downloaded upon boot. The ISO image is about 100MB in size.
			</p><p>
				Once this is complete, you must create an image for the vSphere platform and create the vSphere virtual machines.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are using vSphere 7.0.2 or higher.
					</li><li class="listitem">
						You have the vSphere <code class="literal">govc</code> CLI tool installed and configured.
					</li><li class="listitem">
						You have set <code class="literal">clusterSet disk.enableUUID</code> to <span class="strong strong"><strong>true</strong></span> in vSphere.
					</li><li class="listitem">
						You have created a cluster in the Assisted Installer UI, or
					</li><li class="listitem"><p class="simpara">
						You have:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Created an Assisted Installer cluster profile and infrastructure environment with the API.
							</li><li class="listitem">
								Exported your infrastructure environment ID in your shell as <code class="literal">$INFRA_ENV_ID</code>.
							</li><li class="listitem">
								Completed the configuration.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Configure the discovery image if you want it to boot with an ignition file.
					</li><li class="listitem"><p class="simpara">
						Generate and download the ISO from the Assisted Installer UI.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In <span class="strong strong"><strong>Host discovery</strong></span>, click the <span class="strong strong"><strong>Add hosts</strong></span> button and select the installation media.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Minimal image file: Provision with virtual media</strong></span> to download a smaller image that will fetch the data needed to boot.
							</li><li class="listitem">
								Add an SSH public key so that you can connect to the vSphere VMs as the <code class="literal">core</code> user. Having a login to the cluster hosts can provide you with debugging information during the installation.
							</li><li class="listitem">
								Optional: If the cluster hosts are behind a firewall that requires the use of a proxy, select <span class="strong strong"><strong>Configure cluster-wide proxy settings</strong></span>. Enter the username, password, IP address and port for the HTTP and HTTPS URLs of the proxy server.
							</li><li class="listitem">
								Optional: If the cluster hosts are in a network with a re-encrypting man-in-the-middle (MITM) proxy or the cluster needs to trust certificates for other purposes such as container image registries, select <span class="strong strong"><strong>Configure cluster-wide trusted certificates</strong></span> and add the additional certificates.
							</li><li class="listitem">
								Optional: Configure the discovery image if you want to boot it with an ignition file. See <a class="link" href="#assembly_configuring-the-discovery-image" title="Chapter 7. Configuring the discovery image">Configuring the discovery image</a> for additional details.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Generate Discovery ISO</strong></span>.
							</li><li class="listitem">
								Copy the <span class="strong strong"><strong>Discovery ISO URL</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Download the discovery ISO:
							</p><pre class="programlisting language-terminal">$ wget - O vsphere-discovery-image.iso &lt;discovery_url&gt;</pre><p class="simpara">
								Replace <code class="literal">&lt;discovery_url&gt;</code> with the URL from the preceding step.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On the command line, power down and destroy any pre-existing virtual machines:
					</p><pre class="programlisting language-bash">$ for VM in $(/usr/local/bin/govc ls /&lt;datacenter&gt;/vm/&lt;folder_name&gt;)
do
 	/usr/local/bin/govc vm.power -off $VM
 	/usr/local/bin/govc vm.destroy $VM
done</pre><p class="simpara">
						Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the datacenter. Replace <code class="literal">&lt;folder_name&gt;</code> with the name of the VM inventory folder.
					</p></li><li class="listitem"><p class="simpara">
						Remove pre-existing ISO images from the data store, if there are any:
					</p><pre class="programlisting language-terminal">$ govc datastore.rm -ds &lt;iso_datastore&gt; &lt;image&gt;</pre><p class="simpara">
						Replace <code class="literal">&lt;iso_datastore&gt;</code> with the name of the data store. Replace <code class="literal">image</code> with the name of the ISO image.
					</p></li><li class="listitem"><p class="simpara">
						Upload the Assisted Installer discovery ISO:
					</p><pre class="programlisting language-terminal">$ govc datastore.upload -ds &lt;iso_datastore&gt;  vsphere-discovery-image.iso</pre><p class="simpara">
						Replace <code class="literal">&lt;iso_datastore&gt;</code> with the name of the data store.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							All nodes in the cluster must boot from the discovery image.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Boot three control plane (master) nodes:
					</p><pre class="programlisting language-terminal">$ govc vm.create -net.adapter &lt;network_adapter_type&gt; \
                 -disk.controller &lt;disk_controller_type&gt; \
                 -pool=&lt;resource_pool&gt; \
                 -c=16 \
                 -m=32768 \
                 -disk=120GB \
                 -disk-datastore=&lt;datastore_file&gt; \
                 -net.address="&lt;nic_mac_address&gt;" \
                 -iso-datastore=&lt;iso_datastore&gt; \
                 -iso="vsphere-discovery-image.iso" \
                 -folder="&lt;inventory_folder&gt;" \
                 &lt;hostname&gt;.&lt;cluster_name&gt;.example.com</pre><p class="simpara">
						See <a class="link" href="https://github.com/vmware/govmomi/blob/main/govc/USAGE.md#vmcreate">vm.create</a> for details.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The foregoing example illustrates the minimum required resources for control plane nodes.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Boot at least two worker nodes:
					</p><pre class="programlisting language-terminal">$ govc vm.create -net.adapter &lt;network_adapter_type&gt; \
                 -disk.controller &lt;disk_controller_type&gt; \
                 -pool=&lt;resource_pool&gt; \
                 -c=4 \
                 -m=8192 \
                 -disk=120GB \
                 -disk-datastore=&lt;datastore_file&gt; \
                 -net.address="&lt;nic_mac_address&gt;" \
                 -iso-datastore=&lt;iso_datastore&gt; \
                 -iso="vsphere-discovery-image.iso" \
                 -folder="&lt;inventory_folder&gt;" \
                 &lt;hostname&gt;.&lt;cluster_name&gt;.example.com</pre><p class="simpara">
						See <a class="link" href="https://github.com/vmware/govmomi/blob/main/govc/USAGE.md#vmcreate">vm.create</a> for details.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The foregoing example illustrates the minimum required resources for worker nodes.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Ensure the VMs are running:
					</p><pre class="programlisting language-terminal">$  govc ls /&lt;datacenter&gt;/vm/&lt;folder_name&gt;</pre><p class="simpara">
						Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the datacenter. Replace <code class="literal">&lt;folder_name&gt;</code> with the name of the VM inventory folder.
					</p></li><li class="listitem"><p class="simpara">
						After 2 minutes, shut down the VMs:
					</p><pre class="programlisting language-bash">$ for VM in $(govc ls /&lt;datacenter&gt;/vm/&lt;folder_name&gt;)
do
     govc vm.power -s=true $VM
done</pre><p class="simpara">
						Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the datacenter. Replace <code class="literal">&lt;folder_name&gt;</code> with the name of the VM inventory folder.
					</p></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">disk.enableUUID</code> setting to <code class="literal">TRUE</code>:
					</p><pre class="programlisting language-bash">$ for VM in $(govc ls /&lt;datacenter&gt;/vm/&lt;folder_name&gt;)
do
     govc vm.change -vm $VM -e disk.enableUUID=TRUE
done</pre><p class="simpara">
						Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the datacenter. Replace <code class="literal">&lt;folder_name&gt;</code> with the name of the VM inventory folder.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must set <code class="literal">disk.enableUUID</code> to <code class="literal">TRUE</code> on all of the nodes to enable autoscaling with vSphere.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Restart the VMs:
					</p><pre class="programlisting language-bash">$  for VM in $(govc ls /&lt;datacenter&gt;/vm/&lt;folder_name&gt;)
do
     govc vm.power -on=true $VM
done</pre><p class="simpara">
						Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the datacenter. Replace <code class="literal">&lt;folder_name&gt;</code> with the name of the VM inventory folder.
					</p></li><li class="listitem">
						Return to the Assisted Installer user interface and wait until the Assisted Installer discovers the hosts and each of them have a <code class="literal">Ready</code> status.
					</li><li class="listitem">
						Move the <span class="strong strong"><strong>Integrate with your virtualization platform</strong></span> slider to enable integration with vSphere.
					</li><li class="listitem">
						Select roles if needed.
					</li><li class="listitem">
						In <span class="strong strong"><strong>Networking</strong></span>, uncheck <span class="strong strong"><strong>Allocate IPs via DHCP server</strong></span>.
					</li><li class="listitem">
						Set the API VIP address.
					</li><li class="listitem">
						Set the Ingress VIP address.
					</li><li class="listitem">
						Continue with the installation procedure.
					</li></ol></div></section><section class="section" id="vsphere-post-installation-configuration_installing-on-vsphere"><div class="titlepage"><div><div><h2 class="title">14.2. vSphere post-installation configuration using the CLI</h2></div></div></div><p>
				After installing an OpenShift Container Platform cluster using the Assisted Installer on vSphere with the platform integration feature enabled, you must update the following vSphere configuration settings manually:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						vCenter username
					</li><li class="listitem">
						vCenter password
					</li><li class="listitem">
						vCenter address
					</li><li class="listitem">
						vCenter cluster
					</li><li class="listitem">
						datacenter
					</li><li class="listitem">
						datastore
					</li><li class="listitem">
						folder
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Assisted Installer has finished installing the cluster successfully.
					</li><li class="listitem">
						The cluster is connected to <a class="link" href="http://console.redhat.com">console.redhat.com</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Generate a base64-encoded username and password for vCenter:
					</p><pre class="programlisting language-terminal">$ echo -n "&lt;vcenter_username&gt;" | base64 -w0</pre><p class="simpara">
						Replace <code class="literal">&lt;vcenter_username&gt;</code> with your vCenter username.
					</p><pre class="programlisting language-terminal">$ echo -n "&lt;vcenter_password&gt;" | base64 -w0</pre><p class="simpara">
						Replace <code class="literal">&lt;vcenter_password&gt;</code> with your vCenter password.
					</p></li><li class="listitem"><p class="simpara">
						Backup the vSphere credentials:
					</p><pre class="programlisting language-terminal">$ oc get secret vsphere-creds -o yaml -n kube-system &gt; creds_backup.yaml</pre></li><li class="listitem"><p class="simpara">
						Edit the vSphere credentials:
					</p><pre class="programlisting language-terminal">$ cp creds_backup.yaml vsphere-creds.yaml</pre><pre class="programlisting language-terminal">$ vi vsphere-creds.yaml</pre><pre class="programlisting language-yaml white-space-pre white-space-pre">apiVersion: v1
data:
  &lt;vcenter_address&gt;.username: &lt;vcenter_username_encoded&gt;
  &lt;vcenter_address&gt;.password: &lt;vcenter_password_encoded&gt;
kind: Secret
metadata:
  annotations:
    cloudcredential.openshift.io/mode: passthrough
  creationTimestamp: "2022-01-25T17:39:50Z"
  name: vsphere-creds
  namespace: kube-system
  resourceVersion: "2437"
  uid: 06971978-e3a5-4741-87f9-2ca3602f2658
type: Opaque</pre><p class="simpara">
						Replace <code class="literal">&lt;vcenter_address&gt;</code> with the vCenter address. Replace <code class="literal">&lt;vcenter_username_encoded&gt;</code> with the base64-encoded version of your vSphere username. Replace <code class="literal">&lt;vcenter_password_encoded&gt;</code> with the base64-encoded version of your vSphere password.
					</p></li><li class="listitem"><p class="simpara">
						Replace the vSphere credentials:
					</p><pre class="programlisting language-terminal">$ oc replace -f vsphere-creds.yaml</pre></li><li class="listitem"><p class="simpara">
						Redeploy the kube-controller-manager pods:
					</p><pre class="programlisting language-terminal">$ oc patch kubecontrollermanager cluster -p='{"spec": {"forceRedeploymentReason": "recovery-'"$( date --rfc-3339=ns )"'"}}' --type=merge</pre></li><li class="listitem"><p class="simpara">
						Backup the vSphere cloud provider configuration:
					</p><pre class="programlisting language-terminal">$ oc get cm cloud-provider-config -o yaml -n openshift-config &gt; cloud-provider-config_backup.yaml</pre></li><li class="listitem"><p class="simpara">
						Edit the cloud provider configuration:
					</p><pre class="programlisting language-terminal">$ cloud-provider-config_backup.yaml cloud-provider-config.yaml</pre><pre class="programlisting language-terminal white-space-pre white-space-pre">$ vi cloud-provider-config.yaml</pre><pre class="programlisting language-yaml white-space-pre white-space-pre">apiVersion: v1
data:
  config: |
    [Global]
    secret-name = "vsphere-creds"
    secret-namespace = "kube-system"
    insecure-flag = "1"

    [Workspace]
    server = "&lt;vcenter_address&gt;"
    datacenter = "&lt;datacenter&gt;"
    default-datastore = "&lt;datastore&gt;"
    folder = "/&lt;datacenter&gt;/vm/&lt;folder&gt;"

    [VirtualCenter "&lt;vcenter_address&gt;"]
    datacenters = "&lt;datacenter&gt;"
kind: ConfigMap
metadata:
  creationTimestamp: "2022-01-25T17:40:49Z"
  name: cloud-provider-config
  namespace: openshift-config
  resourceVersion: "2070"
  uid: 80bb8618-bf25-442b-b023-b31311918507</pre><p class="simpara">
						Replace <code class="literal">&lt;vcenter_address&gt;</code> with the vCenter address. Replace <code class="literal">&lt;datacenter&gt;</code> with the name of the data center. Replace <code class="literal">&lt;datastore&gt;</code> with the name of the data store. Replace <code class="literal">&lt;folder&gt;</code> with the folder containing the cluster VMs.
					</p></li><li class="listitem"><p class="simpara">
						Apply the cloud provider configuration:
					</p><pre class="programlisting language-terminal">$ oc apply -f cloud-provider-config.yaml</pre></li><li class="listitem"><p class="simpara">
						Taint the nodes with the <code class="literal">uninitialized</code> taint:
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Follow steps 9 through 12 if you are installing OpenShift Container Platform 4.13 or later.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Identify the nodes to taint:
							</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li><li class="listitem"><p class="simpara">
								Run the following command for each node:
							</p><pre class="programlisting language-terminal">$ oc adm taint node &lt;node_name&gt; node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule</pre><p class="simpara">
								Replace <code class="literal">&lt;node_name&gt;</code> with the name of the node.
							</p></li></ol></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ oc get nodes
NAME                STATUS   ROLES                  AGE   VERSION
master-0   Ready    control-plane,master   45h   v1.26.3+379cd9f
master-1   Ready    control-plane,master   45h   v1.26.3+379cd9f
worker-0   Ready    worker                 45h   v1.26.3+379cd9f
worker-1   Ready    worker                 45h   v1.26.3+379cd9f
master-2   Ready    control-plane,master   45h   v1.26.3+379cd9f

$ oc adm taint node master-0 node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule
$ oc adm taint node master-1 node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule
$ oc adm taint node master-2 node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule
$ oc adm taint node worker-0 node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule
$ oc adm taint node worker-1 node.cloudprovider.kubernetes.io/uninitialized=true:NoSchedule</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Back up the infrastructures configuration:
					</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ oc get infrastructures.config.openshift.io -o yaml &gt; infrastructures.config.openshift.io.yaml.backup</pre></li><li class="listitem"><p class="simpara">
						Edit the infrastructures configuration:
					</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ cp infrastructures.config.openshift.io.yaml.backup infrastructures.config.openshift.io.yaml</pre><pre class="programlisting language-terminal white-space-pre white-space-pre">$ vi infrastructures.config.openshift.io.yaml</pre><pre class="programlisting language-yaml white-space-pre white-space-pre">apiVersion: v1
items:
- apiVersion: config.openshift.io/v1
  kind: Infrastructure
  metadata:
    creationTimestamp: "2023-05-07T10:19:55Z"
    generation: 1
    name: cluster
    resourceVersion: "536"
    uid: e8a5742c-6d15-44e6-8a9e-064b26ab347d
  spec:
    cloudConfig:
      key: config
      name: cloud-provider-config
    platformSpec:
      type: VSphere
      vsphere:
        failureDomains:
        - name: assisted-generated-failure-domain
          region: assisted-generated-region
          server: &lt;vcenter_address&gt;
          topology:
            computeCluster: /&lt;data_center&gt;/host/&lt;vcenter_cluster&gt;
            datacenter: &lt;data_center&gt;
            datastore: /&lt;data_center&gt;/datastore/&lt;datastore&gt;
            folder: "/&lt;data_center&gt;/path/to/folder"
            networks:
            - "VM Network"
            resourcePool: /&lt;data_center&gt;/host/&lt;vcenter_cluster&gt;/Resources
          zone: assisted-generated-zone
        nodeNetworking:
          external: {}
          internal: {}
        vcenters:
        - datacenters:
          - &lt;data_center&gt;
          server: &lt;vcenter_address&gt;

kind: List
metadata:
  resourceVersion: ""</pre><p class="simpara">
						Replace <code class="literal">&lt;vcenter_address&gt;</code> with your vCenter address. Replace <code class="literal">&lt;datacenter&gt;</code> with the name of your vCenter data center. Replace <code class="literal">&lt;datastore&gt;</code> with the name of your vCenter data store. Replace <code class="literal">&lt;folder&gt;</code> with the folder containing the cluster VMs. Replace <code class="literal">&lt;vcenter_cluster&gt;</code> with the vSphere vCenter cluster where OpenShift Container Platform is installed.
					</p></li><li class="listitem"><p class="simpara">
						Apply the infrastructures configuration:
					</p><pre class="programlisting language-terminal white-space-pre white-space-pre">$ oc apply -f infrastructures.config.openshift.io.yaml --overwrite=true</pre></li></ol></div></section><section class="section" id="vsphere-post-installation-configuration-console_installing-on-vsphere"><div class="titlepage"><div><div><h2 class="title">14.3. vSphere post-installation configuration using the UI</h2></div></div></div><p>
				After installing an OpenShift Container Platform cluster using the Assisted Installer on vSphere with the platform integration feature enabled, you must update the following vSphere configuration settings manually:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						vCenter address
					</li><li class="listitem">
						vCenter cluster
					</li><li class="listitem">
						vCenter username
					</li><li class="listitem">
						vCenter password
					</li><li class="listitem">
						Datacenter
					</li><li class="listitem">
						Default data store
					</li><li class="listitem">
						Virtual machine folder
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Assisted Installer has finished installing the cluster successfully.
					</li><li class="listitem">
						The cluster is connected to <a class="link" href="http://console.redhat.com">console.redhat.com</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Administrator perspective, navigate to <span class="strong strong"><strong>Home → Overview</strong></span>.
					</li><li class="listitem">
						Under <span class="strong strong"><strong>Status</strong></span>, click <span class="strong strong"><strong>vSphere connection</strong></span> to open the <span class="strong strong"><strong>vSphere connection configuration</strong></span> wizard.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>vCenter</strong></span> field, enter the network address of the vSphere vCenter server. This can be either a domain name or an IP address. It appears in the vSphere web client URL; for example <code class="literal">https://[your_vCenter_address]/ui</code>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>vCenter cluster</strong></span> field, enter the name of the vSphere vCenter cluster where OpenShift Container Platform is installed.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							This step is mandatory if you installed OpenShift Container Platform 4.13 or later.
						</p></div></div></li><li class="listitem">
						In the <span class="strong strong"><strong>Username</strong></span> field, enter your vSphere vCenter username.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Password</strong></span> field, enter your vSphere vCenter password.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							The system stores the username and password in the <code class="literal">vsphere-creds</code> secret in the <code class="literal">kube-system</code> namespace of the cluster. An incorrect vCenter username or password makes the cluster nodes unschedulable.
						</p></div></div></li><li class="listitem">
						In the <span class="strong strong"><strong>Datacenter</strong></span> field, enter the name of the vSphere data center that contains the virtual machines used to host the cluster; for example, <code class="literal">SDDC-Datacenter</code>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Default data store</strong></span> field, enter the vSphere data store that stores the persistent data volumes; for example, <code class="literal">/SDDC-Datacenter/datastore/datastorename</code>.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Updating the vSphere data center or default data store after the configuration has been saved detaches any active vSphere <code class="literal">PersistentVolumes</code>.
						</p></div></div></li><li class="listitem">
						In the <span class="strong strong"><strong>Virtual Machine Folder</strong></span> field, enter the data center folder that contains the virtual machine of the cluster; for example, <code class="literal">/SDDC-Datacenter/vm/ci-ln-hjg4vg2-c61657-t2gzr</code>. For the OpenShift Container Platform installation to succeed, all virtual machines comprising the cluster must be located in a single data center folder.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Save Configuration</strong></span>. This updates the <code class="literal">cloud-provider-config</code> file in the <code class="literal">openshift-config</code> namespace, and starts the configuration process.
					</li><li class="listitem">
						Reopen the <span class="strong strong"><strong>vSphere connection configuration</strong></span> wizard and expand the <span class="strong strong"><strong>Monitored operators</strong></span> panel. Check that the status of the operators is either <span class="strong strong"><strong>Progressing</strong></span> or <span class="strong strong"><strong>Healthy</strong></span>.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					The connection configuration process updates operator statuses and control plane nodes. It takes approximately an hour to complete. During the configuration process, the nodes will reboot. Previously bound <code class="literal">PersistentVolumeClaims</code> objects might become disconnected.
				</p></div><p>
				Follow the steps below to monitor the configuration process.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check that the configuration process completed successfully:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform Administrator perspective, navigate to <span class="strong strong"><strong>Home → Overview</strong></span>.
							</li><li class="listitem">
								Under <span class="strong strong"><strong>Status</strong></span> click <span class="strong strong"><strong>Operators</strong></span>. Wait for all operator statuses to change from <span class="strong strong"><strong>Progressing</strong></span> to <span class="strong strong"><strong>All succeeded</strong></span>. A <span class="strong strong"><strong>Failed</strong></span> status indicates that the configuration failed.
							</li><li class="listitem">
								Under <span class="strong strong"><strong>Status</strong></span>, click <span class="strong strong"><strong>Control Plane</strong></span>. Wait for the response rate of all Control Pane components to return to 100%. A <span class="strong strong"><strong>Failed</strong></span> control plane component indicates that the configuration failed.
							</li></ol></div><p class="simpara">
						A failure indicates that at least one of the connection settings is incorrect. Change the settings in the <span class="strong strong"><strong>vSphere connection configuration</strong></span> wizard and save the configuration again.
					</p></li><li class="listitem"><p class="simpara">
						Check that you are able to bind <code class="literal">PersistentVolumeClaims</code> objects by performing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a <code class="literal">StorageClass</code> object using the following YAML:
							</p><pre class="programlisting language-yaml">kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
 name: vsphere-sc
provisioner: kubernetes.io/vsphere-volume
parameters:
 datastore: YOURVCENTERDATASTORE
 diskformat: thin
reclaimPolicy: Delete
volumeBindingMode: Immediate</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">PersistentVolumeClaims</code> object using the following YAML:
							</p><pre class="programlisting language-yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
 name: test-pvc
 namespace: openshift-config
 annotations:
   volume.beta.kubernetes.io/storage-provisioner: kubernetes.io/vsphere-volume
 finalizers:
   - kubernetes.io/pvc-protection
spec:
 accessModes:
   - ReadWriteOnce
 resources:
   requests:
    storage: 10Gi
 storageClassName: vsphere-sc
 volumeMode: Filesystem</pre></li></ol></div><p class="simpara">
						For instructions, see <a class="link" href="https://docs.openshift.com/container-platform/4.12/storage/dynamic-provisioning.html">Dynamic provisioning</a> in the OpenShift Container Platform documentation. To troubleshoot a <code class="literal">PersistentVolumeClaims</code> object, navigate to <span class="strong strong"><strong>Storage</strong></span> → <span class="strong strong"><strong>PersistentVolumeClaims</strong></span> in the <span class="strong strong"><strong>Administrator</strong></span> perspective of the OpenShift Container Platform UI.
					</p></li></ol></div></section></section><section class="chapter" id="assembly_troubleshooting"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Troubleshooting</h1></div></div></div><p>
			There are cases where the Assisted Installer cannot begin the installation or the cluster fails to install properly. In these events, it is helpful to understand the likely failure modes as well as how to troubleshoot the failure.
		</p><section class="section" id="prerequisites_4"><div class="titlepage"><div><div><h2 class="title">15.1. Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created an infrastructure environment using the API or have created a cluster using the UI.
					</li></ul></div></section><section class="section" id="con_troubleshooting-discovery-iso-issues_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.2. Troubleshooting discovery ISO issues</h2></div></div></div><p>
				The Assisted Installer uses an ISO image to run an agent that registers the host to the cluster and performs hardware and network validations before attempting to install OpenShift. You can follow these procedures to troubleshoot problems related to the host discovery.
			</p><p>
				Once you start the host with the discovery ISO image, the Assisted Installer discovers the host and presents it in the Assisted Service UI.
			</p><p>
				See <a class="link" href="#assembly_configuring-the-discovery-image" title="Chapter 7. Configuring the discovery image">Configuring the discovery image</a> for additional details.
			</p></section><section class="section" id="con_minimal-iso-image_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.3. Minimal ISO Image</h2></div></div></div><p>
				The minimal ISO image should be used when bandwidth over the virtual media connection is limited. It includes only what is required to boot a host with networking. The majority of the content is downloaded upon boot. The resulting ISO image is about 100MB in size compared to 1GB for the full ISO image.
			</p><section class="section" id="troubleshooting_minimal_iso_boot_failures"><div class="titlepage"><div><div><h3 class="title">15.3.1. Troubleshooting minimal ISO boot failures</h3></div></div></div><p>
					If your environment requires static network configuration to access the Assisted Installer service, any issues with that configuration may prevent the Minimal ISO from booting properly. If the boot screen shows that the host has failed to download the root file system image, verify that any additional network configuration is correct. Switching to a Full ISO image will also allow for easier debugging.
				</p><div class="formalpara"><p class="title"><strong>Example rootfs download failure</strong></p><p>
						<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US/images/d1b0aed9c5eba580249c32cb8a4bdd0b/rootfs-download-failure.png" alt="screenshot of failing root file system image download"/></span>

					</p></div></section></section><section class="section" id="proc_verify-the-discovery-agent-is-running_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.4. Verify the discovery agent is running</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created an Infrastructure Environment by using the API or have created a cluster by using the UI.
					</li><li class="listitem">
						You booted a host with the Infrastructure Environment discovery ISO and the host failed to register.
					</li><li class="listitem">
						You have ssh access to the host.
					</li><li class="listitem">
						You provided an SSH public key in the "Add hosts" dialog before generating the Discovery ISO so that you can SSH into your machine without a password.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Verify that your host machine is powered on.
					</li><li class="listitem">
						If you selected <span class="strong strong"><strong>DHCP networking</strong></span>, check that the DHCP server is enabled.
					</li><li class="listitem">
						If you selected <span class="strong strong"><strong>Static IP, bridges and bonds</strong></span> networking, check that your configurations are correct.
					</li><li class="listitem"><p class="simpara">
						Verify that you can access your host machine using SSH, a console such as the BMC, or a virtual machine console:
					</p><pre class="programlisting language-bash">$ ssh core@&lt;host_ip_address&gt;</pre><p class="simpara">
						You can specify private key file using the <code class="literal">-i</code> parameter if it isn’t stored in the default directory.
					</p><pre class="programlisting language-bash">$ ssh -i &lt;ssh_private_key_file&gt; core@&lt;host_ip_address&gt;</pre><p class="simpara">
						If you fail to ssh to the host, the host failed during boot or it failed to configure the network.
					</p><p class="simpara">
						Upon login you should see this message:
					</p><div class="formalpara"><p class="title"><strong>Example login</strong></p><p>
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US/images/90114925b822ae76534f2b850d9ac82e/assisted-iso-login.png" alt="screenshot of assisted iso login message"/></span>
							 If you are not seeing this message it means that the host didn’t boot with the assisted-installer ISO. Make sure you configured the boot order properly (The host should boot once from the live-ISO).
						</p></div></li><li class="listitem"><p class="simpara">
						Check the agent service logs:
					</p><pre class="programlisting language-bash">$ sudo journalctl -u agent.service</pre><p class="simpara">
						In the following example, the errors indicate there is a network issue:
					</p><div class="formalpara"><p class="title"><strong>Example agent service log screenshot of agent service log</strong></p><p>
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US/images/0e1b5d237dbac68e235fce19c7507ebe/agent-service-log.png" alt="screenshot of agent service log"/></span>

						</p></div><p class="simpara">
						If there is an error pulling the agent image, check the proxy settings. Verify that the host is connected to the network. You can use <code class="literal">nmcli</code> to get additional information about your network configuration.
					</p></li></ol></div></section><section class="section" id="proc_verify-the-discovery-agent-can-access-the-assisted-service_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.5. Verify the agent can access the assisted-service</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created an Infrastructure Environment by using the API or have created a cluster by using the UI.
					</li><li class="listitem">
						You booted a host with the Infrastructure Environment discovery ISO and the host failed to register.
					</li><li class="listitem">
						You verified the discovery agent is running.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check the agent logs to verify the agent can access the Assisted Service:
					</p><pre class="programlisting language-bash">$ sudo journalctl TAG=agent</pre><p class="simpara">
						The errors in the following example indicate that the agent failed to access the Assisted Service.
					</p><div class="formalpara"><p class="title"><strong>Example agent log</strong></p><p>
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Assisted_Installer_for_OpenShift_Container_Platform-2022-Assisted_Installer_for_OpenShift_Container_Platform-en-US/images/438b410fadf201514feb7199f629d68a/agent-log-failed-to-access-assisted-service.png" alt="screenshot of the agent log failing to access the Assisted Service"/></span>

						</p></div><p class="simpara">
						Check the proxy settings you configured for the cluster. If configured, the proxy must allow access to the Assisted Service URL.
					</p></li></ul></div></section><section class="section" id="proc_incorrect-boot-order_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.6. Correcting a host’s boot order</h2></div></div></div><p>
				Once the installation that runs as part of the Discovery Image completes, the Assisted Installer reboots the host.  The host must boot from its installation disk to continue forming the cluster.  If you have not correctly configured the host’s boot order, it will boot from another disk instead, interrupting the installation.
			</p><p>
				If the host boots the discovery image again, the Assisted Installer will immediately detect this event and set the host’s status to <span class="strong strong"><strong>Installing Pending User Action</strong></span>.  Alternatively, if the Assisted Installer does not detect that the host has booted the correct disk within the allotted time, it will also set this host status.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Reboot the host and set its boot order to boot from the installation disk. If you didn’t select an installation disk, the Assisted Installer selected one for you. To view the selected installation disk, click to expand the host’s information in the host inventory, and check which disk has the “Installation disk” role.
					</li></ul></div></section><section class="section" id="proc_partially-successful-installations_assembly_troubleshooting"><div class="titlepage"><div><div><h2 class="title">15.7. Rectifying partially-successful installations</h2></div></div></div><p>
				There are cases where the Assisted Installer declares an installation to be successful even though it encountered errors:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you requested to install OLM operators and one or more failed to install, log into the cluster’s console to remediate the failures.
					</li><li class="listitem">
						If you requested to install more than two worker nodes and at least one failed to install, but at least two succeeded, add the failed workers to the installed cluster.
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140603917967408"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                        <span class="status-description"></span>
                        <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>
                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                            <div id="privacy_policy">We've updated our <a href='http://www.redhat.com/en/about/privacy-policy' class='privacy-policy'>Privacy Statement</a> effective September 15, 2023.
                            </div>
                          </div>
                        </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="https://access.redhat.com/chrome_themes/nimbus/img/rh-summit-red-a.svg" alt="Red Hat Summit" /> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  </body>
</html>
