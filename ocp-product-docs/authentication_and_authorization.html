<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<meta property="og:title" content="Authentication and authorization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta property="og:description" content="This document provides instructions for defining identity providers in OpenShift Container Platform. It also discusses how to configure role-based access control to secure the cluster." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="This document provides instructions for defining identity providers in OpenShift Container Platform. It also discusses how to configure role-based access control to secure the cluster." />
<meta name="twitter:title" content="Authentication and authorization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="title" content="Authentication and authorization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="id" href="https://access.redhat.com/documentation/id-id/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="th" href="https://access.redhat.com/documentation/th-th/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<link rel="alternate" hreflang="vi" href="https://access.redhat.com/documentation/vi-vn/openshift_container_platform/4.13/html-single/authentication_and_authorization/index" />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="revision" product="b0738f19-59ac-47eb-9512-8a439cd6dfb0" title="41eda35b-1383-419f-9dbd-cb92c581428c" page="46b90781-eb85-48cb-856d-96310cee31de" revision="a9b2f940183f7b22b049f578bab422b40265d849:en-us" body="399b342fd69601191ac883bc671fd1cb.html" toc="d15d8d757d2ce5b4ff8409ecbb07385f.json" />

    <title>Authentication and authorization OpenShift Container Platform 4.13 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />
<link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css" />

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/openshift_container_platform\/4.13\/html-single\/authentication_and_authorization\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"d8ea0bce2d740dacbdfe0257cf55baa0e33f7fb8468a26d055ce75daaaa2d315"}}</script>
<script src="/sites/dxp-docs/files/js/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
  <script src="//www.redhat.com/dtm.js"></script><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-139-77b4fb8768-25dr9" />
<meta name="avalon-version" content="27861f77" />
<meta name="cp-chrome-build-date" content="2023-10-06T19:17:59.039Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "27861f77",
        builddate : "2023-10-06T19:17:59.039Z",        fetchdate : "2023-10-10T17:45:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico" /><link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap-grid.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/main.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/components.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/pages.css?v=27861f77" />

<link href="https://access.redhat.com/webassets/avalon/s/chosen.css?v=27861f77" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/pfe-navigation--lightdom.min.css" />
<!-- /cssInclude -->
<script src="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/ie-polyfills.js?v=27861f77"></script>

<script async>
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="https://access.redhat.com/webassets/avalon/j/lib/require.js?v=27861f77" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="https://access.redhat.com/chrome_themes/nimbus/js/new-nav.js?v=27861f77" ></script>
<!-- /CP_PRIMER_HEAD -->

  </head>
  <body>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#cp-main" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg" />
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linkType="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linkType="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="//www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linkType="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat&#039;s specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linkType="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="//redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linkType="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>                            <div>Or <a href="/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu">
                    <button class="pfe-navigation__secondary-link">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true"></pfe-icon>English
                    </button>

                    <pfe-navigation-dropdown dropdown-width="single">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en" data-analytics-text="English">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown>
                </div>                <rh-account-dropdown slot="account"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing" slot="main-menu__dropdown--product__product-listing" consistent-height>
                    <h3 slot="details-nav">Infrastructure and Management                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Cloud Computing                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Storage                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Runtimes                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Integration and Automation                    </h3>
                    <div slot="details">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linkType="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            </pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["OpenShift Container Platform","\/documentation\/en-us\/openshift_container_platform"],["4.13","\/documentation\/en-us\/openshift_container_platform\/4.13"],["Authentication and authorization","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/authentication_and_authorization"],["Authentication and authorization","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/authentication_and_authorization\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback class="hidden"></div>


    </div>
        <div class="container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer pvof-doc__content-wrapper__outer--css-not-removed">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container">
              <button class="j-sidebar__menu-trigger content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization" class="j-doc-nav__link ">
    Authentication and authorization
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#overview-of-authentication-authorization" class="j-doc-nav__link j-doc-nav__link--has-children">
    1. Overview of authentication and authorization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1. Overview of authentication and authorization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1. Overview of authentication and authorization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#openshift-auth-common-terms_overview-of-authentication-authorization" class="j-doc-nav__link ">
    1.1. Glossary of common terms for OpenShift Container Platform authentication and authorization
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authentication-overview" class="j-doc-nav__link ">
    1.2. About authentication in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authorization-overview" class="j-doc-nav__link ">
    1.3. About authorization in OpenShift Container Platform
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#understanding-authentication" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Understanding authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Understanding authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Understanding authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#rbac-users_understanding-authentication" class="j-doc-nav__link ">
    2.1. Users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#rbac-groups_understanding-authentication" class="j-doc-nav__link ">
    2.2. Groups
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#rbac-api-authentication_understanding-authentication" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.3. API authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.3. API authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.3. API authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-server-overview_understanding-authentication" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.3.1. OpenShift Container Platform OAuth server
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.3.1. OpenShift Container Platform OAuth server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.3.1. OpenShift Container Platform OAuth server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-token-requests_understanding-authentication" class="j-doc-nav__link ">
    2.3.1.1. OAuth token requests
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authentication-api-impersonation_understanding-authentication" class="j-doc-nav__link ">
    2.3.1.2. API impersonation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authentication-prometheus-system-metrics_understanding-authentication" class="j-doc-nav__link ">
    2.3.1.3. Authentication metrics for Prometheus
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-internal-oauth" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Configuring the internal OAuth server
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Configuring the internal OAuth server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Configuring the internal OAuth server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-server-overview_configuring-internal-oauth" class="j-doc-nav__link ">
    3.1. OpenShift Container Platform OAuth server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-token-request-flows_configuring-internal-oauth" class="j-doc-nav__link ">
    3.2. OAuth token request flows and responses
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-internal-options_configuring-internal-oauth" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.3. Options for the internal OAuth server
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.3. Options for the internal OAuth server"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.3. Options for the internal OAuth server"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-token-duration_configuring-internal-oauth" class="j-doc-nav__link ">
    3.3.1. OAuth token duration options
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-grant-options_configuring-internal-oauth" class="j-doc-nav__link ">
    3.3.2. OAuth grant options
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-configuring-internal-oauth_configuring-internal-oauth" class="j-doc-nav__link ">
    3.4. Configuring the internal OAuth server’s token duration
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-token-inactivity-timeout_configuring-internal-oauth" class="j-doc-nav__link ">
    3.5. Configuring token inactivity timeout for the internal OAuth server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#customizing-the-oauth-server-url_configuring-internal-oauth" class="j-doc-nav__link ">
    3.6. Customizing the internal OAuth server URL
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-server-metadata_configuring-internal-oauth" class="j-doc-nav__link ">
    3.7. OAuth server metadata
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-troubleshooting-api-events_configuring-internal-oauth" class="j-doc-nav__link ">
    3.8. Troubleshooting OAuth API events
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-oauth-clients" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Configuring OAuth clients
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Configuring OAuth clients"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Configuring OAuth clients"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-default-clients_configuring-oauth-clients" class="j-doc-nav__link ">
    4.1. Default OAuth clients
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-register-additional-client_configuring-oauth-clients" class="j-doc-nav__link ">
    4.2. Registering an additional OAuth client
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-token-inactivity-timeout_configuring-oauth-clients" class="j-doc-nav__link ">
    4.3. Configuring token inactivity timeout for an OAuth client
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources" class="j-doc-nav__link ">
    4.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#managing-oauth-access-tokens" class="j-doc-nav__link j-doc-nav__link--has-children">
    5. Managing user-owned OAuth access tokens
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5. Managing user-owned OAuth access tokens"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5. Managing user-owned OAuth access tokens"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-list-tokens_managing-oauth-access-tokens" class="j-doc-nav__link ">
    5.1. Listing user-owned OAuth access tokens
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-view-details-tokens_managing-oauth-access-tokens" class="j-doc-nav__link ">
    5.2. Viewing the details of a user-owned OAuth access token
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#oauth-delete-tokens_managing-oauth-access-tokens" class="j-doc-nav__link ">
    5.3. Deleting user-owned OAuth access tokens
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#understanding-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    6. Understanding identity provider configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6. Understanding identity provider configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6. Understanding identity provider configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_understanding-identity-provider" class="j-doc-nav__link ">
    6.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#supported-identity-providers" class="j-doc-nav__link ">
    6.2. Supported identity providers
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#removing-kubeadmin_understanding-identity-provider" class="j-doc-nav__link ">
    6.3. Removing the kubeadmin user
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-parameters_understanding-identity-provider" class="j-doc-nav__link ">
    6.4. Identity provider parameters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-default-CR_understanding-identity-provider" class="j-doc-nav__link ">
    6.5. Sample identity provider CR
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-identity-providers" class="j-doc-nav__link j-doc-nav__link--has-children">
    7. Configuring identity providers
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7. Configuring identity providers"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7. Configuring identity providers"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-htpasswd-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.1. Configuring an htpasswd identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.1. Configuring an htpasswd identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.1. Configuring an htpasswd identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-htpasswd-about_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.2. About htpasswd authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#creating-htpasswd-file" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.1.3. Creating the htpasswd file
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.1.3. Creating the htpasswd file"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.1.3. Creating the htpasswd file"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-htpasswd-file-linux_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.3.1. Creating an htpasswd file using Linux
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-htpasswd-file-windows_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.3.2. Creating an htpasswd file using Windows
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-htpasswd-secret_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.4. Creating the htpasswd secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-htpasswd-CR_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.5. Sample htpasswd CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.6. Adding an identity provider to your cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-htpasswd-update-users_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.7. Updating users for an htpasswd identity provider
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-configuring-using-the-web-console_configuring-htpasswd-identity-provider" class="j-doc-nav__link ">
    7.1.8. Configuring identity providers using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-keystone-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.2. Configuring a Keystone identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.2. Configuring a Keystone identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.2. Configuring a Keystone identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-keystone-about_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.2. About Keystone authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret-tls_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.3. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.4. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-keystone-CR_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.5. Sample Keystone CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-keystone-identity-provider" class="j-doc-nav__link ">
    7.2.6. Adding an identity provider to your cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-ldap-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.3. Configuring an LDAP identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.3. Configuring an LDAP identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.3. Configuring an LDAP identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-about-ldap_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.2. About LDAP authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-ldap-secret_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.3. Creating the LDAP secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.4. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-ldap-CR_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.5. Sample LDAP CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-ldap-identity-provider" class="j-doc-nav__link ">
    7.3.6. Adding an identity provider to your cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-basic-authentication-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.4. Configuring a basic authentication identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.4. Configuring a basic authentication identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.4. Configuring a basic authentication identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-about-basic-authentication_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.2. About basic authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret-tls_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.3. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.4. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-basic-authentication-CR_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.5. Sample basic authentication CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.6. Adding an identity provider to your cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#example-apache-httpd-configuration_configuring-basic-authentication-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.4.7. Example Apache HTTPD configuration for basic identity providers
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.4.7. Example Apache HTTPD configuration for basic identity providers"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.4.7. Example Apache HTTPD configuration for basic identity providers"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#file-requirements" class="j-doc-nav__link ">
    7.4.7.1. File requirements
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-basic-authentication-troubleshooting_configuring-basic-authentication-identity-provider" class="j-doc-nav__link ">
    7.4.8. Basic authentication troubleshooting
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-request-header-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.5. Configuring a request header identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.5. Configuring a request header identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.5. Configuring a request header identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-request-header-identity-provider" class="j-doc-nav__link ">
    7.5.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-about-request-header_configuring-request-header-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.5.2. About request header authentication
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.5.2. About request header authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.5.2. About request header authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sspi-windows_configuring-request-header-identity-provider" class="j-doc-nav__link ">
    7.5.2.1. SSPI connection support on Microsoft Windows
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-request-header-identity-provider" class="j-doc-nav__link ">
    7.5.3. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-request-header-CR_configuring-request-header-identity-provider" class="j-doc-nav__link ">
    7.5.4. Sample request header CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-request-header-identity-provider" class="j-doc-nav__link ">
    7.5.5. Adding an identity provider to your cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#example-apache-auth-config-using-request-header" class="j-doc-nav__link ">
    7.5.6. Example Apache authentication configuration using request header
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-github-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.6. Configuring a GitHub or GitHub Enterprise identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.6. Configuring a GitHub or GitHub Enterprise identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.6. Configuring a GitHub or GitHub Enterprise identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-github-about_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.2. About GitHub authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-registering-github_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.3. Registering a GitHub application
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.4. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.5. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-github-CR_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.6. Sample GitHub CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-github-identity-provider" class="j-doc-nav__link ">
    7.6.7. Adding an identity provider to your cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-gitlab-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.7. Configuring a GitLab identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.7. Configuring a GitLab identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.7. Configuring a GitLab identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-gitlab-about_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.2. About GitLab authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.3. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.4. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-gitlab-CR_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.5. Sample GitLab CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-gitlab-identity-provider" class="j-doc-nav__link ">
    7.7.6. Adding an identity provider to your cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-google-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.8. Configuring a Google identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.8. Configuring a Google identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.8. Configuring a Google identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-google-identity-provider" class="j-doc-nav__link ">
    7.8.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-google-about_configuring-google-identity-provider" class="j-doc-nav__link ">
    7.8.2. About Google authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret_configuring-google-identity-provider" class="j-doc-nav__link ">
    7.8.3. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-google-CR_configuring-google-identity-provider" class="j-doc-nav__link ">
    7.8.4. Sample Google CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-google-identity-provider" class="j-doc-nav__link ">
    7.8.5. Adding an identity provider to your cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#configuring-oidc-identity-provider" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.9. Configuring an OpenID Connect identity provider
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.9. Configuring an OpenID Connect identity provider"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.9. Configuring an OpenID Connect identity provider"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-overview_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.1. About identity providers in OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-oidc-about_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.2. About OpenID Connect authentication
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-oidc-supported_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.3. Supported OIDC providers
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-secret_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.4. Creating the secret
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-creating-configmap_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.5. Creating a config map
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-oidc-CR_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.6. Sample OpenID Connect CRs
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#add-identity-provider_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.7. Adding an identity provider to your cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#identity-provider-configuring-using-the-web-console_configuring-oidc-identity-provider" class="j-doc-nav__link ">
    7.9.8. Configuring identity providers using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#using-rbac" class="j-doc-nav__link j-doc-nav__link--has-children">
    8. Using RBAC to define and apply permissions
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8. Using RBAC to define and apply permissions"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8. Using RBAC to define and apply permissions"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authorization-overview_using-rbac" class="j-doc-nav__link j-doc-nav__link--has-children">
    8.1. RBAC overview
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8.1. RBAC overview"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8.1. RBAC overview"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#default-roles_using-rbac" class="j-doc-nav__link ">
    8.1.1. Default cluster roles
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#evaluating-authorization_using-rbac" class="j-doc-nav__link j-doc-nav__link--has-children">
    8.1.2. Evaluating authorization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8.1.2. Evaluating authorization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8.1.2. Evaluating authorization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cluster-role-aggregations_using-rbac" class="j-doc-nav__link ">
    8.1.2.1. Cluster role aggregation
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#rbac-projects-namespaces_using-rbac" class="j-doc-nav__link ">
    8.2. Projects and namespaces
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#rbac-default-projects_using-rbac" class="j-doc-nav__link ">
    8.3. Default projects
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#viewing-cluster-roles_using-rbac" class="j-doc-nav__link ">
    8.4. Viewing cluster roles and bindings
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#viewing-local-roles_using-rbac" class="j-doc-nav__link ">
    8.5. Viewing local roles and bindings
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#adding-roles_using-rbac" class="j-doc-nav__link ">
    8.6. Adding roles to users
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#creating-local-role_using-rbac" class="j-doc-nav__link ">
    8.7. Creating a local role
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#creating-cluster-role_using-rbac" class="j-doc-nav__link ">
    8.8. Creating a cluster role
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#local-role-binding-commands_using-rbac" class="j-doc-nav__link ">
    8.9. Local role binding commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cluster-role-binding-commands_using-rbac" class="j-doc-nav__link ">
    8.10. Cluster role binding commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#creating-cluster-admin_using-rbac" class="j-doc-nav__link ">
    8.11. Creating a cluster admin
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#removing-kubeadmin" class="j-doc-nav__link j-doc-nav__link--has-children">
    9. Removing the kubeadmin user
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9. Removing the kubeadmin user"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9. Removing the kubeadmin user"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#understanding-kubeadmin_removing-kubeadmin" class="j-doc-nav__link ">
    9.1. The kubeadmin user
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#removing-kubeadmin_removing-kubeadmin" class="j-doc-nav__link ">
    9.2. Removing the kubeadmin user
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#understanding-and-creating-service-accounts" class="j-doc-nav__link j-doc-nav__link--has-children">
    10. Understanding and creating service accounts
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10. Understanding and creating service accounts"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10. Understanding and creating service accounts"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-overview_understanding-service-accounts" class="j-doc-nav__link ">
    10.1. Service accounts overview
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-managing_understanding-service-accounts" class="j-doc-nav__link ">
    10.2. Creating service accounts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-granting-roles_understanding-service-accounts" class="j-doc-nav__link ">
    10.3. Examples of granting roles to service accounts
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#using-service-accounts" class="j-doc-nav__link j-doc-nav__link--has-children">
    11. Using service accounts in applications
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11. Using service accounts in applications"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11. Using service accounts in applications"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-overview_using-service-accounts" class="j-doc-nav__link ">
    11.1. Service accounts overview
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-default_using-service-accounts" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.2. Default service accounts
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.2. Default service accounts"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.2. Default service accounts"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#default-cluster-service-accounts_using-service-accounts" class="j-doc-nav__link ">
    11.2.1. Default cluster service accounts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#default-service-accounts-and-roles_using-service-accounts" class="j-doc-nav__link ">
    11.2.2. Default project service accounts and roles
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#auto-generated-sa-token-secrets_using-service-accounts" class="j-doc-nav__link ">
    11.2.3. About automatically generated service account token secrets
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-managing_using-service-accounts" class="j-doc-nav__link ">
    11.3. Creating service accounts
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#using-service-accounts-as-oauth-client" class="j-doc-nav__link j-doc-nav__link--has-children">
    12. Using a service account as an OAuth client
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12. Using a service account as an OAuth client"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12. Using a service account as an OAuth client"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#service-accounts-as-oauth-clients_using-service-accounts-as-oauth-client" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.1. Service accounts as OAuth clients
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.1. Service accounts as OAuth clients"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.1. Service accounts as OAuth clients"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#redirect-uris-for-service-accounts_using-service-accounts-as-oauth-client" class="j-doc-nav__link ">
    12.1.1. Redirect URIs for service accounts as OAuth clients
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#tokens-scoping" class="j-doc-nav__link j-doc-nav__link--has-children">
    13. Scoping tokens
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13. Scoping tokens"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13. Scoping tokens"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#tokens-scoping-about_configuring-internal-oauth" class="j-doc-nav__link j-doc-nav__link--has-children">
    13.1. About scoping tokens
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13.1. About scoping tokens"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13.1. About scoping tokens"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#scoping-tokens-user-scopes_configuring-internal-oauth" class="j-doc-nav__link ">
    13.1.1. User scopes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#scoping-tokens-role-scope_configuring-internal-oauth" class="j-doc-nav__link ">
    13.1.2. Role scope
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#bound-service-account-tokens" class="j-doc-nav__link j-doc-nav__link--has-children">
    14. Using bound service account tokens
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14. Using bound service account tokens"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14. Using bound service account tokens"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#bound-sa-tokens-about_bound-service-account-tokens" class="j-doc-nav__link ">
    14.1. About bound service account tokens
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#bound-sa-tokens-configuring_bound-service-account-tokens" class="j-doc-nav__link ">
    14.2. Configuring bound service account tokens using volume projection
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#bound-sa-tokens-configuring-externally_bound-service-account-tokens" class="j-doc-nav__link ">
    14.3. Creating bound service account tokens outside the pod
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#managing-pod-security-policies" class="j-doc-nav__link j-doc-nav__link--has-children">
    15. Managing security context constraints
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15. Managing security context constraints"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15. Managing security context constraints"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-about_configuring-internal-oauth" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.1. About security context constraints
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.1. About security context constraints"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.1. About security context constraints"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#default-sccs_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.1. Default security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#scc-settings_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.2. Security context constraints settings
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authorization-SCC-strategies_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.3. Security context constraints strategies
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authorization-controlling-volumes_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.4. Controlling volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#admission_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.5. Admission control
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#scc-prioritization_configuring-internal-oauth" class="j-doc-nav__link ">
    15.1.6. Security context constraints prioritization
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-pre-allocated-values_configuring-internal-oauth" class="j-doc-nav__link ">
    15.2. About pre-allocated security context constraints values
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-example_configuring-internal-oauth" class="j-doc-nav__link ">
    15.3. Example security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-creating_configuring-internal-oauth" class="j-doc-nav__link ">
    15.4. Creating security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#role-based-access-to-ssc_configuring-internal-oauth" class="j-doc-nav__link ">
    15.5. Role-based access to security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-command-reference_configuring-internal-oauth" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.6. Reference of security context constraints commands
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.6. Reference of security context constraints commands"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.6. Reference of security context constraints commands"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#listing-security-context-constraints_configuring-internal-oauth" class="j-doc-nav__link ">
    15.6.1. Listing security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#examining-a-security-context-constraints-object_configuring-internal-oauth" class="j-doc-nav__link ">
    15.6.2. Examining security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#deleting-security-context-constraints_configuring-internal-oauth" class="j-doc-nav__link ">
    15.6.3. Deleting security context constraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#updating-security-context-constraints_configuring-internal-oauth" class="j-doc-nav__link ">
    15.6.4. Updating security context constraints
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_configuring-internal-oauth" class="j-doc-nav__link ">
    15.7. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#understanding-and-managing-pod-security-admission" class="j-doc-nav__link j-doc-nav__link--has-children">
    16. Understanding and managing pod security admission
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "16. Understanding and managing pod security admission"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "16. Understanding and managing pod security admission"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-psa-synchronization_understanding-and-managing-pod-security-admission" class="j-doc-nav__link ">
    16.1. Security context constraint synchronization with pod security standards
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-psa-opting_understanding-and-managing-pod-security-admission" class="j-doc-nav__link ">
    16.2. Controlling pod security admission synchronization
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-psa-rectifying_understanding-and-managing-pod-security-admission" class="j-doc-nav__link j-doc-nav__link--has-children">
    16.3. About pod security admission alerts
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "16.3. About pod security admission alerts"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "16.3. About pod security admission alerts"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#security-context-constraints-psa-alert-eval_understanding-and-managing-pod-security-admission" class="j-doc-nav__link ">
    16.3.1. Identifying pod security violations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_managing-pod-security-admission" class="j-doc-nav__link ">
    16.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#impersonating-system-admin" class="j-doc-nav__link j-doc-nav__link--has-children">
    17. Impersonating the system:admin user
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "17. Impersonating the system:admin user"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "17. Impersonating the system:admin user"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#authentication-api-impersonation_impersonating-system-admin" class="j-doc-nav__link ">
    17.1. API impersonation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#impersonation-system-admin-user_impersonating-system-admin" class="j-doc-nav__link ">
    17.2. Impersonating the system:admin user
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#impersonation-system-admin-group_impersonating-system-admin" class="j-doc-nav__link ">
    17.3. Impersonating the system:admin group
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing" class="j-doc-nav__link j-doc-nav__link--has-children">
    18. Syncing LDAP groups
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18. Syncing LDAP groups"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18. Syncing LDAP groups"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-about_ldap-syncing-groups" class="j-doc-nav__link j-doc-nav__link--has-children">
    18.1. About configuring LDAP sync
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18.1. About configuring LDAP sync"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18.1. About configuring LDAP sync"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-config-rfc2307_ldap-syncing-groups" class="j-doc-nav__link ">
    18.1.1. About the RFC 2307 configuration file
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-config-activedir_ldap-syncing-groups" class="j-doc-nav__link ">
    18.1.2. About the Active Directory configuration file
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-config-augmented-activedir_ldap-syncing-groups" class="j-doc-nav__link ">
    18.1.3. About the augmented Active Directory configuration file
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-running_ldap-syncing-groups" class="j-doc-nav__link j-doc-nav__link--has-children">
    18.2. Running LDAP sync
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18.2. Running LDAP sync"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18.2. Running LDAP sync"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-running-all-ldap_ldap-syncing-groups" class="j-doc-nav__link ">
    18.2.1. Syncing the LDAP server with OpenShift Container Platform
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-running-openshift_ldap-syncing-groups" class="j-doc-nav__link ">
    18.2.2. Syncing OpenShift Container Platform groups with the LDAP server
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-running-subset_ldap-syncing-groups" class="j-doc-nav__link ">
    18.2.3. Syncing subgroups from the LDAP server with OpenShift Container Platform
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-pruning_ldap-syncing-groups" class="j-doc-nav__link ">
    18.3. Running a group pruning job
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-auto-syncing_ldap-syncing-groups" class="j-doc-nav__link ">
    18.4. Automatically syncing LDAP groups
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-examples_ldap-syncing-groups" class="j-doc-nav__link j-doc-nav__link--has-children">
    18.5. LDAP group sync examples
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18.5. LDAP group sync examples"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18.5. LDAP group sync examples"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-rfc2307_ldap-syncing-groups" class="j-doc-nav__link ">
    18.5.1. Syncing groups using the RFC 2307 schema
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-rfc2307-user-defined_ldap-syncing-groups" class="j-doc-nav__link ">
    18.5.2. Syncing groups using the RFC2307 schema with user-defined name mappings
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-rfc2307-user-defined-error_ldap-syncing-groups" class="j-doc-nav__link ">
    18.5.3. Syncing groups using RFC 2307 with user-defined error tolerances
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-activedir_ldap-syncing-groups" class="j-doc-nav__link ">
    18.5.4. Syncing groups using the Active Directory schema
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-augmented-activedir_ldap-syncing-groups" class="j-doc-nav__link j-doc-nav__link--has-children">
    18.5.5. Syncing groups using the augmented Active Directory schema
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18.5.5. Syncing groups using the augmented Active Directory schema"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18.5.5. Syncing groups using the augmented Active Directory schema"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-nesting_ldap-syncing-groups" class="j-doc-nav__link ">
    18.5.5.1. LDAP nested membership sync example
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#ldap-syncing-spec_ldap-syncing-groups" class="j-doc-nav__link j-doc-nav__link--has-children">
    18.6. LDAP sync configuration specification
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "18.6. LDAP sync configuration specification"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "18.6. LDAP sync configuration specification"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-ldapsyncconfig" class="j-doc-nav__link ">
    18.6.1. v1.LDAPSyncConfig
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-stringsource" class="j-doc-nav__link ">
    18.6.2. v1.StringSource
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-ldapquery" class="j-doc-nav__link ">
    18.6.3. v1.LDAPQuery
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-rfc2307config" class="j-doc-nav__link ">
    18.6.4. v1.RFC2307Config
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-activedirectoryconfig" class="j-doc-nav__link ">
    18.6.5. v1.ActiveDirectoryConfig
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sync-ldap-v1-augmentedactivedirectoryconfig" class="j-doc-nav__link ">
    18.6.6. v1.AugmentedActiveDirectoryConfig
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#managing-cloud-provider-credentials" class="j-doc-nav__link j-doc-nav__link--has-children">
    19. Managing cloud provider credentials
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19. Managing cloud provider credentials"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19. Managing cloud provider credentials"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#about-cloud-credential-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.1. About the Cloud Credential Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.1. About the Cloud Credential Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.1. About the Cloud Credential Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#about-cloud-credential-operator-modes_about-cloud-credential-operator" class="j-doc-nav__link ">
    19.1.1. Modes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-determine-mode_about-cloud-credential-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.1.2. Determining the Cloud Credential Operator mode
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.1.2. Determining the Cloud Credential Operator mode"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.1.2. Determining the Cloud Credential Operator mode"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-determine-mode-gui_about-cloud-credential-operator" class="j-doc-nav__link ">
    19.1.2.1. Determining the Cloud Credential Operator mode by using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-determine-mode-cli_about-cloud-credential-operator" class="j-doc-nav__link ">
    19.1.2.2. Determining the Cloud Credential Operator mode by using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#about-cloud-credential-operator-default_about-cloud-credential-operator" class="j-doc-nav__link ">
    19.1.3. Default behavior
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_about-cloud-credential-operator_about-cloud-credential-operator" class="j-doc-nav__link ">
    19.1.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-mode-mint" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.2. Using mint mode
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.2. Using mint mode"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.2. Using mint mode"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#mint-mode-permissions" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.2.1. Mint mode permissions requirements
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.2.1. Mint mode permissions requirements"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.2.1. Mint mode permissions requirements"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#mint-mode-permissions-aws" class="j-doc-nav__link ">
    19.2.1.1. Amazon Web Services (AWS) permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#mint-mode-permissions-gcp" class="j-doc-nav__link ">
    19.2.1.2. Google Cloud Platform (GCP) permissions
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#admin-credentials-root-secret-formats_cco-mode-mint" class="j-doc-nav__link ">
    19.2.2. Admin credentials root secret format
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#mint-mode-with-removal-or-rotation-of-admin-credential_cco-mode-mint" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.2.3. Mint mode with removal or rotation of the administrator-level credential
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.2.3. Mint mode with removal or rotation of the administrator-level credential"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.2.3. Mint mode with removal or rotation of the administrator-level credential"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#manually-rotating-cloud-creds_cco-mode-mint" class="j-doc-nav__link ">
    19.2.3.1. Rotating cloud provider credentials manually
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#manually-removing-cloud-creds_cco-mode-mint" class="j-doc-nav__link ">
    19.2.3.2. Removing cloud provider credentials
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources-2" class="j-doc-nav__link ">
    19.2.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-mode-passthrough" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.3. Using passthrough mode
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.3. Using passthrough mode"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.3. Using passthrough mode"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.3.1. Passthrough mode permissions requirements
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.3.1. Passthrough mode permissions requirements"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.3.1. Passthrough mode permissions requirements"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-aws" class="j-doc-nav__link ">
    19.3.1.1. Amazon Web Services (AWS) permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-azure" class="j-doc-nav__link ">
    19.3.1.2. Microsoft Azure permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-gcp" class="j-doc-nav__link ">
    19.3.1.3. Google Cloud Platform (GCP) permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-rhosp" class="j-doc-nav__link ">
    19.3.1.4. Red Hat OpenStack Platform (RHOSP) permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-rhv" class="j-doc-nav__link ">
    19.3.1.5. Red Hat Virtualization (RHV) permissions
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-permissions-vsware" class="j-doc-nav__link ">
    19.3.1.6. VMware vSphere permissions
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#admin-credentials-root-secret-formats_cco-mode-passthrough" class="j-doc-nav__link ">
    19.3.2. Admin credentials root secret format
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-maintenance" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.3.3. Passthrough mode credential maintenance
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.3.3. Passthrough mode credential maintenance"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.3.3. Passthrough mode credential maintenance"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#manually-rotating-cloud-creds_cco-mode-passthrough" class="j-doc-nav__link ">
    19.3.3.1. Rotating cloud provider credentials manually
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#passthrough-mode-reduce-permissions" class="j-doc-nav__link ">
    19.3.4. Reducing permissions after installation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources-3" class="j-doc-nav__link ">
    19.3.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-mode-manual" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.4. Using manual mode
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.4. Using manual mode"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.4. Using manual mode"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#manual-mode-sts-blurb" class="j-doc-nav__link ">
    19.4.1. Manual mode with cloud credentials created and managed outside of the cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#manually-maintained-credentials-upgrade_cco-mode-manual" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.4.2. Updating cloud provider resources with manually maintained credentials
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.4.2. Updating cloud provider resources with manually maintained credentials"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.4.2. Updating cloud provider resources with manually maintained credentials"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-manual-upgrade-annotation_cco-mode-manual" class="j-doc-nav__link ">
    19.4.2.1. Indicating that the cluster is ready to upgrade
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_cco-mode-manual" class="j-doc-nav__link ">
    19.4.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-mode-sts" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.5. Using manual mode with Amazon Web Services Security Token Service
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.5. Using manual mode with Amazon Web Services Security Token Service"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.5. Using manual mode with Amazon Web Services Security Token Service"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-about_cco-mode-sts" class="j-doc-nav__link ">
    19.5.1. About manual mode with AWS Security Token Service
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-installing_cco-mode-sts" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.5.2. Installing an OpenShift Container Platform cluster configured for manual mode with STS
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.5.2. Installing an OpenShift Container Platform cluster configured for manual mode with STS"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.5.2. Installing an OpenShift Container Platform cluster configured for manual mode with STS"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-ccoctl-configuring_cco-mode-sts" class="j-doc-nav__link ">
    19.5.2.1. Configuring the Cloud Credential Operator utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-create-aws-resources-ccoctl_cco-mode-sts" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.5.2.2. Creating AWS resources with the Cloud Credential Operator utility
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.5.2.2. Creating AWS resources with the Cloud Credential Operator utility"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.5.2.2. Creating AWS resources with the Cloud Credential Operator utility"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-ccoctl-creating-individually_cco-mode-sts" class="j-doc-nav__link ">
    19.5.2.2.1. Creating AWS resources individually
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-ccoctl-creating-at-once_cco-mode-sts" class="j-doc-nav__link ">
    19.5.2.2.2. Creating AWS resources with a single command
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-installing-manual-run-installer_cco-mode-sts" class="j-doc-nav__link ">
    19.5.2.3. Running the installer
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-installing-verifying_cco-mode-sts" class="j-doc-nav__link ">
    19.5.2.4. Verifying the installation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_cco-mode-sts" class="j-doc-nav__link ">
    19.5.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-mode-gcp-workload-identity" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.6. Using manual mode with GCP Workload Identity
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.6. Using manual mode with GCP Workload Identity"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.6. Using manual mode with GCP Workload Identity"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#gcp-workload-identity-mode-about_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.1. About manual mode with GCP Workload Identity
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#gcp-workload-identity-mode-installing" class="j-doc-nav__link j-doc-nav__link--has-children">
    19.6.2. Installing an OpenShift Container Platform cluster configured for manual mode with GCP Workload Identity
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "19.6.2. Installing an OpenShift Container Platform cluster configured for manual mode with GCP Workload Identity"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "19.6.2. Installing an OpenShift Container Platform cluster configured for manual mode with GCP Workload Identity"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-ccoctl-configuring_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.2.1. Configuring the Cloud Credential Operator utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#cco-ccoctl-creating-at-once_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.2.2. Creating GCP resources with the Cloud Credential Operator utility
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-installing-manual-run-installer_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.2.3. Running the installer
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#sts-mode-installing-verifying_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.2.4. Verifying the installation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#additional-resources_cco-mode-gcp-workload-identity" class="j-doc-nav__link ">
    19.6.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization#idm140032740145392" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/authentication_and_authorization">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/authentication_and_authorization">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/authentication_and_authorization">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/authentication_and_authorization"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/authentication_and_authorization/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/authentication_and_authorization">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/authentication_and_authorization/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner">
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/authentication_and_authorization" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/authentication_and_authorization">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/authentication_and_authorization">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/authentication_and_authorization">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/authentication_and_authorization"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/authentication_and_authorization/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/authentication_and_authorization">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/authentication_and_authorization/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Authentication and authorization</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140032728496240"><div class="titlepage"><div><div class="producttitle"><span class="productname">OpenShift Container Platform</span> <span class="productnumber">4.13</span></div><div><h2 class="subtitle">Configuring user authentication and access controls for users and services</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat OpenShift Documentation Team</span></div></div><div><a href="#idm140032740145392">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides instructions for defining identity providers in OpenShift Container Platform. It also discusses how to configure role-based access control to secure the cluster.
			</div></div></div></div><hr/></div><section class="chapter" id="overview-of-authentication-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview of authentication and authorization</h1></div></div></div><section class="section" id="openshift-auth-common-terms_overview-of-authentication-authorization"><div class="titlepage"><div><div><h2 class="title">1.1. Glossary of common terms for OpenShift Container Platform authentication and authorization</h2></div></div></div><p>
				This glossary defines common terms that are used in OpenShift Container Platform authentication and authorization.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">authentication</span></dt><dd>
							An authentication determines access to an OpenShift Container Platform cluster and ensures only authenticated users access the OpenShift Container Platform cluster.
						</dd><dt><span class="term">authorization</span></dt><dd>
							Authorization determines whether the identified user has permissions to perform the requested action.
						</dd><dt><span class="term">bearer token</span></dt><dd>
							Bearer token is used to authenticate to API with the header <code class="literal">Authorization: Bearer &lt;token&gt;</code>.
						</dd><dt><span class="term">Cloud Credential Operator</span></dt><dd>
							The Cloud Credential Operator (CCO) manages cloud provider credentials as custom resource definitions (CRDs).
						</dd><dt><span class="term">config map</span></dt><dd>
							A config map provides a way to inject configuration data into the pods. You can reference the data stored in a config map in a volume of type <code class="literal">ConfigMap</code>. Applications running in a pod can use this data.
						</dd><dt><span class="term">containers</span></dt><dd>
							Lightweight and executable images that consist software and all its dependencies. Because containers virtualize the operating system, you can run containers in a data center, public or private cloud, or your local host.
						</dd><dt><span class="term">Custom Resource (CR)</span></dt><dd>
							A CR is an extension of the Kubernetes API.
						</dd><dt><span class="term">group</span></dt><dd>
							A group is a set of users. A group is useful for granting permissions to multiple users one time.
						</dd><dt><span class="term">HTPasswd</span></dt><dd>
							HTPasswd updates the files that store usernames and password for authentication of HTTP users.
						</dd><dt><span class="term">Keystone</span></dt><dd>
							Keystone is an Red Hat OpenStack Platform (RHOSP) project that provides identity, token, catalog, and policy services.
						</dd><dt><span class="term">Lightweight directory access protocol (LDAP)</span></dt><dd>
							LDAP is a protocol that queries user information.
						</dd><dt><span class="term">manual mode</span></dt><dd>
							In manual mode, a user manages cloud credentials instead of the Cloud Credential Operator (CCO).
						</dd><dt><span class="term">mint mode</span></dt><dd>
							Mint mode is the default and recommended best practice setting for the Cloud Credential Operator (CCO) to use on the platforms for which it is supported. In this mode, the CCO uses the provided administrator-level cloud credential to create new credentials for components in the cluster with only the specific permissions that are required.
						</dd><dt><span class="term">namespace</span></dt><dd>
							A namespace isolates specific system resources that are visible to all processes. Inside a namespace, only processes that are members of that namespace can see those resources.
						</dd><dt><span class="term">node</span></dt><dd>
							A node is a worker machine in the OpenShift Container Platform cluster. A node is either a virtual machine (VM) or a physical machine.
						</dd><dt><span class="term">OAuth client</span></dt><dd>
							OAuth client is used to get a bearer token.
						</dd><dt><span class="term">OAuth server</span></dt><dd>
							The OpenShift Container Platform control plane includes a built-in OAuth server that determines the user’s identity from the configured identity provider and creates an access token.
						</dd><dt><span class="term">OpenID Connect</span></dt><dd>
							The OpenID Connect is a protocol to authenticate the users to use single sign-on (SSO) to access sites that use OpenID Providers.
						</dd><dt><span class="term">passthrough mode</span></dt><dd>
							In passthrough mode, the Cloud Credential Operator (CCO) passes the provided cloud credential to the components that request cloud credentials.
						</dd><dt><span class="term">pod</span></dt><dd>
							A pod is the smallest logical unit in Kubernetes. A pod is comprised of one or more containers to run in a worker node.
						</dd><dt><span class="term">regular users</span></dt><dd>
							Users that are created automatically in the cluster upon first login or via the API.
						</dd><dt><span class="term">request header</span></dt><dd>
							A request header is an HTTP header that is used to provide information about HTTP request context, so that the server can track the response of the request.
						</dd><dt><span class="term">role-based access control (RBAC)</span></dt><dd>
							A key security control to ensure that cluster users and workloads have access to only the resources required to execute their roles.
						</dd><dt><span class="term">service accounts</span></dt><dd>
							Service accounts are used by the cluster components or applications.
						</dd><dt><span class="term">system users</span></dt><dd>
							Users that are created automatically when the cluster is installed.
						</dd><dt><span class="term">users</span></dt><dd>
							Users is an entity that can make requests to API.
						</dd></dl></div></section><section class="section" id="authentication-overview"><div class="titlepage"><div><div><h2 class="title">1.2. About authentication in OpenShift Container Platform</h2></div></div></div><p>
				To control access to an OpenShift Container Platform cluster, a cluster administrator can configure <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#understanding-authentication">user authentication</a> and ensure only approved users access the cluster.
			</p><p>
				To interact with an OpenShift Container Platform cluster, users must first authenticate to the OpenShift Container Platform API in some way. You can authenticate by providing an <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#rbac-api-authentication_understanding-authentication">OAuth access token or an X.509 client certificate</a> in your requests to the OpenShift Container Platform API.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If you do not present a valid access token or certificate, your request is unauthenticated and you receive an HTTP 401 error.
				</p></div></div><p>
				An administrator can configure authentication through the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Configuring an identity provider: You can define any <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#supported-identity-providers">supported identity provider in OpenShift Container Platform</a> and add it to your cluster.
					</li><li class="listitem"><p class="simpara">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-internal-oauth">Configuring the internal OAuth server</a>: The OpenShift Container Platform control plane includes a built-in OAuth server that determines the user’s identity from the configured identity provider and creates an access token. You can configure the token duration and inactivity timeout, and customize the internal OAuth server URL.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Users can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#managing-oauth-access-tokens">view and manage OAuth tokens owned by them</a>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Registering an OAuth client: OpenShift Container Platform includes several <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#oauth-default-clients_configuring-oauth-clients">default OAuth clients</a>. You can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#oauth-register-additional-client_configuring-oauth-clients">register and configure additional OAuth clients</a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When users send a request for an OAuth token, they must specify either a default or custom OAuth client that receives and uses the token.
						</p></div></div></li><li class="listitem">
						Managing cloud provider credentials using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#about-cloud-credential-operator">Cloud Credentials Operator</a>: Cluster components use cloud provider credentials to get permissions required to perform cluster-related tasks.
					</li><li class="listitem">
						Impersonating a system admin user: You can grant cluster administrator permissions to a user by <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#impersonating-system-admin">impersonating a system admin user</a>.
					</li></ul></div></section><section class="section" id="authorization-overview"><div class="titlepage"><div><div><h2 class="title">1.3. About authorization in OpenShift Container Platform</h2></div></div></div><p>
				Authorization involves determining whether the identified user has permissions to perform the requested action.
			</p><p>
				Administrators can define permissions and assign them to users using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#authorization-overview_using-rbac">RBAC objects, such as rules, roles, and bindings</a>. To understand how authorization works in OpenShift Container Platform, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#evaluating-authorization_using-rbac">Evaluating authorization</a>.
			</p><p>
				You can also control access to an OpenShift Container Platform cluster through <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#rbac-projects-namespaces_using-rbac">projects and namespaces</a>.
			</p><p>
				Along with controlling user access to a cluster, you can also control the actions a pod can perform and the resources it can access using <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#managing-pod-security-policies">security context constraints (SCCs)</a>.
			</p><p>
				You can manage authorization for OpenShift Container Platform through the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Viewing <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#viewing-local-roles_using-rbac">local</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#viewing-cluster-roles_using-rbac">cluster</a> roles and bindings.
					</li><li class="listitem">
						Creating a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#creating-local-role_using-rbac">local role</a> and assigning it to a user or group.
					</li><li class="listitem">
						Creating a cluster role and assigning it to a user or group: OpenShift Container Platform includes a set of <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#default-roles_using-rbac">default cluster roles</a>. You can create additional <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#creating-cluster-role_using-rbac">cluster roles</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#adding-roles_using-rbac">add them to a user or group</a>.
					</li><li class="listitem"><p class="simpara">
						Creating a cluster-admin user: By default, your cluster has only one cluster administrator called <code class="literal">kubeadmin</code>. You can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#creating-cluster-admin_using-rbac">create another cluster administrator</a>. Before creating a cluster administrator, ensure that you have configured an identity provider.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							After creating the cluster admin user, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#removing-kubeadmin_removing-kubeadmin">delete the existing kubeadmin user</a> to improve cluster security.
						</p></div></div></li><li class="listitem">
						Creating service accounts: <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#service-accounts-overview_understanding-service-accounts">Service accounts</a> provide a flexible way to control API access without sharing a regular user’s credentials. A user can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#service-accounts-managing_understanding-service-accounts">create and use a service account in applications</a> and also as <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#using-service-accounts-as-oauth-client">an OAuth client</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#tokens-scoping">Scoping tokens</a>: A scoped token is a token that identifies as a specific user who can perform only specific operations. You can create scoped tokens to delegate some of your permissions to another user or a service account.
					</li><li class="listitem">
						Syncing LDAP groups: You can manage user groups in one place by <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#ldap-syncing">syncing the groups stored in an LDAP server</a> with the OpenShift Container Platform user groups.
					</li></ul></div></section></section><section class="chapter" id="understanding-authentication"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Understanding authentication</h1></div></div></div><p>
			For users to interact with OpenShift Container Platform, they must first authenticate to the cluster. The authentication layer identifies the user associated with requests to the OpenShift Container Platform API. The authorization layer then uses information about the requesting user to determine if the request is allowed.
		</p><p>
			As an administrator, you can configure authentication for OpenShift Container Platform.
		</p><section class="section" id="rbac-users_understanding-authentication"><div class="titlepage"><div><div><h2 class="title">2.1. Users</h2></div></div></div><p>
				A <span class="emphasis"><em>user</em></span> in OpenShift Container Platform is an entity that can make requests to the OpenShift Container Platform API. An OpenShift Container Platform <code class="literal">User</code> object represents an actor which can be granted permissions in the system by adding roles to them or to their groups. Typically, this represents the account of a developer or administrator that is interacting with OpenShift Container Platform.
			</p><p>
				Several types of users can exist:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032728474560" scope="col">User type</th><th align="left" valign="top" id="idm140032728473472" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032728474560"> <p>
								<code class="literal">Regular users</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032728473472"> <p>
								This is the way most interactive OpenShift Container Platform users are represented. Regular users are created automatically in the system upon first login or can be created via the API. Regular users are represented with the <code class="literal">User</code> object. Examples: <code class="literal">joe</code> <code class="literal">alice</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032728474560"> <p>
								<code class="literal">System users</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032728473472"> <p>
								Many of these are created automatically when the infrastructure is defined, mainly for the purpose of enabling the infrastructure to interact with the API securely. They include a cluster administrator (with access to everything), a per-node user, users for use by routers and registries, and various others. Finally, there is an <code class="literal">anonymous</code> system user that is used by default for unauthenticated requests. Examples: <code class="literal">system:admin</code> <code class="literal">system:openshift-registry</code> <code class="literal">system:node:node1.example.com</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032728474560"> <p>
								<code class="literal">Service accounts</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032728473472"> <p>
								These are special system users associated with projects; some are created automatically when the project is first created, while project administrators can create more for the purpose of defining access to the contents of each project. Service accounts are represented with the <code class="literal">ServiceAccount</code> object. Examples: <code class="literal">system:serviceaccount:default:deployer</code> <code class="literal">system:serviceaccount:foo:builder</code>
							</p>
							 </td></tr></tbody></table></div><p>
				Each user must authenticate in some way to access OpenShift Container Platform. API requests with no authentication or invalid authentication are authenticated as requests by the <code class="literal">anonymous</code> system user. After authentication, policy determines what the user is authorized to do.
			</p></section><section class="section" id="rbac-groups_understanding-authentication"><div class="titlepage"><div><div><h2 class="title">2.2. Groups</h2></div></div></div><p>
				A user can be assigned to one or more <span class="emphasis"><em>groups</em></span>, each of which represent a certain set of users. Groups are useful when managing authorization policies to grant permissions to multiple users at once, for example allowing access to objects within a project, versus granting them to users individually.
			</p><p>
				In addition to explicitly defined groups, there are also system groups, or <span class="emphasis"><em>virtual groups</em></span>, that are automatically provisioned by the cluster.
			</p><p>
				The following default virtual groups are most important:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 71%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032748888912" scope="col">Virtual group</th><th align="left" valign="top" id="idm140032748887824" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032748888912"> <p>
								<code class="literal">system:authenticated</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748887824"> <p>
								Automatically associated with all authenticated users.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032748888912"> <p>
								<code class="literal">system:authenticated:oauth</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748887824"> <p>
								Automatically associated with all users authenticated with an OAuth access token.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032748888912"> <p>
								<code class="literal">system:unauthenticated</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748887824"> <p>
								Automatically associated with all unauthenticated users.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="rbac-api-authentication_understanding-authentication"><div class="titlepage"><div><div><h2 class="title">2.3. API authentication</h2></div></div></div><p>
				Requests to the OpenShift Container Platform API are authenticated using the following methods:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">OAuth access tokens</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Obtained from the OpenShift Container Platform OAuth server using the <code class="literal"><span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code> and <code class="literal"><span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/token</code> endpoints.
								</li><li class="listitem">
									Sent as an <code class="literal">Authorization: Bearer…​</code> header.
								</li><li class="listitem">
									Sent as a websocket subprotocol header in the form <code class="literal">base64url.bearer.authorization.k8s.io.&lt;base64url-encoded-token&gt;</code> for websocket requests.
								</li></ul></div></dd><dt><span class="term">X.509 client certificates</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Requires an HTTPS connection to the API server.
								</li><li class="listitem">
									Verified by the API server against a trusted certificate authority bundle.
								</li><li class="listitem">
									The API server creates and distributes certificates to controllers to authenticate themselves.
								</li></ul></div></dd></dl></div><p>
				Any request with an invalid access token or an invalid certificate is rejected by the authentication layer with a <code class="literal">401</code> error.
			</p><p>
				If no access token or certificate is presented, the authentication layer assigns the <code class="literal">system:anonymous</code> virtual user and the <code class="literal">system:unauthenticated</code> virtual group to the request. This allows the authorization layer to determine which requests, if any, an anonymous user is allowed to make.
			</p><section class="section" id="oauth-server-overview_understanding-authentication"><div class="titlepage"><div><div><h3 class="title">2.3.1. OpenShift Container Platform OAuth server</h3></div></div></div><p>
					The OpenShift Container Platform master includes a built-in OAuth server. Users obtain OAuth access tokens to authenticate themselves to the API.
				</p><p>
					When a person requests a new OAuth token, the OAuth server uses the configured identity provider to determine the identity of the person making the request.
				</p><p>
					It then determines what user that identity maps to, creates an access token for that user, and returns the token for use.
				</p><section class="section" id="oauth-token-requests_understanding-authentication"><div class="titlepage"><div><div><h4 class="title">2.3.1.1. OAuth token requests</h4></div></div></div><p>
						Every request for an OAuth token must specify the OAuth client that will receive and use the token. The following OAuth clients are automatically created when starting the OpenShift Container Platform API:
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032748223760" scope="col">OAuth client</th><th align="left" valign="top" id="idm140032748222672" scope="col">Usage</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032748223760"> <p>
										<code class="literal">openshift-browser-client</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140032748222672"> <p>
										Requests tokens at <code class="literal">&lt;namespace_route&gt;/oauth/token/request</code> with a user-agent that can handle interactive logins. <sup>[1]</sup>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032748223760"> <p>
										<code class="literal">openshift-challenging-client</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140032748222672"> <p>
										Requests tokens with a user-agent that can handle <code class="literal">WWW-Authenticate</code> challenges.
									</p>
									 </td></tr></tbody></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								<code class="literal">&lt;namespace_route&gt;</code> refers to the namespace route. This is found by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get route oauth-openshift -n openshift-authentication -o json | jq .spec.host</pre></li></ol></div><p>
						All requests for OAuth tokens involve a request to <code class="literal">&lt;namespace_route&gt;/oauth/authorize</code>. Most authentication integrations place an authenticating proxy in front of this endpoint, or configure OpenShift Container Platform to validate credentials against a backing identity provider. Requests to <code class="literal">&lt;namespace_route&gt;/oauth/authorize</code> can come from user-agents that cannot display interactive login pages, such as the CLI. Therefore, OpenShift Container Platform supports authenticating using a <code class="literal">WWW-Authenticate</code> challenge in addition to interactive login flows.
					</p><p>
						If an authenticating proxy is placed in front of the <code class="literal">&lt;namespace_route&gt;/oauth/authorize</code> endpoint, it sends unauthenticated, non-browser user-agents <code class="literal">WWW-Authenticate</code> challenges rather than displaying an interactive login page or redirecting to an interactive login flow.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To prevent cross-site request forgery (CSRF) attacks against browser clients, only send Basic authentication challenges with if a <code class="literal">X-CSRF-Token</code> header is on the request. Clients that expect to receive Basic <code class="literal">WWW-Authenticate</code> challenges must set this header to a non-empty value.
						</p><p>
							If the authenticating proxy cannot support <code class="literal">WWW-Authenticate</code> challenges, or if OpenShift Container Platform is configured to use an identity provider that does not support WWW-Authenticate challenges, you must use a browser to manually obtain a token from <code class="literal">&lt;namespace_route&gt;/oauth/token/request</code>.
						</p></div></div></section><section class="section" id="authentication-api-impersonation_understanding-authentication"><div class="titlepage"><div><div><h4 class="title">2.3.1.2. API impersonation</h4></div></div></div><p>
						You can configure a request to the OpenShift Container Platform API to act as though it originated from another user. For more information, see <a class="link" href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#user-impersonation">User impersonation</a> in the Kubernetes documentation.
					</p></section><section class="section" id="authentication-prometheus-system-metrics_understanding-authentication"><div class="titlepage"><div><div><h4 class="title">2.3.1.3. Authentication metrics for Prometheus</h4></div></div></div><p>
						OpenShift Container Platform captures the following Prometheus system metrics during authentication attempts:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">openshift_auth_basic_password_count</code> counts the number of <code class="literal">oc login</code> user name and password attempts.
							</li><li class="listitem">
								<code class="literal">openshift_auth_basic_password_count_result</code> counts the number of <code class="literal">oc login</code> user name and password attempts by result, <code class="literal">success</code> or <code class="literal">error</code>.
							</li><li class="listitem">
								<code class="literal">openshift_auth_form_password_count</code> counts the number of web console login attempts.
							</li><li class="listitem">
								<code class="literal">openshift_auth_form_password_count_result</code> counts the number of web console login attempts by result, <code class="literal">success</code> or <code class="literal">error</code>.
							</li><li class="listitem">
								<code class="literal">openshift_auth_password_total</code> counts the total number of <code class="literal">oc login</code> and web console login attempts.
							</li></ul></div></section></section></section></section><section class="chapter" id="configuring-internal-oauth"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Configuring the internal OAuth server</h1></div></div></div><section class="section" id="oauth-server-overview_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.1. OpenShift Container Platform OAuth server</h2></div></div></div><p>
				The OpenShift Container Platform master includes a built-in OAuth server. Users obtain OAuth access tokens to authenticate themselves to the API.
			</p><p>
				When a person requests a new OAuth token, the OAuth server uses the configured identity provider to determine the identity of the person making the request.
			</p><p>
				It then determines what user that identity maps to, creates an access token for that user, and returns the token for use.
			</p></section><section class="section" id="oauth-token-request-flows_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.2. OAuth token request flows and responses</h2></div></div></div><p>
				The OAuth server supports standard <a class="link" href="https://tools.ietf.org/html/rfc6749#section-4.1">authorization code grant</a> and the <a class="link" href="https://tools.ietf.org/html/rfc6749#section-4.2">implicit grant</a> OAuth authorization flows.
			</p><p>
				When requesting an OAuth token using the implicit grant flow (<code class="literal">response_type=token</code>) with a client_id configured to request <code class="literal">WWW-Authenticate challenges</code> (like <code class="literal">openshift-challenging-client</code>), these are the possible server responses from <code class="literal">/oauth/authorize</code>, and how they should be handled:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 11%; " class="col_1"><!--Empty--></col><col style="width: 44%; " class="col_2"><!--Empty--></col><col style="width: 44%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032740293344" scope="col">Status</th><th align="left" valign="top" id="idm140032740292256" scope="col">Content</th><th align="left" valign="top" id="idm140032740311744" scope="col">Client response</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								302
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								<code class="literal">Location</code> header containing an <code class="literal">access_token</code> parameter in the URL fragment (<a class="link" href="https://tools.ietf.org/html/rfc6749#section-4.2.2">RFC 6749 section 4.2.2</a>)
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								Use the <code class="literal">access_token</code> value as the OAuth token.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								302
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								<code class="literal">Location</code> header containing an <code class="literal">error</code> query parameter (<a class="link" href="https://tools.ietf.org/html/rfc6749#section-4.1.2.1">RFC 6749 section 4.1.2.1</a>)
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								Fail, optionally surfacing the <code class="literal">error</code> (and optional <code class="literal">error_description</code>) query values to the user.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								302
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								Other <code class="literal">Location</code> header
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								Follow the redirect, and process the result using these rules.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								401
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								<code class="literal">WWW-Authenticate</code> header present
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								Respond to challenge if type is recognized (e.g. <code class="literal">Basic</code>, <code class="literal">Negotiate</code>, etc), resubmit request, and process the result using these rules.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								401
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								<code class="literal">WWW-Authenticate</code> header missing
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								No challenge authentication is possible. Fail and show response body (which might contain links or details on alternate methods to obtain an OAuth token).
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032740293344"> <p>
								Other
							</p>
							 </td><td align="left" valign="top" headers="idm140032740292256"> <p>
								Other
							</p>
							 </td><td align="left" valign="top" headers="idm140032740311744"> <p>
								Fail, optionally surfacing response body to the user.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="oauth-internal-options_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.3. Options for the internal OAuth server</h2></div></div></div><p>
				Several configuration options are available for the internal OAuth server.
			</p><section class="section" id="oauth-token-duration_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">3.3.1. OAuth token duration options</h3></div></div></div><p>
					The internal OAuth server generates two kinds of tokens:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032749853632" scope="col">Token</th><th align="left" valign="top" id="idm140032741456656" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032749853632"> <p>
									Access tokens
								</p>
								 </td><td align="left" valign="top" headers="idm140032741456656"> <p>
									Longer-lived tokens that grant access to the API.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032749853632"> <p>
									Authorize codes
								</p>
								 </td><td align="left" valign="top" headers="idm140032741456656"> <p>
									Short-lived tokens whose only use is to be exchanged for an access token.
								</p>
								 </td></tr></tbody></table></div><p>
					You can configure the default duration for both types of token. If necessary, you can override the duration of the access token by using an <code class="literal">OAuthClient</code> object definition.
				</p></section><section class="section" id="oauth-grant-options_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">3.3.2. OAuth grant options</h3></div></div></div><p>
					When the OAuth server receives token requests for a client to which the user has not previously granted permission, the action that the OAuth server takes is dependent on the OAuth client’s grant strategy.
				</p><p>
					The OAuth client requesting token must provide its own grant strategy.
				</p><p>
					You can apply the following default methods:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032737952672" scope="col">Grant option</th><th align="left" valign="top" id="idm140032737951584" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032737952672"> <p>
									<code class="literal">auto</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032737951584"> <p>
									Auto-approve the grant and retry the request.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032737952672"> <p>
									<code class="literal">prompt</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032737951584"> <p>
									Prompt the user to approve or deny the grant.
								</p>
								 </td></tr></tbody></table></div></section></section><section class="section" id="oauth-configuring-internal-oauth_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.4. Configuring the internal OAuth server’s token duration</h2></div></div></div><p>
				You can configure default options for the internal OAuth server’s token duration.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					By default, tokens are only valid for 24 hours. Existing sessions expire after this time elapses.
				</p></div></div><p>
				If the default time is insufficient, then this can be modified using the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a configuration file that contains the token duration options. The following file sets this to 48 hours, twice the default.
					</p><pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  tokenConfig:
    accessTokenMaxAgeSeconds: 172800 <span id="CO1-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Set <code class="literal">accessTokenMaxAgeSeconds</code> to control the lifetime of access tokens. The default lifetime is 24 hours, or 86400 seconds. This attribute cannot be negative. If set to zero, the default lifetime is used.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Apply the new configuration file:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Because you update the existing OAuth server, you must use the <code class="literal">oc apply</code> command to apply the change.
						</p></div></div><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/file.yaml&gt;</pre></li><li class="listitem"><p class="simpara">
						Confirm that the changes are in effect:
					</p><pre class="programlisting language-terminal">$ oc describe oauth.config.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">...
Spec:
  Token Config:
    Access Token Max Age Seconds:  172800
...</pre>

						</p></div></li></ol></div></section><section class="section" id="oauth-token-inactivity-timeout_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.5. Configuring token inactivity timeout for the internal OAuth server</h2></div></div></div><p>
				You can configure OAuth tokens to expire after a set period of inactivity. By default, no token inactivity timeout is set.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the token inactivity timeout is also configured in your OAuth client, that value overrides the timeout that is set in the internal OAuth server configuration.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem">
						You have configured an identity provider (IDP).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Update the <code class="literal">OAuth</code> configuration to set a token inactivity timeout.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">OAuth</code> object:
							</p><pre class="programlisting language-terminal">$ oc edit oauth cluster</pre><p class="simpara">
								Add the <code class="literal">spec.tokenConfig.accessTokenInactivityTimeout</code> field and set your timeout value:
							</p><pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
...
spec:
  tokenConfig:
    accessTokenInactivityTimeout: 400s <span id="CO2-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Set a value with the appropriate units, for example <code class="literal">400s</code> for 400 seconds, or <code class="literal">30m</code> for 30 minutes. The minimum allowed timeout value is <code class="literal">300s</code>.
									</div></dd></dl></div></li><li class="listitem">
								Save the file to apply the changes.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Check that the OAuth server pods have restarted:
					</p><pre class="programlisting language-terminal">$ oc get clusteroperators authentication</pre><p class="simpara">
						Do not continue to the next step until <code class="literal">PROGRESSING</code> is listed as <code class="literal">False</code>, as shown in the following output:
					</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME             VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE
authentication   4.13.0    True        False         False      145m</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Check that a new revision of the Kubernetes API server pods has rolled out. This will take several minutes.
					</p><pre class="programlisting language-terminal">$ oc get clusteroperators kube-apiserver</pre><p class="simpara">
						Do not continue to the next step until <code class="literal">PROGRESSING</code> is listed as <code class="literal">False</code>, as shown in the following output:
					</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME             VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE
kube-apiserver   4.13.0     True        False         False      145m</pre>

						</p></div><p class="simpara">
						If <code class="literal">PROGRESSING</code> is showing <code class="literal">True</code>, wait a few minutes and try again.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the cluster with an identity from your IDP.
					</li><li class="listitem">
						Execute a command and verify that it was successful.
					</li><li class="listitem">
						Wait longer than the configured timeout without using the identity. In this procedure’s example, wait longer than 400 seconds.
					</li><li class="listitem"><p class="simpara">
						Try to execute a command from the same identity’s session.
					</p><p class="simpara">
						This command should fail because the token should have expired due to inactivity longer than the configured timeout.
					</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">error: You must be logged in to the server (Unauthorized)</pre>

						</p></div></li></ol></div></section><section class="section" id="customizing-the-oauth-server-url_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.6. Customizing the internal OAuth server URL</h2></div></div></div><p>
				You can customize the internal OAuth server URL by setting the custom hostname and TLS certificate in the <code class="literal">spec.componentRoutes</code> field of the cluster <code class="literal">Ingress</code> configuration.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					If you update the internal OAuth server URL, you might break trust from components in the cluster that need to communicate with the OpenShift OAuth server to retrieve OAuth access tokens. Components that need to trust the OAuth server will need to include the proper CA bundle when calling OAuth endpoints. For example:
				</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt; -p &lt;password&gt; --certificate-authority=&lt;path_to_ca.crt&gt; <span id="CO3-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							For self-signed certificates, the <code class="literal">ca.crt</code> file must contain the custom CA certificate, otherwise the login will not succeed.
						</div></dd></dl></div><p>
					The Cluster Authentication Operator publishes the OAuth server’s serving certificate in the <code class="literal">oauth-serving-cert</code> config map in the <code class="literal">openshift-config-managed</code> namespace. You can find the certificate in the <code class="literal">data.ca-bundle.crt</code> key of the config map.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have logged in to the cluster as a user with administrative privileges.
					</li><li class="listitem"><p class="simpara">
						You have created a secret in the <code class="literal">openshift-config</code> namespace containing the TLS certificate and key. This is required if the domain for the custom hostname suffix does not match the cluster domain suffix. The secret is optional if the suffix matches.
					</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can create a TLS secret by using the <code class="literal">oc create secret tls</code> command.
					</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the cluster <code class="literal">Ingress</code> configuration:
					</p><pre class="programlisting language-terminal">$ oc edit ingress.config.openshift.io cluster</pre></li><li class="listitem"><p class="simpara">
						Set the custom hostname and optionally the serving certificate and key:
					</p><pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: Ingress
metadata:
  name: cluster
spec:
  componentRoutes:
    - name: oauth-openshift
      namespace: openshift-authentication
      hostname: &lt;custom_hostname&gt; <span id="CO4-1"><!--Empty--></span><span class="callout">1</span>
      servingCertKeyPairSecret:
        name: &lt;secret_name&gt; <span id="CO4-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The custom hostname.
							</div></dd><dt><a href="#CO4-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Reference to a secret in the <code class="literal">openshift-config</code> namespace that contains a TLS certificate (<code class="literal">tls.crt</code>) and key (<code class="literal">tls.key</code>). This is required if the domain for the custom hostname suffix does not match the cluster domain suffix. The secret is optional if the suffix matches.
							</div></dd></dl></div></li><li class="listitem">
						Save the file to apply the changes.
					</li></ol></div></section><section class="section" id="oauth-server-metadata_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.7. OAuth server metadata</h2></div></div></div><p>
				Applications running in OpenShift Container Platform might have to discover information about the built-in OAuth server. For example, they might have to discover what the address of the <code class="literal">&lt;namespace_route&gt;</code> is without manual configuration. To aid in this, OpenShift Container Platform implements the IETF <a class="link" href="https://tools.ietf.org/html/draft-ietf-oauth-discovery-10">OAuth 2.0 Authorization Server Metadata</a> draft specification.
			</p><p>
				Thus, any application running inside the cluster can issue a <code class="literal">GET</code> request to <span class="strong strong"><strong><span class="emphasis"><em>https://openshift.default.svc/.well-known/oauth-authorization-server</em></span></strong></span> to fetch the following information:
			</p><pre class="screen">{
  "issuer": "https://&lt;namespace_route&gt;", <span id="CO5-1"><!--Empty--></span><span class="callout">1</span>
  "authorization_endpoint": "https://&lt;namespace_route&gt;/oauth/authorize", <span id="CO5-2"><!--Empty--></span><span class="callout">2</span>
  "token_endpoint": "https://&lt;namespace_route&gt;/oauth/token", <span id="CO5-3"><!--Empty--></span><span class="callout">3</span>
  "scopes_supported": [ <span id="CO5-4"><!--Empty--></span><span class="callout">4</span>
    "user:full",
    "user:info",
    "user:check-access",
    "user:list-scoped-projects",
    "user:list-projects"
  ],
  "response_types_supported": [ <span id="CO5-5"><!--Empty--></span><span class="callout">5</span>
    "code",
    "token"
  ],
  "grant_types_supported": [ <span id="CO5-6"><!--Empty--></span><span class="callout">6</span>
    "authorization_code",
    "implicit"
  ],
  "code_challenge_methods_supported": [ <span id="CO5-7"><!--Empty--></span><span class="callout">7</span>
    "plain",
    "S256"
  ]
}</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						The authorization server’s issuer identifier, which is a URL that uses the <code class="literal">https</code> scheme and has no query or fragment components. This is the location where <code class="literal">.well-known</code> <a class="link" href="https://tools.ietf.org/html/rfc5785">RFC 5785</a> resources containing information about the authorization server are published.
					</div></dd><dt><a href="#CO5-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						URL of the authorization server’s authorization endpoint. See <a class="link" href="https://tools.ietf.org/html/rfc6749">RFC 6749</a>.
					</div></dd><dt><a href="#CO5-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						URL of the authorization server’s token endpoint. See <a class="link" href="https://tools.ietf.org/html/rfc6749">RFC 6749</a>.
					</div></dd><dt><a href="#CO5-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						JSON array containing a list of the OAuth 2.0 <a class="link" href="https://tools.ietf.org/html/rfc6749">RFC 6749</a> scope values that this authorization server supports. Note that not all supported scope values are advertised.
					</div></dd><dt><a href="#CO5-5"><span class="callout">5</span></a> </dt><dd><div class="para">
						JSON array containing a list of the OAuth 2.0 <code class="literal">response_type</code> values that this authorization server supports. The array values used are the same as those used with the <code class="literal">response_types</code> parameter defined by "OAuth 2.0 Dynamic Client Registration Protocol" in <a class="link" href="https://tools.ietf.org/html/rfc7591">RFC 7591</a>.
					</div></dd><dt><a href="#CO5-6"><span class="callout">6</span></a> </dt><dd><div class="para">
						JSON array containing a list of the OAuth 2.0 grant type values that this authorization server supports. The array values used are the same as those used with the <code class="literal">grant_types</code> parameter defined by <code class="literal">OAuth 2.0 Dynamic Client Registration Protocol</code> in <a class="link" href="https://tools.ietf.org/html/rfc7591">RFC 7591</a>.
					</div></dd><dt><a href="#CO5-7"><span class="callout">7</span></a> </dt><dd><div class="para">
						JSON array containing a list of PKCE <a class="link" href="https://tools.ietf.org/html/rfc7636">RFC 7636</a> code challenge methods supported by this authorization server. Code challenge method values are used in the <code class="literal">code_challenge_method</code> parameter defined in <a class="link" href="https://tools.ietf.org/html/rfc7636#section-4.3">Section 4.3 of RFC 7636</a>. The valid code challenge method values are those registered in the IANA <code class="literal">PKCE Code Challenge Methods</code> registry. See <a class="link" href="http://www.iana.org/assignments/oauth-parameters">IANA OAuth Parameters</a>.
					</div></dd></dl></div></section><section class="section" id="oauth-troubleshooting-api-events_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">3.8. Troubleshooting OAuth API events</h2></div></div></div><p>
				In some cases the API server returns an <code class="literal">unexpected condition</code> error message that is difficult to debug without direct access to the API master log. The underlying reason for the error is purposely obscured in order to avoid providing an unauthenticated user with information about the server’s state.
			</p><p>
				A subset of these errors is related to service account OAuth configuration issues. These issues are captured in events that can be viewed by non-administrator users. When encountering an <code class="literal">unexpected condition</code> server error during OAuth, run <code class="literal">oc get events</code> to view these events under <code class="literal">ServiceAccount</code>.
			</p><p>
				The following example warns of a service account that is missing a proper OAuth redirect URI:
			</p><pre class="programlisting language-terminal">$ oc get events | grep ServiceAccount</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
					
<pre class="programlisting language-terminal">1m         1m          1         proxy                    ServiceAccount                                  Warning   NoSAOAuthRedirectURIs   service-account-oauth-client-getter   system:serviceaccount:myproject:proxy has no redirectURIs; set serviceaccounts.openshift.io/oauth-redirecturi.&lt;some-value&gt;=&lt;redirect&gt; or create a dynamic URI using serviceaccounts.openshift.io/oauth-redirectreference.&lt;some-value&gt;=&lt;reference&gt;</pre>

				</p></div><p>
				Running <code class="literal">oc describe sa/&lt;service_account_name&gt;</code> reports any OAuth events associated with the given service account name.
			</p><pre class="programlisting language-terminal">$ oc describe sa/proxy | grep -A5 Events</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
					
<pre class="programlisting language-terminal">Events:
  FirstSeen     LastSeen        Count   From                                    SubObjectPath   Type            Reason                  Message
  ---------     --------        -----   ----                                    -------------   --------        ------                  -------
  3m            3m              1       service-account-oauth-client-getter                     Warning         NoSAOAuthRedirectURIs   system:serviceaccount:myproject:proxy has no redirectURIs; set serviceaccounts.openshift.io/oauth-redirecturi.&lt;some-value&gt;=&lt;redirect&gt; or create a dynamic URI using serviceaccounts.openshift.io/oauth-redirectreference.&lt;some-value&gt;=&lt;reference&gt;</pre>

				</p></div><p>
				The following is a list of the possible event errors:
			</p><p>
				<span class="strong strong"><strong>No redirect URI annotations or an invalid URI is specified</strong></span>
			</p><pre class="programlisting language-terminal">Reason                  Message
NoSAOAuthRedirectURIs   system:serviceaccount:myproject:proxy has no redirectURIs; set serviceaccounts.openshift.io/oauth-redirecturi.&lt;some-value&gt;=&lt;redirect&gt; or create a dynamic URI using serviceaccounts.openshift.io/oauth-redirectreference.&lt;some-value&gt;=&lt;reference&gt;</pre><p>
				<span class="strong strong"><strong>Invalid route specified</strong></span>
			</p><pre class="programlisting language-terminal">Reason                  Message
NoSAOAuthRedirectURIs   [routes.route.openshift.io "&lt;name&gt;" not found, system:serviceaccount:myproject:proxy has no redirectURIs; set serviceaccounts.openshift.io/oauth-redirecturi.&lt;some-value&gt;=&lt;redirect&gt; or create a dynamic URI using serviceaccounts.openshift.io/oauth-redirectreference.&lt;some-value&gt;=&lt;reference&gt;]</pre><p>
				<span class="strong strong"><strong>Invalid reference type specified</strong></span>
			</p><pre class="programlisting language-terminal">Reason                  Message
NoSAOAuthRedirectURIs   [no kind "&lt;name&gt;" is registered for version "v1", system:serviceaccount:myproject:proxy has no redirectURIs; set serviceaccounts.openshift.io/oauth-redirecturi.&lt;some-value&gt;=&lt;redirect&gt; or create a dynamic URI using serviceaccounts.openshift.io/oauth-redirectreference.&lt;some-value&gt;=&lt;reference&gt;]</pre><p>
				<span class="strong strong"><strong>Missing SA tokens</strong></span>
			</p><pre class="programlisting language-terminal">Reason                  Message
NoSAOAuthTokens         system:serviceaccount:myproject:proxy has no tokens</pre></section></section><section class="chapter" id="configuring-oauth-clients"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Configuring OAuth clients</h1></div></div></div><p>
			Several OAuth clients are created by default in OpenShift Container Platform. You can also register and configure additional OAuth clients.
		</p><section class="section" id="oauth-default-clients_configuring-oauth-clients"><div class="titlepage"><div><div><h2 class="title">4.1. Default OAuth clients</h2></div></div></div><p>
				The following OAuth clients are automatically created when starting the OpenShift Container Platform API:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"><!--Empty--></col><col style="width: 60%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032746215600" scope="col">OAuth client</th><th align="left" valign="top" id="idm140032741708528" scope="col">Usage</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032746215600"> <p>
								<code class="literal">openshift-browser-client</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032741708528"> <p>
								Requests tokens at <code class="literal">&lt;namespace_route&gt;/oauth/token/request</code> with a user-agent that can handle interactive logins. <sup>[1]</sup>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032746215600"> <p>
								<code class="literal">openshift-challenging-client</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032741708528"> <p>
								Requests tokens with a user-agent that can handle <code class="literal">WWW-Authenticate</code> challenges.
							</p>
							 </td></tr></tbody></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						<code class="literal">&lt;namespace_route&gt;</code> refers to the namespace route. This is found by running the following command:
					</p><pre class="programlisting language-terminal">$ oc get route oauth-openshift -n openshift-authentication -o json | jq .spec.host</pre></li></ol></div></section><section class="section" id="oauth-register-additional-client_configuring-oauth-clients"><div class="titlepage"><div><div><h2 class="title">4.2. Registering an additional OAuth client</h2></div></div></div><p>
				If you need an additional OAuth client to manage authentication for your OpenShift Container Platform cluster, you can register one.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To register additional OAuth clients:
					</p><pre class="programlisting language-terminal">$ oc create -f &lt;(echo '
kind: OAuthClient
apiVersion: oauth.openshift.io/v1
metadata:
 name: demo <span id="CO6-1"><!--Empty--></span><span class="callout">1</span>
secret: "..." <span id="CO6-2"><!--Empty--></span><span class="callout">2</span>
redirectURIs:
 - "http://www.example.com/" <span id="CO6-3"><!--Empty--></span><span class="callout">3</span>
grantMethod: prompt <span id="CO6-4"><!--Empty--></span><span class="callout">4</span>
')</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">name</code> of the OAuth client is used as the <code class="literal">client_id</code> parameter when making requests to <code class="literal">&lt;namespace_route&gt;/oauth/authorize</code> and <code class="literal">&lt;namespace_route&gt;/oauth/token</code>.
							</div></dd><dt><a href="#CO6-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The <code class="literal">secret</code> is used as the <code class="literal">client_secret</code> parameter when making requests to <code class="literal">&lt;namespace_route&gt;/oauth/token</code>.
							</div></dd><dt><a href="#CO6-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The <code class="literal">redirect_uri</code> parameter specified in requests to <code class="literal">&lt;namespace_route&gt;/oauth/authorize</code> and <code class="literal">&lt;namespace_route&gt;/oauth/token</code> must be equal to or prefixed by one of the URIs listed in the <code class="literal">redirectURIs</code> parameter value.
							</div></dd><dt><a href="#CO6-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The <code class="literal">grantMethod</code> is used to determine what action to take when this client requests tokens and has not yet been granted access by the user. Specify <code class="literal">auto</code> to automatically approve the grant and retry the request, or <code class="literal">prompt</code> to prompt the user to approve or deny the grant.
							</div></dd></dl></div></li></ul></div></section><section class="section" id="oauth-token-inactivity-timeout_configuring-oauth-clients"><div class="titlepage"><div><div><h2 class="title">4.3. Configuring token inactivity timeout for an OAuth client</h2></div></div></div><p>
				You can configure OAuth clients to expire OAuth tokens after a set period of inactivity. By default, no token inactivity timeout is set.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the token inactivity timeout is also configured in the internal OAuth server configuration, the timeout that is set in the OAuth client overrides that value.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem">
						You have configured an identity provider (IDP).
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Update the <code class="literal">OAuthClient</code> configuration to set a token inactivity timeout.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">OAuthClient</code> object:
							</p><pre class="programlisting language-terminal">$ oc edit oauthclient &lt;oauth_client&gt; <span id="CO7-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;oauth_client&gt;</code> with the OAuth client to configure, for example, <code class="literal">console</code>.
									</div></dd></dl></div><p class="simpara">
								Add the <code class="literal">accessTokenInactivityTimeoutSeconds</code> field and set your timeout value:
							</p><pre class="programlisting language-yaml">apiVersion: oauth.openshift.io/v1
grantMethod: auto
kind: OAuthClient
metadata:
...
accessTokenInactivityTimeoutSeconds: 600 <span id="CO8-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The minimum allowed timeout value in seconds is <code class="literal">300</code>.
									</div></dd></dl></div></li><li class="listitem">
								Save the file to apply the changes.
							</li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the cluster with an identity from your IDP. Be sure to use the OAuth client that you just configured.
					</li><li class="listitem">
						Perform an action and verify that it was successful.
					</li><li class="listitem">
						Wait longer than the configured timeout without using the identity. In this procedure’s example, wait longer than 600 seconds.
					</li><li class="listitem"><p class="simpara">
						Try to perform an action from the same identity’s session.
					</p><p class="simpara">
						This attempt should fail because the token should have expired due to inactivity longer than the configured timeout.
					</p></li></ol></div></section><section class="section _additional-resources" id="additional-resources"><div class="titlepage"><div><div><h2 class="title">4.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/api_reference/#oauthclient-oauth-openshift-io-v1">OAuthClient [oauth.openshift.io/v1</a>]
					</li></ul></div></section></section><section class="chapter" id="managing-oauth-access-tokens"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Managing user-owned OAuth access tokens</h1></div></div></div><p>
			Users can review their own OAuth access tokens and delete any that are no longer needed.
		</p><section class="section" id="oauth-list-tokens_managing-oauth-access-tokens"><div class="titlepage"><div><div><h2 class="title">5.1. Listing user-owned OAuth access tokens</h2></div></div></div><p>
				You can list your user-owned OAuth access tokens. Token names are not sensitive and cannot be used to log in.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List all user-owned OAuth access tokens:
					</p><pre class="programlisting language-terminal">$ oc get useroauthaccesstokens</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       CLIENT NAME                    CREATED                EXPIRES                         REDIRECT URI                                                       SCOPES
&lt;token1&gt;   openshift-challenging-client   2021-01-11T19:25:35Z   2021-01-12 19:25:35 +0000 UTC   https://oauth-openshift.apps.example.com/oauth/token/implicit      user:full
&lt;token2&gt;   openshift-browser-client       2021-01-11T19:27:06Z   2021-01-12 19:27:06 +0000 UTC   https://oauth-openshift.apps.example.com/oauth/token/display       user:full
&lt;token3&gt;   console                        2021-01-11T19:26:29Z   2021-01-12 19:26:29 +0000 UTC   https://console-openshift-console.apps.example.com/auth/callback   user:full</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						List user-owned OAuth access tokens for a particular OAuth client:
					</p><pre class="programlisting language-terminal">$ oc get useroauthaccesstokens --field-selector=clientName="console"</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       CLIENT NAME                    CREATED                EXPIRES                         REDIRECT URI                                                       SCOPES
&lt;token3&gt;   console                        2021-01-11T19:26:29Z   2021-01-12 19:26:29 +0000 UTC   https://console-openshift-console.apps.example.com/auth/callback   user:full</pre>

						</p></div></li></ul></div></section><section class="section" id="oauth-view-details-tokens_managing-oauth-access-tokens"><div class="titlepage"><div><div><h2 class="title">5.2. Viewing the details of a user-owned OAuth access token</h2></div></div></div><p>
				You can view the details of a user-owned OAuth access token.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Describe the details of a user-owned OAuth access token:
					</p><pre class="programlisting language-terminal">$ oc describe useroauthaccesstokens &lt;token_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:                        &lt;token_name&gt; <span id="CO9-1"><!--Empty--></span><span class="callout">1</span>
Namespace:
Labels:                      &lt;none&gt;
Annotations:                 &lt;none&gt;
API Version:                 oauth.openshift.io/v1
Authorize Token:             sha256~Ksckkug-9Fg_RWn_AUysPoIg-_HqmFI9zUL_CgD8wr8
Client Name:                 openshift-browser-client <span id="CO9-2"><!--Empty--></span><span class="callout">2</span>
Expires In:                  86400 <span id="CO9-3"><!--Empty--></span><span class="callout">3</span>
Inactivity Timeout Seconds:  317 <span id="CO9-4"><!--Empty--></span><span class="callout">4</span>
Kind:                        UserOAuthAccessToken
Metadata:
  Creation Timestamp:  2021-01-11T19:27:06Z
  Managed Fields:
    API Version:  oauth.openshift.io/v1
    Fields Type:  FieldsV1
    fieldsV1:
      f:authorizeToken:
      f:clientName:
      f:expiresIn:
      f:redirectURI:
      f:scopes:
      f:userName:
      f:userUID:
    Manager:         oauth-server
    Operation:       Update
    Time:            2021-01-11T19:27:06Z
  Resource Version:  30535
  Self Link:         /apis/oauth.openshift.io/v1/useroauthaccesstokens/&lt;token_name&gt;
  UID:               f9d00b67-ab65-489b-8080-e427fa3c6181
Redirect URI:        https://oauth-openshift.apps.example.com/oauth/token/display
Scopes:
  user:full <span id="CO9-5"><!--Empty--></span><span class="callout">5</span>
User Name:  &lt;user_name&gt; <span id="CO9-6"><!--Empty--></span><span class="callout">6</span>
User UID:   82356ab0-95f9-4fb3-9bc0-10f1d6a6a345
Events:     &lt;none&gt;</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO9-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The token name, which is the sha256 hash of the token. Token names are not sensitive and cannot be used to log in.
							</div></dd><dt><a href="#CO9-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The client name, which describes where the token originated from.
							</div></dd><dt><a href="#CO9-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The value in seconds from the creation time before this token expires.
							</div></dd><dt><a href="#CO9-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								If there is a token inactivity timeout set for the OAuth server, this is the value in seconds from the creation time before this token can no longer be used.
							</div></dd><dt><a href="#CO9-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								The scopes for this token.
							</div></dd><dt><a href="#CO9-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								The user name associated with this token.
							</div></dd></dl></div></li></ul></div></section><section class="section" id="oauth-delete-tokens_managing-oauth-access-tokens"><div class="titlepage"><div><div><h2 class="title">5.3. Deleting user-owned OAuth access tokens</h2></div></div></div><p>
				The <code class="literal">oc logout</code> command only invalidates the OAuth token for the active session. You can use the following procedure to delete any user-owned OAuth tokens that are no longer needed.
			</p><p>
				Deleting an OAuth access token logs out the user from all sessions that use the token.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Delete the user-owned OAuth access token:
					</p><pre class="programlisting language-terminal">$ oc delete useroauthaccesstokens &lt;token_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">useroauthaccesstoken.oauth.openshift.io "&lt;token_name&gt;" deleted</pre>

						</p></div></li></ul></div></section></section><section class="chapter" id="understanding-identity-provider"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Understanding identity provider configuration</h1></div></div></div><p>
			The OpenShift Container Platform master includes a built-in OAuth server. Developers and administrators obtain OAuth access tokens to authenticate themselves to the API.
		</p><p>
			As an administrator, you can configure OAuth to specify an identity provider after you install your cluster.
		</p><section class="section" id="identity-provider-overview_understanding-identity-provider"><div class="titlepage"><div><div><h2 class="title">6.1. About identity providers in OpenShift Container Platform</h2></div></div></div><p>
				By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
				</p></div></div></section><section class="section" id="supported-identity-providers"><div class="titlepage"><div><div><h2 class="title">6.2. Supported identity providers</h2></div></div></div><p>
				You can configure the following types of identity providers:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032739907248" scope="col">Identity provider</th><th align="left" valign="top" id="idm140032748575456" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-htpasswd-identity-provider">htpasswd</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure the <code class="literal">htpasswd</code> identity provider to validate user names and passwords against a flat file generated using <a class="link" href="http://httpd.apache.org/docs/2.4/programs/htpasswd.html"><code class="literal">htpasswd</code></a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-keystone-identity-provider">Keystone</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure the <code class="literal">keystone</code> identity provider to integrate your OpenShift Container Platform cluster with Keystone to enable shared authentication with an OpenStack Keystone v3 server configured to store users in an internal database.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-ldap-identity-provider">LDAP</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure the <code class="literal">ldap</code> identity provider to validate user names and passwords against an LDAPv3 server, using simple bind authentication.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-basic-authentication-identity-provider">Basic authentication</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure a <code class="literal">basic-authentication</code> identity provider for users to log in to OpenShift Container Platform with credentials validated against a remote identity provider. Basic authentication is a generic backend integration mechanism.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-request-header-identity-provider">Request header</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure a <code class="literal">request-header</code> identity provider to identify users from request header values, such as <code class="literal">X-Remote-User</code>. It is typically used in combination with an authenticating proxy, which sets the request header value.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-github-identity-provider">GitHub or GitHub Enterprise</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure a <code class="literal">github</code> identity provider to validate user names and passwords against GitHub or GitHub Enterprise’s OAuth authentication server.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-gitlab-identity-provider">GitLab</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure a <code class="literal">gitlab</code> identity provider to use <a class="link" href="https://gitlab.com/">GitLab.com</a> or any other GitLab instance as an identity provider.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-google-identity-provider">Google</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure a <code class="literal">google</code> identity provider using <a class="link" href="https://developers.google.com/identity/protocols/OpenIDConnect">Google’s OpenID Connect integration</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032739907248"> <p>
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-oidc-identity-provider">OpenID Connect</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140032748575456"> <p>
								Configure an <code class="literal">oidc</code> identity provider to integrate with an OpenID Connect identity provider using an <a class="link" href="http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth">Authorization Code Flow</a>.
							</p>
							 </td></tr></tbody></table></div><p>
				Once an identity provider has been defined, you can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#authorization-overview_using-rbac">use RBAC to define and apply permissions</a>.
			</p></section><section class="section" id="removing-kubeadmin_understanding-identity-provider"><div class="titlepage"><div><div><h2 class="title">6.3. Removing the kubeadmin user</h2></div></div></div><p>
				After you define an identity provider and create a new <code class="literal">cluster-admin</code> user, you can remove the <code class="literal">kubeadmin</code> to improve cluster security.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					If you follow this procedure before another user is a <code class="literal">cluster-admin</code>, then OpenShift Container Platform must be reinstalled. It is not possible to undo this command.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have configured at least one identity provider.
					</li><li class="listitem">
						You must have added the <code class="literal">cluster-admin</code> role to a user.
					</li><li class="listitem">
						You must be logged in as an administrator.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Remove the <code class="literal">kubeadmin</code> secrets:
					</p><pre class="programlisting language-terminal">$ oc delete secrets kubeadmin -n kube-system</pre></li></ul></div></section><section class="section" id="identity-provider-parameters_understanding-identity-provider"><div class="titlepage"><div><div><h2 class="title">6.4. Identity provider parameters</h2></div></div></div><p>
				The following parameters are common to all identity providers:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032741116192" scope="col">Parameter</th><th align="left" valign="top" id="idm140032741115104" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032741116192"> <p>
								<code class="literal">name</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032741115104"> <p>
								The provider name is prefixed to provider user names to form an identity name.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032741116192"> <p>
								<code class="literal">mappingMethod</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032741115104"> <p>
								Defines how new identities are mapped to users when they log in. Enter one of the following values:
							</p>
							 <div class="variablelist"><dl class="variablelist"><dt><span class="term">claim</span></dt><dd>
											The default value. Provisions a user with the identity’s preferred user name. Fails if a user with that user name is already mapped to another identity.
										</dd><dt><span class="term">lookup</span></dt><dd>
											Looks up an existing identity, user identity mapping, and user, but does not automatically provision users or identities. This allows cluster administrators to set up identities and users manually, or using an external process. Using this method requires you to manually provision users.
										</dd><dt><span class="term">generate</span></dt><dd>
											Provisions a user with the identity’s preferred user name. If a user with the preferred user name is already mapped to an existing identity, a unique user name is generated. For example, <code class="literal">myuser2</code>. This method should not be used in combination with external processes that require exact matches between OpenShift Container Platform user names and identity provider user names, such as LDAP group sync.
										</dd><dt><span class="term">add</span></dt><dd>
											Provisions a user with the identity’s preferred user name. If a user with that user name already exists, the identity is mapped to the existing user, adding to any existing identity mappings for the user. Required when multiple identity providers are configured that identify the same set of users and map to the same user names.
										</dd></dl></div>
							 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When adding or changing identity providers, you can map identities from the new provider to existing users by setting the <code class="literal">mappingMethod</code> parameter to <code class="literal">add</code>.
				</p></div></div></section><section class="section" id="identity-provider-default-CR_understanding-identity-provider"><div class="titlepage"><div><div><h2 class="title">6.5. Sample identity provider CR</h2></div></div></div><p>
				The following custom resource (CR) shows the parameters and default values that you use to configure an identity provider. This example uses the htpasswd identity provider.
			</p><div class="formalpara"><p class="title"><strong>Sample identity provider CR</strong></p><p>
					
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: my_identity_provider <span id="CO10-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO10-2"><!--Empty--></span><span class="callout">2</span>
    type: HTPasswd
    htpasswd:
      fileData:
        name: htpass-secret <span id="CO10-3"><!--Empty--></span><span class="callout">3</span></pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO10-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						This provider name is prefixed to provider user names to form an identity name.
					</div></dd><dt><a href="#CO10-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
					</div></dd><dt><a href="#CO10-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						An existing secret containing a file generated using <a class="link" href="http://httpd.apache.org/docs/2.4/programs/htpasswd.html"><code class="literal">htpasswd</code></a>.
					</div></dd></dl></div></section></section><section class="chapter" id="configuring-identity-providers"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Configuring identity providers</h1></div></div></div><section class="section" id="configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.1. Configuring an htpasswd identity provider</h2></div></div></div><p>
				Configure the <code class="literal">htpasswd</code> identity provider to allow users to log in to OpenShift Container Platform with credentials from an htpasswd file.
			</p><p>
				To define an htpasswd identity provider, perform the following tasks:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#creating-htpasswd-file">Create an <code class="literal">htpasswd</code> file</a> to store the user and password information.
					</li><li class="listitem">
						<a class="link" href="#identity-provider-creating-htpasswd-secret_configuring-htpasswd-identity-provider" title="7.1.4. Creating the htpasswd secret">Create a secret</a> to represent the <code class="literal">htpasswd</code> file.
					</li><li class="listitem">
						<a class="link" href="#identity-provider-htpasswd-CR_configuring-htpasswd-identity-provider" title="7.1.5. Sample htpasswd CR">Define an htpasswd identity provider resource</a> that references the secret.
					</li><li class="listitem">
						<a class="link" href="#add-identity-provider_configuring-htpasswd-identity-provider" title="7.1.6. Adding an identity provider to your cluster">Apply the resource</a> to the default OAuth configuration to add the identity provider.
					</li></ol></div><section class="section" id="identity-provider-overview_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-htpasswd-about_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.2. About htpasswd authentication</h3></div></div></div><p>
					Using htpasswd authentication in OpenShift Container Platform allows you to identify users based on an htpasswd file. An htpasswd file is a flat file that contains the user name and hashed password for each user. You can use the <code class="literal">htpasswd</code> utility to create this file.
				</p></section><section class="section" id="creating-htpasswd-file"><div class="titlepage"><div><div><h3 class="title">7.1.3. Creating the htpasswd file</h3></div></div></div><p>
					See one of the following sections for instructions about how to create the htpasswd file:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-creating-htpasswd-file-linux_configuring-htpasswd-identity-provider">Creating an htpasswd file using Linux</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-creating-htpasswd-file-windows_configuring-htpasswd-identity-provider">Creating an htpasswd file using Windows</a>
						</li></ul></div><section class="section" id="identity-provider-creating-htpasswd-file-linux_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h4 class="title">7.1.3.1. Creating an htpasswd file using Linux</h4></div></div></div><p>
						To use the htpasswd identity provider, you must generate a flat file that contains the user names and passwords for your cluster by using <a class="link" href="http://httpd.apache.org/docs/2.4/programs/htpasswd.html"><code class="literal">htpasswd</code></a>.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Have access to the <code class="literal">htpasswd</code> utility. On Red Hat Enterprise Linux this is available by installing the <code class="literal">httpd-tools</code> package.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create or update your flat file with a user name and hashed password:
							</p><pre class="programlisting language-terminal">$ htpasswd -c -B -b &lt;/path/to/users.htpasswd&gt; &lt;username&gt; &lt;password&gt;</pre><p class="simpara">
								The command generates a hashed version of the password.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-terminal">$ htpasswd -c -B -b users.htpasswd &lt;username&gt; &lt;password&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">Adding password for user user1</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Continue to add or update credentials to the file:
							</p><pre class="programlisting language-terminal">$ htpasswd -B -b &lt;/path/to/users.htpasswd&gt; &lt;user_name&gt; &lt;password&gt;</pre></li></ol></div></section><section class="section" id="identity-provider-creating-htpasswd-file-windows_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h4 class="title">7.1.3.2. Creating an htpasswd file using Windows</h4></div></div></div><p>
						To use the htpasswd identity provider, you must generate a flat file that contains the user names and passwords for your cluster by using <a class="link" href="http://httpd.apache.org/docs/2.4/programs/htpasswd.html"><code class="literal">htpasswd</code></a>.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Have access to <code class="literal">htpasswd.exe</code>. This file is included in the <code class="literal">\bin</code> directory of many Apache httpd distributions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create or update your flat file with a user name and hashed password:
							</p><pre class="programlisting language-terminal">&gt; htpasswd.exe -c -B -b &lt;\path\to\users.htpasswd&gt; &lt;username&gt; &lt;password&gt;</pre><p class="simpara">
								The command generates a hashed version of the password.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-terminal">&gt; htpasswd.exe -c -B -b users.htpasswd &lt;username&gt; &lt;password&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">Adding password for user user1</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Continue to add or update credentials to the file:
							</p><pre class="programlisting language-terminal">&gt; htpasswd.exe -b &lt;\path\to\users.htpasswd&gt; &lt;username&gt; &lt;password&gt;</pre></li></ol></div></section></section><section class="section" id="identity-provider-creating-htpasswd-secret_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.4. Creating the htpasswd secret</h3></div></div></div><p>
					To use the htpasswd identity provider, you must define a secret that contains the htpasswd user file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an htpasswd file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object that contains the htpasswd users file:
						</p><pre class="programlisting language-terminal">$ oc create secret generic htpass-secret --from-file=htpasswd=&lt;path_to_users.htpasswd&gt; -n openshift-config <span id="CO11-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO11-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The secret key containing the users file for the <code class="literal">--from-file</code> argument must be named <code class="literal">htpasswd</code>, as shown in the above command.
								</div></dd></dl></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: htpass-secret
  namespace: openshift-config
type: Opaque
data:
  htpasswd: &lt;base64_encoded_htpasswd_file_contents&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-htpasswd-CR_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.5. Sample htpasswd CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for an htpasswd identity provider.
				</p><div class="formalpara"><p class="title"><strong>htpasswd CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: my_htpasswd_provider <span id="CO12-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO12-2"><!--Empty--></span><span class="callout">2</span>
    type: HTPasswd
    htpasswd:
      fileData:
        name: htpass-secret <span id="CO12-3"><!--Empty--></span><span class="callout">3</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO12-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to provider user names to form an identity name.
						</div></dd><dt><a href="#CO12-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO12-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							An existing secret containing a file generated using <a class="link" href="http://httpd.apache.org/docs/2.4/programs/htpasswd.html"><code class="literal">htpasswd</code></a>.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.6. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section><section class="section" id="identity-provider-htpasswd-update-users_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.7. Updating users for an htpasswd identity provider</h3></div></div></div><p>
					You can add or remove users from an existing htpasswd identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a <code class="literal">Secret</code> object that contains the htpasswd user file. This procedure assumes that it is named <code class="literal">htpass-secret</code>.
						</li><li class="listitem">
							You have configured an htpasswd identity provider. This procedure assumes that it is named <code class="literal">my_htpasswd_provider</code>.
						</li><li class="listitem">
							You have access to the <code class="literal">htpasswd</code> utility. On Red Hat Enterprise Linux this is available by installing the <code class="literal">httpd-tools</code> package.
						</li><li class="listitem">
							You have cluster administrator privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Retrieve the htpasswd file from the <code class="literal">htpass-secret</code> <code class="literal">Secret</code> object and save the file to your file system:
						</p><pre class="programlisting language-terminal">$ oc get secret htpass-secret -ojsonpath={.data.htpasswd} -n openshift-config | base64 --decode &gt; users.htpasswd</pre></li><li class="listitem"><p class="simpara">
							Add or remove users from the <code class="literal">users.htpasswd</code> file.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To add a new user:
								</p><pre class="programlisting language-terminal">$ htpasswd -bB users.htpasswd &lt;username&gt; &lt;password&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">Adding password for user &lt;username&gt;</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									To remove an existing user:
								</p><pre class="programlisting language-terminal">$ htpasswd -D users.htpasswd &lt;username&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">Deleting password for user &lt;username&gt;</pre>

									</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Replace the <code class="literal">htpass-secret</code> <code class="literal">Secret</code> object with the updated users in the <code class="literal">users.htpasswd</code> file:
						</p><pre class="programlisting language-terminal">$ oc create secret generic htpass-secret --from-file=htpasswd=users.htpasswd --dry-run=client -o yaml -n openshift-config | oc replace -f -</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to replace the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: htpass-secret
  namespace: openshift-config
type: Opaque
data:
  htpasswd: &lt;base64_encoded_htpasswd_file_contents&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							If you removed one or more users, you must additionally remove existing resources for each user.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Delete the <code class="literal">User</code> object:
								</p><pre class="programlisting language-terminal">$ oc delete user &lt;username&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">user.user.openshift.io "&lt;username&gt;" deleted</pre>

									</p></div><p class="simpara">
									Be sure to remove the user, otherwise the user can continue using their token as long as it has not expired.
								</p></li><li class="listitem"><p class="simpara">
									Delete the <code class="literal">Identity</code> object for the user:
								</p><pre class="programlisting language-terminal">$ oc delete identity my_htpasswd_provider:&lt;username&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">identity.user.openshift.io "my_htpasswd_provider:&lt;username&gt;" deleted</pre>

									</p></div></li></ol></div></li></ol></div></section><section class="section" id="identity-provider-configuring-using-the-web-console_configuring-htpasswd-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.1.8. Configuring identity providers using the web console</h3></div></div></div><p>
					Configure your identity provider (IDP) through the web console instead of the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must be logged in to the web console as a cluster administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Cluster Settings</strong></span>.
						</li><li class="listitem">
							Under the <span class="strong strong"><strong>Configuration</strong></span> tab, click <span class="strong strong"><strong>OAuth</strong></span>.
						</li><li class="listitem">
							Under the <span class="strong strong"><strong>Identity Providers</strong></span> section, select your identity provider from the <span class="strong strong"><strong>Add</strong></span> drop-down menu.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can specify multiple IDPs through the web console without overwriting existing IDPs.
					</p></div></div></section></section><section class="section" id="configuring-keystone-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.2. Configuring a Keystone identity provider</h2></div></div></div><p>
				Configure the <code class="literal">keystone</code> identity provider to integrate your OpenShift Container Platform cluster with Keystone to enable shared authentication with an OpenStack Keystone v3 server configured to store users in an internal database. This configuration allows users to log in to OpenShift Container Platform with their Keystone credentials.
			</p><section class="section" id="identity-provider-overview_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-keystone-about_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.2. About Keystone authentication</h3></div></div></div><p>
					<a class="link" href="http://docs.openstack.org/developer/keystone/">Keystone</a> is an OpenStack project that provides identity, token, catalog, and policy services.
				</p><p>
					You can configure the integration with Keystone so that the new OpenShift Container Platform users are based on either the Keystone user names or unique Keystone IDs. With both methods, users log in by entering their Keystone user name and password. Basing the OpenShift Container Platform users on the Keystone ID is more secure because if you delete a Keystone user and create a new Keystone user with that user name, the new user might have access to the old user’s resources.
				</p></section><section class="section" id="identity-provider-creating-secret-tls_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.3. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object that contains the key and certificate by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret tls &lt;secret_name&gt; --key=key.pem --cert=cert.pem -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: kubernetes.io/tls
data:
  tls.crt: &lt;base64_encoded_cert&gt;
  tls.key: &lt;base64_encoded_key&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.4. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-keystone-CR_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.5. Sample Keystone CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a Keystone identity provider.
				</p><div class="formalpara"><p class="title"><strong>Keystone CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: keystoneidp <span id="CO13-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO13-2"><!--Empty--></span><span class="callout">2</span>
    type: Keystone
    keystone:
      domainName: default <span id="CO13-3"><!--Empty--></span><span class="callout">3</span>
      url: https://keystone.example.com:5000 <span id="CO13-4"><!--Empty--></span><span class="callout">4</span>
      ca: <span id="CO13-5"><!--Empty--></span><span class="callout">5</span>
        name: ca-config-map
      tlsClientCert: <span id="CO13-6"><!--Empty--></span><span class="callout">6</span>
        name: client-cert-secret
      tlsClientKey: <span id="CO13-7"><!--Empty--></span><span class="callout">7</span>
        name: client-key-secret</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO13-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to provider user names to form an identity name.
						</div></dd><dt><a href="#CO13-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO13-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Keystone domain name. In Keystone, usernames are domain-specific. Only a single domain is supported.
						</div></dd><dt><a href="#CO13-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The URL to use to connect to the Keystone server (required). This must use https.
						</div></dd><dt><a href="#CO13-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL.
						</div></dd><dt><a href="#CO13-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client certificate to present when making requests to the configured URL.
						</div></dd><dt><a href="#CO13-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the key for the client certificate. Required if <code class="literal">tlsClientCert</code> is specified.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-keystone-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.2.6. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section></section><section class="section" id="configuring-ldap-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.3. Configuring an LDAP identity provider</h2></div></div></div><p>
				Configure the <code class="literal">ldap</code> identity provider to validate user names and passwords against an LDAPv3 server, using simple bind authentication.
			</p><section class="section" id="identity-provider-overview_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-about-ldap_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.2. About LDAP authentication</h3></div></div></div><p>
					During authentication, the LDAP directory is searched for an entry that matches the provided user name. If a single unique match is found, a simple bind is attempted using the distinguished name (DN) of the entry plus the provided password.
				</p><p>
					These are the steps taken:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Generate a search filter by combining the attribute and filter in the configured <code class="literal">url</code> with the user-provided user name.
						</li><li class="listitem">
							Search the directory using the generated filter. If the search does not return exactly one entry, deny access.
						</li><li class="listitem">
							Attempt to bind to the LDAP server using the DN of the entry retrieved from the search, and the user-provided password.
						</li><li class="listitem">
							If the bind is unsuccessful, deny access.
						</li><li class="listitem">
							If the bind is successful, build an identity using the configured attributes as the identity, email address, display name, and preferred user name.
						</li></ol></div><p>
					The configured <code class="literal">url</code> is an RFC 2255 URL, which specifies the LDAP host and search parameters to use. The syntax of the URL is:
				</p><pre class="screen">ldap://host:port/basedn?attribute?scope?filter</pre><p>
					For this URL:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032743101232" scope="col">URL component</th><th align="left" valign="top" id="idm140032743246528" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">ldap</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									For regular LDAP, use the string <code class="literal">ldap</code>. For secure LDAP (LDAPS), use <code class="literal">ldaps</code> instead.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">host:port</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									The name and port of the LDAP server. Defaults to <code class="literal">localhost:389</code> for ldap and <code class="literal">localhost:636</code> for LDAPS.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">basedn</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									The DN of the branch of the directory where all searches should start from. At the very least, this must be the top of your directory tree, but it could also specify a subtree in the directory.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">attribute</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									The attribute to search for. Although RFC 2255 allows a comma-separated list of attributes, only the first attribute will be used, no matter how many are provided. If no attributes are provided, the default is to use <code class="literal">uid</code>. It is recommended to choose an attribute that will be unique across all entries in the subtree you will be using.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">scope</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									The scope of the search. Can be either <code class="literal">one</code> or <code class="literal">sub</code>. If the scope is not provided, the default is to use a scope of <code class="literal">sub</code>.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032743101232"> <p>
									<code class="literal">filter</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032743246528"> <p>
									A valid LDAP search filter. If not provided, defaults to <code class="literal">(objectClass=*)</code>
								</p>
								 </td></tr></tbody></table></div><p>
					When doing searches, the attribute, filter, and provided user name are combined to create a search filter that looks like:
				</p><pre class="screen">(&amp;(&lt;filter&gt;)(&lt;attribute&gt;=&lt;username&gt;))</pre><p>
					For example, consider a URL of:
				</p><pre class="screen">ldap://ldap.example.com/o=Acme?cn?sub?(enabled=true)</pre><p>
					When a client attempts to connect using a user name of <code class="literal">bob</code>, the resulting search filter will be <code class="literal">(&amp;(enabled=true)(cn=bob))</code>.
				</p><p>
					If the LDAP directory requires authentication to search, specify a <code class="literal">bindDN</code> and <code class="literal">bindPassword</code> to use to perform the entry search.
				</p></section><section class="section" id="identity-provider-creating-ldap-secret_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.3. Creating the LDAP secret</h3></div></div></div><p>
					To use the identity provider, you must define an OpenShift Container Platform <code class="literal">Secret</code> object that contains the <code class="literal">bindPassword</code> field.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object that contains the <code class="literal">bindPassword</code> field:
						</p><pre class="programlisting language-terminal">$ oc create secret generic ldap-secret --from-literal=bindPassword=&lt;secret&gt; -n openshift-config <span id="CO14-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO14-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The secret key containing the bindPassword for the <code class="literal">--from-literal</code> argument must be called <code class="literal">bindPassword</code>.
								</div></dd></dl></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: ldap-secret
  namespace: openshift-config
type: Opaque
data:
  bindPassword: &lt;base64_encoded_bind_password&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.4. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-ldap-CR_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.5. Sample LDAP CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for an LDAP identity provider.
				</p><div class="formalpara"><p class="title"><strong>LDAP CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: ldapidp <span id="CO15-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO15-2"><!--Empty--></span><span class="callout">2</span>
    type: LDAP
    ldap:
      attributes:
        id: <span id="CO15-3"><!--Empty--></span><span class="callout">3</span>
        - dn
        email: <span id="CO15-4"><!--Empty--></span><span class="callout">4</span>
        - mail
        name: <span id="CO15-5"><!--Empty--></span><span class="callout">5</span>
        - cn
        preferredUsername: <span id="CO15-6"><!--Empty--></span><span class="callout">6</span>
        - uid
      bindDN: "" <span id="CO15-7"><!--Empty--></span><span class="callout">7</span>
      bindPassword: <span id="CO15-8"><!--Empty--></span><span class="callout">8</span>
        name: ldap-secret
      ca: <span id="CO15-9"><!--Empty--></span><span class="callout">9</span>
        name: ca-config-map
      insecure: false <span id="CO15-10"><!--Empty--></span><span class="callout">10</span>
      url: "ldaps://ldaps.example.com/ou=users,dc=acme,dc=com?uid" <span id="CO15-11"><!--Empty--></span><span class="callout">11</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO15-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the returned user ID to form an identity name.
						</div></dd><dt><a href="#CO15-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO15-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							List of attributes to use as the identity. First non-empty attribute is used. At least one attribute is required. If none of the listed attribute have a value, authentication fails. Defined attributes are retrieved as raw, allowing for binary values to be used.
						</div></dd><dt><a href="#CO15-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							List of attributes to use as the email address. First non-empty attribute is used.
						</div></dd><dt><a href="#CO15-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							List of attributes to use as the display name. First non-empty attribute is used.
						</div></dd><dt><a href="#CO15-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							List of attributes to use as the preferred user name when provisioning a user for this identity. First non-empty attribute is used.
						</div></dd><dt><a href="#CO15-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							Optional DN to use to bind during the search phase. Must be set if <code class="literal">bindPassword</code> is defined.
						</div></dd><dt><a href="#CO15-8"><span class="callout">8</span></a> </dt><dd><div class="para">
							Optional reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the bind password. Must be set if <code class="literal">bindDN</code> is defined.
						</div></dd><dt><a href="#CO15-9"><span class="callout">9</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL. Only used when <code class="literal">insecure</code> is <code class="literal">false</code>.
						</div></dd><dt><a href="#CO15-10"><span class="callout">10</span></a> </dt><dd><div class="para">
							When <code class="literal">true</code>, no TLS connection is made to the server. When <code class="literal">false</code>, <code class="literal">ldaps://</code> URLs connect using TLS, and <code class="literal">ldap://</code> URLs are upgraded to TLS. This must be set to <code class="literal">false</code> when <code class="literal">ldaps://</code> URLs are in use, as these URLs always attempt to connect using TLS.
						</div></dd><dt><a href="#CO15-11"><span class="callout">11</span></a> </dt><dd><div class="para">
							An RFC 2255 URL which specifies the LDAP host and search parameters to use.
						</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To whitelist users for an LDAP integration, use the <code class="literal">lookup</code> mapping method. Before a login from LDAP would be allowed, a cluster administrator must create an <code class="literal">Identity</code> object and a <code class="literal">User</code> object for each LDAP user.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-ldap-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.3.6. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section></section><section class="section" id="configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.4. Configuring a basic authentication identity provider</h2></div></div></div><p>
				Configure the <code class="literal">basic-authentication</code> identity provider for users to log in to OpenShift Container Platform with credentials validated against a remote identity provider. Basic authentication is a generic back-end integration mechanism.
			</p><section class="section" id="identity-provider-overview_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-about-basic-authentication_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.2. About basic authentication</h3></div></div></div><p>
					Basic authentication is a generic back-end integration mechanism that allows users to log in to OpenShift Container Platform with credentials validated against a remote identity provider.
				</p><p>
					Because basic authentication is generic, you can use this identity provider for advanced authentication configurations.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Basic authentication must use an HTTPS connection to the remote server to prevent potential snooping of the user ID and password and man-in-the-middle attacks.
					</p></div></div><p>
					With basic authentication configured, users send their user name and password to OpenShift Container Platform, which then validates those credentials against a remote server by making a server-to-server request, passing the credentials as a basic authentication header. This requires users to send their credentials to OpenShift Container Platform during login.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This only works for user name/password login mechanisms, and OpenShift Container Platform must be able to make network requests to the remote authentication server.
					</p></div></div><p>
					User names and passwords are validated against a remote URL that is protected by basic authentication and returns JSON.
				</p><p>
					A <code class="literal">401</code> response indicates failed authentication.
				</p><p>
					A non-<code class="literal">200</code> status, or the presence of a non-empty "error" key, indicates an error:
				</p><pre class="programlisting language-terminal">{"error":"Error message"}</pre><p>
					A <code class="literal">200</code> status with a <code class="literal">sub</code> (subject) key indicates success:
				</p><pre class="programlisting language-terminal">{"sub":"userid"} <span id="CO16-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO16-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The subject must be unique to the authenticated user and must not be able to be modified.
						</div></dd></dl></div><p>
					A successful response can optionally provide additional data, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							A display name using the <code class="literal">name</code> key. For example:
						</p><pre class="programlisting language-terminal">{"sub":"userid", "name": "User Name", ...}</pre></li><li class="listitem"><p class="simpara">
							An email address using the <code class="literal">email</code> key. For example:
						</p><pre class="programlisting language-terminal">{"sub":"userid", "email":"user@example.com", ...}</pre></li><li class="listitem"><p class="simpara">
							A preferred user name using the <code class="literal">preferred_username</code> key. This is useful when the unique, unchangeable subject is a database key or UID, and a more human-readable name exists. This is used as a hint when provisioning the OpenShift Container Platform user for the authenticated identity. For example:
						</p><pre class="programlisting language-terminal">{"sub":"014fbff9a07c", "preferred_username":"bob", ...}</pre></li></ul></div></section><section class="section" id="identity-provider-creating-secret-tls_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.3. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object that contains the key and certificate by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret tls &lt;secret_name&gt; --key=key.pem --cert=cert.pem -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: kubernetes.io/tls
data:
  tls.crt: &lt;base64_encoded_cert&gt;
  tls.key: &lt;base64_encoded_key&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.4. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-basic-authentication-CR_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.5. Sample basic authentication CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a basic authentication identity provider.
				</p><div class="formalpara"><p class="title"><strong>Basic authentication CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: basicidp <span id="CO17-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO17-2"><!--Empty--></span><span class="callout">2</span>
    type: BasicAuth
    basicAuth:
      url: https://www.example.com/remote-idp <span id="CO17-3"><!--Empty--></span><span class="callout">3</span>
      ca: <span id="CO17-4"><!--Empty--></span><span class="callout">4</span>
        name: ca-config-map
      tlsClientCert: <span id="CO17-5"><!--Empty--></span><span class="callout">5</span>
        name: client-cert-secret
      tlsClientKey: <span id="CO17-6"><!--Empty--></span><span class="callout">6</span>
        name: client-key-secret</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO17-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the returned user ID to form an identity name.
						</div></dd><dt><a href="#CO17-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO17-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							URL accepting credentials in Basic authentication headers.
						</div></dd><dt><a href="#CO17-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL.
						</div></dd><dt><a href="#CO17-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client certificate to present when making requests to the configured URL.
						</div></dd><dt><a href="#CO17-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the key for the client certificate. Required if <code class="literal">tlsClientCert</code> is specified.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.6. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section><section class="section" id="example-apache-httpd-configuration_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.7. Example Apache HTTPD configuration for basic identity providers</h3></div></div></div><p>
					The basic identify provider (IDP) configuration in OpenShift Container Platform 4 requires that the IDP server respond with JSON for success and failures. You can use CGI scripting in Apache HTTPD to accomplish this. This section provides examples.
				</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">/etc/httpd/conf.d/login.conf</code></strong></p><p>
						
<pre class="screen">&lt;VirtualHost *:443&gt;
  # CGI Scripts in here
  DocumentRoot /var/www/cgi-bin

  # SSL Directives
  SSLEngine on
  SSLCipherSuite PROFILE=SYSTEM
  SSLProxyCipherSuite PROFILE=SYSTEM
  SSLCertificateFile /etc/pki/tls/certs/localhost.crt
  SSLCertificateKeyFile /etc/pki/tls/private/localhost.key

  # Configure HTTPD to execute scripts
  ScriptAlias /basic /var/www/cgi-bin

  # Handles a failed login attempt
  ErrorDocument 401 /basic/fail.cgi

  # Handles authentication
  &lt;Location /basic/login.cgi&gt;
    AuthType Basic
    AuthName "Please Log In"
    AuthBasicProvider file
    AuthUserFile /etc/httpd/conf/passwords
    Require valid-user
  &lt;/Location&gt;
&lt;/VirtualHost&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example <code class="literal">/var/www/cgi-bin/login.cgi</code></strong></p><p>
						
<pre class="screen">#!/bin/bash
echo "Content-Type: application/json"
echo ""
echo '{"sub":"userid", "name":"'$REMOTE_USER'"}'
exit 0</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example <code class="literal">/var/www/cgi-bin/fail.cgi</code></strong></p><p>
						
<pre class="screen">#!/bin/bash
echo "Content-Type: application/json"
echo ""
echo '{"error": "Login failure"}'
exit 0</pre>

					</p></div><section class="section" id="file-requirements"><div class="titlepage"><div><div><h4 class="title">7.4.7.1. File requirements</h4></div></div></div><p>
						These are the requirements for the files you create on an Apache HTTPD web server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">login.cgi</code> and <code class="literal">fail.cgi</code> must be executable (<code class="literal">chmod +x</code>).
							</li><li class="listitem">
								<code class="literal">login.cgi</code> and <code class="literal">fail.cgi</code> must have proper SELinux contexts if SELinux is enabled: <code class="literal">restorecon -RFv /var/www/cgi-bin</code>, or ensure that the context is <code class="literal">httpd_sys_script_exec_t</code> using <code class="literal">ls -laZ</code>.
							</li><li class="listitem">
								<code class="literal">login.cgi</code> is only executed if your user successfully logs in per <code class="literal">Require and Auth</code> directives.
							</li><li class="listitem">
								<code class="literal">fail.cgi</code> is executed if the user fails to log in, resulting in an <code class="literal">HTTP 401</code> response.
							</li></ul></div></section></section><section class="section" id="identity-provider-basic-authentication-troubleshooting_configuring-basic-authentication-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.4.8. Basic authentication troubleshooting</h3></div></div></div><p>
					The most common issue relates to network connectivity to the backend server. For simple debugging, run <code class="literal">curl</code> commands on the master. To test for a successful login, replace the <code class="literal">&lt;user&gt;</code> and <code class="literal">&lt;password&gt;</code> in the following example command with valid credentials. To test an invalid login, replace them with false credentials.
				</p><pre class="programlisting language-terminal">$ curl --cacert /path/to/ca.crt --cert /path/to/client.crt --key /path/to/client.key -u &lt;user&gt;:&lt;password&gt; -v https://www.example.com/remote-idp</pre><p>
					<span class="strong strong"><strong>Successful responses</strong></span>
				</p><p>
					A <code class="literal">200</code> status with a <code class="literal">sub</code> (subject) key indicates success:
				</p><pre class="programlisting language-terminal">{"sub":"userid"}</pre><p>
					The subject must be unique to the authenticated user, and must not be able to be modified.
				</p><p>
					A successful response can optionally provide additional data, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							A display name using the <code class="literal">name</code> key:
						</p><pre class="programlisting language-terminal">{"sub":"userid", "name": "User Name", ...}</pre></li><li class="listitem"><p class="simpara">
							An email address using the <code class="literal">email</code> key:
						</p><pre class="programlisting language-terminal">{"sub":"userid", "email":"user@example.com", ...}</pre></li><li class="listitem"><p class="simpara">
							A preferred user name using the <code class="literal">preferred_username</code> key:
						</p><pre class="programlisting language-terminal">{"sub":"014fbff9a07c", "preferred_username":"bob", ...}</pre><p class="simpara">
							The <code class="literal">preferred_username</code> key is useful when the unique, unchangeable subject is a database key or UID, and a more human-readable name exists. This is used as a hint when provisioning the OpenShift Container Platform user for the authenticated identity.
						</p></li></ul></div><p>
					<span class="strong strong"><strong>Failed responses</strong></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A <code class="literal">401</code> response indicates failed authentication.
						</li><li class="listitem">
							A non-<code class="literal">200</code> status or the presence of a non-empty "error" key indicates an error: <code class="literal">{"error":"Error message"}</code>
						</li></ul></div></section></section><section class="section" id="configuring-request-header-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.5. Configuring a request header identity provider</h2></div></div></div><p>
				Configure the <code class="literal">request-header</code> identity provider to identify users from request header values, such as <code class="literal">X-Remote-User</code>. It is typically used in combination with an authenticating proxy, which sets the request header value.
			</p><section class="section" id="identity-provider-overview_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.5.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-about-request-header_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.5.2. About request header authentication</h3></div></div></div><p>
					A request header identity provider identifies users from request header values, such as <code class="literal">X-Remote-User</code>. It is typically used in combination with an authenticating proxy, which sets the request header value. The request header identity provider cannot be combined with other identity providers that use direct password logins, such as htpasswd, Keystone, LDAP or basic authentication.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can also use the request header identity provider for advanced configurations such as the community-supported <a class="link" href="https://github.com/openshift/request-header-saml-service-provider">SAML authentication</a>. Note that this solution is not supported by Red Hat.
					</p></div></div><p>
					For users to authenticate using this identity provider, they must access <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code> (and subpaths) via an authenticating proxy. To accomplish this, configure the OAuth server to redirect unauthenticated requests for OAuth tokens to the proxy endpoint that proxies to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code>.
				</p><p>
					To redirect unauthenticated requests from clients expecting browser-based login flows:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Set the <code class="literal">provider.loginURL</code> parameter to the authenticating proxy URL that will authenticate interactive clients and then proxy the request to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code>.
						</li></ul></div><p>
					To redirect unauthenticated requests from clients expecting <code class="literal">WWW-Authenticate</code> challenges:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Set the <code class="literal">provider.challengeURL</code> parameter to the authenticating proxy URL that will authenticate clients expecting <code class="literal">WWW-Authenticate</code> challenges and then proxy the request to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code>.
						</li></ul></div><p>
					The <code class="literal">provider.challengeURL</code> and <code class="literal">provider.loginURL</code> parameters can include the following tokens in the query portion of the URL:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">${url}</code> is replaced with the current URL, escaped to be safe in a query parameter.
						</p><p class="simpara">
							For example: <code class="literal">https://www.example.com/sso-login?then=${url}</code>
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">${query}</code> is replaced with the current query string, unescaped.
						</p><p class="simpara">
							For example: <code class="literal">https://www.example.com/auth-proxy/oauth/authorize?${query}</code>
						</p></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						As of OpenShift Container Platform 4.1, your proxy must support mutual TLS.
					</p></div></div><section class="section" id="sspi-windows_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h4 class="title">7.5.2.1. SSPI connection support on Microsoft Windows</h4></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Using SSPI connection support on Microsoft Windows is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
						</p><p>
							For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
						</p></div></div><p>
						The OpenShift CLI (<code class="literal">oc</code>) supports the Security Support Provider Interface (SSPI) to allow for SSO flows on Microsft Windows. If you use the request header identity provider with a GSSAPI-enabled proxy to connect an Active Directory server to OpenShift Container Platform, users can automatically authenticate to OpenShift Container Platform by using the <code class="literal">oc</code> command line interface from a domain-joined Microsoft Windows computer.
					</p></section></section><section class="section" id="identity-provider-creating-configmap_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.5.3. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-request-header-CR_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.5.4. Sample request header CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a request header identity provider.
				</p><div class="formalpara"><p class="title"><strong>Request header CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: requestheaderidp <span id="CO18-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO18-2"><!--Empty--></span><span class="callout">2</span>
    type: RequestHeader
    requestHeader:
      challengeURL: "https://www.example.com/challenging-proxy/oauth/authorize?${query}" <span id="CO18-3"><!--Empty--></span><span class="callout">3</span>
      loginURL: "https://www.example.com/login-proxy/oauth/authorize?${query}" <span id="CO18-4"><!--Empty--></span><span class="callout">4</span>
      ca: <span id="CO18-5"><!--Empty--></span><span class="callout">5</span>
        name: ca-config-map
      clientCommonNames: <span id="CO18-6"><!--Empty--></span><span class="callout">6</span>
      - my-auth-proxy
      headers: <span id="CO18-7"><!--Empty--></span><span class="callout">7</span>
      - X-Remote-User
      - SSO-User
      emailHeaders: <span id="CO18-8"><!--Empty--></span><span class="callout">8</span>
      - X-Remote-User-Email
      nameHeaders: <span id="CO18-9"><!--Empty--></span><span class="callout">9</span>
      - X-Remote-User-Display-Name
      preferredUsernameHeaders: <span id="CO18-10"><!--Empty--></span><span class="callout">10</span>
      - X-Remote-User-Login</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO18-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the user name in the request header to form an identity name.
						</div></dd><dt><a href="#CO18-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO18-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Optional: URL to redirect unauthenticated <code class="literal">/oauth/authorize</code> requests to, that will authenticate browser-based clients and then proxy their request to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code>. The URL that proxies to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code> must end with <code class="literal">/authorize</code> (with no trailing slash), and also proxy subpaths, in order for OAuth approval flows to work properly. <code class="literal">${url}</code> is replaced with the current URL, escaped to be safe in a query parameter. <code class="literal">${query}</code> is replaced with the current query string. If this attribute is not defined, then <code class="literal">loginURL</code> must be used.
						</div></dd><dt><a href="#CO18-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Optional: URL to redirect unauthenticated <code class="literal">/oauth/authorize</code> requests to, that will authenticate clients which expect <code class="literal">WWW-Authenticate</code> challenges, and then proxy them to <code class="literal">https://<span class="emphasis"><em>&lt;namespace_route&gt;</em></span>/oauth/authorize</code>. <code class="literal">${url}</code> is replaced with the current URL, escaped to be safe in a query parameter. <code class="literal">${query}</code> is replaced with the current query string. If this attribute is not defined, then <code class="literal">challengeURL</code> must be used.
						</div></dd><dt><a href="#CO18-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing a PEM-encoded certificate bundle. Used as a trust anchor to validate the TLS certificates presented by the remote server.
						</div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								As of OpenShift Container Platform 4.1, the <code class="literal">ca</code> field is required for this identity provider. This means that your proxy must support mutual TLS.
							</p></div></div></dd><dt><a href="#CO18-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							Optional: list of common names (<code class="literal">cn</code>). If set, a valid client certificate with a Common Name (<code class="literal">cn</code>) in the specified list must be presented before the request headers are checked for user names. If empty, any Common Name is allowed. Can only be used in combination with <code class="literal">ca</code>.
						</div></dd><dt><a href="#CO18-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							Header names to check, in order, for the user identity. The first header containing a value is used as the identity. Required, case-insensitive.
						</div></dd><dt><a href="#CO18-8"><span class="callout">8</span></a> </dt><dd><div class="para">
							Header names to check, in order, for an email address. The first header containing a value is used as the email address. Optional, case-insensitive.
						</div></dd><dt><a href="#CO18-9"><span class="callout">9</span></a> </dt><dd><div class="para">
							Header names to check, in order, for a display name. The first header containing a value is used as the display name. Optional, case-insensitive.
						</div></dd><dt><a href="#CO18-10"><span class="callout">10</span></a> </dt><dd><div class="para">
							Header names to check, in order, for a preferred user name, if different than the immutable identity determined from the headers specified in <code class="literal">headers</code>. The first header containing a value is used as the preferred user name when provisioning. Optional, case-insensitive.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-request-header-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.5.5. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section><section class="section" id="example-apache-auth-config-using-request-header"><div class="titlepage"><div><div><h3 class="title">7.5.6. Example Apache authentication configuration using request header</h3></div></div></div><p>
					This example configures an Apache authentication proxy for the OpenShift Container Platform using the request header identity provider.
				</p><h5 id="identity-provider-apache-custom-proxy-configuration_configuring-request-header-identity-provider">Custom proxy configuration</h5><p>
					Using the <code class="literal">mod_auth_gssapi</code> module is a popular way to configure the Apache authentication proxy using the request header identity provider; however, it is not required. Other proxies can easily be used if the following requirements are met:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Block the <code class="literal">X-Remote-User</code> header from client requests to prevent spoofing.
						</li><li class="listitem">
							Enforce client certificate authentication in the <code class="literal">RequestHeaderIdentityProvider</code> configuration.
						</li><li class="listitem">
							Require the <code class="literal">X-Csrf-Token</code> header be set for all authentication requests using the challenge flow.
						</li><li class="listitem">
							Make sure only the <code class="literal">/oauth/authorize</code> endpoint and its subpaths are proxied; redirects must be rewritten to allow the backend server to send the client to the correct location.
						</li><li class="listitem">
							The URL that proxies to <code class="literal">https://&lt;namespace_route&gt;/oauth/authorize</code> must end with <code class="literal">/authorize</code> with no trailing slash. For example, <code class="literal">https://proxy.example.com/login-proxy/authorize?…​</code> must proxy to <code class="literal">https://&lt;namespace_route&gt;/oauth/authorize?…​</code>.
						</li><li class="listitem">
							Subpaths of the URL that proxies to <code class="literal">https://&lt;namespace_route&gt;/oauth/authorize</code> must proxy to subpaths of <code class="literal">https://&lt;namespace_route&gt;/oauth/authorize</code>. For example, <code class="literal">https://proxy.example.com/login-proxy/authorize/approve?…​</code> must proxy to <code class="literal">https://&lt;namespace_route&gt;/oauth/authorize/approve?…​</code>.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">https://&lt;namespace_route&gt;</code> address is the route to the OAuth server and can be obtained by running <code class="literal">oc get route -n openshift-authentication</code>.
					</p></div></div><h5 id="identity-provider-configuring-apache-request-header_configuring-request-header-identity-provider">Configuring Apache authentication using request header</h5><p>
					This example uses the <code class="literal">mod_auth_gssapi</code> module to configure an Apache authentication proxy using the request header identity provider.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Obtain the <code class="literal">mod_auth_gssapi</code> module from the <a class="link" href="https://access.redhat.com/solutions/392003">Optional channel</a>. You must have the following packages installed on your local machine:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">httpd</code>
								</li><li class="listitem">
									<code class="literal">mod_ssl</code>
								</li><li class="listitem">
									<code class="literal">mod_session</code>
								</li><li class="listitem">
									<code class="literal">apr-util-openssl</code>
								</li><li class="listitem">
									<code class="literal">mod_auth_gssapi</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Generate a CA for validating requests that submit the trusted header. Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the CA. This is done by running:
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config <span id="CO19-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO19-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The CA must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
								</div></dd></dl></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li><li class="listitem">
							Generate a client certificate for the proxy. You can generate this certificate by using any x509 certificate tooling. The client certificate must be signed by the CA you generated for validating requests that submit the trusted header.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						This proxy uses a client certificate to connect to the OAuth server, which is configured to trust the <code class="literal">X-Remote-User</code> header.
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Create the certificate for the Apache configuration. The certificate that you specify as the <code class="literal">SSLProxyMachineCertificateFile</code> parameter value is the proxy’s client certificate that is used to authenticate the proxy to the server. It must use <code class="literal">TLS Web Client Authentication</code> as the extended key type.
						</li><li class="listitem"><p class="simpara">
							Create the Apache configuration. Use the following template to provide your required settings and values:
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Carefully review the template and customize its contents to fit your environment.
							</p></div></div><pre class="screen">LoadModule request_module modules/mod_request.so
LoadModule auth_gssapi_module modules/mod_auth_gssapi.so
# Some Apache configurations might require these modules.
# LoadModule auth_form_module modules/mod_auth_form.so
# LoadModule session_module modules/mod_session.so

# Nothing needs to be served over HTTP.  This virtual host simply redirects to
# HTTPS.
&lt;VirtualHost *:80&gt;
  DocumentRoot /var/www/html
  RewriteEngine              On
  RewriteRule     ^(.*)$     https://%{HTTP_HOST}$1 [R,L]
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
  # This needs to match the certificates you generated.  See the CN and X509v3
  # Subject Alternative Name in the output of:
  # openssl x509 -text -in /etc/pki/tls/certs/localhost.crt
  ServerName www.example.com

  DocumentRoot /var/www/html
  SSLEngine on
  SSLCertificateFile /etc/pki/tls/certs/localhost.crt
  SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
  SSLCACertificateFile /etc/pki/CA/certs/ca.crt

  SSLProxyEngine on
  SSLProxyCACertificateFile /etc/pki/CA/certs/ca.crt
  # It is critical to enforce client certificates. Otherwise, requests can
  # spoof the X-Remote-User header by accessing the /oauth/authorize endpoint
  # directly.
  SSLProxyMachineCertificateFile /etc/pki/tls/certs/authproxy.pem

  # To use the challenging-proxy, an X-Csrf-Token must be present.
  RewriteCond %{REQUEST_URI} ^/challenging-proxy
  RewriteCond %{HTTP:X-Csrf-Token} ^$ [NC]
  RewriteRule ^.* - [F,L]

  &lt;Location /challenging-proxy/oauth/authorize&gt;
      # Insert your backend server name/ip here.
      ProxyPass https://&lt;namespace_route&gt;/oauth/authorize
      AuthName "SSO Login"
      # For Kerberos
      AuthType GSSAPI
      Require valid-user
      RequestHeader set X-Remote-User %{REMOTE_USER}s

      GssapiCredStore keytab:/etc/httpd/protected/auth-proxy.keytab
      # Enable the following if you want to allow users to fallback
      # to password based authentication when they do not have a client
      # configured to perform kerberos authentication.
      GssapiBasicAuth On

      # For ldap:
      # AuthBasicProvider ldap
      # AuthLDAPURL "ldap://ldap.example.com:389/ou=People,dc=my-domain,dc=com?uid?sub?(objectClass=*)"
    &lt;/Location&gt;

    &lt;Location /login-proxy/oauth/authorize&gt;
    # Insert your backend server name/ip here.
    ProxyPass https://&lt;namespace_route&gt;/oauth/authorize

      AuthName "SSO Login"
      AuthType GSSAPI
      Require valid-user
      RequestHeader set X-Remote-User %{REMOTE_USER}s env=REMOTE_USER

      GssapiCredStore keytab:/etc/httpd/protected/auth-proxy.keytab
      # Enable the following if you want to allow users to fallback
      # to password based authentication when they do not have a client
      # configured to perform kerberos authentication.
      GssapiBasicAuth On

      ErrorDocument 401 /login.html
    &lt;/Location&gt;

&lt;/VirtualHost&gt;

RequestHeader unset X-Remote-User</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">https://&lt;namespace_route&gt;</code> address is the route to the OAuth server and can be obtained by running <code class="literal">oc get route -n openshift-authentication</code>.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Update the <code class="literal">identityProviders</code> stanza in the custom resource (CR):
						</p><pre class="programlisting language-yaml">identityProviders:
  - name: requestheaderidp
    type: RequestHeader
    requestHeader:
      challengeURL: "https://&lt;namespace_route&gt;/challenging-proxy/oauth/authorize?${query}"
      loginURL: "https://&lt;namespace_route&gt;/login-proxy/oauth/authorize?${query}"
      ca:
        name: ca-config-map
        clientCommonNames:
        - my-auth-proxy
        headers:
        - X-Remote-User</pre></li><li class="listitem"><p class="simpara">
							Verify the configuration.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Confirm that you can bypass the proxy by requesting a token by supplying the correct client certificate and header:
								</p><pre class="programlisting language-terminal"># curl -L -k -H "X-Remote-User: joe" \
   --cert /etc/pki/tls/certs/authproxy.pem \
   https://&lt;namespace_route&gt;/oauth/token/request</pre></li><li class="listitem"><p class="simpara">
									Confirm that requests that do not supply the client certificate fail by requesting a token without the certificate:
								</p><pre class="programlisting language-terminal"># curl -L -k -H "X-Remote-User: joe" \
   https://&lt;namespace_route&gt;/oauth/token/request</pre></li><li class="listitem"><p class="simpara">
									Confirm that the <code class="literal">challengeURL</code> redirect is active:
								</p><pre class="programlisting language-terminal"># curl -k -v -H 'X-Csrf-Token: 1' \
   https://&lt;namespace_route&gt;/oauth/authorize?client_id=openshift-challenging-client&amp;response_type=token</pre><p class="simpara">
									Copy the <code class="literal">challengeURL</code> redirect to use in the next step.
								</p></li><li class="listitem"><p class="simpara">
									Run this command to show a <code class="literal">401</code> response with a <code class="literal">WWW-Authenticate</code> basic challenge, a negotiate challenge, or both challenges:
								</p><pre class="programlisting language-terminal"># curl -k -v -H 'X-Csrf-Token: 1' \
   &lt;challengeURL_redirect + query&gt;</pre></li><li class="listitem"><p class="simpara">
									Test logging in to the OpenShift CLI (<code class="literal">oc</code>) with and without using a Kerberos ticket:
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											If you generated a Kerberos ticket by using <code class="literal">kinit</code>, destroy it:
										</p><pre class="programlisting language-terminal"># kdestroy -c cache_name <span id="CO20-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO20-1"><span class="callout">1</span></a> </dt><dd><div class="para">
													Make sure to provide the name of your Kerberos cache.
												</div></dd></dl></div></li><li class="listitem"><p class="simpara">
											Log in to the <code class="literal">oc</code> tool by using your Kerberos credentials:
										</p><pre class="programlisting language-terminal"># oc login -u &lt;username&gt;</pre><p class="simpara">
											Enter your Kerberos password at the prompt.
										</p></li><li class="listitem"><p class="simpara">
											Log out of the <code class="literal">oc</code> tool:
										</p><pre class="programlisting language-terminal"># oc logout</pre></li><li class="listitem"><p class="simpara">
											Use your Kerberos credentials to get a ticket:
										</p><pre class="programlisting language-terminal"># kinit</pre><p class="simpara">
											Enter your Kerberos user name and password at the prompt.
										</p></li><li class="listitem"><p class="simpara">
											Confirm that you can log in to the <code class="literal">oc</code> tool:
										</p><pre class="programlisting language-terminal"># oc login</pre><p class="simpara">
											If your configuration is correct, you are logged in without entering separate credentials.
										</p></li></ol></div></li></ol></div></li></ol></div></section></section><section class="section" id="configuring-github-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.6. Configuring a GitHub or GitHub Enterprise identity provider</h2></div></div></div><p>
				Configure the <code class="literal">github</code> identity provider to validate user names and passwords against GitHub or GitHub Enterprise’s OAuth authentication server. OAuth facilitates a token exchange flow between OpenShift Container Platform and GitHub or GitHub Enterprise.
			</p><p>
				You can use the GitHub integration to connect to either GitHub or GitHub Enterprise. For GitHub Enterprise integrations, you must provide the <code class="literal">hostname</code> of your instance and can optionally provide a <code class="literal">ca</code> certificate bundle to use in requests to the server.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The following steps apply to both GitHub and GitHub Enterprise unless noted.
				</p></div></div><section class="section" id="identity-provider-overview_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-github-about_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.2. About GitHub authentication</h3></div></div></div><p>
					Configuring <a class="link" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/authorizing-oauth-apps">GitHub authentication</a> allows users to log in to OpenShift Container Platform with their GitHub credentials. To prevent anyone with any GitHub user ID from logging in to your OpenShift Container Platform cluster, you can restrict access to only those in specific GitHub organizations.
				</p></section><section class="section" id="identity-provider-registering-github_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.3. Registering a GitHub application</h3></div></div></div><p>
					To use GitHub or GitHub Enterprise as an identity provider, you must register an application to use.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Register an application on GitHub:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For GitHub, click <a class="link" href="https://github.com/settings/profile"><span class="strong strong"><strong>Settings</strong></span></a> → <a class="link" href="https://github.com/settings/apps"><span class="strong strong"><strong>Developer settings</strong></span></a> → <a class="link" href="https://github.com/settings/developers"><span class="strong strong"><strong>OAuth Apps</strong></span></a> → <a class="link" href="https://github.com/settings/applications/new"><span class="strong strong"><strong>Register a new OAuth application</strong></span></a>.
								</li><li class="listitem">
									For GitHub Enterprise, go to your GitHub Enterprise home page and then click <span class="strong strong"><strong>Settings → Developer settings → Register a new application</strong></span>.
								</li></ul></div></li><li class="listitem">
							Enter an application name, for example <code class="literal">My OpenShift Install</code>.
						</li><li class="listitem">
							Enter a homepage URL, such as <code class="literal">https://oauth-openshift.apps.&lt;cluster-name&gt;.&lt;cluster-domain&gt;</code>.
						</li><li class="listitem">
							Optional: Enter an application description.
						</li><li class="listitem"><p class="simpara">
							Enter the authorization callback URL, where the end of the URL contains the identity provider <code class="literal">name</code>:
						</p><pre class="screen">https://oauth-openshift.apps.&lt;cluster-name&gt;.&lt;cluster-domain&gt;/oauth2callback/&lt;idp-provider-name&gt;</pre><p class="simpara">
							For example:
						</p><pre class="screen">https://oauth-openshift.apps.openshift-cluster.example.com/oauth2callback/github</pre></li><li class="listitem">
							Click <span class="strong strong"><strong>Register application</strong></span>. GitHub provides a client ID and a client secret. You need these values to complete the identity provider configuration.
						</li></ol></div></section><section class="section" id="identity-provider-creating-secret_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.4. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object containing a string by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-literal=clientSecret=&lt;secret&gt; -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: Opaque
data:
  clientSecret: &lt;base64_encoded_client_secret&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							You can define a <code class="literal">Secret</code> object containing the contents of a file, such as a certificate file, by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-file=&lt;path_to_file&gt; -n openshift-config</pre></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.5. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This procedure is only required for GitHub Enterprise.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-github-CR_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.6. Sample GitHub CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a GitHub identity provider.
				</p><div class="formalpara"><p class="title"><strong>GitHub CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: githubidp <span id="CO21-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO21-2"><!--Empty--></span><span class="callout">2</span>
    type: GitHub
    github:
      ca: <span id="CO21-3"><!--Empty--></span><span class="callout">3</span>
        name: ca-config-map
      clientID: {...} <span id="CO21-4"><!--Empty--></span><span class="callout">4</span>
      clientSecret: <span id="CO21-5"><!--Empty--></span><span class="callout">5</span>
        name: github-secret
      hostname: ... <span id="CO21-6"><!--Empty--></span><span class="callout">6</span>
      organizations: <span id="CO21-7"><!--Empty--></span><span class="callout">7</span>
      - myorganization1
      - myorganization2
      teams: <span id="CO21-8"><!--Empty--></span><span class="callout">8</span>
      - myorganization1/team-a
      - myorganization2/team-b</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO21-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the GitHub numeric user ID to form an identity name. It is also used to build the callback URL.
						</div></dd><dt><a href="#CO21-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO21-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL. Only for use in GitHub Enterprise with a non-publicly trusted root certificate.
						</div></dd><dt><a href="#CO21-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The client ID of a <a class="link" href="https://github.com/settings/applications/new">registered GitHub OAuth application</a>. The application must be configured with a callback URL of <code class="literal">https://oauth-openshift.apps.&lt;cluster-name&gt;.&lt;cluster-domain&gt;/oauth2callback/&lt;idp-provider-name&gt;</code>.
						</div></dd><dt><a href="#CO21-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client secret issued by GitHub.
						</div></dd><dt><a href="#CO21-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							For GitHub Enterprise, you must provide the hostname of your instance, such as <code class="literal">example.com</code>. This value must match the GitHub Enterprise <code class="literal">hostname</code> value in in the <code class="literal">/setup/settings</code> file and cannot include a port number. If this value is not set, then either <code class="literal">teams</code> or <code class="literal">organizations</code> must be defined. For GitHub, omit this parameter.
						</div></dd><dt><a href="#CO21-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							The list of organizations. Either the <code class="literal">organizations</code> or <code class="literal">teams</code> field must be set unless the <code class="literal">hostname</code> field is set, or if <code class="literal">mappingMethod</code> is set to <code class="literal">lookup</code>. Cannot be used in combination with the <code class="literal">teams</code> field.
						</div></dd><dt><a href="#CO21-8"><span class="callout">8</span></a> </dt><dd><div class="para">
							The list of teams. Either the <code class="literal">teams</code> or <code class="literal">organizations</code> field must be set unless the <code class="literal">hostname</code> field is set, or if <code class="literal">mappingMethod</code> is set to <code class="literal">lookup</code>. Cannot be used in combination with the <code class="literal">organizations</code> field.
						</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If <code class="literal">organizations</code> or <code class="literal">teams</code> is specified, only GitHub users that are members of at least one of the listed organizations will be allowed to log in. If the GitHub OAuth application configured in <code class="literal">clientID</code> is not owned by the organization, an organization owner must grant third-party access to use this option. This can be done during the first GitHub login by the organization’s administrator, or from the GitHub organization settings.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-github-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.6.7. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Obtain a token from the OAuth server.
						</p><p class="simpara">
							As long as the <code class="literal">kubeadmin</code> user has been removed, the <code class="literal">oc login</code> command provides instructions on how to access a web page where you can retrieve the token.
						</p><p class="simpara">
							You can also access this page from the web console by navigating to <span class="strong strong"><strong>(?) Help</strong></span> → <span class="strong strong"><strong>Command Line Tools</strong></span> → <span class="strong strong"><strong>Copy Login Command</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Log in to the cluster, passing in the token to authenticate.
						</p><pre class="programlisting language-terminal">$ oc login --token=&lt;token&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This identity provider does not support logging in with a user name and password.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section></section><section class="section" id="configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.7. Configuring a GitLab identity provider</h2></div></div></div><p>
				Configure the <code class="literal">gitlab</code> identity provider using <a class="link" href="https://gitlab.com/">GitLab.com</a> or any other GitLab instance as an identity provider.
			</p><section class="section" id="identity-provider-overview_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-gitlab-about_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.2. About GitLab authentication</h3></div></div></div><p>
					Configuring GitLab authentication allows users to log in to OpenShift Container Platform with their GitLab credentials.
				</p><p>
					If you use GitLab version 7.7.0 to 11.0, you connect using the <a class="link" href="http://doc.gitlab.com/ce/integration/oauth_provider.html">OAuth integration</a>. If you use GitLab version 11.1 or later, you can use <a class="link" href="https://docs.gitlab.com/ce/integration/openid_connect_provider.html">OpenID Connect</a> (OIDC) to connect instead of OAuth.
				</p></section><section class="section" id="identity-provider-creating-secret_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.3. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object containing a string by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-literal=clientSecret=&lt;secret&gt; -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: Opaque
data:
  clientSecret: &lt;base64_encoded_client_secret&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							You can define a <code class="literal">Secret</code> object containing the contents of a file, such as a certificate file, by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-file=&lt;path_to_file&gt; -n openshift-config</pre></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.4. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This procedure is only required for GitHub Enterprise.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-gitlab-CR_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.5. Sample GitLab CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a GitLab identity provider.
				</p><div class="formalpara"><p class="title"><strong>GitLab CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: gitlabidp <span id="CO22-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO22-2"><!--Empty--></span><span class="callout">2</span>
    type: GitLab
    gitlab:
      clientID: {...} <span id="CO22-3"><!--Empty--></span><span class="callout">3</span>
      clientSecret: <span id="CO22-4"><!--Empty--></span><span class="callout">4</span>
        name: gitlab-secret
      url: https://gitlab.com <span id="CO22-5"><!--Empty--></span><span class="callout">5</span>
      ca: <span id="CO22-6"><!--Empty--></span><span class="callout">6</span>
        name: ca-config-map</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO22-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the GitLab numeric user ID to form an identity name. It is also used to build the callback URL.
						</div></dd><dt><a href="#CO22-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO22-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The client ID of a <a class="link" href="https://docs.gitlab.com/ce/api/oauth2.html">registered GitLab OAuth application</a>. The application must be configured with a callback URL of <code class="literal">https://oauth-openshift.apps.&lt;cluster-name&gt;.&lt;cluster-domain&gt;/oauth2callback/&lt;idp-provider-name&gt;</code>.
						</div></dd><dt><a href="#CO22-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client secret issued by GitLab.
						</div></dd><dt><a href="#CO22-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							The host URL of a GitLab provider. This could either be <code class="literal">https://gitlab.com/</code> or any other self hosted instance of GitLab.
						</div></dd><dt><a href="#CO22-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-gitlab-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.7.6. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Log in to the cluster as a user from your identity provider, entering the password when prompted.
						</p><pre class="programlisting language-terminal">$ oc login -u &lt;username&gt;</pre></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section></section><section class="section" id="configuring-google-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.8. Configuring a Google identity provider</h2></div></div></div><p>
				Configure the <code class="literal">google</code> identity provider using the <a class="link" href="https://developers.google.com/identity/protocols/OpenIDConnect">Google OpenID Connect integration</a>.
			</p><section class="section" id="identity-provider-overview_configuring-google-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.8.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-google-about_configuring-google-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.8.2. About Google authentication</h3></div></div></div><p>
					Using Google as an identity provider allows any Google user to authenticate to your server. You can limit authentication to members of a specific hosted domain with the <code class="literal">hostedDomain</code> configuration attribute.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Using Google as an identity provider requires users to get a token using <code class="literal">&lt;namespace_route&gt;/oauth/token/request</code> to use with command-line tools.
					</p></div></div></section><section class="section" id="identity-provider-creating-secret_configuring-google-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.8.3. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object containing a string by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-literal=clientSecret=&lt;secret&gt; -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: Opaque
data:
  clientSecret: &lt;base64_encoded_client_secret&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							You can define a <code class="literal">Secret</code> object containing the contents of a file, such as a certificate file, by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-file=&lt;path_to_file&gt; -n openshift-config</pre></li></ul></div></section><section class="section" id="identity-provider-google-CR_configuring-google-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.8.4. Sample Google CR</h3></div></div></div><p>
					The following custom resource (CR) shows the parameters and acceptable values for a Google identity provider.
				</p><div class="formalpara"><p class="title"><strong>Google CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: googleidp <span id="CO23-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO23-2"><!--Empty--></span><span class="callout">2</span>
    type: Google
    google:
      clientID: {...} <span id="CO23-3"><!--Empty--></span><span class="callout">3</span>
      clientSecret: <span id="CO23-4"><!--Empty--></span><span class="callout">4</span>
        name: google-secret
      hostedDomain: "example.com" <span id="CO23-5"><!--Empty--></span><span class="callout">5</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO23-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the Google numeric user ID to form an identity name. It is also used to build the redirect URL.
						</div></dd><dt><a href="#CO23-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO23-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The client ID of a <a class="link" href="https://console.developers.google.com/">registered Google project</a>. The project must be configured with a redirect URI of <code class="literal">https://oauth-openshift.apps.&lt;cluster-name&gt;.&lt;cluster-domain&gt;/oauth2callback/&lt;idp-provider-name&gt;</code>.
						</div></dd><dt><a href="#CO23-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client secret issued by Google.
						</div></dd><dt><a href="#CO23-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							A <a class="link" href="https://developers.google.com/identity/protocols/OpenIDConnect#hd-param">hosted domain</a> used to restrict sign-in accounts. Optional if the <code class="literal">lookup</code> <code class="literal">mappingMethod</code> is used. If empty, any Google account is allowed to authenticate.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-google-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.8.5. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Obtain a token from the OAuth server.
						</p><p class="simpara">
							As long as the <code class="literal">kubeadmin</code> user has been removed, the <code class="literal">oc login</code> command provides instructions on how to access a web page where you can retrieve the token.
						</p><p class="simpara">
							You can also access this page from the web console by navigating to <span class="strong strong"><strong>(?) Help</strong></span> → <span class="strong strong"><strong>Command Line Tools</strong></span> → <span class="strong strong"><strong>Copy Login Command</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Log in to the cluster, passing in the token to authenticate.
						</p><pre class="programlisting language-terminal">$ oc login --token=&lt;token&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This identity provider does not support logging in with a user name and password.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section></section><section class="section" id="configuring-oidc-identity-provider"><div class="titlepage"><div><div><h2 class="title">7.9. Configuring an OpenID Connect identity provider</h2></div></div></div><p>
				Configure the <code class="literal">oidc</code> identity provider to integrate with an OpenID Connect identity provider using an <a class="link" href="http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth">Authorization Code Flow</a>.
			</p><section class="section" id="identity-provider-overview_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.1. About identity providers in OpenShift Container Platform</h3></div></div></div><p>
					By default, only a <code class="literal">kubeadmin</code> user exists on your cluster. To specify an identity provider, you must create a custom resource (CR) that describes that identity provider and add it to the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						OpenShift Container Platform user names containing <code class="literal">/</code>, <code class="literal">:</code>, and <code class="literal">%</code> are not supported.
					</p></div></div></section><section class="section" id="identity-provider-oidc-about_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.2. About OpenID Connect authentication</h3></div></div></div><p>
					The Authentication Operator in OpenShift Container Platform requires that the configured OpenID Connect identity provider implements the <a class="link" href="https://openid.net/specs/openid-connect-discovery-1_0.html">OpenID Connect Discovery</a> specification.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						<code class="literal">ID Token</code> and <code class="literal">UserInfo</code> decryptions are not supported.
					</p></div></div><p>
					By default, the <code class="literal">openid</code> scope is requested. If required, extra scopes can be specified in the <code class="literal">extraScopes</code> field.
				</p><p>
					Claims are read from the JWT <code class="literal">id_token</code> returned from the OpenID identity provider and, if specified, from the JSON returned by the <code class="literal">UserInfo</code> URL.
				</p><p>
					At least one claim must be configured to use as the user’s identity. The standard identity claim is <code class="literal">sub</code>.
				</p><p>
					You can also indicate which claims to use as the user’s preferred user name, display name, and email address. If multiple claims are specified, the first one with a non-empty value is used. The following table lists the standard claims:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032741290352" scope="col">Claim</th><th align="left" valign="top" id="idm140032741289264" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032741290352"> <p>
									<code class="literal">sub</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032741289264"> <p>
									Short for "subject identifier." The remote identity for the user at the issuer.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032741290352"> <p>
									<code class="literal">preferred_username</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032741289264"> <p>
									The preferred user name when provisioning a user. A shorthand name that the user wants to be referred to as, such as <code class="literal">janedoe</code>. Typically a value that corresponding to the user’s login or username in the authentication system, such as username or email.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032741290352"> <p>
									<code class="literal">email</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032741289264"> <p>
									Email address.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032741290352"> <p>
									<code class="literal">name</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032741289264"> <p>
									Display name.
								</p>
								 </td></tr></tbody></table></div><p>
					See the <a class="link" href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">OpenID claims documentation</a> for more information.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Unless your OpenID Connect identity provider supports the resource owner password credentials (ROPC) grant flow, users must get a token from <code class="literal">&lt;namespace_route&gt;/oauth/token/request</code> to use with command-line tools.
					</p></div></div></section><section class="section" id="identity-provider-oidc-supported_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.3. Supported OIDC providers</h3></div></div></div><p>
					Red Hat tests and supports specific OpenID Connect (OIDC) providers with OpenShift Container Platform. The following OpenID Connect (OIDC) providers are tested and supported with OpenShift Container Platform. Using an OIDC provider that is not on the following list might work with OpenShift Container Platform, but the provider was not tested by Red Hat and therefore is not supported by Red Hat.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Active Directory Federation Services for Windows Server
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Currently, it is not supported to use Active Directory Federation Services for Windows Server with OpenShift Container Platform when custom claims are used.
							</p></div></div></li><li class="listitem">
							GitLab
						</li><li class="listitem">
							Google
						</li><li class="listitem">
							Keycloak
						</li><li class="listitem"><p class="simpara">
							Microsoft identity platform (Azure Active Directory v2.0)
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Currently, it is not supported to use Microsoft identity platform when group names are required to be synced.
							</p></div></div></li><li class="listitem">
							Okta
						</li><li class="listitem">
							Ping Identity
						</li><li class="listitem">
							Red Hat Single Sign-On
						</li></ul></div></section><section class="section" id="identity-provider-creating-secret_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.4. Creating the secret</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">Secret</code> objects in the <code class="literal">openshift-config</code> namespace to contain the client secret, client certificates, and keys.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> object containing a string by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-literal=clientSecret=&lt;secret&gt; -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the secret:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret_name&gt;
  namespace: openshift-config
type: Opaque
data:
  clientSecret: &lt;base64_encoded_client_secret&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							You can define a <code class="literal">Secret</code> object containing the contents of a file, such as a certificate file, by using the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic &lt;secret_name&gt; --from-file=&lt;path_to_file&gt; -n openshift-config</pre></li></ul></div></section><section class="section" id="identity-provider-creating-configmap_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.5. Creating a config map</h3></div></div></div><p>
					Identity providers use OpenShift Container Platform <code class="literal">ConfigMap</code> objects in the <code class="literal">openshift-config</code> namespace to contain the certificate authority bundle. These are primarily used to contain certificate bundles needed by the identity provider.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This procedure is only required for GitHub Enterprise.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Define an OpenShift Container Platform <code class="literal">ConfigMap</code> object containing the certificate authority by using the following command. The certificate authority must be stored in the <code class="literal">ca.crt</code> key of the <code class="literal">ConfigMap</code> object.
						</p><pre class="programlisting language-terminal">$ oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
							You can alternatively apply the following YAML to create the config map:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: ca-config-map
  namespace: openshift-config
data:
  ca.crt: |
    &lt;CA_certificate_PEM&gt;</pre></div></div></li></ul></div></section><section class="section" id="identity-provider-oidc-CR_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.6. Sample OpenID Connect CRs</h3></div></div></div><p>
					The following custom resources (CRs) show the parameters and acceptable values for an OpenID Connect identity provider.
				</p><p>
					If you must specify a custom certificate bundle, extra scopes, extra authorization request parameters, or a <code class="literal">userInfo</code> URL, use the full OpenID Connect CR.
				</p><div class="formalpara"><p class="title"><strong>Standard OpenID Connect CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: oidcidp <span id="CO24-1"><!--Empty--></span><span class="callout">1</span>
    mappingMethod: claim <span id="CO24-2"><!--Empty--></span><span class="callout">2</span>
    type: OpenID
    openID:
      clientID: ... <span id="CO24-3"><!--Empty--></span><span class="callout">3</span>
      clientSecret: <span id="CO24-4"><!--Empty--></span><span class="callout">4</span>
        name: idp-secret
      claims: <span id="CO24-5"><!--Empty--></span><span class="callout">5</span>
        preferredUsername:
        - preferred_username
        name:
        - name
        email:
        - email
        groups:
        - groups
      issuer: https://www.idp-issuer.com <span id="CO24-6"><!--Empty--></span><span class="callout">6</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO24-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							This provider name is prefixed to the value of the identity claim to form an identity name. It is also used to build the redirect URL.
						</div></dd><dt><a href="#CO24-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Controls how mappings are established between this provider’s identities and <code class="literal">User</code> objects.
						</div></dd><dt><a href="#CO24-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The client ID of a client registered with the OpenID provider. The client must be allowed to redirect to <code class="literal">https://oauth-openshift.apps.&lt;cluster_name&gt;.&lt;cluster_domain&gt;/oauth2callback/&lt;idp_provider_name&gt;</code>.
						</div></dd><dt><a href="#CO24-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							A reference to an OpenShift Container Platform <code class="literal">Secret</code> object containing the client secret.
						</div></dd><dt><a href="#CO24-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							The list of claims to use as the identity. The first non-empty claim is used.
						</div></dd><dt><a href="#CO24-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							The <a class="link" href="https://openid.net/specs/openid-connect-core-1_0.html#IssuerIdentifier">Issuer Identifier</a> described in the OpenID spec. Must use <code class="literal">https</code> without query or fragment component.
						</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Full OpenID Connect CR</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: oidcidp
    mappingMethod: claim
    type: OpenID
    openID:
      clientID: ...
      clientSecret:
        name: idp-secret
      ca: <span id="CO25-1"><!--Empty--></span><span class="callout">1</span>
        name: ca-config-map
      extraScopes: <span id="CO25-2"><!--Empty--></span><span class="callout">2</span>
      - email
      - profile
      extraAuthorizeParameters: <span id="CO25-3"><!--Empty--></span><span class="callout">3</span>
        include_granted_scopes: "true"
      claims:
        preferredUsername: <span id="CO25-4"><!--Empty--></span><span class="callout">4</span>
        - preferred_username
        - email
        name: <span id="CO25-5"><!--Empty--></span><span class="callout">5</span>
        - nickname
        - given_name
        - name
        email: <span id="CO25-6"><!--Empty--></span><span class="callout">6</span>
        - custom_email_claim
        - email
        groups: <span id="CO25-7"><!--Empty--></span><span class="callout">7</span>
        - groups
      issuer: https://www.idp-issuer.com</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO25-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							Optional: Reference to an OpenShift Container Platform config map containing the PEM-encoded certificate authority bundle to use in validating server certificates for the configured URL.
						</div></dd><dt><a href="#CO25-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Optional: The list of scopes to request, in addition to the <code class="literal">openid</code> scope, during the authorization token request.
						</div></dd><dt><a href="#CO25-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Optional: A map of extra parameters to add to the authorization token request.
						</div></dd><dt><a href="#CO25-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The list of claims to use as the preferred user name when provisioning a user for this identity. The first non-empty claim is used.
						</div></dd><dt><a href="#CO25-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							The list of claims to use as the display name. The first non-empty claim is used.
						</div></dd><dt><a href="#CO25-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							The list of claims to use as the email address. The first non-empty claim is used.
						</div></dd><dt><a href="#CO25-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							The list of claims to use to synchronize groups from the OpenID Connect provider to OpenShift Container Platform upon user login. The first non-empty claim is used.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#identity-provider-parameters_understanding-identity-provider">Identity provider parameters</a> for information on parameters, such as <code class="literal">mappingMethod</code>, that are common to all identity providers.
						</li></ul></div></section><section class="section" id="add-identity-provider_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.7. Adding an identity provider to your cluster</h3></div></div></div><p>
					After you install your cluster, add an identity provider to it so your users can authenticate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create an OpenShift Container Platform cluster.
						</li><li class="listitem">
							Create the custom resource (CR) for your identity providers.
						</li><li class="listitem">
							You must be logged in as an administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Apply the defined CR:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;/path/to/CR&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a CR does not exist, <code class="literal">oc apply</code> creates a new CR and might trigger the following warning: <code class="literal">Warning: oc apply should be used on resources created by either oc create --save-config or oc apply</code>. In this case you can safely ignore this warning.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Obtain a token from the OAuth server.
						</p><p class="simpara">
							As long as the <code class="literal">kubeadmin</code> user has been removed, the <code class="literal">oc login</code> command provides instructions on how to access a web page where you can retrieve the token.
						</p><p class="simpara">
							You can also access this page from the web console by navigating to <span class="strong strong"><strong>(?) Help</strong></span> → <span class="strong strong"><strong>Command Line Tools</strong></span> → <span class="strong strong"><strong>Copy Login Command</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Log in to the cluster, passing in the token to authenticate.
						</p><pre class="programlisting language-terminal">$ oc login --token=&lt;token&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If your OpenID Connect identity provider supports the resource owner password credentials (ROPC) grant flow, you can log in with a user name and password. You might need to take steps to enable the ROPC grant flow for your identity provider.
							</p><p>
								After the OIDC identity provider is configured in OpenShift Container Platform, you can log in by using the following command, which prompts for your user name and password:
							</p><pre class="programlisting language-terminal">$ oc login -u &lt;identity_provider_username&gt; --server=&lt;api_server_url_and_port&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
							Confirm that the user logged in successfully, and display the user name.
						</p><pre class="programlisting language-terminal">$ oc whoami</pre></li></ol></div></section><section class="section" id="identity-provider-configuring-using-the-web-console_configuring-oidc-identity-provider"><div class="titlepage"><div><div><h3 class="title">7.9.8. Configuring identity providers using the web console</h3></div></div></div><p>
					Configure your identity provider (IDP) through the web console instead of the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must be logged in to the web console as a cluster administrator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Cluster Settings</strong></span>.
						</li><li class="listitem">
							Under the <span class="strong strong"><strong>Configuration</strong></span> tab, click <span class="strong strong"><strong>OAuth</strong></span>.
						</li><li class="listitem">
							Under the <span class="strong strong"><strong>Identity Providers</strong></span> section, select your identity provider from the <span class="strong strong"><strong>Add</strong></span> drop-down menu.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can specify multiple IDPs through the web console without overwriting existing IDPs.
					</p></div></div></section></section></section><section class="chapter" id="using-rbac"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Using RBAC to define and apply permissions</h1></div></div></div><section class="section" id="authorization-overview_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.1. RBAC overview</h2></div></div></div><p>
				Role-based access control (RBAC) objects determine whether a user is allowed to perform a given action within a project.
			</p><p>
				Cluster administrators can use the cluster roles and bindings to control who has various access levels to the OpenShift Container Platform platform itself and all projects.
			</p><p>
				Developers can use local roles and bindings to control who has access to their projects. Note that authorization is a separate step from authentication, which is more about determining the identity of who is taking the action.
			</p><p>
				Authorization is managed using:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032743428192" scope="col">Authorization object</th><th align="left" valign="top" id="idm140032743427104" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032743428192"> <p>
								Rules
							</p>
							 </td><td align="left" valign="top" headers="idm140032743427104"> <p>
								Sets of permitted verbs on a set of objects. For example, whether a user or service account can <code class="literal">create</code> pods.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032743428192"> <p>
								Roles
							</p>
							 </td><td align="left" valign="top" headers="idm140032743427104"> <p>
								Collections of rules. You can associate, or bind, users and groups to multiple roles.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032743428192"> <p>
								Bindings
							</p>
							 </td><td align="left" valign="top" headers="idm140032743427104"> <p>
								Associations between users and/or groups with a role.
							</p>
							 </td></tr></tbody></table></div><p>
				There are two levels of RBAC roles and bindings that control authorization:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032748010064" scope="col">RBAC level</th><th align="left" valign="top" id="idm140032748008976" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032748010064"> <p>
								Cluster RBAC
							</p>
							 </td><td align="left" valign="top" headers="idm140032748008976"> <p>
								Roles and bindings that are applicable across all projects. <span class="emphasis"><em>Cluster roles</em></span> exist cluster-wide, and <span class="emphasis"><em>cluster role bindings</em></span> can reference only cluster roles.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032748010064"> <p>
								Local RBAC
							</p>
							 </td><td align="left" valign="top" headers="idm140032748008976"> <p>
								Roles and bindings that are scoped to a given project. While <span class="emphasis"><em>local roles</em></span> exist only in a single project, local role bindings can reference <span class="emphasis"><em>both</em></span> cluster and local roles.
							</p>
							 </td></tr></tbody></table></div><p>
				A cluster role binding is a binding that exists at the cluster level. A role binding exists at the project level. The cluster role <span class="emphasis"><em>view</em></span> must be bound to a user using a local role binding for that user to view the project. Create local roles only if a cluster role does not provide the set of permissions needed for a particular situation.
			</p><p>
				This two-level hierarchy allows reuse across multiple projects through the cluster roles while allowing customization inside of individual projects through local roles.
			</p><p>
				During evaluation, both the cluster role bindings and the local role bindings are used. For example:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Cluster-wide "allow" rules are checked.
					</li><li class="listitem">
						Locally-bound "allow" rules are checked.
					</li><li class="listitem">
						Deny by default.
					</li></ol></div><section class="section" id="default-roles_using-rbac"><div class="titlepage"><div><div><h3 class="title">8.1.1. Default cluster roles</h3></div></div></div><p>
					OpenShift Container Platform includes a set of default cluster roles that you can bind to users and groups cluster-wide or locally.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						It is not recommended to manually modify the default cluster roles. Modifications to these system roles can prevent a cluster from functioning properly.
					</p></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032729284912" scope="col">Default cluster role</th><th align="left" valign="top" id="idm140032732989632" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">admin</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A project manager. If used in a local binding, an <code class="literal">admin</code> has rights to view any resource in the project and modify any resource in the project except for quota.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">basic-user</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user that can get basic information about projects and users.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">cluster-admin</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A super-user that can perform any action in any project. When bound to a user with a local binding, they have full control over quota and every action on every resource in the project.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">cluster-status</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user that can get basic cluster status information.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">cluster-reader</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user that can get or view most of the objects but cannot modify them.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">edit</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user that can modify most objects in a project but does not have the power to view or modify roles or bindings.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">self-provisioner</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user that can create their own projects.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729284912"> <p>
									<code class="literal">view</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732989632"> <p>
									A user who cannot make any modifications, but can see most objects in a project. They cannot view or modify roles or bindings.
								</p>
								 </td></tr></tbody></table></div><p>
					Be mindful of the difference between local and cluster bindings. For example, if you bind the <code class="literal">cluster-admin</code> role to a user by using a local role binding, it might appear that this user has the privileges of a cluster administrator. This is not the case. Binding the <code class="literal">cluster-admin</code> to a user in a project grants super administrator privileges for only that project to the user. That user has the permissions of the cluster role <code class="literal">admin</code>, plus a few additional permissions like the ability to edit rate limits, for that project. This binding can be confusing via the web console UI, which does not list cluster role bindings that are bound to true cluster administrators. However, it does list local role bindings that you can use to locally bind <code class="literal">cluster-admin</code>.
				</p><p>
					The relationships between cluster roles, local roles, cluster role bindings, local role bindings, users, groups and service accounts are illustrated below.
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/052176e6fe02a52b8f683f060d917ad1/rbac.png" alt="OpenShift Container Platform RBAC"/></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						The <code class="literal">get pods/exec</code>, <code class="literal">get pods/*</code>, and <code class="literal">get *</code> rules grant execution privileges when they are applied to a role. Apply the principle of least privilege and assign only the minimal RBAC rights required for users and agents. For more information, see <a class="link" href="https://access.redhat.com/solutions/6989997">RBAC rules allow execution privileges</a>.
					</p></div></div></section><section class="section" id="evaluating-authorization_using-rbac"><div class="titlepage"><div><div><h3 class="title">8.1.2. Evaluating authorization</h3></div></div></div><p>
					OpenShift Container Platform evaluates authorization by using:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Identity</span></dt><dd>
								The user name and list of groups that the user belongs to.
							</dd><dt><span class="term">Action</span></dt><dd><p class="simpara">
								The action you perform. In most cases, this consists of:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Project</strong></span>: The project you access. A project is a Kubernetes namespace with additional annotations that allows a community of users to organize and manage their content in isolation from other communities.
									</li><li class="listitem">
										<span class="strong strong"><strong>Verb</strong></span> : The action itself: <code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">delete</code>, <code class="literal">deletecollection</code>, or <code class="literal">watch</code>.
									</li><li class="listitem">
										<span class="strong strong"><strong>Resource name</strong></span>: The API endpoint that you access.
									</li></ul></div></dd><dt><span class="term">Bindings</span></dt><dd>
								The full list of bindings, the associations between users or groups with a role.
							</dd></dl></div><p>
					OpenShift Container Platform evaluates authorization by using the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The identity and the project-scoped action is used to find all bindings that apply to the user or their groups.
						</li><li class="listitem">
							Bindings are used to locate all the roles that apply.
						</li><li class="listitem">
							Roles are used to find all the rules that apply.
						</li><li class="listitem">
							The action is checked against each rule to find a match.
						</li><li class="listitem">
							If no matching rule is found, the action is then denied by default.
						</li></ol></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					Remember that users and groups can be associated with, or bound to, multiple roles at the same time.
				</p></div></div><p>
					Project administrators can use the CLI to view local roles and bindings, including a matrix of the verbs and resources each are associated with.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The cluster role bound to the project administrator is limited in a project through a local binding. It is not bound cluster-wide like the cluster roles granted to the <span class="strong strong"><strong>cluster-admin</strong></span> or <span class="strong strong"><strong>system:admin</strong></span>.
					</p><p>
						Cluster roles are roles defined at the cluster level but can be bound either at the cluster level or at the project level.
					</p></div></div><section class="section" id="cluster-role-aggregations_using-rbac"><div class="titlepage"><div><div><h4 class="title">8.1.2.1. Cluster role aggregation</h4></div></div></div><p>
						The default admin, edit, view, and cluster-reader cluster roles support <a class="link" href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#aggregated-clusterroles">cluster role aggregation</a>, where the cluster rules for each role are dynamically updated as new rules are created. This feature is relevant only if you extend the Kubernetes API by creating custom resources.
					</p></section></section></section><section class="section" id="rbac-projects-namespaces_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.2. Projects and namespaces</h2></div></div></div><p>
				A Kubernetes <span class="emphasis"><em>namespace</em></span> provides a mechanism to scope resources in a cluster. The <a class="link" href="https://kubernetes.io/docs/tasks/administer-cluster/namespaces/">Kubernetes documentation</a> has more information on namespaces.
			</p><p>
				Namespaces provide a unique scope for:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Named resources to avoid basic naming collisions.
					</li><li class="listitem">
						Delegated management authority to trusted users.
					</li><li class="listitem">
						The ability to limit community resource consumption.
					</li></ul></div><p>
				Most objects in the system are scoped by namespace, but some are excepted and have no namespace, including nodes and users.
			</p><p>
				A <span class="emphasis"><em>project</em></span> is a Kubernetes namespace with additional annotations and is the central vehicle by which access to resources for regular users is managed. A project allows a community of users to organize and manage their content in isolation from other communities. Users must be given access to projects by administrators, or if allowed to create projects, automatically have access to their own projects.
			</p><p>
				Projects can have a separate <code class="literal">name</code>, <code class="literal">displayName</code>, and <code class="literal">description</code>.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The mandatory <code class="literal">name</code> is a unique identifier for the project and is most visible when using the CLI tools or API. The maximum name length is 63 characters.
					</li><li class="listitem">
						The optional <code class="literal">displayName</code> is how the project is displayed in the web console (defaults to <code class="literal">name</code>).
					</li><li class="listitem">
						The optional <code class="literal">description</code> can be a more detailed description of the project and is also visible in the web console.
					</li></ul></div><p>
				Each project scopes its own set of:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032730356512" scope="col">Object</th><th align="left" valign="top" id="idm140032730355424" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032730356512"> <p>
								<code class="literal">Objects</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032730355424"> <p>
								Pods, services, replication controllers, etc.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032730356512"> <p>
								<code class="literal">Policies</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032730355424"> <p>
								Rules for which users can or cannot perform actions on objects.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032730356512"> <p>
								<code class="literal">Constraints</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032730355424"> <p>
								Quotas for each kind of object that can be limited.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032730356512"> <p>
								<code class="literal">Service accounts</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032730355424"> <p>
								Service accounts act automatically with designated access to objects in the project.
							</p>
							 </td></tr></tbody></table></div><p>
				Cluster administrators can create projects and delegate administrative rights for the project to any member of the user community. Cluster administrators can also allow developers to create their own projects.
			</p><p>
				Developers and administrators can interact with projects by using the CLI or the web console.
			</p></section><section class="section" id="rbac-default-projects_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.3. Default projects</h2></div></div></div><p>
				OpenShift Container Platform comes with a number of default projects, and projects starting with <code class="literal">openshift-</code> are the most essential to users. These projects host master components that run as pods and other infrastructure components. The pods created in these namespaces that have a <a class="link" href="https://kubernetes.io/docs/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/#rescheduler-guaranteed-scheduling-of-critical-add-ons">critical pod annotation</a> are considered critical, and the have guaranteed admission by kubelet. Pods created for master components in these namespaces are already marked as critical.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot assign an SCC to pods created in one of the default namespaces: <code class="literal">default</code>, <code class="literal">kube-system</code>, <code class="literal">kube-public</code>, <code class="literal">openshift-node</code>, <code class="literal">openshift-infra</code>, and <code class="literal">openshift</code>. You cannot use these namespaces for running pods or services.
				</p></div></div></section><section class="section" id="viewing-cluster-roles_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.4. Viewing cluster roles and bindings</h2></div></div></div><p>
				You can use the <code class="literal">oc</code> CLI to view cluster roles and bindings by using the <code class="literal">oc describe</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the <code class="literal">oc</code> CLI.
					</li><li class="listitem">
						Obtain permission to view the cluster roles and bindings.
					</li></ul></div><p>
				Users with the <code class="literal">cluster-admin</code> default cluster role bound cluster-wide can perform any action on any resource, including viewing cluster roles and bindings.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To view the cluster roles and their associated rule sets:
					</p><pre class="programlisting language-terminal">$ oc describe clusterrole.rbac</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:         admin
Labels:       kubernetes.io/bootstrapping=rbac-defaults
Annotations:  rbac.authorization.kubernetes.io/autoupdate: true
PolicyRule:
  Resources                                                  Non-Resource URLs  Resource Names  Verbs
  ---------                                                  -----------------  --------------  -----
  .packages.apps.redhat.com                                  []                 []              [* create update patch delete get list watch]
  imagestreams                                               []                 []              [create delete deletecollection get list patch update watch create get list watch]
  imagestreams.image.openshift.io                            []                 []              [create delete deletecollection get list patch update watch create get list watch]
  secrets                                                    []                 []              [create delete deletecollection get list patch update watch get list watch create delete deletecollection patch update]
  buildconfigs/webhooks                                      []                 []              [create delete deletecollection get list patch update watch get list watch]
  buildconfigs                                               []                 []              [create delete deletecollection get list patch update watch get list watch]
  buildlogs                                                  []                 []              [create delete deletecollection get list patch update watch get list watch]
  deploymentconfigs/scale                                    []                 []              [create delete deletecollection get list patch update watch get list watch]
  deploymentconfigs                                          []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreamimages                                          []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreammappings                                        []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreamtags                                            []                 []              [create delete deletecollection get list patch update watch get list watch]
  processedtemplates                                         []                 []              [create delete deletecollection get list patch update watch get list watch]
  routes                                                     []                 []              [create delete deletecollection get list patch update watch get list watch]
  templateconfigs                                            []                 []              [create delete deletecollection get list patch update watch get list watch]
  templateinstances                                          []                 []              [create delete deletecollection get list patch update watch get list watch]
  templates                                                  []                 []              [create delete deletecollection get list patch update watch get list watch]
  deploymentconfigs.apps.openshift.io/scale                  []                 []              [create delete deletecollection get list patch update watch get list watch]
  deploymentconfigs.apps.openshift.io                        []                 []              [create delete deletecollection get list patch update watch get list watch]
  buildconfigs.build.openshift.io/webhooks                   []                 []              [create delete deletecollection get list patch update watch get list watch]
  buildconfigs.build.openshift.io                            []                 []              [create delete deletecollection get list patch update watch get list watch]
  buildlogs.build.openshift.io                               []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreamimages.image.openshift.io                       []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreammappings.image.openshift.io                     []                 []              [create delete deletecollection get list patch update watch get list watch]
  imagestreamtags.image.openshift.io                         []                 []              [create delete deletecollection get list patch update watch get list watch]
  routes.route.openshift.io                                  []                 []              [create delete deletecollection get list patch update watch get list watch]
  processedtemplates.template.openshift.io                   []                 []              [create delete deletecollection get list patch update watch get list watch]
  templateconfigs.template.openshift.io                      []                 []              [create delete deletecollection get list patch update watch get list watch]
  templateinstances.template.openshift.io                    []                 []              [create delete deletecollection get list patch update watch get list watch]
  templates.template.openshift.io                            []                 []              [create delete deletecollection get list patch update watch get list watch]
  serviceaccounts                                            []                 []              [create delete deletecollection get list patch update watch impersonate create delete deletecollection patch update get list watch]
  imagestreams/secrets                                       []                 []              [create delete deletecollection get list patch update watch]
  rolebindings                                               []                 []              [create delete deletecollection get list patch update watch]
  roles                                                      []                 []              [create delete deletecollection get list patch update watch]
  rolebindings.authorization.openshift.io                    []                 []              [create delete deletecollection get list patch update watch]
  roles.authorization.openshift.io                           []                 []              [create delete deletecollection get list patch update watch]
  imagestreams.image.openshift.io/secrets                    []                 []              [create delete deletecollection get list patch update watch]
  rolebindings.rbac.authorization.k8s.io                     []                 []              [create delete deletecollection get list patch update watch]
  roles.rbac.authorization.k8s.io                            []                 []              [create delete deletecollection get list patch update watch]
  networkpolicies.extensions                                 []                 []              [create delete deletecollection patch update create delete deletecollection get list patch update watch get list watch]
  networkpolicies.networking.k8s.io                          []                 []              [create delete deletecollection patch update create delete deletecollection get list patch update watch get list watch]
  configmaps                                                 []                 []              [create delete deletecollection patch update get list watch]
  endpoints                                                  []                 []              [create delete deletecollection patch update get list watch]
  persistentvolumeclaims                                     []                 []              [create delete deletecollection patch update get list watch]
  pods                                                       []                 []              [create delete deletecollection patch update get list watch]
  replicationcontrollers/scale                               []                 []              [create delete deletecollection patch update get list watch]
  replicationcontrollers                                     []                 []              [create delete deletecollection patch update get list watch]
  services                                                   []                 []              [create delete deletecollection patch update get list watch]
  daemonsets.apps                                            []                 []              [create delete deletecollection patch update get list watch]
  deployments.apps/scale                                     []                 []              [create delete deletecollection patch update get list watch]
  deployments.apps                                           []                 []              [create delete deletecollection patch update get list watch]
  replicasets.apps/scale                                     []                 []              [create delete deletecollection patch update get list watch]
  replicasets.apps                                           []                 []              [create delete deletecollection patch update get list watch]
  statefulsets.apps/scale                                    []                 []              [create delete deletecollection patch update get list watch]
  statefulsets.apps                                          []                 []              [create delete deletecollection patch update get list watch]
  horizontalpodautoscalers.autoscaling                       []                 []              [create delete deletecollection patch update get list watch]
  cronjobs.batch                                             []                 []              [create delete deletecollection patch update get list watch]
  jobs.batch                                                 []                 []              [create delete deletecollection patch update get list watch]
  daemonsets.extensions                                      []                 []              [create delete deletecollection patch update get list watch]
  deployments.extensions/scale                               []                 []              [create delete deletecollection patch update get list watch]
  deployments.extensions                                     []                 []              [create delete deletecollection patch update get list watch]
  ingresses.extensions                                       []                 []              [create delete deletecollection patch update get list watch]
  replicasets.extensions/scale                               []                 []              [create delete deletecollection patch update get list watch]
  replicasets.extensions                                     []                 []              [create delete deletecollection patch update get list watch]
  replicationcontrollers.extensions/scale                    []                 []              [create delete deletecollection patch update get list watch]
  poddisruptionbudgets.policy                                []                 []              [create delete deletecollection patch update get list watch]
  deployments.apps/rollback                                  []                 []              [create delete deletecollection patch update]
  deployments.extensions/rollback                            []                 []              [create delete deletecollection patch update]
  catalogsources.operators.coreos.com                        []                 []              [create update patch delete get list watch]
  clusterserviceversions.operators.coreos.com                []                 []              [create update patch delete get list watch]
  installplans.operators.coreos.com                          []                 []              [create update patch delete get list watch]
  packagemanifests.operators.coreos.com                      []                 []              [create update patch delete get list watch]
  subscriptions.operators.coreos.com                         []                 []              [create update patch delete get list watch]
  buildconfigs/instantiate                                   []                 []              [create]
  buildconfigs/instantiatebinary                             []                 []              [create]
  builds/clone                                               []                 []              [create]
  deploymentconfigrollbacks                                  []                 []              [create]
  deploymentconfigs/instantiate                              []                 []              [create]
  deploymentconfigs/rollback                                 []                 []              [create]
  imagestreamimports                                         []                 []              [create]
  localresourceaccessreviews                                 []                 []              [create]
  localsubjectaccessreviews                                  []                 []              [create]
  podsecuritypolicyreviews                                   []                 []              [create]
  podsecuritypolicyselfsubjectreviews                        []                 []              [create]
  podsecuritypolicysubjectreviews                            []                 []              [create]
  resourceaccessreviews                                      []                 []              [create]
  routes/custom-host                                         []                 []              [create]
  subjectaccessreviews                                       []                 []              [create]
  subjectrulesreviews                                        []                 []              [create]
  deploymentconfigrollbacks.apps.openshift.io                []                 []              [create]
  deploymentconfigs.apps.openshift.io/instantiate            []                 []              [create]
  deploymentconfigs.apps.openshift.io/rollback               []                 []              [create]
  localsubjectaccessreviews.authorization.k8s.io             []                 []              [create]
  localresourceaccessreviews.authorization.openshift.io      []                 []              [create]
  localsubjectaccessreviews.authorization.openshift.io       []                 []              [create]
  resourceaccessreviews.authorization.openshift.io           []                 []              [create]
  subjectaccessreviews.authorization.openshift.io            []                 []              [create]
  subjectrulesreviews.authorization.openshift.io             []                 []              [create]
  buildconfigs.build.openshift.io/instantiate                []                 []              [create]
  buildconfigs.build.openshift.io/instantiatebinary          []                 []              [create]
  builds.build.openshift.io/clone                            []                 []              [create]
  imagestreamimports.image.openshift.io                      []                 []              [create]
  routes.route.openshift.io/custom-host                      []                 []              [create]
  podsecuritypolicyreviews.security.openshift.io             []                 []              [create]
  podsecuritypolicyselfsubjectreviews.security.openshift.io  []                 []              [create]
  podsecuritypolicysubjectreviews.security.openshift.io      []                 []              [create]
  jenkins.build.openshift.io                                 []                 []              [edit view view admin edit view]
  builds                                                     []                 []              [get create delete deletecollection get list patch update watch get list watch]
  builds.build.openshift.io                                  []                 []              [get create delete deletecollection get list patch update watch get list watch]
  projects                                                   []                 []              [get delete get delete get patch update]
  projects.project.openshift.io                              []                 []              [get delete get delete get patch update]
  namespaces                                                 []                 []              [get get list watch]
  pods/attach                                                []                 []              [get list watch create delete deletecollection patch update]
  pods/exec                                                  []                 []              [get list watch create delete deletecollection patch update]
  pods/portforward                                           []                 []              [get list watch create delete deletecollection patch update]
  pods/proxy                                                 []                 []              [get list watch create delete deletecollection patch update]
  services/proxy                                             []                 []              [get list watch create delete deletecollection patch update]
  routes/status                                              []                 []              [get list watch update]
  routes.route.openshift.io/status                           []                 []              [get list watch update]
  appliedclusterresourcequotas                               []                 []              [get list watch]
  bindings                                                   []                 []              [get list watch]
  builds/log                                                 []                 []              [get list watch]
  deploymentconfigs/log                                      []                 []              [get list watch]
  deploymentconfigs/status                                   []                 []              [get list watch]
  events                                                     []                 []              [get list watch]
  imagestreams/status                                        []                 []              [get list watch]
  limitranges                                                []                 []              [get list watch]
  namespaces/status                                          []                 []              [get list watch]
  pods/log                                                   []                 []              [get list watch]
  pods/status                                                []                 []              [get list watch]
  replicationcontrollers/status                              []                 []              [get list watch]
  resourcequotas/status                                      []                 []              [get list watch]
  resourcequotas                                             []                 []              [get list watch]
  resourcequotausages                                        []                 []              [get list watch]
  rolebindingrestrictions                                    []                 []              [get list watch]
  deploymentconfigs.apps.openshift.io/log                    []                 []              [get list watch]
  deploymentconfigs.apps.openshift.io/status                 []                 []              [get list watch]
  controllerrevisions.apps                                   []                 []              [get list watch]
  rolebindingrestrictions.authorization.openshift.io         []                 []              [get list watch]
  builds.build.openshift.io/log                              []                 []              [get list watch]
  imagestreams.image.openshift.io/status                     []                 []              [get list watch]
  appliedclusterresourcequotas.quota.openshift.io            []                 []              [get list watch]
  imagestreams/layers                                        []                 []              [get update get]
  imagestreams.image.openshift.io/layers                     []                 []              [get update get]
  builds/details                                             []                 []              [update]
  builds.build.openshift.io/details                          []                 []              [update]


Name:         basic-user
Labels:       &lt;none&gt;
Annotations:  openshift.io/description: A user that can get basic information about projects.
	              rbac.authorization.kubernetes.io/autoupdate: true
PolicyRule:
	Resources                                           Non-Resource URLs  Resource Names  Verbs
	  ---------                                           -----------------  --------------  -----
	  selfsubjectrulesreviews                             []                 []              [create]
	  selfsubjectaccessreviews.authorization.k8s.io       []                 []              [create]
	  selfsubjectrulesreviews.authorization.openshift.io  []                 []              [create]
	  clusterroles.rbac.authorization.k8s.io              []                 []              [get list watch]
	  clusterroles                                        []                 []              [get list]
	  clusterroles.authorization.openshift.io             []                 []              [get list]
	  storageclasses.storage.k8s.io                       []                 []              [get list]
	  users                                               []                 [~]             [get]
	  users.user.openshift.io                             []                 [~]             [get]
	  projects                                            []                 []              [list watch]
	  projects.project.openshift.io                       []                 []              [list watch]
	  projectrequests                                     []                 []              [list]
	  projectrequests.project.openshift.io                []                 []              [list]

Name:         cluster-admin
Labels:       kubernetes.io/bootstrapping=rbac-defaults
Annotations:  rbac.authorization.kubernetes.io/autoupdate: true
PolicyRule:
Resources  Non-Resource URLs  Resource Names  Verbs
---------  -----------------  --------------  -----
*.*        []                 []              [*]
           [*]                []              [*]

...</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						To view the current set of cluster role bindings, which shows the users and groups that are bound to various roles:
					</p><pre class="programlisting language-terminal">$ oc describe clusterrolebinding.rbac</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:         alertmanager-main
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  alertmanager-main
Subjects:
  Kind            Name               Namespace
  ----            ----               ---------
  ServiceAccount  alertmanager-main  openshift-monitoring


Name:         basic-users
Labels:       &lt;none&gt;
Annotations:  rbac.authorization.kubernetes.io/autoupdate: true
Role:
  Kind:  ClusterRole
  Name:  basic-user
Subjects:
  Kind   Name                  Namespace
  ----   ----                  ---------
  Group  system:authenticated


Name:         cloud-credential-operator-rolebinding
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  cloud-credential-operator-role
Subjects:
  Kind            Name     Namespace
  ----            ----     ---------
  ServiceAccount  default  openshift-cloud-credential-operator


Name:         cluster-admin
Labels:       kubernetes.io/bootstrapping=rbac-defaults
Annotations:  rbac.authorization.kubernetes.io/autoupdate: true
Role:
  Kind:  ClusterRole
  Name:  cluster-admin
Subjects:
  Kind   Name            Namespace
  ----   ----            ---------
  Group  system:masters


Name:         cluster-admins
Labels:       &lt;none&gt;
Annotations:  rbac.authorization.kubernetes.io/autoupdate: true
Role:
  Kind:  ClusterRole
  Name:  cluster-admin
Subjects:
  Kind   Name                   Namespace
  ----   ----                   ---------
  Group  system:cluster-admins
  User   system:admin


Name:         cluster-api-manager-rolebinding
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  cluster-api-manager-role
Subjects:
  Kind            Name     Namespace
  ----            ----     ---------
  ServiceAccount  default  openshift-machine-api

...</pre>

						</p></div></li></ol></div></section><section class="section" id="viewing-local-roles_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.5. Viewing local roles and bindings</h2></div></div></div><p>
				You can use the <code class="literal">oc</code> CLI to view local roles and bindings by using the <code class="literal">oc describe</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the <code class="literal">oc</code> CLI.
					</li><li class="listitem"><p class="simpara">
						Obtain permission to view the local roles and bindings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Users with the <code class="literal">cluster-admin</code> default cluster role bound cluster-wide can perform any action on any resource, including viewing local roles and bindings.
							</li><li class="listitem">
								Users with the <code class="literal">admin</code> default cluster role bound locally can view and manage roles and bindings in that project.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To view the current set of local role bindings, which show the users and groups that are bound to various roles for the current project:
					</p><pre class="programlisting language-terminal">$ oc describe rolebinding.rbac</pre></li><li class="listitem"><p class="simpara">
						To view the local role bindings for a different project, add the <code class="literal">-n</code> flag to the command:
					</p><pre class="programlisting language-terminal">$ oc describe rolebinding.rbac -n joe-project</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:         admin
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  admin
Subjects:
  Kind  Name        Namespace
  ----  ----        ---------
  User  kube:admin


Name:         system:deployers
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows deploymentconfigs in this namespace to rollout pods in
                this namespace.  It is auto-managed by a controller; remove
                subjects to disa...
Role:
  Kind:  ClusterRole
  Name:  system:deployer
Subjects:
  Kind            Name      Namespace
  ----            ----      ---------
  ServiceAccount  deployer  joe-project


Name:         system:image-builders
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows builds in this namespace to push images to this
                namespace.  It is auto-managed by a controller; remove subjects
                to disable.
Role:
  Kind:  ClusterRole
  Name:  system:image-builder
Subjects:
  Kind            Name     Namespace
  ----            ----     ---------
  ServiceAccount  builder  joe-project


Name:         system:image-pullers
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows all pods in this namespace to pull images from this
                namespace.  It is auto-managed by a controller; remove subjects
                to disable.
Role:
  Kind:  ClusterRole
  Name:  system:image-puller
Subjects:
  Kind   Name                                Namespace
  ----   ----                                ---------
  Group  system:serviceaccounts:joe-project</pre>

						</p></div></li></ol></div></section><section class="section" id="adding-roles_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.6. Adding roles to users</h2></div></div></div><p>
				You can use the <code class="literal">oc adm</code> administrator CLI to manage the roles and bindings.
			</p><p>
				Binding, or adding, a role to users or groups gives the user or group the access that is granted by the role. You can add and remove roles to and from users and groups using <code class="literal">oc adm policy</code> commands.
			</p><p>
				You can bind any of the default cluster roles to local users or groups in your project.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a role to a user in a specific project:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-role-to-user &lt;role&gt; &lt;user&gt; -n &lt;project&gt;</pre><p class="simpara">
						For example, you can add the <code class="literal">admin</code> role to the <code class="literal">alice</code> user in <code class="literal">joe</code> project by running:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-role-to-user admin alice -n joe</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to add the role to the user:
					</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: admin-0
  namespace: joe
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User
  name: alice</pre></div></div></li><li class="listitem"><p class="simpara">
						View the local role bindings and verify the addition in the output:
					</p><pre class="programlisting language-terminal">$ oc describe rolebinding.rbac -n &lt;project&gt;</pre><p class="simpara">
						For example, to view the local role bindings for the <code class="literal">joe</code> project:
					</p><pre class="programlisting language-terminal">$ oc describe rolebinding.rbac -n joe</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:         admin
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  admin
Subjects:
  Kind  Name        Namespace
  ----  ----        ---------
  User  kube:admin


Name:         admin-0
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
Role:
  Kind:  ClusterRole
  Name:  admin
Subjects:
  Kind  Name   Namespace
  ----  ----   ---------
  User  alice <span id="CO26-1"><!--Empty--></span><span class="callout">1</span>


Name:         system:deployers
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows deploymentconfigs in this namespace to rollout pods in
                this namespace.  It is auto-managed by a controller; remove
                subjects to disa...
Role:
  Kind:  ClusterRole
  Name:  system:deployer
Subjects:
  Kind            Name      Namespace
  ----            ----      ---------
  ServiceAccount  deployer  joe


Name:         system:image-builders
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows builds in this namespace to push images to this
                namespace.  It is auto-managed by a controller; remove subjects
                to disable.
Role:
  Kind:  ClusterRole
  Name:  system:image-builder
Subjects:
  Kind            Name     Namespace
  ----            ----     ---------
  ServiceAccount  builder  joe


Name:         system:image-pullers
Labels:       &lt;none&gt;
Annotations:  openshift.io/description:
                Allows all pods in this namespace to pull images from this
                namespace.  It is auto-managed by a controller; remove subjects
                to disable.
Role:
  Kind:  ClusterRole
  Name:  system:image-puller
Subjects:
  Kind   Name                                Namespace
  ----   ----                                ---------
  Group  system:serviceaccounts:joe</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO26-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">alice</code> user has been added to the <code class="literal">admins</code> <code class="literal">RoleBinding</code>.
							</div></dd></dl></div></li></ol></div></section><section class="section" id="creating-local-role_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.7. Creating a local role</h2></div></div></div><p>
				You can create a local role for a project and then bind it to a user.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create a local role for a project, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create role &lt;name&gt; --verb=&lt;verb&gt; --resource=&lt;resource&gt; -n &lt;project&gt;</pre><p class="simpara">
						In this command, specify:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">&lt;name&gt;</code>, the local role’s name
							</li><li class="listitem">
								<code class="literal">&lt;verb&gt;</code>, a comma-separated list of the verbs to apply to the role
							</li><li class="listitem">
								<code class="literal">&lt;resource&gt;</code>, the resources that the role applies to
							</li><li class="listitem">
								<code class="literal">&lt;project&gt;</code>, the project name
							</li></ul></div><p class="simpara">
						For example, to create a local role that allows a user to view pods in the <code class="literal">blue</code> project, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create role podview --verb=get --resource=pod -n blue</pre></li><li class="listitem"><p class="simpara">
						To bind the new role to a user, run the following command:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-role-to-user podview user2 --role-namespace=blue -n blue</pre></li></ol></div></section><section class="section" id="creating-cluster-role_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.8. Creating a cluster role</h2></div></div></div><p>
				You can create a cluster role.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create a cluster role, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create clusterrole &lt;name&gt; --verb=&lt;verb&gt; --resource=&lt;resource&gt;</pre><p class="simpara">
						In this command, specify:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">&lt;name&gt;</code>, the local role’s name
							</li><li class="listitem">
								<code class="literal">&lt;verb&gt;</code>, a comma-separated list of the verbs to apply to the role
							</li><li class="listitem">
								<code class="literal">&lt;resource&gt;</code>, the resources that the role applies to
							</li></ul></div><p class="simpara">
						For example, to create a cluster role that allows a user to view pods, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create clusterrole podviewonly --verb=get --resource=pod</pre></li></ol></div></section><section class="section" id="local-role-binding-commands_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.9. Local role binding commands</h2></div></div></div><p>
				When you manage a user or group’s associated roles for local role bindings using the following operations, a project may be specified with the <code class="literal">-n</code> flag. If it is not specified, then the current project is used.
			</p><p>
				You can use the following commands for local RBAC management.
			</p><div class="table" id="idm140032732860464"><p class="title"><strong>Table 8.1. Local role binding operations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733715680" scope="col">Command</th><th align="left" valign="top" id="idm140032733714592" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy who-can <span class="emphasis"><em>&lt;verb&gt;</em></span> <span class="emphasis"><em>&lt;resource&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Indicates which users can perform an action on a resource.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy add-role-to-user <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;username&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Binds a specified role to specified users in the current project.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy remove-role-from-user <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;username&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Removes a given role from specified users in the current project.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy remove-user <span class="emphasis"><em>&lt;username&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Removes specified users and all of their roles in the current project.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy add-role-to-group <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;groupname&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Binds a given role to specified groups in the current project.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy remove-role-from-group <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;groupname&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Removes a given role from specified groups in the current project.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733715680"> <p>
								<code class="literal">$ oc adm policy remove-group <span class="emphasis"><em>&lt;groupname&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032733714592"> <p>
								Removes specified groups and all of their roles in the current project.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="cluster-role-binding-commands_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.10. Cluster role binding commands</h2></div></div></div><p>
				You can also manage cluster role bindings using the following operations. The <code class="literal">-n</code> flag is not used for these operations because cluster role bindings use non-namespaced resources.
			</p><div class="table" id="idm140032728983504"><p class="title"><strong>Table 8.2. Cluster role binding operations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032729122720" scope="col">Command</th><th align="left" valign="top" id="idm140032729121632" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032729122720"> <p>
								<code class="literal">$ oc adm policy add-cluster-role-to-user <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;username&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032729121632"> <p>
								Binds a given role to specified users for all projects in the cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032729122720"> <p>
								<code class="literal">$ oc adm policy remove-cluster-role-from-user <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;username&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032729121632"> <p>
								Removes a given role from specified users for all projects in the cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032729122720"> <p>
								<code class="literal">$ oc adm policy add-cluster-role-to-group <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;groupname&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032729121632"> <p>
								Binds a given role to specified groups for all projects in the cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032729122720"> <p>
								<code class="literal">$ oc adm policy remove-cluster-role-from-group <span class="emphasis"><em>&lt;role&gt;</em></span> <span class="emphasis"><em>&lt;groupname&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032729121632"> <p>
								Removes a given role from specified groups for all projects in the cluster.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="creating-cluster-admin_using-rbac"><div class="titlepage"><div><div><h2 class="title">8.11. Creating a cluster admin</h2></div></div></div><p>
				The <code class="literal">cluster-admin</code> role is required to perform administrator level tasks on the OpenShift Container Platform cluster, such as modifying cluster resources.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have created a user to define as the cluster admin.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Define the user as a cluster admin:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-cluster-role-to-user cluster-admin &lt;user&gt;</pre></li></ul></div></section></section><section class="chapter" id="removing-kubeadmin"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Removing the kubeadmin user</h1></div></div></div><section class="section" id="understanding-kubeadmin_removing-kubeadmin"><div class="titlepage"><div><div><h2 class="title">9.1. The kubeadmin user</h2></div></div></div><p>
				OpenShift Container Platform creates a cluster administrator, <code class="literal">kubeadmin</code>, after the installation process completes.
			</p><p>
				This user has the <code class="literal">cluster-admin</code> role automatically applied and is treated as the root user for the cluster. The password is dynamically generated and unique to your OpenShift Container Platform environment. After installation completes the password is provided in the installation program’s output. For example:
			</p><pre class="programlisting language-terminal">INFO Install complete!
INFO Run 'export KUBECONFIG=&lt;your working directory&gt;/auth/kubeconfig' to manage the cluster with 'oc', the OpenShift CLI.
INFO The cluster is ready when 'oc login -u kubeadmin -p &lt;provided&gt;' succeeds (wait a few minutes).
INFO Access the OpenShift web-console here: https://console-openshift-console.apps.demo1.openshift4-beta-abcorp.com
INFO Login to the console with user: kubeadmin, password: &lt;provided&gt;</pre></section><section class="section" id="removing-kubeadmin_removing-kubeadmin"><div class="titlepage"><div><div><h2 class="title">9.2. Removing the kubeadmin user</h2></div></div></div><p>
				After you define an identity provider and create a new <code class="literal">cluster-admin</code> user, you can remove the <code class="literal">kubeadmin</code> to improve cluster security.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					If you follow this procedure before another user is a <code class="literal">cluster-admin</code>, then OpenShift Container Platform must be reinstalled. It is not possible to undo this command.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have configured at least one identity provider.
					</li><li class="listitem">
						You must have added the <code class="literal">cluster-admin</code> role to a user.
					</li><li class="listitem">
						You must be logged in as an administrator.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Remove the <code class="literal">kubeadmin</code> secrets:
					</p><pre class="programlisting language-terminal">$ oc delete secrets kubeadmin -n kube-system</pre></li></ul></div></section></section><section class="chapter" id="understanding-and-creating-service-accounts"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Understanding and creating service accounts</h1></div></div></div><section class="section" id="service-accounts-overview_understanding-service-accounts"><div class="titlepage"><div><div><h2 class="title">10.1. Service accounts overview</h2></div></div></div><p>
				A service account is an OpenShift Container Platform account that allows a component to directly access the API. Service accounts are API objects that exist within each project. Service accounts provide a flexible way to control API access without sharing a regular user’s credentials.
			</p><p>
				When you use the OpenShift Container Platform CLI or web console, your API token authenticates you to the API. You can associate a component with a service account so that they can access the API without using a regular user’s credentials. For example, service accounts can allow:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replication controllers to make API calls to create or delete pods.
					</li><li class="listitem">
						Applications inside containers to make API calls for discovery purposes.
					</li><li class="listitem">
						External applications to make API calls for monitoring or integration purposes.
					</li></ul></div><p>
				Each service account’s user name is derived from its project and name:
			</p><pre class="programlisting language-text">system:serviceaccount:&lt;project&gt;:&lt;name&gt;</pre><p>
				Every service account is also a member of two groups:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032732115840" scope="col">Group</th><th align="left" valign="top" id="idm140032732114752" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032732115840"> <p>
								system:serviceaccounts
							</p>
							 </td><td align="left" valign="top" headers="idm140032732114752"> <p>
								Includes all service accounts in the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032732115840"> <p>
								system:serviceaccounts:&lt;project&gt;
							</p>
							 </td><td align="left" valign="top" headers="idm140032732114752"> <p>
								Includes all service accounts in the specified project.
							</p>
							 </td></tr></tbody></table></div><p>
				Each service account automatically contains two secrets:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An API token
					</li><li class="listitem">
						Credentials for the OpenShift Container Registry
					</li></ul></div><p>
				The generated API token and registry credentials do not expire, but you can revoke them by deleting the secret. When you delete the secret, a new one is automatically generated to take its place.
			</p></section><section class="section" id="service-accounts-managing_understanding-service-accounts"><div class="titlepage"><div><div><h2 class="title">10.2. Creating service accounts</h2></div></div></div><p>
				You can create a service account in a project and grant it permissions by binding it to a role.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: To view the service accounts in the current project:
					</p><pre class="programlisting language-terminal">$ oc get sa</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       SECRETS   AGE
builder    2         2d
default    2         2d
deployer   2         2d</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						To create a new service account in the current project:
					</p><pre class="programlisting language-terminal">$ oc create sa &lt;service_account_name&gt; <span id="CO27-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO27-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								To create a service account in a different project, specify <code class="literal">-n &lt;project_name&gt;</code>.
							</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">serviceaccount "robot" created</pre>

						</p></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to create the service account:
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: &lt;service_account_name&gt;
  namespace: &lt;current_project&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
						Optional: View the secrets for the service account:
					</p><pre class="programlisting language-terminal">$ oc describe sa robot</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:                robot
Namespace:           project1
Labels:	             &lt;none&gt;
Annotations:	     &lt;none&gt;
Image pull secrets:  robot-dockercfg-qzbhb
Mountable secrets:   robot-dockercfg-qzbhb
Tokens:              robot-token-f4khf
Events:              &lt;none&gt;</pre>

						</p></div></li></ol></div></section><section class="section" id="service-accounts-granting-roles_understanding-service-accounts"><div class="titlepage"><div><div><h2 class="title">10.3. Examples of granting roles to service accounts</h2></div></div></div><p>
				You can grant roles to service accounts in the same way that you grant roles to a regular user account.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can modify the service accounts for the current project. For example, to add the <code class="literal">view</code> role to the <code class="literal">robot</code> service account in the <code class="literal">top-secret</code> project:
					</p><pre class="programlisting language-terminal">$ oc policy add-role-to-user view system:serviceaccount:top-secret:robot</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to add the role:
					</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: view
  namespace: top-secret
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: view
subjects:
- kind: ServiceAccount
  name: robot
  namespace: top-secret</pre></div></div></li><li class="listitem"><p class="simpara">
						You can also grant access to a specific service account in a project. For example, from the project to which the service account belongs, use the <code class="literal">-z</code> flag and specify the <code class="literal">&lt;service_account_name&gt;</code>
					</p><pre class="programlisting language-terminal">$ oc policy add-role-to-user &lt;role_name&gt; -z &lt;service_account_name&gt;</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If you want to grant access to a specific service account in a project, use the <code class="literal">-z</code> flag. Using this flag helps prevent typos and ensures that access is granted to only the specified service account.
						</p></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to add the role:
					</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: &lt;rolebinding_name&gt;
  namespace: &lt;current_project_name&gt;
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: &lt;role_name&gt;
subjects:
- kind: ServiceAccount
  name: &lt;service_account_name&gt;
  namespace: &lt;current_project_name&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
						To modify a different namespace, you can use the <code class="literal">-n</code> option to indicate the project namespace it applies to, as shown in the following examples.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								For example, to allow all service accounts in all projects to view resources in the <code class="literal">my-project</code> project:
							</p><pre class="programlisting language-terminal">$ oc policy add-role-to-group view system:serviceaccounts -n my-project</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
								You can alternatively apply the following YAML to add the role:
							</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: view
  namespace: my-project
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: view
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: system:serviceaccounts</pre></div></div></li><li class="listitem"><p class="simpara">
								To allow all service accounts in the <code class="literal">managers</code> project to edit resources in the <code class="literal">my-project</code> project:
							</p><pre class="programlisting language-terminal">$ oc policy add-role-to-group edit system:serviceaccounts:managers -n my-project</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
								You can alternatively apply the following YAML to add the role:
							</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: edit
  namespace: my-project
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: edit
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: system:serviceaccounts:managers</pre></div></div></li></ul></div></li></ul></div></section></section><section class="chapter" id="using-service-accounts"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Using service accounts in applications</h1></div></div></div><section class="section" id="service-accounts-overview_using-service-accounts"><div class="titlepage"><div><div><h2 class="title">11.1. Service accounts overview</h2></div></div></div><p>
				A service account is an OpenShift Container Platform account that allows a component to directly access the API. Service accounts are API objects that exist within each project. Service accounts provide a flexible way to control API access without sharing a regular user’s credentials.
			</p><p>
				When you use the OpenShift Container Platform CLI or web console, your API token authenticates you to the API. You can associate a component with a service account so that they can access the API without using a regular user’s credentials. For example, service accounts can allow:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replication controllers to make API calls to create or delete pods.
					</li><li class="listitem">
						Applications inside containers to make API calls for discovery purposes.
					</li><li class="listitem">
						External applications to make API calls for monitoring or integration purposes.
					</li></ul></div><p>
				Each service account’s user name is derived from its project and name:
			</p><pre class="programlisting language-text">system:serviceaccount:&lt;project&gt;:&lt;name&gt;</pre><p>
				Every service account is also a member of two groups:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733604384" scope="col">Group</th><th align="left" valign="top" id="idm140032733603296" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733604384"> <p>
								system:serviceaccounts
							</p>
							 </td><td align="left" valign="top" headers="idm140032733603296"> <p>
								Includes all service accounts in the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140032733604384"> <p>
								system:serviceaccounts:&lt;project&gt;
							</p>
							 </td><td align="left" valign="top" headers="idm140032733603296"> <p>
								Includes all service accounts in the specified project.
							</p>
							 </td></tr></tbody></table></div><p>
				Each service account automatically contains two secrets:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An API token
					</li><li class="listitem">
						Credentials for the OpenShift Container Registry
					</li></ul></div><p>
				The generated API token and registry credentials do not expire, but you can revoke them by deleting the secret. When you delete the secret, a new one is automatically generated to take its place.
			</p></section><section class="section" id="service-accounts-default_using-service-accounts"><div class="titlepage"><div><div><h2 class="title">11.2. Default service accounts</h2></div></div></div><p>
				Your OpenShift Container Platform cluster contains default service accounts for cluster management and generates more service accounts for each project.
			</p><section class="section" id="default-cluster-service-accounts_using-service-accounts"><div class="titlepage"><div><div><h3 class="title">11.2.1. Default cluster service accounts</h3></div></div></div><p>
					Several infrastructure controllers run using service account credentials. The following service accounts are created in the OpenShift Container Platform infrastructure project (<code class="literal">openshift-infra</code>) at server start, and given the following roles cluster-wide:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032729954624" scope="col">Service Account</th><th align="left" valign="top" id="idm140032729953536" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032729954624"> <p>
									<code class="literal">replication-controller</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032729953536"> <p>
									Assigned the <code class="literal">system:replication-controller</code> role
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729954624"> <p>
									<code class="literal">deployment-controller</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032729953536"> <p>
									Assigned the <code class="literal">system:deployment-controller</code> role
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032729954624"> <p>
									<code class="literal">build-controller</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032729953536"> <p>
									Assigned the <code class="literal">system:build-controller</code> role. Additionally, the <code class="literal">build-controller</code> service account is included in the privileged security context constraint to create privileged build pods.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="default-service-accounts-and-roles_using-service-accounts"><div class="titlepage"><div><div><h3 class="title">11.2.2. Default project service accounts and roles</h3></div></div></div><p>
					Three service accounts are automatically created in each project:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733938896" scope="col">Service Account</th><th align="left" valign="top" id="idm140032733937808" scope="col">Usage</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733938896"> <p>
									<code class="literal">builder</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733937808"> <p>
									Used by build pods. It is given the <code class="literal">system:image-builder</code> role, which allows pushing images to any imagestream in the project using the internal Docker registry.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733938896"> <p>
									<code class="literal">deployer</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733937808"> <p>
									Used by deployment pods and given the <code class="literal">system:deployer</code> role, which allows viewing and modifying replication controllers and pods in the project.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733938896"> <p>
									<code class="literal">default</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733937808"> <p>
									Used to run all other pods unless they specify a different service account.
								</p>
								 </td></tr></tbody></table></div><p>
					All service accounts in a project are given the <code class="literal">system:image-puller</code> role, which allows pulling images from any imagestream in the project using the internal container image registry.
				</p></section><section class="section" id="auto-generated-sa-token-secrets_using-service-accounts"><div class="titlepage"><div><div><h3 class="title">11.2.3. About automatically generated service account token secrets</h3></div></div></div><p>
					When a service account is created, a service account token secret is automatically generated for it. This service account token secret, along with an automatically generated docker configuration secret, is used to authenticate to the internal OpenShift Container Platform registry. Do not rely on these automatically generated secrets for your own use; they might be removed in a future OpenShift Container Platform release.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Prior to OpenShift Container Platform 4.11, a second service account token secret was generated when a service account was created. This service account token secret was used to access the Kubernetes API.
					</p><p>
						Starting with OpenShift Container Platform 4.11, this second service account token secret is no longer created. This is because the <code class="literal">LegacyServiceAccountTokenNoAutoGeneration</code> upstream Kubernetes feature gate was enabled, which stops the automatic generation of secret-based service account tokens to access the Kubernetes API.
					</p><p>
						After upgrading to 4.13, any existing service account token secrets are not deleted and continue to function.
					</p></div></div><p>
					Workloads are automatically injected with a projected volume to obtain a bound service account token. If your workload needs an additional service account token, add an additional projected volume in your workload manifest. Bound service account tokens are more secure than service account token secrets for the following reasons:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Bound service account tokens have a bounded lifetime.
						</li><li class="listitem">
							Bound service account tokens contain audiences.
						</li><li class="listitem">
							Bound service account tokens can be bound to pods or secrets and the bound tokens are invalidated when the bound object is removed.
						</li></ul></div><p>
					For more information, see <span class="emphasis"><em>Configuring bound service account tokens using volume projection</em></span>.
				</p><p>
					You can also manually create a service account token secret to obtain a token, if the security exposure of a non-expiring token in a readable API object is acceptable to you. For more information, see <span class="emphasis"><em>Creating a service account token secret</em></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information about requesting bound service account tokens, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#bound-sa-tokens-configuring_bound-service-account-tokens">Configuring bound service account tokens using volume projection</a>.
						</li><li class="listitem">
							For information about creating a service account token secret, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-pods-secrets-creating-sa_nodes-pods-secrets">Creating a service account token secret</a>.
						</li></ul></div></section></section><section class="section" id="service-accounts-managing_using-service-accounts"><div class="titlepage"><div><div><h2 class="title">11.3. Creating service accounts</h2></div></div></div><p>
				You can create a service account in a project and grant it permissions by binding it to a role.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: To view the service accounts in the current project:
					</p><pre class="programlisting language-terminal">$ oc get sa</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME       SECRETS   AGE
builder    2         2d
default    2         2d
deployer   2         2d</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						To create a new service account in the current project:
					</p><pre class="programlisting language-terminal">$ oc create sa &lt;service_account_name&gt; <span id="CO28-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO28-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								To create a service account in a different project, specify <code class="literal">-n &lt;project_name&gt;</code>.
							</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">serviceaccount "robot" created</pre>

						</p></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to create the service account:
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: &lt;service_account_name&gt;
  namespace: &lt;current_project&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
						Optional: View the secrets for the service account:
					</p><pre class="programlisting language-terminal">$ oc describe sa robot</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">Name:                robot
Namespace:           project1
Labels:	             &lt;none&gt;
Annotations:	     &lt;none&gt;
Image pull secrets:  robot-dockercfg-qzbhb
Mountable secrets:   robot-dockercfg-qzbhb
Tokens:              robot-token-f4khf
Events:              &lt;none&gt;</pre>

						</p></div></li></ol></div></section></section><section class="chapter" id="using-service-accounts-as-oauth-client"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Using a service account as an OAuth client</h1></div></div></div><section class="section" id="service-accounts-as-oauth-clients_using-service-accounts-as-oauth-client"><div class="titlepage"><div><div><h2 class="title">12.1. Service accounts as OAuth clients</h2></div></div></div><p>
				You can use a service account as a constrained form of OAuth client. Service accounts can request only a subset of scopes that allow access to some basic user information and role-based power inside of the service account’s own namespace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">user:info</code>
					</li><li class="listitem">
						<code class="literal">user:check-access</code>
					</li><li class="listitem">
						<code class="literal">role:&lt;any_role&gt;:&lt;service_account_namespace&gt;</code>
					</li><li class="listitem">
						<code class="literal">role:&lt;any_role&gt;:&lt;service_account_namespace&gt;:!</code>
					</li></ul></div><p>
				When using a service account as an OAuth client:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">client_id</code> is <code class="literal">system:serviceaccount:&lt;service_account_namespace&gt;:&lt;service_account_name&gt;</code>.
					</li><li class="listitem"><p class="simpara">
						<code class="literal">client_secret</code> can be any of the API tokens for that service account. For example:
					</p><pre class="programlisting language-terminal">$ oc sa get-token &lt;service_account_name&gt;</pre></li><li class="listitem">
						To get <code class="literal">WWW-Authenticate</code> challenges, set an <code class="literal">serviceaccounts.openshift.io/oauth-want-challenges</code> annotation on the service account to <code class="literal">true</code>.
					</li><li class="listitem">
						<code class="literal">redirect_uri</code> must match an annotation on the service account.
					</li></ul></div><section class="section" id="redirect-uris-for-service-accounts_using-service-accounts-as-oauth-client"><div class="titlepage"><div><div><h3 class="title">12.1.1. Redirect URIs for service accounts as OAuth clients</h3></div></div></div><p>
					Annotation keys must have the prefix <code class="literal">serviceaccounts.openshift.io/oauth-redirecturi.</code> or <code class="literal">serviceaccounts.openshift.io/oauth-redirectreference.</code> such as:
				</p><pre class="screen">serviceaccounts.openshift.io/oauth-redirecturi.&lt;name&gt;</pre><p>
					In its simplest form, the annotation can be used to directly specify valid redirect URIs. For example:
				</p><pre class="screen">"serviceaccounts.openshift.io/oauth-redirecturi.first":  "https://example.com"
"serviceaccounts.openshift.io/oauth-redirecturi.second": "https://other.com"</pre><p>
					The <code class="literal">first</code> and <code class="literal">second</code> postfixes in the above example are used to separate the two valid redirect URIs.
				</p><p>
					In more complex configurations, static redirect URIs may not be enough. For example, perhaps you want all Ingresses for a route to be considered valid. This is where dynamic redirect URIs via the <code class="literal">serviceaccounts.openshift.io/oauth-redirectreference.</code> prefix come into play.
				</p><p>
					For example:
				</p><pre class="screen">"serviceaccounts.openshift.io/oauth-redirectreference.first": "{\"kind\":\"OAuthRedirectReference\",\"apiVersion\":\"v1\",\"reference\":{\"kind\":\"Route\",\"name\":\"jenkins\"}}"</pre><p>
					Since the value for this annotation contains serialized JSON data, it is easier to see in an expanded format:
				</p><pre class="programlisting language-json">{
  "kind": "OAuthRedirectReference",
  "apiVersion": "v1",
  "reference": {
    "kind": "Route",
    "name": "jenkins"
  }
}</pre><p>
					Now you can see that an <code class="literal">OAuthRedirectReference</code> allows us to reference the route named <code class="literal">jenkins</code>. Thus, all Ingresses for that route will now be considered valid. The full specification for an <code class="literal">OAuthRedirectReference</code> is:
				</p><pre class="programlisting language-json">{
  "kind": "OAuthRedirectReference",
  "apiVersion": "v1",
  "reference": {
    "kind": ..., <span id="CO29-1"><!--Empty--></span><span class="callout">1</span>
    "name": ..., <span id="CO29-2"><!--Empty--></span><span class="callout">2</span>
    "group": ... <span id="CO29-3"><!--Empty--></span><span class="callout">3</span>
  }
}</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO29-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							<code class="literal">kind</code> refers to the type of the object being referenced. Currently, only <code class="literal">route</code> is supported.
						</div></dd><dt><a href="#CO29-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							<code class="literal">name</code> refers to the name of the object. The object must be in the same namespace as the service account.
						</div></dd><dt><a href="#CO29-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							<code class="literal">group</code> refers to the group of the object. Leave this blank, as the group for a route is the empty string.
						</div></dd></dl></div><p>
					Both annotation prefixes can be combined to override the data provided by the reference object. For example:
				</p><pre class="screen">"serviceaccounts.openshift.io/oauth-redirecturi.first":  "custompath"
"serviceaccounts.openshift.io/oauth-redirectreference.first": "{\"kind\":\"OAuthRedirectReference\",\"apiVersion\":\"v1\",\"reference\":{\"kind\":\"Route\",\"name\":\"jenkins\"}}"</pre><p>
					The <code class="literal">first</code> postfix is used to tie the annotations together. Assuming that the <code class="literal">jenkins</code> route had an Ingress of <code class="literal">https://example.com</code>, now <code class="literal">https://example.com/custompath</code> is considered valid, but <code class="literal">https://example.com</code> is not. The format for partially supplying override data is as follows:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733146336" scope="col">Type</th><th align="left" valign="top" id="idm140032733145248" scope="col">Syntax</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733146336"> <p>
									Scheme
								</p>
								 </td><td align="left" valign="top" headers="idm140032733145248"> <p>
									"https://"
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733146336"> <p>
									Hostname
								</p>
								 </td><td align="left" valign="top" headers="idm140032733145248"> <p>
									"//website.com"
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733146336"> <p>
									Port
								</p>
								 </td><td align="left" valign="top" headers="idm140032733145248"> <p>
									"//:8000"
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733146336"> <p>
									Path
								</p>
								 </td><td align="left" valign="top" headers="idm140032733145248"> <p>
									"examplepath"
								</p>
								 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Specifying a hostname override will replace the hostname data from the referenced object, which is not likely to be desired behavior.
					</p></div></div><p>
					Any combination of the above syntax can be combined using the following format:
				</p><p>
					<code class="literal">&lt;scheme:&gt;//&lt;hostname&gt;&lt;:port&gt;/&lt;path&gt;</code>
				</p><p>
					The same object can be referenced more than once for more flexibility:
				</p><pre class="screen">"serviceaccounts.openshift.io/oauth-redirecturi.first":  "custompath"
"serviceaccounts.openshift.io/oauth-redirectreference.first": "{\"kind\":\"OAuthRedirectReference\",\"apiVersion\":\"v1\",\"reference\":{\"kind\":\"Route\",\"name\":\"jenkins\"}}"
"serviceaccounts.openshift.io/oauth-redirecturi.second":  "//:8000"
"serviceaccounts.openshift.io/oauth-redirectreference.second": "{\"kind\":\"OAuthRedirectReference\",\"apiVersion\":\"v1\",\"reference\":{\"kind\":\"Route\",\"name\":\"jenkins\"}}"</pre><p>
					Assuming that the route named <code class="literal">jenkins</code> has an Ingress of <code class="literal">https://example.com</code>, then both <code class="literal">https://example.com:8000</code> and <code class="literal">https://example.com/custompath</code> are considered valid.
				</p><p>
					Static and dynamic annotations can be used at the same time to achieve the desired behavior:
				</p><pre class="screen">"serviceaccounts.openshift.io/oauth-redirectreference.first": "{\"kind\":\"OAuthRedirectReference\",\"apiVersion\":\"v1\",\"reference\":{\"kind\":\"Route\",\"name\":\"jenkins\"}}"
"serviceaccounts.openshift.io/oauth-redirecturi.second": "https://other.com"</pre></section></section></section><section class="chapter" id="tokens-scoping"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Scoping tokens</h1></div></div></div><section class="section" id="tokens-scoping-about_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">13.1. About scoping tokens</h2></div></div></div><p>
				You can create scoped tokens to delegate some of your permissions to another user or service account. For example, a project administrator might want to delegate the power to create pods.
			</p><p>
				A scoped token is a token that identifies as a given user but is limited to certain actions by its scope. Only a user with the <code class="literal">cluster-admin</code> role can create scoped tokens.
			</p><p>
				Scopes are evaluated by converting the set of scopes for a token into a set of <code class="literal">PolicyRules</code>. Then, the request is matched against those rules. The request attributes must match at least one of the scope rules to be passed to the "normal" authorizer for further authorization checks.
			</p><section class="section" id="scoping-tokens-user-scopes_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">13.1.1. User scopes</h3></div></div></div><p>
					User scopes are focused on getting information about a given user. They are intent-based, so the rules are automatically created for you:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">user:full</code> - Allows full read/write access to the API with all of the user’s permissions.
						</li><li class="listitem">
							<code class="literal">user:info</code> - Allows read-only access to information about the user, such as name and groups.
						</li><li class="listitem">
							<code class="literal">user:check-access</code> - Allows access to <code class="literal">self-localsubjectaccessreviews</code> and <code class="literal">self-subjectaccessreviews</code>. These are the variables where you pass an empty user and groups in your request object.
						</li><li class="listitem">
							<code class="literal">user:list-projects</code> - Allows read-only access to list the projects the user has access to.
						</li></ul></div></section><section class="section" id="scoping-tokens-role-scope_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">13.1.2. Role scope</h3></div></div></div><p>
					The role scope allows you to have the same level of access as a given role filtered by namespace.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">role:&lt;cluster-role name&gt;:&lt;namespace or * for all&gt;</code> - Limits the scope to the rules specified by the cluster-role, but only in the specified namespace .
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Caveat: This prevents escalating access. Even if the role allows access to resources like secrets, rolebindings, and roles, this scope will deny access to those resources. This helps prevent unexpected escalations. Many people do not think of a role like <code class="literal">edit</code> as being an escalating role, but with access to a secret it is.
							</p></div></div></li><li class="listitem">
							<code class="literal">role:&lt;cluster-role name&gt;:&lt;namespace or * for all&gt;:!</code> - This is similar to the example above, except that including the bang causes this scope to allow escalating access.
						</li></ul></div></section></section></section><section class="chapter" id="bound-service-account-tokens"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Using bound service account tokens</h1></div></div></div><p>
			You can use bound service account tokens, which improves the ability to integrate with cloud provider identity access management (IAM) services, such as AWS IAM.
		</p><section class="section" id="bound-sa-tokens-about_bound-service-account-tokens"><div class="titlepage"><div><div><h2 class="title">14.1. About bound service account tokens</h2></div></div></div><p>
				You can use bound service account tokens to limit the scope of permissions for a given service account token. These tokens are audience and time-bound. This facilitates the authentication of a service account to an IAM role and the generation of temporary credentials mounted to a pod. You can request bound service account tokens by using volume projection and the TokenRequest API.
			</p></section><section class="section" id="bound-sa-tokens-configuring_bound-service-account-tokens"><div class="titlepage"><div><div><h2 class="title">14.2. Configuring bound service account tokens using volume projection</h2></div></div></div><p>
				You can configure pods to request bound service account tokens by using volume projection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem">
						You have created a service account. This procedure assumes that the service account is named <code class="literal">build-robot</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Set the service account issuer.
					</p><p class="simpara">
						This step is typically not required if the bound tokens are used only within the cluster.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If you change the service account issuer to a custom one, the previous service account issuer is still trusted for the next 24 hours.
						</p><p>
							You can force all holders to request a new bound token either by manually restarting all pods in the cluster or by performing a rolling node restart. Before performing either action, wait for a new revision of the Kubernetes API server pods to roll out with your service account issuer changes.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">cluster</code> <code class="literal">Authentication</code> object:
							</p><pre class="programlisting language-terminal">$ oc edit authentications cluster</pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">spec.serviceAccountIssuer</code> field to the desired service account issuer value:
							</p><pre class="programlisting language-yaml">spec:
  serviceAccountIssuer: https://test.default.svc <span id="CO30-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO30-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This value should be a URL from which the recipient of a bound token can source the public keys necessary to verify the signature of the token. The default is <code class="literal">https://kubernetes.default.svc</code>.
									</div></dd></dl></div></li><li class="listitem">
								Save the file to apply the changes.
							</li><li class="listitem"><p class="simpara">
								Wait for a new revision of the Kubernetes API server pods to roll out. It can take several minutes for all nodes to update to the new revision. Run the following command:
							</p><pre class="programlisting language-terminal">$ oc get kubeapiserver -o=jsonpath='{range .items[0].status.conditions[?(@.type=="NodeInstallerProgressing")]}{.reason}{"\n"}{.message}{"\n"}'</pre><p class="simpara">
								Review the <code class="literal">NodeInstallerProgressing</code> status condition for the Kubernetes API server to verify that all nodes are at the latest revision. The output shows <code class="literal">AllNodesAtLatestRevision</code> upon successful update:
							</p><pre class="programlisting language-terminal">AllNodesAtLatestRevision
3 nodes are at revision 12 <span id="CO31-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO31-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										In this example, the latest revision number is <code class="literal">12</code>.
									</div></dd></dl></div><p class="simpara">
								If the output shows a message similar to one of the following messages, the update is still in progress. Wait a few minutes and try again.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">3 nodes are at revision 11; 0 nodes have achieved new revision 12</code>
									</li><li class="listitem">
										<code class="literal">2 nodes are at revision 11; 1 nodes are at revision 12</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Optional: Force the holder to request a new bound token either by performing a rolling node restart or by manually restarting all pods in the cluster.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Perform a rolling node restart:
									</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
											It is not recommended to perform a rolling node restart if you have custom workloads running on your cluster, because it can cause a service interruption. Instead, manually restart all pods in the cluster.
										</p></div></div><p class="simpara">
										Restart nodes sequentially. Wait for the node to become fully available before restarting the next node. See <span class="emphasis"><em>Rebooting a node gracefully</em></span> for instructions on how to drain, restart, and mark a node as schedulable again.
									</p></li><li class="listitem"><p class="simpara">
										Manually restart all pods in the cluster:
									</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
											Be aware that running this command causes a service interruption, because it deletes every running pod in every namespace. These pods will automatically restart after they are deleted.
										</p></div></div><p class="simpara">
										Run the following command:
									</p><pre class="programlisting language-terminal">$ for I in $(oc get ns -o jsonpath='{range .items[*]} {.metadata.name}{"\n"} {end}'); \
      do oc delete pods --all -n $I; \
      sleep 1; \
      done</pre></li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure a pod to use a bound service account token by using volume projection.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a file called <code class="literal">pod-projected-svc-token.yaml</code> with the following contents:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - image: nginx
    name: nginx
    volumeMounts:
    - mountPath: /var/run/secrets/tokens
      name: vault-token
  serviceAccountName: build-robot <span id="CO32-1"><!--Empty--></span><span class="callout">1</span>
  volumes:
  - name: vault-token
    projected:
      sources:
      - serviceAccountToken:
          path: vault-token <span id="CO32-2"><!--Empty--></span><span class="callout">2</span>
          expirationSeconds: 7200 <span id="CO32-3"><!--Empty--></span><span class="callout">3</span>
          audience: vault <span id="CO32-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO32-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										A reference to an existing service account.
									</div></dd><dt><a href="#CO32-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The path relative to the mount point of the file to project the token into.
									</div></dd><dt><a href="#CO32-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optionally set the expiration of the service account token, in seconds. The default is 3600 seconds (1 hour) and must be at least 600 seconds (10 minutes). The kubelet will start trying to rotate the token if the token is older than 80 percent of its time to live or if the token is older than 24 hours.
									</div></dd><dt><a href="#CO32-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optionally set the intended audience of the token. The recipient of a token should verify that the recipient identity matches the audience claim of the token, and should otherwise reject the token. The audience defaults to the identifier of the API server.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									In order to prevent unexpected failure, OpenShift Container Platform overrides the <code class="literal">expirationSeconds</code> value to be one year from the initial token generation with the <code class="literal">--service-account-extend-token-expiration</code> default of <code class="literal">true</code>. You cannot change this setting.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Create the pod:
							</p><pre class="programlisting language-terminal">$ oc create -f pod-projected-svc-token.yaml</pre><p class="simpara">
								The kubelet requests and stores the token on behalf of the pod, makes the token available to the pod at a configurable file path, and refreshes the token as it approaches expiration.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						The application that uses the bound token must handle reloading the token when it rotates.
					</p><p class="simpara">
						The kubelet rotates the token if it is older than 80 percent of its time to live, or if the token is older than 24 hours.
					</p></li></ol></div></section><section class="section" id="bound-sa-tokens-configuring-externally_bound-service-account-tokens"><div class="titlepage"><div><div><h2 class="title">14.3. Creating bound service account tokens outside the pod</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem">
						You have created a service account. This procedure assumes that the service account is named <code class="literal">build-robot</code>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create the bound service account token outside the pod by running the following command:
					</p><pre class="programlisting language-terminal">$ oc create token build-robot</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">eyJhbGciOiJSUzI1NiIsImtpZCI6IkY2M1N4MHRvc2xFNnFSQlA4eG9GYzVPdnN3NkhIV0tRWmFrUDRNcWx4S0kifQ.eyJhdWQiOlsiaHR0cHM6Ly9pc3N1ZXIyLnRlc3QuY29tIiwiaHR0cHM6Ly9pc3N1ZXIxLnRlc3QuY29tIiwiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjIl0sImV4cCI6MTY3OTU0MzgzMCwiaWF0IjoxNjc5NTQwMjMwLCJpc3MiOiJodHRwczovL2lzc3VlcjIudGVzdC5jb20iLCJrdWJlcm5ldGVzLmlvIjp7Im5hbWVzcGFjZSI6ImRlZmF1bHQiLCJzZXJ2aWNlYWNjb3VudCI6eyJuYW1lIjoidGVzdC1zYSIsInVpZCI6ImM3ZjA4MjkwLWIzOTUtNGM4NC04NjI4LTMzMTM1NTVhNWY1OSJ9fSwibmJmIjoxNjc5NTQwMjMwLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6ZGVmYXVsdDp0ZXN0LXNhIn0.WyAOPvh1BFMUl3LNhBCrQeaB5wSynbnCfojWuNNPSilT4YvFnKibxwREwmzHpV4LO1xOFZHSi6bXBOmG_o-m0XNDYL3FrGHd65mymiFyluztxa2lgHVxjw5reIV5ZLgNSol3Y8bJqQqmNg3rtQQWRML2kpJBXdDHNww0E5XOypmffYkfkadli8lN5QQD-MhsCbiAF8waCYs8bj6V6Y7uUKTcxee8sCjiRMVtXKjQtooERKm-CH_p57wxCljIBeM89VdaR51NJGued4hVV5lxvVrYZFu89lBEAq4oyQN_d6N1vBWGXQMyoihnt_fQjn-NfnlJWk-3NSZDIluDJAv7e-MTEk3geDrHVQKNEzDei2-Un64hSzb-n1g1M0Vn0885wQBQAePC9UlZm8YZlMNk1tq6wIUKQTMv3HPfi5HtBRqVc2eVs0EfMX4-x-PHhPCasJ6qLJWyj6DvyQ08dP4DW_TWZVGvKlmId0hzwpg59TTcLR0iCklSEJgAVEEd13Aa_M0-faD11L3MhUGxw0qxgOsPczdXUsolSISbefs7OKymzFSIkTAn9sDQ8PHMOsuyxsK8vzfrR-E0z7MAeguZ2kaIY7cZqbN6WFy0caWgx46hrKem9vCKALefElRYbCg3hcBmowBcRTOqaFHLNnHghhU1LaRpoFzH7OUarqX9SGQ</pre>

						</p></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-nodes-rebooting-gracefully_nodes-nodes-rebooting">Rebooting a node gracefully</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#service-accounts-managing_understanding-service-accounts">Creating service accounts</a>
					</li></ul></div></section></section><section class="chapter" id="managing-pod-security-policies"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Managing security context constraints</h1></div></div></div><p>
			In OpenShift Container Platform, you can use security context constraints (SCCs) to control permissions for the pods in your cluster.
		</p><p>
			Default SCCs are created during installation and when you install some Operators or other components. As a cluster administrator, you can also create your own SCCs by using the OpenShift CLI (<code class="literal">oc</code>).
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Do not modify the default SCCs. Customizing the default SCCs can lead to issues when some of the platform pods deploy or OpenShift Container Platform is upgraded. Additionally, the default SCC values are reset to the defaults during some cluster upgrades, which discards all customizations to those SCCs.
			</p><p>
				Instead of modifying the default SCCs, create and modify your own SCCs as needed. For detailed steps, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#security-context-constraints-creating_configuring-internal-oauth">Creating security context constraints</a>.
			</p></div></div><section class="section" id="security-context-constraints-about_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.1. About security context constraints</h2></div></div></div><p>
				Similar to the way that RBAC resources control user access, administrators can use security context constraints (SCCs) to control permissions for pods. These permissions determine the actions that a pod can perform and what resources it can access. You can use SCCs to define a set of conditions that a pod must run with to be accepted into the system.
			</p><p>
				Security context constraints allow an administrator to control:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Whether a pod can run privileged containers with the <code class="literal">allowPrivilegedContainer</code> flag
					</li><li class="listitem">
						Whether a pod is constrained with the <code class="literal">allowPrivilegeEscalation</code> flag
					</li><li class="listitem">
						The capabilities that a container can request
					</li><li class="listitem">
						The use of host directories as volumes
					</li><li class="listitem">
						The SELinux context of the container
					</li><li class="listitem">
						The container user ID
					</li><li class="listitem">
						The use of host namespaces and networking
					</li><li class="listitem">
						The allocation of an <code class="literal">FSGroup</code> that owns the pod volumes
					</li><li class="listitem">
						The configuration of allowable supplemental groups
					</li><li class="listitem">
						Whether a container requires write access to its root file system
					</li><li class="listitem">
						The usage of volume types
					</li><li class="listitem">
						The configuration of allowable <code class="literal">seccomp</code> profiles
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Do not set the <code class="literal">openshift.io/run-level</code> label on any namespaces in OpenShift Container Platform. This label is for use by internal OpenShift Container Platform components to manage the startup of major API groups, such as the Kubernetes API server and OpenShift API server. If the <code class="literal">openshift.io/run-level</code> label is set, no SCCs are applied to pods in that namespace, causing any workloads running in that namespace to be highly privileged.
				</p></div></div><section class="section" id="default-sccs_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.1. Default security context constraints</h3></div></div></div><p>
					The cluster contains several default security context constraints (SCCs) as described in the table below. Additional SCCs might be installed when you install Operators or other components to OpenShift Container Platform.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Do not modify the default SCCs. Customizing the default SCCs can lead to issues when some of the platform pods deploy or OpenShift Container Platform is upgraded. Additionally, the default SCC values are reset to the defaults during some cluster upgrades, which discards all customizations to those SCCs.
					</p><p>
						Instead of modifying the default SCCs, create and modify your own SCCs as needed. For detailed steps, see <span class="emphasis"><em>Creating security context constraints</em></span>.
					</p></div></div><div class="table" id="idm140032733594496"><p class="title"><strong>Table 15.1. Default security context constraints</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733589648" scope="col">Security context constraint</th><th align="left" valign="top" id="idm140032733588544" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">anyuid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Provides all features of the <code class="literal">restricted</code> SCC, but allows users to run with any UID and any GID.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">hostaccess</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Allows access to all host namespaces but still requires pods to be run with a UID and SELinux context that are allocated to the namespace.
								</p>
								 <div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										This SCC allows host access to namespaces, file systems, and PIDs. It should only be used by trusted pods. Grant with caution.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">hostmount-anyuid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Provides all the features of the <code class="literal">restricted</code> SCC, but allows host mounts and running as any UID and any GID on the system.
								</p>
								 <div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										This SCC allows host file system access as any UID, including UID 0. Grant with caution.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">hostnetwork</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Allows using host networking and host ports but still requires pods to be run with a UID and SELinux context that are allocated to the namespace.
								</p>
								 <div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										If additional workloads are run on control plane hosts, use caution when providing access to <code class="literal">hostnetwork</code>. A workload that runs <code class="literal">hostnetwork</code> on a control plane host is effectively root on the cluster and must be trusted accordingly.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">hostnetwork-v2</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Like the <code class="literal">hostnetwork</code> SCC, but with the following differences:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">ALL</code> capabilities are dropped from containers.
										</li><li class="listitem">
											The <code class="literal">NET_BIND_SERVICE</code> capability can be added explicitly.
										</li><li class="listitem">
											<code class="literal">seccompProfile</code> is set to <code class="literal">runtime/default</code> by default.
										</li><li class="listitem">
											<code class="literal">allowPrivilegeEscalation</code> must be unset or set to <code class="literal">false</code> in security contexts.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">node-exporter</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Used for the Prometheus node exporter.
								</p>
								 <div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										This SCC allows host file system access as any UID, including UID 0. Grant with caution.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">nonroot</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Provides all features of the <code class="literal">restricted</code> SCC, but allows users to run with any non-root UID. The user must specify the UID or it must be specified in the manifest of the container runtime.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">nonroot-v2</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Like the <code class="literal">nonroot</code> SCC, but with the following differences:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">ALL</code> capabilities are dropped from containers.
										</li><li class="listitem">
											The <code class="literal">NET_BIND_SERVICE</code> capability can be added explicitly.
										</li><li class="listitem">
											<code class="literal">seccompProfile</code> is set to <code class="literal">runtime/default</code> by default.
										</li><li class="listitem">
											<code class="literal">allowPrivilegeEscalation</code> must be unset or set to <code class="literal">false</code> in security contexts.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">privileged</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Allows access to all privileged and host features and the ability to run as any user, any group, any FSGroup, and with any SELinux context.
								</p>
								 <div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										This is the most relaxed SCC and should be used only for cluster administration. Grant with caution.
									</p></div></div>
								 <p>
									The <code class="literal">privileged</code> SCC allows:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Users to run privileged pods
										</li><li class="listitem">
											Pods to mount host directories as volumes
										</li><li class="listitem">
											Pods to run as any user
										</li><li class="listitem">
											Pods to run with any MCS label
										</li><li class="listitem">
											Pods to use the host’s IPC namespace
										</li><li class="listitem">
											Pods to use the host’s PID namespace
										</li><li class="listitem">
											Pods to use any FSGroup
										</li><li class="listitem">
											Pods to use any supplemental group
										</li><li class="listitem">
											Pods to use any seccomp profiles
										</li><li class="listitem">
											Pods to request any capabilities
										</li></ul></div>
								 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Setting <code class="literal">privileged: true</code> in the pod specification does not necessarily select the <code class="literal">privileged</code> SCC. The SCC that has <code class="literal">allowPrivilegedContainer: true</code> and has the highest prioritization will be chosen if the user has the permissions to use it.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">restricted</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Denies access to all host features and requires pods to be run with a UID, and SELinux context that are allocated to the namespace.
								</p>
								 <p>
									The <code class="literal">restricted</code> SCC:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Ensures that pods cannot run as privileged
										</li><li class="listitem">
											Ensures that pods cannot mount host directory volumes
										</li><li class="listitem">
											Requires that a pod is run as a user in a pre-allocated range of UIDs
										</li><li class="listitem">
											Requires that a pod is run with a pre-allocated MCS label
										</li><li class="listitem">
											Allows pods to use any FSGroup
										</li><li class="listitem">
											Allows pods to use any supplemental group
										</li></ul></div>
								 <p>
									In clusters that were upgraded from OpenShift Container Platform 4.10 or earlier, this SCC is available for use by any authenticated user. The <code class="literal">restricted</code> SCC is no longer available to users of new OpenShift Container Platform 4.11 or later installations, unless the access is explicitly granted.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733589648"> <p>
									<code class="literal">restricted-v2</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733588544"> <p>
									Like the <code class="literal">restricted</code> SCC, but with the following differences:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">ALL</code> capabilities are dropped from containers.
										</li><li class="listitem">
											The <code class="literal">NET_BIND_SERVICE</code> capability can be added explicitly.
										</li><li class="listitem">
											<code class="literal">seccompProfile</code> is set to <code class="literal">runtime/default</code> by default.
										</li><li class="listitem">
											<code class="literal">allowPrivilegeEscalation</code> must be unset or set to <code class="literal">false</code> in security contexts.
										</li></ul></div>
								 <p>
									This is the most restrictive SCC provided by a new installation and will be used by default for authenticated users.
								</p>
								 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal">restricted-v2</code> SCC is the most restrictive of the SCCs that is included by default with the system. However, you can create a custom SCC that is even more restrictive. For example, you can create an SCC that restricts <code class="literal">readOnlyRootFilesystem</code> to <code class="literal">true</code>.
									</p></div></div>
								 </td></tr></tbody></table></div></div></section><section class="section" id="scc-settings_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.2. Security context constraints settings</h3></div></div></div><p>
					Security context constraints (SCCs) are composed of settings and strategies that control the security features a pod has access to. These settings fall into three categories:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733894384" scope="col">Category</th><th align="left" valign="top" id="idm140032733893296" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733894384"> <p>
									Controlled by a boolean
								</p>
								 </td><td align="left" valign="top" headers="idm140032733893296"> <p>
									Fields of this type default to the most restrictive value. For example, <code class="literal">AllowPrivilegedContainer</code> is always set to <code class="literal">false</code> if unspecified.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733894384"> <p>
									Controlled by an allowable set
								</p>
								 </td><td align="left" valign="top" headers="idm140032733893296"> <p>
									Fields of this type are checked against the set to ensure their value is allowed.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733894384"> <p>
									Controlled by a strategy
								</p>
								 </td><td align="left" valign="top" headers="idm140032733893296"> <p>
									Items that have a strategy to generate a value provide:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											A mechanism to generate the value, and
										</li><li class="listitem">
											A mechanism to ensure that a specified value falls into the set of allowable values.
										</li></ul></div>
								 </td></tr></tbody></table></div><p>
					CRI-O has the following default list of capabilities that are allowed for each container of a pod:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">CHOWN</code>
						</li><li class="listitem">
							<code class="literal">DAC_OVERRIDE</code>
						</li><li class="listitem">
							<code class="literal">FSETID</code>
						</li><li class="listitem">
							<code class="literal">FOWNER</code>
						</li><li class="listitem">
							<code class="literal">SETGID</code>
						</li><li class="listitem">
							<code class="literal">SETUID</code>
						</li><li class="listitem">
							<code class="literal">SETPCAP</code>
						</li><li class="listitem">
							<code class="literal">NET_BIND_SERVICE</code>
						</li><li class="listitem">
							<code class="literal">KILL</code>
						</li></ul></div><p>
					The containers use the capabilities from this default list, but pod manifest authors can alter the list by requesting additional capabilities or removing some of the default behaviors. Use the <code class="literal">allowedCapabilities</code>, <code class="literal">defaultAddCapabilities</code>, and <code class="literal">requiredDropCapabilities</code> parameters to control such requests from the pods. With these parameters you can specify which capabilities can be requested, which ones must be added to each container, and which ones must be forbidden, or dropped, from each container.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can drop all capabilites from containers by setting the <code class="literal">requiredDropCapabilities</code> parameter to <code class="literal">ALL</code>. This is what the <code class="literal">restricted-v2</code> SCC does.
					</p></div></div></section><section class="section" id="authorization-SCC-strategies_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.3. Security context constraints strategies</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>RunAsUser</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">MustRunAs</code> - Requires a <code class="literal">runAsUser</code> to be configured. Uses the configured <code class="literal">runAsUser</code> as the default. Validates against the configured <code class="literal">runAsUser</code>.
						</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">MustRunAs</code> snippet</strong></p><p>
								
<pre class="programlisting language-yaml">...
runAsUser:
  type: MustRunAs
  uid: &lt;id&gt;
...</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							<code class="literal">MustRunAsRange</code> - Requires minimum and maximum values to be defined if not using pre-allocated values. Uses the minimum as the default. Validates against the entire allowable range.
						</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">MustRunAsRange</code> snippet</strong></p><p>
								
<pre class="programlisting language-yaml">...
runAsUser:
  type: MustRunAsRange
  uidRangeMax: &lt;maxvalue&gt;
  uidRangeMin: &lt;minvalue&gt;
...</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							<code class="literal">MustRunAsNonRoot</code> - Requires that the pod be submitted with a non-zero <code class="literal">runAsUser</code> or have the <code class="literal">USER</code> directive defined in the image. No default provided.
						</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">MustRunAsNonRoot</code> snippet</strong></p><p>
								
<pre class="programlisting language-yaml">...
runAsUser:
  type: MustRunAsNonRoot
...</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							<code class="literal">RunAsAny</code> - No default provided. Allows any <code class="literal">runAsUser</code> to be specified.
						</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">RunAsAny</code> snippet</strong></p><p>
								
<pre class="programlisting language-yaml">...
runAsUser:
  type: RunAsAny
...</pre>

							</p></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>SELinuxContext</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">MustRunAs</code> - Requires <code class="literal">seLinuxOptions</code> to be configured if not using pre-allocated values. Uses <code class="literal">seLinuxOptions</code> as the default. Validates against <code class="literal">seLinuxOptions</code>.
						</li><li class="listitem">
							<code class="literal">RunAsAny</code> - No default provided. Allows any <code class="literal">seLinuxOptions</code> to be specified.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>SupplementalGroups</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">MustRunAs</code> - Requires at least one range to be specified if not using pre-allocated values. Uses the minimum value of the first range as the default. Validates against all ranges.
						</li><li class="listitem">
							<code class="literal">RunAsAny</code> - No default provided. Allows any <code class="literal">supplementalGroups</code> to be specified.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>FSGroup</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">MustRunAs</code> - Requires at least one range to be specified if not using pre-allocated values. Uses the minimum value of the first range as the default. Validates against the first ID in the first range.
						</li><li class="listitem">
							<code class="literal">RunAsAny</code> - No default provided. Allows any <code class="literal">fsGroup</code> ID to be specified.
						</li></ul></div></section><section class="section" id="authorization-controlling-volumes_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.4. Controlling volumes</h3></div></div></div><p>
					The usage of specific volume types can be controlled by setting the <code class="literal">volumes</code> field of the SCC.
				</p><p>
					The allowable values of this field correspond to the volume sources that are defined when creating a volume:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#awselasticblockstore"><code class="literal">awsElasticBlockStore</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#azuredisk"><code class="literal">azureDisk</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#azurefile"><code class="literal">azureFile</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#cephfs"><code class="literal">cephFS</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#cinder"><code class="literal">cinder</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#configmap"><code class="literal">configMap</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/#csi-ephemeral-volumes"><code class="literal">csi</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#downwardapi"><code class="literal">downwardAPI</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#emptydir"><code class="literal">emptyDir</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#fc"><code class="literal">fc</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#flexvolume"><code class="literal">flexVolume</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#flocker"><code class="literal">flocker</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#gcepersistentdisk"><code class="literal">gcePersistentDisk</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#gitrepo"><code class="literal">gitRepo</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#glusterfs"><code class="literal">glusterfs</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath"><code class="literal">hostPath</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#iscsi"><code class="literal">iscsi</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#nfs"><code class="literal">nfs</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#persistentvolumeclaim"><code class="literal">persistentVolumeClaim</code></a>
						</li><li class="listitem">
							<code class="literal">photonPersistentDisk</code>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#portworxvolume"><code class="literal">portworxVolume</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#projected"><code class="literal">projected</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#quobyte"><code class="literal">quobyte</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#rbd"><code class="literal">rbd</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#scaleio"><code class="literal">scaleIO</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#secret"><code class="literal">secret</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#storageos"><code class="literal">storageos</code></a>
						</li><li class="listitem">
							<a class="link" href="https://kubernetes.io/docs/concepts/storage/volumes/#vspherevolume"><code class="literal">vsphereVolume</code></a>
						</li><li class="listitem">
							<span class="strong strong"><strong>*</strong></span> (A special value to allow the use of all volume types.)
						</li><li class="listitem">
							<code class="literal">none</code> (A special value to disallow the use of all volumes types. Exists only for backwards compatibility.)
						</li></ul></div><p>
					The recommended minimum set of allowed volumes for new SCCs are <code class="literal">configMap</code>, <code class="literal">downwardAPI</code>, <code class="literal">emptyDir</code>, <code class="literal">persistentVolumeClaim</code>, <code class="literal">secret</code>, and <code class="literal">projected</code>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This list of allowable volume types is not exhaustive because new types are added with each release of OpenShift Container Platform.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For backwards compatibility, the usage of <code class="literal">allowHostDirVolumePlugin</code> overrides settings in the <code class="literal">volumes</code> field. For example, if <code class="literal">allowHostDirVolumePlugin</code> is set to false but allowed in the <code class="literal">volumes</code> field, then the <code class="literal">hostPath</code> value will be removed from <code class="literal">volumes</code>.
					</p></div></div></section><section class="section" id="admission_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.5. Admission control</h3></div></div></div><p>
					<span class="emphasis"><em>Admission control</em></span> with SCCs allows for control over the creation of resources based on the capabilities granted to a user.
				</p><p>
					In terms of the SCCs, this means that an admission controller can inspect the user information made available in the context to retrieve an appropriate set of SCCs. Doing so ensures the pod is authorized to make requests about its operating environment or to generate a set of constraints to apply to the pod.
				</p><p>
					The set of SCCs that admission uses to authorize a pod are determined by the user identity and groups that the user belongs to. Additionally, if the pod specifies a service account, the set of allowable SCCs includes any constraints accessible to the service account.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When you create a workload resource, such as deployment, only the service account is used to find the SCCs and admit the pods when they are created.
					</p></div></div><p>
					Admission uses the following approach to create the final security context for the pod:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Retrieve all SCCs available for use.
						</li><li class="listitem">
							Generate field values for security context settings that were not specified on the request.
						</li><li class="listitem">
							Validate the final settings against the available constraints.
						</li></ol></div><p>
					If a matching set of constraints is found, then the pod is accepted. If the request cannot be matched to an SCC, the pod is rejected.
				</p><p>
					A pod must validate every field against the SCC. The following are examples for just two of the fields that must be validated:
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						These examples are in the context of a strategy using the pre-allocated values.
					</p></div></div><p>
					<span class="strong strong"><strong>An FSGroup SCC strategy of <code class="literal">MustRunAs</code></strong></span>
				</p><p>
					If the pod defines a <code class="literal">fsGroup</code> ID, then that ID must equal the default <code class="literal">fsGroup</code> ID. Otherwise, the pod is not validated by that SCC and the next SCC is evaluated.
				</p><p>
					If the <code class="literal">SecurityContextConstraints.fsGroup</code> field has value <code class="literal">RunAsAny</code> and the pod specification omits the <code class="literal">Pod.spec.securityContext.fsGroup</code>, then this field is considered valid. Note that it is possible that during validation, other SCC settings will reject other pod fields and thus cause the pod to fail.
				</p><p>
					<span class="strong strong"><strong>A <code class="literal">SupplementalGroups</code> SCC strategy of <code class="literal">MustRunAs</code></strong></span>
				</p><p>
					If the pod specification defines one or more <code class="literal">supplementalGroups</code> IDs, then the pod’s IDs must equal one of the IDs in the namespace’s <code class="literal">openshift.io/sa.scc.supplemental-groups</code> annotation. Otherwise, the pod is not validated by that SCC and the next SCC is evaluated.
				</p><p>
					If the <code class="literal">SecurityContextConstraints.supplementalGroups</code> field has value <code class="literal">RunAsAny</code> and the pod specification omits the <code class="literal">Pod.spec.securityContext.supplementalGroups</code>, then this field is considered valid. Note that it is possible that during validation, other SCC settings will reject other pod fields and thus cause the pod to fail.
				</p></section><section class="section" id="scc-prioritization_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.1.6. Security context constraints prioritization</h3></div></div></div><p>
					Security context constraints (SCCs) have a priority field that affects the ordering when attempting to validate a request by the admission controller.
				</p><p>
					A priority value of <code class="literal">0</code> is the lowest possible priority. A nil priority is considered a <code class="literal">0</code>, or lowest, priority. Higher priority SCCs are moved to the front of the set when sorting.
				</p><p>
					When the complete set of available SCCs is determined, the SCCs are ordered in the following manner:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The highest priority SCCs are ordered first.
						</li><li class="listitem">
							If the priorities are equal, the SCCs are sorted from most restrictive to least restrictive.
						</li><li class="listitem">
							If both the priorities and restrictions are equal, the SCCs are sorted by name.
						</li></ol></div><p>
					By default, the <code class="literal">anyuid</code> SCC granted to cluster administrators is given priority in their SCC set. This allows cluster administrators to run pods as any user by specifying <code class="literal">RunAsUser</code> in the pod’s <code class="literal">SecurityContext</code>.
				</p></section></section><section class="section" id="security-context-constraints-pre-allocated-values_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.2. About pre-allocated security context constraints values</h2></div></div></div><p>
				The admission controller is aware of certain conditions in the security context constraints (SCCs) that trigger it to look up pre-allocated values from a namespace and populate the SCC before processing the pod. Each SCC strategy is evaluated independently of other strategies, with the pre-allocated values, where allowed, for each policy aggregated with pod specification values to make the final values for the various IDs defined in the running pod.
			</p><p>
				The following SCCs cause the admission controller to look for pre-allocated values when no ranges are defined in the pod specification:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						A <code class="literal">RunAsUser</code> strategy of <code class="literal">MustRunAsRange</code> with no minimum or maximum set. Admission looks for the <code class="literal">openshift.io/sa.scc.uid-range</code> annotation to populate range fields.
					</li><li class="listitem">
						An <code class="literal">SELinuxContext</code> strategy of <code class="literal">MustRunAs</code> with no level set. Admission looks for the <code class="literal">openshift.io/sa.scc.mcs</code> annotation to populate the level.
					</li><li class="listitem">
						A <code class="literal">FSGroup</code> strategy of <code class="literal">MustRunAs</code>. Admission looks for the <code class="literal">openshift.io/sa.scc.supplemental-groups</code> annotation.
					</li><li class="listitem">
						A <code class="literal">SupplementalGroups</code> strategy of <code class="literal">MustRunAs</code>. Admission looks for the <code class="literal">openshift.io/sa.scc.supplemental-groups</code> annotation.
					</li></ol></div><p>
				During the generation phase, the security context provider uses default values for any parameter values that are not specifically set in the pod. Default values are based on the selected strategy:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						<code class="literal">RunAsAny</code> and <code class="literal">MustRunAsNonRoot</code> strategies do not provide default values. If the pod needs a parameter value, such as a group ID, you must define the value in the pod specification.
					</li><li class="listitem">
						<code class="literal">MustRunAs</code> (single value) strategies provide a default value that is always used. For example, for group IDs, even if the pod specification defines its own ID value, the namespace’s default parameter value also appears in the pod’s groups.
					</li><li class="listitem">
						<code class="literal">MustRunAsRange</code> and <code class="literal">MustRunAs</code> (range-based) strategies provide the minimum value of the range. As with a single value <code class="literal">MustRunAs</code> strategy, the namespace’s default parameter value appears in the running pod. If a range-based strategy is configurable with multiple ranges, it provides the minimum value of the first configured range.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					<code class="literal">FSGroup</code> and <code class="literal">SupplementalGroups</code> strategies fall back to the <code class="literal">openshift.io/sa.scc.uid-range</code> annotation if the <code class="literal">openshift.io/sa.scc.supplemental-groups</code> annotation does not exist on the namespace. If neither exists, the SCC is not created.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					By default, the annotation-based <code class="literal">FSGroup</code> strategy configures itself with a single range based on the minimum value for the annotation. For example, if your annotation reads <code class="literal">1/3</code>, the <code class="literal">FSGroup</code> strategy configures itself with a minimum and maximum value of <code class="literal">1</code>. If you want to allow more groups to be accepted for the <code class="literal">FSGroup</code> field, you can configure a custom SCC that does not use the annotation.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <code class="literal">openshift.io/sa.scc.supplemental-groups</code> annotation accepts a comma-delimited list of blocks in the format of <code class="literal">&lt;start&gt;/&lt;length</code> or <code class="literal">&lt;start&gt;-&lt;end&gt;</code>. The <code class="literal">openshift.io/sa.scc.uid-range</code> annotation accepts only a single block.
				</p></div></div></section><section class="section" id="security-context-constraints-example_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.3. Example security context constraints</h2></div></div></div><p>
				The following examples show the security context constraints (SCC) format and annotations:
			</p><div class="formalpara"><p class="title"><strong>Annotated <code class="literal">privileged</code> SCC</strong></p><p>
					
<pre class="programlisting language-yaml">allowHostDirVolumePlugin: true
allowHostIPC: true
allowHostNetwork: true
allowHostPID: true
allowHostPorts: true
allowPrivilegedContainer: true
allowedCapabilities: <span id="CO33-1"><!--Empty--></span><span class="callout">1</span>
- '*'
apiVersion: security.openshift.io/v1
defaultAddCapabilities: [] <span id="CO33-2"><!--Empty--></span><span class="callout">2</span>
fsGroup: <span id="CO33-3"><!--Empty--></span><span class="callout">3</span>
  type: RunAsAny
groups: <span id="CO33-4"><!--Empty--></span><span class="callout">4</span>
- system:cluster-admins
- system:nodes
kind: SecurityContextConstraints
metadata:
  annotations:
    kubernetes.io/description: 'privileged allows access to all privileged and host
      features and the ability to run as any user, any group, any fsGroup, and with
      any SELinux context.  WARNING: this is the most relaxed SCC and should be used
      only for cluster administration. Grant with caution.'
  creationTimestamp: null
  name: privileged
priority: null
readOnlyRootFilesystem: false
requiredDropCapabilities: <span id="CO33-5"><!--Empty--></span><span class="callout">5</span>
- KILL
- MKNOD
- SETUID
- SETGID
runAsUser: <span id="CO33-6"><!--Empty--></span><span class="callout">6</span>
  type: RunAsAny
seLinuxContext: <span id="CO33-7"><!--Empty--></span><span class="callout">7</span>
  type: RunAsAny
seccompProfiles:
- '*'
supplementalGroups: <span id="CO33-8"><!--Empty--></span><span class="callout">8</span>
  type: RunAsAny
users: <span id="CO33-9"><!--Empty--></span><span class="callout">9</span>
- system:serviceaccount:default:registry
- system:serviceaccount:default:router
- system:serviceaccount:openshift-infra:build-controller
volumes: <span id="CO33-10"><!--Empty--></span><span class="callout">10</span>
- '*'</pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO33-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						A list of capabilities that a pod can request. An empty list means that none of capabilities can be requested while the special symbol <code class="literal"><span class="strong strong"><strong>*</strong></span></code> allows any capabilities.
					</div></dd><dt><a href="#CO33-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						A list of additional capabilities that are added to any pod.
					</div></dd><dt><a href="#CO33-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						The <code class="literal">FSGroup</code> strategy, which dictates the allowable values for the security context.
					</div></dd><dt><a href="#CO33-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						The groups that can access this SCC.
					</div></dd><dt><a href="#CO33-5"><span class="callout">5</span></a> </dt><dd><div class="para">
						A list of capabilities to drop from a pod. Or, specify <code class="literal">ALL</code> to drop all capabilities.
					</div></dd><dt><a href="#CO33-6"><span class="callout">6</span></a> </dt><dd><div class="para">
						The <code class="literal">runAsUser</code> strategy type, which dictates the allowable values for the security context.
					</div></dd><dt><a href="#CO33-7"><span class="callout">7</span></a> </dt><dd><div class="para">
						The <code class="literal">seLinuxContext</code> strategy type, which dictates the allowable values for the security context.
					</div></dd><dt><a href="#CO33-8"><span class="callout">8</span></a> </dt><dd><div class="para">
						The <code class="literal">supplementalGroups</code> strategy, which dictates the allowable supplemental groups for the security context.
					</div></dd><dt><a href="#CO33-9"><span class="callout">9</span></a> </dt><dd><div class="para">
						The users who can access this SCC.
					</div></dd><dt><a href="#CO33-10"><span class="callout">10</span></a> </dt><dd><div class="para">
						The allowable volume types for the security context. In the example, <code class="literal">*</code> allows the use of all volume types.
					</div></dd></dl></div><p>
				The <code class="literal">users</code> and <code class="literal">groups</code> fields on the SCC control which users can access the SCC. By default, cluster administrators, nodes, and the build controller are granted access to the privileged SCC. All authenticated users are granted access to the <code class="literal">restricted-v2</code> SCC.
			</p><div class="formalpara"><p class="title"><strong>Without explicit <code class="literal">runAsUser</code> setting</strong></p><p>
					
<pre class="programlisting language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: security-context-demo
spec:
  securityContext: <span id="CO34-1"><!--Empty--></span><span class="callout">1</span>
  containers:
  - name: sec-ctx-demo
    image: gcr.io/google-samples/node-hello:1.0</pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO34-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						When a container or pod does not request a user ID under which it should be run, the effective UID depends on the SCC that emits this pod. Because the <code class="literal">restricted-v2</code> SCC is granted to all authenticated users by default, it will be available to all users and service accounts and used in most cases. The <code class="literal">restricted-v2</code> SCC uses <code class="literal">MustRunAsRange</code> strategy for constraining and defaulting the possible values of the <code class="literal">securityContext.runAsUser</code> field. The admission plugin will look for the <code class="literal">openshift.io/sa.scc.uid-range</code> annotation on the current project to populate range fields, as it does not provide this range. In the end, a container will have <code class="literal">runAsUser</code> equal to the first value of the range that is hard to predict because every project has different ranges.
					</div></dd></dl></div><div class="formalpara"><p class="title"><strong>With explicit <code class="literal">runAsUser</code> setting</strong></p><p>
					
<pre class="programlisting language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: security-context-demo
spec:
  securityContext:
    runAsUser: 1000 <span id="CO35-1"><!--Empty--></span><span class="callout">1</span>
  containers:
    - name: sec-ctx-demo
      image: gcr.io/google-samples/node-hello:1.0</pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO35-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						A container or pod that requests a specific user ID will be accepted by OpenShift Container Platform only when a service account or a user is granted access to a SCC that allows such a user ID. The SCC can allow arbitrary IDs, an ID that falls into a range, or the exact user ID specific to the request.
					</div></dd></dl></div><p>
				This configuration is valid for SELinux, fsGroup, and Supplemental Groups.
			</p></section><section class="section" id="security-context-constraints-creating_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.4. Creating security context constraints</h2></div></div></div><p>
				You can create security context constraints (SCCs) by using the OpenShift CLI (<code class="literal">oc</code>).
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Creating and modifying your own SCCs are advanced operations that might cause instability to your cluster. If you have questions about using your own SCCs, contact Red Hat Support. For information about contacting Red Hat support, see <span class="emphasis"><em>Getting support</em></span>.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the OpenShift CLI (<code class="literal">oc</code>).
					</li><li class="listitem">
						Log in to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Define the SCC in a YAML file named <code class="literal">scc-admin.yaml</code>:
					</p><pre class="programlisting language-yaml">kind: SecurityContextConstraints
apiVersion: security.openshift.io/v1
metadata:
  name: scc-admin
allowPrivilegedContainer: true
runAsUser:
  type: RunAsAny
seLinuxContext:
  type: RunAsAny
fsGroup:
  type: RunAsAny
supplementalGroups:
  type: RunAsAny
users:
- my-admin-user
groups:
- my-admin-group</pre><p class="simpara">
						Optionally, you can drop specific capabilities for an SCC by setting the <code class="literal">requiredDropCapabilities</code> field with the desired values. Any specified capabilities are dropped from the container. To drop all capabilities, specify <code class="literal">ALL</code>. For example, to create an SCC that drops the <code class="literal">KILL</code>, <code class="literal">MKNOD</code>, and <code class="literal">SYS_CHROOT</code> capabilities, add the following to the SCC object:
					</p><pre class="programlisting language-yaml">requiredDropCapabilities:
- KILL
- MKNOD
- SYS_CHROOT</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot list a capability in both <code class="literal">allowedCapabilities</code> and <code class="literal">requiredDropCapabilities</code>.
						</p></div></div><p class="simpara">
						CRI-O supports the same list of capability values that are found in the <a class="link" href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities">Docker documentation</a>.
					</p></li><li class="listitem"><p class="simpara">
						Create the SCC by passing in the file:
					</p><pre class="programlisting language-terminal">$ oc create -f scc-admin.yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">securitycontextconstraints "scc-admin" created</pre>

						</p></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the SCC was created:
					</p><pre class="programlisting language-terminal">$ oc get scc scc-admin</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME        PRIV      CAPS      SELINUX    RUNASUSER   FSGROUP    SUPGROUP   PRIORITY   READONLYROOTFS   VOLUMES
scc-admin   true      []        RunAsAny   RunAsAny    RunAsAny   RunAsAny   &lt;none&gt;     false            [awsElasticBlockStore azureDisk azureFile cephFS cinder configMap downwardAPI emptyDir fc flexVolume flocker gcePersistentDisk gitRepo glusterfs iscsi nfs persistentVolumeClaim photonPersistentDisk quobyte rbd secret vsphere]</pre>

						</p></div></li></ul></div></section><section class="section" id="role-based-access-to-ssc_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.5. Role-based access to security context constraints</h2></div></div></div><p>
				You can specify SCCs as resources that are handled by RBAC. This allows you to scope access to your SCCs to a certain project or to the entire cluster. Assigning users, groups, or service accounts directly to an SCC retains cluster-wide scope.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot assign a SCC to pods created in one of the default namespaces: <code class="literal">default</code>, <code class="literal">kube-system</code>, <code class="literal">kube-public</code>, <code class="literal">openshift-node</code>, <code class="literal">openshift-infra</code>, <code class="literal">openshift</code>. These namespaces should not be used for running pods or services.
				</p></div></div><p>
				To include access to SCCs for your role, specify the <code class="literal">scc</code> resource when creating a role.
			</p><pre class="programlisting language-terminal">$ oc create role &lt;role-name&gt; --verb=use --resource=scc --resource-name=&lt;scc-name&gt; -n &lt;namespace&gt;</pre><p>
				This results in the following role definition:
			</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
...
  name: role-name <span id="CO36-1"><!--Empty--></span><span class="callout">1</span>
  namespace: namespace <span id="CO36-2"><!--Empty--></span><span class="callout">2</span>
...
rules:
- apiGroups:
  - security.openshift.io <span id="CO36-3"><!--Empty--></span><span class="callout">3</span>
  resourceNames:
  - scc-name <span id="CO36-4"><!--Empty--></span><span class="callout">4</span>
  resources:
  - securitycontextconstraints <span id="CO36-5"><!--Empty--></span><span class="callout">5</span>
  verbs: <span id="CO36-6"><!--Empty--></span><span class="callout">6</span>
  - use</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO36-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						The role’s name.
					</div></dd><dt><a href="#CO36-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						Namespace of the defined role. Defaults to <code class="literal">default</code> if not specified.
					</div></dd><dt><a href="#CO36-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						The API group that includes the <code class="literal">SecurityContextConstraints</code> resource. Automatically defined when <code class="literal">scc</code> is specified as a resource.
					</div></dd><dt><a href="#CO36-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						An example name for an SCC you want to have access.
					</div></dd><dt><a href="#CO36-5"><span class="callout">5</span></a> </dt><dd><div class="para">
						Name of the resource group that allows users to specify SCC names in the <code class="literal">resourceNames</code> field.
					</div></dd><dt><a href="#CO36-6"><span class="callout">6</span></a> </dt><dd><div class="para">
						A list of verbs to apply to the role.
					</div></dd></dl></div><p>
				A local or cluster role with such a rule allows the subjects that are bound to it with a role binding or a cluster role binding to use the user-defined SCC called <code class="literal">scc-name</code>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Because RBAC is designed to prevent escalation, even project administrators are unable to grant access to an SCC. By default, they are not allowed to use the verb <code class="literal">use</code> on SCC resources, including the <code class="literal">restricted-v2</code> SCC.
				</p></div></div></section><section class="section" id="security-context-constraints-command-reference_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.6. Reference of security context constraints commands</h2></div></div></div><p>
				You can manage security context constraints (SCCs) in your instance as normal API objects using the OpenShift CLI (<code class="literal">oc</code>).
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You must have <code class="literal">cluster-admin</code> privileges to manage SCCs.
				</p></div></div><section class="section" id="listing-security-context-constraints_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.6.1. Listing security context constraints</h3></div></div></div><p>
					To get a current list of SCCs:
				</p><pre class="programlisting language-terminal">$ oc get scc</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
						
<pre class="programlisting language-terminal">NAME                              PRIV    CAPS                   SELINUX     RUNASUSER          FSGROUP     SUPGROUP    PRIORITY     READONLYROOTFS   VOLUMES
anyuid                            false   &lt;no value&gt;             MustRunAs   RunAsAny           RunAsAny    RunAsAny    10           false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
hostaccess                        false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","hostPath","persistentVolumeClaim","projected","secret"]
hostmount-anyuid                  false   &lt;no value&gt;             MustRunAs   RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","hostPath","nfs","persistentVolumeClaim","projected","secret"]
hostnetwork                       false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   MustRunAs   &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
hostnetwork-v2                    false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsRange     MustRunAs   MustRunAs   &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
node-exporter                     true    &lt;no value&gt;             RunAsAny    RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["*"]
nonroot                           false   &lt;no value&gt;             MustRunAs   MustRunAsNonRoot   RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
nonroot-v2                        false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsNonRoot   RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
privileged                        true    ["*"]                  RunAsAny    RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["*"]
restricted                        false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
restricted-v2                     false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]</pre>

					</p></div></section><section class="section" id="examining-a-security-context-constraints-object_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.6.2. Examining security context constraints</h3></div></div></div><p>
					You can view information about a particular SCC, including which users, service accounts, and groups the SCC is applied to.
				</p><p>
					For example, to examine the <code class="literal">restricted</code> SCC:
				</p><pre class="programlisting language-terminal">$ oc describe scc restricted</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
						
<pre class="programlisting language-terminal">Name:                                  restricted
Priority:                              &lt;none&gt;
Access:
  Users:                               &lt;none&gt; <span id="CO37-1"><!--Empty--></span><span class="callout">1</span>
  Groups:                              &lt;none&gt; <span id="CO37-2"><!--Empty--></span><span class="callout">2</span>
Settings:
  Allow Privileged:                    false
  Allow Privilege Escalation:          true
  Default Add Capabilities:            &lt;none&gt;
  Required Drop Capabilities:          KILL,MKNOD,SETUID,SETGID
  Allowed Capabilities:                &lt;none&gt;
  Allowed Seccomp Profiles:            &lt;none&gt;
  Allowed Volume Types:                configMap,downwardAPI,emptyDir,persistentVolumeClaim,projected,secret
  Allowed Flexvolumes:                 &lt;all&gt;
  Allowed Unsafe Sysctls:              &lt;none&gt;
  Forbidden Sysctls:                   &lt;none&gt;
  Allow Host Network:                  false
  Allow Host Ports:                    false
  Allow Host PID:                      false
  Allow Host IPC:                      false
  Read Only Root Filesystem:           false
  Run As User Strategy: MustRunAsRange
    UID:                               &lt;none&gt;
    UID Range Min:                     &lt;none&gt;
    UID Range Max:                     &lt;none&gt;
  SELinux Context Strategy: MustRunAs
    User:                              &lt;none&gt;
    Role:                              &lt;none&gt;
    Type:                              &lt;none&gt;
    Level:                             &lt;none&gt;
  FSGroup Strategy: MustRunAs
    Ranges:                            &lt;none&gt;
  Supplemental Groups Strategy: RunAsAny
    Ranges:                            &lt;none&gt;</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO37-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							Lists which users and service accounts the SCC is applied to.
						</div></dd><dt><a href="#CO37-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Lists which groups the SCC is applied to.
						</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To preserve customized SCCs during upgrades, do not edit settings on the default SCCs.
					</p></div></div></section><section class="section" id="deleting-security-context-constraints_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.6.3. Deleting security context constraints</h3></div></div></div><p>
					To delete an SCC:
				</p><pre class="programlisting language-terminal">$ oc delete scc &lt;scc_name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you delete a default SCC, it will regenerate when you restart the cluster.
					</p></div></div></section><section class="section" id="updating-security-context-constraints_configuring-internal-oauth"><div class="titlepage"><div><div><h3 class="title">15.6.4. Updating security context constraints</h3></div></div></div><p>
					To update an existing SCC:
				</p><pre class="programlisting language-terminal">$ oc edit scc &lt;scc_name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To preserve customized SCCs during upgrades, do not edit settings on the default SCCs.
					</p></div></div></section></section><section class="section _additional-resources" id="additional-resources_configuring-internal-oauth"><div class="titlepage"><div><div><h2 class="title">15.7. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#getting-support">Getting support</a>
					</li></ul></div></section></section><section class="chapter" id="understanding-and-managing-pod-security-admission"><div class="titlepage"><div><div><h1 class="title">Chapter 16. Understanding and managing pod security admission</h1></div></div></div><p>
			Pod security admission is an implementation of the <a class="link" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/">Kubernetes pod security standards</a>. Use pod security admission to restrict the behavior of pods.
		</p><section class="section" id="security-context-constraints-psa-synchronization_understanding-and-managing-pod-security-admission"><div class="titlepage"><div><div><h2 class="title">16.1. Security context constraint synchronization with pod security standards</h2></div></div></div><p>
				OpenShift Container Platform includes <a class="link" href="https://kubernetes.io/docs/concepts/security/pod-security-admission">Kubernetes pod security admission</a>. Globally, the <code class="literal">privileged</code> profile is enforced, and the <code class="literal">restricted</code> profile is used for warnings and audits.
			</p><p>
				In addition to the global pod security admission control configuration, a controller exists that applies pod security admission control <code class="literal">warn</code> and <code class="literal">audit</code> labels to namespaces according to the SCC permissions of the service accounts that are in a given namespace.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Namespaces that are defined as part of the cluster payload have pod security admission synchronization disabled permanently. You can enable pod security admission synchronization on other namespaces as necessary. If an Operator is installed in a user-created <code class="literal">openshift-*</code> namespace, synchronization is turned on by default after a cluster service version (CSV) is created in the namespace.
				</p></div></div><p>
				The controller examines <code class="literal">ServiceAccount</code> object permissions to use security context constraints in each namespace. Security context constraints (SCCs) are mapped to pod security profiles based on their field values; the controller uses these translated profiles. Pod security admission <code class="literal">warn</code> and <code class="literal">audit</code> labels are set to the most privileged pod security profile found in the namespace to prevent warnings and audit logging as pods are created.
			</p><p>
				Namespace labeling is based on consideration of namespace-local service account privileges.
			</p><p>
				Applying pods directly might use the SCC privileges of the user who runs the pod. However, user privileges are not considered during automatic labeling.
			</p></section><section class="section" id="security-context-constraints-psa-opting_understanding-and-managing-pod-security-admission"><div class="titlepage"><div><div><h2 class="title">16.2. Controlling pod security admission synchronization</h2></div></div></div><p>
				You can enable or disable automatic pod security admission synchronization for most namespaces.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Namespaces that are defined as part of the cluster payload have pod security admission synchronization disabled permanently. These namespaces include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">default</code>
						</li><li class="listitem">
							<code class="literal">kube-node-lease</code>
						</li><li class="listitem">
							<code class="literal">kube-system</code>
						</li><li class="listitem">
							<code class="literal">kube-public</code>
						</li><li class="listitem">
							<code class="literal">openshift</code>
						</li><li class="listitem">
							All system-created namespaces that are prefixed with <code class="literal">openshift-</code>, except for <code class="literal">openshift-operators</code>
						</li></ul></div><p>
					By default, all namespaces that have an <code class="literal">openshift-</code> prefix are not synchronized. You can enable synchronization for any user-created <code class="literal">openshift-*</code> namespaces. You cannot enable synchronization for any system-created <code class="literal">openshift-*</code> namespaces, except for <code class="literal">openshift-operators</code>.
				</p><p>
					If an Operator is installed in a user-created <code class="literal">openshift-*</code> namespace, synchronization is turned on by default after a cluster service version (CSV) is created in the namespace. The synchronized label inherits the permissions of the service accounts in the namespace.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For each namespace that you want to configure, set a value for the <code class="literal">security.openshift.io/scc.podSecurityLabelSync</code> label:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To disable pod security admission label synchronization in a namespace, set the value of the <code class="literal">security.openshift.io/scc.podSecurityLabelSync</code> label to <code class="literal">false</code>.
							</p><p class="simpara">
								Run the following command:
							</p><pre class="programlisting language-terminal">$ oc label namespace &lt;namespace&gt; security.openshift.io/scc.podSecurityLabelSync=false</pre></li><li class="listitem"><p class="simpara">
								To enable pod security admission label synchronization in a namespace, set the value of the <code class="literal">security.openshift.io/scc.podSecurityLabelSync</code> label to <code class="literal">true</code>.
							</p><p class="simpara">
								Run the following command:
							</p><pre class="programlisting language-terminal">$ oc label namespace &lt;namespace&gt; security.openshift.io/scc.podSecurityLabelSync=true</pre></li></ul></div></li></ul></div></section><section class="section" id="security-context-constraints-psa-rectifying_understanding-and-managing-pod-security-admission"><div class="titlepage"><div><div><h2 class="title">16.3. About pod security admission alerts</h2></div></div></div><p>
				A <code class="literal">PodSecurityViolation</code> alert is triggered when the Kubernetes API server reports that there is a pod denial on the audit level of the pod security admission controller. This alert persists for one day.
			</p><p>
				View the Kubernetes API server audit logs to investigate alerts that were triggered. As an example, a workload is likely to fail admission if global enforcement is set to the <code class="literal">restricted</code> pod security level.
			</p><p>
				For assistance in identifying pod security admission violation audit events, see <a class="link" href="https://kubernetes.io/docs/reference/labels-annotations-taints/audit-annotations/#pod-security-kubernetes-io-audit-violations">Audit annotations</a> in the Kubernetes documentation.
			</p><section class="section" id="security-context-constraints-psa-alert-eval_understanding-and-managing-pod-security-admission"><div class="titlepage"><div><div><h3 class="title">16.3.1. Identifying pod security violations</h3></div></div></div><p>
					The <code class="literal">PodSecurityViolation</code> alert does not provide details on which workloads are causing pod security violations. You can identify the affected workloads by reviewing the Kubernetes API server audit logs. This procedure uses the <code class="literal">must-gather</code> tool to gather the audit logs and then searches for the <code class="literal">pod-security.kubernetes.io/audit-violations</code> annotation.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed <code class="literal">jq</code>.
						</li><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To gather the audit logs, enter the following command:
						</p><pre class="programlisting language-terminal">$ oc adm must-gather -- /usr/bin/gather_audit_logs</pre></li><li class="listitem"><p class="simpara">
							To output the affected workload details, enter the following command:
						</p><pre class="programlisting language-terminal">$ zgrep -h pod-security.kubernetes.io/audit-violations must-gather.local.&lt;archive_id&gt;/quay*/audit_logs/kube-apiserver/*log.gz \
  | jq -r 'select((.annotations["pod-security.kubernetes.io/audit-violations"] != null) and (.objectRef.resource=="pods")) | .objectRef.namespace + " " + .objectRef.name + " " + .objectRef.resource' \
  | sort | uniq -c</pre><p class="simpara">
							Replace <code class="literal">must-gather.local.&lt;archive_id&gt;</code> with the actual directory name.
						</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">15 ci namespace-ttl-controller deployments
 1 ci-op-k5whzrsh rpm-repo-546f98d8b replicasets
 1 ci-op-k5whzrsh rpm-repo deployments</pre>

							</p></div></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_managing-pod-security-admission"><div class="titlepage"><div><div><h2 class="title">16.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/security_and_compliance/#nodes-nodes-audit-log-basic-viewing_audit-log-view">Viewing audit logs</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#managing-pod-security-policies">Managing security context constraints</a>
					</li></ul></div></section></section><section class="chapter" id="impersonating-system-admin"><div class="titlepage"><div><div><h1 class="title">Chapter 17. Impersonating the system:admin user</h1></div></div></div><section class="section" id="authentication-api-impersonation_impersonating-system-admin"><div class="titlepage"><div><div><h2 class="title">17.1. API impersonation</h2></div></div></div><p>
				You can configure a request to the OpenShift Container Platform API to act as though it originated from another user. For more information, see <a class="link" href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#user-impersonation">User impersonation</a> in the Kubernetes documentation.
			</p></section><section class="section" id="impersonation-system-admin-user_impersonating-system-admin"><div class="titlepage"><div><div><h2 class="title">17.2. Impersonating the system:admin user</h2></div></div></div><p>
				You can grant a user permission to impersonate <code class="literal">system:admin</code>, which grants them cluster administrator permissions.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To grant a user permission to impersonate <code class="literal">system:admin</code>, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create clusterrolebinding &lt;any_valid_name&gt; --clusterrole=sudoer --user=&lt;username&gt;</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						You can alternatively apply the following YAML to grant permission to impersonate <code class="literal">system:admin</code>:
					</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: &lt;any_valid_name&gt;
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: sudoer
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User
  name: &lt;username&gt;</pre></div></div></li></ul></div></section><section class="section" id="impersonation-system-admin-group_impersonating-system-admin"><div class="titlepage"><div><div><h2 class="title">17.3. Impersonating the system:admin group</h2></div></div></div><p>
				When a <code class="literal">system:admin</code> user is granted cluster administration permissions through a group, you must include the <code class="literal">--as=&lt;user&gt; --as-group=&lt;group1&gt; --as-group=&lt;group2&gt;</code> parameters in the command to impersonate the associated groups.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To grant a user permission to impersonate a <code class="literal">system:admin</code> by impersonating the associated cluster administration groups, run the following command:
					</p><pre class="programlisting language-terminal">$ oc create clusterrolebinding &lt;any_valid_name&gt; --clusterrole=sudoer --as=&lt;user&gt; \
--as-group=&lt;group1&gt; --as-group=&lt;group2&gt;</pre></li></ul></div></section></section><section class="chapter" id="ldap-syncing"><div class="titlepage"><div><div><h1 class="title">Chapter 18. Syncing LDAP groups</h1></div></div></div><p>
			As an administrator, you can use groups to manage users, change their permissions, and enhance collaboration. Your organization may have already created user groups and stored them in an LDAP server. OpenShift Container Platform can sync those LDAP records with internal OpenShift Container Platform records, enabling you to manage your groups in one place. OpenShift Container Platform currently supports group sync with LDAP servers using three common schemas for defining group membership: RFC 2307, Active Directory, and augmented Active Directory.
		</p><p>
			For more information on configuring LDAP, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-ldap-identity-provider">Configuring an LDAP identity provider</a>.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				You must have <code class="literal">cluster-admin</code> privileges to sync groups.
			</p></div></div><section class="section" id="ldap-syncing-about_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.1. About configuring LDAP sync</h2></div></div></div><p>
				Before you can run LDAP sync, you need a sync configuration file. This file contains the following LDAP client configuration details:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Configuration for connecting to your LDAP server.
					</li><li class="listitem">
						Sync configuration options that are dependent on the schema used in your LDAP server.
					</li><li class="listitem">
						An administrator-defined list of name mappings that maps OpenShift Container Platform group names to groups in your LDAP server.
					</li></ul></div><p>
				The format of the configuration file depends upon the schema you are using: RFC 2307, Active Directory, or augmented Active Directory.
			</p><div class="variablelist" id="ldap-client-configuration"><dl class="variablelist"><dt><span class="term">LDAP client configuration</span></dt><dd>
							The LDAP client configuration section of the configuration defines the connections to your LDAP server.
						</dd></dl></div><p>
				The LDAP client configuration section of the configuration defines the connections to your LDAP server.
			</p><div class="formalpara"><p class="title"><strong>LDAP client configuration</strong></p><p>
					
<pre class="programlisting language-yaml">url: ldap://10.0.0.0:389 <span id="CO38-1"><!--Empty--></span><span class="callout">1</span>
bindDN: cn=admin,dc=example,dc=com <span id="CO38-2"><!--Empty--></span><span class="callout">2</span>
bindPassword: &lt;password&gt; <span id="CO38-3"><!--Empty--></span><span class="callout">3</span>
insecure: false <span id="CO38-4"><!--Empty--></span><span class="callout">4</span>
ca: my-ldap-ca-bundle.crt <span id="CO38-5"><!--Empty--></span><span class="callout">5</span></pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO38-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						The connection protocol, IP address of the LDAP server hosting your database, and the port to connect to, formatted as <code class="literal">scheme://host:port</code>.
					</div></dd><dt><a href="#CO38-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						Optional distinguished name (DN) to use as the Bind DN. OpenShift Container Platform uses this if elevated privilege is required to retrieve entries for the sync operation.
					</div></dd><dt><a href="#CO38-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						Optional password to use to bind. OpenShift Container Platform uses this if elevated privilege is necessary to retrieve entries for the sync operation. This value may also be provided in an environment variable, external file, or encrypted file.
					</div></dd><dt><a href="#CO38-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						When <code class="literal">false</code>, secure LDAP (<code class="literal">ldaps://</code>) URLs connect using TLS, and insecure LDAP (<code class="literal">ldap://</code>) URLs are upgraded to TLS. When <code class="literal">true</code>, no TLS connection is made to the server and you cannot use <code class="literal">ldaps://</code> URL schemes.
					</div></dd><dt><a href="#CO38-5"><span class="callout">5</span></a> </dt><dd><div class="para">
						The certificate bundle to use for validating server certificates for the configured URL. If empty, OpenShift Container Platform uses system-trusted roots. This only applies if <code class="literal">insecure</code> is set to <code class="literal">false</code>.
					</div></dd></dl></div><div class="variablelist" id="ldap-query-definition"><dl class="variablelist"><dt><span class="term">LDAP query definition</span></dt><dd>
							Sync configurations consist of LDAP query definitions for the entries that are required for synchronization. The specific definition of an LDAP query depends on the schema used to store membership information in the LDAP server.
						</dd></dl></div><div class="formalpara"><p class="title"><strong>LDAP query definition</strong></p><p>
					
<pre class="programlisting language-yaml">baseDN: ou=users,dc=example,dc=com <span id="CO39-1"><!--Empty--></span><span class="callout">1</span>
scope: sub <span id="CO39-2"><!--Empty--></span><span class="callout">2</span>
derefAliases: never <span id="CO39-3"><!--Empty--></span><span class="callout">3</span>
timeout: 0 <span id="CO39-4"><!--Empty--></span><span class="callout">4</span>
filter: (objectClass=person) <span id="CO39-5"><!--Empty--></span><span class="callout">5</span>
pageSize: 0 <span id="CO39-6"><!--Empty--></span><span class="callout">6</span></pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO39-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						The distinguished name (DN) of the branch of the directory where all searches will start from. It is required that you specify the top of your directory tree, but you can also specify a subtree in the directory.
					</div></dd><dt><a href="#CO39-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						The scope of the search. Valid values are <code class="literal">base</code>, <code class="literal">one</code>, or <code class="literal">sub</code>. If this is left undefined, then a scope of <code class="literal">sub</code> is assumed. Descriptions of the scope options can be found in the table below.
					</div></dd><dt><a href="#CO39-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						The behavior of the search with respect to aliases in the LDAP tree. Valid values are <code class="literal">never</code>, <code class="literal">search</code>, <code class="literal">base</code>, or <code class="literal">always</code>. If this is left undefined, then the default is to <code class="literal">always</code> dereference aliases. Descriptions of the dereferencing behaviors can be found in the table below.
					</div></dd><dt><a href="#CO39-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						The time limit allowed for the search by the client, in seconds. A value of <code class="literal">0</code> imposes no client-side limit.
					</div></dd><dt><a href="#CO39-5"><span class="callout">5</span></a> </dt><dd><div class="para">
						A valid LDAP search filter. If this is left undefined, then the default is <code class="literal">(objectClass=*)</code>.
					</div></dd><dt><a href="#CO39-6"><span class="callout">6</span></a> </dt><dd><div class="para">
						The optional maximum size of response pages from the server, measured in LDAP entries. If set to <code class="literal">0</code>, no size restrictions will be made on pages of responses. Setting paging sizes is necessary when queries return more entries than the client or server allow by default.
					</div></dd></dl></div><div class="table" id="ldap-search"><p class="title"><strong>Table 18.1. LDAP search scope options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032738649280" scope="col">LDAP search scope</th><th align="left" valign="top" id="idm140032738648192" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="middle" headers="idm140032738649280"> <p>
								<code class="literal">base</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032738648192"> <p>
								Only consider the object specified by the base DN given for the query.
							</p>
							 </td></tr><tr><td align="left" valign="middle" headers="idm140032738649280"> <p>
								<code class="literal">one</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032738648192"> <p>
								Consider all of the objects on the same level in the tree as the base DN for the query.
							</p>
							 </td></tr><tr><td align="left" valign="middle" headers="idm140032738649280"> <p>
								<code class="literal">sub</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032738648192"> <p>
								Consider the entire subtree rooted at the base DN given for the query.
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="deref-aliases"><p class="title"><strong>Table 18.2. LDAP dereferencing behaviors</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032734078704" scope="col">Dereferencing behavior</th><th align="left" valign="top" id="idm140032734077616" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="middle" headers="idm140032734078704"> <p>
								<code class="literal">never</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032734077616"> <p>
								Never dereference any aliases found in the LDAP tree.
							</p>
							 </td></tr><tr><td align="left" valign="middle" headers="idm140032734078704"> <p>
								<code class="literal">search</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032734077616"> <p>
								Only dereference aliases found while searching.
							</p>
							 </td></tr><tr><td align="left" valign="middle" headers="idm140032734078704"> <p>
								<code class="literal">base</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032734077616"> <p>
								Only dereference aliases while finding the base object.
							</p>
							 </td></tr><tr><td align="left" valign="middle" headers="idm140032734078704"> <p>
								<code class="literal">always</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140032734077616"> <p>
								Always dereference all aliases found in the LDAP tree.
							</p>
							 </td></tr></tbody></table></div></div><div class="variablelist" id="user-defined-name-mapping"><dl class="variablelist"><dt><span class="term">User-defined name mapping</span></dt><dd>
							A user-defined name mapping explicitly maps the names of OpenShift Container Platform groups to unique identifiers that find groups on your LDAP server. The mapping uses normal YAML syntax. A user-defined mapping can contain an entry for every group in your LDAP server or only a subset of those groups. If there are groups on the LDAP server that do not have a user-defined name mapping, the default behavior during sync is to use the attribute specified as the OpenShift Container Platform group’s name.
						</dd></dl></div><div class="formalpara"><p class="title"><strong>User-defined name mapping</strong></p><p>
					
<pre class="programlisting language-yaml">groupUIDNameMapping:
  "cn=group1,ou=groups,dc=example,dc=com": firstgroup
  "cn=group2,ou=groups,dc=example,dc=com": secondgroup
  "cn=group3,ou=groups,dc=example,dc=com": thirdgroup</pre>

				</p></div><section class="section" id="ldap-syncing-config-rfc2307_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.1.1. About the RFC 2307 configuration file</h3></div></div></div><p>
					The RFC 2307 schema requires you to provide an LDAP query definition for both user and group entries, as well as the attributes with which to represent them in the internal OpenShift Container Platform records.
				</p><p>
					For clarity, the group you create in OpenShift Container Platform should use attributes other than the distinguished name whenever possible for user- or administrator-facing fields. For example, identify the users of an OpenShift Container Platform group by their e-mail, and use the name of the group as the common name. The following configuration file creates these relationships:
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If using user-defined name mappings, your configuration file will differ.
					</p></div></div><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses RFC 2307 schema: <code class="literal">rfc2307_config.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
url: ldap://LDAP_SERVICE_IP:389 <span id="CO40-1"><!--Empty--></span><span class="callout">1</span>
insecure: false <span id="CO40-2"><!--Empty--></span><span class="callout">2</span>
rfc2307:
    groupsQuery:
        baseDN: "ou=groups,dc=example,dc=com"
        scope: sub
        derefAliases: never
        pageSize: 0
    groupUIDAttribute: dn <span id="CO40-3"><!--Empty--></span><span class="callout">3</span>
    groupNameAttributes: [ cn ] <span id="CO40-4"><!--Empty--></span><span class="callout">4</span>
    groupMembershipAttributes: [ member ] <span id="CO40-5"><!--Empty--></span><span class="callout">5</span>
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
        pageSize: 0
    userUIDAttribute: dn <span id="CO40-6"><!--Empty--></span><span class="callout">6</span>
    userNameAttributes: [ mail ] <span id="CO40-7"><!--Empty--></span><span class="callout">7</span>
    tolerateMemberNotFoundErrors: false
    tolerateMemberOutOfScopeErrors: false</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO40-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The IP address and host of the LDAP server where this group’s record is stored.
						</div></dd><dt><a href="#CO40-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							When <code class="literal">false</code>, secure LDAP (<code class="literal">ldaps://</code>) URLs connect using TLS, and insecure LDAP (<code class="literal">ldap://</code>) URLs are upgraded to TLS. When <code class="literal">true</code>, no TLS connection is made to the server and you cannot use <code class="literal">ldaps://</code> URL schemes.
						</div></dd><dt><a href="#CO40-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The attribute that uniquely identifies a group on the LDAP server. You cannot specify <code class="literal">groupsQuery</code> filters when using DN for <code class="literal">groupUIDAttribute</code>. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd><dt><a href="#CO40-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The attribute to use as the name of the group.
						</div></dd><dt><a href="#CO40-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							The attribute on the group that stores the membership information.
						</div></dd><dt><a href="#CO40-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							The attribute that uniquely identifies a user on the LDAP server. You cannot specify <code class="literal">usersQuery</code> filters when using DN for userUIDAttribute. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd><dt><a href="#CO40-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							The attribute to use as the name of the user in the OpenShift Container Platform group record.
						</div></dd></dl></div></section><section class="section" id="ldap-syncing-config-activedir_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.1.2. About the Active Directory configuration file</h3></div></div></div><p>
					The Active Directory schema requires you to provide an LDAP query definition for user entries, as well as the attributes to represent them with in the internal OpenShift Container Platform group records.
				</p><p>
					For clarity, the group you create in OpenShift Container Platform should use attributes other than the distinguished name whenever possible for user- or administrator-facing fields. For example, identify the users of an OpenShift Container Platform group by their e-mail, but define the name of the group by the name of the group on the LDAP server. The following configuration file creates these relationships:
				</p><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses Active Directory schema: <code class="literal">active_directory_config.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
url: ldap://LDAP_SERVICE_IP:389
activeDirectory:
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
        filter: (objectclass=person)
        pageSize: 0
    userNameAttributes: [ mail ] <span id="CO41-1"><!--Empty--></span><span class="callout">1</span>
    groupMembershipAttributes: [ memberOf ] <span id="CO41-2"><!--Empty--></span><span class="callout">2</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO41-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The attribute to use as the name of the user in the OpenShift Container Platform group record.
						</div></dd><dt><a href="#CO41-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The attribute on the user that stores the membership information.
						</div></dd></dl></div></section><section class="section" id="ldap-syncing-config-augmented-activedir_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.1.3. About the augmented Active Directory configuration file</h3></div></div></div><p>
					The augmented Active Directory schema requires you to provide an LDAP query definition for both user entries and group entries, as well as the attributes with which to represent them in the internal OpenShift Container Platform group records.
				</p><p>
					For clarity, the group you create in OpenShift Container Platform should use attributes other than the distinguished name whenever possible for user- or administrator-facing fields. For example, identify the users of an OpenShift Container Platform group by their e-mail, and use the name of the group as the common name. The following configuration file creates these relationships.
				</p><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses augmented Active Directory schema: <code class="literal">augmented_active_directory_config.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
url: ldap://LDAP_SERVICE_IP:389
augmentedActiveDirectory:
    groupsQuery:
        baseDN: "ou=groups,dc=example,dc=com"
        scope: sub
        derefAliases: never
        pageSize: 0
    groupUIDAttribute: dn <span id="CO42-1"><!--Empty--></span><span class="callout">1</span>
    groupNameAttributes: [ cn ] <span id="CO42-2"><!--Empty--></span><span class="callout">2</span>
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
        filter: (objectclass=person)
        pageSize: 0
    userNameAttributes: [ mail ] <span id="CO42-3"><!--Empty--></span><span class="callout">3</span>
    groupMembershipAttributes: [ memberOf ] <span id="CO42-4"><!--Empty--></span><span class="callout">4</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO42-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The attribute that uniquely identifies a group on the LDAP server. You cannot specify <code class="literal">groupsQuery</code> filters when using DN for groupUIDAttribute. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd><dt><a href="#CO42-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The attribute to use as the name of the group.
						</div></dd><dt><a href="#CO42-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The attribute to use as the name of the user in the OpenShift Container Platform group record.
						</div></dd><dt><a href="#CO42-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The attribute on the user that stores the membership information.
						</div></dd></dl></div></section></section><section class="section" id="ldap-syncing-running_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.2. Running LDAP sync</h2></div></div></div><p>
				Once you have created a sync configuration file, you can begin to sync. OpenShift Container Platform allows administrators to perform a number of different sync types with the same server.
			</p><section class="section" id="ldap-syncing-running-all-ldap_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.2.1. Syncing the LDAP server with OpenShift Container Platform</h3></div></div></div><p>
					You can sync all groups from the LDAP server with OpenShift Container Platform.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a sync configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To sync all groups from the LDAP server with OpenShift Container Platform:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=config.yaml --confirm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, all group synchronization operations are dry-run, so you must set the <code class="literal">--confirm</code> flag on the <code class="literal">oc adm groups sync</code> command to make changes to OpenShift Container Platform group records.
							</p></div></div></li></ul></div></section><section class="section" id="ldap-syncing-running-openshift_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.2.2. Syncing OpenShift Container Platform groups with the LDAP server</h3></div></div></div><p>
					You can sync all groups already in OpenShift Container Platform that correspond to groups in the LDAP server specified in the configuration file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a sync configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To sync OpenShift Container Platform groups with the LDAP server:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --type=openshift --sync-config=config.yaml --confirm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, all group synchronization operations are dry-run, so you must set the <code class="literal">--confirm</code> flag on the <code class="literal">oc adm groups sync</code> command to make changes to OpenShift Container Platform group records.
							</p></div></div></li></ul></div></section><section class="section" id="ldap-syncing-running-subset_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.2.3. Syncing subgroups from the LDAP server with OpenShift Container Platform</h3></div></div></div><p>
					You can sync a subset of LDAP groups with OpenShift Container Platform using whitelist files, blacklist files, or both.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can use any combination of blacklist files, whitelist files, or whitelist literals. Whitelist and blacklist files must contain one unique group identifier per line, and you can include whitelist literals directly in the command itself. These guidelines apply to groups found on LDAP servers as well as groups already present in OpenShift Container Platform.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a sync configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To sync a subset of LDAP groups with OpenShift Container Platform, use any the following commands:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --whitelist=&lt;whitelist_file&gt; \
                   --sync-config=config.yaml      \
                   --confirm</pre><pre class="programlisting language-terminal">$ oc adm groups sync --blacklist=&lt;blacklist_file&gt; \
                   --sync-config=config.yaml      \
                   --confirm</pre><pre class="programlisting language-terminal">$ oc adm groups sync &lt;group_unique_identifier&gt;    \
                   --sync-config=config.yaml      \
                   --confirm</pre><pre class="programlisting language-terminal">$ oc adm groups sync &lt;group_unique_identifier&gt;  \
                   --whitelist=&lt;whitelist_file&gt; \
                   --blacklist=&lt;blacklist_file&gt; \
                   --sync-config=config.yaml    \
                   --confirm</pre><pre class="programlisting language-terminal">$ oc adm groups sync --type=openshift           \
                   --whitelist=&lt;whitelist_file&gt; \
                   --sync-config=config.yaml    \
                   --confirm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, all group synchronization operations are dry-run, so you must set the <code class="literal">--confirm</code> flag on the <code class="literal">oc adm groups sync</code> command to make changes to OpenShift Container Platform group records.
							</p></div></div></li></ul></div></section></section><section class="section" id="ldap-syncing-pruning_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.3. Running a group pruning job</h2></div></div></div><p>
				An administrator can also choose to remove groups from OpenShift Container Platform records if the records on the LDAP server that created them are no longer present. The prune job will accept the same sync configuration file and whitelists or blacklists as used for the sync job.
			</p><p>
				For example:
			</p><pre class="programlisting language-terminal">$ oc adm prune groups --sync-config=/path/to/ldap-sync-config.yaml --confirm</pre><pre class="programlisting language-terminal">$ oc adm prune groups --whitelist=/path/to/whitelist.txt --sync-config=/path/to/ldap-sync-config.yaml --confirm</pre><pre class="programlisting language-terminal">$ oc adm prune groups --blacklist=/path/to/blacklist.txt --sync-config=/path/to/ldap-sync-config.yaml --confirm</pre></section><section class="section" id="ldap-auto-syncing_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.4. Automatically syncing LDAP groups</h2></div></div></div><p>
				You can automatically sync LDAP groups on a periodic basis by configuring a cron job.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem"><p class="simpara">
						You have configured an LDAP identity provider (IDP).
					</p><p class="simpara">
						This procedure assumes that you created an LDAP secret named <code class="literal">ldap-secret</code> and a config map named <code class="literal">ca-config-map</code>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a project where the cron job will run:
					</p><pre class="programlisting language-terminal">$ oc new-project ldap-sync <span id="CO43-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO43-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								This procedure uses a project called <code class="literal">ldap-sync</code>.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Locate the secret and config map that you created when configuring the LDAP identity provider and copy them to this new project.
					</p><p class="simpara">
						The secret and config map exist in the <code class="literal">openshift-config</code> project and must be copied to the new <code class="literal">ldap-sync</code> project.
					</p></li><li class="listitem"><p class="simpara">
						Define a service account:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ldap-sync-service-account.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">kind: ServiceAccount
apiVersion: v1
metadata:
  name: ldap-group-syncer
  namespace: ldap-sync</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Create the service account:
					</p><pre class="programlisting language-terminal">$ oc create -f ldap-sync-service-account.yaml</pre></li><li class="listitem"><p class="simpara">
						Define a cluster role:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ldap-sync-cluster-role.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: ldap-group-syncer
rules:
  - apiGroups:
      - ''
      - user.openshift.io
    resources:
      - groups
    verbs:
      - get
      - list
      - create
      - update</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Create the cluster role:
					</p><pre class="programlisting language-terminal">$ oc create -f ldap-sync-cluster-role.yaml</pre></li><li class="listitem"><p class="simpara">
						Define a cluster role binding to bind the cluster role to the service account:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ldap-sync-cluster-role-binding.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: ldap-group-syncer
subjects:
  - kind: ServiceAccount
    name: ldap-group-syncer              <span id="CO44-1"><!--Empty--></span><span class="callout">1</span>
    namespace: ldap-sync
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ldap-group-syncer                <span id="CO44-2"><!--Empty--></span><span class="callout">2</span></pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO44-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Reference to the service account created earlier in this procedure.
							</div></dd><dt><a href="#CO44-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Reference to the cluster role created earlier in this procedure.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Create the cluster role binding:
					</p><pre class="programlisting language-terminal">$ oc create -f ldap-sync-cluster-role-binding.yaml</pre></li><li class="listitem"><p class="simpara">
						Define a config map that specifies the sync configuration file:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ldap-sync-config-map.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: ldap-group-syncer
  namespace: ldap-sync
data:
  sync.yaml: |                                 <span id="CO45-1"><!--Empty--></span><span class="callout">1</span>
    kind: LDAPSyncConfig
    apiVersion: v1
    url: ldaps://10.0.0.0:389                  <span id="CO45-2"><!--Empty--></span><span class="callout">2</span>
    insecure: false
    bindDN: cn=admin,dc=example,dc=com         <span id="CO45-3"><!--Empty--></span><span class="callout">3</span>
    bindPassword:
      file: "/etc/secrets/bindPassword"
    ca: /etc/ldap-ca/ca.crt
    rfc2307:                                   <span id="CO45-4"><!--Empty--></span><span class="callout">4</span>
      groupsQuery:
        baseDN: "ou=groups,dc=example,dc=com"  <span id="CO45-5"><!--Empty--></span><span class="callout">5</span>
        scope: sub
        filter: "(objectClass=groupOfMembers)"
        derefAliases: never
        pageSize: 0
      groupUIDAttribute: dn
      groupNameAttributes: [ cn ]
      groupMembershipAttributes: [ member ]
      usersQuery:
        baseDN: "ou=users,dc=example,dc=com"   <span id="CO45-6"><!--Empty--></span><span class="callout">6</span>
        scope: sub
        derefAliases: never
        pageSize: 0
      userUIDAttribute: dn
      userNameAttributes: [ uid ]
      tolerateMemberNotFoundErrors: false
      tolerateMemberOutOfScopeErrors: false</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO45-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Define the sync configuration file.
							</div></dd><dt><a href="#CO45-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Specify the URL.
							</div></dd><dt><a href="#CO45-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								Specify the <code class="literal">bindDN</code>.
							</div></dd><dt><a href="#CO45-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								This example uses the RFC2307 schema; adjust values as necessary. You can also use a different schema.
							</div></dd><dt><a href="#CO45-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								Specify the <code class="literal">baseDN</code> for <code class="literal">groupsQuery</code>.
							</div></dd><dt><a href="#CO45-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								Specify the <code class="literal">baseDN</code> for <code class="literal">usersQuery</code>.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Create the config map:
					</p><pre class="programlisting language-terminal">$ oc create -f ldap-sync-config-map.yaml</pre></li><li class="listitem"><p class="simpara">
						Define a cron job:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ldap-sync-cron-job.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">kind: CronJob
apiVersion: batch/v1
metadata:
  name: ldap-group-syncer
  namespace: ldap-sync
spec:                                                                                <span id="CO46-1"><!--Empty--></span><span class="callout">1</span>
  schedule: "*/30 * * * *"                                                           <span id="CO46-2"><!--Empty--></span><span class="callout">2</span>
  concurrencyPolicy: Forbid
  jobTemplate:
    spec:
      backoffLimit: 0
      ttlSecondsAfterFinished: 1800                                                  <span id="CO46-3"><!--Empty--></span><span class="callout">3</span>
      template:
        spec:
          containers:
            - name: ldap-group-sync
              image: "registry.redhat.io/openshift4/ose-cli:latest"
              command:
                - "/bin/bash"
                - "-c"
                - "oc adm groups sync --sync-config=/etc/config/sync.yaml --confirm" <span id="CO46-4"><!--Empty--></span><span class="callout">4</span>
              volumeMounts:
                - mountPath: "/etc/config"
                  name: "ldap-sync-volume"
                - mountPath: "/etc/secrets"
                  name: "ldap-bind-password"
                - mountPath: "/etc/ldap-ca"
                  name: "ldap-ca"
          volumes:
            - name: "ldap-sync-volume"
              configMap:
                name: "ldap-group-syncer"
            - name: "ldap-bind-password"
              secret:
                secretName: "ldap-secret"                                            <span id="CO46-5"><!--Empty--></span><span class="callout">5</span>
            - name: "ldap-ca"
              configMap:
                name: "ca-config-map"                                                <span id="CO46-6"><!--Empty--></span><span class="callout">6</span>
          restartPolicy: "Never"
          terminationGracePeriodSeconds: 30
          activeDeadlineSeconds: 500
          dnsPolicy: "ClusterFirst"
          serviceAccountName: "ldap-group-syncer"</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO46-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Configure the settings for the cron job. See "Creating cron jobs" for more information on cron job settings.
							</div></dd><dt><a href="#CO46-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The schedule for the job specified in <a class="link" href="https://en.wikipedia.org/wiki/Cron">cron format</a>. This example cron job runs every 30 minutes. Adjust the frequency as necessary, making sure to take into account how long the sync takes to run.
							</div></dd><dt><a href="#CO46-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								How long, in seconds, to keep finished jobs. This should match the period of the job schedule in order to clean old failed jobs and prevent unnecessary alerts. For more information, see <a class="link" href="https://kubernetes.io/docs/concepts/workloads/controllers/ttlafterfinished">TTL-after-finished Controller</a> in the Kubernetes documentation.
							</div></dd><dt><a href="#CO46-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The LDAP sync command for the cron job to run. Passes in the sync configuration file that was defined in the config map.
							</div></dd><dt><a href="#CO46-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								This secret was created when the LDAP IDP was configured.
							</div></dd><dt><a href="#CO46-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								This config map was created when the LDAP IDP was configured.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Create the cron job:
					</p><pre class="programlisting language-terminal">$ oc create -f ldap-sync-cron-job.yaml</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#configuring-ldap-identity-provider">Configuring an LDAP identity provider</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-nodes-jobs-creating-cron_nodes-nodes-jobs">Creating cron jobs</a>
					</li></ul></div></section><section class="section" id="ldap-syncing-examples_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.5. LDAP group sync examples</h2></div></div></div><p>
				This section contains examples for the RFC 2307, Active Directory, and augmented Active Directory schemas.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					These examples assume that all users are direct members of their respective groups. Specifically, no groups have other groups as members. See the Nested Membership Sync Example for information on how to sync nested groups.
				</p></div></div><section class="section" id="ldap-syncing-rfc2307_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.5.1. Syncing groups using the RFC 2307 schema</h3></div></div></div><p>
					For the RFC 2307 schema, the following examples synchronize a group named <code class="literal">admins</code> that has two members: <code class="literal">Jane</code> and <code class="literal">Jim</code>. The examples explain:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							How the group and users are added to the LDAP server.
						</li><li class="listitem">
							What the resulting group record in OpenShift Container Platform will be after synchronization.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						These examples assume that all users are direct members of their respective groups. Specifically, no groups have other groups as members. See the Nested Membership Sync Example for information on how to sync nested groups.
					</p></div></div><p>
					In the RFC 2307 schema, both users (Jane and Jim) and groups exist on the LDAP server as first-class entries, and group membership is stored in attributes on the group. The following snippet of <code class="literal">ldif</code> defines the users and group for this schema:
				</p><div class="formalpara"><p class="title"><strong>LDAP entries that use RFC 2307 schema: <code class="literal">rfc2307.ldif</code></strong></p><p>
						
<pre class="programlisting language-ldif">  dn: ou=users,dc=example,dc=com
  objectClass: organizationalUnit
  ou: users
  dn: cn=Jane,ou=users,dc=example,dc=com
  objectClass: person
  objectClass: organizationalPerson
  objectClass: inetOrgPerson
  cn: Jane
  sn: Smith
  displayName: Jane Smith
  mail: jane.smith@example.com
  dn: cn=Jim,ou=users,dc=example,dc=com
  objectClass: person
  objectClass: organizationalPerson
  objectClass: inetOrgPerson
  cn: Jim
  sn: Adams
  displayName: Jim Adams
  mail: jim.adams@example.com
  dn: ou=groups,dc=example,dc=com
  objectClass: organizationalUnit
  ou: groups
  dn: cn=admins,ou=groups,dc=example,dc=com <span id="CO47-1"><!--Empty--></span><span class="callout">1</span>
  objectClass: groupOfNames
  cn: admins
  owner: cn=admin,dc=example,dc=com
  description: System Administrators
  member: cn=Jane,ou=users,dc=example,dc=com <span id="CO47-2"><!--Empty--></span><span class="callout">2</span>
  member: cn=Jim,ou=users,dc=example,dc=com</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO47-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The group is a first-class entry in the LDAP server.
						</div></dd><dt><a href="#CO47-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Members of a group are listed with an identifying reference as attributes on the group.
						</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create the configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the sync with the <code class="literal">rfc2307_config.yaml</code> file:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=rfc2307_config.yaml --confirm</pre><p class="simpara">
							OpenShift Container Platform creates the following group record as a result of the above sync operation:
						</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">rfc2307_config.yaml</code> file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400 <span id="CO48-1"><!--Empty--></span><span class="callout">1</span>
    openshift.io/ldap.uid: cn=admins,ou=groups,dc=example,dc=com <span id="CO48-2"><!--Empty--></span><span class="callout">2</span>
    openshift.io/ldap.url: LDAP_SERVER_IP:389 <span id="CO48-3"><!--Empty--></span><span class="callout">3</span>
  creationTimestamp:
  name: admins <span id="CO48-4"><!--Empty--></span><span class="callout">4</span>
users: <span id="CO48-5"><!--Empty--></span><span class="callout">5</span>
- jane.smith@example.com
- jim.adams@example.com</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO48-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The last time this OpenShift Container Platform group was synchronized with the LDAP server, in ISO 6801 format.
								</div></dd><dt><a href="#CO48-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The unique identifier for the group on the LDAP server.
								</div></dd><dt><a href="#CO48-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The IP address and host of the LDAP server where this group’s record is stored.
								</div></dd><dt><a href="#CO48-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The name of the group as specified by the sync file.
								</div></dd><dt><a href="#CO48-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The users that are members of the group, named as specified by the sync file.
								</div></dd></dl></div></li></ul></div></section><section class="section" id="ldap-syncing-rfc2307-user-defined_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.5.2. Syncing groups using the RFC2307 schema with user-defined name mappings</h3></div></div></div><p>
					When syncing groups with user-defined name mappings, the configuration file changes to contain these mappings as shown below.
				</p><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses RFC 2307 schema with user-defined name mappings: <code class="literal">rfc2307_config_user_defined.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
groupUIDNameMapping:
  "cn=admins,ou=groups,dc=example,dc=com": Administrators <span id="CO49-1"><!--Empty--></span><span class="callout">1</span>
rfc2307:
    groupsQuery:
        baseDN: "ou=groups,dc=example,dc=com"
        scope: sub
        derefAliases: never
        pageSize: 0
    groupUIDAttribute: dn <span id="CO49-2"><!--Empty--></span><span class="callout">2</span>
    groupNameAttributes: [ cn ] <span id="CO49-3"><!--Empty--></span><span class="callout">3</span>
    groupMembershipAttributes: [ member ]
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
        pageSize: 0
    userUIDAttribute: dn <span id="CO49-4"><!--Empty--></span><span class="callout">4</span>
    userNameAttributes: [ mail ]
    tolerateMemberNotFoundErrors: false
    tolerateMemberOutOfScopeErrors: false</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO49-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The user-defined name mapping.
						</div></dd><dt><a href="#CO49-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The unique identifier attribute that is used for the keys in the user-defined name mapping. You cannot specify <code class="literal">groupsQuery</code> filters when using DN for groupUIDAttribute. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd><dt><a href="#CO49-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The attribute to name OpenShift Container Platform groups with if their unique identifier is not in the user-defined name mapping.
						</div></dd><dt><a href="#CO49-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The attribute that uniquely identifies a user on the LDAP server. You cannot specify <code class="literal">usersQuery</code> filters when using DN for userUIDAttribute. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create the configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the sync with the <code class="literal">rfc2307_config_user_defined.yaml</code> file:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=rfc2307_config_user_defined.yaml --confirm</pre><p class="simpara">
							OpenShift Container Platform creates the following group record as a result of the above sync operation:
						</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">rfc2307_config_user_defined.yaml</code> file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400
    openshift.io/ldap.uid: cn=admins,ou=groups,dc=example,dc=com
    openshift.io/ldap.url: LDAP_SERVER_IP:389
  creationTimestamp:
  name: Administrators <span id="CO50-1"><!--Empty--></span><span class="callout">1</span>
users:
- jane.smith@example.com
- jim.adams@example.com</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO50-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The name of the group as specified by the user-defined name mapping.
								</div></dd></dl></div></li></ul></div></section><section class="section" id="ldap-syncing-rfc2307-user-defined-error_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.5.3. Syncing groups using RFC 2307 with user-defined error tolerances</h3></div></div></div><p>
					By default, if the groups being synced contain members whose entries are outside of the scope defined in the member query, the group sync fails with an error:
				</p><pre class="screen">Error determining LDAP group membership for "&lt;group&gt;": membership lookup for user "&lt;user&gt;" in group "&lt;group&gt;" failed because of "search for entry with dn="&lt;user-dn&gt;" would search outside of the base dn specified (dn="&lt;base-dn&gt;")".</pre><p>
					This often indicates a misconfigured <code class="literal">baseDN</code> in the <code class="literal">usersQuery</code> field. However, in cases where the <code class="literal">baseDN</code> intentionally does not contain some of the members of the group, setting <code class="literal">tolerateMemberOutOfScopeErrors: true</code> allows the group sync to continue. Out of scope members will be ignored.
				</p><p>
					Similarly, when the group sync process fails to locate a member for a group, it fails outright with errors:
				</p><pre class="screen">Error determining LDAP group membership for "&lt;group&gt;": membership lookup for user "&lt;user&gt;" in group "&lt;group&gt;" failed because of "search for entry with base dn="&lt;user-dn&gt;" refers to a non-existent entry".
Error determining LDAP group membership for "&lt;group&gt;": membership lookup for user "&lt;user&gt;" in group "&lt;group&gt;" failed because of "search for entry with base dn="&lt;user-dn&gt;" and filter "&lt;filter&gt;" did not return any results".</pre><p>
					This often indicates a misconfigured <code class="literal">usersQuery</code> field. However, in cases where the group contains member entries that are known to be missing, setting <code class="literal">tolerateMemberNotFoundErrors: true</code> allows the group sync to continue. Problematic members will be ignored.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Enabling error tolerances for the LDAP group sync causes the sync process to ignore problematic member entries. If the LDAP group sync is not configured correctly, this could result in synced OpenShift Container Platform groups missing members.
					</p></div></div><div class="formalpara"><p class="title"><strong>LDAP entries that use RFC 2307 schema with problematic group membership: <code class="literal">rfc2307_problematic_users.ldif</code></strong></p><p>
						
<pre class="programlisting language-ldif">  dn: ou=users,dc=example,dc=com
  objectClass: organizationalUnit
  ou: users
  dn: cn=Jane,ou=users,dc=example,dc=com
  objectClass: person
  objectClass: organizationalPerson
  objectClass: inetOrgPerson
  cn: Jane
  sn: Smith
  displayName: Jane Smith
  mail: jane.smith@example.com
  dn: cn=Jim,ou=users,dc=example,dc=com
  objectClass: person
  objectClass: organizationalPerson
  objectClass: inetOrgPerson
  cn: Jim
  sn: Adams
  displayName: Jim Adams
  mail: jim.adams@example.com
  dn: ou=groups,dc=example,dc=com
  objectClass: organizationalUnit
  ou: groups
  dn: cn=admins,ou=groups,dc=example,dc=com
  objectClass: groupOfNames
  cn: admins
  owner: cn=admin,dc=example,dc=com
  description: System Administrators
  member: cn=Jane,ou=users,dc=example,dc=com
  member: cn=Jim,ou=users,dc=example,dc=com
  member: cn=INVALID,ou=users,dc=example,dc=com <span id="CO51-1"><!--Empty--></span><span class="callout">1</span>
  member: cn=Jim,ou=OUTOFSCOPE,dc=example,dc=com <span id="CO51-2"><!--Empty--></span><span class="callout">2</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO51-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							A member that does not exist on the LDAP server.
						</div></dd><dt><a href="#CO51-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							A member that may exist, but is not under the <code class="literal">baseDN</code> in the user query for the sync job.
						</div></dd></dl></div><p>
					To tolerate the errors in the above example, the following additions to your sync configuration file must be made:
				</p><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses RFC 2307 schema tolerating errors: <code class="literal">rfc2307_config_tolerating.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
url: ldap://LDAP_SERVICE_IP:389
rfc2307:
    groupsQuery:
        baseDN: "ou=groups,dc=example,dc=com"
        scope: sub
        derefAliases: never
    groupUIDAttribute: dn
    groupNameAttributes: [ cn ]
    groupMembershipAttributes: [ member ]
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
    userUIDAttribute: dn <span id="CO52-1"><!--Empty--></span><span class="callout">1</span>
    userNameAttributes: [ mail ]
    tolerateMemberNotFoundErrors: true <span id="CO52-2"><!--Empty--></span><span class="callout">2</span>
    tolerateMemberOutOfScopeErrors: true <span id="CO52-3"><!--Empty--></span><span class="callout">3</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO52-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The attribute that uniquely identifies a user on the LDAP server. You cannot specify <code class="literal">usersQuery</code> filters when using DN for userUIDAttribute. For fine-grained filtering, use the whitelist / blacklist method.
						</div></dd><dt><a href="#CO52-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							When <code class="literal">true</code>, the sync job tolerates groups for which some members were not found, and members whose LDAP entries are not found are ignored. The default behavior for the sync job is to fail if a member of a group is not found.
						</div></dd><dt><a href="#CO52-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							When <code class="literal">true</code>, the sync job tolerates groups for which some members are outside the user scope given in the <code class="literal">usersQuery</code> base DN, and members outside the member query scope are ignored. The default behavior for the sync job is to fail if a member of a group is out of scope.
						</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create the configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the sync with the <code class="literal">rfc2307_config_tolerating.yaml</code> file:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=rfc2307_config_tolerating.yaml --confirm</pre><p class="simpara">
							OpenShift Container Platform creates the following group record as a result of the above sync operation:
						</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">rfc2307_config.yaml</code> file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400
    openshift.io/ldap.uid: cn=admins,ou=groups,dc=example,dc=com
    openshift.io/ldap.url: LDAP_SERVER_IP:389
  creationTimestamp:
  name: admins
users: <span id="CO53-1"><!--Empty--></span><span class="callout">1</span>
- jane.smith@example.com
- jim.adams@example.com</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO53-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The users that are members of the group, as specified by the sync file. Members for which lookup encountered tolerated errors are absent.
								</div></dd></dl></div></li></ul></div></section><section class="section" id="ldap-syncing-activedir_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.5.4. Syncing groups using the Active Directory schema</h3></div></div></div><p>
					In the Active Directory schema, both users (Jane and Jim) exist in the LDAP server as first-class entries, and group membership is stored in attributes on the user. The following snippet of <code class="literal">ldif</code> defines the users and group for this schema:
				</p><div class="formalpara"><p class="title"><strong>LDAP entries that use Active Directory schema: <code class="literal">active_directory.ldif</code></strong></p><p>
						
<pre class="programlisting language-ldif">dn: ou=users,dc=example,dc=com
objectClass: organizationalUnit
ou: users

dn: cn=Jane,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jane
sn: Smith
displayName: Jane Smith
mail: jane.smith@example.com
memberOf: admins <span id="CO54-1"><!--Empty--></span><span class="callout">1</span>

dn: cn=Jim,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jim
sn: Adams
displayName: Jim Adams
mail: jim.adams@example.com
memberOf: admins</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO54-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The user’s group memberships are listed as attributes on the user, and the group does not exist as an entry on the server. The <code class="literal">memberOf</code> attribute does not have to be a literal attribute on the user; in some LDAP servers, it is created during search and returned to the client, but not committed to the database.
						</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create the configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the sync with the <code class="literal">active_directory_config.yaml</code> file:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=active_directory_config.yaml --confirm</pre><p class="simpara">
							OpenShift Container Platform creates the following group record as a result of the above sync operation:
						</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">active_directory_config.yaml</code> file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400 <span id="CO55-1"><!--Empty--></span><span class="callout">1</span>
    openshift.io/ldap.uid: admins <span id="CO55-2"><!--Empty--></span><span class="callout">2</span>
    openshift.io/ldap.url: LDAP_SERVER_IP:389 <span id="CO55-3"><!--Empty--></span><span class="callout">3</span>
  creationTimestamp:
  name: admins <span id="CO55-4"><!--Empty--></span><span class="callout">4</span>
users: <span id="CO55-5"><!--Empty--></span><span class="callout">5</span>
- jane.smith@example.com
- jim.adams@example.com</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO55-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The last time this OpenShift Container Platform group was synchronized with the LDAP server, in ISO 6801 format.
								</div></dd><dt><a href="#CO55-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The unique identifier for the group on the LDAP server.
								</div></dd><dt><a href="#CO55-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The IP address and host of the LDAP server where this group’s record is stored.
								</div></dd><dt><a href="#CO55-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The name of the group as listed in the LDAP server.
								</div></dd><dt><a href="#CO55-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The users that are members of the group, named as specified by the sync file.
								</div></dd></dl></div></li></ul></div></section><section class="section" id="ldap-syncing-augmented-activedir_ldap-syncing-groups"><div class="titlepage"><div><div><h3 class="title">18.5.5. Syncing groups using the augmented Active Directory schema</h3></div></div></div><p>
					In the augmented Active Directory schema, both users (Jane and Jim) and groups exist in the LDAP server as first-class entries, and group membership is stored in attributes on the user. The following snippet of <code class="literal">ldif</code> defines the users and group for this schema:
				</p><div class="formalpara"><p class="title"><strong>LDAP entries that use augmented Active Directory schema: <code class="literal">augmented_active_directory.ldif</code></strong></p><p>
						
<pre class="programlisting language-ldif">dn: ou=users,dc=example,dc=com
objectClass: organizationalUnit
ou: users

dn: cn=Jane,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jane
sn: Smith
displayName: Jane Smith
mail: jane.smith@example.com
memberOf: cn=admins,ou=groups,dc=example,dc=com <span id="CO56-1"><!--Empty--></span><span class="callout">1</span>

dn: cn=Jim,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jim
sn: Adams
displayName: Jim Adams
mail: jim.adams@example.com
memberOf: cn=admins,ou=groups,dc=example,dc=com

dn: ou=groups,dc=example,dc=com
objectClass: organizationalUnit
ou: groups

dn: cn=admins,ou=groups,dc=example,dc=com <span id="CO56-2"><!--Empty--></span><span class="callout">2</span>
objectClass: groupOfNames
cn: admins
owner: cn=admin,dc=example,dc=com
description: System Administrators
member: cn=Jane,ou=users,dc=example,dc=com
member: cn=Jim,ou=users,dc=example,dc=com</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO56-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The user’s group memberships are listed as attributes on the user.
						</div></dd><dt><a href="#CO56-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The group is a first-class entry on the LDAP server.
						</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create the configuration file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the sync with the <code class="literal">augmented_active_directory_config.yaml</code> file:
						</p><pre class="programlisting language-terminal">$ oc adm groups sync --sync-config=augmented_active_directory_config.yaml --confirm</pre><p class="simpara">
							OpenShift Container Platform creates the following group record as a result of the above sync operation:
						</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">augmented_active_directory_config.yaml</code> file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400 <span id="CO57-1"><!--Empty--></span><span class="callout">1</span>
    openshift.io/ldap.uid: cn=admins,ou=groups,dc=example,dc=com <span id="CO57-2"><!--Empty--></span><span class="callout">2</span>
    openshift.io/ldap.url: LDAP_SERVER_IP:389 <span id="CO57-3"><!--Empty--></span><span class="callout">3</span>
  creationTimestamp:
  name: admins <span id="CO57-4"><!--Empty--></span><span class="callout">4</span>
users: <span id="CO57-5"><!--Empty--></span><span class="callout">5</span>
- jane.smith@example.com
- jim.adams@example.com</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO57-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The last time this OpenShift Container Platform group was synchronized with the LDAP server, in ISO 6801 format.
								</div></dd><dt><a href="#CO57-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The unique identifier for the group on the LDAP server.
								</div></dd><dt><a href="#CO57-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The IP address and host of the LDAP server where this group’s record is stored.
								</div></dd><dt><a href="#CO57-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The name of the group as specified by the sync file.
								</div></dd><dt><a href="#CO57-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The users that are members of the group, named as specified by the sync file.
								</div></dd></dl></div></li></ul></div><section class="section" id="ldap-syncing-nesting_ldap-syncing-groups"><div class="titlepage"><div><div><h4 class="title">18.5.5.1. LDAP nested membership sync example</h4></div></div></div><p>
						Groups in OpenShift Container Platform do not nest. The LDAP server must flatten group membership before the data can be consumed. Microsoft’s Active Directory Server supports this feature via the <a class="link" href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx"><code class="literal">LDAP_MATCHING_RULE_IN_CHAIN</code></a> rule, which has the OID <code class="literal">1.2.840.113556.1.4.1941</code>. Furthermore, only explicitly whitelisted groups can be synced when using this matching rule.
					</p><p>
						This section has an example for the augmented Active Directory schema, which synchronizes a group named <code class="literal">admins</code> that has one user <code class="literal">Jane</code> and one group <code class="literal">otheradmins</code> as members. The <code class="literal">otheradmins</code> group has one user member: <code class="literal">Jim</code>. This example explains:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								How the group and users are added to the LDAP server.
							</li><li class="listitem">
								What the LDAP sync configuration file looks like.
							</li><li class="listitem">
								What the resulting group record in OpenShift Container Platform will be after synchronization.
							</li></ul></div><p>
						In the augmented Active Directory schema, both users (<code class="literal">Jane</code> and <code class="literal">Jim</code>) and groups exist in the LDAP server as first-class entries, and group membership is stored in attributes on the user or the group. The following snippet of <code class="literal">ldif</code> defines the users and groups for this schema:
					</p><div class="formalpara"><p class="title"><strong>LDAP entries that use augmented Active Directory schema with nested members: <code class="literal">augmented_active_directory_nested.ldif</code></strong></p><p>
							
<pre class="programlisting language-ldif">dn: ou=users,dc=example,dc=com
objectClass: organizationalUnit
ou: users

dn: cn=Jane,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jane
sn: Smith
displayName: Jane Smith
mail: jane.smith@example.com
memberOf: cn=admins,ou=groups,dc=example,dc=com <span id="CO58-1"><!--Empty--></span><span class="callout">1</span>

dn: cn=Jim,ou=users,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: testPerson
cn: Jim
sn: Adams
displayName: Jim Adams
mail: jim.adams@example.com
memberOf: cn=otheradmins,ou=groups,dc=example,dc=com <span id="CO58-2"><!--Empty--></span><span class="callout">2</span>

dn: ou=groups,dc=example,dc=com
objectClass: organizationalUnit
ou: groups

dn: cn=admins,ou=groups,dc=example,dc=com <span id="CO58-3"><!--Empty--></span><span class="callout">3</span>
objectClass: group
cn: admins
owner: cn=admin,dc=example,dc=com
description: System Administrators
member: cn=Jane,ou=users,dc=example,dc=com
member: cn=otheradmins,ou=groups,dc=example,dc=com

dn: cn=otheradmins,ou=groups,dc=example,dc=com <span id="CO58-4"><!--Empty--></span><span class="callout">4</span>
objectClass: group
cn: otheradmins
owner: cn=admin,dc=example,dc=com
description: Other System Administrators
memberOf: cn=admins,ou=groups,dc=example,dc=com <span id="CO58-5"><!--Empty--></span><span class="callout">5</span> <span id="CO58-6"><!--Empty--></span><span class="callout">6</span>
member: cn=Jim,ou=users,dc=example,dc=com</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO58-1"><span class="callout">1</span></a> <a href="#CO58-2"><span class="callout">2</span></a> <a href="#CO58-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								The user’s and group’s memberships are listed as attributes on the object.
							</div></dd><dt><a href="#CO58-3"><span class="callout">3</span></a> <a href="#CO58-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The groups are first-class entries on the LDAP server.
							</div></dd><dt><a href="#CO58-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								The <code class="literal">otheradmins</code> group is a member of the <code class="literal">admins</code> group.
							</div></dd></dl></div><p>
						When syncing nested groups with Active Directory, you must provide an LDAP query definition for both user entries and group entries, as well as the attributes with which to represent them in the internal OpenShift Container Platform group records. Furthermore, certain changes are required in this configuration:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">oc adm groups sync</code> command must explicitly whitelist groups.
							</li><li class="listitem">
								The user’s <code class="literal">groupMembershipAttributes</code> must include <code class="literal">"memberOf:1.2.840.113556.1.4.1941:"</code> to comply with the <a class="link" href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx"><code class="literal">LDAP_MATCHING_RULE_IN_CHAIN</code></a> rule.
							</li><li class="listitem">
								The <code class="literal">groupUIDAttribute</code> must be set to <code class="literal">dn</code>.
							</li><li class="listitem"><p class="simpara">
								The <code class="literal">groupsQuery</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Must not set <code class="literal">filter</code>.
									</li><li class="listitem">
										Must set a valid <code class="literal">derefAliases</code>.
									</li><li class="listitem">
										Should not set <code class="literal">baseDN</code> as that value is ignored.
									</li><li class="listitem">
										Should not set <code class="literal">scope</code> as that value is ignored.
									</li></ul></div></li></ul></div><p>
						For clarity, the group you create in OpenShift Container Platform should use attributes other than the distinguished name whenever possible for user- or administrator-facing fields. For example, identify the users of an OpenShift Container Platform group by their e-mail, and use the name of the group as the common name. The following configuration file creates these relationships:
					</p><div class="formalpara"><p class="title"><strong>LDAP sync configuration that uses augmented Active Directory schema with nested members: <code class="literal">augmented_active_directory_config_nested.yaml</code></strong></p><p>
							
<pre class="programlisting language-yaml">kind: LDAPSyncConfig
apiVersion: v1
url: ldap://LDAP_SERVICE_IP:389
augmentedActiveDirectory:
    groupsQuery: <span id="CO59-1"><!--Empty--></span><span class="callout">1</span>
        derefAliases: never
        pageSize: 0
    groupUIDAttribute: dn <span id="CO59-2"><!--Empty--></span><span class="callout">2</span>
    groupNameAttributes: [ cn ] <span id="CO59-3"><!--Empty--></span><span class="callout">3</span>
    usersQuery:
        baseDN: "ou=users,dc=example,dc=com"
        scope: sub
        derefAliases: never
        filter: (objectclass=person)
        pageSize: 0
    userNameAttributes: [ mail ] <span id="CO59-4"><!--Empty--></span><span class="callout">4</span>
    groupMembershipAttributes: [ "memberOf:1.2.840.113556.1.4.1941:" ] <span id="CO59-5"><!--Empty--></span><span class="callout">5</span></pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO59-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								<code class="literal">groupsQuery</code> filters cannot be specified. The <code class="literal">groupsQuery</code> base DN and scope values are ignored. <code class="literal">groupsQuery</code> must set a valid <code class="literal">derefAliases</code>.
							</div></dd><dt><a href="#CO59-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The attribute that uniquely identifies a group on the LDAP server. It must be set to <code class="literal">dn</code>.
							</div></dd><dt><a href="#CO59-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The attribute to use as the name of the group.
							</div></dd><dt><a href="#CO59-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The attribute to use as the name of the user in the OpenShift Container Platform group record. <code class="literal">mail</code> or <code class="literal">sAMAccountName</code> are preferred choices in most installations.
							</div></dd><dt><a href="#CO59-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								The attribute on the user that stores the membership information. Note the use of <a class="link" href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx"><code class="literal">LDAP_MATCHING_RULE_IN_CHAIN</code></a>.
							</div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Create the configuration file.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Run the sync with the <code class="literal">augmented_active_directory_config_nested.yaml</code> file:
							</p><pre class="programlisting language-terminal">$ oc adm groups sync \
    'cn=admins,ou=groups,dc=example,dc=com' \
    --sync-config=augmented_active_directory_config_nested.yaml \
    --confirm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You must explicitly whitelist the <code class="literal">cn=admins,ou=groups,dc=example,dc=com</code> group.
								</p></div></div><p class="simpara">
								OpenShift Container Platform creates the following group record as a result of the above sync operation:
							</p><div class="formalpara"><p class="title"><strong>OpenShift Container Platform group created by using the <code class="literal">augmented_active_directory_config_nested.yaml</code> file</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: user.openshift.io/v1
kind: Group
metadata:
  annotations:
    openshift.io/ldap.sync-time: 2015-10-13T10:08:38-0400 <span id="CO60-1"><!--Empty--></span><span class="callout">1</span>
    openshift.io/ldap.uid: cn=admins,ou=groups,dc=example,dc=com <span id="CO60-2"><!--Empty--></span><span class="callout">2</span>
    openshift.io/ldap.url: LDAP_SERVER_IP:389 <span id="CO60-3"><!--Empty--></span><span class="callout">3</span>
  creationTimestamp:
  name: admins <span id="CO60-4"><!--Empty--></span><span class="callout">4</span>
users: <span id="CO60-5"><!--Empty--></span><span class="callout">5</span>
- jane.smith@example.com
- jim.adams@example.com</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO60-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The last time this OpenShift Container Platform group was synchronized with the LDAP server, in ISO 6801 format.
									</div></dd><dt><a href="#CO60-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The unique identifier for the group on the LDAP server.
									</div></dd><dt><a href="#CO60-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The IP address and host of the LDAP server where this group’s record is stored.
									</div></dd><dt><a href="#CO60-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The name of the group as specified by the sync file.
									</div></dd><dt><a href="#CO60-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The users that are members of the group, named as specified by the sync file. Note that members of nested groups are included since the group membership was flattened by the Microsoft Active Directory Server.
									</div></dd></dl></div></li></ul></div></section></section></section><section class="section" id="ldap-syncing-spec_ldap-syncing-groups"><div class="titlepage"><div><div><h2 class="title">18.6. LDAP sync configuration specification</h2></div></div></div><p>
				The object specification for the configuration file is below. Note that the different schema objects have different fields. For example, v1.ActiveDirectoryConfig has no <code class="literal">groupsQuery</code> field whereas v1.RFC2307Config and v1.AugmentedActiveDirectoryConfig both do.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					There is no support for binary attributes. All attribute data coming from the LDAP server must be in the format of a UTF-8 encoded string. For example, never use a binary attribute, such as <code class="literal">objectGUID</code>, as an ID attribute. You must use string attributes, such as <code class="literal">sAMAccountName</code> or <code class="literal">userPrincipalName</code>, instead.
				</p></div></div><section class="section" id="sync-ldap-v1-ldapsyncconfig"><div class="titlepage"><div><div><h3 class="title">18.6.1. v1.LDAPSyncConfig</h3></div></div></div><p>
					<code class="literal">LDAPSyncConfig</code> holds the necessary configuration options to define an LDAP group sync.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032730464640" scope="col">Name</th><th align="left" valign="top" id="idm140032730463552" scope="col">Description</th><th align="left" valign="top" id="idm140032732979872" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">kind</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									String value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: <a class="link" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#types-kinds</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">apiVersion</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: <a class="link" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#resources">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#resources</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">url</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Host is the scheme, host and port of the LDAP server to connect to: <code class="literal">scheme://host:port</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">bindDN</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Optional DN to bind to the LDAP server with.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">bindPassword</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Optional password to bind with during the search phase.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									v1.StringSource
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">insecure</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									If <code class="literal">true</code>, indicates the connection should not use TLS. If <code class="literal">false</code>, <code class="literal">ldaps://</code> URLs connect using TLS, and <code class="literal">ldap://</code> URLs are upgraded to a TLS connection using StartTLS as specified in <a class="link" href="https://tools.ietf.org/html/rfc2830">https://tools.ietf.org/html/rfc2830</a>. If you set <code class="literal">insecure</code> to <code class="literal">true</code>, you cannot use <code class="literal">ldaps://</code> URL schemes.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									boolean
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">ca</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Optional trusted certificate authority bundle to use when making requests to the server. If empty, the default system roots are used.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">groupUIDNameMapping</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Optional direct mapping of LDAP group UIDs to OpenShift Container Platform group names.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									object
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">rfc2307</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Holds the configuration for extracting data from an LDAP server set up in a fashion similar to RFC2307: first-class group and user entries, with group membership determined by a multi-valued attribute on the group entry listing its members.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									v1.RFC2307Config
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">activeDirectory</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Holds the configuration for extracting data from an LDAP server set up in a fashion similar to that used in Active Directory: first-class user entries, with group membership determined by a multi-valued attribute on members listing groups they are a member of.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									v1.ActiveDirectoryConfig
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032730464640"> <p>
									<code class="literal">augmentedActiveDirectory</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032730463552"> <p>
									Holds the configuration for extracting data from an LDAP server set up in a fashion similar to that used in Active Directory as described above, with one addition: first-class group entries exist and are used to hold metadata but not group membership.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732979872"> <p>
									v1.AugmentedActiveDirectoryConfig
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="sync-ldap-v1-stringsource"><div class="titlepage"><div><div><h3 class="title">18.6.2. v1.StringSource</h3></div></div></div><p>
					<code class="literal">StringSource</code> allows specifying a string inline, or externally via environment variable or file. When it contains only a string value, it marshals to a simple JSON string.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032732145456" scope="col">Name</th><th align="left" valign="top" id="idm140032732144368" scope="col">Description</th><th align="left" valign="top" id="idm140032732143280" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032732145456"> <p>
									<code class="literal">value</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732144368"> <p>
									Specifies the cleartext value, or an encrypted value if <code class="literal">keyFile</code> is specified.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732143280"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732145456"> <p>
									<code class="literal">env</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732144368"> <p>
									Specifies an environment variable containing the cleartext value, or an encrypted value if the <code class="literal">keyFile</code> is specified.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732143280"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732145456"> <p>
									<code class="literal">file</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732144368"> <p>
									References a file containing the cleartext value, or an encrypted value if a <code class="literal">keyFile</code> is specified.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732143280"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732145456"> <p>
									<code class="literal">keyFile</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732144368"> <p>
									References a file containing the key to use to decrypt the value.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732143280"> <p>
									string
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="sync-ldap-v1-ldapquery"><div class="titlepage"><div><div><h3 class="title">18.6.3. v1.LDAPQuery</h3></div></div></div><p>
					<code class="literal">LDAPQuery</code> holds the options necessary to build an LDAP query.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733179280" scope="col">Name</th><th align="left" valign="top" id="idm140032733178192" scope="col">Description</th><th align="left" valign="top" id="idm140032733177104" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">baseDN</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									DN of the branch of the directory where all searches should start from.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">scope</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									The optional scope of the search. Can be <code class="literal">base</code>: only the base object, <code class="literal">one</code>: all objects on the base level, <code class="literal">sub</code>: the entire subtree. Defaults to <code class="literal">sub</code> if not set.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">derefAliases</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									The optional behavior of the search with regards to aliases. Can be <code class="literal">never</code>: never dereference aliases, <code class="literal">search</code>: only dereference in searching, <code class="literal">base</code>: only dereference in finding the base object, <code class="literal">always</code>: always dereference. Defaults to <code class="literal">always</code> if not set.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">timeout</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									Holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is <code class="literal">0</code>, no client-side limit is imposed.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									integer
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">filter</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									A valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733179280"> <p>
									<code class="literal">pageSize</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733178192"> <p>
									Maximum preferred page size, measured in LDAP entries. A page size of <code class="literal">0</code> means no paging will be done.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733177104"> <p>
									integer
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="sync-ldap-v1-rfc2307config"><div class="titlepage"><div><div><h3 class="title">18.6.4. v1.RFC2307Config</h3></div></div></div><p>
					<code class="literal">RFC2307Config</code> holds the necessary configuration options to define how an LDAP group sync interacts with an LDAP server using the RFC2307 schema.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032732822816" scope="col">Name</th><th align="left" valign="top" id="idm140032732821728" scope="col">Description</th><th align="left" valign="top" id="idm140032731752336" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">groupsQuery</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Holds the template for an LDAP query that returns group entries.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									v1.LDAPQuery
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">groupUIDAttribute</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Defines which attribute on an LDAP group entry will be interpreted as its unique identifier. (<code class="literal">ldapGroupUID</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">groupNameAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Defines which attributes on an LDAP group entry will be interpreted as its name to use for an OpenShift Container Platform group.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">groupMembershipAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Defines which attributes on an LDAP group entry will be interpreted as its members. The values contained in those attributes must be queryable by your <code class="literal">UserUIDAttribute</code>.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">usersQuery</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Holds the template for an LDAP query that returns user entries.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									v1.LDAPQuery
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">userUIDAttribute</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Defines which attribute on an LDAP user entry will be interpreted as its unique identifier. It must correspond to values that will be found from the <code class="literal">GroupMembershipAttributes</code>.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">userNameAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Defines which attributes on an LDAP user entry will be used, in order, as its OpenShift Container Platform user name. The first attribute with a non-empty value is used. This should match your <code class="literal">PreferredUsername</code> setting for your <code class="literal">LDAPPasswordIdentityProvider</code>. The attribute to use as the name of the user in the OpenShift Container Platform group record. <code class="literal">mail</code> or <code class="literal">sAMAccountName</code> are preferred choices in most installations.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">tolerateMemberNotFoundErrors</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Determines the behavior of the LDAP sync job when missing user entries are encountered. If <code class="literal">true</code>, an LDAP query for users that does not find any will be tolerated and an only and error will be logged. If <code class="literal">false</code>, the LDAP sync job will fail if a query for users doesn’t find any. The default value is <code class="literal">false</code>. Misconfigured LDAP sync jobs with this flag set to <code class="literal">true</code> can cause group membership to be removed, so it is recommended to use this flag with caution.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									boolean
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732822816"> <p>
									<code class="literal">tolerateMemberOutOfScopeErrors</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732821728"> <p>
									Determines the behavior of the LDAP sync job when out-of-scope user entries are encountered. If <code class="literal">true</code>, an LDAP query for a user that falls outside of the base DN given for the all user query will be tolerated and only an error will be logged. If <code class="literal">false</code>, the LDAP sync job will fail if a user query would search outside of the base DN specified by the all user query. Misconfigured LDAP sync jobs with this flag set to <code class="literal">true</code> can result in groups missing users, so it is recommended to use this flag with caution.
								</p>
								 </td><td align="left" valign="top" headers="idm140032731752336"> <p>
									boolean
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="sync-ldap-v1-activedirectoryconfig"><div class="titlepage"><div><div><h3 class="title">18.6.5. v1.ActiveDirectoryConfig</h3></div></div></div><p>
					<code class="literal">ActiveDirectoryConfig</code> holds the necessary configuration options to define how an LDAP group sync interacts with an LDAP server using the Active Directory schema.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032732628000" scope="col">Name</th><th align="left" valign="top" id="idm140032732626912" scope="col">Description</th><th align="left" valign="top" id="idm140032732625824" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032732628000"> <p>
									<code class="literal">usersQuery</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732626912"> <p>
									Holds the template for an LDAP query that returns user entries.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732625824"> <p>
									v1.LDAPQuery
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732628000"> <p>
									<code class="literal">userNameAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732626912"> <p>
									Defines which attributes on an LDAP user entry will be interpreted as its OpenShift Container Platform user name. The attribute to use as the name of the user in the OpenShift Container Platform group record. <code class="literal">mail</code> or <code class="literal">sAMAccountName</code> are preferred choices in most installations.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732625824"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032732628000"> <p>
									<code class="literal">groupMembershipAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032732626912"> <p>
									Defines which attributes on an LDAP user entry will be interpreted as the groups it is a member of.
								</p>
								 </td><td align="left" valign="top" headers="idm140032732625824"> <p>
									string array
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="sync-ldap-v1-augmentedactivedirectoryconfig"><div class="titlepage"><div><div><h3 class="title">18.6.6. v1.AugmentedActiveDirectoryConfig</h3></div></div></div><p>
					<code class="literal">AugmentedActiveDirectoryConfig</code> holds the necessary configuration options to define how an LDAP group sync interacts with an LDAP server using the augmented Active Directory schema.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733836976" scope="col">Name</th><th align="left" valign="top" id="idm140032733835888" scope="col">Description</th><th align="left" valign="top" id="idm140032733834800" scope="col">Schema</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">usersQuery</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Holds the template for an LDAP query that returns user entries.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									v1.LDAPQuery
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">userNameAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Defines which attributes on an LDAP user entry will be interpreted as its OpenShift Container Platform user name. The attribute to use as the name of the user in the OpenShift Container Platform group record. <code class="literal">mail</code> or <code class="literal">sAMAccountName</code> are preferred choices in most installations.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">groupMembershipAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Defines which attributes on an LDAP user entry will be interpreted as the groups it is a member of.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									string array
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">groupsQuery</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Holds the template for an LDAP query that returns group entries.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									v1.LDAPQuery
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">groupUIDAttribute</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Defines which attribute on an LDAP group entry will be interpreted as its unique identifier. (<code class="literal">ldapGroupUID</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									string
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140032733836976"> <p>
									<code class="literal">groupNameAttributes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140032733835888"> <p>
									Defines which attributes on an LDAP group entry will be interpreted as its name to use for an OpenShift Container Platform group.
								</p>
								 </td><td align="left" valign="top" headers="idm140032733834800"> <p>
									string array
								</p>
								 </td></tr></tbody></table></div></section></section></section><section class="chapter" id="managing-cloud-provider-credentials"><div class="titlepage"><div><div><h1 class="title">Chapter 19. Managing cloud provider credentials</h1></div></div></div><section class="section" id="about-cloud-credential-operator"><div class="titlepage"><div><div><h2 class="title">19.1. About the Cloud Credential Operator</h2></div></div></div><p>
				The Cloud Credential Operator (CCO) manages cloud provider credentials as custom resource definitions (CRDs). The CCO syncs on <code class="literal">CredentialsRequest</code> custom resources (CRs) to allow OpenShift Container Platform components to request cloud provider credentials with the specific permissions that are required for the cluster to run.
			</p><p>
				By setting different values for the <code class="literal">credentialsMode</code> parameter in the <code class="literal">install-config.yaml</code> file, the CCO can be configured to operate in several different modes. If no mode is specified, or the <code class="literal">credentialsMode</code> parameter is set to an empty string (<code class="literal">""</code>), the CCO operates in its default mode.
			</p><section class="section" id="about-cloud-credential-operator-modes_about-cloud-credential-operator"><div class="titlepage"><div><div><h3 class="title">19.1.1. Modes</h3></div></div></div><p>
					By setting different values for the <code class="literal">credentialsMode</code> parameter in the <code class="literal">install-config.yaml</code> file, the CCO can be configured to operate in <span class="emphasis"><em>mint</em></span>, <span class="emphasis"><em>passthrough</em></span>, or <span class="emphasis"><em>manual</em></span> mode. These options provide transparency and flexibility in how the CCO uses cloud credentials to process <code class="literal">CredentialsRequest</code> CRs in the cluster, and allow the CCO to be configured to suit the security requirements of your organization. Not all CCO modes are supported for all cloud providers.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-mint">Mint</a></strong></span>: In mint mode, the CCO uses the provided admin-level cloud credential to create new credentials for components in the cluster with only the specific permissions that are required.
						</li><li class="listitem">
							<span class="strong strong"><strong><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-passthrough">Passthrough</a></strong></span>: In passthrough mode, the CCO passes the provided cloud credential to the components that request cloud credentials.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-manual">Manual</a></strong></span>: In manual mode, a user manages cloud credentials instead of the CCO.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-sts">Manual with AWS Security Token Service</a></strong></span>: In manual mode, you can configure an AWS cluster to use Amazon Web Services Security Token Service (AWS STS). With this configuration, the CCO uses temporary credentials for different components.
								</li><li class="listitem">
									<span class="strong strong"><strong><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-gcp-workload-identity">Manual with GCP Workload Identity</a></strong></span>: In manual mode, you can configure a GCP cluster to use GCP Workload Identity. With this configuration, the CCO uses temporary credentials for different components.
								</li></ul></div></li></ul></div><div class="table" id="idm140032730693616"><p class="title"><strong>Table 19.1. CCO mode support matrix</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"><!--Empty--></col><col style="width: 20%; " class="col_2"><!--Empty--></col><col style="width: 20%; " class="col_3"><!--Empty--></col><col style="width: 20%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="middle" id="idm140032730686928" scope="col">Cloud provider</th><th align="center" valign="middle" id="idm140032730685840" scope="col">Mint</th><th align="center" valign="middle" id="idm140032730684752" scope="col">Passthrough</th><th align="center" valign="middle" id="idm140032730683664" scope="col">Manual</th></tr></thead><tbody><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Alibaba Cloud
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Amazon Web Services (AWS)
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Microsoft Azure
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X <sup>[1]</sup>
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Google Cloud Platform (GCP)
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									IBM Cloud
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Nutanix
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> </td><td align="center" valign="middle" headers="idm140032730683664"> <p>
									X
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Red Hat OpenStack Platform (RHOSP)
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									Red Hat Virtualization (RHV)
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> </td></tr><tr><td align="left" valign="middle" headers="idm140032730686928"> <p>
									VMware vSphere
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730685840"> </td><td align="center" valign="middle" headers="idm140032730684752"> <p>
									X
								</p>
								 </td><td align="center" valign="middle" headers="idm140032730683664"> </td></tr></tbody></table></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Manual mode is the only supported CCO configuration for Microsoft Azure Stack Hub.
						</li></ol></div></section><section class="section" id="cco-determine-mode_about-cloud-credential-operator"><div class="titlepage"><div><div><h3 class="title">19.1.2. Determining the Cloud Credential Operator mode</h3></div></div></div><p>
					For platforms that support using the CCO in multiple modes, you can determine what mode the CCO is configured to use by using the web console or the CLI.
				</p><div class="figure" id="idm140032731486336"><p class="title"><strong>Figure 19.1. Determining the CCO configuration</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/536b63adb96218f1bbfcd644538c34ef/334_OpenShift_cluster_updating_and_CCO_workflows_0923_4.11_A.png" alt="Decision tree showing how to determine the configured CCO credentials mode for your cluster."/></div></div></div><section class="section" id="cco-determine-mode-gui_about-cloud-credential-operator"><div class="titlepage"><div><div><h4 class="title">19.1.2.1. Determining the Cloud Credential Operator mode by using the web console</h4></div></div></div><p>
						You can determine what mode the Cloud Credential Operator (CCO) is configured to use by using the web console.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Only Amazon Web Services (AWS), global Microsoft Azure, and Google Cloud Platform (GCP) clusters support multiple CCO modes.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform account with cluster administrator permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in to the OpenShift Container Platform web console as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Cluster Settings</strong></span>.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Cluster Settings</strong></span> page, select the <span class="strong strong"><strong>Configuration</strong></span> tab.
							</li><li class="listitem">
								Under <span class="strong strong"><strong>Configuration resource</strong></span>, select <span class="strong strong"><strong>CloudCredential</strong></span>.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>CloudCredential details</strong></span> page, select the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								In the YAML block, check the value of <code class="literal">spec.credentialsMode</code>. The following values are possible, though not all are supported on all platforms:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">''</code>: The CCO is operating in the default mode. In this configuration, the CCO operates in mint or passthrough mode, depending on the credentials provided during installation.
									</li><li class="listitem">
										<code class="literal">Mint</code>: The CCO is operating in mint mode.
									</li><li class="listitem">
										<code class="literal">Passthrough</code>: The CCO is operating in passthrough mode.
									</li><li class="listitem">
										<code class="literal">Manual</code>: The CCO is operating in manual mode.
									</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									To determine the specific configuration of an AWS or GCP cluster that has a <code class="literal">spec.credentialsMode</code> of <code class="literal">''</code>, <code class="literal">Mint</code>, or <code class="literal">Manual</code>, you must investigate further.
								</p><p>
									AWS and GCP clusters support using mint mode with the root secret deleted.
								</p><p>
									An AWS or GCP cluster that uses manual mode might be configured to create and manage cloud credentials from outside of the cluster using the AWS Security Token Service (STS) or GCP Workload Identity. You can determine whether your cluster uses this strategy by examining the cluster <code class="literal">Authentication</code> object.
								</p></div></div></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use the default (<code class="literal">''</code>) only: To determine whether the cluster is operating in mint or passthrough mode, inspect the annotations on the cluster root secret:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span> and look for the root secret for your cloud provider.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Ensure that the <span class="strong strong"><strong>Project</strong></span> dropdown is set to <span class="strong strong"><strong>All Projects</strong></span>.
										</p></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032730932000" scope="col">Platform</th><th align="left" valign="top" id="idm140032730930912" scope="col">Secret name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032730932000"> <p>
														AWS
													</p>
													 </td><td align="left" valign="top" headers="idm140032730930912"> <p>
														<code class="literal">aws-creds</code>
													</p>
													 </td></tr><tr><td align="left" valign="top" headers="idm140032730932000"> <p>
														GCP
													</p>
													 </td><td align="left" valign="top" headers="idm140032730930912"> <p>
														<code class="literal">gcp-credentials</code>
													</p>
													 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
										To view the CCO mode that the cluster is using, click <code class="literal">1 annotation</code> under <span class="strong strong"><strong>Annotations</strong></span>, and check the value field. The following values are possible:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<code class="literal">Mint</code>: The CCO is operating in mint mode.
											</li><li class="listitem">
												<code class="literal">Passthrough</code>: The CCO is operating in passthrough mode.
											</li></ul></div><p class="simpara">
										If your cluster uses mint mode, you can also determine whether the cluster is operating without the root secret.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use mint mode only: To determine whether the cluster is operating without the root secret, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span> and look for the root secret for your cloud provider.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Ensure that the <span class="strong strong"><strong>Project</strong></span> dropdown is set to <span class="strong strong"><strong>All Projects</strong></span>.
								</p></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032730904208" scope="col">Platform</th><th align="left" valign="top" id="idm140032730903120" scope="col">Secret name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032730904208"> <p>
												AWS
											</p>
											 </td><td align="left" valign="top" headers="idm140032730903120"> <p>
												<code class="literal">aws-creds</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730904208"> <p>
												GCP
											</p>
											 </td><td align="left" valign="top" headers="idm140032730903120"> <p>
												<code class="literal">gcp-credentials</code>
											</p>
											 </td></tr></tbody></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If you see one of these values, your cluster is using mint or passthrough mode with the root secret present.
									</li><li class="listitem">
										If you do not see these values, your cluster is using the CCO in mint mode with the root secret removed.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use manual mode only: To determine whether the cluster is configured to create and manage cloud credentials from outside of the cluster, you must check the cluster <code class="literal">Authentication</code> object YAML values.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Cluster Settings</strong></span>.
									</li><li class="listitem">
										On the <span class="strong strong"><strong>Cluster Settings</strong></span> page, select the <span class="strong strong"><strong>Configuration</strong></span> tab.
									</li><li class="listitem">
										Under <span class="strong strong"><strong>Configuration resource</strong></span>, select <span class="strong strong"><strong>Authentication</strong></span>.
									</li><li class="listitem">
										On the <span class="strong strong"><strong>Authentication details</strong></span> page, select the <span class="strong strong"><strong>YAML</strong></span> tab.
									</li><li class="listitem"><p class="simpara">
										In the YAML block, check the value of the <code class="literal">.spec.serviceAccountIssuer</code> parameter.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												A value that contains a URL that is associated with your cloud provider indicates that the CCO is using manual mode with AWS STS or GCP Workload Identity to create and manage cloud credentials from outside of the cluster. These clusters are configured using the <code class="literal">ccoctl</code> utility.
											</li><li class="listitem">
												An empty value (<code class="literal">''</code>) indicates that the cluster is using the CCO in manual mode but was not configured using the <code class="literal">ccoctl</code> utility.
											</li></ul></div></li></ol></div></li></ol></div></section><section class="section" id="cco-determine-mode-cli_about-cloud-credential-operator"><div class="titlepage"><div><div><h4 class="title">19.1.2.2. Determining the Cloud Credential Operator mode by using the CLI</h4></div></div></div><p>
						You can determine what mode the Cloud Credential Operator (CCO) is configured to use by using the CLI.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Only Amazon Web Services (AWS), global Microsoft Azure, and Google Cloud Platform (GCP) clusters support multiple CCO modes.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform account with cluster administrator permissions.
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in to <code class="literal">oc</code> on the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem"><p class="simpara">
								To determine the mode that the CCO is configured to use, enter the following command:
							</p><pre class="programlisting language-terminal">$ oc get cloudcredentials cluster \
  -o=jsonpath={.spec.credentialsMode}</pre><p class="simpara">
								The following output values are possible, though not all are supported on all platforms:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">''</code>: The CCO is operating in the default mode. In this configuration, the CCO operates in mint or passthrough mode, depending on the credentials provided during installation.
									</li><li class="listitem">
										<code class="literal">Mint</code>: The CCO is operating in mint mode.
									</li><li class="listitem">
										<code class="literal">Passthrough</code>: The CCO is operating in passthrough mode.
									</li><li class="listitem">
										<code class="literal">Manual</code>: The CCO is operating in manual mode.
									</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									To determine the specific configuration of an AWS or GCP cluster that has a <code class="literal">spec.credentialsMode</code> of <code class="literal">''</code>, <code class="literal">Mint</code>, or <code class="literal">Manual</code>, you must investigate further.
								</p><p>
									AWS and GCP clusters support using mint mode with the root secret deleted.
								</p><p>
									An AWS or GCP cluster that uses manual mode might be configured to create and manage cloud credentials from outside of the cluster using the AWS Security Token Service (STS) or GCP Workload Identity. You can determine whether your cluster uses this strategy by examining the cluster <code class="literal">Authentication</code> object.
								</p></div></div></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use the default (<code class="literal">''</code>) only: To determine whether the cluster is operating in mint or passthrough mode, run the following command:
							</p><pre class="programlisting language-terminal">$ oc get secret &lt;secret_name&gt; \
  -n kube-system \
  -o jsonpath \
  --template '{ .metadata.annotations }'</pre><p class="simpara">
								where <code class="literal">&lt;secret_name&gt;</code> is <code class="literal">aws-creds</code> for AWS or <code class="literal">gcp-credentials</code> for GCP.
							</p><p class="simpara">
								This command displays the value of the <code class="literal">.metadata.annotations</code> parameter in the cluster root secret object. The following output values are possible:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">Mint</code>: The CCO is operating in mint mode.
									</li><li class="listitem">
										<code class="literal">Passthrough</code>: The CCO is operating in passthrough mode.
									</li></ul></div><p class="simpara">
								If your cluster uses mint mode, you can also determine whether the cluster is operating without the root secret.
							</p></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use mint mode only: To determine whether the cluster is operating without the root secret, run the following command:
							</p><pre class="programlisting language-terminal">$ oc get secret &lt;secret_name&gt; \
  -n=kube-system</pre><p class="simpara">
								where <code class="literal">&lt;secret_name&gt;</code> is <code class="literal">aws-creds</code> for AWS or <code class="literal">gcp-credentials</code> for GCP.
							</p><p class="simpara">
								If the root secret is present, the output of this command returns information about the secret. An error indicates that the root secret is not present on the cluster.
							</p></li><li class="listitem"><p class="simpara">
								AWS or GCP clusters that use manual mode only: To determine whether the cluster is configured to create and manage cloud credentials from outside of the cluster, run the following command:
							</p><pre class="programlisting language-terminal">$ oc get authentication cluster \
  -o jsonpath \
  --template='{ .spec.serviceAccountIssuer }'</pre><p class="simpara">
								This command displays the value of the <code class="literal">.spec.serviceAccountIssuer</code> parameter in the cluster <code class="literal">Authentication</code> object.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										An output of a URL that is associated with your cloud provider indicates that the CCO is using manual mode with AWS STS or GCP Workload Identity to create and manage cloud credentials from outside of the cluster. These clusters are configured using the <code class="literal">ccoctl</code> utility.
									</li><li class="listitem">
										An empty output indicates that the cluster is using the CCO in manual mode but was not configured using the <code class="literal">ccoctl</code> utility.
									</li></ul></div></li></ol></div></section></section><section class="section" id="about-cloud-credential-operator-default_about-cloud-credential-operator"><div class="titlepage"><div><div><h3 class="title">19.1.3. Default behavior</h3></div></div></div><p>
					For platforms on which multiple modes are supported (AWS, Azure, and GCP), when the CCO operates in its default mode, it checks the provided credentials dynamically to determine for which mode they are sufficient to process <code class="literal">CredentialsRequest</code> CRs.
				</p><p>
					By default, the CCO determines whether the credentials are sufficient for mint mode, which is the preferred mode of operation, and uses those credentials to create appropriate credentials for components in the cluster. If the credentials are not sufficient for mint mode, it determines whether they are sufficient for passthrough mode. If the credentials are not sufficient for passthrough mode, the CCO cannot adequately process <code class="literal">CredentialsRequest</code> CRs.
				</p><p>
					If the provided credentials are determined to be insufficient during installation, the installation fails. For AWS, the installer fails early in the process and indicates which required permissions are missing. Other providers might not provide specific information about the cause of the error until errors are encountered.
				</p><p>
					If the credentials are changed after a successful installation and the CCO determines that the new credentials are insufficient, the CCO puts conditions on any new <code class="literal">CredentialsRequest</code> CRs to indicate that it cannot process them because of the insufficient credentials.
				</p><p>
					To resolve insufficient credentials issues, provide a credential with sufficient permissions. If an error occurred during installation, try installing again. For issues with new <code class="literal">CredentialsRequest</code> CRs, wait for the CCO to try to process the CR again. As an alternative, you can manually create IAM for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">AWS</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Azure</a>, and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">GCP</a>.
				</p></section><section class="section _additional-resources" id="additional-resources_about-cloud-credential-operator_about-cloud-credential-operator"><div class="titlepage"><div><div><h3 class="title">19.1.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#cloud-credential-operator_cluster-operators-ref">Cluster Operators reference page for the Cloud Credential Operator</a>
						</li></ul></div></section></section><section class="section" id="cco-mode-mint"><div class="titlepage"><div><div><h2 class="title">19.2. Using mint mode</h2></div></div></div><p>
				Mint mode is supported for Amazon Web Services (AWS) and Google Cloud Platform (GCP).
			</p><p>
				Mint mode is the default mode on the platforms for which it is supported. In this mode, the Cloud Credential Operator (CCO) uses the provided administrator-level cloud credential to create new credentials for components in the cluster with only the specific permissions that are required.
			</p><p>
				If the credential is not removed after installation, it is stored and used by the CCO to process <code class="literal">CredentialsRequest</code> CRs for components in the cluster and create new credentials for each with only the specific permissions that are required. The continuous reconciliation of cloud credentials in mint mode allows actions that require additional credentials or permissions, such as upgrading, to proceed.
			</p><p>
				Mint mode stores the administrator-level credential in the cluster <code class="literal">kube-system</code> namespace. If this approach does not meet the security requirements of your organization, see <span class="emphasis"><em>Alternatives to storing administrator-level secrets in the kube-system project</em></span> for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#alternatives-to-storing-admin-secrets-in-kube-system_manually-creating-iam-aws">AWS</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#alternatives-to-storing-admin-secrets-in-kube-system_manually-creating-iam-gcp">GCP</a>.
			</p><section class="section" id="mint-mode-permissions"><div class="titlepage"><div><div><h3 class="title">19.2.1. Mint mode permissions requirements</h3></div></div></div><p>
					When using the CCO in mint mode, ensure that the credential you provide meets the requirements of the cloud on which you are running or installing OpenShift Container Platform. If the provided credentials are not sufficient for mint mode, the CCO cannot create an IAM user.
				</p><section class="section" id="mint-mode-permissions-aws"><div class="titlepage"><div><div><h4 class="title">19.2.1.1. Amazon Web Services (AWS) permissions</h4></div></div></div><p>
						The credential you provide for mint mode in AWS must have the following permissions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">iam:CreateAccessKey</code>
							</li><li class="listitem">
								<code class="literal">iam:CreateUser</code>
							</li><li class="listitem">
								<code class="literal">iam:DeleteAccessKey</code>
							</li><li class="listitem">
								<code class="literal">iam:DeleteUser</code>
							</li><li class="listitem">
								<code class="literal">iam:DeleteUserPolicy</code>
							</li><li class="listitem">
								<code class="literal">iam:GetUser</code>
							</li><li class="listitem">
								<code class="literal">iam:GetUserPolicy</code>
							</li><li class="listitem">
								<code class="literal">iam:ListAccessKeys</code>
							</li><li class="listitem">
								<code class="literal">iam:PutUserPolicy</code>
							</li><li class="listitem">
								<code class="literal">iam:TagUser</code>
							</li><li class="listitem">
								<code class="literal">iam:SimulatePrincipalPolicy</code>
							</li></ul></div></section><section class="section" id="mint-mode-permissions-gcp"><div class="titlepage"><div><div><h4 class="title">19.2.1.2. Google Cloud Platform (GCP) permissions</h4></div></div></div><p>
						The credential you provide for mint mode in GCP must have the following permissions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">resourcemanager.projects.get</code>
							</li><li class="listitem">
								<code class="literal">serviceusage.services.list</code>
							</li><li class="listitem">
								<code class="literal">iam.serviceAccountKeys.create</code>
							</li><li class="listitem">
								<code class="literal">iam.serviceAccountKeys.delete</code>
							</li><li class="listitem">
								<code class="literal">iam.serviceAccounts.create</code>
							</li><li class="listitem">
								<code class="literal">iam.serviceAccounts.delete</code>
							</li><li class="listitem">
								<code class="literal">iam.serviceAccounts.get</code>
							</li><li class="listitem">
								<code class="literal">iam.roles.get</code>
							</li><li class="listitem">
								<code class="literal">resourcemanager.projects.getIamPolicy</code>
							</li><li class="listitem">
								<code class="literal">resourcemanager.projects.setIamPolicy</code>
							</li></ul></div></section></section><section class="section" id="admin-credentials-root-secret-formats_cco-mode-mint"><div class="titlepage"><div><div><h3 class="title">19.2.2. Admin credentials root secret format</h3></div></div></div><p>
					Each cloud provider uses a credentials root secret in the <code class="literal">kube-system</code> namespace by convention, which is then used to satisfy all credentials requests and create their respective secrets. This is done either by minting new credentials with <span class="emphasis"><em>mint mode</em></span>, or by copying the credentials root secret with <span class="emphasis"><em>passthrough mode</em></span>.
				</p><p>
					The format for the secret varies by cloud, and is also used for each <code class="literal">CredentialsRequest</code> secret.
				</p><div class="formalpara"><p class="title"><strong>Amazon Web Services (AWS) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: aws-creds
stringData:
  aws_access_key_id: &lt;base64-encoded_access_key_id&gt;
  aws_secret_access_key: &lt;base64-encoded_secret_access_key&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Google Cloud Platform (GCP) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: gcp-credentials
stringData:
  service_account.json: &lt;base64-encoded_service_account&gt;</pre>

					</p></div></section><section class="section" id="mint-mode-with-removal-or-rotation-of-admin-credential_cco-mode-mint"><div class="titlepage"><div><div><h3 class="title">19.2.3. Mint mode with removal or rotation of the administrator-level credential</h3></div></div></div><p>
					Currently, this mode is only supported on AWS and GCP.
				</p><p>
					In this mode, a user installs OpenShift Container Platform with an administrator-level credential just like the normal mint mode. However, this process removes the administrator-level credential secret from the cluster post-installation.
				</p><p>
					The administrator can have the Cloud Credential Operator make its own request for a read-only credential that allows it to verify if all <code class="literal">CredentialsRequest</code> objects have their required permissions, thus the administrator-level credential is not required unless something needs to be changed. After the associated credential is removed, it can be deleted or deactivated on the underlying cloud, if desired.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Prior to a non z-stream upgrade, you must reinstate the credential secret with the administrator-level credential. If the credential is not present, the upgrade might be blocked.
					</p></div></div><p>
					The administrator-level credential is not stored in the cluster permanently.
				</p><p>
					Following these steps still requires the administrator-level credential in the cluster for brief periods of time. It also requires manually re-instating the secret with administrator-level credentials for each upgrade.
				</p><section class="section" id="manually-rotating-cloud-creds_cco-mode-mint"><div class="titlepage"><div><div><h4 class="title">19.2.3.1. Rotating cloud provider credentials manually</h4></div></div></div><p>
						If your cloud provider credentials are changed for any reason, you must manually update the secret that the Cloud Credential Operator (CCO) uses to manage cloud provider credentials.
					</p><p>
						The process for rotating cloud credentials depends on the mode that the CCO is configured to use. After you rotate credentials for a cluster that is using mint mode, you must manually remove the component credentials that were created by the removed credential.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Your cluster is installed on a platform that supports rotating cloud credentials manually with the CCO mode that you are using:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										For mint mode, Amazon Web Services (AWS) and Google Cloud Platform (GCP) are supported.
									</li></ul></div></li><li class="listitem">
								You have changed the credentials that are used to interface with your cloud provider.
							</li><li class="listitem">
								The new credentials have sufficient permissions for the mode CCO is configured to use in your cluster.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the table on the <span class="strong strong"><strong>Secrets</strong></span> page, find the root secret for your cloud provider.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733239968" scope="col">Platform</th><th align="left" valign="top" id="idm140032733238992" scope="col">Secret name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733239968"> <p>
												AWS
											</p>
											 </td><td align="left" valign="top" headers="idm140032733238992"> <p>
												<code class="literal">aws-creds</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032733239968"> <p>
												GCP
											</p>
											 </td><td align="left" valign="top" headers="idm140032733238992"> <p>
												<code class="literal">gcp-credentials</code>
											</p>
											 </td></tr></tbody></table></div></li><li class="listitem">
								Click the <span class="strong strong"><strong>Options</strong></span> menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 in the same row as the secret and select <span class="strong strong"><strong>Edit Secret</strong></span>.
							</li><li class="listitem">
								Record the contents of the <span class="strong strong"><strong>Value</strong></span> field or fields. You can use this information to verify that the value is different after updating the credentials.
							</li><li class="listitem">
								Update the text in the <span class="strong strong"><strong>Value</strong></span> field or fields with the new authentication information for your cloud provider, and then click <span class="strong strong"><strong>Save</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Delete each component secret that is referenced by the individual <code class="literal">CredentialsRequest</code> objects.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Log in to the OpenShift Container Platform CLI as a user with the <code class="literal">cluster-admin</code> role.
									</li><li class="listitem"><p class="simpara">
										Get the names and namespaces of all referenced component secrets:
									</p><pre class="programlisting language-terminal">$ oc -n openshift-cloud-credential-operator get CredentialsRequest \
  -o json | jq -r '.items[] | select (.spec.providerSpec.kind=="&lt;provider_spec&gt;") | .spec.secretRef'</pre><p class="simpara">
										where <code class="literal">&lt;provider_spec&gt;</code> is the corresponding value for your cloud provider:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												AWS: <code class="literal">AWSProviderSpec</code>
											</li><li class="listitem">
												GCP: <code class="literal">GCPProviderSpec</code>
											</li></ul></div><div class="formalpara"><p class="title"><strong>Partial example output for AWS</strong></p><p>
											
<pre class="programlisting language-json">{
  "name": "ebs-cloud-credentials",
  "namespace": "openshift-cluster-csi-drivers"
}
{
  "name": "cloud-credential-operator-iam-ro-creds",
  "namespace": "openshift-cloud-credential-operator"
}</pre>

										</p></div></li><li class="listitem"><p class="simpara">
										Delete each of the referenced component secrets:
									</p><pre class="programlisting language-terminal">$ oc delete secret &lt;secret_name&gt; \<span id="CO61-1"><!--Empty--></span><span class="callout">1</span>
  -n &lt;secret_namespace&gt; <span id="CO61-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO61-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Specify the name of a secret.
											</div></dd><dt><a href="#CO61-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												Specify the namespace that contains the secret.
											</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example deletion of an AWS secret</strong></p><p>
											
<pre class="programlisting language-terminal">$ oc delete secret ebs-cloud-credentials -n openshift-cluster-csi-drivers</pre>

										</p></div><p class="simpara">
										You do not need to manually delete the credentials from your provider console. Deleting the referenced component secrets will cause the CCO to delete the existing credentials from the platform and create new ones.
									</p></li></ol></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
							To verify that the credentials have changed:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem">
								Verify that the contents of the <span class="strong strong"><strong>Value</strong></span> field or fields have changed.
							</li></ol></div></section><section class="section" id="manually-removing-cloud-creds_cco-mode-mint"><div class="titlepage"><div><div><h4 class="title">19.2.3.2. Removing cloud provider credentials</h4></div></div></div><p>
						After installing an OpenShift Container Platform cluster with the Cloud Credential Operator (CCO) in mint mode, you can remove the administrator-level credential secret from the <code class="literal">kube-system</code> namespace in the cluster. The administrator-level credential is required only during changes that require its elevated permissions, such as upgrades.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Prior to a non z-stream upgrade, you must reinstate the credential secret with the administrator-level credential. If the credential is not present, the upgrade might be blocked.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your cluster is installed on a platform that supports removing cloud credentials from the CCO. Supported platforms are AWS and GCP.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the table on the <span class="strong strong"><strong>Secrets</strong></span> page, find the root secret for your cloud provider.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032731027440" scope="col">Platform</th><th align="left" valign="top" id="idm140032731026352" scope="col">Secret name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032731027440"> <p>
												AWS
											</p>
											 </td><td align="left" valign="top" headers="idm140032731026352"> <p>
												<code class="literal">aws-creds</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032731027440"> <p>
												GCP
											</p>
											 </td><td align="left" valign="top" headers="idm140032731026352"> <p>
												<code class="literal">gcp-credentials</code>
											</p>
											 </td></tr></tbody></table></div></li><li class="listitem">
								Click the <span class="strong strong"><strong>Options</strong></span> menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 in the same row as the secret and select <span class="strong strong"><strong>Delete Secret</strong></span>.
							</li></ol></div></section></section><section class="section _additional-resources" id="additional-resources-2"><div class="titlepage"><div><div><h3 class="title">19.2.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#alternatives-to-storing-admin-secrets-in-kube-system_manually-creating-iam-aws">Alternatives to storing administrator-level secrets in the kube-system project</a> for AWS
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#alternatives-to-storing-admin-secrets-in-kube-system_manually-creating-iam-gcp">Alternatives to storing administrator-level secrets in the kube-system project</a> for GCP
						</li></ul></div></section></section><section class="section" id="cco-mode-passthrough"><div class="titlepage"><div><div><h2 class="title">19.3. Using passthrough mode</h2></div></div></div><p>
				Passthrough mode is supported for Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Red Hat OpenStack Platform (RHOSP), Red Hat Virtualization (RHV), and VMware vSphere.
			</p><p>
				In passthrough mode, the Cloud Credential Operator (CCO) passes the provided cloud credential to the components that request cloud credentials. The credential must have permissions to perform the installation and complete the operations that are required by components in the cluster, but does not need to be able to create new credentials. The CCO does not attempt to create additional limited-scoped credentials in passthrough mode.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-manual">Manual mode</a> is the only supported CCO configuration for Microsoft Azure Stack Hub.
				</p></div></div><section class="section" id="passthrough-mode-permissions"><div class="titlepage"><div><div><h3 class="title">19.3.1. Passthrough mode permissions requirements</h3></div></div></div><p>
					When using the CCO in passthrough mode, ensure that the credential you provide meets the requirements of the cloud on which you are running or installing OpenShift Container Platform. If the provided credentials the CCO passes to a component that creates a <code class="literal">CredentialsRequest</code> CR are not sufficient, that component will report an error when it tries to call an API that it does not have permissions for.
				</p><section class="section" id="passthrough-mode-permissions-aws"><div class="titlepage"><div><div><h4 class="title">19.3.1.1. Amazon Web Services (AWS) permissions</h4></div></div></div><p>
						The credential you provide for passthrough mode in AWS must have all the requested permissions for all <code class="literal">CredentialsRequest</code> CRs that are required by the version of OpenShift Container Platform you are running or installing.
					</p><p>
						To locate the <code class="literal">CredentialsRequest</code> CRs that are required, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">Manually creating IAM for AWS</a>.
					</p></section><section class="section" id="passthrough-mode-permissions-azure"><div class="titlepage"><div><div><h4 class="title">19.3.1.2. Microsoft Azure permissions</h4></div></div></div><p>
						The credential you provide for passthrough mode in Azure must have all the requested permissions for all <code class="literal">CredentialsRequest</code> CRs that are required by the version of OpenShift Container Platform you are running or installing.
					</p><p>
						To locate the <code class="literal">CredentialsRequest</code> CRs that are required, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Manually creating IAM for Azure</a>.
					</p></section><section class="section" id="passthrough-mode-permissions-gcp"><div class="titlepage"><div><div><h4 class="title">19.3.1.3. Google Cloud Platform (GCP) permissions</h4></div></div></div><p>
						The credential you provide for passthrough mode in GCP must have all the requested permissions for all <code class="literal">CredentialsRequest</code> CRs that are required by the version of OpenShift Container Platform you are running or installing.
					</p><p>
						To locate the <code class="literal">CredentialsRequest</code> CRs that are required, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">Manually creating IAM for GCP</a>.
					</p></section><section class="section" id="passthrough-mode-permissions-rhosp"><div class="titlepage"><div><div><h4 class="title">19.3.1.4. Red Hat OpenStack Platform (RHOSP) permissions</h4></div></div></div><p>
						To install an OpenShift Container Platform cluster on RHOSP, the CCO requires a credential with the permissions of a <code class="literal">member</code> user role.
					</p></section><section class="section" id="passthrough-mode-permissions-rhv"><div class="titlepage"><div><div><h4 class="title">19.3.1.5. Red Hat Virtualization (RHV) permissions</h4></div></div></div><p>
						To install an OpenShift Container Platform cluster on RHV, the CCO requires a credential with the following privileges:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">DiskOperator</code>
							</li><li class="listitem">
								<code class="literal">DiskCreator</code>
							</li><li class="listitem">
								<code class="literal">UserTemplateBasedVm</code>
							</li><li class="listitem">
								<code class="literal">TemplateOwner</code>
							</li><li class="listitem">
								<code class="literal">TemplateCreator</code>
							</li><li class="listitem">
								<code class="literal">ClusterAdmin</code> on the specific cluster that is targeted for OpenShift Container Platform deployment
							</li></ul></div></section><section class="section" id="passthrough-mode-permissions-vsware"><div class="titlepage"><div><div><h4 class="title">19.3.1.6. VMware vSphere permissions</h4></div></div></div><p>
						To install an OpenShift Container Platform cluster on VMware vSphere, the CCO requires a credential with the following vSphere privileges:
					</p><div class="table" id="idm140032731410352"><p class="title"><strong>Table 19.2. Required vSphere privileges</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032731405504" scope="col">Category</th><th align="left" valign="top" id="idm140032732458960" scope="col">Privileges</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Datastore
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										<span class="emphasis"><em>Allocate space</em></span>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Folder
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										<span class="emphasis"><em>Create folder</em></span>, <span class="emphasis"><em>Delete folder</em></span>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										vSphere Tagging
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										All privileges
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Network
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										<span class="emphasis"><em>Assign network</em></span>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Resource
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										<span class="emphasis"><em>Assign virtual machine to resource pool</em></span>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Profile-driven storage
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										All privileges
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										vApp
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										All privileges
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140032731405504"> <p>
										Virtual machine
									</p>
									 </td><td align="left" valign="top" headers="idm140032732458960"> <p>
										All privileges
									</p>
									 </td></tr></tbody></table></div></div></section></section><section class="section" id="admin-credentials-root-secret-formats_cco-mode-passthrough"><div class="titlepage"><div><div><h3 class="title">19.3.2. Admin credentials root secret format</h3></div></div></div><p>
					Each cloud provider uses a credentials root secret in the <code class="literal">kube-system</code> namespace by convention, which is then used to satisfy all credentials requests and create their respective secrets. This is done either by minting new credentials with <span class="emphasis"><em>mint mode</em></span>, or by copying the credentials root secret with <span class="emphasis"><em>passthrough mode</em></span>.
				</p><p>
					The format for the secret varies by cloud, and is also used for each <code class="literal">CredentialsRequest</code> secret.
				</p><div class="formalpara"><p class="title"><strong>Amazon Web Services (AWS) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: aws-creds
stringData:
  aws_access_key_id: &lt;base64-encoded_access_key_id&gt;
  aws_secret_access_key: &lt;base64-encoded_secret_access_key&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Microsoft Azure secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: azure-credentials
stringData:
  azure_subscription_id: &lt;base64-encoded_subscription_id&gt;
  azure_client_id: &lt;base64-encoded_client_id&gt;
  azure_client_secret: &lt;base64-encoded_client_secret&gt;
  azure_tenant_id: &lt;base64-encoded_tenant_id&gt;
  azure_resource_prefix: &lt;base64-encoded_resource_prefix&gt;
  azure_resourcegroup: &lt;base64-encoded_resource_group&gt;
  azure_region: &lt;base64-encoded_region&gt;</pre>

					</p></div><p>
					On Microsoft Azure, the credentials secret format includes two properties that must contain the cluster’s infrastructure ID, generated randomly for each cluster installation. This value can be found after running create manifests:
				</p><pre class="programlisting language-terminal">$ cat .openshift_install_state.json | jq '."*installconfig.ClusterID".InfraID' -r</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
						
<pre class="programlisting language-terminal">mycluster-2mpcn</pre>

					</p></div><p>
					This value would be used in the secret data as follows:
				</p><pre class="programlisting language-yaml">azure_resource_prefix: mycluster-2mpcn
azure_resourcegroup: mycluster-2mpcn-rg</pre><div class="formalpara"><p class="title"><strong>Google Cloud Platform (GCP) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: gcp-credentials
stringData:
  service_account.json: &lt;base64-encoded_service_account&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Red Hat OpenStack Platform (RHOSP) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: openstack-credentials
data:
  clouds.yaml: &lt;base64-encoded_cloud_creds&gt;
  clouds.conf: &lt;base64-encoded_cloud_creds_init&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Red Hat Virtualization (RHV) secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: ovirt-credentials
data:
  ovirt_url: &lt;base64-encoded_url&gt;
  ovirt_username: &lt;base64-encoded_username&gt;
  ovirt_password: &lt;base64-encoded_password&gt;
  ovirt_insecure: &lt;base64-encoded_insecure&gt;
  ovirt_ca_bundle: &lt;base64-encoded_ca_bundle&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>VMware vSphere secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: kube-system
  name: vsphere-creds
data:
 vsphere.openshift.example.com.username: &lt;base64-encoded_username&gt;
 vsphere.openshift.example.com.password: &lt;base64-encoded_password&gt;</pre>

					</p></div></section><section class="section" id="passthrough-mode-maintenance"><div class="titlepage"><div><div><h3 class="title">19.3.3. Passthrough mode credential maintenance</h3></div></div></div><p>
					If <code class="literal">CredentialsRequest</code> CRs change over time as the cluster is upgraded, you must manually update the passthrough mode credential to meet the requirements. To avoid credentials issues during an upgrade, check the <code class="literal">CredentialsRequest</code> CRs in the release image for the new version of OpenShift Container Platform before upgrading. To locate the <code class="literal">CredentialsRequest</code> CRs that are required for your cloud provider, see <span class="emphasis"><em>Manually creating IAM</em></span> for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">AWS</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Azure</a>, or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">GCP</a>.
				</p><section class="section" id="manually-rotating-cloud-creds_cco-mode-passthrough"><div class="titlepage"><div><div><h4 class="title">19.3.3.1. Rotating cloud provider credentials manually</h4></div></div></div><p>
						If your cloud provider credentials are changed for any reason, you must manually update the secret that the Cloud Credential Operator (CCO) uses to manage cloud provider credentials.
					</p><p>
						The process for rotating cloud credentials depends on the mode that the CCO is configured to use. After you rotate credentials for a cluster that is using mint mode, you must manually remove the component credentials that were created by the removed credential.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Your cluster is installed on a platform that supports rotating cloud credentials manually with the CCO mode that you are using:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										For passthrough mode, Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Red Hat OpenStack Platform (RHOSP), Red Hat Virtualization (RHV), and VMware vSphere are supported.
									</li></ul></div></li><li class="listitem">
								You have changed the credentials that are used to interface with your cloud provider.
							</li><li class="listitem">
								The new credentials have sufficient permissions for the mode CCO is configured to use in your cluster.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the table on the <span class="strong strong"><strong>Secrets</strong></span> page, find the root secret for your cloud provider.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032730621824" scope="col">Platform</th><th align="left" valign="top" id="idm140032730620736" scope="col">Secret name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												AWS
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">aws-creds</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												Azure
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">azure-credentials</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												GCP
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">gcp-credentials</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												RHOSP
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">openstack-credentials</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												RHV
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">ovirt-credentials</code>
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032730621824"> <p>
												VMware vSphere
											</p>
											 </td><td align="left" valign="top" headers="idm140032730620736"> <p>
												<code class="literal">vsphere-creds</code>
											</p>
											 </td></tr></tbody></table></div></li><li class="listitem">
								Click the <span class="strong strong"><strong>Options</strong></span> menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 in the same row as the secret and select <span class="strong strong"><strong>Edit Secret</strong></span>.
							</li><li class="listitem">
								Record the contents of the <span class="strong strong"><strong>Value</strong></span> field or fields. You can use this information to verify that the value is different after updating the credentials.
							</li><li class="listitem">
								Update the text in the <span class="strong strong"><strong>Value</strong></span> field or fields with the new authentication information for your cloud provider, and then click <span class="strong strong"><strong>Save</strong></span>.
							</li><li class="listitem"><p class="simpara">
								If you are updating the credentials for a vSphere cluster that does not have the vSphere CSI Driver Operator enabled, you must force a rollout of the Kubernetes controller manager to apply the updated credentials.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If the vSphere CSI Driver Operator is enabled, this step is not required.
								</p></div></div><p class="simpara">
								To apply the updated vSphere credentials, log in to the OpenShift Container Platform CLI as a user with the <code class="literal">cluster-admin</code> role and run the following command:
							</p><pre class="programlisting language-terminal">$ oc patch kubecontrollermanager cluster \
  -p='{"spec": {"forceRedeploymentReason": "recovery-'"$( date )"'"}}' \
  --type=merge</pre><p class="simpara">
								While the credentials are rolling out, the status of the Kubernetes Controller Manager Operator reports <code class="literal">Progressing=true</code>. To view the status, run the following command:
							</p><pre class="programlisting language-terminal">$ oc get co kube-controller-manager</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
							To verify that the credentials have changed:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem">
								Verify that the contents of the <span class="strong strong"><strong>Value</strong></span> field or fields have changed.
							</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#vmware-vsphere-csi-driver-operator">vSphere CSI Driver Operator</a>
							</li></ul></div></section></section><section class="section" id="passthrough-mode-reduce-permissions"><div class="titlepage"><div><div><h3 class="title">19.3.4. Reducing permissions after installation</h3></div></div></div><p>
					When using passthrough mode, each component has the same permissions used by all other components. If you do not reduce the permissions after installing, all components have the broad permissions that are required to run the installer.
				</p><p>
					After installation, you can reduce the permissions on your credential to only those that are required to run the cluster, as defined by the <code class="literal">CredentialsRequest</code> CRs in the release image for the version of OpenShift Container Platform that you are using.
				</p><p>
					To locate the <code class="literal">CredentialsRequest</code> CRs that are required for AWS, Azure, or GCP and learn how to change the permissions the CCO uses, see <span class="emphasis"><em>Manually creating IAM</em></span> for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">AWS</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Azure</a>, or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">GCP</a>.
				</p></section><section class="section _additional-resources" id="additional-resources-3"><div class="titlepage"><div><div><h3 class="title">19.3.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">Manually creating IAM for AWS</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Manually creating IAM for Azure</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">Manually creating IAM for GCP</a>
						</li></ul></div></section></section><section class="section" id="cco-mode-manual"><div class="titlepage"><div><div><h2 class="title">19.4. Using manual mode</h2></div></div></div><p>
				Manual mode is supported for Alibaba Cloud, Amazon Web Services (AWS), Microsoft Azure, IBM Cloud, and Google Cloud Platform (GCP).
			</p><p>
				In manual mode, a user manages cloud credentials instead of the Cloud Credential Operator (CCO). To use this mode, you must examine the <code class="literal">CredentialsRequest</code> CRs in the release image for the version of OpenShift Container Platform that you are running or installing, create corresponding credentials in the underlying cloud provider, and create Kubernetes Secrets in the correct namespaces to satisfy all <code class="literal">CredentialsRequest</code> CRs for the cluster’s cloud provider.
			</p><p>
				Using manual mode allows each cluster component to have only the permissions it requires, without storing an administrator-level credential in the cluster. This mode also does not require connectivity to the AWS public IAM endpoint. However, you must manually reconcile permissions with new release images for every upgrade.
			</p><p>
				For information about configuring your cloud provider to use manual mode, see the manual credentials management options for your cloud provider:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-alibaba-ram">Manually creating RAM resources for Alibaba Cloud</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">Manually creating IAM for AWS</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Manually creating IAM for Azure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">Manually creating IAM for GCP</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#configuring-iam-ibm-cloud">Configuring IAM for IBM Cloud</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-create-iam-nutanix_installing-nutanix-installer-provisioned">Configuring IAM for Nutanix</a>
					</li></ul></div><section class="section" id="manual-mode-sts-blurb"><div class="titlepage"><div><div><h3 class="title">19.4.1. Manual mode with cloud credentials created and managed outside of the cluster</h3></div></div></div><p>
					An AWS or GCP cluster that uses manual mode might be configured to create and manage cloud credentials from outside of the cluster using the AWS Security Token Service (STS) or GCP Workload Identity. With this configuration, the CCO uses temporary credentials for different components.
				</p><p>
					For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-sts">Using manual mode with Amazon Web Services Security Token Service</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-gcp-workload-identity">Using manual mode with GCP Workload Identity</a>.
				</p></section><section class="section" id="manually-maintained-credentials-upgrade_cco-mode-manual"><div class="titlepage"><div><div><h3 class="title">19.4.2. Updating cloud provider resources with manually maintained credentials</h3></div></div></div><p>
					Before upgrading a cluster with manually maintained credentials, you must create any new credentials for the release image that you are upgrading to. You must also review the required permissions for existing credentials and accommodate any new permissions requirements in the new release for those components.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Extract and examine the <code class="literal">CredentialsRequest</code> custom resource for the new release.
						</p><p class="simpara">
							The "Manually creating IAM" section of the installation content for your cloud provider explains how to obtain and use the credentials required for your cloud.
						</p></li><li class="listitem"><p class="simpara">
							Update the manually maintained credentials on your cluster:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Create new secrets for any <code class="literal">CredentialsRequest</code> custom resources that are added by the new release image.
								</li><li class="listitem">
									If the <code class="literal">CredentialsRequest</code> custom resources for any existing credentials that are stored in secrets have changed permissions requirements, update the permissions as required.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If your cluster uses cluster capabilities to disable one or more optional components, delete the <code class="literal">CredentialsRequest</code> custom resources for any disabled components.
						</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">credrequests</code> directory contents for OpenShift Container Platform 4.12 on AWS</strong></p><p>
								
<pre class="programlisting language-terminal">0000_30_machine-api-operator_00_credentials-request.yaml <span id="CO62-1"><!--Empty--></span><span class="callout">1</span>
0000_50_cloud-credential-operator_05-iam-ro-credentialsrequest.yaml <span id="CO62-2"><!--Empty--></span><span class="callout">2</span>
0000_50_cluster-image-registry-operator_01-registry-credentials-request.yaml <span id="CO62-3"><!--Empty--></span><span class="callout">3</span>
0000_50_cluster-ingress-operator_00-ingress-credentials-request.yaml <span id="CO62-4"><!--Empty--></span><span class="callout">4</span>
0000_50_cluster-network-operator_02-cncc-credentials.yaml <span id="CO62-5"><!--Empty--></span><span class="callout">5</span>
0000_50_cluster-storage-operator_03_credentials_request_aws.yaml <span id="CO62-6"><!--Empty--></span><span class="callout">6</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO62-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The Machine API Operator CR is required.
								</div></dd><dt><a href="#CO62-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The Cloud Credential Operator CR is required.
								</div></dd><dt><a href="#CO62-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The Image Registry Operator CR is required.
								</div></dd><dt><a href="#CO62-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The Ingress Operator CR is required.
								</div></dd><dt><a href="#CO62-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The Network Operator CR is required.
								</div></dd><dt><a href="#CO62-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									The Storage Operator CR is an optional component and might be disabled in your cluster.
								</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example <code class="literal">credrequests</code> directory contents for OpenShift Container Platform 4.12 on GCP</strong></p><p>
								
<pre class="programlisting language-terminal">0000_26_cloud-controller-manager-operator_16_credentialsrequest-gcp.yaml <span id="CO63-1"><!--Empty--></span><span class="callout">1</span>
0000_30_machine-api-operator_00_credentials-request.yaml <span id="CO63-2"><!--Empty--></span><span class="callout">2</span>
0000_50_cloud-credential-operator_05-gcp-ro-credentialsrequest.yaml <span id="CO63-3"><!--Empty--></span><span class="callout">3</span>
0000_50_cluster-image-registry-operator_01-registry-credentials-request-gcs.yaml <span id="CO63-4"><!--Empty--></span><span class="callout">4</span>
0000_50_cluster-ingress-operator_00-ingress-credentials-request.yaml <span id="CO63-5"><!--Empty--></span><span class="callout">5</span>
0000_50_cluster-network-operator_02-cncc-credentials.yaml <span id="CO63-6"><!--Empty--></span><span class="callout">6</span>
0000_50_cluster-storage-operator_03_credentials_request_gcp.yaml <span id="CO63-7"><!--Empty--></span><span class="callout">7</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO63-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The Cloud Controller Manager Operator CR is required.
								</div></dd><dt><a href="#CO63-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The Machine API Operator CR is required.
								</div></dd><dt><a href="#CO63-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The Cloud Credential Operator CR is required.
								</div></dd><dt><a href="#CO63-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The Image Registry Operator CR is required.
								</div></dd><dt><a href="#CO63-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The Ingress Operator CR is required.
								</div></dd><dt><a href="#CO63-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									The Network Operator CR is required.
								</div></dd><dt><a href="#CO63-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									The Storage Operator CR is an optional component and might be disabled in your cluster.
								</div></dd></dl></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Update the <code class="literal">upgradeable-to</code> annotation to indicate that the cluster is ready to upgrade.
						</li></ul></div><section class="section" id="cco-manual-upgrade-annotation_cco-mode-manual"><div class="titlepage"><div><div><h4 class="title">19.4.2.1. Indicating that the cluster is ready to upgrade</h4></div></div></div><p>
						The Cloud Credential Operator (CCO) <code class="literal">Upgradable</code> status for a cluster with manually maintained credentials is <code class="literal">False</code> by default.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For the release image that you are upgrading to, you have processed any new credentials manually or by using the Cloud Credential Operator utility (<code class="literal">ccoctl</code>).
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in to <code class="literal">oc</code> on the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">CloudCredential</code> resource to add an <code class="literal">upgradeable-to</code> annotation within the <code class="literal">metadata</code> field by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit cloudcredential cluster</pre><div class="formalpara"><p class="title"><strong>Text to add</strong></p><p>
									
<pre class="programlisting language-yaml">...
  metadata:
    annotations:
      cloudcredential.openshift.io/upgradeable-to: &lt;version_number&gt;
...</pre>

								</p></div><p class="simpara">
								Where <code class="literal">&lt;version_number&gt;</code> is the version that you are upgrading to, in the format <code class="literal">x.y.z</code>. For example, use <code class="literal">4.12.2</code> for OpenShift Container Platform 4.12.2.
							</p><p class="simpara">
								It may take several minutes after adding the annotation for the upgradeable status to change.
							</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the web console, navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Cluster Settings</strong></span>.
							</li><li class="listitem"><p class="simpara">
								To view the CCO status details, click <span class="strong strong"><strong>cloud-credential</strong></span> in the <span class="strong strong"><strong>Cluster Operators</strong></span> list.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If the <span class="strong strong"><strong>Upgradeable</strong></span> status in the <span class="strong strong"><strong>Conditions</strong></span> section is <span class="strong strong"><strong>False</strong></span>, verify that the <code class="literal">upgradeable-to</code> annotation is free of typographical errors.
									</li></ul></div></li><li class="listitem">
								When the <span class="strong strong"><strong>Upgradeable</strong></span> status in the <span class="strong strong"><strong>Conditions</strong></span> section is <span class="strong strong"><strong>True</strong></span>, begin the OpenShift Container Platform upgrade.
							</li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_cco-mode-manual"><div class="titlepage"><div><div><h3 class="title">19.4.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-alibaba-ram">Manually creating RAM resources for Alibaba Cloud</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-aws">Manually creating IAM for AWS</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-sts">Using manual mode with Amazon Web Services Security Token Service</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-azure">Manually creating IAM for Azure</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-creating-iam-gcp">Manually creating IAM for GCP</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-mode-gcp-workload-identity">Using manual mode with GCP Workload Identity</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#configuring-iam-ibm-cloud">Configuring IAM for IBM Cloud</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#manually-create-iam-nutanix_installing-nutanix-installer-provisioned">Configuring IAM for Nutanix</a>
						</li></ul></div></section></section><section class="section" id="cco-mode-sts"><div class="titlepage"><div><div><h2 class="title">19.5. Using manual mode with Amazon Web Services Security Token Service</h2></div></div></div><p>
				Manual mode with STS is supported for Amazon Web Services (AWS).
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					This credentials strategy is supported for only new OpenShift Container Platform clusters and must be configured during installation. You cannot reconfigure an existing cluster that uses a different credentials strategy to use this feature.
				</p></div></div><section class="section" id="sts-mode-about_cco-mode-sts"><div class="titlepage"><div><div><h3 class="title">19.5.1. About manual mode with AWS Security Token Service</h3></div></div></div><p>
					In manual mode with STS, the individual OpenShift Container Platform cluster components use AWS Security Token Service (STS) to assign components IAM roles that provide short-term, limited-privilege security credentials. These credentials are associated with IAM roles that are specific to each component that makes AWS API calls.
				</p><p>
					Requests for new and refreshed credentials are automated by using an appropriately configured AWS IAM OpenID Connect (OIDC) identity provider, combined with AWS IAM roles. OpenShift Container Platform signs service account tokens that are trusted by AWS IAM, and can be projected into a pod and used for authentication. Tokens are refreshed after one hour.
				</p><div class="figure" id="idm140032731685616"><p class="title"><strong>Figure 19.2. STS authentication flow</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/a187100d4a49b9308142d59828ee16fd/347_OpenShift_credentials_with_STS_updates_0623_AWS.png" alt="Detailed authentication flow between AWS and the cluster when using AWS STS"/></div></div></div><p>
					Using manual mode with STS changes the content of the AWS credentials that are provided to individual OpenShift Container Platform components.
				</p><div class="formalpara"><p class="title"><strong>AWS secret format using long-lived credentials</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: &lt;target-namespace&gt; <span id="CO64-1"><!--Empty--></span><span class="callout">1</span>
  name: &lt;target-secret-name&gt; <span id="CO64-2"><!--Empty--></span><span class="callout">2</span>
data:
  aws_access_key_id: &lt;base64-encoded-access-key-id&gt;
  aws_secret_access_key: &lt;base64-encoded-secret-access-key&gt;</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO64-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The namespace for the component.
						</div></dd><dt><a href="#CO64-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The name of the component secret.
						</div></dd></dl></div><div class="formalpara"><p class="title"><strong>AWS secret format with STS</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: &lt;target-namespace&gt; <span id="CO65-1"><!--Empty--></span><span class="callout">1</span>
  name: &lt;target-secret-name&gt; <span id="CO65-2"><!--Empty--></span><span class="callout">2</span>
stringData:
  credentials: |-
    [default]
    sts_regional_endpoints = regional
    role_name: &lt;operator-role-name&gt; <span id="CO65-3"><!--Empty--></span><span class="callout">3</span>
    web_identity_token_file: &lt;path-to-token&gt; <span id="CO65-4"><!--Empty--></span><span class="callout">4</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO65-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The namespace for the component.
						</div></dd><dt><a href="#CO65-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The name of the component secret.
						</div></dd><dt><a href="#CO65-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The IAM role for the component.
						</div></dd><dt><a href="#CO65-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The path to the service account token inside the pod. By convention, this is <code class="literal">/var/run/secrets/openshift/serviceaccount/token</code> for OpenShift Container Platform components.
						</div></dd></dl></div></section><section class="section" id="sts-mode-installing_cco-mode-sts"><div class="titlepage"><div><div><h3 class="title">19.5.2. Installing an OpenShift Container Platform cluster configured for manual mode with STS</h3></div></div></div><p>
					To install a cluster that is configured to use the Cloud Credential Operator (CCO) in manual mode with STS:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-configuring_cco-mode-sts">Configure the Cloud Credential Operator utility</a>.
						</li><li class="listitem">
							Create the required AWS resources <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-creating-individually_cco-mode-sts">individually</a>, or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-creating-at-once_cco-mode-sts">with a single command</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#sts-mode-installing-manual-run-installer_cco-mode-sts">Run the OpenShift Container Platform installer</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#sts-mode-installing-verifying_cco-mode-sts">Verify that the cluster is using short-lived credentials</a>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Because the cluster is operating in manual mode when using STS, it is not able to create new credentials for components with the permissions that they require. When upgrading to a different minor version of OpenShift Container Platform, there are often new AWS permission requirements. Before upgrading a cluster that is using STS, the cluster administrator must manually ensure that the AWS permissions are sufficient for existing components and available to any new components.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#cco-ccoctl-configuring_preparing-manual-creds-update">Configuring the Cloud Credential Operator utility for a cluster update</a>
						</li></ul></div><section class="section" id="cco-ccoctl-configuring_cco-mode-sts"><div class="titlepage"><div><div><h4 class="title">19.5.2.1. Configuring the Cloud Credential Operator utility</h4></div></div></div><p>
						To create and manage cloud credentials from outside of the cluster when the Cloud Credential Operator (CCO) is operating in manual mode, extract and prepare the CCO utility (<code class="literal">ccoctl</code>) binary.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">ccoctl</code> utility is a Linux binary that must run in a Linux environment.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform account with cluster administrator access.
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								You have created an AWS account for the <code class="literal">ccoctl</code> utility to use with the following permissions:
							</p><div class="table" id="idm140032733777520"><p class="title"><strong>Table 19.3. Required AWS permissions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140032733772720" scope="col">Permission type</th><th align="left" valign="top" id="idm140032733771632" scope="col">Required permissions</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140032733772720"> <p>
												<code class="literal">iam</code> permissions
											</p>
											 </td><td align="left" valign="top" headers="idm140032733771632"> <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<code class="literal">iam:CreateOpenIDConnectProvider</code>
													</li><li class="listitem">
														<code class="literal">iam:CreateRole</code>
													</li><li class="listitem">
														<code class="literal">iam:DeleteOpenIDConnectProvider</code>
													</li><li class="listitem">
														<code class="literal">iam:DeleteRole</code>
													</li><li class="listitem">
														<code class="literal">iam:DeleteRolePolicy</code>
													</li><li class="listitem">
														<code class="literal">iam:GetOpenIDConnectProvider</code>
													</li><li class="listitem">
														<code class="literal">iam:GetRole</code>
													</li><li class="listitem">
														<code class="literal">iam:GetUser</code>
													</li><li class="listitem">
														<code class="literal">iam:ListOpenIDConnectProviders</code>
													</li><li class="listitem">
														<code class="literal">iam:ListRolePolicies</code>
													</li><li class="listitem">
														<code class="literal">iam:ListRoles</code>
													</li><li class="listitem">
														<code class="literal">iam:PutRolePolicy</code>
													</li><li class="listitem">
														<code class="literal">iam:TagOpenIDConnectProvider</code>
													</li><li class="listitem">
														<code class="literal">iam:TagRole</code>
													</li></ul></div>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032733772720"> <p>
												<code class="literal">s3</code> permissions
											</p>
											 </td><td align="left" valign="top" headers="idm140032733771632"> <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<code class="literal">s3:CreateBucket</code>
													</li><li class="listitem">
														<code class="literal">s3:DeleteBucket</code>
													</li><li class="listitem">
														<code class="literal">s3:DeleteObject</code>
													</li><li class="listitem">
														<code class="literal">s3:GetBucketAcl</code>
													</li><li class="listitem">
														<code class="literal">s3:GetBucketTagging</code>
													</li><li class="listitem">
														<code class="literal">s3:GetObject</code>
													</li><li class="listitem">
														<code class="literal">s3:GetObjectAcl</code>
													</li><li class="listitem">
														<code class="literal">s3:GetObjectTagging</code>
													</li><li class="listitem">
														<code class="literal">s3:ListBucket</code>
													</li><li class="listitem">
														<code class="literal">s3:PutBucketAcl</code>
													</li><li class="listitem">
														<code class="literal">s3:PutBucketPolicy</code>
													</li><li class="listitem">
														<code class="literal">s3:PutBucketPublicAccessBlock</code>
													</li><li class="listitem">
														<code class="literal">s3:PutBucketTagging</code>
													</li><li class="listitem">
														<code class="literal">s3:PutObject</code>
													</li><li class="listitem">
														<code class="literal">s3:PutObjectAcl</code>
													</li><li class="listitem">
														<code class="literal">s3:PutObjectTagging</code>
													</li></ul></div>
											 </td></tr><tr><td align="left" valign="top" headers="idm140032733772720"> <p>
												<code class="literal">cloudfront</code> permissions
											</p>
											 </td><td align="left" valign="top" headers="idm140032733771632"> <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<code class="literal">cloudfront:ListCloudFrontOriginAccessIdentities</code>
													</li><li class="listitem">
														<code class="literal">cloudfront:ListDistributions</code>
													</li><li class="listitem">
														<code class="literal">cloudfront:ListTagsForResource</code>
													</li></ul></div>
											 </td></tr></tbody></table></div></div><p class="simpara">
								If you plan to store the OIDC configuration in a private S3 bucket that is accessed by the IAM identity provider through a public CloudFront distribution URL, the AWS account that runs the <code class="literal">ccoctl</code> utility requires the following additional permissions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">cloudfront:CreateCloudFrontOriginAccessIdentity</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:CreateDistribution</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:DeleteCloudFrontOriginAccessIdentity</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:DeleteDistribution</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:GetCloudFrontOriginAccessIdentity</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:GetCloudFrontOriginAccessIdentityConfig</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:GetDistribution</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:TagResource</code>
									</li><li class="listitem">
										<code class="literal">cloudfront:UpdateDistribution</code>
									</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									These additional permissions support the use of the <code class="literal">--create-private-s3-bucket</code> option when processing credentials requests with the <code class="literal">ccoctl aws create-all</code> command.
								</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Obtain the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ RELEASE_IMAGE=$(./openshift-install version | awk '/release image/ {print $3}')</pre></li><li class="listitem"><p class="simpara">
								Obtain the CCO container image from the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ CCO_IMAGE=$(oc adm release info --image-for='cloud-credential-operator' $RELEASE_IMAGE -a ~/.pull-secret)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Ensure that the architecture of the <code class="literal">$RELEASE_IMAGE</code> matches the architecture of the environment in which you will use the <code class="literal">ccoctl</code> tool.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Extract the <code class="literal">ccoctl</code> binary from the CCO container image within the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ oc image extract $CCO_IMAGE --file="/usr/bin/ccoctl" -a ~/.pull-secret</pre></li><li class="listitem"><p class="simpara">
								Change the permissions to make <code class="literal">ccoctl</code> executable by running the following command:
							</p><pre class="programlisting language-terminal">$ chmod 775 ccoctl</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To verify that <code class="literal">ccoctl</code> is ready to use, display the help file by running the following command:
							</p><pre class="programlisting language-terminal">$ ccoctl --help</pre><div class="formalpara"><p class="title"><strong>Output of <code class="literal">ccoctl --help</code></strong></p><p>
									
<pre class="programlisting language-terminal">OpenShift credentials provisioning tool

Usage:
  ccoctl [command]

Available Commands:
  alibabacloud Manage credentials objects for alibaba cloud
  aws          Manage credentials objects for AWS cloud
  gcp          Manage credentials objects for Google cloud
  help         Help about any command
  ibmcloud     Manage credentials objects for IBM Cloud
  nutanix      Manage credentials objects for Nutanix

Flags:
  -h, --help   help for ccoctl

Use "ccoctl [command] --help" for more information about a command.</pre>

								</p></div></li></ul></div></section><section class="section" id="sts-mode-create-aws-resources-ccoctl_cco-mode-sts"><div class="titlepage"><div><div><h4 class="title">19.5.2.2. Creating AWS resources with the Cloud Credential Operator utility</h4></div></div></div><p>
						You can use the CCO utility (<code class="literal">ccoctl</code>) to create the required AWS resources <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-creating-individually_cco-mode-sts">individually</a>, or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-creating-at-once_cco-mode-sts">with a single command</a>.
					</p><section class="section" id="cco-ccoctl-creating-individually_cco-mode-sts"><div class="titlepage"><div><div><h5 class="title">19.5.2.2.1. Creating AWS resources individually</h5></div></div></div><p>
							If you need to review the JSON files that the <code class="literal">ccoctl</code> tool creates before modifying AWS resources, or if the process the <code class="literal">ccoctl</code> tool uses to create AWS resources automatically does not meet the requirements of your organization, you can create the AWS resources individually. For example, this option might be useful for an organization that shares the responsibility for creating these resources among different users or departments.
						</p><p>
							Otherwise, you can use the <code class="literal">ccoctl aws create-all</code> command to create the AWS resources automatically.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, <code class="literal">ccoctl</code> creates objects in the directory in which the commands are run. To create the objects in a different directory, use the <code class="literal">--output-dir</code> flag. This procedure uses <code class="literal">&lt;path_to_ccoctl_output_dir&gt;</code> to refer to this directory.
							</p><p>
								Some <code class="literal">ccoctl</code> commands make AWS API calls to create or modify AWS resources. You can use the <code class="literal">--dry-run</code> flag to avoid making API calls. Using this flag creates JSON files on the local file system instead. You can review and modify the JSON files and then apply them with the AWS CLI tool using the <code class="literal">--cli-input-json</code> parameters.
							</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									Extract and prepare the <code class="literal">ccoctl</code> binary.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Generate the public and private RSA key files that are used to set up the OpenID Connect provider for the cluster:
								</p><pre class="programlisting language-terminal">$ ccoctl aws create-key-pair</pre><div class="formalpara"><p class="title"><strong>Example output:</strong></p><p>
										
<pre class="programlisting language-terminal">2021/04/13 11:01:02 Generating RSA keypair
2021/04/13 11:01:03 Writing private key to /&lt;path_to_ccoctl_output_dir&gt;/serviceaccount-signer.private
2021/04/13 11:01:03 Writing public key to /&lt;path_to_ccoctl_output_dir&gt;/serviceaccount-signer.public
2021/04/13 11:01:03 Copying signing key for use by installer</pre>

									</p></div><p class="simpara">
									where <code class="literal">serviceaccount-signer.private</code> and <code class="literal">serviceaccount-signer.public</code> are the generated key files.
								</p><p class="simpara">
									This command also creates a private key that the cluster requires during installation in <code class="literal">/&lt;path_to_ccoctl_output_dir&gt;/tls/bound-service-account-signing-key.key</code>.
								</p></li><li class="listitem"><p class="simpara">
									Create an OpenID Connect identity provider and S3 bucket on AWS:
								</p><pre class="programlisting language-terminal">$ ccoctl aws create-identity-provider \
--name=&lt;name&gt; \
--region=&lt;aws_region&gt; \
--public-key-file=&lt;path_to_ccoctl_output_dir&gt;/serviceaccount-signer.public</pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">&lt;name&gt;</code> is the name used to tag any cloud resources that are created for tracking.
										</li><li class="listitem">
											<code class="literal">&lt;aws-region&gt;</code> is the AWS region in which cloud resources will be created.
										</li><li class="listitem">
											<code class="literal">&lt;path_to_ccoctl_output_dir&gt;</code> is the path to the public key file that the <code class="literal">ccoctl aws create-key-pair</code> command generated.
										</li></ul></div><div class="formalpara"><p class="title"><strong>Example output:</strong></p><p>
										
<pre class="programlisting language-terminal">2021/04/13 11:16:09 Bucket &lt;name&gt;-oidc created
2021/04/13 11:16:10 OpenID Connect discovery document in the S3 bucket &lt;name&gt;-oidc at .well-known/openid-configuration updated
2021/04/13 11:16:10 Reading public key
2021/04/13 11:16:10 JSON web key set (JWKS) in the S3 bucket &lt;name&gt;-oidc at keys.json updated
2021/04/13 11:16:18 Identity Provider created with ARN: arn:aws:iam::&lt;aws_account_id&gt;:oidc-provider/&lt;name&gt;-oidc.s3.&lt;aws_region&gt;.amazonaws.com</pre>

									</p></div><p class="simpara">
									where <code class="literal">openid-configuration</code> is a discovery document and <code class="literal">keys.json</code> is a JSON web key set file.
								</p><p class="simpara">
									This command also creates a YAML configuration file in <code class="literal">/&lt;path_to_ccoctl_output_dir&gt;/manifests/cluster-authentication-02-config.yaml</code>. This file sets the issuer URL field for the service account tokens that the cluster generates, so that the AWS IAM identity provider trusts the tokens.
								</p></li><li class="listitem"><p class="simpara">
									Create IAM roles for each component in the cluster.
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Extract the list of <code class="literal">CredentialsRequest</code> objects from the OpenShift Container Platform release image:
										</p><pre class="programlisting language-terminal">$ oc adm release extract --credentials-requests \
--cloud=aws \
--to=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests <span id="CO66-1"><!--Empty--></span><span class="callout">1</span>
--from=quay.io/&lt;path_to&gt;/ocp-release:&lt;version&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO66-1"><span class="callout">1</span></a> </dt><dd><div class="para">
													<code class="literal">credrequests</code> is the directory where the list of <code class="literal">CredentialsRequest</code> objects is stored. This command creates the directory if it does not exist.
												</div></dd></dl></div></li><li class="listitem"><p class="simpara">
											If your cluster uses cluster capabilities to disable one or more optional components, delete the <code class="literal">CredentialsRequest</code> custom resources for any disabled components.
										</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">credrequests</code> directory contents for OpenShift Container Platform 4.12 on AWS</strong></p><p>
												
<pre class="programlisting language-terminal">0000_30_machine-api-operator_00_credentials-request.yaml <span id="CO67-1"><!--Empty--></span><span class="callout">1</span>
0000_50_cloud-credential-operator_05-iam-ro-credentialsrequest.yaml <span id="CO67-2"><!--Empty--></span><span class="callout">2</span>
0000_50_cluster-image-registry-operator_01-registry-credentials-request.yaml <span id="CO67-3"><!--Empty--></span><span class="callout">3</span>
0000_50_cluster-ingress-operator_00-ingress-credentials-request.yaml <span id="CO67-4"><!--Empty--></span><span class="callout">4</span>
0000_50_cluster-network-operator_02-cncc-credentials.yaml <span id="CO67-5"><!--Empty--></span><span class="callout">5</span>
0000_50_cluster-storage-operator_03_credentials_request_aws.yaml <span id="CO67-6"><!--Empty--></span><span class="callout">6</span></pre>

											</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO67-1"><span class="callout">1</span></a> </dt><dd><div class="para">
													The Machine API Operator CR is required.
												</div></dd><dt><a href="#CO67-2"><span class="callout">2</span></a> </dt><dd><div class="para">
													The Cloud Credential Operator CR is required.
												</div></dd><dt><a href="#CO67-3"><span class="callout">3</span></a> </dt><dd><div class="para">
													The Image Registry Operator CR is required.
												</div></dd><dt><a href="#CO67-4"><span class="callout">4</span></a> </dt><dd><div class="para">
													The Ingress Operator CR is required.
												</div></dd><dt><a href="#CO67-5"><span class="callout">5</span></a> </dt><dd><div class="para">
													The Network Operator CR is required.
												</div></dd><dt><a href="#CO67-6"><span class="callout">6</span></a> </dt><dd><div class="para">
													The Storage Operator CR is an optional component and might be disabled in your cluster.
												</div></dd></dl></div></li><li class="listitem"><p class="simpara">
											Use the <code class="literal">ccoctl</code> tool to process all <code class="literal">CredentialsRequest</code> objects in the <code class="literal">credrequests</code> directory:
										</p><pre class="programlisting language-terminal">$ ccoctl aws create-iam-roles \
--name=&lt;name&gt; \
--region=&lt;aws_region&gt; \
--credentials-requests-dir=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests \
--identity-provider-arn=arn:aws:iam::&lt;aws_account_id&gt;:oidc-provider/&lt;name&gt;-oidc.s3.&lt;aws_region&gt;.amazonaws.com</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
												For AWS environments that use alternative IAM API endpoints, such as GovCloud, you must also specify your region with the <code class="literal">--region</code> parameter.
											</p><p>
												If your cluster uses Technology Preview features that are enabled by the <code class="literal">TechPreviewNoUpgrade</code> feature set, you must include the <code class="literal">--enable-tech-preview</code> parameter.
											</p></div></div><p class="simpara">
											For each <code class="literal">CredentialsRequest</code> object, <code class="literal">ccoctl</code> creates an IAM role with a trust policy that is tied to the specified OIDC identity provider, and a permissions policy as defined in each <code class="literal">CredentialsRequest</code> object from the OpenShift Container Platform release image.
										</p></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To verify that the OpenShift Container Platform secrets are created, list the files in the <code class="literal">&lt;path_to_ccoctl_output_dir&gt;/manifests</code> directory:
								</p><pre class="programlisting language-terminal">$ ll &lt;path_to_ccoctl_output_dir&gt;/manifests</pre><div class="formalpara"><p class="title"><strong>Example output:</strong></p><p>
										
<pre class="programlisting language-terminal">total 24
-rw-------. 1 &lt;user&gt; &lt;user&gt; 161 Apr 13 11:42 cluster-authentication-02-config.yaml
-rw-------. 1 &lt;user&gt; &lt;user&gt; 379 Apr 13 11:59 openshift-cloud-credential-operator-cloud-credential-operator-iam-ro-creds-credentials.yaml
-rw-------. 1 &lt;user&gt; &lt;user&gt; 353 Apr 13 11:59 openshift-cluster-csi-drivers-ebs-cloud-credentials-credentials.yaml
-rw-------. 1 &lt;user&gt; &lt;user&gt; 355 Apr 13 11:59 openshift-image-registry-installer-cloud-credentials-credentials.yaml
-rw-------. 1 &lt;user&gt; &lt;user&gt; 339 Apr 13 11:59 openshift-ingress-operator-cloud-credentials-credentials.yaml
-rw-------. 1 &lt;user&gt; &lt;user&gt; 337 Apr 13 11:59 openshift-machine-api-aws-cloud-credentials-credentials.yaml</pre>

									</p></div></li></ul></div><p>
							You can verify that the IAM roles are created by querying AWS. For more information, refer to AWS documentation on listing IAM roles.
						</p></section><section class="section" id="cco-ccoctl-creating-at-once_cco-mode-sts"><div class="titlepage"><div><div><h5 class="title">19.5.2.2.2. Creating AWS resources with a single command</h5></div></div></div><p>
							If you do not need to review the JSON files that the <code class="literal">ccoctl</code> tool creates before modifying AWS resources, and if the process the <code class="literal">ccoctl</code> tool uses to create AWS resources automatically meets the requirements of your organization, you can use the <code class="literal">ccoctl aws create-all</code> command to automate the creation of AWS resources.
						</p><p>
							Otherwise, you can create the AWS resources individually.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, <code class="literal">ccoctl</code> creates objects in the directory in which the commands are run. To create the objects in a different directory, use the <code class="literal">--output-dir</code> flag. This procedure uses <code class="literal">&lt;path_to_ccoctl_output_dir&gt;</code> to refer to this directory.
							</p></div></div><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
								You must have:
							</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Extracted and prepared the <code class="literal">ccoctl</code> binary.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Extract the list of <code class="literal">CredentialsRequest</code> objects from the OpenShift Container Platform release image by running the following command:
								</p><pre class="programlisting language-terminal">$ oc adm release extract \
--credentials-requests \
--cloud=aws \
--to=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests \ <span id="CO68-1"><!--Empty--></span><span class="callout">1</span>
--from=quay.io/&lt;path_to&gt;/ocp-release:&lt;version&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO68-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											<code class="literal">credrequests</code> is the directory where the list of <code class="literal">CredentialsRequest</code> objects is stored. This command creates the directory if it does not exist.
										</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										This command can take a few moments to run.
									</p></div></div></li><li class="listitem"><p class="simpara">
									If your cluster uses cluster capabilities to disable one or more optional components, delete the <code class="literal">CredentialsRequest</code> custom resources for any disabled components.
								</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">credrequests</code> directory contents for OpenShift Container Platform 4.12 on AWS</strong></p><p>
										
<pre class="programlisting language-terminal">0000_30_machine-api-operator_00_credentials-request.yaml <span id="CO69-1"><!--Empty--></span><span class="callout">1</span>
0000_50_cloud-credential-operator_05-iam-ro-credentialsrequest.yaml <span id="CO69-2"><!--Empty--></span><span class="callout">2</span>
0000_50_cluster-image-registry-operator_01-registry-credentials-request.yaml <span id="CO69-3"><!--Empty--></span><span class="callout">3</span>
0000_50_cluster-ingress-operator_00-ingress-credentials-request.yaml <span id="CO69-4"><!--Empty--></span><span class="callout">4</span>
0000_50_cluster-network-operator_02-cncc-credentials.yaml <span id="CO69-5"><!--Empty--></span><span class="callout">5</span>
0000_50_cluster-storage-operator_03_credentials_request_aws.yaml <span id="CO69-6"><!--Empty--></span><span class="callout">6</span></pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO69-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The Machine API Operator CR is required.
										</div></dd><dt><a href="#CO69-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The Cloud Credential Operator CR is required.
										</div></dd><dt><a href="#CO69-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The Image Registry Operator CR is required.
										</div></dd><dt><a href="#CO69-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The Ingress Operator CR is required.
										</div></dd><dt><a href="#CO69-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The Network Operator CR is required.
										</div></dd><dt><a href="#CO69-6"><span class="callout">6</span></a> </dt><dd><div class="para">
											The Storage Operator CR is an optional component and might be disabled in your cluster.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Use the <code class="literal">ccoctl</code> tool to process all <code class="literal">CredentialsRequest</code> objects in the <code class="literal">credrequests</code> directory:
								</p><pre class="programlisting language-terminal">$ ccoctl aws create-all \
  --name=&lt;name&gt; \<span id="CO70-1"><!--Empty--></span><span class="callout">1</span>
  --region=&lt;aws_region&gt; \<span id="CO70-2"><!--Empty--></span><span class="callout">2</span>
  --credentials-requests-dir=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests \<span id="CO70-3"><!--Empty--></span><span class="callout">3</span>
  --output-dir=&lt;path_to_ccoctl_output_dir&gt; \<span id="CO70-4"><!--Empty--></span><span class="callout">4</span>
  --create-private-s3-bucket <span id="CO70-5"><!--Empty--></span><span class="callout">5</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO70-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Specify the name used to tag any cloud resources that are created for tracking.
										</div></dd><dt><a href="#CO70-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Specify the AWS region in which cloud resources will be created.
										</div></dd><dt><a href="#CO70-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											Specify the directory containing the files for the component <code class="literal">CredentialsRequest</code> objects.
										</div></dd><dt><a href="#CO70-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											Optional: Specify the directory in which you want the <code class="literal">ccoctl</code> utility to create objects. By default, the utility creates objects in the directory in which the commands are run.
										</div></dd><dt><a href="#CO70-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											Optional: By default, the <code class="literal">ccoctl</code> utility stores the OpenID Connect (OIDC) configuration files in a public S3 bucket and uses the S3 URL as the public OIDC endpoint. To store the OIDC configuration in a private S3 bucket that is accessed by the IAM identity provider through a public CloudFront distribution URL instead, use the <code class="literal">--create-private-s3-bucket</code> parameter.
										</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If your cluster uses Technology Preview features that are enabled by the <code class="literal">TechPreviewNoUpgrade</code> feature set, you must include the <code class="literal">--enable-tech-preview</code> parameter.
									</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To verify that the OpenShift Container Platform secrets are created, list the files in the <code class="literal">&lt;path_to_ccoctl_output_dir&gt;/manifests</code> directory:
								</p><pre class="programlisting language-terminal">$ ls &lt;path_to_ccoctl_output_dir&gt;/manifests</pre><div class="formalpara"><p class="title"><strong>Example output:</strong></p><p>
										
<pre class="programlisting language-terminal">cluster-authentication-02-config.yaml
openshift-cloud-credential-operator-cloud-credential-operator-iam-ro-creds-credentials.yaml
openshift-cluster-csi-drivers-ebs-cloud-credentials-credentials.yaml
openshift-image-registry-installer-cloud-credentials-credentials.yaml
openshift-ingress-operator-cloud-credentials-credentials.yaml
openshift-machine-api-aws-cloud-credentials-credentials.yaml</pre>

									</p></div></li></ul></div><p>
							You can verify that the IAM roles are created by querying AWS. For more information, refer to AWS documentation on listing IAM roles.
						</p></section></section><section class="section" id="sts-mode-installing-manual-run-installer_cco-mode-sts"><div class="titlepage"><div><div><h4 class="title">19.5.2.3. Running the installer</h4></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Configure an account with the cloud platform that hosts your cluster.
							</li><li class="listitem">
								Obtain the OpenShift Container Platform release image.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Change to the directory that contains the installation program and create the <code class="literal">install-config.yaml</code> file:
							</p><pre class="programlisting language-terminal">$ openshift-install create install-config --dir &lt;installation_directory&gt;</pre><p class="simpara">
								where <code class="literal">&lt;installation_directory&gt;</code> is the directory in which the installation program creates files.
							</p></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">install-config.yaml</code> configuration file so that it contains the <code class="literal">credentialsMode</code> parameter set to <code class="literal">Manual</code>.
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">install-config.yaml</code> configuration file</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
baseDomain: cluster1.example.com
credentialsMode: Manual <span id="CO71-1"><!--Empty--></span><span class="callout">1</span>
compute:
- architecture: amd64
  hyperthreading: Enabled</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO71-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This line is added to set the <code class="literal">credentialsMode</code> parameter to <code class="literal">Manual</code>.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the required OpenShift Container Platform installation manifests:
							</p><pre class="programlisting language-terminal">$ openshift-install create manifests</pre></li><li class="listitem"><p class="simpara">
								Copy the manifests that <code class="literal">ccoctl</code> generated to the manifests directory that the installation program created:
							</p><pre class="programlisting language-terminal">$ cp /&lt;path_to_ccoctl_output_dir&gt;/manifests/* ./manifests/</pre></li><li class="listitem"><p class="simpara">
								Copy the private key that the <code class="literal">ccoctl</code> generated in the <code class="literal">tls</code> directory to the installation directory:
							</p><pre class="programlisting language-terminal">$ cp -a /&lt;path_to_ccoctl_output_dir&gt;/tls .</pre></li><li class="listitem"><p class="simpara">
								Run the OpenShift Container Platform installer:
							</p><pre class="programlisting language-terminal">$ ./openshift-install create cluster</pre></li></ol></div></section><section class="section" id="sts-mode-installing-verifying_cco-mode-sts"><div class="titlepage"><div><div><h4 class="title">19.5.2.4. Verifying the installation</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Connect to the OpenShift Container Platform cluster.
							</li><li class="listitem"><p class="simpara">
								Verify that the cluster does not have <code class="literal">root</code> credentials:
							</p><pre class="programlisting language-terminal">$ oc get secrets -n kube-system aws-creds</pre><p class="simpara">
								The output should look similar to:
							</p><pre class="programlisting language-terminal">Error from server (NotFound): secrets "aws-creds" not found</pre></li><li class="listitem"><p class="simpara">
								Verify that the components are assuming the IAM roles that are specified in the secret manifests, instead of using credentials that are created by the CCO:
							</p><div class="formalpara"><p class="title"><strong>Example command with the Image Registry Operator</strong></p><p>
									
<pre class="programlisting language-terminal">$ oc get secrets -n openshift-image-registry installer-cloud-credentials -o json | jq -r .data.credentials | base64 --decode</pre>

								</p></div><p class="simpara">
								The output should show the role and web identity token that are used by the component and look similar to:
							</p><div class="formalpara"><p class="title"><strong>Example output with the Image Registry Operator</strong></p><p>
									
<pre class="programlisting language-terminal">[default]
role_arn = arn:aws:iam::123456789:role/openshift-image-registry-installer-cloud-credentials
web_identity_token_file = /var/run/secrets/openshift/serviceaccount/token</pre>

								</p></div></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_cco-mode-sts"><div class="titlepage"><div><div><h3 class="title">19.5.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#preparing-manual-creds-update">Preparing to update a cluster with manually maintained credentials</a>
						</li></ul></div></section></section><section class="section" id="cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h2 class="title">19.6. Using manual mode with GCP Workload Identity</h2></div></div></div><p>
				Manual mode with GCP Workload Identity is supported for Google Cloud Platform (GCP).
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					This credentials strategy is supported for only new OpenShift Container Platform clusters and must be configured during installation. You cannot reconfigure an existing cluster that uses a different credentials strategy to use this feature.
				</p></div></div><section class="section" id="gcp-workload-identity-mode-about_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h3 class="title">19.6.1. About manual mode with GCP Workload Identity</h3></div></div></div><p>
					In manual mode with GCP Workload Identity, the individual OpenShift Container Platform cluster components can impersonate IAM service accounts using short-term, limited-privilege credentials.
				</p><p>
					Requests for new and refreshed credentials are automated by using an appropriately configured OpenID Connect (OIDC) identity provider, combined with IAM service accounts. OpenShift Container Platform signs service account tokens that are trusted by GCP, and can be projected into a pod and used for authentication. Tokens are refreshed after one hour by default.
				</p><div class="figure" id="idm140032732370576"><p class="title"><strong>Figure 19.3. Workload Identity authentication flow</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Authentication_and_authorization-en-US/images/b1951689e1229704bfae2fbc196336ae/347_OpenShift_credentials_with_STS_updates_0623_GCP.png" alt="Detailed authentication flow between GCP and the cluster when using GCP Workload Identity"/></div></div></div><p>
					Using manual mode with GCP Workload Identity changes the content of the GCP credentials that are provided to individual OpenShift Container Platform components.
				</p><div class="formalpara"><p class="title"><strong>GCP secret format</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  namespace: &lt;target_namespace&gt; <span id="CO72-1"><!--Empty--></span><span class="callout">1</span>
  name: &lt;target_secret_name&gt; <span id="CO72-2"><!--Empty--></span><span class="callout">2</span>
data:
  service_account.json: &lt;service_account&gt; <span id="CO72-3"><!--Empty--></span><span class="callout">3</span></pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO72-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The namespace for the component.
						</div></dd><dt><a href="#CO72-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The name of the component secret.
						</div></dd><dt><a href="#CO72-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The Base64 encoded service account.
						</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Content of the Base64 encoded <code class="literal">service_account.json</code> file using long-lived credentials</strong></p><p>
						
<pre class="programlisting language-json">{
   "type": "service_account", <span id="CO73-1"><!--Empty--></span><span class="callout">1</span>
   "project_id": "&lt;project_id&gt;",
   "private_key_id": "&lt;private_key_id&gt;",
   "private_key": "&lt;private_key&gt;", <span id="CO73-2"><!--Empty--></span><span class="callout">2</span>
   "client_email": "&lt;client_email_address&gt;",
   "client_id": "&lt;client_id&gt;",
   "auth_uri": "https://accounts.google.com/o/oauth2/auth",
   "token_uri": "https://oauth2.googleapis.com/token",
   "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
   "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/&lt;client_email_address&gt;"
}</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO73-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The credential type is <code class="literal">service_account</code>.
						</div></dd><dt><a href="#CO73-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The private RSA key that is used to authenticate to GCP. This key must be kept secure and is not rotated.
						</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Content of the Base64 encoded <code class="literal">service_account.json</code> file using GCP Workload Identity</strong></p><p>
						
<pre class="programlisting language-json">{
   "type": "external_account", <span id="CO74-1"><!--Empty--></span><span class="callout">1</span>
   "audience": "//iam.googleapis.com/projects/123456789/locations/global/workloadIdentityPools/test-pool/providers/test-provider", <span id="CO74-2"><!--Empty--></span><span class="callout">2</span>
   "subject_token_type": "urn:ietf:params:oauth:token-type:jwt",
   "token_url": "https://sts.googleapis.com/v1/token",
   "service_account_impersonation_url": "https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/&lt;client_email_address&gt;:generateAccessToken", <span id="CO74-3"><!--Empty--></span><span class="callout">3</span>
   "credential_source": {
      "file": "&lt;path_to_token&gt;", <span id="CO74-4"><!--Empty--></span><span class="callout">4</span>
      "format": {
         "type": "text"
      }
   }
}</pre>

					</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO74-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The credential type is <code class="literal">external_account</code>.
						</div></dd><dt><a href="#CO74-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							The target audience is the GCP Workload Identity provider.
						</div></dd><dt><a href="#CO74-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							The resource URL of the service account that can be impersonated with these credentials.
						</div></dd><dt><a href="#CO74-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							The path to the service account token inside the pod. By convention, this is <code class="literal">/var/run/secrets/openshift/serviceaccount/token</code> for OpenShift Container Platform components.
						</div></dd></dl></div></section><section class="section" id="gcp-workload-identity-mode-installing"><div class="titlepage"><div><div><h3 class="title">19.6.2. Installing an OpenShift Container Platform cluster configured for manual mode with GCP Workload Identity</h3></div></div></div><p>
					To install a cluster that is configured to use the Cloud Credential Operator (CCO) in manual mode with GCP Workload Identity:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-configuring_cco-mode-gcp-workload-identity">Configure the Cloud Credential Operator utility</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cco-ccoctl-creating-at-once_cco-mode-gcp-workload-identity">Create the required GCP resources</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#sts-mode-installing-manual-run-installer_cco-mode-gcp-workload-identity">Run the OpenShift Container Platform installer</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#sts-mode-installing-verifying_cco-mode-gcp-workload-identity">Verify that the cluster is using short-lived credentials</a>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Because the cluster is operating in manual mode when using GCP Workload Identity, it is not able to create new credentials for components with the permissions that they require. When upgrading to a different minor version of OpenShift Container Platform, there are often new GCP permission requirements. Before upgrading a cluster that is using GCP Workload Identity, the cluster administrator must manually ensure that the GCP permissions are sufficient for existing components and available to any new components.
					</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#cco-ccoctl-configuring_preparing-manual-creds-update">Configuring the Cloud Credential Operator utility for a cluster update</a>
						</li></ul></div><section class="section" id="cco-ccoctl-configuring_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h4 class="title">19.6.2.1. Configuring the Cloud Credential Operator utility</h4></div></div></div><p>
						To create and manage cloud credentials from outside of the cluster when the Cloud Credential Operator (CCO) is operating in manual mode, extract and prepare the CCO utility (<code class="literal">ccoctl</code>) binary.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">ccoctl</code> utility is a Linux binary that must run in a Linux environment.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform account with cluster administrator access.
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Obtain the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ RELEASE_IMAGE=$(./openshift-install version | awk '/release image/ {print $3}')</pre></li><li class="listitem"><p class="simpara">
								Obtain the CCO container image from the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ CCO_IMAGE=$(oc adm release info --image-for='cloud-credential-operator' $RELEASE_IMAGE -a ~/.pull-secret)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Ensure that the architecture of the <code class="literal">$RELEASE_IMAGE</code> matches the architecture of the environment in which you will use the <code class="literal">ccoctl</code> tool.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Extract the <code class="literal">ccoctl</code> binary from the CCO container image within the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ oc image extract $CCO_IMAGE --file="/usr/bin/ccoctl" -a ~/.pull-secret</pre></li><li class="listitem"><p class="simpara">
								Change the permissions to make <code class="literal">ccoctl</code> executable by running the following command:
							</p><pre class="programlisting language-terminal">$ chmod 775 ccoctl</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To verify that <code class="literal">ccoctl</code> is ready to use, display the help file by running the following command:
							</p><pre class="programlisting language-terminal">$ ccoctl --help</pre><div class="formalpara"><p class="title"><strong>Output of <code class="literal">ccoctl --help</code></strong></p><p>
									
<pre class="programlisting language-terminal">OpenShift credentials provisioning tool

Usage:
  ccoctl [command]

Available Commands:
  alibabacloud Manage credentials objects for alibaba cloud
  aws          Manage credentials objects for AWS cloud
  gcp          Manage credentials objects for Google cloud
  help         Help about any command
  ibmcloud     Manage credentials objects for IBM Cloud
  nutanix      Manage credentials objects for Nutanix

Flags:
  -h, --help   help for ccoctl

Use "ccoctl [command] --help" for more information about a command.</pre>

								</p></div></li></ul></div></section><section class="section" id="cco-ccoctl-creating-at-once_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h4 class="title">19.6.2.2. Creating GCP resources with the Cloud Credential Operator utility</h4></div></div></div><p>
						You can use the <code class="literal">ccoctl gcp create-all</code> command to automate the creation of GCP resources.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							By default, <code class="literal">ccoctl</code> creates objects in the directory in which the commands are run. To create the objects in a different directory, use the <code class="literal">--output-dir</code> flag. This procedure uses <code class="literal">&lt;path_to_ccoctl_output_dir&gt;</code> to refer to this directory.
						</p></div></div><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
							You must have:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Extracted and prepared the <code class="literal">ccoctl</code> binary.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Extract the list of <code class="literal">CredentialsRequest</code> objects from the OpenShift Container Platform release image by running the following command:
							</p><pre class="programlisting language-terminal">$ oc adm release extract \
--credentials-requests \
--cloud=gcp \
--to=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests \ <span id="CO75-1"><!--Empty--></span><span class="callout">1</span>
quay.io/&lt;path_to&gt;/ocp-release:&lt;version&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO75-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										<code class="literal">credrequests</code> is the directory where the list of <code class="literal">CredentialsRequest</code> objects is stored. This command creates the directory if it does not exist.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									This command can take a few moments to run.
								</p></div></div></li><li class="listitem"><p class="simpara">
								If your cluster uses cluster capabilities to disable one or more optional components, delete the <code class="literal">CredentialsRequest</code> custom resources for any disabled components.
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">credrequests</code> directory contents for OpenShift Container Platform 4.12 on GCP</strong></p><p>
									
<pre class="programlisting language-terminal">0000_26_cloud-controller-manager-operator_16_credentialsrequest-gcp.yaml <span id="CO76-1"><!--Empty--></span><span class="callout">1</span>
0000_30_machine-api-operator_00_credentials-request.yaml <span id="CO76-2"><!--Empty--></span><span class="callout">2</span>
0000_50_cloud-credential-operator_05-gcp-ro-credentialsrequest.yaml <span id="CO76-3"><!--Empty--></span><span class="callout">3</span>
0000_50_cluster-image-registry-operator_01-registry-credentials-request-gcs.yaml <span id="CO76-4"><!--Empty--></span><span class="callout">4</span>
0000_50_cluster-ingress-operator_00-ingress-credentials-request.yaml <span id="CO76-5"><!--Empty--></span><span class="callout">5</span>
0000_50_cluster-network-operator_02-cncc-credentials.yaml <span id="CO76-6"><!--Empty--></span><span class="callout">6</span>
0000_50_cluster-storage-operator_03_credentials_request_gcp.yaml <span id="CO76-7"><!--Empty--></span><span class="callout">7</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO76-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The Cloud Controller Manager Operator CR is required.
									</div></dd><dt><a href="#CO76-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The Machine API Operator CR is required.
									</div></dd><dt><a href="#CO76-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The Cloud Credential Operator CR is required.
									</div></dd><dt><a href="#CO76-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The Image Registry Operator CR is required.
									</div></dd><dt><a href="#CO76-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The Ingress Operator CR is required.
									</div></dd><dt><a href="#CO76-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										The Network Operator CR is required.
									</div></dd><dt><a href="#CO76-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										The Storage Operator CR is an optional component and might be disabled in your cluster.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">ccoctl</code> tool to process all <code class="literal">CredentialsRequest</code> objects in the <code class="literal">credrequests</code> directory:
							</p><pre class="programlisting language-terminal">$ ccoctl gcp create-all \
--name=&lt;name&gt; \
--region=&lt;gcp_region&gt; \
--project=&lt;gcp_project_id&gt; \
--credentials-requests-dir=&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests</pre><p class="simpara">
								where:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">&lt;name&gt;</code> is the user-defined name for all created GCP resources used for tracking.
									</li><li class="listitem">
										<code class="literal">&lt;gcp_region&gt;</code> is the GCP region in which cloud resources will be created.
									</li><li class="listitem">
										<code class="literal">&lt;gcp_project_id&gt;</code> is the GCP project ID in which cloud resources will be created.
									</li><li class="listitem">
										<code class="literal">&lt;path_to_directory_with_list_of_credentials_requests&gt;/credrequests</code> is the directory containing the files of <code class="literal">CredentialsRequest</code> manifests to create GCP service accounts.
									</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If your cluster uses Technology Preview features that are enabled by the <code class="literal">TechPreviewNoUpgrade</code> feature set, you must include the <code class="literal">--enable-tech-preview</code> parameter.
								</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To verify that the OpenShift Container Platform secrets are created, list the files in the <code class="literal">&lt;path_to_ccoctl_output_dir&gt;/manifests</code> directory:
							</p><pre class="programlisting language-terminal">$ ls &lt;path_to_ccoctl_output_dir&gt;/manifests</pre></li></ul></div><p>
						You can verify that the IAM service accounts are created by querying GCP. For more information, refer to GCP documentation on listing IAM service accounts.
					</p></section><section class="section" id="sts-mode-installing-manual-run-installer_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h4 class="title">19.6.2.3. Running the installer</h4></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Configure an account with the cloud platform that hosts your cluster.
							</li><li class="listitem">
								Obtain the OpenShift Container Platform release image.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Change to the directory that contains the installation program and create the <code class="literal">install-config.yaml</code> file:
							</p><pre class="programlisting language-terminal">$ openshift-install create install-config --dir &lt;installation_directory&gt;</pre><p class="simpara">
								where <code class="literal">&lt;installation_directory&gt;</code> is the directory in which the installation program creates files.
							</p></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">install-config.yaml</code> configuration file so that it contains the <code class="literal">credentialsMode</code> parameter set to <code class="literal">Manual</code>.
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">install-config.yaml</code> configuration file</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
baseDomain: cluster1.example.com
credentialsMode: Manual <span id="CO77-1"><!--Empty--></span><span class="callout">1</span>
compute:
- architecture: amd64
  hyperthreading: Enabled</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO77-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This line is added to set the <code class="literal">credentialsMode</code> parameter to <code class="literal">Manual</code>.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the required OpenShift Container Platform installation manifests:
							</p><pre class="programlisting language-terminal">$ openshift-install create manifests</pre></li><li class="listitem"><p class="simpara">
								Copy the manifests that <code class="literal">ccoctl</code> generated to the manifests directory that the installation program created:
							</p><pre class="programlisting language-terminal">$ cp /&lt;path_to_ccoctl_output_dir&gt;/manifests/* ./manifests/</pre></li><li class="listitem"><p class="simpara">
								Copy the private key that the <code class="literal">ccoctl</code> generated in the <code class="literal">tls</code> directory to the installation directory:
							</p><pre class="programlisting language-terminal">$ cp -a /&lt;path_to_ccoctl_output_dir&gt;/tls .</pre></li><li class="listitem"><p class="simpara">
								Run the OpenShift Container Platform installer:
							</p><pre class="programlisting language-terminal">$ ./openshift-install create cluster</pre></li></ol></div></section><section class="section" id="sts-mode-installing-verifying_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h4 class="title">19.6.2.4. Verifying the installation</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Connect to the OpenShift Container Platform cluster.
							</li><li class="listitem"><p class="simpara">
								Verify that the cluster does not have <code class="literal">root</code> credentials:
							</p><pre class="programlisting language-terminal">$ oc get secrets -n kube-system gcp-credentials</pre><p class="simpara">
								The output should look similar to:
							</p><pre class="programlisting language-terminal">Error from server (NotFound): secrets "gcp-credentials" not found</pre></li><li class="listitem"><p class="simpara">
								Verify that the components are assuming the service accounts that are specified in the secret manifests, instead of using credentials that are created by the CCO:
							</p><div class="formalpara"><p class="title"><strong>Example command with the Image Registry Operator</strong></p><p>
									
<pre class="programlisting language-terminal">$ oc get secrets -n openshift-image-registry installer-cloud-credentials -o json | jq -r '.data."service_account.json"' | base64 -d</pre>

								</p></div><p class="simpara">
								The output should show the role and web identity token that are used by the component and look similar to:
							</p><div class="formalpara"><p class="title"><strong>Example output with the Image Registry Operator</strong></p><p>
									
<pre class="programlisting language-json">{
   "type": "external_account", <span id="CO78-1"><!--Empty--></span><span class="callout">1</span>
   "audience": "//iam.googleapis.com/projects/123456789/locations/global/workloadIdentityPools/test-pool/providers/test-provider",
   "subject_token_type": "urn:ietf:params:oauth:token-type:jwt",
   "token_url": "https://sts.googleapis.com/v1/token",
   "service_account_impersonation_url": "https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/&lt;client-email-address&gt;:generateAccessToken", <span id="CO78-2"><!--Empty--></span><span class="callout">2</span>
   "credential_source": {
      "file": "/var/run/secrets/openshift/serviceaccount/token",
      "format": {
         "type": "text"
      }
   }
}</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO78-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The credential type is <code class="literal">external_account</code>.
									</div></dd><dt><a href="#CO78-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The resource URL of the service account used by the Image Registry Operator.
									</div></dd></dl></div></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_cco-mode-gcp-workload-identity"><div class="titlepage"><div><div><h3 class="title">19.6.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#preparing-manual-creds-update">Preparing to update a cluster with manually maintained credentials</a>
						</li></ul></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140032740145392"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                        <span class="status-description"></span>
                        <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>
                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                            <div id="privacy_policy">We've updated our <a href='http://www.redhat.com/en/about/privacy-policy' class='privacy-policy'>Privacy Statement</a> effective September 15, 2023.
                            </div>
                          </div>
                        </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="https://access.redhat.com/chrome_themes/nimbus/img/rh-summit-red-a.svg" alt="Red Hat Summit" /> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  </body>
</html>
