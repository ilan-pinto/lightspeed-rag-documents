<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/index" />
<meta property="og:title" content="Virtualization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta property="og:description" content="This document provides information about how to use OpenShift Virtualization in OpenShift Container Platform." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="This document provides information about how to use OpenShift Virtualization in OpenShift Container Platform." />
<meta name="twitter:title" content="Virtualization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/index" />
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="title" content="Virtualization OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="id" href="https://access.redhat.com/documentation/id-id/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="th" href="https://access.redhat.com/documentation/th-th/openshift_container_platform/4.13/html-single/virtualization/index" />
<link rel="alternate" hreflang="vi" href="https://access.redhat.com/documentation/vi-vn/openshift_container_platform/4.13/html-single/virtualization/index" />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="revision" product="b0738f19-59ac-47eb-9512-8a439cd6dfb0" title="bc64d2e4-e48b-40c3-88a0-d338035cd673" page="9a1fd30f-202f-442f-a5d9-d529e0b6ace7" revision="945741e1aa4d384650018cfd3c70ebb743353bf9:en-us" body="4b1ac3f8a3f4d4c683a8407933ca52ba.html" toc="17c0c810f0d08a8cf7438330fdeaa654.json" />

    <title>Virtualization OpenShift Container Platform 4.13 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />
<link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css" />

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/openshift_container_platform\/4.13\/html-single\/virtualization\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"d8ea0bce2d740dacbdfe0257cf55baa0e33f7fb8468a26d055ce75daaaa2d315"}}</script>
<script src="/sites/dxp-docs/files/js/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
  <script src="//www.redhat.com/dtm.js"></script><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-139-77b4fb8768-25dr9" />
<meta name="avalon-version" content="27861f77" />
<meta name="cp-chrome-build-date" content="2023-10-06T19:17:59.039Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "27861f77",
        builddate : "2023-10-06T19:17:59.039Z",        fetchdate : "2023-10-10T17:45:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico" /><link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap-grid.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/main.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/components.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/pages.css?v=27861f77" />

<link href="https://access.redhat.com/webassets/avalon/s/chosen.css?v=27861f77" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/pfe-navigation--lightdom.min.css" />
<!-- /cssInclude -->
<script src="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/ie-polyfills.js?v=27861f77"></script>

<script async>
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="https://access.redhat.com/webassets/avalon/j/lib/require.js?v=27861f77" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="https://access.redhat.com/chrome_themes/nimbus/js/new-nav.js?v=27861f77" ></script>
<!-- /CP_PRIMER_HEAD -->

  </head>
  <body>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#cp-main" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg" />
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linkType="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linkType="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="//www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linkType="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat&#039;s specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linkType="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="//redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linkType="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>                            <div>Or <a href="/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu">
                    <button class="pfe-navigation__secondary-link">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true"></pfe-icon>English
                    </button>

                    <pfe-navigation-dropdown dropdown-width="single">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en" data-analytics-text="English">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown>
                </div>                <rh-account-dropdown slot="account"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing" slot="main-menu__dropdown--product__product-listing" consistent-height>
                    <h3 slot="details-nav">Infrastructure and Management                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Cloud Computing                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Storage                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Runtimes                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Integration and Automation                    </h3>
                    <div slot="details">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linkType="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            </pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["OpenShift Container Platform","\/documentation\/en-us\/openshift_container_platform"],["4.13","\/documentation\/en-us\/openshift_container_platform\/4.13"],["Virtualization","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/virtualization"],["Virtualization","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/virtualization\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback class="hidden"></div>


    </div>
        <div class="container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer pvof-doc__content-wrapper__outer--css-not-removed">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container">
              <button class="j-sidebar__menu-trigger content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization" class="j-doc-nav__link ">
    Virtualization
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#about-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    1. About OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1. About OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1. About OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-what-you-can-do-with-virt_about-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.1. What you can do with OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.1. What you can do with OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.1. What you can do with OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-supported-cluster-version_about-virt" class="j-doc-nav__link ">
    1.1.1. OpenShift Virtualization supported cluster version
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-storage-volumes-for-vm-disks_about-virt" class="j-doc-nav__link ">
    1.2. About storage volumes for virtual machine disks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-sno-differences_about-virt" class="j-doc-nav__link ">
    1.3. Single-node OpenShift differences
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_about-virt" class="j-doc-nav__link ">
    1.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-architecture" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. OpenShift Virtualization architecture
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. OpenShift Virtualization architecture"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. OpenShift Virtualization architecture"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-how-virt-works_virt-architecture" class="j-doc-nav__link ">
    2.1. How OpenShift Virtualization architecture works
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-hco-operator_virt-architecture" class="j-doc-nav__link ">
    2.2. About the hco-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-cdi-operator_virt-architecture" class="j-doc-nav__link ">
    2.3. About the cdi-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-cluster-network-addons-operator_virt-architecture" class="j-doc-nav__link ">
    2.4. About the cluster-network-addons-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-hpp-operator_virt-architecture" class="j-doc-nav__link ">
    2.5. About the hostpath-provisioner-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-ssp-operator_virt-architecture" class="j-doc-nav__link ">
    2.6. About the ssp-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-tekton-tasks-operator_virt-architecture" class="j-doc-nav__link ">
    2.7. About the tekton-tasks-operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-virt-operator_virt-architecture" class="j-doc-nav__link ">
    2.8. About the virt-operator
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-getting-started" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Getting started with OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Getting started with OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Getting started with OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#planning-and-installing-virt_virt-getting-started" class="j-doc-nav__link ">
    3.1. Planning and installing OpenShift Virtualization
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#creating-and-managing-vms_virt-getting-started" class="j-doc-nav__link ">
    3.2. Creating and managing virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#next-steps_virt-getting-started" class="j-doc-nav__link ">
    3.3. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-web-console-overview" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Web console overview
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Web console overview"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Web console overview"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-overview-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.1. Overview page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.1. Overview page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.1. Overview page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-overview-overview" class="j-doc-nav__link ">
    4.1.1. Overview tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-overview-top-consumers" class="j-doc-nav__link ">
    4.1.2. Top consumers tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-overview-migrations" class="j-doc-nav__link ">
    4.1.3. Migrations tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-overview-settings" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.1.4. Settings tab
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.1.4. Settings tab"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.1.4. Settings tab"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualization-settings-general" class="j-doc-nav__link ">
    4.1.4.1. General tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualization-settings-live-migration" class="j-doc-nav__link ">
    4.1.4.2. Live migration tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualization-settings-templates-project" class="j-doc-nav__link ">
    4.1.4.3. Templates project tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualization-settings-user-permissions" class="j-doc-nav__link ">
    4.1.4.4. User permissions tab
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-catalog-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.2. Catalog page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.2. Catalog page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.2. Catalog page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtualization-catalog-template_virt-web-console-overview" class="j-doc-nav__link ">
    4.2.1. Template catalog tab
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachines-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.3. VirtualMachines page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.3. VirtualMachines page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.3. VirtualMachines page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.3.1. VirtualMachine details page
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.3.1. VirtualMachine details page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.3.1. VirtualMachine details page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-overview" class="j-doc-nav__link ">
    4.3.1.1. Overview tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-details" class="j-doc-nav__link ">
    4.3.1.2. Details tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-metrics" class="j-doc-nav__link ">
    4.3.1.3. Metrics tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-yaml" class="j-doc-nav__link ">
    4.3.1.4. YAML tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-configuration" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.3.1.5. Configuration tab
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.3.1.5. Configuration tab"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.3.1.5. Configuration tab"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-scheduling" class="j-doc-nav__link ">
    4.3.1.5.1. Scheduling tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-environment" class="j-doc-nav__link ">
    4.3.1.5.2. Environment tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-network-interfaces" class="j-doc-nav__link ">
    4.3.1.5.3. Network interfaces tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-disks" class="j-doc-nav__link ">
    4.3.1.5.4. Disks tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-scripts" class="j-doc-nav__link ">
    4.3.1.5.5. Scripts tab
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-events" class="j-doc-nav__link ">
    4.3.1.6. Events tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-console" class="j-doc-nav__link ">
    4.3.1.7. Console tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-snapshots" class="j-doc-nav__link ">
    4.3.1.8. Snapshots tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-virtualmachine-details-diagnostics" class="j-doc-nav__link ">
    4.3.1.9. Diagnostics tab
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-templates-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.4. Templates page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.4. Templates page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.4. Templates page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.4.1. Template details page
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.4.1. Template details page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.4.1. Template details page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-details" class="j-doc-nav__link ">
    4.4.1.1. Details tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-yaml" class="j-doc-nav__link ">
    4.4.1.2. YAML tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-scheduling" class="j-doc-nav__link ">
    4.4.1.3. Scheduling tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-network-interfaces" class="j-doc-nav__link ">
    4.4.1.4. Network interfaces tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-disks" class="j-doc-nav__link ">
    4.4.1.5. Disks tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-scripts" class="j-doc-nav__link ">
    4.4.1.6. Scripts tab
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-template-details-parameters" class="j-doc-nav__link ">
    4.4.1.7. Parameters tab
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-datasources-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.5. DataSources page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.5. DataSources page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.5. DataSources page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-datasource-details-page" class="j-doc-nav__link ">
    4.5.1. DataSource details page
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-migrationpolicies-page" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.6. MigrationPolicies page
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.6. MigrationPolicies page"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.6. MigrationPolicies page"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#ui-migrationpolicy-details-page" class="j-doc-nav__link ">
    4.6.1. MigrationPolicy details page
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-release-notes" class="j-doc-nav__link j-doc-nav__link--has-children">
    5. OpenShift Virtualization release notes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5. OpenShift Virtualization release notes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5. OpenShift Virtualization release notes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-inclusive-language" class="j-doc-nav__link ">
    5.1. Making open source more inclusive
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#about-red-hat-openshift-virtualization" class="j-doc-nav__link j-doc-nav__link--has-children">
    5.2. About Red Hat OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5.2. About Red Hat OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5.2. About Red Hat OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-supported-cluster-version_virt-4-13-release-notes" class="j-doc-nav__link ">
    5.2.1. OpenShift Virtualization supported cluster version
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-guest-os" class="j-doc-nav__link ">
    5.2.2. Supported guest operating systems
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-new" class="j-doc-nav__link j-doc-nav__link--has-children">
    5.3. New and changed features
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5.3. New and changed features"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5.3. New and changed features"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-quick-starts" class="j-doc-nav__link ">
    5.3.1. Quick starts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-networking-new" class="j-doc-nav__link ">
    5.3.2. Networking
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-storage-new" class="j-doc-nav__link ">
    5.3.3. Storage
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-web-new" class="j-doc-nav__link ">
    5.3.4. Web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-deprecated-removed" class="j-doc-nav__link j-doc-nav__link--has-children">
    5.4. Deprecated and removed features
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5.4. Deprecated and removed features"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5.4. Deprecated and removed features"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-deprecated" class="j-doc-nav__link ">
    5.4.1. Deprecated features
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-removed" class="j-doc-nav__link ">
    5.4.2. Removed features
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-technology-preview" class="j-doc-nav__link ">
    5.5. Technology Preview features
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-bug-fix" class="j-doc-nav__link ">
    5.6. Bug fix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-4-13-known-issues" class="j-doc-nav__link ">
    5.7. Known issues
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing" class="j-doc-nav__link j-doc-nav__link--has-children">
    6. Installing
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6. Installing"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6. Installing"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#preparing-cluster-for-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.1. Preparing your cluster for OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.1. Preparing your cluster for OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.1. Preparing your cluster for OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hardware-os-requirements_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.1. Hardware and operating system requirements
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cluster-resource-requirements_preparing-cluster-for-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.1.2. Physical resource overhead requirements
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.1.2. Physical resource overhead requirements"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.1.2. Physical resource overhead requirements"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#memory-overhead_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.2.1. Memory overhead
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#CPU-overhead_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.2.2. CPU overhead
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#storage-overhead_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.2.3. Storage overhead
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#example-scenario_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.2.4. Example
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-storage-volumes-for-vm-disks_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.3. About storage volumes for virtual machine disks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#object-maximums_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.4. Object maximums
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#restricted-networks-environments_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.5. Restricted network environments
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#live-migration_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.6. Live migration
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#cluster-high-availability-options_preparing-cluster-for-virt" class="j-doc-nav__link ">
    6.1.7. Cluster high-availability options
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2. Specifying nodes for OpenShift Virtualization components
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2. Specifying nodes for OpenShift Virtualization components"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2. Specifying nodes for OpenShift Virtualization components"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-placement-virtualization-components_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2.1. About node placement for virtualization components
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2.1. About node placement for virtualization components"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2.1. About node placement for virtualization components"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#how-to-apply-node-placement-rules-virt-components" class="j-doc-nav__link ">
    6.2.1.1. How to apply node placement rules to virtualization components
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#node-placement-olm-subscription_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.1.2. Node placement in the OLM Subscription object
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#node-placement-hco_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.1.3. Node placement in the HyperConverged object
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#node-placement-hpp_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.1.4. Node placement in the HostPathProvisioner object
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.1.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#example-manifests_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2.2. Example manifests
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2.2. Example manifests"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2.2. Example manifests"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#olm-subscription-examples_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2.2.1. Operator Lifecycle Manager Subscription object
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2.2.1. Operator Lifecycle Manager Subscription object"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2.2.1. Operator Lifecycle Manager Subscription object"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-node-selector-olm-subscription_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.1.1. Example: Node placement with nodeSelector in the OLM Subscription object
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-tolerations-olm-subscription_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.1.2. Example: Node placement with tolerations in the OLM Subscription object
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#hyperconverged-cluster-cr-examples_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2.2.2. HyperConverged object
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2.2.2. HyperConverged object"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2.2.2. HyperConverged object"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-node-selector-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.2.1. Example: Node placement with nodeSelector in the HyperConverged Cluster CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-affinity-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.2.2. Example: Node placement with affinity in the HyperConverged Cluster CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-tolerations-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.2.3. Example: Node placement with tolerations in the HyperConverged Cluster CR
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#hpp-object-examples_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.2.2.3. HostPathProvisioner object
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.2.2.3. HostPathProvisioner object"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.2.2.3. HostPathProvisioner object"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-node-placement-node-selector-hpp_virt-specifying-nodes-for-virtualization-components" class="j-doc-nav__link ">
    6.2.2.3.1. Example: Node placement with nodeSelector in the HostPathProvisioner object
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-virt-web" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.3. Installing OpenShift Virtualization using the web console
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.3. Installing OpenShift Virtualization using the web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.3. Installing OpenShift Virtualization using the web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virt-operator_installing-virt-web" class="j-doc-nav__link ">
    6.3.1. Installing the OpenShift Virtualization Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-virt-web-next-steps" class="j-doc-nav__link ">
    6.3.2. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-virt-cli" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.4. Installing OpenShift Virtualization using the CLI
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.4. Installing OpenShift Virtualization using the CLI"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.4. Installing OpenShift Virtualization using the CLI"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_installing-virt-cli" class="j-doc-nav__link ">
    6.4.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-subscribing-cli_installing-virt-cli" class="j-doc-nav__link ">
    6.4.2. Subscribing to the OpenShift Virtualization catalog by using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deploying-operator-cli_installing-virt-cli" class="j-doc-nav__link ">
    6.4.3. Deploying the OpenShift Virtualization Operator by using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#next-steps" class="j-doc-nav__link ">
    6.4.4. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#uninstalling-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.5. Uninstalling OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.5. Uninstalling OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.5. Uninstalling OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#uninstalling-virt-web-console_uninstalling-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    6.5.1. Uninstalling OpenShift Virtualization by using the web console
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "6.5.1. Uninstalling OpenShift Virtualization by using the web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "6.5.1. Uninstalling OpenShift Virtualization by using the web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-deployment-custom-resource_uninstalling-virt" class="j-doc-nav__link ">
    6.5.1.1. Deleting the HyperConverged custom resource
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#olm-deleting-operators-from-a-cluster-using-web-console_uninstalling-virt" class="j-doc-nav__link ">
    6.5.1.2. Deleting Operators from a cluster using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#deleting-a-namespace-using-the-web-console_uninstalling-virt" class="j-doc-nav__link ">
    6.5.1.3. Deleting a namespace using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-virt-crds-web_uninstalling-virt" class="j-doc-nav__link ">
    6.5.1.4. Deleting OpenShift Virtualization custom resource definitions
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-virt-cli_uninstalling-virt" class="j-doc-nav__link ">
    6.5.2. Uninstalling OpenShift Virtualization by using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7. Updating OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7. Updating OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7. Updating OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-rhel-9_upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.1. OpenShift Virtualization on RHEL 9
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.1. OpenShift Virtualization on RHEL 9"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.1. OpenShift Virtualization on RHEL 9"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#new-rhel-9-machine-type_upgrading-virt" class="j-doc-nav__link ">
    7.1.1. New RHEL 9 machine type
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-upgrading-virt_upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.2. About updating OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.2. About updating OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.2. About updating OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-workload-updates_upgrading-virt" class="j-doc-nav__link ">
    7.2.1. About workload updates
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-eus-updates_upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.2.2. About EUS-to-EUS updates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.2.2. About EUS-to-EUS updates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.2.2. About EUS-to-EUS updates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#preparing-to-update_upgrading-virt" class="j-doc-nav__link ">
    7.2.2.1. Preparing to update
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-preventing-workload-updates-during-eus-update_upgrading-virt" class="j-doc-nav__link ">
    7.3. Preventing workload updates during an EUS-to-EUS update
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-workload-update-methods_upgrading-virt" class="j-doc-nav__link ">
    7.4. Configuring workload update methods
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#approving-operator-upgrades_upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.5. Approving pending Operator updates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.5. Approving pending Operator updates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.5. Approving pending Operator updates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#olm-approving-pending-upgrade_upgrading-virt" class="j-doc-nav__link ">
    7.5.1. Manually approving a pending Operator update
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#monitoring-upgrade-status_upgrading-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    7.6. Monitoring update status
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "7.6. Monitoring update status"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "7.6. Monitoring update status"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-monitoring-upgrade-status_upgrading-virt" class="j-doc-nav__link ">
    7.6.1. Monitoring OpenShift Virtualization upgrade status
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-outdated-workloads_upgrading-virt" class="j-doc-nav__link ">
    7.6.2. Viewing outdated OpenShift Virtualization workloads
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_upgrading-virt" class="j-doc-nav__link ">
    7.7. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-security-policies" class="j-doc-nav__link j-doc-nav__link--has-children">
    8. Security policies
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8. Security policies"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8. Security policies"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-workload-security_virt-security-policies" class="j-doc-nav__link ">
    8.1. About workload security
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-additional-scc-for-kubevirt-controller_virt-security-policies" class="j-doc-nav__link j-doc-nav__link--has-children">
    8.2. Additional OpenShift Container Platform security context constraints and Linux capabilities for the kubevirt-controller service account
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8.2. Additional OpenShift Container Platform security context constraints and Linux capabilities for the kubevirt-controller service account"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8.2. Additional OpenShift Container Platform security context constraints and Linux capabilities for the kubevirt-controller service account"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#viewing-the-scc-and-rbac-definitions-for-the-kubevirt-controller" class="j-doc-nav__link ">
    8.2.1. Viewing the SCC and RBAC definitions for the kubevirt-controller
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#authorization_virt-security-policies" class="j-doc-nav__link j-doc-nav__link--has-children">
    8.3. Authorization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "8.3. Authorization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "8.3. Authorization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#default-cluster-roles-for-virt_virt-security-policies" class="j-doc-nav__link ">
    8.3.1. Default cluster roles for OpenShift Virtualization
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-security-policies" class="j-doc-nav__link ">
    8.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-the-cli-tools" class="j-doc-nav__link j-doc-nav__link--has-children">
    9. Using the virtctl and libguestfs CLI tools
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9. Using the virtctl and libguestfs CLI tools"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9. Using the virtctl and libguestfs CLI tools"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-virtctl_virt-using-the-cli-tools" class="j-doc-nav__link j-doc-nav__link--has-children">
    9.1. Installing virtctl
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9.1. Installing virtctl"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9.1. Installing virtctl"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virtctl-client_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.1.1. Installing virtctl on Linux, Windows, and macOS
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virtctl-client-yum_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.1.2. Installing virtctl on RHEL
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-virtctl-commands_virt-using-the-cli-tools" class="j-doc-nav__link j-doc-nav__link--has-children">
    9.2. Virtctl commands
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9.2. Virtctl commands"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9.2. Virtctl commands"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtctl-information-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.1. Virtctl information commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-information-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.2. VM information commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-management-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.3. VM management commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-connection-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.4. VM connection commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-volume-export-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.5. VM export commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-memory-dump-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.6. VM memory dump commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#hot-plug-and-hot-unplug-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.7. Hot plug and hot unplug commands
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#image-upload-commands_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.2.8. Image upload commands
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#using-libguestfs" class="j-doc-nav__link j-doc-nav__link--has-children">
    9.3. Using libguestfs
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "9.3. Using libguestfs"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "9.3. Using libguestfs"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-pvc-with-virtctl-guestfs_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.3.1. Deploying a libguestfs-tools container by using virtctl
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-libguestfs-tools-virtctl-guestfs_virt-using-the-cli-tools" class="j-doc-nav__link ">
    9.3.2. Libguestfs and virtctl guestfs commands
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtual-machines" class="j-doc-nav__link j-doc-nav__link--has-children">
    10. Virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10. Virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10. Virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-create-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.1. Creating virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.1. Creating virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.1. Creating virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-quick-start-web_virt-create-vms" class="j-doc-nav__link ">
    10.1.1. Using a Quick Start to create a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-quick-creating-vm_virt-create-vms" class="j-doc-nav__link ">
    10.1.2. Quick creating a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-custom-template_virt-create-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.1.3. Creating a virtual machine from a customized template
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.1.3. Creating a virtual machine from a customized template"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.1.3. Creating a virtual machine from a customized template"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-networking-wizard-fields-web_virt-create-vms" class="j-doc-nav__link ">
    10.1.3.1. Networking fields
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-storage-wizard-fields-web_virt-create-vms" class="j-doc-nav__link ">
    10.1.3.2. Storage fields
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloud-init-fields-web_virt-create-vms" class="j-doc-nav__link ">
    10.1.3.3. Cloud-init fields
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-yaml-web_virt-create-vms" class="j-doc-nav__link ">
    10.1.3.4. Pasting in a pre-configured YAML file to create a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-cli_virt-create-vms" class="j-doc-nav__link ">
    10.1.4. Using the CLI to create a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-storage-volume-types_virt-create-vms" class="j-doc-nav__link ">
    10.1.5. Virtual machine storage volume types
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-runstrategies-vms_virt-create-vms" class="j-doc-nav__link ">
    10.1.6. About RunStrategies for virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-create-vms_virt-create-vms" class="j-doc-nav__link ">
    10.1.7. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-edit-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.2. Editing virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.2. Editing virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.2. Editing virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vm-web_virt-edit-vms" class="j-doc-nav__link ">
    10.2.1. Editing a virtual machine in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vm-yaml-web_virt-edit-vms" class="j-doc-nav__link ">
    10.2.2. Editing a virtual machine YAML configuration using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vm-cli_virt-edit-vms" class="j-doc-nav__link ">
    10.2.3. Editing a virtual machine YAML configuration using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-add-disk-to-vm_virt-edit-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.2.4. Adding a virtual disk to a virtual machine
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.2.4. Adding a virtual disk to a virtual machine"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.2.4. Adding a virtual disk to a virtual machine"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-storage-wizard-fields-web_virt-edit-vms" class="j-doc-nav__link ">
    10.2.4.1. Storage fields
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-secret-configmap-service-account-to-vm_virt-edit-vms" class="j-doc-nav__link ">
    10.2.5. Adding a secret, config map, or service account to a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-add-nic_virt-edit-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.2.6. Adding a network interface to a virtual machine
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.2.6. Adding a network interface to a virtual machine"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.2.6. Adding a network interface to a virtual machine"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-networking-wizard-fields-web_virt-edit-vms" class="j-doc-nav__link ">
    10.2.6.1. Networking fields
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-edit-boot-order" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.3. Editing boot order
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.3. Editing boot order"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.3. Editing boot order"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-add-boot-order-web_virt-edit-boot-order" class="j-doc-nav__link ">
    10.3.1. Adding items to a boot order list in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-edit-boot-order-web_virt-edit-boot-order" class="j-doc-nav__link ">
    10.3.2. Editing a boot order list in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-edit-boot-order-yaml-web_virt-edit-boot-order" class="j-doc-nav__link ">
    10.3.3. Editing a boot order list in the YAML configuration file
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-remove-boot-order-item-web_virt-edit-boot-order" class="j-doc-nav__link ">
    10.3.4. Removing items from a boot order list in the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-delete-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.4. Deleting virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.4. Deleting virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.4. Deleting virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-delete-vm-web_virt-delete-vms" class="j-doc-nav__link ">
    10.4.1. Deleting a virtual machine using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vms_virt-delete-vms" class="j-doc-nav__link ">
    10.4.2. Deleting a virtual machine by using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-exporting-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.5. Exporting virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.5. Exporting virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.5. Exporting virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-virtualmachineexport_virt-exporting-vms" class="j-doc-nav__link ">
    10.5.1. Creating a VirtualMachineExport custom resource
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-exported-vm-manifests_virt-exporting-vms" class="j-doc-nav__link ">
    10.5.2. Accessing exported virtual machine manifests
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-exporting-vms" class="j-doc-nav__link ">
    10.5.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-manage-vmis" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.6. Managing virtual machine instances
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.6. Managing virtual machine instances"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.6. Managing virtual machine instances"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vmis_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.1. About virtual machine instances
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-listing-vmis-cli_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.2. Listing all virtual machine instances using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-listing-vmis-web_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.3. Listing standalone virtual machine instances using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vmis-web_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.4. Editing a standalone virtual machine instance using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vmis-cli_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.5. Deleting a standalone virtual machine instance using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vmis-web_virt-manage-vmis" class="j-doc-nav__link ">
    10.6.6. Deleting a standalone virtual machine instance using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-controlling-vm-states" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.7. Controlling virtual machine states
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.7. Controlling virtual machine states"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.7. Controlling virtual machine states"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-starting-vm-web_virt-controlling-vm-states" class="j-doc-nav__link ">
    10.7.1. Starting a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-restarting-vm-web_virt-controlling-vm-states" class="j-doc-nav__link ">
    10.7.2. Restarting a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-stopping-vm-web_virt-controlling-vm-states" class="j-doc-nav__link ">
    10.7.3. Stopping a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-unpausing-vm-web_virt-controlling-vm-states" class="j-doc-nav__link ">
    10.7.4. Unpausing a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vm-consoles" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.8. Accessing virtual machine consoles
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.8. Accessing virtual machine consoles"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.8. Accessing virtual machine consoles"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vm-consoles-web" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.8.1. Accessing virtual machine consoles in the OpenShift Container Platform web console
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.8.1. Accessing virtual machine consoles in the OpenShift Container Platform web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.8.1. Accessing virtual machine consoles in the OpenShift Container Platform web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-serial-console-web_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.1.1. Connecting to the serial console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-connecting-vnc-console_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.1.2. Connecting to the VNC console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-rdp-console-web_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.1.3. Connecting to a Windows virtual machine with RDP
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-switching-displays_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.1.4. Switching between virtual machine displays
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-copying-the-ssh-command_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.1.5. Copying the SSH command using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vm-consoles-cli" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.8.2. Accessing virtual machine consoles by using CLI commands
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.8.2. Accessing virtual machine consoles by using CLI commands"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.8.2. Accessing virtual machine consoles by using CLI commands"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vmi-ssh_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.2.1. Accessing a virtual machine via SSH by using virtctl
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-openssh-and-virtctl-port-forward_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.2.2. Using OpenSSH and virtctl port-forward
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-serial-console_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.2.3. Accessing the serial console of a virtual machine instance
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vnc-console_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.2.4. Accessing the graphical console of a virtual machine instances with VNC
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-rdp-console_virt-accessing-vm-consoles" class="j-doc-nav__link ">
    10.8.2.5. Connecting to a Windows virtual machine with an RDP console
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-automating-windows-sysprep" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.9. Automating Windows installation with sysprep
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.9. Automating Windows installation with sysprep"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.9. Automating Windows installation with sysprep"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-windows-dvd-disk-image_virt-automating-windows-sysprep" class="j-doc-nav__link ">
    10.9.1. Using a Windows DVD to create a VM disk image
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-disk-image-install-windows_virt-automating-windows-sysprep" class="j-doc-nav__link ">
    10.9.2. Using a disk image to install Windows
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-generalizing-windows-sysprep_virt-automating-windows-sysprep" class="j-doc-nav__link ">
    10.9.3. Generalizing a Windows VM using sysprep
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-specializing-windows-sysprep_virt-automating-windows-sysprep" class="j-doc-nav__link ">
    10.9.4. Specializing a Windows virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources-virt-automating-windows-sysprep_virt-automating-windows-sysprep" class="j-doc-nav__link ">
    10.9.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-triggering-vm-failover-resolving-failed-node" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.10. Triggering virtual machine failover by resolving a failed node
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.10. Triggering virtual machine failover by resolving a failed node"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.10. Triggering virtual machine failover by resolving a failed node"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_virt-triggering-vm-failover-resolving-failed-node" class="j-doc-nav__link ">
    10.10.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#nodes-nodes-working-deleting-bare-metal_virt-triggering-vm-failover-resolving-failed-node" class="j-doc-nav__link ">
    10.10.2. Deleting nodes from a bare metal cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#verifying-vm-failover_virt-triggering-vm-failover-resolving-failed-node" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.10.3. Verifying virtual machine failover
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.10.3. Verifying virtual machine failover"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.10.3. Verifying virtual machine failover"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-listing-vmis-cli_virt-triggering-vm-failover-resolving-failed-node" class="j-doc-nav__link ">
    10.10.3.1. Listing all virtual machine instances using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-qemu-guest-agent" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.11. Installing the QEMU guest agent and VirtIO drivers
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.11. Installing the QEMU guest agent and VirtIO drivers"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.11. Installing the QEMU guest agent and VirtIO drivers"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-the-qemu-guest-agent" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.11.1. Installing the QEMU guest agent
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.11.1. Installing the QEMU guest agent"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.11.1. Installing the QEMU guest agent"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-qemu-guest-agent-on-linux-vm_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.1.1. Installing QEMU guest agent on a Linux virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-qemu-guest-agent-on-windows-vm_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.1.2. Installing QEMU guest agent on a Windows virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-virtio-drivers" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.11.2. Installing VirtIO drivers
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.11.2. Installing VirtIO drivers"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.11.2. Installing VirtIO drivers"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-supported-virtio-drivers_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.2.1. Supported VirtIO drivers for Microsoft Windows virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-virtio-drivers_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.2.2. About VirtIO drivers
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virtio-drivers-existing-windows_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.2.3. Installing VirtIO drivers on an existing Windows virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virtio-drivers-installing-windows_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.2.4. Installing VirtIO drivers during Windows installation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-virtio-drivers-vm-yaml_virt-installing-qemu-guest-agent" class="j-doc-nav__link ">
    10.11.2.5. Adding VirtIO drivers container disk to a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-qemu-guest-agent-web" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.12. Viewing the QEMU guest agent information for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.12. Viewing the QEMU guest agent information for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.12. Viewing the QEMU guest agent information for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-qemu-guest-agent-information-web_virt-viewing-qemu-guest-agent-web" class="j-doc-nav__link ">
    10.12.1. Viewing the QEMU guest agent information in the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-vtpm-devices" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.13. Using virtual Trusted Platform Module devices
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.13. Using virtual Trusted Platform Module devices"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.13. Using virtual Trusted Platform Module devices"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vtpm-devices_virt-using-vtpm-devices" class="j-doc-nav__link ">
    10.13.1. About vTPM devices
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-vtpm-to-vm_virt-using-vtpm-devices" class="j-doc-nav__link ">
    10.13.2. Adding a vTPM device to a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-managing-vms-openshift-pipelines" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.14. Managing virtual machines with OpenShift Pipelines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.14. Managing virtual machines with OpenShift Pipelines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.14. Managing virtual machines with OpenShift Pipelines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deploying-tto_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.2. Deploying the Tekton Tasks Operator resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-supported-tekton-tasks_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.3. Virtual machine tasks supported by the Tekton Tasks Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#example-pipelines_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.14.4. Example pipelines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.14.4. Example pipelines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.14.4. Example pipelines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-running-tto-pipeline-web_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.4.1. Running the example pipelines using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-running-tto-pipeline-cli_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.4.2. Running the example pipelines using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-managing-vms-openshift-pipelines" class="j-doc-nav__link ">
    10.14.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#advanced-virtual-machine-management" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15. Advanced virtual machine management
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15. Advanced virtual machine management"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15. Advanced virtual machine management"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-working-with-resource-quotas-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.1. Working with resource quotas for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.1. Working with resource quotas for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.1. Working with resource quotas for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-setting-resource-quota-limits-for-vms_virt-working-with-resource-quotas-for-vms" class="j-doc-nav__link ">
    10.15.1.1. Setting resource quota limits for virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-working-with-resource-quotas-for-vms" class="j-doc-nav__link ">
    10.15.1.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-specifying-nodes-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.2. Specifying nodes for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.2. Specifying nodes for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.2. Specifying nodes for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-placement-vms_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.1. About node placement for virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#node-placement-examples_virt-specifying-nodes-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.2.2. Node placement examples
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.2.2. Node placement examples"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.2.2. Node placement examples"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-vm-node-placement-node-selector_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.2.1. Example: VM node placement with nodeSelector
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-vm-node-placement-pod-affinity_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.2.2. Example: VM node placement with pod affinity and pod anti-affinity
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-vm-node-placement-node-affinity_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.2.3. Example: VM node placement with node affinity
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-vm-node-placement-tolerations_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.2.4. Example: VM node placement with tolerations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-specifying-nodes-for-vms" class="j-doc-nav__link ">
    10.15.2.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-certificate-rotation" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.3. Configuring certificate rotation
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.3. Configuring certificate rotation"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.3. Configuring certificate rotation"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-certificate-rotation_virt-configuring-certificate-rotation" class="j-doc-nav__link ">
    10.15.3.1. Configuring certificate rotation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-troubleshooting-cert-rotation-parameters_virt-configuring-certificate-rotation" class="j-doc-nav__link ">
    10.15.3.2. Troubleshooting certificate rotation parameters
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-default-cpu-model" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.4. Configuring the default CPU model
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.4. Configuring the default CPU model"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.4. Configuring the default CPU model"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-default-cpu-model_virt-configuring-default-cpu-model" class="j-doc-nav__link ">
    10.15.4.1. Configuring the default CPU model
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uefi-mode-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.5. Using UEFI mode for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.5. Using UEFI mode for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.5. Using UEFI mode for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-uefi-mode-for-vms_virt-uefi-mode-for-vms" class="j-doc-nav__link ">
    10.15.5.1. About UEFI mode for virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-booting-vms-uefi-mode_virt-uefi-mode-for-vms" class="j-doc-nav__link ">
    10.15.5.2. Booting virtual machines in UEFI mode
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#configuring-pxe-booting" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.6. Configuring PXE booting for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.6. Configuring PXE booting for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.6. Configuring PXE booting for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites" class="j-doc-nav__link ">
    10.15.6.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-pxe-booting-with-mac-address_pxe-booting" class="j-doc-nav__link ">
    10.15.6.2. PXE booting with a specified MAC address
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-networking-glossary_pxe-booting" class="j-doc-nav__link ">
    10.15.6.3. OpenShift Virtualization networking glossary
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-huge-pages-with-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.7. Using huge pages with virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.7. Using huge pages with virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.7. Using huge pages with virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-2" class="j-doc-nav__link ">
    10.15.7.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#what-huge-pages-do_virt-using-huge-pages-with-vms" class="j-doc-nav__link ">
    10.15.7.2. What huge pages do
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-huge-pages-for-vms_virt-using-huge-pages-with-vms" class="j-doc-nav__link ">
    10.15.7.3. Configuring huge pages for virtual machines
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-dedicated-resources-vm" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.8. Enabling dedicated resources for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.8. Enabling dedicated resources for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.8. Enabling dedicated resources for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-dedicated-resources_virt-dedicated-resources-vm" class="j-doc-nav__link ">
    10.15.8.1. About dedicated resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-3" class="j-doc-nav__link ">
    10.15.8.2. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-dedicated-resources_virt-dedicated-resources-vm" class="j-doc-nav__link ">
    10.15.8.3. Enabling dedicated resources for a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-schedule-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.9. Scheduling virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.9. Scheduling virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.9. Scheduling virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#policy-attributes_virt-schedule-vms" class="j-doc-nav__link ">
    10.15.9.1. Policy attributes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-setting-policy-attributes_virt-schedule-vms" class="j-doc-nav__link ">
    10.15.9.2. Setting a policy attribute and CPU feature
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-schedule-supported-cpu-model-vms_virt-schedule-vms" class="j-doc-nav__link ">
    10.15.9.3. Scheduling virtual machines with the supported CPU model
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-schedule-cpu-host-model-vms_virt-schedule-vms" class="j-doc-nav__link ">
    10.15.9.4. Scheduling virtual machines with the host model
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-pci-passthrough" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.10. Configuring PCI passthrough
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.10. Configuring PCI passthrough"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.10. Configuring PCI passthrough"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about_pci-passthrough_virt-configuring-pci-passthrough" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.10.1. About preparing a host device for PCI passthrough
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.10.1. About preparing a host device for PCI passthrough"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.10.1. About preparing a host device for PCI passthrough"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-kernel-arguments-enable-IOMMU_virt-configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.1.1. Adding kernel arguments to enable the IOMMU driver
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-binding-devices-vfio-driver_virt-configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.1.2. Binding PCI devices to the VFIO driver
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-exposing-pci-device-in-cluster-cli_virt-configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.1.3. Exposing PCI host devices in the cluster using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-removing-pci-device-from-cluster_virt-configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.1.4. Removing PCI host devices from the cluster using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vms-for-pci-passthrough" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.10.2. Configuring virtual machines for PCI passthrough
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.10.2. Configuring virtual machines for PCI passthrough"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.10.2. Configuring virtual machines for PCI passthrough"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-assigning-pci-device-virtual-machine_virt-configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.2.1. Assigning a PCI device to a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_configuring-pci-passthrough" class="j-doc-nav__link ">
    10.15.10.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vgpu-passthrough" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.11. Configuring vGPU passthrough
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.11. Configuring vGPU passthrough"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.11. Configuring vGPU passthrough"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-assign-vgpu-passthrough-to-vm_virt-configuring-vgpu-passthrough" class="j-doc-nav__link ">
    10.15.11.1. Assigning vGPU passthrough devices to a virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-configuring-vgpu-passthrough" class="j-doc-nav__link ">
    10.15.11.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-mediated-devices" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.12. Configuring mediated devices
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.12. Configuring mediated devices"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.12. Configuring mediated devices"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#about-using-nvidia-gpu_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.1. About using the NVIDIA GPU Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-using-virtual-gpus_virt-configuring-mediated-devices" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.12.2. About using virtual GPUs with OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.12.2. About using virtual GPUs with OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.12.2. About using virtual GPUs with OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#configuration-overview_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.2. Configuration overview
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#how-vgpus-are-assigned-to-nodes_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.3. How vGPUs are assigned to nodes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#about-changing-removing-mediated-devices_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.4. About changing and removing mediated devices
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-preparing-host-for-mdevs_virt-configuring-mediated-devices" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.12.2.5. Preparing hosts for mediated devices
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.12.2.5. Preparing hosts for mediated devices"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.12.2.5. Preparing hosts for mediated devices"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-kernel-arguments-enable-IOMMU_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.5.1. Adding kernel arguments to enable the IOMMU driver
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-and-removing-mediated-devices_context" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.12.2.6. Adding and removing mediated devices
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.12.2.6. Adding and removing mediated devices"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.12.2.6. Adding and removing mediated devices"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-and-exposing-mediated-devices_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.6.1. Creating and exposing mediated devices
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-removing-mediated-device-from-cluster-cli_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.2.6.2. Removing mediated devices from the cluster using the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-mediated-devices_virt-configuring-mediated-devices" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.12.3. Using mediated devices
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.12.3. Using mediated devices"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.12.3. Using mediated devices"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-assigning-mediated-device-virtual-machine_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.3.1. Assigning a mediated device to a virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-configuring-mediated-devices" class="j-doc-nav__link ">
    10.15.12.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-descheduler-evictions" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.15.13. Enabling descheduler evictions on virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.15.13. Enabling descheduler evictions on virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.15.13. Enabling descheduler evictions on virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#nodes-descheduler-profiles_virt-enabling-descheduler-evictions" class="j-doc-nav__link ">
    10.15.13.1. Descheduler profiles
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#nodes-descheduler-installing_virt-enabling-descheduler-evictions" class="j-doc-nav__link ">
    10.15.13.2. Installing the descheduler
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-descheduler-evictions_virt-enabling-descheduler-evictions" class="j-doc-nav__link ">
    10.15.13.3. Enabling descheduler evictions on a virtual machine (VM)
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_enabling-descheduler-evictions" class="j-doc-nav__link ">
    10.15.13.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#importing-virtual-machines" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.16. Importing virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.16. Importing virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.16. Importing virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-tls-certificates-for-dv-imports" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.16.1. TLS certificates for data volume imports
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.16.1. TLS certificates for data volume imports"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.16.1. TLS certificates for data volume imports"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-tls-certificates-for-authenticating-dv-imports_virt-tls-certificates-for-dv-imports" class="j-doc-nav__link ">
    10.16.1.1. Adding TLS certificates for authenticating data volume imports
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-example-configmap-tls-certificate_virt-tls-certificates-for-dv-imports" class="j-doc-nav__link ">
    10.16.1.2. Example: Config map created from a TLS certificate
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.16.2. Importing virtual machine images with data volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.16.2. Importing virtual machine images with data volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.16.2. Importing virtual machine images with data volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-4" class="j-doc-nav__link ">
    10.16.2.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link ">
    10.16.2.2. CDI supported operations matrix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link ">
    10.16.2.3. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#local-block-persistent-volumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.16.2.4. Local block persistent volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.16.2.4. Local block persistent volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.16.2.4. Local block persistent volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-block-pvs_virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link ">
    10.16.2.4.1. About block persistent volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-local-block-pv_virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link ">
    10.16.2.4.2. Creating a local block persistent volume
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-importing-vm-datavolume_virt-importing-virtual-machine-images-datavolumes" class="j-doc-nav__link ">
    10.16.2.5. Importing a virtual machine image into storage by using a data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-importing-virtual-machine-images-datavolumes_additional-resources" class="j-doc-nav__link ">
    10.16.2.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#cloning-virtual-machines" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.17. Cloning virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.17. Cloning virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.17. Cloning virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-user-permissions-to-clone-datavolumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.17.1. Enabling user permissions to clone data volumes across namespaces
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.17.1. Enabling user permissions to clone data volumes across namespaces"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.17.1. Enabling user permissions to clone data volumes across namespaces"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-5" class="j-doc-nav__link ">
    10.17.1.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-enabling-user-permissions-to-clone-datavolumes" class="j-doc-nav__link ">
    10.17.1.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-rbac-cloning-dvs_virt-enabling-user-permissions-to-clone-datavolumes" class="j-doc-nav__link ">
    10.17.1.3. Creating RBAC resources for cloning data volumes
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-vm-disk-into-new-datavolume" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.17.2. Cloning a virtual machine disk into a new data volume
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.17.2. Cloning a virtual machine disk into a new data volume"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.17.2. Cloning a virtual machine disk into a new data volume"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-6" class="j-doc-nav__link ">
    10.17.2.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-cloning-vm-disk-into-new-datavolume" class="j-doc-nav__link ">
    10.17.2.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-pvc-of-vm-disk-into-new-datavolume_virt-cloning-vm-disk-into-new-datavolume" class="j-doc-nav__link ">
    10.17.2.3. Cloning the persistent volume claim of a virtual machine disk into a new data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-cloning-vm-disk-into-new-datavolume" class="j-doc-nav__link ">
    10.17.2.4. CDI supported operations matrix
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-vm-using-datavolumetemplate" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.17.3. Cloning a virtual machine by using a data volume template
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.17.3. Cloning a virtual machine by using a data volume template"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.17.3. Cloning a virtual machine by using a data volume template"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-7" class="j-doc-nav__link ">
    10.17.3.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-cloning-vm-using-datavolumetemplate" class="j-doc-nav__link ">
    10.17.3.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-new-vm-from-cloned-pvc-using-datavolumetemplate_virt-cloning-vm-using-datavolumetemplate" class="j-doc-nav__link ">
    10.17.3.3. Creating a new virtual machine from a cloned persistent volume claim by using a data volume template
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-cloning-vm-using-datavolumetemplate" class="j-doc-nav__link ">
    10.17.3.4. CDI supported operations matrix
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.17.4. Cloning a virtual machine disk into a new block storage persistent volume claim
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.17.4. Cloning a virtual machine disk into a new block storage persistent volume claim"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.17.4. Cloning a virtual machine disk into a new block storage persistent volume claim"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-8" class="j-doc-nav__link ">
    10.17.4.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link ">
    10.17.4.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-block-pvs_virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link ">
    10.17.4.3. About block persistent volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-local-block-pv_virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link ">
    10.17.4.4. Creating a local block persistent volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-pvc-of-vm-disk-into-new-datavolume_virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link ">
    10.17.4.5. Cloning the persistent volume claim of a virtual machine disk into a new data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-cloning-vm-disk-into-new-block-storage-pvc" class="j-doc-nav__link ">
    10.17.4.6. CDI supported operations matrix
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtual-machine-networking" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18. Virtual machine networking
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18. Virtual machine networking"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18. Virtual machine networking"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-the-default-pod-network-with-virt" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.1. Configuring the virtual machine for the default pod network
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.1. Configuring the virtual machine for the default pod network"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.1. Configuring the virtual machine for the default pod network"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-masquerade-mode-cli_virt-using-the-default-pod-network-with-virt" class="j-doc-nav__link ">
    10.18.1.1. Configuring masquerade mode from the command line
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-masquerade-mode-dual-stack_virt-using-the-default-pod-network-with-virt" class="j-doc-nav__link ">
    10.18.1.2. Configuring masquerade mode with dual-stack (IPv4 and IPv6)
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-jumbo-frames-vm-pod-nw_virt-using-the-default-pod-network-with-virt" class="j-doc-nav__link ">
    10.18.1.3. About jumbo frames support
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-service-vm" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.2. Creating a service to expose a virtual machine
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.2. Creating a service to expose a virtual machine"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.2. Creating a service to expose a virtual machine"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-services_virt-creating-service-vm" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.2.1. About services
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.2.1. About services"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.2.1. About services"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-dual-stack-support-services_virt-creating-service-vm" class="j-doc-nav__link ">
    10.18.2.1.1. Dual-stack support
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-a-service-from-a-virtual-machine_virt-creating-service-vm" class="j-doc-nav__link ">
    10.18.2.2. Exposing a virtual machine as a service
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_creating-service-vm" class="j-doc-nav__link ">
    10.18.2.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-attaching-vm-multiple-networks" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.3. Connecting a virtual machine to a Linux bridge network
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.3. Connecting a virtual machine to a Linux bridge network"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.3. Connecting a virtual machine to a Linux bridge network"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-connecting-network-through-nad" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.3.1. Connecting to the network through the network attachment definition
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.3.1. Connecting to the network through the network attachment definition"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.3.1. Connecting to the network through the network attachment definition"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-linux-bridge-nncp_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.1.1. Creating a Linux bridge node network configuration policy
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-linux-bridge-network-attachment-definition" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.3.2. Creating a Linux bridge network attachment definition
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.3.2. Creating a Linux bridge network attachment definition"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.3.2. Creating a Linux bridge network attachment definition"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-linux-bridge-nad-web_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.2.1. Creating a Linux bridge network attachment definition in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-linux-bridge-nad-cli_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.2.2. Creating a Linux bridge network attachment definition in the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vm-for-linux-bridge-network" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.3.3. Configuring the virtual machine for a Linux bridge network
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.3.3. Configuring the virtual machine for a Linux bridge network"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.3.3. Configuring the virtual machine for a Linux bridge network"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-creating-nic-web_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.3.1. Creating a NIC for a virtual machine in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-networking-wizard-fields-web_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.3.2. Networking fields
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-attaching-vm-additional-network-cli_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.3.3. Attaching a virtual machine to an additional network in the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#next-steps_virt-attaching-vm-multiple-networks" class="j-doc-nav__link ">
    10.18.3.4. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-attaching-vm-to-sriov-network" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.4. Connecting a virtual machine to an SR-IOV network
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.4. Connecting a virtual machine to an SR-IOV network"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.4. Connecting a virtual machine to an SR-IOV network"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-connecting-vm-to-sriov-network_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#nw-sriov-configuring-device_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.2. Configuring SR-IOV network devices
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#nw-sriov-network-attachment_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.3. Configuring SR-IOV additional network
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-attaching-vm-to-sriov-network_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.4. Connecting a virtual machine to an SR-IOV network
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-cluster-dpdk_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.5. Configuring a cluster for DPDK workloads
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vm-project-dpdk_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.6. Configuring a project for DPDK workloads
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vm-dpdk_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.7. Configuring a virtual machine for DPDK workloads
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#next-steps_virt-attaching-vm-to-sriov-network" class="j-doc-nav__link ">
    10.18.4.8. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-connecting-vm-to-service-mesh" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.5. Connecting a virtual machine to a service mesh
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.5. Connecting a virtual machine to a service mesh"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.5. Connecting a virtual machine to a service mesh"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-9" class="j-doc-nav__link ">
    10.18.5.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-vm-to-service-mesh_virt-connecting-vm-to-service-mesh" class="j-doc-nav__link ">
    10.18.5.2. Configuring a virtual machine for the service mesh
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-ip-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.6. Configuring IP addresses for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.6. Configuring IP addresses for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.6. Configuring IP addresses for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-ip-for-new-vm-cloud-init_virt-configuring-ip-for-vms" class="j-doc-nav__link ">
    10.18.6.1. Configuring an IP address for a new virtual machine using cloud-init
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-ip-of-vm-nic" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.7. Viewing the IP address of NICs on a virtual machine
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.7. Viewing the IP address of NICs on a virtual machine"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.7. Viewing the IP address of NICs on a virtual machine"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_virt-viewing-ip-of-vm-vnic" class="j-doc-nav__link ">
    10.18.7.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-vmi-ip-cli_virt-viewing-ip-of-vm-vnic" class="j-doc-nav__link ">
    10.18.7.2. Viewing the IP address of a virtual machine interface in the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-vmi-ip-web_virt-viewing-ip-of-vm-vnic" class="j-doc-nav__link ">
    10.18.7.3. Viewing the IP address of a virtual machine interface in the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-vm-secondary-network-fqdn" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.8. Accessing a virtual machine on a secondary network by using the cluster domain name
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.8. Accessing a virtual machine on a secondary network by using the cluster domain name"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.8. Accessing a virtual machine on a secondary network by using the cluster domain name"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-secondary-dns-server_virt-accessing-vm-secondary-network-fqdn" class="j-doc-nav__link ">
    10.18.8.1. Configuring DNS server for secondary networks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-connecting-vm-secondarynw-fqdn_virt-accessing-vm-secondary-network-fqdn" class="j-doc-nav__link ">
    10.18.8.2. Connecting to a virtual machine on a secondary network by using the cluster FQDN
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_accessing-vm-secondary-network-fqdn" class="j-doc-nav__link ">
    10.18.8.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-mac-address-pool-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.18.9. Using a MAC address pool for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.18.9. Using a MAC address pool for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.18.9. Using a MAC address pool for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-kubemacpool_virt-using-mac-address-pool-for-vms" class="j-doc-nav__link ">
    10.18.9.1. About KubeMacPool
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-disabling-mac-address-pool-for-namespace-cli_virt-using-mac-address-pool-for-vms" class="j-doc-nav__link ">
    10.18.9.2. Disabling a MAC address pool for a namespace in the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-reenabling-mac-address-pool-for-namespace-cli_virt-using-mac-address-pool-for-vms" class="j-doc-nav__link ">
    10.18.9.3. Re-enabling a MAC address pool for a namespace in the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtual-machine-disks" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19. Virtual machine disks
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19. Virtual machine disks"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19. Virtual machine disks"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-local-storage-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.1. Configuring local storage for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.1. Configuring local storage for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.1. Configuring local storage for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-hpp-basic-storage-pool_virt-configuring-local-storage-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.1.1. Creating a hostpath provisioner with a basic storage pool
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.1.1. Creating a hostpath provisioner with a basic storage pool"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.1.1. Creating a hostpath provisioner with a basic storage pool"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-creating-storage-classes_virt-configuring-local-storage-for-vms" class="j-doc-nav__link ">
    10.19.1.1.1. About creating storage classes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-storage-class-csi-driver_virt-configuring-local-storage-for-vms" class="j-doc-nav__link ">
    10.19.1.1.2. Creating a storage class for the CSI driver with the storagePools stanza
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-storage-pools-pvc-templates_virt-configuring-local-storage-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.1.2. About storage pools created with PVC templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.1.2. About storage pools created with PVC templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.1.2. About storage pools created with PVC templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-storage-pool-pvc-template_virt-configuring-local-storage-for-vms" class="j-doc-nav__link ">
    10.19.1.2.1. Creating a storage pool with a PVC template
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-data-volumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.2. Creating data volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.2. Creating data volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.2. Creating data volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-creating-data-volumes" class="j-doc-nav__link ">
    10.19.2.1. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-data-volumes-using-storage-api_virt-creating-data-volumes" class="j-doc-nav__link ">
    10.19.2.2. Creating data volumes using the storage API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-data-volumes-using-pvc-api_virt-creating-data-volumes" class="j-doc-nav__link ">
    10.19.2.3. Creating data volumes using the PVC API
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-customizing-storage-profile_virt-creating-data-volumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.2.4. Customizing the storage profile
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.2.4. Customizing the storage profile"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.2.4. Customizing the storage profile"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-customizing-storage-profile-default-cloning-strategy_virt-creating-data-volumes" class="j-doc-nav__link ">
    10.19.2.4.1. Setting a default cloning strategy using a storage profile
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_creating-data-volumes-using-profiles" class="j-doc-nav__link ">
    10.19.2.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-reserving-pvc-space-fs-overhead" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.3. Reserving PVC space for file system overhead
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.3. Reserving PVC space for file system overhead"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.3. Reserving PVC space for file system overhead"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-how-fs-overhead-affects-space-vm-disks_virt-reserving-pvc-space-fs-overhead" class="j-doc-nav__link ">
    10.19.3.1. How file system overhead affects space for virtual machine disks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-overriding-default-fs-overhead-value_virt-reserving-pvc-space-fs-overhead" class="j-doc-nav__link ">
    10.19.3.2. Overriding the default file system overhead value
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-cdi-for-namespace-resourcequota" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.4. Configuring CDI to work with namespaces that have a compute resource quota
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.4. Configuring CDI to work with namespaces that have a compute resource quota"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.4. Configuring CDI to work with namespaces that have a compute resource quota"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-cpu-and-memory-quota-namespace_virt-configuring-cdi-for-namespace-resourcequota" class="j-doc-nav__link ">
    10.19.4.1. About CPU and memory quotas in a namespace
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-overriding-cpu-and-memory-defaults_virt-configuring-cdi-for-namespace-resourcequota" class="j-doc-nav__link ">
    10.19.4.2. Overriding CPU and memory defaults
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-cdi-for-namespace-resourcequota_additional-resources" class="j-doc-nav__link ">
    10.19.4.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-virt-managing-data-volume-annotations" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.5. Managing data volume annotations
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.5. Managing data volume annotations"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.5. Managing data volume annotations"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-dv-annotations_virt-managing-data-volume-annotations" class="j-doc-nav__link ">
    10.19.5.1. Example: Data volume annotations
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-preallocation-for-datavolumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.6. Using preallocation for data volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.6. Using preallocation for data volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.6. Using preallocation for data volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-preallocation_virt-using-preallocation-for-datavolumes" class="j-doc-nav__link ">
    10.19.6.1. About preallocation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-preallocation-for-dv_virt-using-preallocation-for-datavolumes" class="j-doc-nav__link ">
    10.19.6.2. Enabling preallocation for a data volume
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-web" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.7. Uploading local disk images by using the web console
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.7. Uploading local disk images by using the web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.7. Uploading local disk images by using the web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-10" class="j-doc-nav__link ">
    10.19.7.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-web" class="j-doc-nav__link ">
    10.19.7.2. CDI supported operations matrix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-image-web_virt-uploading-local-disk-images-web" class="j-doc-nav__link ">
    10.19.7.3. Uploading an image file using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-web_additional-resources" class="j-doc-nav__link ">
    10.19.7.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-virtctl" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.8. Uploading local disk images by using the virtctl tool
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.8. Uploading local disk images by using the virtctl tool"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.8. Uploading local disk images by using the virtctl tool"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-11" class="j-doc-nav__link ">
    10.19.8.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-uploading-local-disk-images-virtctl" class="j-doc-nav__link ">
    10.19.8.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-an-upload-dv_virt-uploading-local-disk-images-virtctl" class="j-doc-nav__link ">
    10.19.8.3. Creating an upload data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-image-dv_virt-uploading-local-disk-images-virtctl" class="j-doc-nav__link ">
    10.19.8.4. Uploading a local disk image to a data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-virtctl" class="j-doc-nav__link ">
    10.19.8.5. CDI supported operations matrix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-virtctl_additional-resources" class="j-doc-nav__link ">
    10.19.8.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-block" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.9. Uploading a local disk image to a block storage persistent volume claim
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.9. Uploading a local disk image to a block storage persistent volume claim"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.9. Uploading a local disk image to a block storage persistent volume claim"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-12" class="j-doc-nav__link ">
    10.19.9.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.2. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-block-pvs_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.3. About block persistent volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-local-block-pv_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.4. Creating a local block persistent volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-an-upload-dv_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.5. Creating an upload data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-image-dv_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.6. Uploading a local disk image to a data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-block" class="j-doc-nav__link ">
    10.19.9.7. CDI supported operations matrix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-uploading-local-disk-images-block_additional-resources" class="j-doc-nav__link ">
    10.19.9.8. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-managing-vm-snapshots" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.10. Managing virtual machine snapshots
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.10. Managing virtual machine snapshots"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.10. Managing virtual machine snapshots"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vm-snapshots_virt-managing-vm-snapshots" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.10.1. About virtual machine snapshots
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.10.1. About virtual machine snapshots"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.10.1. About virtual machine snapshots"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#vm-snapshot-controller-and-crds_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.1.1. Virtual machine snapshot controller and custom resource definitions (CRDs)
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-qemu-guest-agent-on-linux-vm_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.2. Installing QEMU guest agent on a Linux virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#installing-qemu-guest-agent-on-windows-vm_virt-managing-vm-snapshots" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.10.3. Installing QEMU guest agent on a Windows virtual machine
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.10.3. Installing QEMU guest agent on a Windows virtual machine"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.10.3. Installing QEMU guest agent on a Windows virtual machine"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-virtio-drivers-existing-windows_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.3.1. Installing VirtIO drivers on an existing Windows virtual machine
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-snapshot-web_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.4. Creating a virtual machine snapshot in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-snapshot-cli_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.5. Creating a virtual machine snapshot in the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-verifying-online-snapshot-creation-with-snapshot-indications_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.6. Verifying online snapshot creation with snapshot indications
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-restoring-vm-from-snapshot-web_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.7. Restoring a virtual machine from a snapshot in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-restoring-vm-from-snapshot-cli_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.8. Restoring a virtual machine from a snapshot in the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vm-snapshot-web_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.9. Deleting a virtual machine snapshot in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vm-snapshot-cli_virt-managing-vm-snapshots" class="j-doc-nav__link ">
    10.19.10.10. Deleting a virtual machine snapshot in the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources" class="j-doc-nav__link ">
    10.19.10.11. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-moving-local-vm-disk-to-different-node" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.11. Moving a local virtual machine disk to a different node
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.11. Moving a local virtual machine disk to a different node"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.11. Moving a local virtual machine disk to a different node"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-local-volume-to-another-node_virt-moving-local-vm-disk-to-different-node" class="j-doc-nav__link ">
    10.19.11.1. Cloning a local volume to another node
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-expanding-virtual-storage-with-blank-disk-images" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.12. Expanding virtual storage by adding blank disk images
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.12. Expanding virtual storage by adding blank disk images"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.12. Expanding virtual storage by adding blank disk images"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-expanding-virtual-storage-with-blank-disk-images" class="j-doc-nav__link ">
    10.19.12.1. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-blank-disk-datavolumes_virt-expanding-virtual-storage-with-blank-disk-images" class="j-doc-nav__link ">
    10.19.12.2. Creating a blank disk image with data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-expanding-virtual-storage-with-blank-disk-images_additional-resources" class="j-doc-nav__link ">
    10.19.12.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-a-datavolume-using-smart-cloning" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.13. Cloning a data volume using smart-cloning
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.13. Cloning a data volume using smart-cloning"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.13. Cloning a data volume using smart-cloning"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-cloning-a-datavolume-using-smart-cloning" class="j-doc-nav__link ">
    10.19.13.1. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-smart-cloning_virt-cloning-a-datavolume-using-smart-cloning" class="j-doc-nav__link ">
    10.19.13.2. About smart-cloning
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-a-datavolume_virt-cloning-a-datavolume-using-smart-cloning" class="j-doc-nav__link ">
    10.19.13.3. Cloning a data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cloning-a-datavolume-using-smart-cloning_additional-resources" class="j-doc-nav__link ">
    10.19.13.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hot-plugging-virtual-disks" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.14. Hot plugging virtual disks
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.14. Hot plugging virtual disks"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.14. Hot plugging virtual disks"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-hot-plugging-virtual-disks_virt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.1. About hot plugging virtual disks
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-virtio-scsi_virt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.2. About virtio-scsi
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hot-plugging-a-virtual-disk-using-the-cli_virt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.3. Hot plugging a virtual disk using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hot-unplugging-a-virtual-disk-using-the-cli_virt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.4. Hot unplugging a virtual disk using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hot-plugging-a-virtual-disk-using-the-web-consolevirt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.5. Hot plugging a virtual disk using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-hot-unplugging-a-virtual-disk-using-the-web-consolevirt-hot-plugging-virtual-disks" class="j-doc-nav__link ">
    10.19.14.6. Hot unplugging a virtual disk using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-container-disks-with-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.15. Using container disks with virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.15. Using container disks with virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.15. Using container disks with virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-container-disks_virt-using-container-disks-with-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.15.1. About container disks
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.15.1. About container disks"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.15.1. About container disks"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#importing-a-container-disk-into-a-pvc-by-using-a-data-volume" class="j-doc-nav__link ">
    10.19.15.1.1. Importing a container disk into a PVC by using a data volume
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#attaching-a-container-disk-to-a-virtual-machine-as-a-literal-containerdisk-literal-volume" class="j-doc-nav__link ">
    10.19.15.1.2. Attaching a container disk to a virtual machine as a containerDisk volume
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-preparing-container-disk-for-vms_virt-using-container-disks-with-vms" class="j-doc-nav__link ">
    10.19.15.2. Preparing a container disk for virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-disabling-tls-for-registry_virt-using-container-disks-with-vms" class="j-doc-nav__link ">
    10.19.15.3. Disabling TLS for a container registry to use as insecure registry
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#next-steps-2" class="j-doc-nav__link ">
    10.19.15.4. Next steps
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-preparing-cdi-scratch-space" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.16. Preparing CDI scratch space
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.16. Preparing CDI scratch space"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.16. Preparing CDI scratch space"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-datavolumes_virt-preparing-cdi-scratch-space" class="j-doc-nav__link ">
    10.19.16.1. About data volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-scratch-space_virt-preparing-cdi-scratch-space" class="j-doc-nav__link ">
    10.19.16.2. About scratch space
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-operations-requiring-scratch-space_virt-preparing-cdi-scratch-space" class="j-doc-nav__link ">
    10.19.16.3. CDI operations that require scratch space
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-defining-storageclass_virt-preparing-cdi-scratch-space" class="j-doc-nav__link ">
    10.19.16.4. Defining a storage class
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cdi-supported-operations-matrix_virt-preparing-cdi-scratch-space" class="j-doc-nav__link ">
    10.19.16.5. CDI supported operations matrix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-preparing-cdi-scratch-space-additional-resources" class="j-doc-nav__link ">
    10.19.16.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-reusing-persistent-volumes" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.17. Re-using persistent volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.17. Re-using persistent volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.17. Re-using persistent volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-reclaiming-statically-provisioned-persistent-volumes_virt-reusing-statically-provisioned-persistent-volumes" class="j-doc-nav__link ">
    10.19.17.1. About reclaiming statically provisioned persistent volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-reclaiming-statically-provisioned-persistent-volumes_virt-reusing-statically-provisioned-persistent-volumes" class="j-doc-nav__link ">
    10.19.17.2. Reclaiming statically provisioned persistent volumes
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-disk-resizing" class="j-doc-nav__link j-doc-nav__link--has-children">
    10.19.18. Expanding a virtual machine disk
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "10.19.18. Expanding a virtual machine disk"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "10.19.18. Expanding a virtual machine disk"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enlarging-vm-disk_virt-expanding-vm-disk" class="j-doc-nav__link ">
    10.19.18.1. Enlarging a virtual machine disk
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-vm-disk-resizing" class="j-doc-nav__link ">
    10.19.18.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virtual-machine-templates" class="j-doc-nav__link j-doc-nav__link--has-children">
    11. Virtual machine templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11. Virtual machine templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11. Virtual machine templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.1. Creating virtual machine templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.1. Creating virtual machine templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.1. Creating virtual machine templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vm-templates_virt-creating-vm-template" class="j-doc-nav__link ">
    11.1.1. About virtual machine templates
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vms-and-boot-sources_virt-creating-vm-template" class="j-doc-nav__link ">
    11.1.2. About virtual machines and boot sources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-template_virt-creating-vm-template" class="j-doc-nav__link ">
    11.1.3. Creating a virtual machine template in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-a-boot-source-web_virt-creating-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.1.4. Adding a boot source for a virtual machine template
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.1.4. Adding a boot source for a virtual machine template"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.1.4. Adding a boot source for a virtual machine template"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-template-fields-for-boot-source_virt-creating-vm-template" class="j-doc-nav__link ">
    11.1.4.1. Virtual machine template fields for adding a boot source
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_creating-vm-template" class="j-doc-nav__link ">
    11.1.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.2. Editing virtual machine templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.2. Editing virtual machine templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.2. Editing virtual machine templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-editing-vm-web_virt-editing-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.2.1. Editing a virtual machine template in the web console
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.2.1. Editing a virtual machine template in the web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.2.1. Editing a virtual machine template in the web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-vm-add-nic_virt-editing-vm-template" class="j-doc-nav__link ">
    11.2.1.1. Adding a network interface to a virtual machine template
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-add-disk-to-vm_virt-editing-vm-template" class="j-doc-nav__link ">
    11.2.1.2. Adding a virtual disk to a virtual machine template
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-dedicated-resources-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.3. Enabling dedicated resources for virtual machine templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.3. Enabling dedicated resources for virtual machine templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.3. Enabling dedicated resources for virtual machine templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-dedicated-resources_virt-dedicated-resources-vm-template" class="j-doc-nav__link ">
    11.3.1. About dedicated resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites-13" class="j-doc-nav__link ">
    11.3.2. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-enabling-dedicated-resources_virt-dedicated-resources-vm-template" class="j-doc-nav__link ">
    11.3.3. Enabling dedicated resources for a virtual machine template
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deploying-vm-template-to-custom-namespace" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.4. Deploying a virtual machine template to a custom namespace
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.4. Deploying a virtual machine template to a custom namespace"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.4. Deploying a virtual machine template to a custom namespace"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-custom-namespace-for-templates_virt-deploying-vm-template-to-custom-namespace" class="j-doc-nav__link ">
    11.4.1. Creating a custom namespace for templates
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-templates-to-custom-namespace_virt-deploying-vm-template-to-custom-namespace" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.4.2. Adding templates to a custom namespace
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.4.2. Adding templates to a custom namespace"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.4.2. Adding templates to a custom namespace"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-templates-from-custom-namespace_virt-deploying-vm-template-to-custom-namespace" class="j-doc-nav__link ">
    11.4.2.1. Deleting templates from a custom namespace
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_deploying-vm-templates-to-custom-namespace" class="j-doc-nav__link ">
    11.4.2.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-vm-template" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.5. Deleting virtual machine templates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.5. Deleting virtual machine templates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.5. Deleting virtual machine templates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-deleting-template-wizard-web_virt-deleting-vm-template" class="j-doc-nav__link ">
    11.5.1. Deleting a virtual machine template in the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-and-using-boot-sources" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.6. Creating and using boot sources
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.6. Creating and using boot sources"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.6. Creating and using boot sources"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-vms-and-boot-sources_virt-creating-and-using-boot-sources" class="j-doc-nav__link ">
    11.6.1. About virtual machines and boot sources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-importing-rhel-image-boot-source-web_virt-creating-and-using-boot-sources" class="j-doc-nav__link ">
    11.6.2. Importing a RHEL image as a boot source
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-adding-a-boot-source-web_virt-creating-and-using-boot-sources" class="j-doc-nav__link ">
    11.6.3. Adding a boot source for a virtual machine template
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-a-vm-from-a-template-with-an-attached-boot-source_virt-creating-and-using-boot-sources" class="j-doc-nav__link ">
    11.6.4. Creating a virtual machine from a template with an attached boot source
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_creating-and-using-boot-sources" class="j-doc-nav__link ">
    11.6.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-automatic-bootsource-updates" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.7. Managing automatic boot source updates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.7. Managing automatic boot source updates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.7. Managing automatic boot source updates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-auto-bootsource-updates_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.1. About automatic boot source updates
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#enable-disable-auto-updates-all-system-boot-sources_virt-automatic-bootsource-updates" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.7.2. Enable or disable automatic updates for all system boot sources
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.7.2. Enable or disable automatic updates for all system boot sources"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.7.2. Enable or disable automatic updates for all system boot sources"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-managing-auto-update-all-system-boot-sources_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.2.1. Managing automatic updates for all system-defined boot sources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#enable-updates-custom-boot-sources_virt-automatic-bootsource-updates" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.7.3. Enable automatic updates for custom boot sources
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.7.3. Enable automatic updates for custom boot sources"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.7.3. Enable automatic updates for custom boot sources"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-storage-class-bootsource-update_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.3.1. Configuring a storage class for custom boot source updates
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-autoupdate-custom-bootsource_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.3.2. Enabling automatic updates for custom boot sources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#disable-auto-updates-specific-boot-source_virt-automatic-bootsource-updates" class="j-doc-nav__link j-doc-nav__link--has-children">
    11.7.4. Disable automatic updates for a specific boot source
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "11.7.4. Disable automatic updates for a specific boot source"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "11.7.4. Disable automatic updates for a specific boot source"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-disable-auto-updates-single-boot-source_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.4.1. Disabling automatic updates for a single boot source
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-verify-status-bootsource-update_virt-automatic-bootsource-updates" class="j-doc-nav__link ">
    11.7.5. Verifying the status of a boot source
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#live-migration" class="j-doc-nav__link j-doc-nav__link--has-children">
    12. Live migration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12. Live migration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12. Live migration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-live-migration" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.1. Virtual machine live migration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.1. Virtual machine live migration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.1. Virtual machine live migration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-live-migration_virt-live-migration" class="j-doc-nav__link ">
    12.1.1. About live migration
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-live-migration" class="j-doc-nav__link ">
    12.1.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-live-migration-limits" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.2. Live migration limits and timeouts
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.2. Live migration limits and timeouts"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.2. Live migration limits and timeouts"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-live-migration-limits_virt-live-migration-limits" class="j-doc-nav__link ">
    12.2.1. Configuring live migration limits and timeouts
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-live-migration-limits-ref_virt-live-migration-limits" class="j-doc-nav__link ">
    12.2.2. Cluster-wide live migration limits and timeouts
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-migrate-vmi" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.3. Migrating a virtual machine instance to another node
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.3. Migrating a virtual machine instance to another node"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.3. Migrating a virtual machine instance to another node"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-initiating-vm-migration-web_virt-migrate-vmi" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.3.1. Initiating live migration of a virtual machine instance in the web console
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.3.1. Initiating live migration of a virtual machine instance in the web console"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.3.1. Initiating live migration of a virtual machine instance in the web console"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#monitoring-live-migration-by-using-the-web-console_virt-migrate-vmi" class="j-doc-nav__link ">
    12.3.1.1. Monitoring live migration by using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-initiating-vm-migration-cli_virt-migrate-vmi" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.3.2. Initiating live migration of a virtual machine instance in the CLI
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.3.2. Initiating live migration of a virtual machine instance in the CLI"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.3.2. Initiating live migration of a virtual machine instance in the CLI"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-monitoring-vm-migration-cli_virt-migrate-vmi" class="j-doc-nav__link ">
    12.3.2.1. Monitoring live migration of a virtual machine instance in the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-migrate-vmi_additional-resources" class="j-doc-nav__link ">
    12.3.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-migrating-vm-on-secondary-network" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.4. Migrating a virtual machine over a dedicated additional network
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.4. Migrating a virtual machine over a dedicated additional network"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.4. Migrating a virtual machine over a dedicated additional network"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-secondary-network-vm-live-migration_virt-migrating-vm-on-secondary-network" class="j-doc-nav__link ">
    12.4.1. Configuring a dedicated secondary network for virtual machine live migration
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-selecting-migration-network-ui_virt-migrating-vm-on-secondary-network" class="j-doc-nav__link ">
    12.4.2. Selecting a dedicated network by using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-migrating-vm-on-secondary-network" class="j-doc-nav__link ">
    12.4.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cancel-vmi-migration" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.5. Cancelling the live migration of a virtual machine instance
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.5. Cancelling the live migration of a virtual machine instance"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.5. Cancelling the live migration of a virtual machine instance"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cancelling-vm-migration-web_virt-cancel-vmi-migration" class="j-doc-nav__link ">
    12.5.1. Cancelling live migration of a virtual machine instance in the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-cancelling-vm-migration-cli_virt-cancel-vmi-migration" class="j-doc-nav__link ">
    12.5.2. Cancelling live migration of a virtual machine instance in the CLI
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vmi-eviction-strategy" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.6. Configuring virtual machine eviction strategy
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.6. Configuring virtual machine eviction strategy"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.6. Configuring virtual machine eviction strategy"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vm-live-migration-cli_virt-configuring-vmi-eviction-strategy" class="j-doc-nav__link ">
    12.6.1. Configuring custom virtual machines with the LiveMigration eviction strategy
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-live-migration-policies" class="j-doc-nav__link j-doc-nav__link--has-children">
    12.7. Configuring live migration policies
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "12.7. Configuring live migration policies"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "12.7. Configuring live migration policies"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-a-live-migration-policy_virt-live-migration" class="j-doc-nav__link ">
    12.7.1. Configuring a live migration policy from the command line
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#node-maintenance" class="j-doc-nav__link j-doc-nav__link--has-children">
    13. Node maintenance
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13. Node maintenance"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13. Node maintenance"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-maintenance" class="j-doc-nav__link j-doc-nav__link--has-children">
    13.1. About node maintenance
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13.1. About node maintenance"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13.1. About node maintenance"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-maintenance_virt-about-node-maintenance" class="j-doc-nav__link ">
    13.1.1. About node maintenance mode
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-maintaining-bare-metal-nodes_virt-about-node-maintenance" class="j-doc-nav__link ">
    13.1.2. Maintaining bare metal nodes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-about-node-maintenance" class="j-doc-nav__link ">
    13.1.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-automatic-certificates" class="j-doc-nav__link j-doc-nav__link--has-children">
    13.2. Automatic renewal of TLS certificates
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13.2. Automatic renewal of TLS certificates"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13.2. Automatic renewal of TLS certificates"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-automatic-certificates-renewal_virt-automatic-certificates" class="j-doc-nav__link ">
    13.2.1. TLS certificates automatic renewal schedules
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-managing-node-labeling-obsolete-cpu-models" class="j-doc-nav__link j-doc-nav__link--has-children">
    13.3. Managing node labeling for obsolete CPU models
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13.3. Managing node labeling for obsolete CPU models"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13.3. Managing node labeling for obsolete CPU models"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-labeling-obsolete-cpu-models_virt-managing-node-labeling-obsolete-cpu-models" class="j-doc-nav__link ">
    13.3.1. About node labeling for obsolete CPU models
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-node-labeling-cpu-features_virt-managing-node-labeling-obsolete-cpu-models" class="j-doc-nav__link ">
    13.3.2. About node labeling for CPU features
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-obsolete-cpu-models_virt-managing-node-labeling-obsolete-cpu-models" class="j-doc-nav__link ">
    13.3.3. Configuring obsolete CPU models
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-skip-node" class="j-doc-nav__link j-doc-nav__link--has-children">
    13.4. Preventing node reconciliation
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "13.4. Preventing node reconciliation"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "13.4. Preventing node reconciliation"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-skip-node_virt-preventing-node-reconciliation" class="j-doc-nav__link ">
    13.4.1. Using skip-node annotation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-preventing-node-reconciliation" class="j-doc-nav__link ">
    13.4.2. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#support" class="j-doc-nav__link j-doc-nav__link--has-children">
    14. Support
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14. Support"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14. Support"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-support-overview" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.1. Support overview
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.1. Support overview"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.1. Support overview"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-web-console_virt-support-overview" class="j-doc-nav__link ">
    14.1.1. Web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#collecting-data-for-red-hat-support_virt-support-overview" class="j-doc-nav__link ">
    14.1.2. Collecting data for Red Hat Support
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#monitoring_virt-support-overview" class="j-doc-nav__link ">
    14.1.3. Monitoring
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#troubleshooting_virt-support-overview" class="j-doc-nav__link ">
    14.1.4. Troubleshooting
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-collecting-virt-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.2. Collecting data for Red Hat Support
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.2. Collecting data for Red Hat Support"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.2. Collecting data for Red Hat Support"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-collecting-data-about-your-environment_virt-collecting-virt-data" class="j-doc-nav__link ">
    14.2.1. Collecting data about your environment
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-collecting-data-about-vms_virt-collecting-virt-data" class="j-doc-nav__link ">
    14.2.2. Collecting data about virtual machines
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-using-virt-must-gather_virt-collecting-virt-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.2.3. Using the must-gather tool for OpenShift Virtualization
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.2.3. Using the must-gather tool for OpenShift Virtualization"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.2.3. Using the must-gather tool for OpenShift Virtualization"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-must-gather-options_virt-collecting-virt-data" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.2.3.1. must-gather tool options
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.2.3.1. must-gather tool options"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.2.3.1. must-gather tool options"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#parameters" class="j-doc-nav__link ">
    14.2.3.1.1. Parameters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#usage-and-examples_virt-collecting-virt-data" class="j-doc-nav__link ">
    14.2.3.1.2. Usage and examples
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#monitoring" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3. Monitoring
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3. Monitoring"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3. Monitoring"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-monitoring-overview" class="j-doc-nav__link ">
    14.3.1. Monitoring overview
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-running-cluster-checkups" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.2. OpenShift Container Platform cluster checkup framework
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.2. OpenShift Container Platform cluster checkup framework"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.2. OpenShift Container Platform cluster checkup framework"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-cluster-checkup-framework_virt-running-cluster-checkups" class="j-doc-nav__link ">
    14.3.2.1. About the OpenShift Container Platform cluster checkup framework
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-measuring-latency-vm-secondary-network_virt-running-cluster-checkups" class="j-doc-nav__link ">
    14.3.2.2. Virtual machine latency checkup
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-checking-cluster-dpdk-readiness_virt-running-cluster-checkups" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.2.3. DPDK checkup
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.2.3. DPDK checkup"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.2.3. DPDK checkup"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-dpdk-config-map-parameters_virt-running-cluster-checkups" class="j-doc-nav__link ">
    14.3.2.3.1. DPDK checkup config map parameters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-building-vm-containerdisk-image_virt-running-cluster-checkups" class="j-doc-nav__link ">
    14.3.2.3.2. Building a container disk image for RHEL virtual machines
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_running-cluster-checkups" class="j-doc-nav__link ">
    14.3.2.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-prometheus-queries" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.3. Prometheus queries for virtual resources
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.3. Prometheus queries for virtual resources"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.3. Prometheus queries for virtual resources"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#prerequisites_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#about-querying-metrics_virt-prometheus-queries" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.3.2. Querying metrics
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.3.2. Querying metrics"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.3.2. Querying metrics"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#querying-metrics-for-all-projects-as-an-administrator_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.2.1. Querying metrics for all projects as a cluster administrator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#querying-metrics-for-user-defined-projects-as-a-developer_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.2.2. Querying metrics for user-defined projects as a developer
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-querying-metrics_virt-prometheus-queries" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.3.3. Virtualization metrics
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.3.3. Virtualization metrics"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.3.3. Virtualization metrics"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-promql-vcpu-metrics_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.1. vCPU metrics
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-promql-network-metrics_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.2. Network metrics
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-promql-storage-metrics_virt-prometheus-queries" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.3.3.3. Storage metrics
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.3.3.3. Storage metrics"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.3.3.3. Storage metrics"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-storage-traffic_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.3.1. Storage-related traffic
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-storage-snapshot-data_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.3.2. Storage snapshot data
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-iops_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.3.3. I/O performance
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-promql-guest-memory-metrics_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.4. Guest memory swapping metrics
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-live-migration-metrics_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.3.5. Live migration metrics
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-prometheus-queries" class="j-doc-nav__link ">
    14.3.3.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.4. Exposing custom metrics for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.4. Exposing custom metrics for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.4. Exposing custom metrics for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-node-exporter-service_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link ">
    14.3.4.1. Configuring the node exporter service
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-vm-with-node-exporter-service_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link ">
    14.3.4.2. Configuring a virtual machine with the node exporter service
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-custom-monitoring-label-for-vms_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.4.3. Creating a custom monitoring label for virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.4.3. Creating a custom monitoring label for virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.4.3. Creating a custom monitoring label for virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-querying-the-node-exporter-service-for-metrics-_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link ">
    14.3.4.3.1. Querying the node-exporter service for metrics
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-creating-servicemonitor-resource-for-node-exporter_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.4.4. Creating a ServiceMonitor resource for the node exporter service
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.4.4. Creating a ServiceMonitor resource for the node exporter service"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.4.4. Creating a ServiceMonitor resource for the node exporter service"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-accessing-node-exporter-outside-cluster_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link ">
    14.3.4.4.1. Accessing the node exporter service outside the cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-exposing-custom-metrics-for-vms" class="j-doc-nav__link ">
    14.3.4.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-monitoring-vm-health" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.5. Virtual machine health checks
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.5. Virtual machine health checks"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.5. Virtual machine health checks"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-readiness-liveness-probes_virt-monitoring-vm-health" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.5.1. About readiness and liveness probes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.5.1. About readiness and liveness probes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.5.1. About readiness and liveness probes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-define-http-readiness-probe_virt-monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.1.1. Defining an HTTP readiness probe
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-define-tcp-readiness-probe_virt-monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.1.2. Defining a TCP readiness probe
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-define-http-liveness-probe_virt-monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.1.3. Defining an HTTP liveness probe
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#watchdog_virt-monitoring-vm-health" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.3.5.2. Defining a watchdog
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.3.5.2. Defining a watchdog"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.3.5.2. Defining a watchdog"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-defining-watchdog-device-vm" class="j-doc-nav__link ">
    14.3.5.2.1. Configuring a watchdog device for the virtual machine
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-watchdog-agent_virt-monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.2.2. Installing the watchdog agent on the guest
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-define-guest-agent-ping-probe_virt-monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.3. Defining a guest agent ping probe
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_monitoring-vm-health" class="j-doc-nav__link ">
    14.3.5.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.4. Troubleshooting
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.4. Troubleshooting"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.4. Troubleshooting"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#events_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.1. Events
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-logs_virt-troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.4.2. Logs
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.4.2. Logs"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.4.2. Logs"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-virtual-machine-logs-web_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.1. Viewing virtual machine logs with the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#viewing-virt-component-pods_virt-troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.4.2.2. Viewing OpenShift Virtualization pod logs
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.4.2.2. Viewing OpenShift Virtualization pod logs"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.4.2.2. Viewing OpenShift Virtualization pod logs"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-logs-cli_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.2.1. Viewing OpenShift Virtualization pod logs with the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-configuring-pod-log-verbosity_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.2.2. Configuring OpenShift Virtualization pod log verbosity
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-common-error-messages_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.2.3. Common error messages
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-viewing-logs-loki_virt-troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.4.2.3. Viewing aggregated OpenShift Virtualization logs with the LokiStack
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.4.2.3. Viewing aggregated OpenShift Virtualization logs with the LokiStack"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.4.2.3. Viewing aggregated OpenShift Virtualization logs with the LokiStack"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-loki-log-queries_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.3.1. OpenShift Virtualization LogQL queries
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.2.3.2. Additional resources for LokiStack and LogQL
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#troubleshooting-data-volumes_virt-troubleshooting" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.4.3. Troubleshooting data volumes
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.4.3. Troubleshooting data volumes"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.4.3. Troubleshooting data volumes"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-about-dv-conditions-and-events.adoc_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.3.1. About data volume conditions and events
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-analyzing-datavolume-conditions-and-events_virt-troubleshooting" class="j-doc-nav__link ">
    14.4.3.2. Analyzing data volume conditions and events
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbooks" class="j-doc-nav__link j-doc-nav__link--has-children">
    14.5. OpenShift Virtualization runbooks
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "14.5. OpenShift Virtualization runbooks"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "14.5. OpenShift Virtualization runbooks"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CDIDataImportCronOutdated" class="j-doc-nav__link ">
    14.5.1. CDIDataImportCronOutdated
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CDIDataVolumeUnusualRestartCount" class="j-doc-nav__link ">
    14.5.2. CDIDataVolumeUnusualRestartCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CDINotReady" class="j-doc-nav__link ">
    14.5.3. CDINotReady
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CDIOperatorDown" class="j-doc-nav__link ">
    14.5.4. CDIOperatorDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CDIStorageProfilesIncomplete" class="j-doc-nav__link ">
    14.5.5. CDIStorageProfilesIncomplete
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-CnaoDown" class="j-doc-nav__link ">
    14.5.6. CnaoDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-HPPNotReady" class="j-doc-nav__link ">
    14.5.7. HPPNotReady
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-HPPOperatorDown" class="j-doc-nav__link ">
    14.5.8. HPPOperatorDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-HPPSharingPoolPathWithOS" class="j-doc-nav__link ">
    14.5.9. HPPSharingPoolPathWithOS
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubeMacPoolDown" class="j-doc-nav__link ">
    14.5.10. KubeMacPoolDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubeMacPoolDuplicateMacsFound" class="j-doc-nav__link ">
    14.5.11. KubeMacPoolDuplicateMacsFound
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-kubevirtcomponentexceedsrequestedcpu_virt-runbooks" class="j-doc-nav__link ">
    14.5.12. KubeVirtComponentExceedsRequestedCPU
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubeVirtComponentExceedsRequestedMemory" class="j-doc-nav__link ">
    14.5.13. KubeVirtComponentExceedsRequestedMemory
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubevirtHyperconvergedClusterOperatorCRModification" class="j-doc-nav__link ">
    14.5.14. KubevirtHyperconvergedClusterOperatorCRModification
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubevirtHyperconvergedClusterOperatorInstallationNotCompletedAlert" class="j-doc-nav__link ">
    14.5.15. KubevirtHyperconvergedClusterOperatorInstallationNotCompletedAlert
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubevirtHyperconvergedClusterOperatorUSModification" class="j-doc-nav__link ">
    14.5.16. KubevirtHyperconvergedClusterOperatorUSModification
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubevirtVmHighMemoryUsage" class="j-doc-nav__link ">
    14.5.17. KubevirtVmHighMemoryUsage
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-KubeVirtVMIExcessiveMigrations" class="j-doc-nav__link ">
    14.5.18. KubeVirtVMIExcessiveMigrations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowKVMNodesCount" class="j-doc-nav__link ">
    14.5.19. LowKVMNodesCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowReadyVirtControllersCount" class="j-doc-nav__link ">
    14.5.20. LowReadyVirtControllersCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowReadyVirtOperatorsCount" class="j-doc-nav__link ">
    14.5.21. LowReadyVirtOperatorsCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowVirtAPICount" class="j-doc-nav__link ">
    14.5.22. LowVirtAPICount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowVirtControllersCount" class="j-doc-nav__link ">
    14.5.23. LowVirtControllersCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-LowVirtOperatorCount" class="j-doc-nav__link ">
    14.5.24. LowVirtOperatorCount
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-NetworkAddonsConfigNotReady" class="j-doc-nav__link ">
    14.5.25. NetworkAddonsConfigNotReady
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-NoLeadingVirtOperator" class="j-doc-nav__link ">
    14.5.26. NoLeadingVirtOperator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-NoReadyVirtController" class="j-doc-nav__link ">
    14.5.27. NoReadyVirtController
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-NoReadyVirtOperator" class="j-doc-nav__link ">
    14.5.28. NoReadyVirtOperator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-OrphanedVirtualMachineInstances" class="j-doc-nav__link ">
    14.5.29. OrphanedVirtualMachineInstances
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-OutdatedVirtualMachineInstanceWorkloads" class="j-doc-nav__link ">
    14.5.30. OutdatedVirtualMachineInstanceWorkloads
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-SSPCommonTemplatesModificationReverted" class="j-doc-nav__link ">
    14.5.31. SSPCommonTemplatesModificationReverted
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-SSPDown" class="j-doc-nav__link ">
    14.5.32. SSPDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-SSPFailingToReconcile" class="j-doc-nav__link ">
    14.5.33. SSPFailingToReconcile
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-SSPHighRateRejectedVms" class="j-doc-nav__link ">
    14.5.34. SSPHighRateRejectedVms
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-SSPTemplateValidatorDown" class="j-doc-nav__link ">
    14.5.35. SSPTemplateValidatorDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtAPIDown" class="j-doc-nav__link ">
    14.5.36. VirtAPIDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtApiRESTErrorsBurst" class="j-doc-nav__link ">
    14.5.37. VirtApiRESTErrorsBurst
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtApiRESTErrorsHigh" class="j-doc-nav__link ">
    14.5.38. VirtApiRESTErrorsHigh
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtControllerDown" class="j-doc-nav__link ">
    14.5.39. VirtControllerDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtControllerRESTErrorsBurst" class="j-doc-nav__link ">
    14.5.40. VirtControllerRESTErrorsBurst
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtControllerRESTErrorsHigh" class="j-doc-nav__link ">
    14.5.41. VirtControllerRESTErrorsHigh
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtHandlerDaemonSetRolloutFailing" class="j-doc-nav__link ">
    14.5.42. VirtHandlerDaemonSetRolloutFailing
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtHandlerRESTErrorsBurst" class="j-doc-nav__link ">
    14.5.43. VirtHandlerRESTErrorsBurst
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtHandlerRESTErrorsHigh" class="j-doc-nav__link ">
    14.5.44. VirtHandlerRESTErrorsHigh
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtOperatorDown" class="j-doc-nav__link ">
    14.5.45. VirtOperatorDown
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtOperatorRESTErrorsBurst" class="j-doc-nav__link ">
    14.5.46. VirtOperatorRESTErrorsBurst
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VirtOperatorRESTErrorsHigh" class="j-doc-nav__link ">
    14.5.47. VirtOperatorRESTErrorsHigh
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-runbook-VMCannotBeEvicted" class="j-doc-nav__link ">
    14.5.48. VMCannotBeEvicted
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#backup-and-restore" class="j-doc-nav__link j-doc-nav__link--has-children">
    15. Backup and restore
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15. Backup and restore"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15. Backup and restore"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-installing-configuring-oadp" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.1. Installing and configuring OADP
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.1. Installing and configuring OADP"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.1. Installing and configuring OADP"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-installing-operator_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.1. Installing the OADP Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-about-backup-snapshot-locations_virt-installing-configuring-oadp" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.1.2. About backup and snapshot locations and their secrets
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.1.2. About backup and snapshot locations and their secrets"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.1.2. About backup and snapshot locations and their secrets"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-creating-default-secret_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.2.1. Creating a default Secret
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#configuring-dpa-ocs" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.1.3. Configuring the Data Protection Application
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.1.3. Configuring the Data Protection Application"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.1.3. Configuring the Data Protection Application"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-setting-resource-limits-and-requests_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.3.1. Setting Velero CPU and memory resource allocations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-self-signed-certificate_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.3.2. Enabling self-signed CA certificates
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-installing-dpa_virt-installing-configuring-oadp" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.1.4. Installing the Data Protection Application
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.1.4. Installing the Data Protection Application"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.1.4. Installing the Data Protection Application"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-enabling-csi-dpa_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.4.1. Enabling CSI in the DataProtectionApplication CR
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#uninstalling-oadp_virt-installing-configuring-oadp" class="j-doc-nav__link ">
    15.1.5. Uninstalling OADP
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-backup-restore-overview" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.2. Backing up and restoring virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.2. Backing up and restoring virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.2. Backing up and restoring virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-backup-restore-overview" class="j-doc-nav__link ">
    15.2.1. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-backing-up-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.3. Backing up virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.3. Backing up virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.3. Backing up virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-creating-backup-cr_virt-backing-up-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.3.1. Creating a Backup CR
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.3.1. Creating a Backup CR"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.3.1. Creating a Backup CR"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-backing-up-pvs-csi_virt-backing-up-vms" class="j-doc-nav__link ">
    15.3.1.1. Backing up persistent volumes with CSI snapshots
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-backing-up-applications-restic_virt-backing-up-vms" class="j-doc-nav__link ">
    15.3.1.2. Backing up applications with Restic
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-creating-backup-hooks_virt-backing-up-vms" class="j-doc-nav__link ">
    15.3.1.3. Creating backup hooks
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-scheduling-backups_virt-backing-up-vms" class="j-doc-nav__link ">
    15.3.2. Scheduling backups
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#additional-resources_virt-backing-up-vms" class="j-doc-nav__link ">
    15.3.3. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#virt-restoring-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.4. Restoring virtual machines
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.4. Restoring virtual machines"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.4. Restoring virtual machines"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-creating-restore-cr_virt-restoring-vms" class="j-doc-nav__link j-doc-nav__link--has-children">
    15.4.1. Creating a Restore CR
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "15.4.1. Creating a Restore CR"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "15.4.1. Creating a Restore CR"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#oadp-creating-restore-hooks_virt-restoring-vms" class="j-doc-nav__link ">
    15.4.1.1. Creating restore hooks
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization#idm140196955811984" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization" selected=''>
            English
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/virtualization" >
            한국어
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/virtualization" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/virtualization" >
            简体中文
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization">English</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/virtualization">한국어</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/virtualization">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/virtualization">简体中文</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/virtualization"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/virtualization/OpenShift_Container_Platform-4.13-Virtualization-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/virtualization">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/virtualization/OpenShift_Container_Platform-4.13-Virtualization-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner">
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization" selected=''>
            English
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/virtualization" >
            한국어
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/virtualization" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/virtualization" >
            简体中文
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization">English</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/virtualization">한국어</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/virtualization">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/virtualization">简体中文</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/virtualization"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/virtualization/OpenShift_Container_Platform-4.13-Virtualization-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/virtualization">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/virtualization/OpenShift_Container_Platform-4.13-Virtualization-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Virtualization</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140196985206832"><div class="titlepage"><div><div class="producttitle"><span class="productname">OpenShift Container Platform</span> <span class="productnumber">4.13</span></div><div><h2 class="subtitle">OpenShift Virtualization installation, usage, and release notes</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat OpenShift Documentation Team</span></div></div><div><a href="#idm140196955811984">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides information about how to use OpenShift Virtualization in OpenShift Container Platform.
			</div></div></div></div><hr/></div><section class="chapter" id="about-virt"><div class="titlepage"><div><div><h1 class="title">Chapter 1. About OpenShift Virtualization</h1></div></div></div><p>
			Learn about OpenShift Virtualization’s capabilities and support scope.
		</p><section class="section" id="virt-what-you-can-do-with-virt_about-virt"><div class="titlepage"><div><div><h2 class="title">1.1. What you can do with OpenShift Virtualization</h2></div></div></div><p>
				OpenShift Virtualization is an add-on to OpenShift Container Platform that allows you to run and manage virtual machine workloads alongside container workloads.
			</p><p>
				OpenShift Virtualization adds new objects into your OpenShift Container Platform cluster by using Kubernetes custom resources to enable virtualization tasks. These tasks include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Creating and managing Linux and Windows virtual machines (VMs)
					</li><li class="listitem">
						Running pod and VM workloads alongside each other in a cluster
					</li><li class="listitem">
						Connecting to virtual machines through a variety of consoles and CLI tools
					</li><li class="listitem">
						Importing and cloning existing virtual machines
					</li><li class="listitem">
						Managing network interface controllers and storage disks attached to virtual machines
					</li><li class="listitem">
						Live migrating virtual machines between nodes
					</li></ul></div><p>
				An enhanced web console provides a graphical portal to manage these virtualized resources alongside the OpenShift Container Platform cluster containers and infrastructure.
			</p><p>
				OpenShift Virtualization is designed and tested to work well with Red Hat OpenShift Data Foundation features.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you deploy OpenShift Virtualization with OpenShift Data Foundation, you must create a dedicated storage class for Windows virtual machine disks. See <a class="link" href="https://access.redhat.com/articles/6978371">Optimizing ODF PersistentVolumes for Windows VMs</a> for details.
				</p></div></div><p>
				You can use OpenShift Virtualization with the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#about-ovn-kubernetes">OVN-Kubernetes</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#about-openshift-sdn">OpenShift SDN</a>, or one of the other certified network plugins listed in <a class="link" href="https://access.redhat.com/articles/5436171">Certified OpenShift CNI Plug-ins</a>.
			</p><p>
				You can check your OpenShift Virtualization cluster for compliance issues by installing the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/security_and_compliance/#understanding-compliance">Compliance Operator</a> and running a scan with the <code class="literal">ocp4-moderate</code> and <code class="literal">ocp4-moderate-node</code> <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/security_and_compliance/#compliance-operator-supported-profiles">profiles</a>. The Compliance Operator uses OpenSCAP, a <a class="link" href="https://www.nist.gov/">NIST-certified tool</a>, to scan and enforce security policies.
			</p><section class="section" id="virt-supported-cluster-version_about-virt"><div class="titlepage"><div><div><h3 class="title">1.1.1. OpenShift Virtualization supported cluster version</h3></div></div></div><p>
					OpenShift Virtualization 4.13 is supported for use on OpenShift Container Platform 4.13 clusters. To use the latest z-stream release of OpenShift Virtualization, you must first upgrade to the latest version of OpenShift Container Platform.
				</p></section></section><section class="section" id="virt-about-storage-volumes-for-vm-disks_about-virt"><div class="titlepage"><div><div><h2 class="title">1.2. About storage volumes for virtual machine disks</h2></div></div></div><p>
				If you use the storage API with known storage providers, volume and access modes are selected automatically. However, if you use a storage class that does not have a storage profile, you must select the volume and access mode.
			</p><p>
				For best results, use <code class="literal">accessMode: ReadWriteMany</code> and <code class="literal">volumeMode: Block</code>. This is important for the following reasons:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The ReadWriteMany (RWX) access mode is required for live migration.
					</li><li class="listitem"><p class="simpara">
						The <code class="literal">Block</code> volume mode performs significantly better in comparison to the <code class="literal">Filesystem</code> volume mode. This is because the <code class="literal">Filesystem</code> volume mode uses more storage layers, including a file system layer and a disk image file. These layers are not necessary for VM disk storage.
					</p><p class="simpara">
						For example, if you use Red Hat OpenShift Data Foundation, Ceph RBD volumes are preferable to CephFS volumes.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You cannot live migrate virtual machines that use:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									A storage volume with ReadWriteOnce (RWO) access mode
								</li><li class="listitem">
									Passthrough features such as GPUs
								</li></ul></div><p>
							Do not set the <code class="literal">evictionStrategy</code> field to <code class="literal">LiveMigrate</code> for these virtual machines.
						</p></div></div></li></ul></div></section><section class="section" id="virt-sno-differences_about-virt"><div class="titlepage"><div><div><h2 class="title">1.3. Single-node OpenShift differences</h2></div></div></div><p>
				You can install OpenShift Virtualization on single-node OpenShift.
			</p><p>
				However, you should be aware that Single-node OpenShift does not support the following features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						High availability
					</li><li class="listitem">
						Pod disruption
					</li><li class="listitem">
						Live migration
					</li><li class="listitem">
						Virtual machines or templates that have an eviction strategy configured
					</li></ul></div></section><section class="section _additional-resources" id="additional-resources_about-virt"><div class="titlepage"><div><div><h2 class="title">1.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#openshift-storage-common-terms_storage-overview">Glossary of common terms for OpenShift Container Platform storage</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#install-sno-about-installing-on-a-single-node_install-sno-preparing">About single-node OpenShift</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.redhat.com/blog/using-the-openshift-assisted-installer-service-to-deploy-an-openshift-cluster-on-metal-and-vsphere">Assisted installer</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-local-storage-for-vms">Hostpath Provisioner (HPP)</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10/html-single/deploying_openshift_data_foundation_on_single_node_openshift_clusters/index#doc-wrapper">OpenShift Container Platform Data Foundation Logical Volume Manager Operator</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#priority-preemption-other_nodes-pods-priority">Pod disruption budgets</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration">Live migration</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-vmi-eviction-strategy">Eviction strategy</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/6994974">Tuning &amp; Scaling Guide</a>
					</li></ul></div></section></section><section class="chapter" id="virt-architecture"><div class="titlepage"><div><div><h1 class="title">Chapter 2. OpenShift Virtualization architecture</h1></div></div></div><p>
			Learn about OpenShift Virtualization architecture.
		</p><section class="section" id="virt-how-virt-works_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.1. How OpenShift Virtualization architecture works</h2></div></div></div><p>
				After you install OpenShift Virtualization, the Operator Lifecycle Manager (OLM) deploys operator pods for each component of OpenShift Virtualization:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Compute: <code class="literal">virt-operator</code>
					</li><li class="listitem">
						Storage: <code class="literal">cdi-operator</code>
					</li><li class="listitem">
						Network: <code class="literal">cluster-network-addons-operator</code>
					</li><li class="listitem">
						Scaling: <code class="literal">ssp-operator</code>
					</li><li class="listitem">
						Templating: <code class="literal">tekton-tasks-operator</code>
					</li></ul></div><p>
				OLM also deploys the <code class="literal">hyperconverged-cluster-operator</code> pod, which is responsible for the deployment, configuration, and life cycle of other components, and several helper pods: <code class="literal">hco-webhook</code>, and <code class="literal">hyperconverged-cluster-cli-download</code>.
			</p><p>
				After all operator pods are successfully deployed, you should create the <code class="literal">HyperConverged</code> custom resource (CR). The configurations set in the <code class="literal">HyperConverged</code> CR serve as the single source of truth and the entrypoint for OpenShift Virtualization, and guide the behavior of the CRs.
			</p><p>
				The <code class="literal">HyperConverged</code> CR creates corresponding CRs for the operators of all other components within its reconciliation loop. Each operator then creates resources such as daemon sets, config maps, and additional components for the OpenShift Virtualization control plane. For example, when the <code class="literal">hco-operator</code> creates the <code class="literal">KubeVirt</code> CR, the <code class="literal">virt-operator</code> reconciles it and create additional resources such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, and <code class="literal">virt-api</code>.
			</p><p>
				The OLM deploys the <code class="literal">hostpath-provisioner-operator</code>, but it is not functional until you create a <code class="literal">hostpath provisioner</code> (HPP) CR.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/bc9d58287306aef0f69431ceb85bfebe/cnv_components_main.png" alt="CNV Deployments"/></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://github.com/kubevirt/hyperconverged-cluster-operator/blob/main/docs/cluster-configuration.md">HyperConverged CR configuration</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-virtctl-commands_virt-using-the-cli-tools">Virtctl client commands</a>
					</li></ul></div></section><section class="section" id="virt-about-hco-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.2. About the hco-operator</h2></div></div></div><p>
				The <code class="literal">hco-operator</code> (HCO) provides a single entry point for deploying and managing OpenShift Virtualization and several helper operators with opinionated defaults. It also creates custom resources (CRs) for those operators.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/83fc85adcbd43f710a0d0ce14cc0f338/cnv_components_hco-operator.png" alt="hco-operator components"/></div></div><div class="table" id="idm140196986408896"><p class="title"><strong>Table 2.1. hco-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196996654640" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196996653088" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">deployment/hco-webhook</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								Validates the <code class="literal">HyperConverged</code> custom resource contents.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">deployment/hyperconverged-cluster-cli-download</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								Provides the <code class="literal">virtctl</code> tool binaries to the cluster so that you can download them directly from the cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">KubeVirt/kubevirt-kubevirt-hyperconverged</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								Contains all operators, CRs, and objects needed by OpenShift Virtualization.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">SSP/ssp-kubevirt-hyperconverged</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								An SSP CR. This is automatically created by the HCO.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">CDI/cdi-kubevirt-hyperconverged</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								A CDI CR. This is automatically created by the HCO.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196996654640"> <p>
								<code class="literal">NetworkAddonsConfig/cluster</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196996653088"> <p>
								A CR that instructs and is managed by the <code class="literal">cluster-network-addons-operator</code>.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-cdi-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.3. About the cdi-operator</h2></div></div></div><p>
				The <code class="literal">cdi-operator</code> manages the Containerized Data Importer (CDI), and its related resources, which imports a virtual machine (VM) image into a persistent volume claim (PVC) by using a data volume.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/94e34dec2412f854aba205cce5ac852b/cnv_components_cdi-operator.png" alt="cdi-operator components"/></div></div><div class="table" id="idm140196994036016"><p class="title"><strong>Table 2.2. cdi-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196994107536" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196994105984" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196994107536"> <p>
								<code class="literal">deployment/cdi-apiserver</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196994105984"> <p>
								Manages the authorization to upload VM disks into PVCs by issuing secure upload tokens.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196994107536"> <p>
								<code class="literal">deployment/cdi-uploadproxy</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196994105984"> <p>
								Directs external disk upload traffic to the appropriate upload server pod so that it can be written to the correct PVC. Requires a valid upload token.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196994107536"> <p>
								<code class="literal">pod/cdi-importer</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196994105984"> <p>
								Helper pod that imports a virtual machine image into a PVC when creating a data volume.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-cluster-network-addons-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.4. About the cluster-network-addons-operator</h2></div></div></div><p>
				The <code class="literal">cluster-network-addons-operator</code> deploys networking components on a cluster and manages the related resources for extended network functionality.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/d4f918d242395cd11e9780b35c9bb8f4/cnv_components_cluster-network-addons-operator.png" alt="cluster-network-addons-operator components"/></div></div><div class="table" id="idm140196975123024"><p class="title"><strong>Table 2.3. cluster-network-addons-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196985785568" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196985784016" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196985785568"> <p>
								<code class="literal">deployment/kubemacpool-cert-manager</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196985784016"> <p>
								Manages TLS certificates of Kubemacpool’s webhooks.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196985785568"> <p>
								<code class="literal">deployment/kubemacpool-mac-controller-manager</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196985784016"> <p>
								Provides a MAC address pooling service for virtual machine (VM) network interface cards (NICs).
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196985785568"> <p>
								<code class="literal">daemonset/bridge-marker</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196985784016"> <p>
								Marks network bridges available on nodes as node resources.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196985785568"> <p>
								<code class="literal">daemonset/kube-cni-linux-bridge-plugin</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196985784016"> <p>
								Installs CNI plugins on cluster nodes, enabling the attachment of VMs to Linux bridges through network attachment definitions.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-hpp-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.5. About the hostpath-provisioner-operator</h2></div></div></div><p>
				The <code class="literal">hostpath-provisioner-operator</code> deploys and manages the multi-node hostpath provisioner (HPP) and related resources.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/0fc5071df877b64f8d59dc5d793262ce/cnv_components_hpp-operator.png" alt="hpp-operator components"/></div></div><div class="table" id="idm140196995461568"><p class="title"><strong>Table 2.4. hostpath-provisioner-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196990905216" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196990903664" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196990905216"> <p>
								<code class="literal">deployment/hpp-pool-hpp-csi-pvc-block-&lt;worker_node_name&gt;</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196990903664"> <p>
								Provides a worker for each node where the hostpath provisioner (HPP) is designated to run. The pods mount the specified backing storage on the node.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196990905216"> <p>
								<code class="literal">daemonset/hostpath-provisioner-csi</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196990903664"> <p>
								Implements the Container Storage Interface (CSI) driver interface of the HPP.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196990905216"> <p>
								<code class="literal">daemonset/hostpath-provisioner</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196990903664"> <p>
								Implements the legacy driver interface of the HPP.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-ssp-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.6. About the ssp-operator</h2></div></div></div><p>
				The <code class="literal">ssp-operator</code> deploys the common templates, the related default boot sources, and the template validator.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/cf3b5600d66f7d0300e22813330f069f/cnv_components_ssp-operator.png" alt="ssp-operator components"/></div></div><div class="table" id="idm140196982770208"><p class="title"><strong>Table 2.5. ssp-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196987480896" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196987479344" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196987480896"> <p>
								<code class="literal">deployment/virt-template-validator</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196987479344"> <p>
								Checks <code class="literal">vm.kubevirt.io/validations</code> annotations on virtual machines created from templates, and rejects them if they are invalid.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-tekton-tasks-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.7. About the tekton-tasks-operator</h2></div></div></div><p>
				The <code class="literal">tekton-tasks-operator</code> deploys example pipelines showing the usage of OpenShift Pipelines for VMs. It also deploys additional OpenShift Pipeline tasks that allow users to create VMs from templates, copy and modify templates, and create data volumes.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/64791e3506b9828ddb8eeb902887015b/cnv_components_tekton-tasks-operator.png" alt="tekton-tasks-operator components"/></div></div><div class="table" id="idm140196993668832"><p class="title"><strong>Table 2.6. tekton-tasks-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196979301456" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196979299904" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/create-vm-from-template</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Creates a VM from a template.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/copy-template</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Copies a VM template.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/modify-vm-template</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Creates or removes a VM template.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/modify-data-object</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Creates or removes data volumes or data sources.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/cleanup-vm</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Runs a script or a command on a VM, then stops or deletes the VM afterward.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/disk-virt-customize</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Runs a <code class="literal">customize</code> script on a target PVC using <code class="literal">virt-customize</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/disk-virt-sysprep</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Runs a <code class="literal">sysprep</code> script on a target PVC by using <code class="literal">virt-sysprep</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196979301456"> <p>
								<code class="literal">deployment/wait-for-vmi-status</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196979299904"> <p>
								Waits for a specific VMI status, then fails or succeeds according to that status.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-virt-operator_virt-architecture"><div class="titlepage"><div><div><h2 class="title">2.8. About the virt-operator</h2></div></div></div><p>
				The <code class="literal">virt-operator</code> deploys, upgrades, and manages OpenShift Virtualization without disrupting current virtual machine (VM) workloads.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/ac70df070fd6059d06e410b5bbc1801b/cnv_components_virt-operator.png" alt="virt-operator components"/></div></div><div class="table" id="idm140196989866320"><p class="title"><strong>Table 2.7. virt-operator components</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196997024576" scope="col"><span class="strong strong"><strong>Component</strong></span></th><th align="left" valign="top" id="idm140196997023024" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196997024576"> <p>
								<code class="literal">deployment/virt-api</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196997023024"> <p>
								HTTP API server that serves as the entry point for all virtualization-related flows.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196997024576"> <p>
								<code class="literal">deployment/virt-controller</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196997023024"> <p>
								Observes the creation of a new VM instance object and creates a corresponding pod. When the pod is scheduled on a node, <code class="literal">virt-controller</code> updates the VM with the node name.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196997024576"> <p>
								<code class="literal">daemonset/virt-handler</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196997023024"> <p>
								Monitors any changes to a VM and instructs <code class="literal">virt-launcher</code> to perform the required operations. This component is node-specific.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140196997024576"> <p>
								<code class="literal">pod/virt-launcher</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140196997023024"> <p>
								Contains the VM that was created by the user as implemented by <code class="literal">libvirt</code> and <code class="literal">qemu</code>.
							</p>
							 </td></tr></tbody></table></div></div></section></section><section class="chapter" id="virt-getting-started"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Getting started with OpenShift Virtualization</h1></div></div></div><p>
			You can explore the features and functionalities of OpenShift Virtualization by installing and configuring a basic environment.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Cluster configuration procedures require <code class="literal">cluster-admin</code> privileges.
			</p></div></div><section class="section" id="planning-and-installing-virt_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">3.1. Planning and installing OpenShift Virtualization</h2></div></div></div><p>
				Plan and install OpenShift Virtualization on an OpenShift Container Platform cluster:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#virt-planning-bare-metal-cluster-for-ocp-virt_preparing-to-install-on-bare-metal">Plan your bare metal cluster for OpenShift Virtualization</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#preparing-cluster-for-virt">Prepare your cluster for OpenShift Virtualization</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-installing-virt-operator_installing-virt-web">Install the OpenShift Virtualization Operator</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#installing-virtctl_virt-using-the-cli-tools">Install the <code class="literal">virtctl</code> command line interface (CLI) tool</a>.
					</li></ul></div><h4 id="additional-resources_planning-and-installing">Planning and installation resources</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-storage-volumes-for-vm-disks_preparing-cluster-for-virt">About storage volumes for virtual machine disks</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#persistent-storage-csi">Using a CSI-enabled storage provider</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-local-storage-for-vms">Configuring local storage for virtual machines</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#installing-the-kubernetes-nmstate-operator-cli">Installing the Kubernetes NMState Operator</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-specifying-nodes-for-vms">Specifying nodes for virtual machines</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-virtctl-commands_virt-using-the-cli-tools"><code class="literal">Virtctl</code> commands</a>.
					</li></ul></div></section><section class="section" id="creating-and-managing-vms_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">3.2. Creating and managing virtual machines</h2></div></div></div><p>
				Create virtual machines (VMs) by using the web console:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-quick-creating-vm_virt-create-vms">Quick create a VM</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-vm-custom-template_virt-create-vms">Customize a template to create a VM</a>.
					</li></ul></div><p>
				Connect to VMs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Connect to the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-vm-serial-console-web_virt-accessing-vm-consoles">serial console</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-connecting-vnc-console_virt-accessing-vm-consoles">VNC console</a> of a VM by using the web console.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-vmi-ssh_virt-accessing-vm-consoles">Connect to a VM by using SSH</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-vm-rdp-console-web_virt-accessing-vm-consoles">Connect to a Windows VM by using RDP</a>.
					</li></ul></div><p>
				Manage VMs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-controlling-vm-states">Stop, start, pause, and restart a VM by using the web console</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-virtctl-commands_virt-using-the-cli-tools">Manage a VM, expose a port, or connect to the serial console by using the <code class="literal">virtctl</code> CLI tool</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-exported-vm-manifests_virt-exporting-vms">Export VMs</a>.
					</li></ul></div></section><section class="section" id="next-steps_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">3.3. Next steps</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Connect the VMs to secondary networks:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-attaching-vm-multiple-networks">Connect a VM to a Linux bridge network</a>.
							</li><li class="listitem"><p class="simpara">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-attaching-vm-to-sriov-network">Connect a VM to an SR-IOV network</a>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									VMs are connected to the pod network by default. You must configure a secondary network, such as Linux bridge or SR-IOV, and then add the network to the VM configuration.
								</p></div></div></li></ul></div></li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration">Live migrate VMs</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-backup-restore-overview">Back up and restore VMs</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/6994974">Tune and scale your cluster</a>
					</li></ul></div></section></section><section class="chapter" id="virt-web-console-overview"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Web console overview</h1></div></div></div><p>
			The <span class="strong strong"><strong>Virtualization</strong></span> section of the OpenShift Container Platform web console contains the following pages for managing and monitoring your OpenShift Virtualization environment.
		</p><div class="table" id="idm140196978335744"><p class="title"><strong>Table 4.1. Virtualization pages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196982973472" scope="col">Page</th><th align="left" valign="top" id="idm140196982972384" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-page">Overview page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Manage and monitor the OpenShift Virtualization environment.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-catalog-page">Catalog page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Create VirtualMachines from a catalog of templates.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachines-page">VirtualMachines page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Configure and monitor VirtualMachines.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-templates-page">Templates page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Create and manage templates.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-datasources-page">DataSources page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Create and manage DataSources for VirtualMachine boot sources.
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196982973472"> <p>
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-migrationpolicies-page">MigrationPolicies page</a>
						</p>
						 </td><td align="left" valign="top" headers="idm140196982972384"> <p>
							Create and manage MigrationPolicies for workloads.
						</p>
						 </td></tr></tbody></table></div></div><div class="table" id="idm140196975581632"><p class="title"><strong>Table 4.2. Key</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196974732944" scope="col">Icon</th><th align="left" valign="top" id="idm140196974731856" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196974732944"> <p>
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/76e8a6ee3665832fa88459dbeec545b9/icon-pencil.png" width="20" alt="icon pencil"/></span>

						</p>
						 </td><td align="left" valign="top" headers="idm140196974731856"> <p>
							Edit icon
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140196974732944"> <p>
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>

						</p>
						 </td><td align="left" valign="top" headers="idm140196974731856"> <p>
							Link icon
						</p>
						 </td></tr></tbody></table></div></div><section class="section" id="virtualization-overview-page"><div class="titlepage"><div><div><h2 class="title">4.1. Overview page</h2></div></div></div><p>
				The Overview page displays resources, metrics, migration progress, and cluster-level settings.
			</p><div class="example" id="idm140196987457360"><p class="title"><strong>Example 4.1. Overview page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196996592464" scope="col">Element</th><th align="left" valign="top" id="idm140196996591376" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196996592464"> <p>
									<span class="strong strong"><strong>Download virtctl</strong></span> <span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>

								</p>
								 </td><td align="left" valign="top" headers="idm140196996591376"> <p>
									Download the <code class="literal">virtctl</code> command line tool to manage resources.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196996592464"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-overview"><span class="strong strong"><strong>Overview</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196996591376"> <p>
									Resources, usage, alerts, and status
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196996592464"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-top-consumers"><span class="strong strong"><strong>Top consumers</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196996591376"> <p>
									Top consumers of CPU, memory, and storage resources
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196996592464"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-migrations"><span class="strong strong"><strong>Migrations</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196996591376"> <p>
									Status of live migrations
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196996592464"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-settings"><span class="strong strong"><strong>Settings</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196996591376"> <p>
									Cluster-wide settings, including live migration limits and user permissions
								</p>
								 </td></tr></tbody></table></div></div></div><section class="section" id="virtualization-overview-overview"><div class="titlepage"><div><div><h3 class="title">4.1.1. Overview tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Overview</strong></span> tab displays resources, usage, alerts, and status.
				</p><div class="example" id="idm140196990247216"><p class="title"><strong>Example 4.2. <span class="strong strong">Overview</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196990662128" scope="col">Element</th><th align="left" valign="top" id="idm140196979741024" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>Getting started resources</strong></span> card
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="strong strong"><strong>Quick Starts</strong></span> tile: Learn how to create, import, and run VirtualMachines with step-by-step instructions and tasks.
											</li><li class="listitem">
												<span class="strong strong"><strong>Feature highlights</strong></span> tile: Read the latest information about key virtualization features.
											</li><li class="listitem">
												<span class="strong strong"><strong>Related operators</strong></span> tile: Install Operators such as the Kubernetes NMState Operator or the OpenShift Data Foundation Operator.
											</li></ul></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>VirtualMachines</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										Number of VirtualMachines, with a chart showing the last 7 days' trend
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>vCPU usage</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										vCPU usage, with a chart showing the last 7 days' trend
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>Memory</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										Memory usage, with a chart showing the last 7 days' trend
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>Storage</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										Storage usage, with a chart showing the last 7 days' trend
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>Alerts</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										OpenShift Virtualization alerts, grouped by severity
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>VirtualMachine statuses</strong></span> tile
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										Number of VirtualMachines, grouped by status
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196990662128"> <p>
										<span class="strong strong"><strong>VirtualMachines per template</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196979741024"> <p>
										Number of VirtualMachines created from templates, grouped by template name
									</p>
									 </td></tr></tbody></table></div></div></div></section><section class="section" id="virtualization-overview-top-consumers"><div class="titlepage"><div><div><h3 class="title">4.1.2. Top consumers tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Top consumers</strong></span> tab displays the top consumers of CPU, memory, and storage.
				</p><div class="example" id="idm140196994751568"><p class="title"><strong>Example 4.3. <span class="strong strong">Top consumers</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196973195104" scope="col">Element</th><th align="left" valign="top" id="idm140196973194016" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>View virtualization dashboard</strong></span> <span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>

									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										Link to <span class="strong strong"><strong>Observe → Dashboards</strong></span>, which displays the top consumers for OpenShift Virtualization
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Time period</strong></span> list
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										Select a time period to filter the results.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Top consumers</strong></span> list
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										Select the number of top consumers to filter the results.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>CPU</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest CPU usage
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Memory</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest memory usage
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Memory swap traffic</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest memory swap traffic
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>vCPU wait</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest vCPU wait periods
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Storage throughput</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest storage throughput usage
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973195104"> <p>
										<span class="strong strong"><strong>Storage IOPS</strong></span> chart
									</p>
									 </td><td align="left" valign="top" headers="idm140196973194016"> <p>
										VirtualMachines with the highest storage input/output operations per second usage
									</p>
									 </td></tr></tbody></table></div></div></div></section><section class="section" id="virtualization-overview-migrations"><div class="titlepage"><div><div><h3 class="title">4.1.3. Migrations tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Migrations</strong></span> tab displays the status of VirtualMachineInstance migrations.
				</p><div class="example" id="idm140196998587648"><p class="title"><strong>Example 4.4. <span class="strong strong">Migrations</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196979048416" scope="col">Element</th><th align="left" valign="top" id="idm140196979047328" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196979048416"> <p>
										<span class="strong strong"><strong>Time period</strong></span> list
									</p>
									 </td><td align="left" valign="top" headers="idm140196979047328"> <p>
										Select a time period to filter VirtualMachineInstanceMigrations.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979048416"> <p>
										<span class="strong strong"><strong>VirtualMachineInstanceMigrations</strong></span> table
									</p>
									 </td><td align="left" valign="top" headers="idm140196979047328"> <p>
										List of VirtualMachineInstance migrations
									</p>
									 </td></tr></tbody></table></div></div></div></section><section class="section" id="virtualization-overview-settings"><div class="titlepage"><div><div><h3 class="title">4.1.4. Settings tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Settings</strong></span> tab displays cluster-wide settings on the following tabs:
				</p><div class="table" id="idm140196992709824"><p class="title"><strong>Table 4.3. Tabs on <span class="strong strong">Settings</span> tab</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196993077600" scope="col">Tab</th><th align="left" valign="top" id="idm140196993980048" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196993077600"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualization-settings-general"><span class="strong strong"><strong>General</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196993980048"> <p>
									OpenShift Virtualization version and update status
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196993077600"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualization-settings-live-migration"><span class="strong strong"><strong>Live migration</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196993980048"> <p>
									Live migration limits and network settings
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196993077600"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualization-settings-templates-project"><span class="strong strong"><strong>Templates project</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196993980048"> <p>
									Project for Red Hat templates
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196993077600"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualization-settings-user-permissions"><span class="strong strong"><strong>User permissions</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196993980048"> <p>
									Cluster-wide user permissions
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="ui-virtualization-settings-general"><div class="titlepage"><div><div><h4 class="title">4.1.4.1. General tab</h4></div></div></div><p>
						The <span class="strong strong"><strong>General</strong></span> tab displays the OpenShift Virtualization version and update status.
					</p><div class="example" id="idm140196991461152"><p class="title"><strong>Example 4.5. <span class="strong strong">General</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196983934608" scope="col">Label</th><th align="left" valign="top" id="idm140196983933520" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196983934608"> <p>
											Service name
										</p>
										 </td><td align="left" valign="top" headers="idm140196983933520"> <p>
											OpenShift Virtualization
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983934608"> <p>
											Provider
										</p>
										 </td><td align="left" valign="top" headers="idm140196983933520"> <p>
											Red Hat
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983934608"> <p>
											Installed version
										</p>
										 </td><td align="left" valign="top" headers="idm140196983933520"> <p>
											4.13.4
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983934608"> <p>
											Update status
										</p>
										 </td><td align="left" valign="top" headers="idm140196983933520"> <p>
											Example: <code class="literal">Up to date</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983934608"> <p>
											Channel
										</p>
										 </td><td align="left" valign="top" headers="idm140196983933520"> <p>
											Channel selected for updates
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualization-settings-live-migration"><div class="titlepage"><div><div><h4 class="title">4.1.4.2. Live migration tab</h4></div></div></div><p>
						You can configure live migration on the <span class="strong strong"><strong>Live migration</strong></span> tab.
					</p><div class="example" id="idm140196994785808"><p class="title"><strong>Example 4.6. <span class="strong strong">Live migration</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196981462704" scope="col">Element</th><th align="left" valign="top" id="idm140196981461616" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196981462704"> <p>
											<span class="strong strong"><strong>Max. migrations per cluster</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196981461616"> <p>
											Select the maximum number of live migrations per cluster.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196981462704"> <p>
											<span class="strong strong"><strong>Max. migrations per node</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196981461616"> <p>
											Select the maximum number of live migrations per node.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196981462704"> <p>
											<span class="strong strong"><strong>Live migration network</strong></span> list
										</p>
										 </td><td align="left" valign="top" headers="idm140196981461616"> <p>
											Select a dedicated secondary network for live migration.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualization-settings-templates-project"><div class="titlepage"><div><div><h4 class="title">4.1.4.3. Templates project tab</h4></div></div></div><p>
						You can select a project for templates on the <span class="strong strong"><strong>Templates project</strong></span> tab.
					</p><div class="example" id="idm140196988376528"><p class="title"><strong>Example 4.7. <span class="strong strong">Templates project</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196990465712" scope="col">Element</th><th align="left" valign="top" id="idm140196990464624" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196990465712"> <p>
											<span class="strong strong"><strong>Project</strong></span> list
										</p>
										 </td><td align="left" valign="top" headers="idm140196990464624"> <p>
											Select a project in which to store Red Hat templates. The default template project is <code class="literal">openshift</code>.
										</p>
										 <p>
											If you want to define multiple template projects, you must clone the templates on the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-templates-page">Templates page</a> for each project.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualization-settings-user-permissions"><div class="titlepage"><div><div><h4 class="title">4.1.4.4. User permissions tab</h4></div></div></div><p>
						The <span class="strong strong"><strong>User permissions</strong></span> tab displays cluster-wide user permissions for tasks.
					</p><div class="example" id="idm140196985897184"><p class="title"><strong>Example 4.8. <span class="strong strong">User permissions</span> tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196987578688" scope="col">Element</th><th align="left" valign="top" id="idm140196987577600" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196987578688"> <p>
											<span class="strong strong"><strong>User permissions</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196987577600"> <p>
											List of tasks, such as <span class="strong strong"><strong>Share templates</strong></span>, and permissions
										</p>
										 </td></tr></tbody></table></div></div></div></section></section></section><section class="section" id="ui-catalog-page"><div class="titlepage"><div><div><h2 class="title">4.2. Catalog page</h2></div></div></div><p>
				You can create a VirtualMachine by selecting a template or boot source on the Catalog page.
			</p><div class="example" id="idm140196990234480"><p class="title"><strong>Example 4.9. Catalog page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196991040688" scope="col">Element</th><th align="left" valign="top" id="idm140196991039600" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196991040688"> <p>
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-catalog-template_virt-web-console-overview"><span class="strong strong"><strong>Template catalog</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196991039600"> <p>
									Select a template to create a VirtualMachine from.
								</p>
								 </td></tr></tbody></table></div></div></div><section class="section" id="virtualization-catalog-template_virt-web-console-overview"><div class="titlepage"><div><div><h3 class="title">4.2.1. Template catalog tab</h3></div></div></div><div class="informalexample"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196995249184" scope="col">Element</th><th align="left" valign="top" id="idm140196995248096" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									<span class="strong strong"><strong>Template project</strong></span> list
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Select the project in which your templates are located.
								</p>
								 <p>
									By default, Red Hat templates are stored in the <code class="literal">openshift</code> project. You can edit the template project on the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualization-settings-templates-project"><span class="strong strong"><strong>Overview → Settings → Template project</strong></span> tab</a>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									<span class="strong strong"><strong>All items</strong></span>|<span class="strong strong"><strong>Default templates</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Click <span class="strong strong"><strong>Default templates</strong></span> to display only default templates.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									<span class="strong strong"><strong>Boot source available</strong></span> checkbox
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Select the checkbox to display templates with an available boot source.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									<span class="strong strong"><strong>Operating system</strong></span> checkboxes
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Select checkboxes to display templates with selected operating systems.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									<span class="strong strong"><strong>Workload</strong></span> checkboxes
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Select checkboxes to display templates with selected workloads.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									Search field
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Search templates by keyword.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196995249184"> <p>
									Template tiles
								</p>
								 </td><td align="left" valign="top" headers="idm140196995248096"> <p>
									Click a template tile to view template details and to create a VirtualMachine.
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section" id="ui-virtualmachines-page"><div class="titlepage"><div><div><h2 class="title">4.3. VirtualMachines page</h2></div></div></div><p>
				You can create and manage VirtualMachines on the VirtualMachines page.
			</p><div class="example" id="idm140196975611584"><p class="title"><strong>Example 4.10. VirtualMachines page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196987868128" scope="col">Element</th><th align="left" valign="top" id="idm140196969032896" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196987868128"> <p>
									<span class="strong strong"><strong>Create → From template</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969032896"> <p>
									Create a VirtualMachine on the <span class="strong strong"><strong>Catalog</strong></span> page → <span class="strong strong"><strong>Template catalog</strong></span> tab.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196987868128"> <p>
									<span class="strong strong"><strong>Create → From YAML</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969032896"> <p>
									Create a VirtualMachine by editing a YAML configuration file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196987868128"> <p>
									<span class="strong strong"><strong>Filter</strong></span> field
								</p>
								 </td><td align="left" valign="top" headers="idm140196969032896"> <p>
									Filter VirtualMachines by status, template, operating system, or node.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196987868128"> <p>
									Search field
								</p>
								 </td><td align="left" valign="top" headers="idm140196969032896"> <p>
									Search for VirtualMachines by name or by label.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196987868128"> <p>
									<span class="strong strong"><strong>VirtualMachines</strong></span> table
								</p>
								 </td><td align="left" valign="top" headers="idm140196969032896"> <p>
									List of VirtualMachines
								</p>
								 <p>
									Click the <span class="strong strong"><strong>Options</strong></span> menu 
									<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
									 beside a VirtualMachine to select <span class="strong strong"><strong>Stop</strong></span>, <span class="strong strong"><strong>Restart</strong></span>, <span class="strong strong"><strong>Pause</strong></span>, <span class="strong strong"><strong>Clone</strong></span>, <span class="strong strong"><strong>Migrate</strong></span>, <span class="strong strong"><strong>Copy SSH command</strong></span>, <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, or <span class="strong strong"><strong>Delete</strong></span>.
								</p>
								 <p>
									Click a VirtualMachine to navigate to the VirtualMachine details page.
								</p>
								 </td></tr></tbody></table></div></div></div><section class="section" id="ui-virtualmachine-details-page"><div class="titlepage"><div><div><h3 class="title">4.3.1. VirtualMachine details page</h3></div></div></div><p>
					You can configure a VirtualMachine on the VirtualMachine details page.
				</p><div class="example" id="idm140196991169104"><p class="title"><strong>Example 4.11. VirtualMachine details page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196979785552" scope="col">Element</th><th align="left" valign="top" id="idm140196979784464" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<span class="strong strong"><strong>Actions</strong></span> menu
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Click the <span class="strong strong"><strong>Actions</strong></span> menu to select <span class="strong strong"><strong>Stop</strong></span>, <span class="strong strong"><strong>Restart</strong></span>, <span class="strong strong"><strong>Pause</strong></span>, <span class="strong strong"><strong>Clone</strong></span>, <span class="strong strong"><strong>Migrate</strong></span>, <span class="strong strong"><strong>Copy SSH command</strong></span>, <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, or <span class="strong strong"><strong>Delete</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-overview"><span class="strong strong"><strong>Overview</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Resource usage, alerts, disks, and devices
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-details"><span class="strong strong"><strong>Details</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										VirtualMachine details and configurations
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-metrics"><span class="strong strong"><strong>Metrics</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Memory, CPU, storage, network, and migration metrics
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-yaml"><span class="strong strong"><strong>YAML</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										VirtualMachine YAML configuration file
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-configuration"><span class="strong strong"><strong>Configuration</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Contains the <span class="strong strong"><strong>Scheduling</strong></span>, <span class="strong strong"><strong>Environment</strong></span>, <span class="strong strong"><strong>Network interfaces</strong></span>, <span class="strong strong"><strong>Disks</strong></span>, and <span class="strong strong"><strong>Scripts</strong></span> tabs
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-scheduling"><span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Scheduling</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Scheduling a VirtualMachine to run on specific nodes
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-environment"><span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Environment</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Config map, secret, and service account management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-network-interfaces"><span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Network interfaces</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Network interfaces
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-disks"><span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Disks
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-scripts"><span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Scripts</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Cloud-init settings, SSH key for Linux VirtualMachines, Sysprep answer file for Windows VirtualMachines
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-events"><span class="strong strong"><strong>Events</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										VirtualMachine event stream
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-console"><span class="strong strong"><strong>Console</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Console session management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-snapshots"><span class="strong strong"><strong>Snapshots</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Snapshot management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196979785552"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-diagnostics"><span class="strong strong"><strong>Diagnostics</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196979784464"> <p>
										Status conditions and volume snapshot status
									</p>
									 </td></tr></tbody></table></div></div></div><section class="section" id="ui-virtualmachine-details-overview"><div class="titlepage"><div><div><h4 class="title">4.3.1.1. Overview tab</h4></div></div></div><p>
						The <span class="strong strong"><strong>Overview</strong></span> tab displays resource usage, alerts, and configuration information.
					</p><div class="example" id="idm140196996680560"><p class="title"><strong>Example 4.12. Overview tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196997220208" scope="col">Element</th><th align="left" valign="top" id="idm140196997219120" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Details</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											General VirtualMachine information
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Utilization</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											<span class="strong strong"><strong>CPU</strong></span>, <span class="strong strong"><strong>Memory</strong></span>, <span class="strong strong"><strong>Storage</strong></span>, and <span class="strong strong"><strong>Network transfer</strong></span> charts. By default, <span class="strong strong"><strong>Network transfer</strong></span> displays the sum of all networks. To view the breakdown for a specific network, click <span class="strong strong"><strong>Breakdown by network</strong></span>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Hardware devices</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											GPU and host devices
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Alerts</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											OpenShift Virtualization alerts, grouped by severity
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Snapshots</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											<span class="strong strong"><strong>Take snapshot</strong></span> <span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>
											 and <span class="strong strong"><strong>Snapshots</strong></span> table
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Network interfaces</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											<span class="strong strong"><strong>Network interfaces</strong></span> table
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997220208"> <p>
											<span class="strong strong"><strong>Disks</strong></span> tile
										</p>
										 </td><td align="left" valign="top" headers="idm140196997219120"> <p>
											<span class="strong strong"><strong>Disks</strong></span> table
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-details"><div class="titlepage"><div><div><h4 class="title">4.3.1.2. Details tab</h4></div></div></div><p>
						You can view information about the VirtualMachine and edit labels, annotations, and other metadata and on the <span class="strong strong"><strong>Details</strong></span> tab.
					</p><div class="example" id="idm140196993908736"><p class="title"><strong>Example 4.13. Details tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196978391904" scope="col">Element</th><th align="left" valign="top" id="idm140196978390816" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Name
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Namespace
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine namespace
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Labels
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to edit the labels.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Annotations
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to edit the annotations.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Description
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to enter a description.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Operating system
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Operating system name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											CPU|Memory
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to edit the CPU|Memory request.
										</p>
										 <p>
											The number of CPUs is calculated by using the following formula: <code class="literal">sockets * threads * cores</code>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Machine type
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine machine type
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Boot mode
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to edit the boot mode.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Start in pause mode
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to enable this setting.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Template
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Name of the template used to create the VirtualMachine
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Created at
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine creation date
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Owner
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine owner
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Status
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachine status
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Pod
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											<code class="literal">virt-launcher</code> pod name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											VirtualMachineInstance
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											VirtualMachineInstance name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Boot order
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to select a boot source.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											IP address
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											IP address of the VirtualMachine
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Hostname
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Hostname of the VirtualMachine
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Time zone
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Time zone of the VirtualMachine
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Node
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Node on which the VirtualMachine is running
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Workload profile
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to edit the workload profile.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											SSH using virtctl
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the copy icon to copy the <code class="literal">virtctl ssh</code> command to the clipboard.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											SSH service type options
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Select <span class="strong strong"><strong>SSH over LoadBalancer</strong></span> or <span class="strong strong"><strong>SSH over NodePort</strong></span>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											GPU devices
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to add a GPU device.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Host devices
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to add a host device.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Headless mode
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Click the edit icon to enable headless mode.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Services section
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Displays services if QEMU guest agent is installed.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196978391904"> <p>
											Active users section
										</p>
										 </td><td align="left" valign="top" headers="idm140196978390816"> <p>
											Displays active users if QEMU guest agent is installed.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-metrics"><div class="titlepage"><div><div><h4 class="title">4.3.1.3. Metrics tab</h4></div></div></div><p>
						The <span class="strong strong"><strong>Metrics</strong></span> tab displays memory, CPU, storage, network, and migration usage charts.
					</p><div class="example" id="idm140196978865072"><p class="title"><strong>Example 4.14. Metrics tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196993520592" scope="col">Element</th><th align="left" valign="top" id="idm140196993519504" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											<span class="strong strong"><strong>Time range</strong></span> list
										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											Select a time range to filter the results.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											<span class="strong strong"><strong>Virtualization dashboard</strong></span> <span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>

										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											Link to the <span class="strong strong"><strong>Workloads</strong></span> tab of the current project
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											Utilization section
										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											<span class="strong strong"><strong>Memory</strong></span> and <span class="strong strong"><strong>CPU</strong></span> charts
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											Storage section
										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											<span class="strong strong"><strong>Storage total read/write</strong></span> and <span class="strong strong"><strong>Storage IOPS total read/write</strong></span> charts
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											Network section
										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											<span class="strong strong"><strong>Network in</strong></span>, <span class="strong strong"><strong>Network out</strong></span>, <span class="strong strong"><strong>Network bandwidth</strong></span>, and <span class="strong strong"><strong>Network interface</strong></span> charts. Select <span class="strong strong"><strong>All networks</strong></span> or a specific network from the <span class="strong strong"><strong>Network interface</strong></span> dropdown.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196993520592"> <p>
											Migration section
										</p>
										 </td><td align="left" valign="top" headers="idm140196993519504"> <p>
											<span class="strong strong"><strong>Migration</strong></span> and <span class="strong strong"><strong>KV data transfer rate</strong></span> charts
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-yaml"><div class="titlepage"><div><div><h4 class="title">4.3.1.4. YAML tab</h4></div></div></div><p>
						You can configure the VirtualMachine by editing the YAML file on the <span class="strong strong"><strong>YAML</strong></span> tab.
					</p><div class="example" id="idm140196978959056"><p class="title"><strong>Example 4.15. YAML tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196984162112" scope="col">Element</th><th align="left" valign="top" id="idm140196984161024" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196984162112"> <p>
											<span class="strong strong"><strong>Save</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196984161024"> <p>
											Save changes to the YAML file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196984162112"> <p>
											<span class="strong strong"><strong>Reload</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196984161024"> <p>
											Discard your changes and reload the YAML file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196984162112"> <p>
											<span class="strong strong"><strong>Cancel</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196984161024"> <p>
											Exit the <span class="strong strong"><strong>YAML</strong></span> tab.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196984162112"> <p>
											<span class="strong strong"><strong>Download</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196984161024"> <p>
											Download the YAML file to your local machine.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-configuration"><div class="titlepage"><div><div><h4 class="title">4.3.1.5. Configuration tab</h4></div></div></div><p>
						You can configure scheduling, network interfaces, disks, and other options on the <span class="strong strong"><strong>Configuration</strong></span> tab.
					</p><div class="example" id="idm140196997504480"><p class="title"><strong>Example 4.16. Tabs on the Configuration tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196997499472" scope="col">Tab</th><th align="left" valign="top" id="idm140196984586224" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196997499472"> <p>
											<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-scheduling"><span class="strong strong"><strong>Scheduling</strong></span> tab</a>
										</p>
										 </td><td align="left" valign="top" headers="idm140196984586224"> <p>
											Scheduling a VirtualMachine to run on specific nodes
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997499472"> <p>
											<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-environment"><span class="strong strong"><strong>Environment</strong></span> tab</a>
										</p>
										 </td><td align="left" valign="top" headers="idm140196984586224"> <p>
											Config maps, secrets, and service accounts
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997499472"> <p>
											<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-network-interfaces"><span class="strong strong"><strong>Network interfaces</strong></span> tab</a>
										</p>
										 </td><td align="left" valign="top" headers="idm140196984586224"> <p>
											Network interfaces
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997499472"> <p>
											<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-disks"><span class="strong strong"><strong>Disks</strong></span> tab</a>
										</p>
										 </td><td align="left" valign="top" headers="idm140196984586224"> <p>
											Disks
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997499472"> <p>
											<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-scripts"><span class="strong strong"><strong>Scripts</strong></span> tab</a>
										</p>
										 </td><td align="left" valign="top" headers="idm140196984586224"> <p>
											Cloud-init settings, SSH key for Linux VirtualMachines, Sysprep answer file for Windows VirtualMachines
										</p>
										 </td></tr></tbody></table></div></div></div><section class="section" id="ui-virtualmachine-details-scheduling"><div class="titlepage"><div><div><h5 class="title">4.3.1.5.1. Scheduling tab</h5></div></div></div><p>
							You can configure VirtualMachines to run on specific nodes on the <span class="strong strong"><strong>Scheduling</strong></span> tab.
						</p><div class="example" id="idm140196974266896"><p class="title"><strong>Example 4.17. Scheduling tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196984635008" scope="col">Setting</th><th align="left" valign="top" id="idm140196984633920" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												<span class="strong strong"><strong>YAML</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												Node selector
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Click the edit icon to add a label to specify qualifying nodes.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												Tolerations
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Click the edit icon to add a toleration to specify qualifying nodes.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												Affinity rules
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Click the edit icon to add an affinity rule.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												<span class="strong strong"><strong>Descheduler</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Enable or disable the descheduler. The descheduler evicts a running pod so that the pod can be rescheduled onto a more suitable node.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												Dedicated resources
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Click the edit icon to select <span class="strong strong"><strong>Schedule this workload with dedicated resources (guaranteed policy)</strong></span>.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196984635008"> <p>
												Eviction strategy
											</p>
											 </td><td align="left" valign="top" headers="idm140196984633920"> <p>
												Click the edit icon to select <span class="strong strong"><strong>LiveMigrate</strong></span> as the VirtualMachineInstance eviction strategy.
											</p>
											 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-environment"><div class="titlepage"><div><div><h5 class="title">4.3.1.5.2. Environment tab</h5></div></div></div><p>
							You can manage config maps, secrets, and service accounts on the <span class="strong strong"><strong>Environment</strong></span> tab.
						</p><div class="example" id="idm140196991677744"><p class="title"><strong>Example 4.18. Environment tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196994062304" scope="col">Element</th><th align="left" valign="top" id="idm140196994061216" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196994062304"> <p>
												<span class="strong strong"><strong>YAML</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196994061216"> <p>
												Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196994062304"> <p>
												<span class="strong strong"><strong>Add Config Map, Secret or Service Account</strong></span> <span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/b2f615c5773936be3266ee275d750def/icon-link.png" width="20" alt="icon link"/></span>

											</p>
											 </td><td align="left" valign="top" headers="idm140196994061216"> <p>
												Click the link and select a config map, secret, or service account from the resource list.
											</p>
											 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-network-interfaces"><div class="titlepage"><div><div><h5 class="title">4.3.1.5.3. Network interfaces tab</h5></div></div></div><p>
							You can manage network interfaces on the <span class="strong strong"><strong>Network interfaces</strong></span> tab.
						</p><div class="example" id="idm140196978781584"><p class="title"><strong>Example 4.19. Network interfaces tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196992379984" scope="col">Setting</th><th align="left" valign="top" id="idm140196992378896" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196992379984"> <p>
												<span class="strong strong"><strong>YAML</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196992378896"> <p>
												Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196992379984"> <p>
												<span class="strong strong"><strong>Add network interface</strong></span> button
											</p>
											 </td><td align="left" valign="top" headers="idm140196992378896"> <p>
												Add a network interface to the VirtualMachine.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196992379984"> <p>
												<span class="strong strong"><strong>Filter</strong></span> field
											</p>
											 </td><td align="left" valign="top" headers="idm140196992378896"> <p>
												Filter by interface type.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196992379984"> <p>
												Search field
											</p>
											 </td><td align="left" valign="top" headers="idm140196992378896"> <p>
												Search for a network interface by name or by label.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196992379984"> <p>
												<span class="strong strong"><strong>Network interface</strong></span> table
											</p>
											 </td><td align="left" valign="top" headers="idm140196992378896"> <p>
												List of network interfaces
											</p>
											 <p>
												Click the <span class="strong strong"><strong>Options</strong></span> menu 
												<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
												 beside a network interface to select <span class="strong strong"><strong>Edit</strong></span> or <span class="strong strong"><strong>Delete</strong></span>.
											</p>
											 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-disks"><div class="titlepage"><div><div><h5 class="title">4.3.1.5.4. Disks tab</h5></div></div></div><p>
							You can manage disks on the <span class="strong strong"><strong>Disks</strong></span> tab.
						</p><div class="example" id="idm140196994877680"><p class="title"><strong>Example 4.20. Disks tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196987237552" scope="col">Setting</th><th align="left" valign="top" id="idm140196987236464" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>YAML</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>Add disk</strong></span> button
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												Add a disk to the VirtualMachine.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>Filter</strong></span> field
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												Filter by disk type.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												Search field
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												Search for a disk by name.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>Mount Windows drivers disk</strong></span> checkbox
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												Select to mount an ephemeral container disk as a CD-ROM.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>Disks</strong></span> table
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												List of VirtualMachine disks
											</p>
											 <p>
												Click the <span class="strong strong"><strong>Options</strong></span> menu 
												<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
												 beside a disk to select <span class="strong strong"><strong>Edit</strong></span>, <span class="strong strong"><strong>Detach</strong></span>, or <span class="strong strong"><strong>Make persistent</strong></span>.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196987237552"> <p>
												<span class="strong strong"><strong>File systems</strong></span> table
											</p>
											 </td><td align="left" valign="top" headers="idm140196987236464"> <p>
												List of VirtualMachine file systems if QEMU guest agent is installed
											</p>
											 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-scripts"><div class="titlepage"><div><div><h5 class="title">4.3.1.5.5. Scripts tab</h5></div></div></div><p>
							You can configure cloud-init, add an SSH key for a Linux VirtualMachine, and upload a Sysprep answer file for a Windows VirtualMachine on the <span class="strong strong"><strong>Scripts</strong></span> tab.
						</p><div class="example" id="idm140196993441232"><p class="title"><strong>Example 4.21. Scripts tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196973988544" scope="col">Element</th><th align="left" valign="top" id="idm140196973987456" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196973988544"> <p>
												<span class="strong strong"><strong>YAML</strong></span> switch
											</p>
											 </td><td align="left" valign="top" headers="idm140196973987456"> <p>
												Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196973988544"> <p>
												Cloud-init
											</p>
											 </td><td align="left" valign="top" headers="idm140196973987456"> <p>
												Click the edit icon to edit the cloud-init settings.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196973988544"> <p>
												Authorized SSH Key
											</p>
											 </td><td align="left" valign="top" headers="idm140196973987456"> <p>
												Click the edit icon to create a new secret or to attach an existing secret.
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140196973988544"> <p>
												Sysprep
											</p>
											 </td><td align="left" valign="top" headers="idm140196973987456"> <p>
												Click the edit icon to upload an <code class="literal">Autounattend.xml</code> or <code class="literal">Unattend.xml</code> answer file to automate Windows VirtualMachine setup.
											</p>
											 </td></tr></tbody></table></div></div></div></section></section><section class="section" id="ui-virtualmachine-details-events"><div class="titlepage"><div><div><h4 class="title">4.3.1.6. Events tab</h4></div></div></div><p>
						The <span class="strong strong"><strong>Events</strong></span> tab displays a list of VirtualMachine events.
					</p></section><section class="section" id="ui-virtualmachine-details-console"><div class="titlepage"><div><div><h4 class="title">4.3.1.7. Console tab</h4></div></div></div><p>
						You can open a console session to the VirtualMachine on the <span class="strong strong"><strong>Console</strong></span> tab.
					</p><div class="example" id="idm140196995644032"><p class="title"><strong>Example 4.22. Console tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196979968544" scope="col">Element</th><th align="left" valign="top" id="idm140196979967456" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196979968544"> <p>
											Guest login credentials section
										</p>
										 </td><td align="left" valign="top" headers="idm140196979967456"> <p>
											Expand <span class="strong strong"><strong>Guest login credentials</strong></span> to view the credentials created with <code class="literal">cloud-init</code>. Click the copy icon to copy the credentials to the clipboard.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196979968544"> <p>
											<span class="strong strong"><strong>Console</strong></span> list
										</p>
										 </td><td align="left" valign="top" headers="idm140196979967456"> <p>
											Select <span class="strong strong"><strong>VNC console</strong></span> or <span class="strong strong"><strong>Serial console</strong></span>.
										</p>
										 <p>
											You can select <span class="strong strong"><strong>Desktop viewer</strong></span> to connect to Windows VirtualMachines by using Remote Desktop Protocol (RDP). You must install an RDP client on a machine on the same network.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196979968544"> <p>
											<span class="strong strong"><strong>Send key</strong></span> list
										</p>
										 </td><td align="left" valign="top" headers="idm140196979967456"> <p>
											Select a key-stroke combination to send to the console.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196979968544"> <p>
											<span class="strong strong"><strong>Disconnect</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196979967456"> <p>
											Disconnect the console connection.
										</p>
										 <p>
											You must manually disconnect the console connection if you open a new console session. Otherwise, the first console session continues to run in the background.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196979968544"> <p>
											<span class="strong strong"><strong>Paste</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196979967456"> <p>
											You can paste a string from your client’s clipboard into the guest when using the VNC console.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-snapshots"><div class="titlepage"><div><div><h4 class="title">4.3.1.8. Snapshots tab</h4></div></div></div><p>
						You can create snapshots and restore VirtualMachines from snapshots on the <span class="strong strong"><strong>Snapshots</strong></span> tab.
					</p><div class="example" id="idm140196997888768"><p class="title"><strong>Example 4.23. Snapshots tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196997883616" scope="col">Element</th><th align="left" valign="top" id="idm140196983896224" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196997883616"> <p>
											<span class="strong strong"><strong>Take snapshot</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196983896224"> <p>
											Create a snapshot.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997883616"> <p>
											<span class="strong strong"><strong>Filter</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196983896224"> <p>
											Filter snapshots by status.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997883616"> <p>
											Search field
										</p>
										 </td><td align="left" valign="top" headers="idm140196983896224"> <p>
											Search for snapshots by name or by label.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196997883616"> <p>
											<span class="strong strong"><strong>Snapshot</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196983896224"> <p>
											List of snapshots
										</p>
										 <p>
											Click the snapshot name to edit the labels or annotations.
										</p>
										 <p>
											Click the <span class="strong strong"><strong>Options</strong></span> menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 beside a snapshot to select <span class="strong strong"><strong>Restore</strong></span> or <span class="strong strong"><strong>Delete</strong></span>.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-virtualmachine-details-diagnostics"><div class="titlepage"><div><div><h4 class="title">4.3.1.9. Diagnostics tab</h4></div></div></div><p>
						You can view the status conditions and volume snapshot status on the <span class="strong strong"><strong>Diagnostics</strong></span> tab.
					</p><div class="example" id="idm140196993550912"><p class="title"><strong>Example 4.24. Diagnostics tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196998193584" scope="col">Element</th><th align="left" valign="top" id="idm140196998192496" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196998193584"> <p>
											<span class="strong strong"><strong>Status conditions</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196998192496"> <p>
											Display a list of conditions that are reported for all aspects of a VM.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196998193584"> <p>
											<span class="strong strong"><strong>Filter</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196998192496"> <p>
											Filter status conditions by category and condition.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196998193584"> <p>
											<span class="strong strong"><strong>Search</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196998192496"> <p>
											Search status conditions by reason.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196998193584"> <p>
											<span class="strong strong"><strong>Manage columns</strong></span> icon
										</p>
										 </td><td align="left" valign="top" headers="idm140196998192496"> <p>
											Select columns to display.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196998193584"> <p>
											<span class="strong strong"><strong>Volume snapshot</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196998192496"> <p>
											List of volumes, their snapshot enablement status, and reason
										</p>
										 </td></tr></tbody></table></div></div></div></section></section></section><section class="section" id="ui-templates-page"><div class="titlepage"><div><div><h2 class="title">4.4. Templates page</h2></div></div></div><p>
				You can create, edit, and clone VirtualMachine templates on the Templates page.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot edit a Red Hat template. You can clone a Red Hat template and edit it to create a custom template.
				</p></div></div><div class="example" id="idm140196984896944"><p class="title"><strong>Example 4.25. Templates page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196986880144" scope="col">Element</th><th align="left" valign="top" id="idm140196986879056" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196986880144"> <p>
									<span class="strong strong"><strong>Create Template</strong></span> button
								</p>
								 </td><td align="left" valign="top" headers="idm140196986879056"> <p>
									Create a template by editing a YAML configuration file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196986880144"> <p>
									<span class="strong strong"><strong>Filter</strong></span> field
								</p>
								 </td><td align="left" valign="top" headers="idm140196986879056"> <p>
									Filter templates by type, boot source, template provider, or operating system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196986880144"> <p>
									Search field
								</p>
								 </td><td align="left" valign="top" headers="idm140196986879056"> <p>
									Search for templates by name or by label.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196986880144"> <p>
									<span class="strong strong"><strong>Templates</strong></span> table
								</p>
								 </td><td align="left" valign="top" headers="idm140196986879056"> <p>
									List of templates
								</p>
								 <p>
									Click the <span class="strong strong"><strong>Options</strong></span> menu 
									<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
									 beside a template to select <span class="strong strong"><strong>Edit</strong></span>, <span class="strong strong"><strong>Clone</strong></span>, <span class="strong strong"><strong>Edit boot source</strong></span>, <span class="strong strong"><strong>Edit boot source reference</strong></span>, <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, or <span class="strong strong"><strong>Delete</strong></span>.
								</p>
								 </td></tr></tbody></table></div></div></div><section class="section" id="ui-template-details-page"><div class="titlepage"><div><div><h3 class="title">4.4.1. Template details page</h3></div></div></div><p>
					You can view template settings and edit custom templates on the Template details page.
				</p><div class="example" id="idm140196987173744"><p class="title"><strong>Example 4.26. Template details page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196991160560" scope="col">Element</th><th align="left" valign="top" id="idm140196991159472" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<span class="strong strong"><strong>Actions</strong></span> menu
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Click the <span class="strong strong"><strong>Actions</strong></span> menu to select <span class="strong strong"><strong>Edit</strong></span>, <span class="strong strong"><strong>Clone</strong></span>, <span class="strong strong"><strong>Edit boot source</strong></span>, <span class="strong strong"><strong>Edit boot source reference</strong></span>, <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, or <span class="strong strong"><strong>Delete</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-details"><span class="strong strong"><strong>Details</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Template settings and configurations
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-yaml"><span class="strong strong"><strong>YAML</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										YAML configuration file
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-scheduling"><span class="strong strong"><strong>Scheduling</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Scheduling configurations
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-network-interfaces"><span class="strong strong"><strong>Network interfaces</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Network interface management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-disks"><span class="strong strong"><strong>Disks</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Disk management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-scripts"><span class="strong strong"><strong>Scripts</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Cloud-init, SSH key, and Sysprep management
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196991160560"> <p>
										<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-template-details-parameters"><span class="strong strong"><strong>Parameters</strong></span> tab</a>
									</p>
									 </td><td align="left" valign="top" headers="idm140196991159472"> <p>
										Parameters
									</p>
									 </td></tr></tbody></table></div></div></div><section class="section" id="ui-template-details-details"><div class="titlepage"><div><div><h4 class="title">4.4.1.1. Details tab</h4></div></div></div><p>
						You can configure a custom template on the <span class="strong strong"><strong>Details</strong></span> tab.
					</p><div class="example" id="idm140196989010736"><p class="title"><strong>Example 4.27. Details tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196989582128" scope="col">Element</th><th align="left" valign="top" id="idm140196989581040" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Name
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Namespace
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template namespace
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Labels
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to edit the labels.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Annotations
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to edit the annotations.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Display name
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to edit the display name.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Description
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to enter a description.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Operating system
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Operating system name
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											CPU|Memory
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to edit the CPU|Memory request.
										</p>
										 <p>
											The number of CPUs is calculated by using the following formula: <code class="literal">sockets * threads * cores</code>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Machine type
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template machine type
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Boot mode
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to edit the boot mode.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Base template
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Name of the base template used to create this template
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Created at
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template creation date
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Owner
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template owner
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Boot order
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template boot order
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Boot source
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Boot source availability
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Provider
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template provider
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Support
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Template support level
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											GPU devices
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to add a GPU device.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196989582128"> <p>
											Host devices
										</p>
										 </td><td align="left" valign="top" headers="idm140196989581040"> <p>
											Click the edit icon to add a host device.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-yaml"><div class="titlepage"><div><div><h4 class="title">4.4.1.2. YAML tab</h4></div></div></div><p>
						You can configure a custom template by editing the YAML file on the <span class="strong strong"><strong>YAML</strong></span> tab.
					</p><div class="example" id="idm140196987397088"><p class="title"><strong>Example 4.28. YAML tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196983649232" scope="col">Element</th><th align="left" valign="top" id="idm140196983648144" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196983649232"> <p>
											<span class="strong strong"><strong>Save</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196983648144"> <p>
											Save changes to the YAML file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983649232"> <p>
											<span class="strong strong"><strong>Reload</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196983648144"> <p>
											Discard your changes and reload the YAML file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983649232"> <p>
											<span class="strong strong"><strong>Cancel</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196983648144"> <p>
											Exit the <span class="strong strong"><strong>YAML</strong></span> tab.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196983649232"> <p>
											<span class="strong strong"><strong>Download</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196983648144"> <p>
											Download the YAML file to your local machine.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-scheduling"><div class="titlepage"><div><div><h4 class="title">4.4.1.3. Scheduling tab</h4></div></div></div><p>
						You can configure scheduling on the <span class="strong strong"><strong>Scheduling</strong></span> tab.
					</p><div class="example" id="idm140196994217888"><p class="title"><strong>Example 4.29. Scheduling tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196987263456" scope="col">Setting</th><th align="left" valign="top" id="idm140196987262368" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											Node selector
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Click the edit icon to add a label to specify qualifying nodes.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											Tolerations
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Click the edit icon to add a toleration to specify qualifying nodes.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											Affinity rules
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Click the edit icon to add an affinity rule.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											<span class="strong strong"><strong>Descheduler</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Enable or disable the descheduler. The descheduler evicts a running pod so that the pod can be rescheduled onto a more suitable node.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											Dedicated resources
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Click the edit icon to select <span class="strong strong"><strong>Schedule this workload with dedicated resources (guaranteed policy)</strong></span>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196987263456"> <p>
											Eviction strategy
										</p>
										 </td><td align="left" valign="top" headers="idm140196987262368"> <p>
											Click the edit icon to select <span class="strong strong"><strong>LiveMigrate</strong></span> as the VirtualMachineInstance eviction strategy.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-network-interfaces"><div class="titlepage"><div><div><h4 class="title">4.4.1.4. Network interfaces tab</h4></div></div></div><p>
						You can manage network interfaces on the <span class="strong strong"><strong>Network interfaces</strong></span> tab.
					</p><div class="example" id="idm140196979927312"><p class="title"><strong>Example 4.30. Network interfaces tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196969021696" scope="col">Setting</th><th align="left" valign="top" id="idm140196969020608" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196969021696"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196969020608"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196969021696"> <p>
											<span class="strong strong"><strong>Add network interface</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196969020608"> <p>
											Add a network interface to the template.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196969021696"> <p>
											<span class="strong strong"><strong>Filter</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196969020608"> <p>
											Filter by interface type.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196969021696"> <p>
											Search field
										</p>
										 </td><td align="left" valign="top" headers="idm140196969020608"> <p>
											Search for a network interface by name or by label.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196969021696"> <p>
											<span class="strong strong"><strong>Network interface</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196969020608"> <p>
											List of network interfaces
										</p>
										 <p>
											Click the <span class="strong strong"><strong>Options</strong></span> menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 beside a network interface to select <span class="strong strong"><strong>Edit</strong></span> or <span class="strong strong"><strong>Delete</strong></span>.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-disks"><div class="titlepage"><div><div><h4 class="title">4.4.1.5. Disks tab</h4></div></div></div><p>
						You can manage disks on the <span class="strong strong"><strong>Disks</strong></span> tab.
					</p><div class="example" id="idm140196973098576"><p class="title"><strong>Example 4.31. Disks tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196975023184" scope="col">Setting</th><th align="left" valign="top" id="idm140196975022096" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196975023184"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196975022096"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196975023184"> <p>
											<span class="strong strong"><strong>Add disk</strong></span> button
										</p>
										 </td><td align="left" valign="top" headers="idm140196975022096"> <p>
											Add a disk to the template.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196975023184"> <p>
											<span class="strong strong"><strong>Filter</strong></span> field
										</p>
										 </td><td align="left" valign="top" headers="idm140196975022096"> <p>
											Filter by disk type.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196975023184"> <p>
											Search field
										</p>
										 </td><td align="left" valign="top" headers="idm140196975022096"> <p>
											Search for a disk by name.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196975023184"> <p>
											<span class="strong strong"><strong>Disks</strong></span> table
										</p>
										 </td><td align="left" valign="top" headers="idm140196975022096"> <p>
											List of template disks
										</p>
										 <p>
											Click the <span class="strong strong"><strong>Options</strong></span> menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 beside a disk to select <span class="strong strong"><strong>Edit</strong></span> or <span class="strong strong"><strong>Detach</strong></span>.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-scripts"><div class="titlepage"><div><div><h4 class="title">4.4.1.6. Scripts tab</h4></div></div></div><p>
						You can manage the cloud-init settings, SSH keys, and Sysprep answer files on the <span class="strong strong"><strong>Scripts</strong></span> tab.
					</p><div class="example" id="idm140196969799808"><p class="title"><strong>Example 4.32. Scripts tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196996139136" scope="col">Element</th><th align="left" valign="top" id="idm140196996138048" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196996139136"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196996138048"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196996139136"> <p>
											Cloud-init
										</p>
										 </td><td align="left" valign="top" headers="idm140196996138048"> <p>
											Click the edit icon to edit the cloud-init settings.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196996139136"> <p>
											Authorized SSH Key
										</p>
										 </td><td align="left" valign="top" headers="idm140196996138048"> <p>
											Click the edit icon to create a new secret or to attach an existing secret.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196996139136"> <p>
											Sysprep
										</p>
										 </td><td align="left" valign="top" headers="idm140196996138048"> <p>
											Click the edit icon to upload an <code class="literal">Autounattend.xml</code> or <code class="literal">Unattend.xml</code> answer file to automate Windows VirtualMachine setup.
										</p>
										 </td></tr></tbody></table></div></div></div></section><section class="section" id="ui-template-details-parameters"><div class="titlepage"><div><div><h4 class="title">4.4.1.7. Parameters tab</h4></div></div></div><p>
						You can edit selected template settings on the <span class="strong strong"><strong>Parameters</strong></span> tab.
					</p><div class="example" id="idm140196976106928"><p class="title"><strong>Example 4.33. Parameters tab</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196986399024" scope="col">Element</th><th align="left" valign="top" id="idm140196986397936" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196986399024"> <p>
											<span class="strong strong"><strong>YAML</strong></span> switch
										</p>
										 </td><td align="left" valign="top" headers="idm140196986397936"> <p>
											Set to <span class="strong strong"><strong>ON</strong></span> to view your live changes in the YAML configuration file.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196986399024"> <p>
											VM name
										</p>
										 </td><td align="left" valign="top" headers="idm140196986397936"> <p>
											Select <span class="strong strong"><strong>Generated (expression)</strong></span> for a generated value, <span class="strong strong"><strong>Value</strong></span> to set a default value, or <span class="strong strong"><strong>None</strong></span> from the <span class="strong strong"><strong>Default value type</strong></span> list.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196986399024"> <p>
											DataSource name
										</p>
										 </td><td align="left" valign="top" headers="idm140196986397936"> <p>
											Select <span class="strong strong"><strong>Generated (expression)</strong></span> for a generated value, <span class="strong strong"><strong>Value</strong></span> to set a default value, or <span class="strong strong"><strong>None</strong></span> from the <span class="strong strong"><strong>Default value type</strong></span> list.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196986399024"> <p>
											DataSource namespace
										</p>
										 </td><td align="left" valign="top" headers="idm140196986397936"> <p>
											Select <span class="strong strong"><strong>Generated (expression)</strong></span> for a generated value, <span class="strong strong"><strong>Value</strong></span> to set a default value, or <span class="strong strong"><strong>None</strong></span> from the <span class="strong strong"><strong>Default value type</strong></span> list.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196986399024"> <p>
											Cloud user password
										</p>
										 </td><td align="left" valign="top" headers="idm140196986397936"> <p>
											Select <span class="strong strong"><strong>Generated (expression)</strong></span> for a generated value, <span class="strong strong"><strong>Value</strong></span> to set a default value, or <span class="strong strong"><strong>None</strong></span> from the <span class="strong strong"><strong>Default value type</strong></span> list.
										</p>
										 </td></tr></tbody></table></div></div></div></section></section></section><section class="section" id="ui-datasources-page"><div class="titlepage"><div><div><h2 class="title">4.5. DataSources page</h2></div></div></div><p>
				You can create and configure DataSources for VirtualMachine boot sources on the DataSources page.
			</p><p>
				When you create a DataSource, a <code class="literal">DataImportCron</code> resource defines a cron job to poll and import the disk image unless you disable automatic boot source updates.
			</p><div class="example" id="idm140196992502384"><p class="title"><strong>Example 4.34. DataSources page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196992497344" scope="col">Element</th><th align="left" valign="top" id="idm140196988589616" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196992497344"> <p>
									<span class="strong strong"><strong>Create DataSource → With form</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196988589616"> <p>
									Create a DataSource by entering the registry URL, disk size, number of revisions, and cron expression in a form.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196992497344"> <p>
									<span class="strong strong"><strong>Create DataSources → With YAML</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196988589616"> <p>
									Create a DataSource by editing a YAML configuration file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196992497344"> <p>
									<span class="strong strong"><strong>Filter</strong></span> field
								</p>
								 </td><td align="left" valign="top" headers="idm140196988589616"> <p>
									Filter DataSources by attributes such as DataImportCron available.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196992497344"> <p>
									<span class="strong strong"><strong>Search</strong></span> field
								</p>
								 </td><td align="left" valign="top" headers="idm140196988589616"> <p>
									Search for a DataSource by name or by label.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196992497344"> <p>
									<span class="strong strong"><strong>DataSources</strong></span> table
								</p>
								 </td><td align="left" valign="top" headers="idm140196988589616"> <p>
									List of DataSources
								</p>
								 <p>
									Click the <span class="strong strong"><strong>Options</strong></span> menu 
									<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
									 beside a DataSource to select <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, or <span class="strong strong"><strong>Delete</strong></span>.
								</p>
								 </td></tr></tbody></table></div></div></div><p>
				Click a DataSource to view the DataSource details page.
			</p><section class="section" id="ui-datasource-details-page"><div class="titlepage"><div><div><h3 class="title">4.5.1. DataSource details page</h3></div></div></div><p>
					You can configure a DataSource on the DataSource details page.
				</p><div class="example" id="idm140196983757584"><p class="title"><strong>Example 4.35. DataSource details page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196994960560" scope="col">Element</th><th align="left" valign="top" id="idm140196994959472" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										<span class="strong strong"><strong>Details</strong></span> tab
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Configure a DataSource by editing a form.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										<span class="strong strong"><strong>YAML</strong></span> tab
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Configure a DataSource by editing a YAML configuration file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										<span class="strong strong"><strong>Actions</strong></span> menu
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Select <span class="strong strong"><strong>Edit labels</strong></span>, <span class="strong strong"><strong>Edit annotations</strong></span>, <span class="strong strong"><strong>Delete</strong></span>, or <span class="strong strong"><strong>Manage source</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										DataSource name
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Namespace
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										DataSource namespace
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										DataImportCron
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										DataSource DataImportCron
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Labels
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Click the edit icon to edit the labels.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Annotations
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Click the edit icon to edit the annotations.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Conditions
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										Displays the status conditions of the DataSource.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Created at
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										DataSource creation date
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196994960560"> <p>
										Owner
									</p>
									 </td><td align="left" valign="top" headers="idm140196994959472"> <p>
										DataSource owner
									</p>
									 </td></tr></tbody></table></div></div></div></section></section><section class="section" id="ui-migrationpolicies-page"><div class="titlepage"><div><div><h2 class="title">4.6. MigrationPolicies page</h2></div></div></div><p>
				You can manage MigrationPolicies for your workloads on the MigrationPolicies page.
			</p><div class="example" id="idm140196992367232"><p class="title"><strong>Example 4.36. MigrationPolicies page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977007008" scope="col">Element</th><th align="left" valign="top" id="idm140196977005920" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977007008"> <p>
									<span class="strong strong"><strong>Create MigrationPolicy → With form</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196977005920"> <p>
									Create a MigrationPolicy by entering configurations and labels in a form.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196977007008"> <p>
									<span class="strong strong"><strong>Create MigrationPolicy → With YAML</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140196977005920"> <p>
									Create a MigrationPolicy by editing a YAML configuration file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196977007008"> <p>
									<span class="strong strong"><strong>Name | Label</strong></span> search field
								</p>
								 </td><td align="left" valign="top" headers="idm140196977005920"> <p>
									Search for a MigrationPolicy by name or by label.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196977007008"> <p>
									<span class="strong strong"><strong>MigrationPolicies</strong></span> table
								</p>
								 </td><td align="left" valign="top" headers="idm140196977005920"> <p>
									List of MigrationPolicies
								</p>
								 <p>
									Click the <span class="strong strong"><strong>Options</strong></span> menu 
									<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
									 beside a MigrationPolicy to select <span class="strong strong"><strong>Edit</strong></span> or <span class="strong strong"><strong>Delete</strong></span>.
								</p>
								 </td></tr></tbody></table></div></div></div><p>
				Click a MigrationPolicy to view the MigrationPolicy details page.
			</p><section class="section" id="ui-migrationpolicy-details-page"><div class="titlepage"><div><div><h3 class="title">4.6.1. MigrationPolicy details page</h3></div></div></div><p>
					You can configure a MigrationPolicy on the MigrationPolicy details page.
				</p><div class="example" id="idm140196984440096"><p class="title"><strong>Example 4.37. MigrationPolicy details page</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196981355872" scope="col">Element</th><th align="left" valign="top" id="idm140196981354784" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										<span class="strong strong"><strong>Details</strong></span> tab
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Configure a MigrationPolicy by editing a form.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										<span class="strong strong"><strong>YAML</strong></span> tab
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Configure a MigrationPolicy by editing a YAML configuration file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										<span class="strong strong"><strong>Actions</strong></span> menu
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Select <span class="strong strong"><strong>Edit</strong></span> or <span class="strong strong"><strong>Delete</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										MigrationPolicy name
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Description
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										MigrationPolicy description
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Configurations
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Click the edit icon to update the MigrationPolicy configurations.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Bandwidth per migration
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Bandwidth request per migration. For unlimited bandwidth, set the value to <code class="literal">0</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Auto converge
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Auto converge policy
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Post-copy
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Post-copy policy
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Completion timeout
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Completion timeout value in seconds
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										Project labels
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Click <span class="strong strong"><strong>Edit</strong></span> to edit the project labels.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196981355872"> <p>
										VirtualMachine labels
									</p>
									 </td><td align="left" valign="top" headers="idm140196981354784"> <p>
										Click <span class="strong strong"><strong>Edit</strong></span> to edit the VirtualMachine labels.
									</p>
									 </td></tr></tbody></table></div></div></div></section></section></section><section class="chapter" id="virt-4-13-release-notes"><div class="titlepage"><div><div><h1 class="title">Chapter 5. OpenShift Virtualization release notes</h1></div></div></div><section class="section" id="virt-4-13-inclusive-language"><div class="titlepage"><div><div><h2 class="title">5.1. Making open source more inclusive</h2></div></div></div><p>
				Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright’s message</a>.
			</p></section><section class="section" id="about-red-hat-openshift-virtualization"><div class="titlepage"><div><div><h2 class="title">5.2. About Red Hat OpenShift Virtualization</h2></div></div></div><p>
				Red Hat OpenShift Virtualization enables you to bring traditional virtual machines (VMs) into OpenShift Container Platform where they run alongside containers, and are managed as native Kubernetes objects.
			</p><p>
				OpenShift Virtualization is represented by the 
				<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f03007ff0e4ba18e921132758bedae7b/virt-icon.png" width="40" height="40" alt="OpenShift Virtualization"/></span>
				 icon.
			</p><p>
				You can use OpenShift Virtualization with either the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#about-ovn-kubernetes">OVN-Kubernetes</a> or the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#about-openshift-sdn">OpenShiftSDN</a> default Container Network Interface (CNI) network provider.
			</p><p>
				Learn more about <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#about-virt">what you can do with OpenShift Virtualization</a>.
			</p><p>
				Learn more about <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-how-virt-works_virt-architecture">OpenShift Virtualization architecture and deployments</a>.
			</p><p>
				<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#preparing-cluster-for-virt">Prepare your cluster</a> for OpenShift Virtualization.
			</p><section class="section" id="virt-supported-cluster-version_virt-4-13-release-notes"><div class="titlepage"><div><div><h3 class="title">5.2.1. OpenShift Virtualization supported cluster version</h3></div></div></div><p>
					OpenShift Virtualization 4.13 is supported for use on OpenShift Container Platform 4.13 clusters. To use the latest z-stream release of OpenShift Virtualization, you must first upgrade to the latest version of OpenShift Container Platform.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Updating to OpenShift Virtualization 4.13 from OpenShift Virtualization 4.12.2 is not supported.
					</p></div></div></section><section class="section" id="virt-guest-os"><div class="titlepage"><div><div><h3 class="title">5.2.2. Supported guest operating systems</h3></div></div></div><p>
					To view the supported guest operating systems for OpenShift Virtualization, see <a class="link" href="https://access.redhat.com/articles/973163#ocpvirt">Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, OpenShift Virtualization and Red Hat Enterprise Linux with KVM</a>.
				</p></section></section><section class="section" id="virt-4-13-new"><div class="titlepage"><div><div><h2 class="title">5.3. New and changed features</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						OpenShift Virtualization is FIPS ready. However, OpenShift Container Platform 4.13 is based on Red Hat Enterprise Linux (RHEL) 9.2. RHEL 9.2 has not yet been submitted for FIPS validation. Red Hat expects, though cannot commit to a specific timeframe, to obtain FIPS validation for RHEL 9.0 and RHEL 9.2 modules, and later even minor releases of RHEL 9.x. Updates will be available in <a class="link" href="https://access.redhat.com/articles/2918071">Compliance Activities and Government Standards</a>.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						OpenShift Virtualization is certified in Microsoft’s Windows Server Virtualization Validation Program (SVVP) to run Windows Server workloads.
					</p><p class="simpara">
						The SVVP Certification applies to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Red Hat Enterprise Linux CoreOS workers. In the Microsoft SVVP Catalog, they are named <span class="emphasis"><em>Red Hat OpenShift Container Platform 4 on RHEL CoreOS 9</em></span>.
							</li><li class="listitem">
								Intel and AMD CPUs.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						OpenShift Virtualization now adheres to the <code class="literal">restricted</code> <a class="link" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted">Kubernetes pod security standards</a> profile. To learn more, see the OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-security-policies">security policies</a> documentation.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						OpenShift Virtualization is now based on Red Hat Enterprise Linux (RHEL) 9.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								There is a new RHEL 9 machine type for VMs: <code class="literal">machineType: pc-q35-rhel9.2.0</code>.
							</p><p class="simpara">
								All VM templates that are included with OpenShift Virtualization now use this machine type by default.
							</p></li><li class="listitem">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-rhel-9_upgrading-virt">OpenShift Virtualization on RHEL 9</a>.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now obtain the <code class="literal">VirtualMachine</code>, <code class="literal">ConfigMap</code>, and <code class="literal">Secret</code> manifests from the export server after you export a VM or snapshot. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-exported-vm-manifests_virt-exporting-vms">accessing exported VM manifests</a>.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The "Logging, events, and monitoring" documentation is now called <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-support-overview">Support</a>. The monitoring tools documentation has been moved to <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-monitoring-overview">Monitoring</a>.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can view and filter aggregated OpenShift Virtualization logs in the web console by using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-viewing-logs-loki_virt-troubleshooting">LokiStack</a>.
					</li></ul></div><section class="section" id="virt-4-13-quick-starts"><div class="titlepage"><div><div><h3 class="title">5.3.1. Quick starts</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Quick start tours are available for several OpenShift Virtualization features. To view the tours, click the <span class="strong strong"><strong>Help</strong></span> icon <span class="strong strong"><strong>?</strong></span> in the menu bar on the header of the OpenShift Virtualization console and then select <span class="strong strong"><strong>Quick Starts</strong></span>. You can filter the available tours by entering the <code class="literal">virtualization</code> keyword in the <span class="strong strong"><strong>Filter</strong></span> field.
						</li></ul></div></section><section class="section" id="virt-4-13-networking-new"><div class="titlepage"><div><div><h3 class="title">5.3.2. Networking</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You can now <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-jumbo-frames-vm-pod-nw_virt-using-the-default-pod-network-with-virt">send unfragmented jumbo frame packets</a> between two virtual machines (VMs) that are connected on the default pod network when you use the OVN-Kubernetes CNI plugin.
						</li></ul></div></section><section class="section" id="virt-4-13-storage-new"><div class="titlepage"><div><div><h3 class="title">5.3.3. Storage</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							OpenShift Virtualization storage resources now migrate automatically to the beta API versions. Alpha API versions are no longer supported.
						</li></ul></div></section><section class="section" id="virt-4-13-web-new"><div class="titlepage"><div><div><h3 class="title">5.3.4. Web console</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On the <span class="strong strong"><strong>VirtualMachine details</strong></span> page, the <span class="strong strong"><strong>Scheduling</strong></span>, <span class="strong strong"><strong>Environment</strong></span>, <span class="strong strong"><strong>Network interfaces</strong></span>, <span class="strong strong"><strong>Disks</strong></span>, and <span class="strong strong"><strong>Scripts</strong></span> tabs are displayed on the new <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-configuration"><span class="strong strong"><strong>Configuration</strong></span> tab</a>.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You can now <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-console">paste a string</a> from your client’s clipboard into the guest when using the VNC console.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>VirtualMachine details</strong></span> → <span class="strong strong"><strong>Details</strong></span> tab now provides a new SSH service type <span class="strong strong"><strong>SSH over LoadBalancer</strong></span> to expose the SSH service over a load balancer.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The option to make a hot-plug volume a persistent volume is added to the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-disks"><span class="strong strong"><strong>Disks</strong></span> tab</a>.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							There is now a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-diagnostics"><span class="strong strong"><strong>VirtualMachine details</strong></span> → <span class="strong strong"><strong>Diagnostics</strong></span></a> tab where you can view the status conditions of VMs and the snapshot status of volumes.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You can now enable headless mode for high performance VMs in the web console.
						</li></ul></div></section></section><section class="section" id="virt-4-13-deprecated-removed"><div class="titlepage"><div><div><h2 class="title">5.4. Deprecated and removed features</h2></div></div></div><section class="section" id="virt-4-13-deprecated"><div class="titlepage"><div><div><h3 class="title">5.4.1. Deprecated features</h3></div></div></div><p>
					Deprecated features are included and supported in the current release. However, they will be removed in a future release and are not recommended for new deployments.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Support for <code class="literal">virtctl</code> command line tool installation for Red Hat Enterprise Linux (RHEL) 7 and RHEL 9 by an RPM is deprecated and is planned to be removed in a future release.
						</li></ul></div></section><section class="section" id="virt-4-13-removed"><div class="titlepage"><div><div><h3 class="title">5.4.2. Removed features</h3></div></div></div><p>
					Removed features are not supported in the current release.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat Enterprise Linux 6 is no longer supported on OpenShift Virtualization.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Support for the legacy HPP custom resource, and the associated storage class, has been removed for all new deployments. In OpenShift Virtualization 4.13, the HPP Operator uses the Kubernetes Container Storage Interface (CSI) driver to configure local storage. A legacy HPP custom resource is supported only if it had been installed on a previous version of OpenShift Virtualization.
						</li></ul></div></section></section><section class="section" id="virt-4-13-technology-preview"><div class="titlepage"><div><div><h2 class="title">5.5. Technology Preview features</h2></div></div></div><p>
				Some features in this release are currently in Technology Preview. These experimental features are not intended for production use. Note the following scope of support on the Red Hat Customer Portal for these features:
			</p><p>
				<a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can now use <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#about-querying-metrics_virt-prometheus-queries">Prometheus</a> to monitor the following metrics:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">kubevirt_vmi_cpu_system_usage_seconds</code> returns the physical system CPU time consumed by the hypervisor.
							</li><li class="listitem">
								<code class="literal">kubevirt_vmi_cpu_user_usage_seconds</code> returns the physical user CPU time consumed by the hypervisor.
							</li><li class="listitem">
								<code class="literal">kubevirt_vmi_cpu_usage_seconds</code> returns the total CPU time used in seconds by calculating the sum of the vCPU and the hypervisor usage.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now run a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-checking-cluster-dpdk-readiness_virt-running-cluster-checkups">checkup</a> to verify if your OpenShift Container Platform cluster node can run a virtual machine with a Data Plane Development Kit (DPDK) workload with zero packet loss.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-vm-dpdk_virt-attaching-vm-to-sriov-network">configure your virtual machine to run DPDK workloads</a> to achieve lower latency and higher throughput for faster packet processing in the user space.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-vm-secondary-network-fqdn">access a VM that is attached to a secondary network interface</a> from outside the cluster by using its fully qualified domain name (FQDN).
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now create OpenShift Container Platform clusters with worker nodes that are hosted by OpenShift Virtualization VMs. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.8/html/clusters/cluster_mce_overview#hosted-control-planes-manage-kubevirt">Managing hosted control plane clusters on OpenShift Virtualization</a> in the Red Hat Advanced Cluster Management (RHACM) documentation.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now use Microsoft Windows 11 as a guest operating system. However, OpenShift Virtualization 4.13 does not support USB disks, which are required for a critical function of BitLocker recovery. To protect recovery keys, use other methods described in the <a class="link" href="https://learn.microsoft.com/en-us/windows/security/information-protection/bitlocker/bitlocker-recovery-guide-plan">BitLocker recovery guide</a>.
					</li></ul></div></section><section class="section" id="virt-4-13-bug-fix"><div class="titlepage"><div><div><h2 class="title">5.6. Bug fix</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The virtual machine snapshot restore operation no longer hangs indefinitely due to some persistent volume claim (PVC) annotations created by the Containerized Data Importer (CDI). (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2070366"><span class="strong strong"><strong>BZ#2070366</strong></span></a>)
					</li></ul></div></section><section class="section" id="virt-4-13-known-issues"><div class="titlepage"><div><div><h2 class="title">5.7. Known issues</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						With the release of the <a class="link" href="https://access.redhat.com/errata/RHSA-2023:3722">RHSA-2023:3722</a> advisory, the TLS <code class="literal">Extended Master Secret</code> (EMS) extension (<a class="link" href="https://datatracker.ietf.org/doc/html/rfc7627">RFC 7627</a>) is mandatory for TLS 1.2 connections on FIPS-enabled RHEL 9 systems. This is in accordance with FIPS-140-3 requirements. TLS 1.3 is not affected.
					</p><p class="simpara">
						Legacy OpenSSL clients that do not support EMS or TLS 1.3 now cannot connect to FIPS servers running on RHEL 9. Similarly, RHEL 9 clients in FIPS mode cannot connect to servers that only support TLS 1.2 without EMS. This in practice means that these clients cannot connect to servers on RHEL 6, RHEL 7 and non-RHEL legacy operating systems. This is because the legacy 1.0.x versions of OpenSSL do not support EMS or TLS 1.3. For more information, see <a class="link" href="https://access.redhat.com/solutions/7018256">TLS Extension "Extended Master Secret" enforced with Red Hat Enterprise Linux 9.2</a>.
					</p><p class="simpara">
						As a workaround, upgrade legacy OpenSSL clients to a version that supports TLS 1.3 and configure OpenShift Virtualization to use TLS 1.3, with the <code class="literal">Modern</code> TLS security profile type, for FIPS mode.
					</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If you enabled the <code class="literal">DisableMDEVConfiguration</code> feature gate by editing the <code class="literal">HyperConverged</code> custom resource in OpenShift Virtualization 4.12.4, you must re-enable the feature gate after you upgrade to versions 4.13.0 or 4.13.1 by creating a JSON Patch annotation (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2184439"><span class="strong strong"><strong>BZ#2184439</strong></span></a>):
					</p><pre class="programlisting language-terminal">$ oc annotate --overwrite -n openshift-cnv hyperconverged kubevirt-hyperconverged \
    kubevirt.kubevirt.io/jsonpatch='[{"op": "add","path": "/spec/configuration/developerConfiguration/featureGates/-", \
    "value": "DisableMDEVConfiguration"}]'</pre></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						OpenShift Virtualization versions 4.12.2 and earlier are not compatible with OpenShift Container Platform 4.13. Updating OpenShift Container Platform to 4.13 is blocked by design in OpenShift Virtualization 4.12.1 and 4.12.2, but this restriction could not be added to OpenShift Virtualization 4.12.0. If you have OpenShift Virtualization 4.12.0, ensure that you do not update OpenShift Container Platform to 4.13.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Your cluster becomes unsupported if you run incompatible versions of OpenShift Container Platform and OpenShift Virtualization.
						</p></div></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enabling descheduler evictions on a virtual machine is a Technical Preview feature and might cause failed migrations and unstable scheduling.
					</li><li class="listitem">
						You cannot run OpenShift Virtualization on a single-stack IPv6 cluster. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2193267"><span class="strong strong"><strong>BZ#2193267</strong></span></a>)
					</li><li class="listitem"><p class="simpara">
						When you use two pods with different SELinux contexts, VMs with the <code class="literal">ocs-storagecluster-cephfs</code> storage class fail to migrate and the VM status changes to <code class="literal">Paused</code>. This is because both pods try to access the shared <code class="literal">ReadWriteMany</code> CephFS volume at the same time. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2092271"><span class="strong strong"><strong>BZ#2092271</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, use the <code class="literal">ocs-storagecluster-ceph-rbd</code> storage class to live migrate VMs on a cluster that uses Red Hat Ceph Storage.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If you clone more than 100 VMs using the <code class="literal">csi-clone</code> cloning strategy, then the Ceph CSI might not purge the clones. Manually deleting the clones might also fail. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2055595"><span class="strong strong"><strong>BZ#2055595</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, you can restart the <code class="literal">ceph-mgr</code> to purge the VM clones.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you stop a node on a cluster and then use the Node Health Check Operator to bring the node back up, connectivity to Multus might be lost. (<a class="link" href="https://issues.redhat.com/browse/OCPBUGS-8398"><span class="strong strong"><strong>OCPBUGS-8398</strong></span></a>)
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">TopoLVM</code> provisioner name string has changed in OpenShift Virtualization 4.12. As a result, the automatic import of operating system images might fail with the following error message (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2158521"><span class="strong strong"><strong>BZ#2158521</strong></span></a>):
					</p><pre class="programlisting language-terminal">DataVolume.storage spec is missing accessMode and volumeMode, cannot get access mode from StorageProfile.</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								As a workaround:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Update the <code class="literal">claimPropertySets</code> array of the storage profile:
									</p><pre class="programlisting language-terminal">$ oc patch storageprofile &lt;storage_profile&gt; --type=merge -p '{"spec": {"claimPropertySets": [{"accessModes": ["ReadWriteOnce"], "volumeMode": "Block"}, \
    {"accessModes": ["ReadWriteOnce"], "volumeMode": "Filesystem"}]}}'</pre></li><li class="listitem">
										Delete the affected data volumes in the <code class="literal">openshift-virtualization-os-images</code> namespace. They are recreated with the access mode and volume mode from the updated storage profile.
									</li></ol></div></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						When restoring a VM snapshot for storage whose binding mode is <code class="literal">WaitForFirstConsumer</code>, the restored PVCs remain in the <code class="literal">Pending</code> state and the restore operation does not progress.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, start the restored VM, stop it, and then start it again. The VM will be scheduled, the PVCs will be in the <code class="literal">Bound</code> state, and the restore operation will complete. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2149654"><span class="strong strong"><strong>BZ#2149654</strong></span></a>)
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						VMs created from common templates on a Single Node OpenShift (SNO) cluster display a <code class="literal">VMCannotBeEvicted</code> alert because the template’s default eviction strategy is <code class="literal">LiveMigrate</code>. You can ignore this alert or remove the alert by updating the VM’s eviction strategy. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2092412"><span class="strong strong"><strong>BZ#2092412</strong></span></a>)
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Uninstalling OpenShift Virtualization does not remove the <code class="literal">feature.node.kubevirt.io</code> node labels created by OpenShift Virtualization. You must remove the labels manually. (<a class="link" href="https://issues.redhat.com/browse/CNV-22036"><span class="strong strong"><strong>CNV-22036</strong></span></a>)
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Windows 11 virtual machines do not boot on clusters running in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/security_hardening/index#con_federal-information-processing-standard-fips_assembly_installing-the-system-in-fips-mode">FIPS mode</a>. Windows 11 requires a TPM (trusted platform module) device by default. However, the <code class="literal">swtpm</code> (software TPM emulator) package is incompatible with FIPS. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2089301"><span class="strong strong"><strong>BZ#2089301</strong></span></a>)
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If your OpenShift Container Platform cluster uses OVN-Kubernetes as the default Container Network Interface (CNI) provider, you cannot attach a Linux bridge or bonding device to a host’s default interface because of a change in the host network topology of OVN-Kubernetes. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1885605"><span class="strong strong"><strong>BZ#1885605</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, you can use a secondary network interface connected to your host, or switch to the OpenShift SDN default CNI provider.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						In some instances, multiple virtual machines can mount the same PVC in read-write mode, which might result in data corruption. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1992753"><span class="strong strong"><strong>BZ#1992753</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, avoid using a single PVC in read-write mode with multiple VMs.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The Pod Disruption Budget (PDB) prevents pod disruptions for migratable virtual machine images. If the PDB detects pod disruption, then <code class="literal">openshift-monitoring</code> sends a <code class="literal">PodDisruptionBudgetAtLimit</code> alert every 60 minutes for virtual machine images that use the <code class="literal">LiveMigrate</code> eviction strategy. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2026733"><span class="strong strong"><strong>BZ#2026733</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#silencing-alerts_managing-alerts">silence alerts</a>.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						OpenShift Virtualization links a service account token in use by a pod to that specific pod. OpenShift Virtualization implements a service account volume by creating a disk image that contains a token. If you migrate a VM, then the service account volume becomes invalid. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2037611"><span class="strong strong"><strong>BZ#2037611</strong></span></a>)
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								As a workaround, use user accounts rather than service accounts because user account tokens are not bound to a specific pod.
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						In a heterogeneous cluster with different compute nodes, virtual machines that have HyperV Reenlightenment enabled cannot be scheduled on nodes that do not support timestamp-counter scaling (TSC) or have the appropriate TSC frequency. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2151169"><span class="strong strong"><strong>BZ#2151169</strong></span></a>)
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you deploy OpenShift Virtualization with Red Hat OpenShift Data Foundation, you must create a dedicated storage class for Windows virtual machine disks. See <a class="link" href="https://access.redhat.com/articles/6978371">Optimizing ODF PersistentVolumes for Windows VMs</a> for details.
					</li></ul></div></section></section><section class="chapter" id="installing"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Installing</h1></div></div></div><section class="section" id="preparing-cluster-for-virt"><div class="titlepage"><div><div><h2 class="title">6.1. Preparing your cluster for OpenShift Virtualization</h2></div></div></div><p>
				Review this section before you install OpenShift Virtualization to ensure that your cluster meets the requirements.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You can use any installation method, including user-provisioned, installer-provisioned, or assisted installer, to deploy OpenShift Container Platform. However, the installation method and the cluster topology might affect OpenShift Virtualization functionality, such as snapshots or live migration.
				</p></div></div><div class="formalpara"><p class="title"><strong>IPv6</strong></p><p>
					You cannot run OpenShift Virtualization on a single-stack IPv6 cluster. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2193267"><span class="strong strong"><strong>BZ#2193267</strong></span></a>)
				</p></div><section class="section" id="virt-hardware-os-requirements_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.1. Hardware and operating system requirements</h3></div></div></div><p>
					Review the following hardware and operating system requirements for OpenShift Virtualization.
				</p><div class="itemizedlist"><p class="title"><strong>Supported platforms</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							On-premise bare metal servers
						</li><li class="listitem">
							Amazon Web Services bare metal instances. See <a class="link" href="https://access.redhat.com/articles/6409731">Deploy OpenShift Virtualization on AWS Bare Metal Nodes</a> for details.
						</li><li class="listitem">
							IBM Cloud Bare Metal Servers. See <a class="link" href="https://access.redhat.com/articles/6738731">Deploy OpenShift Virtualization on IBM Cloud Bare Metal Nodes</a> for details.
						</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Installing OpenShift Virtualization on AWS bare metal instances or on IBM Cloud Bare Metal Servers is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Bare metal instances or servers offered by other cloud providers are not supported.</strong></span>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>CPU requirements</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Supported by Red Hat Enterprise Linux (RHEL) 9
						</li><li class="listitem">
							Support for Intel 64 or AMD64 CPU extensions
						</li><li class="listitem">
							Intel VT or AMD-V hardware virtualization extensions enabled
						</li><li class="listitem">
							NX (no execute) flag enabled
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Storage requirements</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Supported by OpenShift Container Platform
						</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If you deploy OpenShift Virtualization with Red Hat OpenShift Data Foundation, you must create a dedicated storage class for Windows virtual machine disks. See <a class="link" href="https://access.redhat.com/articles/6978371">Optimizing ODF PersistentVolumes for Windows VMs</a> for details.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Operating system requirements</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Red Hat Enterprise Linux CoreOS (RHCOS) installed on worker nodes
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								RHEL worker nodes are not supported.
							</p></div></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If your cluster uses worker nodes with different CPUs, live migration failures can occur because different CPUs have different capabilities. To avoid such failures, use CPUs with appropriate capacity for each node and set node affinity on your virtual machines to ensure successful migration. See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-node-affinity-configuring-required_nodes-scheduler-node-affinity">Configuring a required node affinity rule</a> for more information.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/architecture/#rhcos-about_architecture-rhcos">About RHCOS</a>.
						</li><li class="listitem">
							<a class="link" href="https://catalog.redhat.com">Red Hat Ecosystem Catalog</a> for supported CPUs.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#storage-overview">Supported storage</a>.
						</li></ul></div></section><section class="section" id="virt-cluster-resource-requirements_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.2. Physical resource overhead requirements</h3></div></div></div><p>
					OpenShift Virtualization is an add-on to OpenShift Container Platform and imposes additional overhead that you must account for when planning a cluster. Each cluster machine must accommodate the following overhead requirements in addition to the OpenShift Container Platform requirements. Oversubscribing the physical resources in a cluster can affect performance.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The numbers noted in this documentation are based on Red Hat’s test methodology and setup. These numbers can vary based on your own individual setup and environments.
					</p></div></div><section class="section" id="memory-overhead_preparing-cluster-for-virt"><div class="titlepage"><div><div><h4 class="title">6.1.2.1. Memory overhead</h4></div></div></div><p>
						Calculate the memory overhead values for OpenShift Virtualization by using the equations below.
					</p><div class="formalpara"><p class="title"><strong>Cluster memory overhead</strong></p><p>
							
<pre class="screen">Memory overhead per infrastructure node ≈ 150 MiB</pre>

						</p></div><pre class="screen">Memory overhead per worker node ≈ 360 MiB</pre><p>
						Additionally, OpenShift Virtualization environment resources require a total of 2179 MiB of RAM that is spread across all infrastructure nodes.
					</p><div class="formalpara"><p class="title"><strong>Virtual machine memory overhead</strong></p><p>
							
<pre class="screen">Memory overhead per virtual machine ≈ (1.002 * requested memory) + 146 MiB  \
                + 8 MiB * (number of vCPUs) \ <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>
             + 16 MiB * (number of graphics devices) <span id="CO1-2"><!--Empty--></span><span class="callout">2</span></pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Number of virtual CPUs requested by the virtual machine
							</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Number of virtual graphics cards requested by the virtual machine
							</div></dd></dl></div><p>
						If your environment includes a Single Root I/O Virtualization (SR-IOV) network device or a Graphics Processing Unit (GPU), allocate 1 GiB additional memory overhead for each device.
					</p></section><section class="section" id="CPU-overhead_preparing-cluster-for-virt"><div class="titlepage"><div><div><h4 class="title">6.1.2.2. CPU overhead</h4></div></div></div><p>
						Calculate the cluster processor overhead requirements for OpenShift Virtualization by using the equation below. The CPU overhead per virtual machine depends on your individual setup.
					</p><div class="formalpara"><p class="title"><strong>Cluster CPU overhead</strong></p><p>
							
<pre class="screen">CPU overhead for infrastructure nodes ≈ 4 cores</pre>

						</p></div><p>
						OpenShift Virtualization increases the overall utilization of cluster level services such as logging, routing, and monitoring. To account for this workload, ensure that nodes that host infrastructure components have capacity allocated for 4 additional cores (4000 millicores) distributed across those nodes.
					</p><pre class="screen">CPU overhead for worker nodes ≈ 2 cores + CPU overhead per virtual machine</pre><p>
						Each worker node that hosts virtual machines must have capacity for 2 additional cores (2000 millicores) for OpenShift Virtualization management workloads in addition to the CPUs required for virtual machine workloads.
					</p><div class="formalpara"><p class="title"><strong>Virtual machine CPU overhead</strong></p><p>
							If dedicated CPUs are requested, there is a 1:1 impact on the cluster CPU overhead requirement. Otherwise, there are no specific rules about how many CPUs a virtual machine requires.
						</p></div></section><section class="section" id="storage-overhead_preparing-cluster-for-virt"><div class="titlepage"><div><div><h4 class="title">6.1.2.3. Storage overhead</h4></div></div></div><p>
						Use the guidelines below to estimate storage overhead requirements for your OpenShift Virtualization environment.
					</p><div class="formalpara"><p class="title"><strong>Cluster storage overhead</strong></p><p>
							
<pre class="screen">Aggregated storage overhead per node ≈ 10 GiB</pre>

						</p></div><p>
						10 GiB is the estimated on-disk storage impact for each node in the cluster when you install OpenShift Virtualization.
					</p><div class="formalpara"><p class="title"><strong>Virtual machine storage overhead</strong></p><p>
							Storage overhead per virtual machine depends on specific requests for resource allocation within the virtual machine. The request could be for ephemeral storage on the node or storage resources hosted elsewhere in the cluster. OpenShift Virtualization does not currently allocate any additional ephemeral storage for the running container itself.
						</p></div></section><section class="section" id="example-scenario_preparing-cluster-for-virt"><div class="titlepage"><div><div><h4 class="title">6.1.2.4. Example</h4></div></div></div><p>
						As a cluster administrator, if you plan to host 10 virtual machines in the cluster, each with 1 GiB of RAM and 2 vCPUs, the memory impact across the cluster is 11.68 GiB. The estimated on-disk storage impact for each node in the cluster is 10 GiB and the CPU impact for worker nodes that host virtual machine workloads is a minimum of 2 cores.
					</p></section></section><section class="section" id="virt-about-storage-volumes-for-vm-disks_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.3. About storage volumes for virtual machine disks</h3></div></div></div><p>
					If you use the storage API with known storage providers, volume and access modes are selected automatically. However, if you use a storage class that does not have a storage profile, you must select the volume and access mode.
				</p><p>
					For best results, use <code class="literal">accessMode: ReadWriteMany</code> and <code class="literal">volumeMode: Block</code>. This is important for the following reasons:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The ReadWriteMany (RWX) access mode is required for live migration.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">Block</code> volume mode performs significantly better in comparison to the <code class="literal">Filesystem</code> volume mode. This is because the <code class="literal">Filesystem</code> volume mode uses more storage layers, including a file system layer and a disk image file. These layers are not necessary for VM disk storage.
						</p><p class="simpara">
							For example, if you use Red Hat OpenShift Data Foundation, Ceph RBD volumes are preferable to CephFS volumes.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								You cannot live migrate virtual machines that use:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										A storage volume with ReadWriteOnce (RWO) access mode
									</li><li class="listitem">
										Passthrough features such as GPUs
									</li></ul></div><p>
								Do not set the <code class="literal">evictionStrategy</code> field to <code class="literal">LiveMigrate</code> for these virtual machines.
							</p></div></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#openshift-storage-common-terms_storage-overview">Glossary of common terms for OpenShift Container Platform storage</a>
						</li></ul></div></section><section class="section" id="object-maximums_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.4. Object maximums</h3></div></div></div><p>
					You must consider the following tested object maximums when planning your cluster:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#planning-your-environment-according-to-object-maximums">OpenShift Container Platform object maximums</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/articles/6571671">OpenShift Virtualization object maximums</a>.
						</li></ul></div></section><section class="section" id="restricted-networks-environments_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.5. Restricted network environments</h3></div></div></div><p>
					If you install OpenShift Virtualization in a restricted environment with no internet connectivity, you must <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-restricted-networks">configure Operator Lifecycle Manager for restricted networks</a>.
				</p><p>
					If you have limited internet connectivity, you can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-configuring-proxy-support">configure proxy support in Operator Lifecycle Manager</a> to access the Red Hat-provided OperatorHub.
				</p></section><section class="section" id="live-migration_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.6. Live migration</h3></div></div></div><p>
					Live migration has the following requirements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Shared storage with <code class="literal">ReadWriteMany</code> (RWX) access mode.
						</li><li class="listitem">
							Sufficient RAM and network bandwidth.
						</li><li class="listitem">
							If the virtual machine uses a host model CPU, the nodes must support the virtual machine’s host model CPU.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must ensure that there is enough memory request capacity in the cluster to support node drains that result in live migrations. You can determine the approximate required spare memory by using the following calculation:
					</p><pre class="screen">Product of (Maximum number of nodes that can drain in parallel) and (Highest total VM memory request allocations across nodes)</pre><p>
						The default <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration-limits">number of migrations that can run in parallel</a> in the cluster is 5.
					</p></div></div></section><section class="section" id="cluster-high-availability-options_preparing-cluster-for-virt"><div class="titlepage"><div><div><h3 class="title">6.1.7. Cluster high-availability options</h3></div></div></div><p>
					You can configure one of the following high-availability (HA) options for your cluster:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Automatic high availability for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#ipi-install-overview">installer-provisioned infrastructure</a> (IPI) is available by deploying <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/machine_management/#machine-health-checks-about_deploying-machine-health-checks">machine health checks</a>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In OpenShift Container Platform clusters installed using installer-provisioned infrastructure and with MachineHealthCheck properly configured, if a node fails the MachineHealthCheck and becomes unavailable to the cluster, it is recycled. What happens next with VMs that ran on the failed node depends on a series of conditions. See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-runstrategies-vms_virt-create-vms">About RunStrategies for virtual machines</a> for more detailed information about the potential outcomes and how RunStrategies affect those outcomes.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Automatic high availability for both IPI and non-IPI is available by using the <span class="strong strong"><strong>Node Health Check Operator</strong></span> on the OpenShift Container Platform cluster to deploy the <code class="literal">NodeHealthCheck</code> controller. The controller identifies unhealthy nodes and uses the Self Node Remediation Operator to remediate the unhealthy nodes. For more information on remediation, fencing, and maintaining nodes, see the <a class="link" href="https://access.redhat.com/documentation/en-us/workload_availability_for_red_hat_openshift/23.2/html-single/remediation_fencing_and_maintenance/index#about-remediation-fencing-maintenance">Workload Availability for Red Hat OpenShift</a> documentation.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Node Health Check Operator is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
							</p></div></div></li><li class="listitem"><p class="simpara">
							High availability for any platform is available by using either a monitoring system or a qualified human to monitor node availability. When a node is lost, shut it down and run <code class="literal">oc delete node &lt;lost_node&gt;</code>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Without an external monitoring system or a qualified human monitoring node health, virtual machines lose high availability.
							</p></div></div></li></ul></div></section></section><section class="section" id="virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h2 class="title">6.2. Specifying nodes for OpenShift Virtualization components</h2></div></div></div><p>
				Specify the nodes where you want to deploy OpenShift Virtualization Operators, workloads, and controllers by configuring node placement rules.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can configure node placement for some components after installing OpenShift Virtualization, but there must not be virtual machines present if you want to configure node placement for workloads.
				</p></div></div><section class="section" id="virt-about-node-placement-virtualization-components_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h3 class="title">6.2.1. About node placement for virtualization components</h3></div></div></div><p>
					You might want to customize where OpenShift Virtualization deploys its components to ensure that:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Virtual machines only deploy on nodes that are intended for virtualization workloads.
						</li><li class="listitem">
							Operators only deploy on infrastructure nodes.
						</li><li class="listitem">
							Certain nodes are unaffected by OpenShift Virtualization. For example, you have workloads unrelated to virtualization running on your cluster, and you want those workloads to be isolated from OpenShift Virtualization.
						</li></ul></div><section class="section" id="how-to-apply-node-placement-rules-virt-components"><div class="titlepage"><div><div><h4 class="title">6.2.1.1. How to apply node placement rules to virtualization components</h4></div></div></div><p>
						You can specify node placement rules for a component by editing the corresponding object directly or by using the web console.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For the OpenShift Virtualization Operators that Operator Lifecycle Manager (OLM) deploys, edit the OLM <code class="literal">Subscription</code> object directly. Currently, you cannot configure node placement rules for the <code class="literal">Subscription</code> object by using the web console.
							</li><li class="listitem">
								For components that the OpenShift Virtualization Operators deploy, edit the <code class="literal">HyperConverged</code> object directly or configure it by using the web console during OpenShift Virtualization installation.
							</li><li class="listitem"><p class="simpara">
								For the hostpath provisioner, edit the <code class="literal">HostPathProvisioner</code> object directly or configure it by using the web console.
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									You must schedule the hostpath provisioner and the virtualization components on the same nodes. Otherwise, virtualization pods that use the hostpath provisioner cannot run.
								</p></div></div></li></ul></div><p>
						Depending on the object, you can use one or more of the following rule types:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nodeSelector</code></span></dt><dd>
									Allows pods to be scheduled on nodes that are labeled with the key-value pair or pairs that you specify in this field. The node must have labels that exactly match all listed pairs.
								</dd><dt><span class="term"><code class="literal">affinity</code></span></dt><dd>
									Enables you to use more expressive syntax to set rules that match nodes with pods. Affinity also allows for more nuance in how the rules are applied. For example, you can specify that a rule is a preference, rather than a hard requirement, so that pods are still scheduled if the rule is not satisfied.
								</dd><dt><span class="term"><code class="literal">tolerations</code></span></dt><dd>
									Allows pods to be scheduled on nodes that have matching taints. If a taint is applied to a node, that node only accepts pods that tolerate the taint.
								</dd></dl></div></section><section class="section" id="node-placement-olm-subscription_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.1.2. Node placement in the OLM Subscription object</h4></div></div></div><p>
						To specify the nodes where OLM deploys the OpenShift Virtualization Operators, edit the <code class="literal">Subscription</code> object during OpenShift Virtualization installation. You can include node placement rules in the <code class="literal">spec.config</code> field, as shown in the following example:
					</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1beta1
kind: Subscription
metadata:
  name: hco-operatorhub
  namespace: openshift-cnv
spec:
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  name: kubevirt-hyperconverged
  startingCSV: kubevirt-hyperconverged-operator.v4.13.4
  channel: "stable"
  config: <span id="CO2-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">config</code> field supports <code class="literal">nodeSelector</code> and <code class="literal">tolerations</code>, but it does not support <code class="literal">affinity</code>.
							</div></dd></dl></div></section><section class="section" id="node-placement-hco_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.1.3. Node placement in the HyperConverged object</h4></div></div></div><p>
						To specify the nodes where OpenShift Virtualization deploys its components, you can include the <code class="literal">nodePlacement</code> object in the HyperConverged Cluster custom resource (CR) file that you create during OpenShift Virtualization installation. You can include <code class="literal">nodePlacement</code> under the <code class="literal">spec.infra</code> and <code class="literal">spec.workloads</code> fields, as shown in the following example:
					</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  infra:
    nodePlacement: <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
    ...
  workloads:
    nodePlacement:
    ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">nodePlacement</code> fields support <code class="literal">nodeSelector</code>, <code class="literal">affinity</code>, and <code class="literal">tolerations</code> fields.
							</div></dd></dl></div></section><section class="section" id="node-placement-hpp_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.1.4. Node placement in the HostPathProvisioner object</h4></div></div></div><p>
						You can configure node placement rules in the <code class="literal">spec.workload</code> field of the <code class="literal">HostPathProvisioner</code> object that you create when you install the hostpath provisioner.
					</p><pre class="programlisting language-yaml">apiVersion: hostpathprovisioner.kubevirt.io/v1beta1
kind: HostPathProvisioner
metadata:
  name: hostpath-provisioner
spec:
  imagePullPolicy: IfNotPresent
  pathConfig:
    path: "&lt;/path/to/backing/directory&gt;"
    useNamingPrefix: false
  workload: <span id="CO4-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">workload</code> field supports <code class="literal">nodeSelector</code>, <code class="literal">affinity</code>, and <code class="literal">tolerations</code> fields.
							</div></dd></dl></div></section><section class="section _additional-resources" id="additional-resources_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.1.5. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-specifying-nodes-for-vms">Specifying nodes for virtual machines</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-node-selectors">Placing pods on specific nodes using node selectors</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-node-affinity">Controlling pod placement on nodes using node affinity rules</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-taints-tolerations">Controlling pod placement using node taints</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#installing-virt-cli">Installing OpenShift Virtualization using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#installing-virt-web">Installing OpenShift Virtualization using the web console</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-local-storage-for-vms">Configuring local storage for virtual machines</a>
							</li></ul></div></section></section><section class="section" id="example-manifests_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h3 class="title">6.2.2. Example manifests</h3></div></div></div><p>
					The following example YAML files use <code class="literal">nodePlacement</code>, <code class="literal">affinity</code>, and <code class="literal">tolerations</code> objects to customize node placement for OpenShift Virtualization components.
				</p><section class="section" id="olm-subscription-examples_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.2.1. Operator Lifecycle Manager Subscription object</h4></div></div></div><section class="section" id="virt-example-node-placement-node-selector-olm-subscription_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.1.1. Example: Node placement with nodeSelector in the OLM Subscription object</h5></div></div></div><p>
							In this example, <code class="literal">nodeSelector</code> is configured so that OLM places the OpenShift Virtualization Operators on nodes that are labeled with <code class="literal">example.io/example-infra-key = example-infra-value</code>.
						</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1beta1
kind: Subscription
metadata:
  name: hco-operatorhub
  namespace: openshift-cnv
spec:
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  name: kubevirt-hyperconverged
  startingCSV: kubevirt-hyperconverged-operator.v4.13.4
  channel: "stable"
  config:
    nodeSelector:
      example.io/example-infra-key: example-infra-value</pre></section><section class="section" id="virt-example-node-placement-tolerations-olm-subscription_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.1.2. Example: Node placement with tolerations in the OLM Subscription object</h5></div></div></div><p>
							In this example, nodes that are reserved for OLM to deploy OpenShift Virtualization Operators are labeled with the <code class="literal">key=virtualization:NoSchedule</code> taint. Only pods with the matching tolerations are scheduled to these nodes.
						</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1beta1
kind: Subscription
metadata:
  name: hco-operatorhub
  namespace: openshift-cnv
spec:
  source:  redhat-operators
  sourceNamespace: openshift-marketplace
  name: kubevirt-hyperconverged
  startingCSV: kubevirt-hyperconverged-operator.v4.13.4
  channel: "stable"
  config:
    tolerations:
    - key: "key"
      operator: "Equal"
      value: "virtualization"
      effect: "NoSchedule"</pre></section></section><section class="section" id="hyperconverged-cluster-cr-examples_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.2.2. HyperConverged object</h4></div></div></div><section class="section" id="virt-example-node-placement-node-selector-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.2.1. Example: Node placement with nodeSelector in the HyperConverged Cluster CR</h5></div></div></div><p>
							In this example, <code class="literal">nodeSelector</code> is configured so that infrastructure resources are placed on nodes that are labeled with <code class="literal">example.io/example-infra-key = example-infra-value</code> and workloads are placed on nodes labeled with <code class="literal">example.io/example-workloads-key = example-workloads-value</code>.
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  infra:
    nodePlacement:
      nodeSelector:
        example.io/example-infra-key: example-infra-value
  workloads:
    nodePlacement:
      nodeSelector:
        example.io/example-workloads-key: example-workloads-value</pre></section><section class="section" id="virt-example-node-placement-affinity-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.2.2. Example: Node placement with affinity in the HyperConverged Cluster CR</h5></div></div></div><p>
							In this example, <code class="literal">affinity</code> is configured so that infrastructure resources are placed on nodes that are labeled with <code class="literal">example.io/example-infra-key = example-value</code> and workloads are placed on nodes labeled with <code class="literal">example.io/example-workloads-key = example-workloads-value</code>. Nodes that have more than eight CPUs are preferred for workloads, but if they are not available, pods are still scheduled.
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  infra:
    nodePlacement:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: example.io/example-infra-key
                operator: In
                values:
                - example-infra-value
  workloads:
    nodePlacement:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: example.io/example-workloads-key
                operator: In
                values:
                - example-workloads-value
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 1
            preference:
              matchExpressions:
              - key: example.io/num-cpus
                operator: Gt
                values:
                - 8</pre></section><section class="section" id="virt-example-node-placement-tolerations-hyperconverged-cr_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.2.3. Example: Node placement with tolerations in the HyperConverged Cluster CR</h5></div></div></div><p>
							In this example, nodes that are reserved for OpenShift Virtualization components are labeled with the <code class="literal">key=virtualization:NoSchedule</code> taint. Only pods with the matching tolerations are scheduled to these nodes.
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  workloads:
    nodePlacement:
      tolerations:
      - key: "key"
        operator: "Equal"
        value: "virtualization"
        effect: "NoSchedule"</pre></section></section><section class="section" id="hpp-object-examples_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h4 class="title">6.2.2.3. HostPathProvisioner object</h4></div></div></div><section class="section" id="virt-example-node-placement-node-selector-hpp_virt-specifying-nodes-for-virtualization-components"><div class="titlepage"><div><div><h5 class="title">6.2.2.3.1. Example: Node placement with nodeSelector in the HostPathProvisioner object</h5></div></div></div><p>
							In this example, <code class="literal">nodeSelector</code> is configured so that workloads are placed on nodes labeled with <code class="literal">example.io/example-workloads-key = example-workloads-value</code>.
						</p><pre class="programlisting language-yaml">apiVersion: hostpathprovisioner.kubevirt.io/v1beta1
kind: HostPathProvisioner
metadata:
  name: hostpath-provisioner
spec:
  imagePullPolicy: IfNotPresent
  pathConfig:
    path: "&lt;/path/to/backing/directory&gt;"
    useNamingPrefix: false
  workload:
    nodeSelector:
      example.io/example-workloads-key: example-workloads-value</pre></section></section></section></section><section class="section" id="installing-virt-web"><div class="titlepage"><div><div><h2 class="title">6.3. Installing OpenShift Virtualization using the web console</h2></div></div></div><p>
				Install OpenShift Virtualization to add virtualization functionality to your OpenShift Container Platform cluster.
			</p><p>
				You can use the OpenShift Container Platform 4.13 <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/web_console/#web-console-overview_web-console">web console</a> to subscribe to and deploy the OpenShift Virtualization Operators.
			</p><section class="section" id="virt-installing-virt-operator_installing-virt-web"><div class="titlepage"><div><div><h3 class="title">6.3.1. Installing the OpenShift Virtualization Operator</h3></div></div></div><p>
					You can install the OpenShift Virtualization Operator from the OpenShift Container Platform web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Install OpenShift Container Platform 4.13 on your cluster.
						</li><li class="listitem">
							Log in to the OpenShift Container Platform web console as a user with <code class="literal">cluster-admin</code> permissions.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							From the <span class="strong strong"><strong>Administrator</strong></span> perspective, click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Filter by keyword</strong></span> field, type <span class="strong strong"><strong>Virtualization</strong></span>.
						</li><li class="listitem">
							Select the <span class="strong strong"><strong>OpenShift Virtualization Operator</strong></span> tile with the <span class="strong strong"><strong>Red Hat</strong></span> source label.
						</li><li class="listitem">
							Read the information about the Operator and click <span class="strong strong"><strong>Install</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Install Operator</strong></span> page:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Select <span class="strong strong"><strong>stable</strong></span> from the list of available <span class="strong strong"><strong>Update Channel</strong></span> options. This ensures that you install the version of OpenShift Virtualization that is compatible with your OpenShift Container Platform version.
								</li><li class="listitem"><p class="simpara">
									For <span class="strong strong"><strong>Installed Namespace</strong></span>, ensure that the <span class="strong strong"><strong>Operator recommended namespace</strong></span> option is selected. This installs the Operator in the mandatory <code class="literal">openshift-cnv</code> namespace, which is automatically created if it does not exist.
								</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										Attempting to install the OpenShift Virtualization Operator in a namespace other than <code class="literal">openshift-cnv</code> causes the installation to fail.
									</p></div></div></li><li class="listitem"><p class="simpara">
									For <span class="strong strong"><strong>Approval Strategy</strong></span>, it is highly recommended that you select <span class="strong strong"><strong>Automatic</strong></span>, which is the default value, so that OpenShift Virtualization automatically updates when a new version is available in the <span class="strong strong"><strong>stable</strong></span> update channel.
								</p><p class="simpara">
									While it is possible to select the <span class="strong strong"><strong>Manual</strong></span> approval strategy, this is inadvisable because of the high risk that it presents to the supportability and functionality of your cluster. Only select <span class="strong strong"><strong>Manual</strong></span> if you fully understand these risks and cannot use <span class="strong strong"><strong>Automatic</strong></span>.
								</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										Because OpenShift Virtualization is only supported when used with the corresponding OpenShift Container Platform version, missing OpenShift Virtualization updates can cause your cluster to become unsupported.
									</p></div></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Install</strong></span> to make the Operator available to the <code class="literal">openshift-cnv</code> namespace.
						</li><li class="listitem">
							When the Operator installs successfully, click <span class="strong strong"><strong>Create HyperConverged</strong></span>.
						</li><li class="listitem">
							Optional: Configure <span class="strong strong"><strong>Infra</strong></span> and <span class="strong strong"><strong>Workloads</strong></span> node placement options for OpenShift Virtualization components.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create</strong></span> to launch OpenShift Virtualization.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Pods</strong></span> page and monitor the OpenShift Virtualization pods until they are all <span class="strong strong"><strong>Running</strong></span>. After all the pods display the <span class="strong strong"><strong>Running</strong></span> state, you can use OpenShift Virtualization.
						</li></ul></div></section><section class="section" id="installing-virt-web-next-steps"><div class="titlepage"><div><div><h3 class="title">6.3.2. Next steps</h3></div></div></div><p>
					You might want to additionally configure the following components:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-hpp-basic-storage-pool_virt-configuring-local-storage-for-vms">hostpath provisioner</a> is a local storage provisioner designed for OpenShift Virtualization. If you want to configure local storage for virtual machines, you must enable the hostpath provisioner first.
						</li></ul></div></section></section><section class="section" id="installing-virt-cli"><div class="titlepage"><div><div><h2 class="title">6.4. Installing OpenShift Virtualization using the CLI</h2></div></div></div><p>
				Install OpenShift Virtualization to add virtualization functionality to your OpenShift Container Platform cluster. You can subscribe to and deploy the OpenShift Virtualization Operators by using the command line to apply manifests to your cluster.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To specify the nodes where you want OpenShift Virtualization to install its components, <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-specifying-nodes-for-virtualization-components">configure node placement rules</a>.
				</p></div></div><section class="section" id="prerequisites_installing-virt-cli"><div class="titlepage"><div><div><h3 class="title">6.4.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Install OpenShift Container Platform 4.13 on your cluster.
						</li><li class="listitem">
							Install the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							Log in as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div></section><section class="section" id="virt-subscribing-cli_installing-virt-cli"><div class="titlepage"><div><div><h3 class="title">6.4.2. Subscribing to the OpenShift Virtualization catalog by using the CLI</h3></div></div></div><p>
					Before you install OpenShift Virtualization, you must subscribe to the OpenShift Virtualization catalog. Subscribing gives the <code class="literal">openshift-cnv</code> namespace access to the OpenShift Virtualization Operators.
				</p><p>
					To subscribe, configure <code class="literal">Namespace</code>, <code class="literal">OperatorGroup</code>, and <code class="literal">Subscription</code> objects by applying a single manifest to your cluster.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a YAML file that contains the following manifest:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: openshift-cnv
---
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: kubevirt-hyperconverged-group
  namespace: openshift-cnv
spec:
  targetNamespaces:
    - openshift-cnv
---
apiVersion: operators.coreos.com/v1beta1
kind: Subscription
metadata:
  name: hco-operatorhub
  namespace: openshift-cnv
spec:
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  name: kubevirt-hyperconverged
  startingCSV: kubevirt-hyperconverged-operator.v4.13.4
  channel: "stable" <span id="CO5-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Using the <code class="literal">stable</code> channel ensures that you install the version of OpenShift Virtualization that is compatible with your OpenShift Container Platform version.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Create the required <code class="literal">Namespace</code>, <code class="literal">OperatorGroup</code>, and <code class="literal">Subscription</code> objects for OpenShift Virtualization by running the following command:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;file name&gt;.yaml</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-certificate-rotation">configure certificate rotation</a> parameters in the YAML file.
					</p></div></div></section><section class="section" id="virt-deploying-operator-cli_installing-virt-cli"><div class="titlepage"><div><div><h3 class="title">6.4.3. Deploying the OpenShift Virtualization Operator by using the CLI</h3></div></div></div><p>
					You can deploy the OpenShift Virtualization Operator by using the <code class="literal">oc</code> CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An active subscription to the OpenShift Virtualization catalog in the <code class="literal">openshift-cnv</code> namespace.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a YAML file that contains the following manifest:
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:</pre></li><li class="listitem"><p class="simpara">
							Deploy the OpenShift Virtualization Operator by running the following command:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;file_name&gt;.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure that OpenShift Virtualization deployed successfully by watching the <code class="literal">PHASE</code> of the cluster service version (CSV) in the <code class="literal">openshift-cnv</code> namespace. Run the following command:
						</p><pre class="programlisting language-terminal">$ watch oc get csv -n openshift-cnv</pre><p class="simpara">
							The following output displays if deployment was successful:
						</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                                      DISPLAY                    VERSION   REPLACES   PHASE
kubevirt-hyperconverged-operator.v4.13.4   OpenShift Virtualization   4.13.4                Succeeded</pre>

							</p></div></li></ul></div></section><section class="section" id="next-steps"><div class="titlepage"><div><div><h3 class="title">6.4.4. Next steps</h3></div></div></div><p>
					You might want to additionally configure the following components:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-hpp-basic-storage-pool_virt-configuring-local-storage-for-vms">hostpath provisioner</a> is a local storage provisioner designed for OpenShift Virtualization. If you want to configure local storage for virtual machines, you must enable the hostpath provisioner first.
						</li></ul></div></section></section><section class="section" id="uninstalling-virt"><div class="titlepage"><div><div><h2 class="title">6.5. Uninstalling OpenShift Virtualization</h2></div></div></div><p>
				You uninstall OpenShift Virtualization by using the web console or the command line interface (CLI) to delete the OpenShift Virtualization workloads, the Operator, and its resources.
			</p><section class="section" id="uninstalling-virt-web-console_uninstalling-virt"><div class="titlepage"><div><div><h3 class="title">6.5.1. Uninstalling OpenShift Virtualization by using the web console</h3></div></div></div><p>
					You uninstall OpenShift Virtualization by using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/web_console/#web-console-overview_web-console">web console</a> to perform the following tasks:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-deleting-deployment-custom-resource_uninstalling-virt">Delete the <code class="literal">HyperConverged</code> CR</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#olm-deleting-operators-from-a-cluster-using-web-console_uninstalling-virt">Delete the OpenShift Virtualization Operator</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#deleting-a-namespace-using-the-web-console_uninstalling-virt">Delete the <code class="literal">openshift-cnv</code> namespace</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-deleting-virt-crds-web_uninstalling-virt">Delete the OpenShift Virtualization custom resource definitions (CRDs)</a>.
						</li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						You must first delete all <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-delete-vm-web_virt-delete-vms">virtual machines</a>, and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-deleting-vmis-cli_virt-manage-vmis">virtual machine instances</a>.
					</p><p>
						You cannot uninstall OpenShift Virtualization while its workloads remain on the cluster.
					</p></div></div><section class="section" id="virt-deleting-deployment-custom-resource_uninstalling-virt"><div class="titlepage"><div><div><h4 class="title">6.5.1.1. Deleting the HyperConverged custom resource</h4></div></div></div><p>
						To uninstall OpenShift Virtualization, you first delete the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform cluster using an account with <code class="literal">cluster-admin</code> permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page.
							</li><li class="listitem">
								Select the OpenShift Virtualization Operator.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>OpenShift Virtualization Deployment</strong></span> tab.
							</li><li class="listitem">
								Click the Options menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 beside <code class="literal">kubevirt-hyperconverged</code> and select <span class="strong strong"><strong>Delete HyperConverged</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Delete</strong></span> in the confirmation window.
							</li></ol></div></section><section class="section" id="olm-deleting-operators-from-a-cluster-using-web-console_uninstalling-virt"><div class="titlepage"><div><div><h4 class="title">6.5.1.2. Deleting Operators from a cluster using the web console</h4></div></div></div><p>
						Cluster administrators can delete installed Operators from a selected namespace by using the web console.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform cluster web console using an account with <code class="literal">cluster-admin</code> permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page.
							</li><li class="listitem">
								Scroll or enter a keyword into the <span class="strong strong"><strong>Filter by name</strong></span> field to find the Operator that you want to remove. Then, click on it.
							</li><li class="listitem"><p class="simpara">
								On the right side of the <span class="strong strong"><strong>Operator Details</strong></span> page, select <span class="strong strong"><strong>Uninstall Operator</strong></span> from the <span class="strong strong"><strong>Actions</strong></span> list.
							</p><p class="simpara">
								An <span class="strong strong"><strong>Uninstall Operator?</strong></span> dialog box is displayed.
							</p></li><li class="listitem"><p class="simpara">
								Select <span class="strong strong"><strong>Uninstall</strong></span> to remove the Operator, Operator deployments, and pods. Following this action, the Operator stops running and no longer receives updates.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									This action does not remove resources managed by the Operator, including custom resource definitions (CRDs) and custom resources (CRs). Dashboards and navigation items enabled by the web console and off-cluster resources that continue to run might need manual clean up. To remove these after uninstalling the Operator, you might need to manually delete the Operator CRDs.
								</p></div></div></li></ol></div></section><section class="section" id="deleting-a-namespace-using-the-web-console_uninstalling-virt"><div class="titlepage"><div><div><h4 class="title">6.5.1.3. Deleting a namespace using the web console</h4></div></div></div><p>
						You can delete a namespace by using the OpenShift Container Platform web console.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform cluster using an account with <code class="literal">cluster-admin</code> permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Namespaces</strong></span>.
							</li><li class="listitem">
								Locate the namespace that you want to delete in the list of namespaces.
							</li><li class="listitem">
								On the far right side of the namespace listing, select <span class="strong strong"><strong>Delete Namespace</strong></span> from the Options menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 .
							</li><li class="listitem">
								When the <span class="strong strong"><strong>Delete Namespace</strong></span> pane opens, enter the name of the namespace that you want to delete in the field.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Delete</strong></span>.
							</li></ol></div></section><section class="section" id="virt-deleting-virt-crds-web_uninstalling-virt"><div class="titlepage"><div><div><h4 class="title">6.5.1.4. Deleting OpenShift Virtualization custom resource definitions</h4></div></div></div><p>
						You can delete the OpenShift Virtualization custom resource definitions (CRDs) by using the web console.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to an OpenShift Container Platform cluster using an account with <code class="literal">cluster-admin</code> permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>CustomResourceDefinitions</strong></span>.
							</li><li class="listitem">
								Select the <span class="strong strong"><strong>Label</strong></span> filter and enter <code class="literal">operators.coreos.com/kubevirt-hyperconverged.openshift-cnv</code> in the <span class="strong strong"><strong>Search</strong></span> field to display the OpenShift Virtualization CRDs.
							</li><li class="listitem">
								Click the Options menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 beside each CRD and select <span class="strong strong"><strong>Delete CustomResourceDefinition</strong></span>.
							</li></ol></div></section></section><section class="section" id="virt-deleting-virt-cli_uninstalling-virt"><div class="titlepage"><div><div><h3 class="title">6.5.2. Uninstalling OpenShift Virtualization by using the CLI</h3></div></div></div><p>
					You can uninstall OpenShift Virtualization by using the OpenShift CLI (<code class="literal">oc</code>).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to an OpenShift Container Platform cluster using an account with <code class="literal">cluster-admin</code> permissions.
						</li><li class="listitem">
							You have installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You have deleted all virtual machines and virtual machine instances. You cannot uninstall OpenShift Virtualization while its workloads remain on the cluster.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Delete the <code class="literal">HyperConverged</code> custom resource:
						</p><pre class="programlisting language-terminal">$ oc delete HyperConverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							Delete the OpenShift Virtualization Operator subscription:
						</p><pre class="programlisting language-terminal">$ oc delete subscription kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							Delete the OpenShift Virtualization <code class="literal">ClusterServiceVersion</code> resource:
						</p><pre class="programlisting language-terminal">$ oc delete csv -n openshift-cnv -l operators.coreos.com/kubevirt-hyperconverged.openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							Delete the OpenShift Virtualization namespace:
						</p><pre class="programlisting language-terminal">$ oc delete namespace openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							List the OpenShift Virtualization custom resource definitions (CRDs) by running the <code class="literal">oc delete crd</code> command with the <code class="literal">dry-run</code> option:
						</p><pre class="programlisting language-terminal">$ oc delete crd --dry-run=client -l operators.coreos.com/kubevirt-hyperconverged.openshift-cnv</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">customresourcedefinition.apiextensions.k8s.io "cdis.cdi.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "hostpathprovisioners.hostpathprovisioner.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "hyperconvergeds.hco.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "kubevirts.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "networkaddonsconfigs.networkaddonsoperator.network.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "ssps.ssp.kubevirt.io" deleted (dry run)
customresourcedefinition.apiextensions.k8s.io "tektontasks.tektontasks.kubevirt.io" deleted (dry run)</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Delete the CRDs by running the <code class="literal">oc delete crd</code> command without the <code class="literal">dry-run</code> option:
						</p><pre class="programlisting language-terminal">$ oc delete crd -l operators.coreos.com/kubevirt-hyperconverged.openshift-cnv</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-delete-vm-web_virt-delete-vms">Deleting virtual machines</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-deleting-vmis-cli_virt-manage-vmis">Deleting virtual machine instances</a>
						</li></ul></div></section></section></section><section class="chapter" id="upgrading-virt"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Updating OpenShift Virtualization</h1></div></div></div><p>
			Learn how Operator Lifecycle Manager (OLM) delivers z-stream and minor version updates for OpenShift Virtualization.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Updating to OpenShift Virtualization 4.13 from OpenShift Virtualization 4.12.2 is not supported.
			</p></div></div><section class="section" id="virt-rhel-9_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.1. OpenShift Virtualization on RHEL 9</h2></div></div></div><p>
				OpenShift Virtualization 4.13 is based on Red Hat Enterprise Linux (RHEL) 9. You can update to OpenShift Virtualization 4.13 from a version that was based on RHEL 8 by following the standard OpenShift Virtualization update procedure. No additional steps are required.
			</p><p>
				As in previous versions, you can perform the update without disrupting running workloads. OpenShift Virtualization 4.13 supports live migration from RHEL 8 nodes to RHEL 9 nodes.
			</p><section class="section" id="new-rhel-9-machine-type_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.1.1. New RHEL 9 machine type</h3></div></div></div><p>
					This update also introduces a new RHEL 9 machine type for VMs: <code class="literal">machineType: pc-q35-rhel9.2.0</code>. All VM templates that are included with OpenShift Virtualization now use this machine type by default.
				</p><p>
					Updating OpenShift Virtualization does not change the <code class="literal">machineType</code> value of any existing VMs. These VMs continue to function as they did before the update.
				</p><p>
					While it is not required, you might want to change a VM’s machine type to <code class="literal">pc-q35-rhel9.2.0</code> so that it can benefit from RHEL 9 improvements.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Before you change a VM’s <code class="literal">machineType</code> value, you must shut down the VM.
					</p></div></div></section></section><section class="section" id="virt-about-upgrading-virt_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.2. About updating OpenShift Virtualization</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Operator Lifecycle Manager (OLM) manages the lifecycle of the OpenShift Virtualization Operator. The Marketplace Operator, which is deployed during OpenShift Container Platform installation, makes external Operators available to your cluster.
					</li><li class="listitem">
						OLM provides z-stream and minor version updates for OpenShift Virtualization. Minor version updates become available when you update OpenShift Container Platform to the next minor version. You cannot update OpenShift Virtualization to the next minor version without first updating OpenShift Container Platform.
					</li><li class="listitem">
						OpenShift Virtualization subscriptions use a single update channel that is named <span class="strong strong"><strong>stable</strong></span>. The <span class="strong strong"><strong>stable</strong></span> channel ensures that your OpenShift Virtualization and OpenShift Container Platform versions are compatible.
					</li><li class="listitem"><p class="simpara">
						If your subscription’s approval strategy is set to <span class="strong strong"><strong>Automatic</strong></span>, the update process starts as soon as a new version of the Operator is available in the <span class="strong strong"><strong>stable</strong></span> channel. It is highly recommended to use the <span class="strong strong"><strong>Automatic</strong></span> approval strategy to maintain a supportable environment. Each minor version of OpenShift Virtualization is only supported if you run the corresponding OpenShift Container Platform version. For example, you must run OpenShift Virtualization 4.13 on OpenShift Container Platform 4.13.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Though it is possible to select the <span class="strong strong"><strong>Manual</strong></span> approval strategy, this is not recommended because it risks the supportability and functionality of your cluster. With the <span class="strong strong"><strong>Manual</strong></span> approval strategy, you must manually approve every pending update. If OpenShift Container Platform and OpenShift Virtualization updates are out of sync, your cluster becomes unsupported.
							</li></ul></div></li><li class="listitem">
						The amount of time an update takes to complete depends on your network connection. Most automatic updates complete within fifteen minutes.
					</li><li class="listitem">
						Updating OpenShift Virtualization does not interrupt network connections.
					</li><li class="listitem">
						Data volumes and their associated persistent volume claims are preserved during update.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you have virtual machines running that use hostpath provisioner storage, they cannot be live migrated and might block an OpenShift Container Platform cluster update.
				</p><p>
					As a workaround, you can reconfigure the virtual machines so that they can be powered off automatically during a cluster update. Remove the <code class="literal">evictionStrategy: LiveMigrate</code> field and set the <code class="literal">runStrategy</code> field to <code class="literal">Always</code>.
				</p></div></div><section class="section" id="virt-about-workload-updates_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.2.1. About workload updates</h3></div></div></div><p>
					When you update OpenShift Virtualization, virtual machine workloads, including <code class="literal">libvirt</code>, <code class="literal">virt-launcher</code>, and <code class="literal">qemu</code>, update automatically if they support live migration.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Each virtual machine has a <code class="literal">virt-launcher</code> pod that runs the virtual machine instance (VMI). The <code class="literal">virt-launcher</code> pod runs an instance of <code class="literal">libvirt</code>, which is used to manage the virtual machine (VM) process.
					</p></div></div><p>
					You can configure how workloads are updated by editing the <code class="literal">spec.workloadUpdateStrategy</code> stanza of the <code class="literal">HyperConverged</code> custom resource (CR). There are two available workload update methods: <code class="literal">LiveMigrate</code> and <code class="literal">Evict</code>.
				</p><p>
					Because the <code class="literal">Evict</code> method shuts down VMI pods, only the <code class="literal">LiveMigrate</code> update strategy is enabled by default.
				</p><p>
					When <code class="literal">LiveMigrate</code> is the only update strategy enabled:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							VMIs that support live migration are migrated during the update process. The VM guest moves into a new pod with the updated components enabled.
						</li><li class="listitem"><p class="simpara">
							VMIs that do not support live migration are not disrupted or updated.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									If a VMI has the <code class="literal">LiveMigrate</code> eviction strategy but does not support live migration, it is not updated.
								</li></ul></div></li></ul></div><p>
					If you enable both <code class="literal">LiveMigrate</code> and <code class="literal">Evict</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							VMIs that support live migration use the <code class="literal">LiveMigrate</code> update strategy.
						</li><li class="listitem">
							VMIs that do not support live migration use the <code class="literal">Evict</code> update strategy. If a VMI is controlled by a <code class="literal">VirtualMachine</code> object that has a <code class="literal">runStrategy</code> value of <code class="literal">always</code>, a new VMI is created in a new pod with updated components.
						</li></ul></div><h5 id="migration-attempts-timeouts_upgrading-virt">Migration attempts and timeouts</h5><p>
					When updating workloads, live migration fails if a pod is in the <code class="literal">Pending</code> state for the following periods:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">5 minutes</span></dt><dd>
								If the pod is pending because it is <code class="literal">Unschedulable</code>.
							</dd><dt><span class="term">15 minutes</span></dt><dd>
								If the pod is stuck in the pending state for any reason.
							</dd></dl></div><p>
					When a VMI fails to migrate, the <code class="literal">virt-controller</code> tries to migrate it again. It repeats this process until all migratable VMIs are running on new <code class="literal">virt-launcher</code> pods. If a VMI is improperly configured, however, these attempts can repeat indefinitely.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Each attempt corresponds to a migration object. Only the five most recent attempts are held in a buffer. This prevents migration objects from accumulating on the system while retaining information for debugging.
					</p></div></div></section><section class="section" id="virt-about-eus-updates_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.2.2. About EUS-to-EUS updates</h3></div></div></div><p>
					Every even-numbered minor version of OpenShift Container Platform, including 4.10 and 4.12, is an Extended Update Support (EUS) version. However, because Kubernetes design mandates serial minor version updates, you cannot directly update from one EUS version to the next.
				</p><p>
					After you update from the source EUS version to the next odd-numbered minor version, you must sequentially update OpenShift Virtualization to all z-stream releases of that minor version that are on your update path. When you have upgraded to the latest applicable z-stream version, you can then update OpenShift Container Platform to the target EUS minor version.
				</p><p>
					When the OpenShift Container Platform update succeeds, the corresponding update for OpenShift Virtualization becomes available. You can now update OpenShift Virtualization to the target EUS version.
				</p><section class="section" id="preparing-to-update_upgrading-virt"><div class="titlepage"><div><div><h4 class="title">7.2.2.1. Preparing to update</h4></div></div></div><p>
						Before beginning an EUS-to-EUS update, you must:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Pause worker nodes' machine config pools before you start an EUS-to-EUS update so that the workers are not rebooted twice.
							</li><li class="listitem">
								Disable automatic workload updates before you begin the update process. This is to prevent OpenShift Virtualization from migrating or evicting your virtual machines (VMs) until you update to your target EUS version.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							By default, OpenShift Virtualization automatically updates workloads, such as the <code class="literal">virt-launcher</code> pod, when you update the OpenShift Virtualization Operator. You can configure this behavior in the <code class="literal">spec.workloadUpdateStrategy</code> stanza of the <code class="literal">HyperConverged</code> custom resource.
						</p></div></div><p>
						Learn more about <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#preparing-eus-eus-upgrade">preparing to perform an EUS-to-EUS update</a>.
					</p></section></section></section><section class="section" id="virt-preventing-workload-updates-during-eus-update_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.3. Preventing workload updates during an EUS-to-EUS update</h2></div></div></div><p>
				When you update from one Extended Update Support (EUS) version to the next, you must manually disable automatic workload updates to prevent OpenShift Virtualization from migrating or evicting workloads during the update process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are running an EUS version of OpenShift Container Platform and want to update to the next EUS version. You have not yet updated to the odd-numbered version in between.
					</li><li class="listitem">
						You read "Preparing to perform an EUS-to-EUS update" and learned the caveats and requirements that pertain to your OpenShift Container Platform cluster.
					</li><li class="listitem">
						You paused the worker nodes' machine config pools as directed by the OpenShift Container Platform documentation.
					</li><li class="listitem">
						It is recommended that you use the default <span class="strong strong"><strong>Automatic</strong></span> approval strategy. If you use the <span class="strong strong"><strong>Manual</strong></span> approval strategy, you must approve all pending updates in the web console. For more details, refer to the "Manually approving a pending Operator update" section.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Back up the current <code class="literal">workloadUpdateMethods</code> configuration by running the following command:
					</p><pre class="programlisting language-terminal">$ WORKLOAD_UPDATE_METHODS=$(oc get kv kubevirt-kubevirt-hyperconverged -n openshift-cnv -o jsonpath='{.spec.workloadUpdateStrategy.workloadUpdateMethods}')</pre></li><li class="listitem"><p class="simpara">
						Turn off all workload update methods by running the following command:
					</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n openshift-cnv --type json -p '[{"op":"replace","path":"/spec/workloadUpdateStrategy/workloadUpdateMethods", "value":[]}]'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">hyperconverged.hco.kubevirt.io/kubevirt-hyperconverged patched</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">HyperConverged</code> Operator is <code class="literal">Upgradeable</code> before you continue. Enter the following command and monitor the output:
					</p><pre class="programlisting language-terminal">$ oc get hco kubevirt-hyperconverged -n openshift-cnv -o json | jq ".status.conditions"</pre><div class="example" id="idm140196974894416"><p class="title"><strong>Example 7.1. Example output</strong></p><div class="example-contents"><pre class="programlisting language-json">[
  {
    "lastTransitionTime": "2022-12-09T16:29:11Z",
    "message": "Reconcile completed successfully",
    "observedGeneration": 3,
    "reason": "ReconcileCompleted",
    "status": "True",
    "type": "ReconcileComplete"
  },
  {
    "lastTransitionTime": "2022-12-09T20:30:10Z",
    "message": "Reconcile completed successfully",
    "observedGeneration": 3,
    "reason": "ReconcileCompleted",
    "status": "True",
    "type": "Available"
  },
  {
    "lastTransitionTime": "2022-12-09T20:30:10Z",
    "message": "Reconcile completed successfully",
    "observedGeneration": 3,
    "reason": "ReconcileCompleted",
    "status": "False",
    "type": "Progressing"
  },
  {
    "lastTransitionTime": "2022-12-09T16:39:11Z",
    "message": "Reconcile completed successfully",
    "observedGeneration": 3,
    "reason": "ReconcileCompleted",
    "status": "False",
    "type": "Degraded"
  },
  {
    "lastTransitionTime": "2022-12-09T20:30:10Z",
    "message": "Reconcile completed successfully",
    "observedGeneration": 3,
    "reason": "ReconcileCompleted",
    "status": "True",
    "type": "Upgradeable" <span id="CO6-1"><!--Empty--></span><span class="callout">1</span>
  }
]</pre></div></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The OpenShift Virtualization Operator has the <code class="literal">Upgradeable</code> status.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Manually update your cluster from the source EUS version to the next minor version of OpenShift Container Platform:
					</p><pre class="programlisting language-terminal">$ oc adm upgrade</pre><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Check the current version by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get clusterversion</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Updating OpenShift Container Platform to the next version is a prerequisite for updating OpenShift Virtualization. For more details, refer to the "Updating clusters" section of the OpenShift Container Platform documentation.
								</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Update OpenShift Virtualization.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With the default <span class="strong strong"><strong>Automatic</strong></span> approval strategy, OpenShift Virtualization automatically updates to the corresponding version after you update OpenShift Container Platform.
							</li><li class="listitem">
								If you use the <span class="strong strong"><strong>Manual</strong></span> approval strategy, approve the pending updates by using the web console.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Monitor the OpenShift Virtualization update by running the following command:
					</p><pre class="programlisting language-terminal">$ oc get csv -n openshift-cnv</pre></li><li class="listitem">
						Update OpenShift Virtualization to every z-stream version that is available for the non-EUS minor version, monitoring each update by running the command shown in the previous step.
					</li><li class="listitem"><p class="simpara">
						Confirm that OpenShift Virtualization successfully updated to the latest z-stream release of the non-EUS version by running the following command:
					</p><pre class="programlisting language-terminal">$ oc get hco kubevirt-hyperconverged -n openshift-cnv -o json | jq ".status.versions"</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">[
  {
    "name": "operator",
    "version": "4.13.4"
  }
]</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Wait until the <code class="literal">HyperConverged</code> Operator has the <code class="literal">Upgradeable</code> status before you perform the next update. Enter the following command and monitor the output:
					</p><pre class="programlisting language-terminal">$ oc get hco kubevirt-hyperconverged -n openshift-cnv -o json | jq ".status.conditions"</pre></li><li class="listitem">
						Update OpenShift Container Platform to the target EUS version.
					</li><li class="listitem"><p class="simpara">
						Confirm that the update succeeded by checking the cluster version:
					</p><pre class="programlisting language-terminal">$ oc get clusterversion</pre></li><li class="listitem"><p class="simpara">
						Update OpenShift Virtualization to the target EUS version.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With the default <span class="strong strong"><strong>Automatic</strong></span> approval strategy, OpenShift Virtualization automatically updates to the corresponding version after you update OpenShift Container Platform.
							</li><li class="listitem">
								If you use the <span class="strong strong"><strong>Manual</strong></span> approval strategy, approve the pending updates by using the web console.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Monitor the OpenShift Virtualization update by running the following command:
					</p><pre class="programlisting language-terminal">$ oc get csv -n openshift-cnv</pre><p class="simpara">
						The update completes when the <code class="literal">VERSION</code> field matches the target EUS version and the <code class="literal">PHASE</code> field reads <code class="literal">Succeeded</code>.
					</p></li><li class="listitem"><p class="simpara">
						Restore the workload update methods configuration that you backed up:
					</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n openshift-cnv --type json -p "[{\"op\":\"add\",\"path\":\"/spec/workloadUpdateStrategy/workloadUpdateMethods\", \"value\":$WORKLOAD_UPDATE_METHODS}]"</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">hyperconverged.hco.kubevirt.io/kubevirt-hyperconverged patched</pre>

						</p></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Check the status of VM migration by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get vmim -A</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You can now unpause the worker nodes' machine config pools.
					</li></ul></div></section><section class="section" id="virt-configuring-workload-update-methods_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.4. Configuring workload update methods</h2></div></div></div><p>
				You can configure workload update methods by editing the <code class="literal">HyperConverged</code> custom resource (CR).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To use live migration as an update method, you must first enable live migration in the cluster.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If a <code class="literal">VirtualMachineInstance</code> CR contains <code class="literal">evictionStrategy: LiveMigrate</code> and the virtual machine instance (VMI) does not support live migration, the VMI will not update.
						</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To open the <code class="literal">HyperConverged</code> CR in your default editor, run the following command:
					</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">workloadUpdateStrategy</code> stanza of the <code class="literal">HyperConverged</code> CR. For example:
					</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  workloadUpdateStrategy:
    workloadUpdateMethods: <span id="CO7-1"><!--Empty--></span><span class="callout">1</span>
    - LiveMigrate <span id="CO7-2"><!--Empty--></span><span class="callout">2</span>
    - Evict <span id="CO7-3"><!--Empty--></span><span class="callout">3</span>
    batchEvictionSize: 10 <span id="CO7-4"><!--Empty--></span><span class="callout">4</span>
    batchEvictionInterval: "1m0s" <span id="CO7-5"><!--Empty--></span><span class="callout">5</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The methods that can be used to perform automated workload updates. The available values are <code class="literal">LiveMigrate</code> and <code class="literal">Evict</code>. If you enable both options as shown in this example, updates use <code class="literal">LiveMigrate</code> for VMIs that support live migration and <code class="literal">Evict</code> for any VMIs that do not support live migration. To disable automatic workload updates, you can either remove the <code class="literal">workloadUpdateStrategy</code> stanza or set <code class="literal">workloadUpdateMethods: []</code> to leave the array empty.
							</div></dd><dt><a href="#CO7-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The least disruptive update method. VMIs that support live migration are updated by migrating the virtual machine (VM) guest into a new pod with the updated components enabled. If <code class="literal">LiveMigrate</code> is the only workload update method listed, VMIs that do not support live migration are not disrupted or updated.
							</div></dd><dt><a href="#CO7-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								A disruptive method that shuts down VMI pods during upgrade. <code class="literal">Evict</code> is the only update method available if live migration is not enabled in the cluster. If a VMI is controlled by a <code class="literal">VirtualMachine</code> object that has <code class="literal">runStrategy: always</code> configured, a new VMI is created in a new pod with updated components.
							</div></dd><dt><a href="#CO7-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The number of VMIs that can be forced to be updated at a time by using the <code class="literal">Evict</code> method. This does not apply to the <code class="literal">LiveMigrate</code> method.
							</div></dd><dt><a href="#CO7-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								The interval to wait before evicting the next batch of workloads. This does not apply to the <code class="literal">LiveMigrate</code> method.
							</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can configure live migration limits and timeouts by editing the <code class="literal">spec.liveMigrationConfig</code> stanza of the <code class="literal">HyperConverged</code> CR.
						</p></div></div></li><li class="listitem">
						To apply your changes, save and exit the editor.
					</li></ol></div></section><section class="section" id="approving-operator-upgrades_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.5. Approving pending Operator updates</h2></div></div></div><section class="section" id="olm-approving-pending-upgrade_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.5.1. Manually approving a pending Operator update</h3></div></div></div><p>
					If an installed Operator has the approval strategy in its subscription set to <span class="strong strong"><strong>Manual</strong></span>, when new updates are released in its current update channel, the update must be manually approved before installation can begin.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An Operator previously installed using Operator Lifecycle Manager (OLM).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the <span class="strong strong"><strong>Administrator</strong></span> perspective of the OpenShift Container Platform web console, navigate to <span class="strong strong"><strong>Operators → Installed Operators</strong></span>.
						</li><li class="listitem">
							Operators that have a pending update display a status with <span class="strong strong"><strong>Upgrade available</strong></span>. Click the name of the Operator you want to update.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Subscription</strong></span> tab. Any updates requiring approval are displayed next to <span class="strong strong"><strong>Upgrade status</strong></span>. For example, it might display <span class="strong strong"><strong>1 requires approval</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>1 requires approval</strong></span>, then click <span class="strong strong"><strong>Preview Install Plan</strong></span>.
						</li><li class="listitem">
							Review the resources that are listed as available for update. When satisfied, click <span class="strong strong"><strong>Approve</strong></span>.
						</li><li class="listitem">
							Navigate back to the <span class="strong strong"><strong>Operators → Installed Operators</strong></span> page to monitor the progress of the update. When complete, the status changes to <span class="strong strong"><strong>Succeeded</strong></span> and <span class="strong strong"><strong>Up to date</strong></span>.
						</li></ol></div></section></section><section class="section" id="monitoring-upgrade-status_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.6. Monitoring update status</h2></div></div></div><section class="section" id="virt-monitoring-upgrade-status_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.6.1. Monitoring OpenShift Virtualization upgrade status</h3></div></div></div><p>
					To monitor the status of a OpenShift Virtualization Operator upgrade, watch the cluster service version (CSV) <code class="literal">PHASE</code>. You can also monitor the CSV conditions in the web console or by running the command provided here.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">PHASE</code> and conditions values are approximations that are based on available information.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Log in to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							Install the OpenShift CLI (<code class="literal">oc</code>).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command:
						</p><pre class="programlisting language-terminal">$ oc get csv -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							Review the output, checking the <code class="literal">PHASE</code> field. For example:
						</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">VERSION  REPLACES                                        PHASE
4.9.0    kubevirt-hyperconverged-operator.v4.8.2         Installing
4.9.0    kubevirt-hyperconverged-operator.v4.9.0         Replacing</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Optional: Monitor the aggregated status of all OpenShift Virtualization component conditions by running the following command:
						</p><pre class="programlisting language-terminal">$ oc get hco -n openshift-cnv kubevirt-hyperconverged \
-o=jsonpath='{range .status.conditions[*]}{.type}{"\t"}{.status}{"\t"}{.message}{"\n"}{end}'</pre><p class="simpara">
							A successful upgrade results in the following output:
						</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">ReconcileComplete  True  Reconcile completed successfully
Available          True  Reconcile completed successfully
Progressing        False Reconcile completed successfully
Degraded           False Reconcile completed successfully
Upgradeable        True  Reconcile completed successfully</pre>

							</p></div></li></ol></div></section><section class="section" id="virt-viewing-outdated-workloads_upgrading-virt"><div class="titlepage"><div><div><h3 class="title">7.6.2. Viewing outdated OpenShift Virtualization workloads</h3></div></div></div><p>
					You can view a list of outdated workloads by using the CLI.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If there are outdated virtualization pods in your cluster, the <code class="literal">OutdatedVirtualMachineInstanceWorkloads</code> alert fires.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To view a list of outdated virtual machine instances (VMIs), run the following command:
						</p><pre class="programlisting language-terminal">$ oc get vmi -l kubevirt.io/outdatedLauncherImage --all-namespaces</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Configure workload updates to ensure that VMIs update automatically.
					</p></div></div></section></section><section class="section _additional-resources" id="additional-resources_upgrading-virt"><div class="titlepage"><div><div><h2 class="title">7.7. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/updating_clusters/#preparing-eus-eus-upgrade">Preparing to perform an EUS-to-EUS update</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-what-operators-are">What are Operators?</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-understanding-olm">Operator Lifecycle Manager concepts and resources</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-csv_olm-understanding-olm">Cluster service versions (CSVs)</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration">Virtual machine live migration</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-vmi-eviction-strategy">Configuring virtual machine eviction strategy</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-live-migration-limits_virt-live-migration-limits">Configuring live migration limits and timeouts</a>
					</li></ul></div></section></section><section class="chapter" id="virt-security-policies"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Security policies</h1></div></div></div><p>
			Learn about OpenShift Virtualization security and authorization.
		</p><div class="itemizedlist"><p class="title"><strong>Key points</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					OpenShift Virtualization adheres to the <code class="literal">restricted</code> <a class="link" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted">Kubernetes pod security standards</a> profile, which aims to enforce the current best practices for pod security.
				</li><li class="listitem">
					Virtual machine (VM) workloads run as unprivileged pods.
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#security-context-constraints-about_configuring-internal-oauth">Security context constraints</a> (SCCs) are defined for the <code class="literal">kubevirt-controller</code> service account.
				</li></ul></div><section class="section" id="virt-about-workload-security_virt-security-policies"><div class="titlepage"><div><div><h2 class="title">8.1. About workload security</h2></div></div></div><p>
				By default, virtual machine (VM) workloads do not run with root privileges in OpenShift Virtualization, and there are no supported OpenShift Virtualization features that require root privileges.
			</p><p>
				For each VM, a <code class="literal">virt-launcher</code> pod runs an instance of <code class="literal">libvirt</code> in <span class="emphasis"><em>session mode</em></span> to manage the VM process. In session mode, the <code class="literal">libvirt</code> daemon runs as a non-root user account and only permits connections from clients that are running under the same user identifier (UID). Therefore, VMs run as unprivileged pods, adhering to the security principle of least privilege.
			</p></section><section class="section" id="virt-additional-scc-for-kubevirt-controller_virt-security-policies"><div class="titlepage"><div><div><h2 class="title">8.2. Additional OpenShift Container Platform security context constraints and Linux capabilities for the kubevirt-controller service account</h2></div></div></div><p>
				Security context constraints (SCCs) control permissions for pods. These permissions include actions that a pod, a collection of containers, can perform and what resources it can access. You can use SCCs to define a set of conditions that a pod must run with to be accepted into the system.
			</p><p>
				The <code class="literal">virt-controller</code> is a cluster controller that creates the <code class="literal">virt-launcher</code> pods for virtual machines in the cluster. These pods are granted permissions by the <code class="literal">kubevirt-controller</code> service account.
			</p><p>
				The <code class="literal">kubevirt-controller</code> service account is granted additional SCCs and Linux capabilities so that it can create <code class="literal">virt-launcher</code> pods with the appropriate permissions. These extended permissions allow virtual machines to use OpenShift Virtualization features that are beyond the scope of typical pods.
			</p><p>
				The <code class="literal">kubevirt-controller</code> service account is granted the following SCCs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">scc.AllowHostDirVolumePlugin = true</code><br/> This allows virtual machines to use the hostpath volume plugin.
					</li><li class="listitem">
						<code class="literal">scc.AllowPrivilegedContainer = false</code><br/> This ensures the virt-launcher pod is not run as a privileged container.
					</li><li class="listitem"><p class="simpara">
						<code class="literal">scc.AllowedCapabilities = []corev1.Capability{"SYS_NICE", "NET_BIND_SERVICE"}</code><br/>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">SYS_NICE</code> allows setting the CPU affinity.
							</li><li class="listitem">
								<code class="literal">NET_BIND_SERVICE</code> allows DHCP and Slirp operations.
							</li></ul></div></li></ul></div><section class="section" id="viewing-the-scc-and-rbac-definitions-for-the-kubevirt-controller"><div class="titlepage"><div><div><h3 class="title">8.2.1. Viewing the SCC and RBAC definitions for the kubevirt-controller</h3></div></div></div><p>
					You can view the <code class="literal">SecurityContextConstraints</code> definition for the <code class="literal">kubevirt-controller</code> by using the <code class="literal">oc</code> tool:
				</p><pre class="programlisting language-terminal">$ oc get scc kubevirt-controller -o yaml</pre><p>
					You can view the RBAC definition for the <code class="literal">kubevirt-controller</code> clusterrole by using the <code class="literal">oc</code> tool:
				</p><pre class="programlisting language-terminal">$ oc get clusterrole kubevirt-controller -o yaml</pre></section></section><section class="section" id="authorization_virt-security-policies"><div class="titlepage"><div><div><h2 class="title">8.3. Authorization</h2></div></div></div><p>
				OpenShift Virtualization uses <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#using-rbac">role-based access control</a> (RBAC) for authorization. For example, an administrator can create an RBAC role that provides the permissions required to launch a virtual machine. The administrator can then restrict access to that feature by binding the role to specific users.
			</p><section class="section" id="default-cluster-roles-for-virt_virt-security-policies"><div class="titlepage"><div><div><h3 class="title">8.3.1. Default cluster roles for OpenShift Virtualization</h3></div></div></div><p>
					By using cluster role aggregation, OpenShift Virtualization extends the default OpenShift Container Platform cluster roles to include permissions for accessing virtualization objects.
				</p><div class="table" id="idm140196978936848"><p class="title"><strong>Table 8.1. OpenShift Virtualization cluster roles</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 66%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196990862816" scope="col">Default cluster role</th><th align="left" valign="top" id="idm140196990861728" scope="col">OpenShift Virtualization cluster role</th><th align="left" valign="top" id="idm140196990860624" scope="col">OpenShift Virtualization cluster role description</th></tr></thead><tbody><tr><td align="left" valign="middle" headers="idm140196990862816"> <p>
									<code class="literal">view</code>
								</p>
								 </td><td align="left" valign="middle" headers="idm140196990861728"> <p>
									<code class="literal">kubevirt.io:view</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196990860624"> <p>
									A user that can view all OpenShift Virtualization resources in the cluster but cannot create, delete, modify, or access them. For example, the user can see that a virtual machine (VM) is running but cannot shut it down or gain access to its console.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140196990862816"> <p>
									<code class="literal">edit</code>
								</p>
								 </td><td align="left" valign="middle" headers="idm140196990861728"> <p>
									<code class="literal">kubevirt.io:edit</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196990860624"> <p>
									A user that can modify all OpenShift Virtualization resources in the cluster. For example, the user can create VMs, access VM consoles, and delete VMs.
								</p>
								 </td></tr><tr><td align="left" valign="middle" headers="idm140196990862816"> <p>
									<code class="literal">admin</code>
								</p>
								 </td><td align="left" valign="middle" headers="idm140196990861728"> <p>
									<code class="literal">kubevirt.io:admin</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196990860624"> <p>
									A user that has full permissions to all OpenShift Virtualization resources, including the ability to delete collections of resources. The user can also view and modify the OpenShift Virtualization runtime configuration, which is located in the <code class="literal">HyperConverged</code> custom resource in the <code class="literal">openshift-cnv</code> namespace.
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section _additional-resources" id="additional-resources_virt-security-policies"><div class="titlepage"><div><div><h2 class="title">8.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#security-context-constraints-about_configuring-internal-oauth">Managing security context constraints</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#using-rbac">Using RBAC to define and apply permissions</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#creating-cluster-role_using-rbac">Creating a cluster role</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#cluster-role-binding-commands_using-rbac">Cluster role binding commands</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-enabling-user-permissions-to-clone-datavolumes">Enabling user permissions to clone data volumes across namespaces</a>
					</li></ul></div></section></section><section class="chapter" id="virt-using-the-cli-tools"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Using the virtctl and libguestfs CLI tools</h1></div></div></div><p>
			You can manage OpenShift Virtualization resources by using the <code class="literal">virtctl</code> command line tool.
		</p><p>
			You can also deploy a <code class="literal">libguestfs-tools</code> container by using <code class="literal">virtctl</code>. <a class="link" href="https://libguestfs.org"><code class="literal">Libguestfs</code></a> is a set of tools for accessing and modifying virtual machine (VM) disk images.
		</p><section class="section" id="installing-virtctl_virt-using-the-cli-tools"><div class="titlepage"><div><div><h2 class="title">9.1. Installing virtctl</h2></div></div></div><p>
				To install <code class="literal">virtctl</code> on Linux, Windows, and MacOS operating systems, you download and install the the <code class="literal">virtctl</code> binary file.
			</p><p>
				To install <code class="literal">virtctl</code> on Red Hat Enterprise Linux (RHEL), you enable the OpenShift Virtualization repository and then install the <code class="literal">kubevirt-virtctl</code> package.
			</p><section class="section" id="virt-installing-virtctl-client_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.1.1. Installing virtctl on Linux, Windows, and macOS</h3></div></div></div><p>
					Download and install the <code class="literal">virtctl</code> binary for your operating system.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Virtualization → Overview</strong></span> page in the OpenShift Container Platform web console.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Download virtctl</strong></span> link to download the <code class="literal">virtctl</code> binary for your operating system.
						</li><li class="listitem"><p class="simpara">
							Install <code class="literal">virtctl</code>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For Linux:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Decompress the archive file:
										</p><pre class="programlisting language-terminal">$ tar -xvf &lt;virtctl-version-distribution.arch&gt;.tar.gz</pre></li><li class="listitem"><p class="simpara">
											Run the following command to make the <code class="literal">virtctl</code> binary executable:
										</p><pre class="programlisting language-terminal">$ chmod +x &lt;path/virtctl-file-name&gt;</pre></li><li class="listitem"><p class="simpara">
											Move the <code class="literal">virtctl</code> binary to a directory in your <code class="literal">PATH</code> environment variable.
										</p><p class="simpara">
											You can check your path by running the following command:
										</p><pre class="programlisting language-terminal">$ echo $PATH</pre></li><li class="listitem"><p class="simpara">
											Set the <code class="literal">KUBECONFIG</code> environment variable:
										</p><pre class="programlisting language-terminal">$ export KUBECONFIG=/home/&lt;user&gt;/clusters/current/auth/kubeconfig</pre></li></ol></div></li><li class="listitem"><p class="simpara">
									For Windows:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Decompress the archive file.
										</li><li class="listitem">
											Navigate the extracted folder hierarchy and double-click the <code class="literal">virtctl</code> executable file to install the client.
										</li><li class="listitem"><p class="simpara">
											Move the <code class="literal">virtctl</code> binary to a directory in your <code class="literal">PATH</code> environment variable.
										</p><p class="simpara">
											You can check your path by running the following command:
										</p><pre class="programlisting language-terminal">C:\&gt; path</pre></li></ol></div></li><li class="listitem"><p class="simpara">
									For macOS:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Decompress the archive file.
										</li><li class="listitem"><p class="simpara">
											Move the <code class="literal">virtctl</code> binary to a directory in your <code class="literal">PATH</code> environment variable.
										</p><p class="simpara">
											You can check your path by running the following command:
										</p><pre class="programlisting language-terminal">echo $PATH</pre></li></ol></div></li></ul></div></li></ol></div></section><section class="section" id="virt-installing-virtctl-client-yum_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.1.2. Installing virtctl on RHEL</h3></div></div></div><p>
					You install the <code class="literal">virtctl</code> RPM on Red Hat Enterprise Linux (RHEL) by enabling the OpenShift Virtualization repository and installing the <code class="literal">kubevirt-virtctl</code> package.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Each host in your cluster must be registered with Red Hat Subscription Manager (RHSM) and have an active OpenShift Container Platform subscription.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Enable the appropriate OpenShift Virtualization repository for your operating system by using the <code class="literal">subscription-manager</code> CLI tool:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									RHEL 9:
								</p><pre class="programlisting language-terminal"># subscription-manager repos --enable cnv-4.13-for-rhel-9-x86_64-rpms</pre></li><li class="listitem"><p class="simpara">
									RHEL 8:
								</p><pre class="programlisting language-terminal"># subscription-manager repos --enable cnv-4.13-for-rhel-8-x86_64-rpms</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Install the <code class="literal">kubevirt-virtctl</code> package:
						</p><pre class="programlisting language-terminal"># yum install kubevirt-virtctl</pre></li></ul></div></section></section><section class="section" id="virt-virtctl-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h2 class="title">9.2. Virtctl commands</h2></div></div></div><p>
				The <code class="literal">virtctl</code> client is a command-line utility for managing OpenShift Virtualization resources.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The virtual machine (VM) commands also apply to virtual machine instances unless otherwise specified.
				</p></div></div><section class="section" id="virtctl-information-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.1. Virtctl information commands</h3></div></div></div><p>
					You use <code class="literal">virtctl</code> information commands to view information about the <code class="literal">virtctl</code> client.
				</p><div class="table" id="idm140196969971904"><p class="title"><strong>Table 9.1. Information commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196981312304" scope="col">Command</th><th align="left" valign="top" id="idm140196981311216" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196981312304"> <p>
									<code class="literal">virtctl version</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196981311216"> <p>
									View the <code class="literal">virtctl</code> client and server versions.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981312304"> <p>
									<code class="literal">virtctl help</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196981311216"> <p>
									View a list of <code class="literal">virtctl</code> commands.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981312304"> <p>
									<code class="literal">virtctl &lt;command&gt; -h|--help</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196981311216"> <p>
									View a list of options for a specific command.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981312304"> <p>
									<code class="literal">virtctl options</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196981311216"> <p>
									View a list of global command options for any <code class="literal">virtctl</code> command.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="vm-information-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.2. VM information commands</h3></div></div></div><p>
					You can use <code class="literal">virtctl</code> to view information about VMs and VMIs.
				</p><div class="table" id="idm140196969536144"><p class="title"><strong>Table 9.2. VM information commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196983186000" scope="col">Command</th><th align="left" valign="top" id="idm140196983185024" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196983186000"> <p>
									<code class="literal">virtctl fslist &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196983185024"> <p>
									View the file systems available on a guest machine.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196983186000"> <p>
									<code class="literal">virtctl guestosinfo &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196983185024"> <p>
									View information about the operating systems on a guest machine.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196983186000"> <p>
									<code class="literal">virtctl userlist &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196983185024"> <p>
									View the logged-in users on a guest machine.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="vm-management-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.3. VM management commands</h3></div></div></div><p>
					You use <code class="literal">virtctl</code> virtual machine (VM) management commands to manage and migrate VMs and VMIs.
				</p><div class="table" id="idm140196973346544"><p class="title"><strong>Table 9.3. VM management commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196969606464" scope="col">Command</th><th align="left" valign="top" id="idm140196969605376" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl create -name &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Create a <code class="literal">VirtualMachine</code> manifest.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl start &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Start a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl start --paused &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Start a VM in a paused state. This option enables you to interrupt the boot process from the VNC console.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl stop &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Stop a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl stop &lt;vm_name&gt; --grace-period 0 --force</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Force stop a VM. This option might cause data inconsistency or data loss.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl pause vm &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Pause a VM. The machine state is kept in memory.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl unpause vm &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Unpause a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl migrate &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Migrate a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969606464"> <p>
									<code class="literal">virtctl restart &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969605376"> <p>
									Restart a VM.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="vm-connection-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.4. VM connection commands</h3></div></div></div><p>
					You use <code class="literal">virtctl</code> connection commands to expose ports and connect to VMs and VMIs.
				</p><div class="table" id="idm140196996231808"><p class="title"><strong>Table 9.4. VM connection commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196982708368" scope="col">Command</th><th align="left" valign="top" id="idm140196982707280" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl console &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Connect to the serial console of a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl expose &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Create a service that forwards a designated port of a VM and expose the service on the specified port of the node.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl scp -i &lt;ssh_key&gt; &lt;file_name&gt; &lt;user_name&gt;@&lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Copy a file from your machine to a VM. This command uses the private key of an SSH key pair. The VM must be configured with the public key.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl scp -i &lt;ssh_key&gt; &lt;user_name@&lt;vm_name&gt;:&lt;file_name&gt; .</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Copy a file from a VM to your machine. This command uses the private key of an SSH key pair. The VM must be configured with the public key.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl ssh -i &lt;ssh_key&gt; &lt;user_name&gt;@&lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Open an SSH connection with a VM. This command uses the private key of an SSH key pair. The VM must be configured with the public key.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl vnc --kubeconfig=$KUBECONFIG &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Connect to the VNC console of a VM.
								</p>
								 <p>
									Accessing the graphical console of a VM through VNC requires a remote viewer on your local machine.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl vnc --kubeconfig=$KUBECONFIG --proxy-only=true &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Display the port number and connect manually to a VM by using any viewer through the VNC connection.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196982708368"> <p>
									<code class="literal">virtctl vnc --kubeconfig=$KUBECONFIG --port=&lt;port-number&gt; &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196982707280"> <p>
									Specify a port number to run the proxy on the specified port, if that port is available.
								</p>
								 <p>
									If a port number is not specified, the proxy runs on a random port.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="vm-volume-export-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.5. VM export commands</h3></div></div></div><p>
					You use <code class="literal">virtctl vmexport</code> commands to create, download, or delete a volume exported from a VM, VM snapshot, or persistent volume claim (PVC).
				</p><div class="table" id="idm140196989464960"><p class="title"><strong>Table 9.5. VM export commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196968785264" scope="col">Command</th><th align="left" valign="top" id="idm140196968784176" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196968785264"> <p>
									<code class="literal">virtctl vmexport create &lt;vmexport_name&gt; --vm|snapshot|pvc=&lt;object_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968784176"> <p>
									Create a <code class="literal">VirtualMachineExport</code> custom resource (CR) to export a volume from a VM, VM snapshot, or PVC.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">--vm</code>: Exports the PVCs of a VM.
										</li><li class="listitem">
											<code class="literal">--snapshot</code>: Exports the PVCs contained in a <code class="literal">VirtualMachineSnapshot</code> CR.
										</li><li class="listitem">
											<code class="literal">--pvc</code>: Exports a PVC.
										</li><li class="listitem">
											Optional: <code class="literal">--ttl=1h</code> specifies the time to live. The default duration is 2 hours.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968785264"> <p>
									<code class="literal">virtctl vmexport delete &lt;vmexport_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968784176"> <p>
									Delete a <code class="literal">VirtualMachineExport</code> CR manually.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968785264"> <p>
									<code class="literal">virtctl vmexport download &lt;vmexport_name&gt; --output=&lt;output_file&gt; --volume=&lt;volume_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968784176"> <p>
									Download the volume defined in a <code class="literal">VirtualMachineExport</code> CR.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">--output</code> specifies the file format. Example: <code class="literal">disk.img.gz</code>.
										</li><li class="listitem">
											<code class="literal">--volume</code> specifies the volume to download. This flag is optional if only one volume is available.
										</li></ul></div>
								 <p>
									Optional:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">--keep-vme</code> retains the <code class="literal">VirtualMachineExport</code> CR after download. The default behavior is to delete the <code class="literal">VirtualMachineExport</code> CR after download.
										</li><li class="listitem">
											<code class="literal">--insecure</code> enables an insecure HTTP connection.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968785264"> <p>
									<code class="literal">virtctl vmexport download &lt;vmexport_name&gt; --&lt;vm|snapshot|pvc&gt;=&lt;object_name&gt; --output=&lt;output_file&gt; --volume=&lt;volume_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968784176"> <p>
									Create a <code class="literal">VirtualMachineExport</code> CR and then download the volume defined in the CR.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="vm-memory-dump-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.6. VM memory dump commands</h3></div></div></div><p>
					You can use the <code class="literal">virtctl memory-dump</code> command to output a VM memory dump on a PVC. You can specify an existing PVC or use the <code class="literal">--create-claim</code> flag to create a new PVC.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The PVC volume mode must be <code class="literal">FileSystem</code>.
						</li><li class="listitem"><p class="simpara">
							The PVC must be large enough to contain the memory dump.
						</p><p class="simpara">
							The formula for calculating the PVC size is <code class="literal">(VMMemorySize + 100Mi) * FileSystemOverhead</code>, where <code class="literal">100Mi</code> is the memory dump overhead.
						</p></li><li class="listitem"><p class="simpara">
							You must enable the hot plug feature gate in the <code class="literal">HyperConverged</code> custom resource by running the following command:
						</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n openshift-cnv \
  --type json -p '[{"op": "add", "path": "/spec/featureGates", \
  "value": "HotplugVolumes"}]'</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Downloading the memory dump</strong></p><p>
						You must use the <code class="literal">virtctl vmexport download</code> command to download the memory dump:
					</p></div><pre class="programlisting language-terminal">$ virtctl vmexport download &lt;vmexport_name&gt; --vm\|pvc=&lt;object_name&gt; \
  --volume=&lt;volume_name&gt; --output=&lt;output_file&gt;</pre><div class="table" id="idm140196979652080"><p class="title"><strong>Table 9.6. VM memory dump commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196969326672" scope="col">Command</th><th align="left" valign="top" id="idm140196969325584" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196969326672"> <p>
									<code class="literal">virtctl memory-dump get &lt;vm_name&gt; --claim-name=&lt;pvc_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969325584"> <p>
									Save the memory dump of a VM on a PVC. The memory dump status is displayed in the <code class="literal">status</code> section of the <code class="literal">VirtualMachine</code> resource.
								</p>
								 <p>
									Optional:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											<code class="literal">--create-claim</code> creates a new PVC with the appropriate size. This flag has the following options:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
													<code class="literal">--storage-class=&lt;storage_class&gt;</code>: Specify a storage class for the PVC.
												</li><li class="listitem">
													<code class="literal">--access-mode=&lt;access_mode&gt;</code>: Specify <code class="literal">ReadWriteOnce</code> or <code class="literal">ReadWriteMany</code>.
												</li></ul></div></li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969326672"> <p>
									<code class="literal">virtctl memory-dump get &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969325584"> <p>
									Rerun the <code class="literal">virtctl memory-dump</code> command with the same PVC.
								</p>
								 <p>
									This command overwrites the previous memory dump.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969326672"> <p>
									<code class="literal">virtctl memory-dump remove &lt;vm_name&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969325584"> <p>
									Remove a memory dump.
								</p>
								 <p>
									You must remove a memory dump manually if you want to change the target PVC.
								</p>
								 <p>
									This command removes the association between the VM and the PVC, so that the memory dump is not displayed in the <code class="literal">status</code> section of the <code class="literal">VirtualMachine</code> resource. The PVC is not affected.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="hot-plug-and-hot-unplug-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.7. Hot plug and hot unplug commands</h3></div></div></div><p>
					You use <code class="literal">virtctl</code> to add or remove resources from running VMs and VMIs.
				</p><div class="table" id="idm140196973558032"><p class="title"><strong>Table 9.7. Hot plug and hot unplug commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196973152864" scope="col">Command</th><th align="left" valign="top" id="idm140196973151776" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196973152864"> <p>
									<code class="literal">virtctl addvolume &lt;vm_name&gt; --volume-name=&lt;datavolume_or_PVC&gt; [--persist] [--serial=&lt;label&gt;]</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196973151776"> <p>
									Hot plug a data volume or persistent volume claim (PVC).
								</p>
								 <p>
									Optional:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">--persist</code> mounts the virtual disk permanently on a VM. <span class="strong strong"><strong>This flag does not apply to VMIs.</strong></span>
										</li><li class="listitem">
											<code class="literal">--serial=&lt;label&gt;</code> adds a label to the VM. If you do not specify a label, the default label is the data volume or PVC name.
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196973152864"> <p>
									<code class="literal">virtctl removevolume &lt;vm_name&gt; --volume-name=&lt;virtual_disk&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196973151776"> <p>
									Hot unplug a virtual disk.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="image-upload-commands_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.2.8. Image upload commands</h3></div></div></div><p>
					You use the <code class="literal">virtctl image-upload</code> commands to upload a VM image to a data volume.
				</p><div class="table" id="idm140196968932464"><p class="title"><strong>Table 9.8. Image upload commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196969497696" scope="col">Command</th><th align="left" valign="top" id="idm140196969496608" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196969497696"> <p>
									<code class="literal">virtctl image-upload dv &lt;datavolume_name&gt; --image-path=&lt;/path/to/image&gt; --no-create</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969496608"> <p>
									Upload a VM image to a data volume that already exists.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196969497696"> <p>
									<code class="literal">virtctl image-upload dv &lt;datavolume_name&gt; --size=&lt;datavolume_size&gt; --image-path=&lt;/path/to/image&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196969496608"> <p>
									Upload a VM image to a new data volume of a specified requested size.
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section" id="using-libguestfs"><div class="titlepage"><div><div><h2 class="title">9.3. Using libguestfs</h2></div></div></div><section class="section" id="virt-creating-pvc-with-virtctl-guestfs_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.3.1. Deploying a libguestfs-tools container by using virtctl</h3></div></div></div><p>
					You can use the <code class="literal">virtctl guestfs</code> command to deploy an interactive container with <code class="literal">libguestfs-tools</code> and a persistent volume claim (PVC) attached to it.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To deploy a container with <code class="literal">libguestfs-tools</code>, mount the PVC, and attach a shell to it, run the following command:
						</p><pre class="programlisting language-terminal">$ virtctl guestfs -n &lt;namespace&gt; &lt;pvc_name&gt; <span id="CO8-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The PVC name is a required argument. If you do not include it, an error message appears.
								</div></dd></dl></div></li></ul></div></section><section class="section" id="virt-about-libguestfs-tools-virtctl-guestfs_virt-using-the-cli-tools"><div class="titlepage"><div><div><h3 class="title">9.3.2. Libguestfs and virtctl guestfs commands</h3></div></div></div><p>
					<code class="literal">Libguestfs</code> tools help you access and modify virtual machine (VM) disk images. You can use <code class="literal">libguestfs</code> tools to view and edit files in a guest, clone and build virtual machines, and format and resize disks.
				</p><p>
					You can also use the <code class="literal">virtctl guestfs</code> command and its sub-commands to modify, inspect, and debug VM disks on a PVC. To see a complete list of possible sub-commands, enter <code class="literal">virt-</code> on the command line and press the Tab key. For example:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 42%; " class="col_1"><!--Empty--></col><col style="width: 58%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196979995744" scope="col">Command</th><th align="left" valign="top" id="idm140196979994656" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-edit -a /dev/vda /etc/motd</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									Edit a file interactively in your terminal.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-customize -a /dev/vda --ssh-inject root:string:&lt;public key example&gt;</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									Inject an ssh key into the guest and create a login.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-df -a /dev/vda -h</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									See how much disk space is used by a VM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-customize -a /dev/vda --run-command 'rpm -qa &gt; /rpm-list'</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									See the full list of all RPMs installed on a guest by creating an output file containing the full list.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-cat -a /dev/vda /rpm-list</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									Display the output file list of all RPMs created using the <code class="literal">virt-customize -a /dev/vda --run-command 'rpm -qa &gt; /rpm-list'</code> command in your terminal.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196979995744"> <p>
									<code class="literal">virt-sysprep -a /dev/vda</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196979994656"> <p>
									Seal a virtual machine disk image to be used as a template.
								</p>
								 </td></tr></tbody></table></div><p>
					By default, <code class="literal">virtctl guestfs</code> creates a session with everything needed to manage a VM disk. However, the command also supports several flag options if you want to customize the behavior:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 42%; " class="col_1"><!--Empty--></col><col style="width: 58%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196968879808" scope="col">Flag Option</th><th align="left" valign="top" id="idm140196968878720" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196968879808"> <p>
									<code class="literal">--h</code> or <code class="literal">--help</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968878720"> <p>
									Provides help for <code class="literal">guestfs</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968879808"> <p>
									<code class="literal">-n &lt;namespace&gt;</code> option with a <code class="literal">&lt;pvc_name&gt;</code> argument
								</p>
								 </td><td align="left" valign="top" headers="idm140196968878720"> <p>
									To use a PVC from a specific namespace.
								</p>
								 <p>
									If you do not use the <code class="literal">-n &lt;namespace&gt;</code> option, your current project is used. To change projects, use <code class="literal">oc project &lt;namespace&gt;</code>.
								</p>
								 <p>
									If you do not include a <code class="literal">&lt;pvc_name&gt;</code> argument, an error message appears.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968879808"> <p>
									<code class="literal">--image string</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968878720"> <p>
									Lists the <code class="literal">libguestfs-tools</code> container image.
								</p>
								 <p>
									You can configure the container to use a custom image by using the <code class="literal">--image</code> option.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968879808"> <p>
									<code class="literal">--kvm</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968878720"> <p>
									Indicates that <code class="literal">kvm</code> is used by the <code class="literal">libguestfs-tools</code> container.
								</p>
								 <p>
									By default, <code class="literal">virtctl guestfs</code> sets up <code class="literal">kvm</code> for the interactive container, which greatly speeds up the <code class="literal">libguest-tools</code> execution because it uses QEMU.
								</p>
								 <p>
									If a cluster does not have any <code class="literal">kvm</code> supporting nodes, you must disable <code class="literal">kvm</code> by setting the option <code class="literal">--kvm=false</code>.
								</p>
								 <p>
									If not set, the <code class="literal">libguestfs-tools</code> pod remains pending because it cannot be scheduled on any node.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968879808"> <p>
									<code class="literal">--pull-policy string</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196968878720"> <p>
									Shows the pull policy for the <code class="literal">libguestfs</code> image.
								</p>
								 <p>
									You can also overwrite the image’s pull policy by setting the <code class="literal">pull-policy</code> option.
								</p>
								 </td></tr></tbody></table></div><p>
					The command also checks if a PVC is in use by another pod, in which case an error message appears. However, once the <code class="literal">libguestfs-tools</code> process starts, the setup cannot avoid a new pod using the same PVC. You must verify that there are no active <code class="literal">virtctl guestfs</code> pods before starting the VM that accesses the same PVC.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">virtctl guestfs</code> command accepts only a single PVC attached to the interactive pod.
					</p></div></div></section></section></section><section class="chapter" id="virtual-machines"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Virtual machines</h1></div></div></div><section class="section" id="virt-create-vms"><div class="titlepage"><div><div><h2 class="title">10.1. Creating virtual machines</h2></div></div></div><p>
				Use one of these procedures to create a virtual machine:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Quick Start guided tour
					</li><li class="listitem">
						Quick create from the <span class="strong strong"><strong>Catalog</strong></span>
					</li><li class="listitem">
						Pasting a pre-configured YAML file with the virtual machine wizard
					</li><li class="listitem">
						Using the CLI
					</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not create virtual machines in <code class="literal">openshift-*</code> namespaces. Instead, create a new namespace or use an existing namespace without the <code class="literal">openshift</code> prefix.
				</p></div></div><p>
				When you create virtual machines from the web console, select a virtual machine template that is configured with a boot source. Virtual machine templates with a boot source are labeled as <span class="strong strong"><strong>Available boot source</strong></span> or they display a customized label text. Using templates with an available boot source expedites the process of creating virtual machines.
			</p><p>
				Templates without a boot source are labeled as <span class="strong strong"><strong>Boot source required</strong></span>. You can use these templates if you complete the steps for <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-adding-a-boot-source-web_virt-creating-vm-template">adding a boot source to the virtual machine</a>.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Due to differences in storage behavior, some virtual machine templates are incompatible with single-node OpenShift. To ensure compatibility, do not set the <code class="literal">evictionStrategy</code> field for any templates or virtual machines that use data volumes or storage profiles.
				</p></div></div><section class="section" id="virt-creating-vm-quick-start-web_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.1. Using a Quick Start to create a virtual machine</h3></div></div></div><p>
					The web console provides Quick Starts with instructional guided tours for creating virtual machines. You can access the Quick Starts catalog by selecting the Help menu in the <span class="strong strong"><strong>Administrator</strong></span> perspective to view the Quick Starts catalog. When you click on a Quick Start tile and begin the tour, the system guides you through the process.
				</p><p>
					Tasks in a Quick Start begin with selecting a Red Hat template. Then, you can add a boot source and import the operating system image. Finally, you can save the custom template and use it to create a virtual machine.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Access to the website where you can download the URL link for the operating system image.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the web console, select <span class="strong strong"><strong>Quick Starts</strong></span> from the Help menu.
						</li><li class="listitem">
							Click on a tile in the Quick Starts catalog. For example: <span class="strong strong"><strong>Creating a Red Hat Linux Enterprise Linux virtual machine</strong></span>.
						</li><li class="listitem">
							Follow the instructions in the guided tour and complete the tasks for importing an operating system image and creating a virtual machine. The <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> page displays the virtual machine.
						</li></ol></div></section><section class="section" id="virt-quick-creating-vm_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.2. Quick creating a virtual machine</h3></div></div></div><p>
					You can quickly create a virtual machine (VM) by using a template with an available boot source.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Catalog</strong></span> in the side menu.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Boot source available</strong></span> to filter templates with boot sources.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, the template list will show only <span class="strong strong"><strong>Default Templates</strong></span>. Click <span class="strong strong"><strong>All Items</strong></span> when filtering to see all available templates for your chosen filters.
							</p></div></div></li><li class="listitem">
							Click a template to view its details.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Quick Create VirtualMachine</strong></span> to create a VM from the template.
						</p><p class="simpara">
							The virtual machine <span class="strong strong"><strong>Details</strong></span> page is displayed with the provisioning status.
						</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Events</strong></span> to view a stream of events as the VM is provisioned.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Console</strong></span> to verify that the VM booted successfully.
						</li></ol></div></section><section class="section" id="virt-creating-vm-custom-template_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.3. Creating a virtual machine from a customized template</h3></div></div></div><p>
					Some templates require additional parameters, for example, a PVC with a boot source. You can customize select parameters of a template to create a virtual machine (VM).
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the web console, select a template:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Catalog</strong></span> in the side menu.
								</li><li class="listitem">
									Optional: Filter the templates by project, keyword, operating system, or workload profile.
								</li><li class="listitem">
									Click the template that you want to customize.
								</li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Customize VirtualMachine</strong></span>.
						</li><li class="listitem">
							Specify parameters for your VM, including its <span class="strong strong"><strong>Name</strong></span> and <span class="strong strong"><strong>Disk source</strong></span>. You can optionally specify a data source to clone.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Events</strong></span> to view a stream of events as the VM is provisioned.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Console</strong></span> to verify that the VM booted successfully.
						</li></ol></div><p>
					Refer to the virtual machine fields section when creating a VM from the web console.
				</p><section class="section" id="virt-networking-wizard-fields-web_virt-create-vms"><div class="titlepage"><div><div><h4 class="title">10.1.3.1. Networking fields</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196973171568" scope="col">Name</th><th align="left" valign="top" id="idm140196973170480" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196973171568"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196973170480"> <p>
										Name for the network interface controller.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973171568"> <p>
										Model
									</p>
									 </td><td align="left" valign="top" headers="idm140196973170480"> <p>
										Indicates the model of the network interface controller. Supported values are <span class="strong strong"><strong>e1000e</strong></span> and <span class="strong strong"><strong>virtio</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973171568"> <p>
										Network
									</p>
									 </td><td align="left" valign="top" headers="idm140196973170480"> <p>
										List of available network attachment definitions.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973171568"> <p>
										Type
									</p>
									 </td><td align="left" valign="top" headers="idm140196973170480"> <p>
										List of available binding methods. Select the binding method suitable for the network interface:
									</p>
									 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												Default pod network: <code class="literal">masquerade</code>
											</li><li class="listitem">
												Linux bridge network: <code class="literal">bridge</code>
											</li><li class="listitem">
												SR-IOV network: <code class="literal">SR-IOV</code>
											</li></ul></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196973171568"> <p>
										MAC Address
									</p>
									 </td><td align="left" valign="top" headers="idm140196973170480"> <p>
										MAC address for the network interface controller. If a MAC address is not specified, one is assigned automatically.
									</p>
									 </td></tr></tbody></table></div></section><section class="section" id="virt-storage-wizard-fields-web_virt-create-vms"><div class="titlepage"><div><div><h4 class="title">10.1.3.2. Storage fields</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 38%; " class="col_1"><!--Empty--></col><col style="width: 23%; " class="col_2"><!--Empty--></col><col style="width: 38%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977823856" scope="col">Name</th><th align="left" valign="top" id="idm140196977822768" scope="col">Selection</th><th align="left" valign="top" id="idm140196977821680" scope="col">Description</th></tr></thead><tbody><tr><td rowspan="6" align="left" valign="top" headers="idm140196977823856"> <p>
										Source
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> <p>
										Blank (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Create an empty disk.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977822768"> <p>
										Import via URL (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Import content via URL (HTTP or HTTPS endpoint).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977822768"> <p>
										Use an existing PVC
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Use a PVC that is already available in the cluster.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977822768"> <p>
										Clone existing PVC (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Select an existing PVC available in the cluster and clone it.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977822768"> <p>
										Import via Registry (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Import content via container registry.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977822768"> <p>
										Container (ephemeral)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Upload content from a container located in a registry accessible from the cluster. The container disk should be used only for read-only filesystems such as CD-ROMs or temporary virtual machines.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977823856"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Name of the disk. The name can contain lowercase letters (<code class="literal">a-z</code>), numbers (<code class="literal">0-9</code>), hyphens (<code class="literal">-</code>), and periods (<code class="literal">.</code>), up to a maximum of 253 characters. The first and last characters must be alphanumeric. The name must not contain uppercase letters, spaces, or special characters.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977823856"> <p>
										Size
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Size of the disk in GiB.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977823856"> <p>
										Type
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Type of disk. Example: Disk or CD-ROM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977823856"> <p>
										Interface
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										Type of disk device. Supported interfaces are <span class="strong strong"><strong>virtIO</strong></span>, <span class="strong strong"><strong>SATA</strong></span>, and <span class="strong strong"><strong>SCSI</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977823856"> <p>
										Storage Class
									</p>
									 </td><td align="left" valign="top" headers="idm140196977822768"> </td><td align="left" valign="top" headers="idm140196977821680"> <p>
										The storage class that is used to create the disk.
									</p>
									 </td></tr></tbody></table></div><h6 id="virt-storage-wizard-fields-advanced-web_virt-create-vms">Advanced storage settings</h6><p>
						The following advanced storage settings are optional and available for <span class="strong strong"><strong>Blank</strong></span>, <span class="strong strong"><strong>Import via URL</strong></span>, and <span class="strong strong"><strong>Clone existing PVC</strong></span> disks. Before OpenShift Virtualization 4.11, if you do not specify these parameters, the system uses the default values from the <code class="literal">kubevirt-storage-class-defaults</code> config map. In OpenShift Virtualization 4.11 and later, the system uses the default values from the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">storage profile</a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Use storage profiles to ensure consistent advanced storage settings when provisioning storage for OpenShift Virtualization.
						</p><p>
							To manually specify <span class="strong strong"><strong>Volume Mode</strong></span> and <span class="strong strong"><strong>Access Mode</strong></span>, you must clear the <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> checkbox, which is selected by default.
						</p></div></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 31%; " class="col_1"><!--Empty--></col><col style="width: 19%; " class="col_2"><!--Empty--></col><col style="width: 19%; " class="col_3"><!--Empty--></col><col style="width: 31%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196983244848" scope="col">Name</th><th align="left" valign="top" id="idm140196983243760" scope="col">Mode description</th><th align="left" valign="top" id="idm140196975920912" scope="col">Parameter</th><th align="left" valign="top" id="idm140196975919936" scope="col">Parameter description</th></tr></thead><tbody><tr><td rowspan="2" align="left" valign="top" headers="idm140196983244848"> <p>
										Volume Mode
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm140196983243760"> <p>
										Defines whether the persistent volume uses a formatted file system or raw block state. Default is <span class="strong strong"><strong>Filesystem</strong></span>.
									</p>
									 </td><td align="left" valign="top" headers="idm140196975920912"> <p>
										Filesystem
									</p>
									 </td><td align="left" valign="top" headers="idm140196975919936"> <p>
										Stores the virtual disk on a file system-based volume.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196975920912"> <p>
										Block
									</p>
									 </td><td align="left" valign="top" headers="idm140196975919936"> <p>
										Stores the virtual disk directly on the block volume. Only use <code class="literal">Block</code> if the underlying storage supports it.
									</p>
									 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm140196983244848"> <p>
										Access Mode
									</p>
									 </td><td rowspan="3" align="left" valign="top" headers="idm140196983243760"> <p>
										Access mode of the persistent volume.
									</p>
									 </td><td align="left" valign="top" headers="idm140196975920912"> <p>
										ReadWriteOnce (RWO)
									</p>
									 </td><td align="left" valign="top" headers="idm140196975919936"> <p>
										Volume can be mounted as read-write by a single node.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196975920912"> <p>
										ReadWriteMany (RWX)
									</p>
									 </td><td align="left" valign="top" headers="idm140196975919936"> <p>
										Volume can be mounted as read-write by many nodes at one time.
									</p>
									 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
											This is required for some features, such as live migration of virtual machines between nodes.
										</p></div></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196975920912"> <p>
										ReadOnlyMany (ROX)
									</p>
									 </td><td align="left" valign="top" headers="idm140196975919936"> <p>
										Volume can be mounted as read only by many nodes.
									</p>
									 </td></tr></tbody></table></div></section><section class="section" id="virt-cloud-init-fields-web_virt-create-vms"><div class="titlepage"><div><div><h4 class="title">10.1.3.3. Cloud-init fields</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196998269072" scope="col">Name</th><th align="left" valign="top" id="idm140196998267984" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196998269072"> <p>
										Authorized SSH Keys
									</p>
									 </td><td align="left" valign="top" headers="idm140196998267984"> <p>
										The user’s public key that is copied to <span class="strong strong"><strong><span class="emphasis"><em>~/.ssh/authorized_keys</em></span></strong></span> on the virtual machine.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196998269072"> <p>
										Custom script
									</p>
									 </td><td align="left" valign="top" headers="idm140196998267984"> <p>
										Replaces other options with a field in which you paste a custom cloud-init script.
									</p>
									 </td></tr></tbody></table></div><p>
						To configure storage class defaults, use storage profiles. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>.
					</p></section><section class="section" id="virt-creating-vm-yaml-web_virt-create-vms"><div class="titlepage"><div><div><h4 class="title">10.1.3.4. Pasting in a pre-configured YAML file to create a virtual machine</h4></div></div></div><p>
						Create a virtual machine by writing or pasting a YAML configuration file. A valid <code class="literal">example</code> virtual machine configuration is provided by default whenever you open the YAML edit screen.
					</p><p>
						If your YAML configuration is invalid when you click <span class="strong strong"><strong>Create</strong></span>, an error message indicates the parameter in which the error occurs. Only one error is shown at a time.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Navigating away from the YAML screen while editing cancels any changes to the configuration you have made.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span> and select <span class="strong strong"><strong>With YAML</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Write or paste your virtual machine configuration in the editable window.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Alternatively, use the <code class="literal">example</code> virtual machine provided by default in the YAML screen.
									</li></ol></div></li><li class="listitem">
								Optional: Click <span class="strong strong"><strong>Download</strong></span> to download the YAML configuration file in its present state.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span> to create the virtual machine.
							</li></ol></div><p>
						The virtual machine is listed on the <span class="strong strong"><strong>VirtualMachines</strong></span> page.
					</p></section></section><section class="section" id="virt-creating-vm-cli_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.4. Using the CLI to create a virtual machine</h3></div></div></div><p>
					You can create a virtual machine from a <code class="literal">virtualMachine</code> manifest.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Edit the <code class="literal">VirtualMachine</code> manifest for your VM. For example, the following manifest configures a Red Hat Enterprise Linux (RHEL) VM:
						</p><div class="example" id="idm140196980426368"><p class="title"><strong>Example 10.1. Example manifest for a RHEL VM</strong></p><div class="example-contents"><pre class="screen">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    app: &lt;vm_name&gt; <span id="CO9-1"><!--Empty--></span><span class="callout">1</span>
  name: &lt;vm_name&gt;
spec:
  dataVolumeTemplates:
  - apiVersion: cdi.kubevirt.io/v1beta1
    kind: DataVolume
    metadata:
      name: &lt;vm_name&gt;
    spec:
      sourceRef:
        kind: DataSource
        name: rhel9
        namespace: openshift-virtualization-os-images
      storage:
        resources:
          requests:
            storage: 30Gi
  running: false
  template:
    metadata:
      labels:
        kubevirt.io/domain: &lt;vm_name&gt;
    spec:
      domain:
        cpu:
          cores: 1
          sockets: 2
          threads: 1
        devices:
          disks:
          - disk:
              bus: virtio
            name: rootdisk
          - disk:
              bus: virtio
            name: cloudinitdisk
          interfaces:
          - masquerade: {}
            name: default
          rng: {}
        features:
          smm:
            enabled: true
        firmware:
          bootloader:
            efi: {}
        resources:
          requests:
            memory: 8Gi
      evictionStrategy: LiveMigrate
      networks:
      - name: default
        pod: {}
      volumes:
      - dataVolume:
          name: &lt;vm_name&gt;
        name: rootdisk
      - cloudInitNoCloud:
          userData: |-
            #cloud-config
            user: cloud-user
            password: '&lt;password&gt;' <span id="CO9-2"><!--Empty--></span><span class="callout">2</span>
            chpasswd: { expire: False }
        name: cloudinitdisk</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO9-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the name of the virtual machine.
									</div></dd><dt><a href="#CO9-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specify the password for cloud-user.
									</div></dd></dl></div></div></div></li><li class="listitem"><p class="simpara">
							Create a virtual machine by using the manifest file:
						</p><pre class="programlisting language-terminal">$ oc create -f &lt;vm_manifest_file&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
							Optional: Start the virtual machine:
						</p><pre class="programlisting language-terminal">$ virtctl start &lt;vm_name&gt;</pre></li></ol></div></section><section class="section" id="virt-vm-storage-volume-types_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.5. Virtual machine storage volume types</h3></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196968975264" scope="col">Storage volume type</th><th align="left" valign="top" id="idm140196968974176" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									ephemeral
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									A local copy-on-write (COW) image that uses a network volume as a read-only backing store. The backing volume must be a <span class="strong strong"><strong>PersistentVolumeClaim</strong></span>. The ephemeral image is created when the virtual machine starts and stores all writes locally. The ephemeral image is discarded when the virtual machine is stopped, restarted, or deleted. The backing volume (PVC) is not mutated in any way.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									persistentVolumeClaim
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									Attaches an available PV to a virtual machine. Attaching a PV allows for the virtual machine data to persist between sessions.
								</p>
								 <p>
									Importing an existing virtual machine disk into a PVC by using CDI and attaching the PVC to a virtual machine instance is the recommended method for importing existing virtual machines into OpenShift Container Platform. There are some requirements for the disk to be used within a PVC.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									dataVolume
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									Data volumes build on the <code class="literal">persistentVolumeClaim</code> disk type by managing the process of preparing the virtual machine disk via an import, clone, or upload operation. VMs that use this volume type are guaranteed not to start until the volume is ready.
								</p>
								 <p>
									Specify <code class="literal">type: dataVolume</code> or <code class="literal">type: ""</code>. If you specify any other value for <code class="literal">type</code>, such as <code class="literal">persistentVolumeClaim</code>, a warning is displayed, and the virtual machine does not start.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									cloudInitNoCloud
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									Attaches a disk that contains the referenced cloud-init NoCloud data source, providing user data and metadata to the virtual machine. A cloud-init installation is required inside the virtual machine disk.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									containerDisk
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									References an image, such as a virtual machine disk, that is stored in the container image registry. The image is pulled from the registry and attached to the virtual machine as a disk when the virtual machine is launched.
								</p>
								 <p>
									A <code class="literal">containerDisk</code> volume is not limited to a single virtual machine and is useful for creating large numbers of virtual machine clones that do not require persistent storage.
								</p>
								 <p>
									Only RAW and QCOW2 formats are supported disk types for the container image registry. QCOW2 is recommended for reduced image size.
								</p>
								 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
										A <code class="literal">containerDisk</code> volume is ephemeral. It is discarded when the virtual machine is stopped, restarted, or deleted. A <code class="literal">containerDisk</code> volume is useful for read-only file systems such as CD-ROMs or for disposable virtual machines.
									</p></div></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196968975264"> <p>
									emptyDisk
								</p>
								 </td><td align="left" valign="top" headers="idm140196968974176"> <p>
									Creates an additional sparse QCOW2 disk that is tied to the life-cycle of the virtual machine interface. The data survives guest-initiated reboots in the virtual machine but is discarded when the virtual machine stops or is restarted from the web console. The empty disk is used to store application dependencies and data that otherwise exceeds the limited temporary file system of an ephemeral disk.
								</p>
								 <p>
									The disk <span class="strong strong"><strong>capacity</strong></span> size must also be provided.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="virt-about-runstrategies-vms_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.6. About RunStrategies for virtual machines</h3></div></div></div><p>
					A <code class="literal">RunStrategy</code> for virtual machines determines a virtual machine instance’s (VMI) behavior, depending on a series of conditions. The <code class="literal">spec.runStrategy</code> setting exists in the virtual machine configuration process as an alternative to the <code class="literal">spec.running</code> setting. The <code class="literal">spec.runStrategy</code> setting allows greater flexibility for how VMIs are created and managed, in contrast to the <code class="literal">spec.running</code> setting with only <code class="literal">true</code> or <code class="literal">false</code> responses. However, the two settings are mutually exclusive. Only either <code class="literal">spec.running</code> or <code class="literal">spec.runStrategy</code> can be used. An error occurs if both are used.
				</p><p>
					There are four defined RunStrategies.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Always</code></span></dt><dd>
								A VMI is always present when a virtual machine is created. A new VMI is created if the original stops for any reason, which is the same behavior as <code class="literal">spec.running: true</code>.
							</dd><dt><span class="term"><code class="literal">RerunOnFailure</code></span></dt><dd>
								A VMI is re-created if the previous instance fails due to an error. The instance is not re-created if the virtual machine stops successfully, such as when it shuts down.
							</dd><dt><span class="term"><code class="literal">Manual</code></span></dt><dd>
								The <code class="literal">start</code>, <code class="literal">stop</code>, and <code class="literal">restart</code> virtctl client commands can be used to control the VMI’s state and existence.
							</dd><dt><span class="term"><code class="literal">Halted</code></span></dt><dd>
								No VMI is present when a virtual machine is created, which is the same behavior as <code class="literal">spec.running: false</code>.
							</dd></dl></div><p>
					Different combinations of the <code class="literal">start</code>, <code class="literal">stop</code> and <code class="literal">restart</code> virtctl commands affect which <code class="literal">RunStrategy</code> is used.
				</p><p>
					The following table follows a VM’s transition from different states. The first column shows the VM’s initial <code class="literal">RunStrategy</code>. Each additional column shows a virtctl command and the new <code class="literal">RunStrategy</code> after that command is run.
				</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196981648912" scope="col">Initial RunStrategy</th><th align="left" valign="top" id="idm140196981647824" scope="col">start</th><th align="left" valign="top" id="idm140196981646736" scope="col">stop</th><th align="left" valign="top" id="idm140196981645648" scope="col">restart</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196981648912"> <p>
									Always
								</p>
								 </td><td align="left" valign="top" headers="idm140196981647824"> <p>
									-
								</p>
								 </td><td align="left" valign="top" headers="idm140196981646736"> <p>
									Halted
								</p>
								 </td><td align="left" valign="top" headers="idm140196981645648"> <p>
									Always
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981648912"> <p>
									RerunOnFailure
								</p>
								 </td><td align="left" valign="top" headers="idm140196981647824"> <p>
									-
								</p>
								 </td><td align="left" valign="top" headers="idm140196981646736"> <p>
									Halted
								</p>
								 </td><td align="left" valign="top" headers="idm140196981645648"> <p>
									RerunOnFailure
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981648912"> <p>
									Manual
								</p>
								 </td><td align="left" valign="top" headers="idm140196981647824"> <p>
									Manual
								</p>
								 </td><td align="left" valign="top" headers="idm140196981646736"> <p>
									Manual
								</p>
								 </td><td align="left" valign="top" headers="idm140196981645648"> <p>
									Manual
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196981648912"> <p>
									Halted
								</p>
								 </td><td align="left" valign="top" headers="idm140196981647824"> <p>
									Always
								</p>
								 </td><td align="left" valign="top" headers="idm140196981646736"> <p>
									-
								</p>
								 </td><td align="left" valign="top" headers="idm140196981645648"> <p>
									-
								</p>
								 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In OpenShift Virtualization clusters installed using installer-provisioned infrastructure, when a node fails the MachineHealthCheck and becomes unavailable to the cluster, VMs with a RunStrategy of <code class="literal">Always</code> or <code class="literal">RerunOnFailure</code> are rescheduled on a new node.
					</p></div></div><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  RunStrategy: Always <span id="CO10-1"><!--Empty--></span><span class="callout">1</span>
  template:
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO10-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The VMI’s current <code class="literal">RunStrategy</code> setting.
						</div></dd></dl></div></section><section class="section _additional-resources" id="additional-resources_virt-create-vms_virt-create-vms"><div class="titlepage"><div><div><h3 class="title">10.1.7. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The <code class="literal">VirtualMachineSpec</code> definition in the <a class="link" href="https://kubevirt.io/api-reference/v0.59.0/definitions.html#_v1_virtualmachinespec">KubeVirt v0.59.0 API Reference</a> provides broader context for the parameters and hierarchy of the virtual machine specification.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The KubeVirt API Reference is the upstream project reference and might contain parameters that are not supported in OpenShift Virtualization.
							</p></div></div></li><li class="listitem">
							Enable the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#using-cpu-manager">CPU Manager</a> to use the high-performance workload profile.
						</li><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-container-disks-with-vms">Prepare a container disk</a> before adding it to a virtual machine as a <code class="literal">containerDisk</code> volume.
						</li><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/machine_management/#machine-health-checks-about_deploying-machine-health-checks">Deploying machine health checks</a> for further details on deploying and enabling machine health checks.
						</li><li class="listitem">
							See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#ipi-install-overview">Installer-provisioned infrastructure overview</a> for further details on installer-provisioned infrastructure.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>
						</li></ul></div></section></section><section class="section" id="virt-edit-vms"><div class="titlepage"><div><div><h2 class="title">10.2. Editing virtual machines</h2></div></div></div><p>
				You can update a virtual machine configuration using either the YAML editor in the web console or the OpenShift CLI on the command line. You can also update a subset of the parameters in the <span class="strong strong"><strong>Virtual Machine Details</strong></span> screen.
			</p><section class="section" id="virt-editing-vm-web_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.1. Editing a virtual machine in the web console</h3></div></div></div><p>
					You can edit a virtual machine by using the OpenShift Container Platform web console or the command line interface.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> in the web console.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click any field that has the pencil icon, which indicates that the field is editable. For example, click the current <span class="strong strong"><strong>Boot mode</strong></span> setting, such as BIOS or UEFI, to open the <span class="strong strong"><strong>Boot mode</strong></span> window and select an option from the list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, changes to <span class="strong strong"><strong>Boot Order</strong></span> or <span class="strong strong"><strong>Flavor</strong></span> will not take effect until you restart the virtual machine.
					</p><p>
						You can view pending changes by clicking <span class="strong strong"><strong>View Pending Changes</strong></span> on the right side of the relevant field. The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div></section><section class="section" id="virt-editing-vm-yaml-web_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.2. Editing a virtual machine YAML configuration using the web console</h3></div></div></div><p>
					You can edit the YAML configuration of a virtual machine in the web console. Some parameters cannot be modified. If you click <span class="strong strong"><strong>Save</strong></span> with an invalid configuration, an error message indicates the parameter that cannot be changed.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Navigating away from the YAML screen while editing cancels any changes to the configuration you have made.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>YAML</strong></span> tab to display the editable configuration.
						</li><li class="listitem">
							Optional: You can click <span class="strong strong"><strong>Download</strong></span> to download the YAML file locally in its current state.
						</li><li class="listitem">
							Edit the file and click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><p>
					A confirmation message shows that the modification has been successful and includes the updated version number for the object.
				</p></section><section class="section" id="virt-editing-vm-cli_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.3. Editing a virtual machine YAML configuration using the CLI</h3></div></div></div><p>
					Use this procedure to edit a virtual machine YAML configuration using the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You configured a virtual machine with a YAML object configuration file.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command to update the virtual machine configuration:
						</p><pre class="programlisting language-terminal">$ oc edit &lt;object_type&gt; &lt;object_ID&gt;</pre></li><li class="listitem">
							Open the object configuration.
						</li><li class="listitem">
							Edit the YAML.
						</li><li class="listitem"><p class="simpara">
							If you edit a running virtual machine, you need to do one of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Restart the virtual machine.
								</li><li class="listitem"><p class="simpara">
									Run the following command for the new configuration to take effect:
								</p><pre class="programlisting language-terminal">$ oc apply &lt;object_type&gt; &lt;object_ID&gt;</pre></li></ul></div></li></ol></div></section><section class="section" id="virt-add-disk-to-vm_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.4. Adding a virtual disk to a virtual machine</h3></div></div></div><p>
					Use this procedure to add a virtual disk to a virtual machine.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Configuration → Disks</strong></span> tab, click <span class="strong strong"><strong>Add disk</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Specify the <span class="strong strong"><strong>Source</strong></span>, <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Size</strong></span>, <span class="strong strong"><strong>Type</strong></span>, <span class="strong strong"><strong>Interface</strong></span>, and <span class="strong strong"><strong>Storage Class</strong></span>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Optional: You can enable preallocation if you use a blank disk source and require maximum write performance when creating data volumes. To do so, select the <span class="strong strong"><strong>Enable preallocation</strong></span> checkbox.
								</li><li class="listitem">
									Optional: You can clear <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> to change the <span class="strong strong"><strong>Volume Mode</strong></span> and <span class="strong strong"><strong>Access Mode</strong></span> for the virtual disk. If you do not specify these parameters, the system uses the default values from the <code class="literal">kubevirt-storage-class-defaults</code> config map.
								</li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Add</strong></span>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, the new disk is in the <span class="strong strong"><strong>pending restart</strong></span> state and will not be attached until you restart the virtual machine.
					</p><p>
						The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div><p>
					To configure storage class defaults, use storage profiles. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>.
				</p><section class="section" id="virt-storage-wizard-fields-web_virt-edit-vms"><div class="titlepage"><div><div><h4 class="title">10.2.4.1. Storage fields</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 38%; " class="col_1"><!--Empty--></col><col style="width: 23%; " class="col_2"><!--Empty--></col><col style="width: 38%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196980940624" scope="col">Name</th><th align="left" valign="top" id="idm140196980939536" scope="col">Selection</th><th align="left" valign="top" id="idm140196981846112" scope="col">Description</th></tr></thead><tbody><tr><td rowspan="6" align="left" valign="top" headers="idm140196980940624"> <p>
										Source
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> <p>
										Blank (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Create an empty disk.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980939536"> <p>
										Import via URL (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Import content via URL (HTTP or HTTPS endpoint).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980939536"> <p>
										Use an existing PVC
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Use a PVC that is already available in the cluster.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980939536"> <p>
										Clone existing PVC (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Select an existing PVC available in the cluster and clone it.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980939536"> <p>
										Import via Registry (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Import content via container registry.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980939536"> <p>
										Container (ephemeral)
									</p>
									 </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Upload content from a container located in a registry accessible from the cluster. The container disk should be used only for read-only filesystems such as CD-ROMs or temporary virtual machines.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980940624"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Name of the disk. The name can contain lowercase letters (<code class="literal">a-z</code>), numbers (<code class="literal">0-9</code>), hyphens (<code class="literal">-</code>), and periods (<code class="literal">.</code>), up to a maximum of 253 characters. The first and last characters must be alphanumeric. The name must not contain uppercase letters, spaces, or special characters.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980940624"> <p>
										Size
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Size of the disk in GiB.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980940624"> <p>
										Type
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Type of disk. Example: Disk or CD-ROM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980940624"> <p>
										Interface
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										Type of disk device. Supported interfaces are <span class="strong strong"><strong>virtIO</strong></span>, <span class="strong strong"><strong>SATA</strong></span>, and <span class="strong strong"><strong>SCSI</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196980940624"> <p>
										Storage Class
									</p>
									 </td><td align="left" valign="top" headers="idm140196980939536"> </td><td align="left" valign="top" headers="idm140196981846112"> <p>
										The storage class that is used to create the disk.
									</p>
									 </td></tr></tbody></table></div><h6 id="virt-storage-wizard-fields-advanced-web_virt-edit-vms">Advanced storage settings</h6><p>
						The following advanced storage settings are optional and available for <span class="strong strong"><strong>Blank</strong></span>, <span class="strong strong"><strong>Import via URL</strong></span>, and <span class="strong strong"><strong>Clone existing PVC</strong></span> disks. Before OpenShift Virtualization 4.11, if you do not specify these parameters, the system uses the default values from the <code class="literal">kubevirt-storage-class-defaults</code> config map. In OpenShift Virtualization 4.11 and later, the system uses the default values from the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">storage profile</a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Use storage profiles to ensure consistent advanced storage settings when provisioning storage for OpenShift Virtualization.
						</p><p>
							To manually specify <span class="strong strong"><strong>Volume Mode</strong></span> and <span class="strong strong"><strong>Access Mode</strong></span>, you must clear the <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> checkbox, which is selected by default.
						</p></div></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 31%; " class="col_1"><!--Empty--></col><col style="width: 19%; " class="col_2"><!--Empty--></col><col style="width: 19%; " class="col_3"><!--Empty--></col><col style="width: 31%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196973237696" scope="col">Name</th><th align="left" valign="top" id="idm140196973236608" scope="col">Mode description</th><th align="left" valign="top" id="idm140196969636704" scope="col">Parameter</th><th align="left" valign="top" id="idm140196969635616" scope="col">Parameter description</th></tr></thead><tbody><tr><td rowspan="2" align="left" valign="top" headers="idm140196973237696"> <p>
										Volume Mode
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm140196973236608"> <p>
										Defines whether the persistent volume uses a formatted file system or raw block state. Default is <span class="strong strong"><strong>Filesystem</strong></span>.
									</p>
									 </td><td align="left" valign="top" headers="idm140196969636704"> <p>
										Filesystem
									</p>
									 </td><td align="left" valign="top" headers="idm140196969635616"> <p>
										Stores the virtual disk on a file system-based volume.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196969636704"> <p>
										Block
									</p>
									 </td><td align="left" valign="top" headers="idm140196969635616"> <p>
										Stores the virtual disk directly on the block volume. Only use <code class="literal">Block</code> if the underlying storage supports it.
									</p>
									 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm140196973237696"> <p>
										Access Mode
									</p>
									 </td><td rowspan="3" align="left" valign="top" headers="idm140196973236608"> <p>
										Access mode of the persistent volume.
									</p>
									 </td><td align="left" valign="top" headers="idm140196969636704"> <p>
										ReadWriteOnce (RWO)
									</p>
									 </td><td align="left" valign="top" headers="idm140196969635616"> <p>
										Volume can be mounted as read-write by a single node.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196969636704"> <p>
										ReadWriteMany (RWX)
									</p>
									 </td><td align="left" valign="top" headers="idm140196969635616"> <p>
										Volume can be mounted as read-write by many nodes at one time.
									</p>
									 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
											This is required for some features, such as live migration of virtual machines between nodes.
										</p></div></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196969636704"> <p>
										ReadOnlyMany (ROX)
									</p>
									 </td><td align="left" valign="top" headers="idm140196969635616"> <p>
										Volume can be mounted as read only by many nodes.
									</p>
									 </td></tr></tbody></table></div></section></section><section class="section" id="virt-adding-secret-configmap-service-account-to-vm_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.5. Adding a secret, config map, or service account to a virtual machine</h3></div></div></div><p>
					You add a secret, config map, or service account to a virtual machine by using the OpenShift Container Platform web console.
				</p><p>
					These resources are added to the virtual machine as disks. You then mount the secret, config map, or service account as you would mount any other disk.
				</p><p>
					If the virtual machine is running, changes do not take effect until you restart the virtual machine. The newly added resources are marked as pending changes at the top of the page.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The secret, config map, or service account that you want to add must exist in the same namespace as the target virtual machine.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Environment</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add Config Map, Secret or Service Account</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Select a resource</strong></span> and select a resource from the list. A six character serial number is automatically generated for the selected resource.
						</li><li class="listitem">
							Optional: Click <span class="strong strong"><strong>Reload</strong></span> to revert the environment to its last saved state.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							On the <span class="strong strong"><strong>VirtualMachine details</strong></span> page, click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span> and verify that the resource is displayed in the list of disks.
						</li><li class="listitem">
							Restart the virtual machine by clicking <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Restart</strong></span>.
						</li></ol></div><p>
					You can now mount the secret, config map, or service account as you would mount any other disk.
				</p><h5 id="additional-resources-configmaps">Additional resources for config maps, secrets, and service accounts</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-pods-configmap-overview_builds-configmaps">Understanding config maps</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-pods-secrets-about">Providing sensitive data to pods</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#service-accounts-overview">Understanding and creating service accounts</a>
						</li></ul></div></section><section class="section" id="virt-vm-add-nic_virt-edit-vms"><div class="titlepage"><div><div><h3 class="title">10.2.6. Adding a network interface to a virtual machine</h3></div></div></div><p>
					Use this procedure to add a network interface to a virtual machine.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Configuration → Network interfaces</strong></span> tab, click <span class="strong strong"><strong>Add Network Interface</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Add Network Interface</strong></span> window, specify the <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Model</strong></span>, <span class="strong strong"><strong>Network</strong></span>, <span class="strong strong"><strong>Type</strong></span>, and <span class="strong strong"><strong>MAC Address</strong></span> of the network interface.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add</strong></span>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, the new network interface is in the <span class="strong strong"><strong>pending restart</strong></span> state and changes will not take effect until you restart the virtual machine.
					</p><p>
						The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div><section class="section" id="virt-networking-wizard-fields-web_virt-edit-vms"><div class="titlepage"><div><div><h4 class="title">10.2.6.1. Networking fields</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977985488" scope="col">Name</th><th align="left" valign="top" id="idm140196968810656" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977985488"> <p>
										Name
									</p>
									 </td><td align="left" valign="top" headers="idm140196968810656"> <p>
										Name for the network interface controller.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977985488"> <p>
										Model
									</p>
									 </td><td align="left" valign="top" headers="idm140196968810656"> <p>
										Indicates the model of the network interface controller. Supported values are <span class="strong strong"><strong>e1000e</strong></span> and <span class="strong strong"><strong>virtio</strong></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977985488"> <p>
										Network
									</p>
									 </td><td align="left" valign="top" headers="idm140196968810656"> <p>
										List of available network attachment definitions.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977985488"> <p>
										Type
									</p>
									 </td><td align="left" valign="top" headers="idm140196968810656"> <p>
										List of available binding methods. Select the binding method suitable for the network interface:
									</p>
									 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												Default pod network: <code class="literal">masquerade</code>
											</li><li class="listitem">
												Linux bridge network: <code class="literal">bridge</code>
											</li><li class="listitem">
												SR-IOV network: <code class="literal">SR-IOV</code>
											</li></ul></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977985488"> <p>
										MAC Address
									</p>
									 </td><td align="left" valign="top" headers="idm140196968810656"> <p>
										MAC address for the network interface controller. If a MAC address is not specified, one is assigned automatically.
									</p>
									 </td></tr></tbody></table></div></section></section></section><section class="section" id="virt-edit-boot-order"><div class="titlepage"><div><div><h2 class="title">10.3. Editing boot order</h2></div></div></div><p>
				You can update the values for a boot order list by using the web console or the CLI.
			</p><p>
				With <span class="strong strong"><strong>Boot Order</strong></span> in the <span class="strong strong"><strong>Virtual Machine Overview</strong></span> page, you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Select a disk or network interface controller (NIC) and add it to the boot order list.
					</li><li class="listitem">
						Edit the order of the disks or NICs in the boot order list.
					</li><li class="listitem">
						Remove a disk or NIC from the boot order list, and return it back to the inventory of bootable sources.
					</li></ul></div><section class="section" id="virt-add-boot-order-web_virt-edit-boot-order"><div class="titlepage"><div><div><h3 class="title">10.3.1. Adding items to a boot order list in the web console</h3></div></div></div><p>
					Add items to a boot order list by using the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Details</strong></span> tab.
						</li><li class="listitem">
							Click the pencil icon that is located on the right side of <span class="strong strong"><strong>Boot Order</strong></span>. If a YAML configuration does not exist, or if this is the first time that you are creating a boot order list, the following message displays: <span class="strong strong"><strong>No resource selected. VM will attempt to boot from disks by order of appearance in YAML file.</strong></span>
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add Source</strong></span> and select a bootable disk or network interface controller (NIC) for the virtual machine.
						</li><li class="listitem">
							Add any additional disks or NICs to the boot order list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, changes to <span class="strong strong"><strong>Boot Order</strong></span> will not take effect until you restart the virtual machine.
					</p><p>
						You can view pending changes by clicking <span class="strong strong"><strong>View Pending Changes</strong></span> on the right side of the <span class="strong strong"><strong>Boot Order</strong></span> field. The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div></section><section class="section" id="virt-edit-boot-order-web_virt-edit-boot-order"><div class="titlepage"><div><div><h3 class="title">10.3.2. Editing a boot order list in the web console</h3></div></div></div><p>
					Edit the boot order list in the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Details</strong></span> tab.
						</li><li class="listitem">
							Click the pencil icon that is located on the right side of <span class="strong strong"><strong>Boot Order</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Choose the appropriate method to move the item in the boot order list:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If you do not use a screen reader, hover over the arrow icon next to the item that you want to move, drag the item up or down, and drop it in a location of your choice.
								</li><li class="listitem">
									If you use a screen reader, press the Up Arrow key or Down Arrow key to move the item in the boot order list. Then, press the <span class="strong strong"><strong>Tab</strong></span> key to drop the item in a location of your choice.
								</li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, changes to the boot order list will not take effect until you restart the virtual machine.
					</p><p>
						You can view pending changes by clicking <span class="strong strong"><strong>View Pending Changes</strong></span> on the right side of the <span class="strong strong"><strong>Boot Order</strong></span> field. The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div></section><section class="section" id="virt-edit-boot-order-yaml-web_virt-edit-boot-order"><div class="titlepage"><div><div><h3 class="title">10.3.3. Editing a boot order list in the YAML configuration file</h3></div></div></div><p>
					Edit the boot order list in a YAML configuration file by using the CLI.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open the YAML configuration file for the virtual machine by running the following command:
						</p><pre class="programlisting language-terminal">$ oc edit vm example</pre></li><li class="listitem"><p class="simpara">
							Edit the YAML file and modify the values for the boot order associated with a disk or network interface controller (NIC). For example:
						</p><pre class="programlisting language-yaml">disks:
  - bootOrder: 1 <span id="CO11-1"><!--Empty--></span><span class="callout">1</span>
    disk:
      bus: virtio
    name: containerdisk
  - disk:
      bus: virtio
    name: cloudinitdisk
  - cdrom:
      bus: virtio
    name: cd-drive-1
interfaces:
  - boot Order: 2 <span id="CO11-2"><!--Empty--></span><span class="callout">2</span>
    macAddress: '02:96:c4:00:00'
    masquerade: {}
    name: default</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO11-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The boot order value specified for the disk.
								</div></dd><dt><a href="#CO11-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The boot order value specified for the network interface controller.
								</div></dd></dl></div></li><li class="listitem">
							Save the YAML file.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>reload the content</strong></span> to apply the updated boot order values from the YAML file to the boot order list in the web console.
						</li></ol></div></section><section class="section" id="virt-remove-boot-order-item-web_virt-edit-boot-order"><div class="titlepage"><div><div><h3 class="title">10.3.4. Removing items from a boot order list in the web console</h3></div></div></div><p>
					Remove items from a boot order list by using the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Details</strong></span> tab.
						</li><li class="listitem">
							Click the pencil icon that is located on the right side of <span class="strong strong"><strong>Boot Order</strong></span>.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Remove</strong></span> icon 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/0c9dfaee3baa4ec510d2408d7c523559/delete.png" alt="delete"/></span>
							 next to the item. The item is removed from the boot order list and saved in the list of available boot sources. If you remove all items from the boot order list, the following message displays: <span class="strong strong"><strong>No resource selected. VM will attempt to boot from disks by order of appearance in YAML file.</strong></span>
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the virtual machine is running, changes to <span class="strong strong"><strong>Boot Order</strong></span> will not take effect until you restart the virtual machine.
					</p><p>
						You can view pending changes by clicking <span class="strong strong"><strong>View Pending Changes</strong></span> on the right side of the <span class="strong strong"><strong>Boot Order</strong></span> field. The <span class="strong strong"><strong>Pending Changes</strong></span> banner at the top of the page displays a list of all changes that will be applied when the virtual machine restarts.
					</p></div></div></section></section><section class="section" id="virt-delete-vms"><div class="titlepage"><div><div><h2 class="title">10.4. Deleting virtual machines</h2></div></div></div><p>
				You can delete a virtual machine from the web console or by using the <code class="literal">oc</code> command line interface.
			</p><section class="section" id="virt-delete-vm-web_virt-delete-vms"><div class="titlepage"><div><div><h3 class="title">10.4.1. Deleting a virtual machine using the web console</h3></div></div></div><p>
					Deleting a virtual machine permanently removes it from the cluster.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem"><p class="simpara">
							Click the Options menu 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 beside a virtual machine and select <span class="strong strong"><strong>Delete</strong></span>.
						</p><p class="simpara">
							Alternatively, click the virtual machine name to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page and click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Delete</strong></span>.
						</p></li><li class="listitem">
							Optional: Select <span class="strong strong"><strong>With grace period</strong></span> or clear <span class="strong strong"><strong>Delete disks</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Delete</strong></span> to permanently delete the virtual machine.
						</li></ol></div></section><section class="section" id="virt-deleting-vms_virt-delete-vms"><div class="titlepage"><div><div><h3 class="title">10.4.2. Deleting a virtual machine by using the CLI</h3></div></div></div><p>
					You can delete a virtual machine by using the <code class="literal">oc</code> command line interface (CLI). The <code class="literal">oc</code> client enables you to perform actions on multiple virtual machines.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Identify the name of the virtual machine that you want to delete.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Delete the virtual machine by running the following command:
						</p><pre class="programlisting language-terminal">$ oc delete vm &lt;vm_name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This command only deletes a VM in the current project. Specify the <code class="literal">-n &lt;project_name&gt;</code> option if the VM you want to delete is in a different project or namespace.
							</p></div></div></li></ul></div></section></section><section class="section" id="virt-exporting-vms"><div class="titlepage"><div><div><h2 class="title">10.5. Exporting virtual machines</h2></div></div></div><p>
				You can export a virtual machine (VM) and its associated disks in order to import a VM into another cluster or to analyze the volume for forensic purposes.
			</p><p>
				You create a <code class="literal">VirtualMachineExport</code> custom resource (CR) by using the command line interface.
			</p><p>
				Alternatively, you can use the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#vm-volume-export-commands_virt-using-the-cli-tools"><code class="literal">virtctl vmexport</code> command</a> to create a <code class="literal">VirtualMachineExport</code> CR and to download exported volumes.
			</p><section class="section" id="virt-creating-virtualmachineexport_virt-exporting-vms"><div class="titlepage"><div><div><h3 class="title">10.5.1. Creating a VirtualMachineExport custom resource</h3></div></div></div><p>
					You can create a <code class="literal">VirtualMachineExport</code> custom resource (CR) to export the following objects:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Virtual machine (VM): Exports the persistent volume claims (PVCs) of a specified VM.
						</li><li class="listitem">
							VM snapshot: Exports PVCs contained in a <code class="literal">VirtualMachineSnapshot</code> CR.
						</li><li class="listitem">
							PVC: Exports a PVC. If the PVC is used by another pod, such as the <code class="literal">virt-launcher</code> pod, the export remains in a <code class="literal">Pending</code> state until the PVC is no longer in use.
						</li></ul></div><p>
					The <code class="literal">VirtualMachineExport</code> CR creates internal and external links for the exported volumes. Internal links are valid within the cluster. External links can be accessed by using an <code class="literal">Ingress</code> or <code class="literal">Route</code>.
				</p><p>
					The export server supports the following file formats:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">raw</code>: Raw disk image file.
						</li><li class="listitem">
							<code class="literal">gzip</code>: Compressed disk image file.
						</li><li class="listitem">
							<code class="literal">dir</code>: PVC directory and files.
						</li><li class="listitem">
							<code class="literal">tar.gz</code>: Compressed PVC file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The VM must be shut down for a VM export.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">VirtualMachineExport</code> manifest to export a volume from a <code class="literal">VirtualMachine</code>, <code class="literal">VirtualMachineSnapshot</code>, or <code class="literal">PersistentVolumeClaim</code> CR according to the following example and save it as <code class="literal">example-export.yaml</code>:
						</p><div class="formalpara"><p class="title"><strong><code class="literal">VirtualMachineExport</code> example</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: export.kubevirt.io/v1alpha1
kind: VirtualMachineExport
metadata:
  name: example-export
spec:
  source:
    apiGroup: "kubevirt.io" <span id="CO12-1"><!--Empty--></span><span class="callout">1</span>
    kind: VirtualMachine <span id="CO12-2"><!--Empty--></span><span class="callout">2</span>
    name: example-vm
  ttlDuration: 1h <span id="CO12-3"><!--Empty--></span><span class="callout">3</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO12-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Specify the appropriate API group:
								</div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">"kubevirt.io"</code> for <code class="literal">VirtualMachine</code>.
										</li><li class="listitem">
											<code class="literal">"snapshot.kubevirt.io"</code> for <code class="literal">VirtualMachineSnapshot</code>.
										</li><li class="listitem">
											<code class="literal">""</code> for <code class="literal">PersistentVolumeClaim</code>.
										</li></ul></div></dd><dt><a href="#CO12-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Specify <code class="literal">VirtualMachine</code>, <code class="literal">VirtualMachineSnapshot</code>, or <code class="literal">PersistentVolumeClaim</code>.
								</div></dd><dt><a href="#CO12-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Optional. The default duration is 2 hours.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Create the <code class="literal">VirtualMachineExport</code> CR:
						</p><pre class="programlisting language-terminal">$ oc create -f example-export.yaml</pre></li><li class="listitem"><p class="simpara">
							Get the <code class="literal">VirtualMachineExport</code> CR:
						</p><pre class="programlisting language-terminal">$ oc get vmexport example-export -o yaml</pre><p class="simpara">
							The internal and external links for the exported volumes are displayed in the <code class="literal">status</code> stanza:
						</p><div class="formalpara"><p class="title"><strong>Output example</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: export.kubevirt.io/v1alpha1
kind: VirtualMachineExport
metadata:
  name: example-export
  namespace: example
spec:
  source:
    apiGroup: ""
    kind: PersistentVolumeClaim
    name: example-pvc
  tokenSecretRef: example-token
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: "2022-06-21T14:10:09Z"
    reason: podReady
    status: "True"
    type: Ready
  - lastProbeTime: null
    lastTransitionTime: "2022-06-21T14:09:02Z"
    reason: pvcBound
    status: "True"
    type: PVCReady
  links:
    external: <span id="CO13-1"><!--Empty--></span><span class="callout">1</span>
      cert: |-
        -----BEGIN CERTIFICATE-----
        ...
        -----END CERTIFICATE-----
      volumes:
      - formats:
        - format: raw
          url: https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/volumes/example-disk/disk.img
        - format: gzip
          url: https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/volumes/example-disk/disk.img.gz
        name: example-disk
    internal:  <span id="CO13-2"><!--Empty--></span><span class="callout">2</span>
      cert: |-
        -----BEGIN CERTIFICATE-----
        ...
        -----END CERTIFICATE-----
      volumes:
      - formats:
        - format: raw
          url: https://virt-export-example-export.example.svc/volumes/example-disk/disk.img
        - format: gzip
          url: https://virt-export-example-export.example.svc/volumes/example-disk/disk.img.gz
        name: example-disk
  phase: Ready
  serviceName: virt-export-example-export</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO13-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									External links are accessible from outside the cluster by using an <code class="literal">Ingress</code> or <code class="literal">Route</code>.
								</div></dd><dt><a href="#CO13-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Internal links are only valid inside the cluster.
								</div></dd></dl></div></li></ol></div></section><section class="section" id="virt-accessing-exported-vm-manifests_virt-exporting-vms"><div class="titlepage"><div><div><h3 class="title">10.5.2. Accessing exported virtual machine manifests</h3></div></div></div><p>
					After you export a virtual machine (VM) or snapshot, you can get the <code class="literal">VirtualMachine</code> manifest and related information from the export server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You exported a virtual machine or VM snapshot by creating a <code class="literal">VirtualMachineExport</code> custom resource (CR).
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								<code class="literal">VirtualMachineExport</code> objects that have the <code class="literal">spec.source.kind: PersistentVolumeClaim</code> parameter do not generate virtual machine manifests.
							</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To access the manifests, you must first copy the certificates from the source cluster to the target cluster.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Log in to the source cluster.
								</li><li class="listitem"><p class="simpara">
									Save the certificates to the <code class="literal">cacert.crt</code> file by running the following command:
								</p><pre class="programlisting language-terminal">$ oc get vmexport &lt;export_name&gt; -o jsonpath={.status.links.external.cert} &gt; cacert.crt <span id="CO14-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO14-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Replace <code class="literal">&lt;export_name&gt;</code> with the <code class="literal">metadata.name</code> value from the <code class="literal">VirtualMachineExport</code> object.
										</div></dd></dl></div></li><li class="listitem">
									Copy the <code class="literal">cacert.crt</code> file to the target cluster.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Decode the token in the source cluster and save it to the <code class="literal">token_decode</code> file by running the following command:
						</p><pre class="programlisting language-terminal">$ oc get secret export-token-&lt;export_name&gt; -o jsonpath={.data.token} | base64 --decode &gt; token_decode <span id="CO15-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO15-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Replace <code class="literal">&lt;export_name&gt;</code> with the <code class="literal">metadata.name</code> value from the <code class="literal">VirtualMachineExport</code> object.
								</div></dd></dl></div></li><li class="listitem">
							Copy the <code class="literal">token_decode</code> file to the target cluster.
						</li><li class="listitem"><p class="simpara">
							Get the <code class="literal">VirtualMachineExport</code> custom resource by running the following command:
						</p><pre class="programlisting language-terminal">$ oc get vmexport &lt;export_name&gt; -o yaml</pre></li><li class="listitem"><p class="simpara">
							Review the <code class="literal">status.links</code> stanza, which is divided into <code class="literal">external</code> and <code class="literal">internal</code> sections. Note the <code class="literal">manifests.url</code> fields within each section:
						</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: export.kubevirt.io/v1alpha1
kind: VirtualMachineExport
metadata:
  name: example-export
spec:
  source:
    apiGroup: "kubevirt.io"
    kind: VirtualMachine
    name: example-vm
  tokenSecretRef: example-token
status:
#...
  links:
    external:
#...
      manifests:
      - type: all
        url: https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/external/manifests/all <span id="CO16-1"><!--Empty--></span><span class="callout">1</span>
      - type: auth-header-secret
        url: https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/external/manifests/secret <span id="CO16-2"><!--Empty--></span><span class="callout">2</span>
    internal:
#...
      manifests:
      - type: all
        url: https://virt-export-export-pvc.default.svc/internal/manifests/all <span id="CO16-3"><!--Empty--></span><span class="callout">3</span>
      - type: auth-header-secret
        url: https://virt-export-export-pvc.default.svc/internal/manifests/secret
  phase: Ready
  serviceName: virt-export-example-export</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO16-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Contains the <code class="literal">VirtualMachine</code> manifest, <code class="literal">DataVolume</code> manifest, if present, and a <code class="literal">ConfigMap</code> manifest that contains the public certificate for the external URL’s ingress or route.
								</div></dd><dt><a href="#CO16-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Contains a secret containing a header that is compatible with Containerized Data Importer (CDI). The header contains a text version of the export token.
								</div></dd><dt><a href="#CO16-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Contains the <code class="literal">VirtualMachine</code> manifest, <code class="literal">DataVolume</code> manifest, if present, and a <code class="literal">ConfigMap</code> manifest that contains the certificate for the internal URL’s export server.
								</div></dd></dl></div></li><li class="listitem">
							Log in to the target cluster.
						</li><li class="listitem"><p class="simpara">
							Get the <code class="literal">Secret</code> manifest by running the following command:
						</p><pre class="programlisting language-terminal">$ curl --cacert cacert.crt &lt;secret_manifest_url&gt; -H \ <span id="CO17-1"><!--Empty--></span><span class="callout">1</span>
"x-kubevirt-export-token:token_decode" -H \ <span id="CO17-2"><!--Empty--></span><span class="callout">2</span>
"Accept:application/yaml"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO17-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Replace <code class="literal">&lt;secret_manifest_url&gt;</code> with an <code class="literal">auth-header-secret</code> URL from the <code class="literal">VirtualMachineExport</code> YAML output.
								</div></dd><dt><a href="#CO17-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Reference the <code class="literal">token_decode</code> file that you created earlier.
								</div></dd></dl></div><p class="simpara">
							For example:
						</p><pre class="programlisting language-terminal">$ curl --cacert cacert.crt https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/external/manifests/secret -H "x-kubevirt-export-token:token_decode" -H "Accept:application/yaml"</pre></li><li class="listitem"><p class="simpara">
							Get the manifests of <code class="literal">type: all</code>, such as the <code class="literal">ConfigMap</code> and <code class="literal">VirtualMachine</code> manifests, by running the following command:
						</p><pre class="programlisting language-terminal">$ curl --cacert cacert.crt &lt;all_manifest_url&gt; -H \ <span id="CO18-1"><!--Empty--></span><span class="callout">1</span>
"x-kubevirt-export-token:token_decode" -H \ <span id="CO18-2"><!--Empty--></span><span class="callout">2</span>
"Accept:application/yaml"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO18-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Replace <code class="literal">&lt;all_manifest_url&gt;</code> with a URL from the <code class="literal">VirtualMachineExport</code> YAML output.
								</div></dd><dt><a href="#CO18-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Reference the <code class="literal">token_decode</code> file that you created earlier.
								</div></dd></dl></div><p class="simpara">
							For example:
						</p><pre class="programlisting language-terminal">$ curl --cacert cacert.crt https://vmexport-proxy.test.net/api/export.kubevirt.io/v1alpha1/namespaces/example/virtualmachineexports/example-export/external/manifests/all -H "x-kubevirt-export-token:token_decode" -H "Accept:application/yaml"</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You can now create the <code class="literal">ConfigMap</code> and <code class="literal">VirtualMachine</code> objects on the target cluster by using the exported manifests.
						</li></ul></div></section><section class="section _additional-resources" id="additional-resources_virt-exporting-vms"><div class="titlepage"><div><div><h3 class="title">10.5.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-importing-virtual-machine-images-datavolumes">Importing virtual machine images with data volumes</a>
						</li></ul></div></section></section><section class="section" id="virt-manage-vmis"><div class="titlepage"><div><div><h2 class="title">10.6. Managing virtual machine instances</h2></div></div></div><p>
				If you have standalone virtual machine instances (VMIs) that were created independently outside of the OpenShift Virtualization environment, you can manage them by using the web console or by using <code class="literal">oc</code> or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-the-cli-tools"><code class="literal">virtctl</code></a> commands from the command-line interface (CLI).
			</p><p>
				The <code class="literal">virtctl</code> command provides more virtualization options than the <code class="literal">oc</code> command. For example, you can use <code class="literal">virtctl</code> to pause a VM or expose a port.
			</p><section class="section" id="virt-about-vmis_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.1. About virtual machine instances</h3></div></div></div><p>
					A virtual machine instance (VMI) is a representation of a running virtual machine (VM). When a VMI is owned by a VM or by another object, you manage it through its owner in the web console or by using the <code class="literal">oc</code> command-line interface (CLI).
				</p><p>
					A standalone VMI is created and started independently with a script, through automation, or by using other methods in the CLI. In your environment, you might have standalone VMIs that were developed and started outside of the OpenShift Virtualization environment. You can continue to manage those standalone VMIs by using the CLI. You can also use the web console for specific tasks associated with standalone VMIs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							List standalone VMIs and their details.
						</li><li class="listitem">
							Edit labels and annotations for a standalone VMI.
						</li><li class="listitem">
							Delete a standalone VMI.
						</li></ul></div><p>
					When you delete a VM, the associated VMI is automatically deleted. You delete a standalone VMI directly because it is not owned by VMs or other objects.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Before you uninstall OpenShift Virtualization, list and view the standalone VMIs by using the CLI or the web console. Then, delete any outstanding VMIs.
					</p></div></div></section><section class="section" id="virt-listing-vmis-cli_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.2. Listing all virtual machine instances using the CLI</h3></div></div></div><p>
					You can list all virtual machine instances (VMIs) in your cluster, including standalone VMIs and those owned by virtual machines, by using the <code class="literal">oc</code> command-line interface (CLI).
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List all VMIs by running the following command:
						</p><pre class="programlisting language-terminal">$ oc get vmis -A</pre></li></ul></div></section><section class="section" id="virt-listing-vmis-web_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.3. Listing standalone virtual machine instances using the web console</h3></div></div></div><p>
					Using the web console, you can list and view standalone virtual machine instances (VMIs) in your cluster that are not owned by virtual machines (VMs).
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						VMIs that are owned by VMs or other objects are not displayed in the web console. The web console displays only standalone VMIs. If you want to list all VMIs in your cluster, you must use the CLI.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</p><p class="simpara">
							You can identify a standalone VMI by a dark colored badge next to its name.
						</p></li></ul></div></section><section class="section" id="virt-editing-vmis-web_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.4. Editing a standalone virtual machine instance using the web console</h3></div></div></div><p>
					You can edit the annotations and labels of a standalone virtual machine instance (VMI) using the web console. Other fields are not editable.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a standalone VMI to open the <span class="strong strong"><strong>VirtualMachineInstance details</strong></span> page.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Details</strong></span> tab, click the pencil icon beside <span class="strong strong"><strong>Annotations</strong></span> or <span class="strong strong"><strong>Labels</strong></span>.
						</li><li class="listitem">
							Make the relevant changes and click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section><section class="section" id="virt-deleting-vmis-cli_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.5. Deleting a standalone virtual machine instance using the CLI</h3></div></div></div><p>
					You can delete a standalone virtual machine instance (VMI) by using the <code class="literal">oc</code> command-line interface (CLI).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Identify the name of the VMI that you want to delete.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Delete the VMI by running the following command:
						</p><pre class="programlisting language-terminal">$ oc delete vmi &lt;vmi_name&gt;</pre></li></ul></div></section><section class="section" id="virt-deleting-vmis-web_virt-manage-vmis"><div class="titlepage"><div><div><h3 class="title">10.6.6. Deleting a standalone virtual machine instance using the web console</h3></div></div></div><p>
					Delete a standalone virtual machine instance (VMI) from the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Delete VirtualMachineInstance</strong></span>.
						</li><li class="listitem">
							In the confirmation pop-up window, click <span class="strong strong"><strong>Delete</strong></span> to permanently delete the standalone VMI.
						</li></ol></div></section></section><section class="section" id="virt-controlling-vm-states"><div class="titlepage"><div><div><h2 class="title">10.7. Controlling virtual machine states</h2></div></div></div><p>
				You can stop, start, restart, and unpause virtual machines from the web console.
			</p><p>
				You can use <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-the-cli-tools"><code class="literal">virtctl</code></a> to manage virtual machine states and perform other actions from the CLI. For example, you can use <code class="literal">virtctl</code> to force stop a VM or expose a port.
			</p><section class="section" id="virt-starting-vm-web_virt-controlling-vm-states"><div class="titlepage"><div><div><h3 class="title">10.7.1. Starting a virtual machine</h3></div></div></div><p>
					You can start a virtual machine from the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Find the row that contains the virtual machine that you want to start.
						</li><li class="listitem"><p class="simpara">
							Navigate to the appropriate menu for your use case:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To stay on this page, where you can perform actions on multiple virtual machines:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Click the Options menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 located at the far right end of the row.
										</li></ol></div></li><li class="listitem"><p class="simpara">
									To view comprehensive information about the selected virtual machine before you start it:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Access the <span class="strong strong"><strong>VirtualMachine details</strong></span> page by clicking the name of the virtual machine.
										</li><li class="listitem">
											Click <span class="strong strong"><strong>Actions</strong></span>.
										</li></ol></div></li></ul></div></li><li class="listitem">
							Select <span class="strong strong"><strong>Restart</strong></span>.
						</li><li class="listitem">
							In the confirmation window, click <span class="strong strong"><strong>Start</strong></span> to start the virtual machine.
						</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When you start virtual machine that is provisioned from a <code class="literal">URL</code> source for the first time, the virtual machine has a status of <span class="strong strong"><strong>Importing</strong></span> while OpenShift Virtualization imports the container from the URL endpoint. Depending on the size of the image, this process might take several minutes.
					</p></div></div></section><section class="section" id="virt-restarting-vm-web_virt-controlling-vm-states"><div class="titlepage"><div><div><h3 class="title">10.7.2. Restarting a virtual machine</h3></div></div></div><p>
					You can restart a running virtual machine from the web console.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						To avoid errors, do not restart a virtual machine while it has a status of <span class="strong strong"><strong>Importing</strong></span>.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Find the row that contains the virtual machine that you want to restart.
						</li><li class="listitem"><p class="simpara">
							Navigate to the appropriate menu for your use case:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To stay on this page, where you can perform actions on multiple virtual machines:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Click the Options menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 located at the far right end of the row.
										</li></ol></div></li><li class="listitem"><p class="simpara">
									To view comprehensive information about the selected virtual machine before you restart it:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Access the <span class="strong strong"><strong>VirtualMachine details</strong></span> page by clicking the name of the virtual machine.
										</li><li class="listitem">
											Click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Restart</strong></span>.
										</li></ol></div></li></ul></div></li><li class="listitem">
							In the confirmation window, click <span class="strong strong"><strong>Restart</strong></span> to restart the virtual machine.
						</li></ol></div></section><section class="section" id="virt-stopping-vm-web_virt-controlling-vm-states"><div class="titlepage"><div><div><h3 class="title">10.7.3. Stopping a virtual machine</h3></div></div></div><p>
					You can stop a virtual machine from the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Find the row that contains the virtual machine that you want to stop.
						</li><li class="listitem"><p class="simpara">
							Navigate to the appropriate menu for your use case:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To stay on this page, where you can perform actions on multiple virtual machines:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Click the Options menu 
											<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
											 located at the far right end of the row.
										</li></ol></div></li><li class="listitem"><p class="simpara">
									To view comprehensive information about the selected virtual machine before you stop it:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Access the <span class="strong strong"><strong>VirtualMachine details</strong></span> page by clicking the name of the virtual machine.
										</li><li class="listitem">
											Click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Stop</strong></span>.
										</li></ol></div></li></ul></div></li><li class="listitem">
							In the confirmation window, click <span class="strong strong"><strong>Stop</strong></span> to stop the virtual machine.
						</li></ol></div></section><section class="section" id="virt-unpausing-vm-web_virt-controlling-vm-states"><div class="titlepage"><div><div><h3 class="title">10.7.4. Unpausing a virtual machine</h3></div></div></div><p>
					You can unpause a paused virtual machine from the web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							At least one of your virtual machines must have a status of <span class="strong strong"><strong>Paused</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can pause virtual machines by using the <code class="literal">virtctl</code> client.
							</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Find the row that contains the virtual machine that you want to unpause.
						</li><li class="listitem"><p class="simpara">
							Navigate to the appropriate menu for your use case:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To stay on this page, where you can perform actions on multiple virtual machines:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											In the <span class="strong strong"><strong>Status</strong></span> column, click <span class="strong strong"><strong>Paused</strong></span>.
										</li></ol></div></li><li class="listitem"><p class="simpara">
									To view comprehensive information about the selected virtual machine before you unpause it:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Access the <span class="strong strong"><strong>VirtualMachine details</strong></span> page by clicking the name of the virtual machine.
										</li><li class="listitem">
											Click the pencil icon that is located on the right side of <span class="strong strong"><strong>Status</strong></span>.
										</li></ol></div></li></ul></div></li><li class="listitem">
							In the confirmation window, click <span class="strong strong"><strong>Unpause</strong></span> to unpause the virtual machine.
						</li></ol></div></section></section><section class="section" id="virt-accessing-vm-consoles"><div class="titlepage"><div><div><h2 class="title">10.8. Accessing virtual machine consoles</h2></div></div></div><p>
				OpenShift Virtualization provides different virtual machine consoles that you can use to accomplish different product tasks. You can access these consoles through the OpenShift Container Platform web console and by using CLI commands.
			</p><section class="section" id="virt-accessing-vm-consoles-web"><div class="titlepage"><div><div><h3 class="title">10.8.1. Accessing virtual machine consoles in the OpenShift Container Platform web console</h3></div></div></div><p>
					You can connect to virtual machines by using the serial console or the VNC console in the OpenShift Container Platform web console.
				</p><p>
					You can connect to Windows virtual machines by using the desktop viewer console, which uses RDP (remote desktop protocol), in the OpenShift Container Platform web console.
				</p><section class="section" id="virt-vm-serial-console-web_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.1.1. Connecting to the serial console</h4></div></div></div><p>
						Connect to the serial console of a running virtual machine from the <span class="strong strong"><strong>Console</strong></span> tab on the <span class="strong strong"><strong>VirtualMachine details</strong></span> page of the web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Console</strong></span> tab. The VNC console opens by default.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Disconnect</strong></span> to ensure that only one console session is open at a time. Otherwise, the VNC console session remains active in the background.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>VNC Console</strong></span> drop-down list and select <span class="strong strong"><strong>Serial Console</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Disconnect</strong></span> to end the console session.
							</li><li class="listitem">
								Optional: Open the serial console in a separate window by clicking <span class="strong strong"><strong>Open Console in New Window</strong></span>.
							</li></ol></div></section><section class="section" id="virt-connecting-vnc-console_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.1.2. Connecting to the VNC console</h4></div></div></div><p>
						Connect to the VNC console of a running virtual machine from the <span class="strong strong"><strong>Console</strong></span> tab on the <span class="strong strong"><strong>VirtualMachine details</strong></span> page of the web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Console</strong></span> tab. The VNC console opens by default.
							</li><li class="listitem">
								Optional: Open the VNC console in a separate window by clicking <span class="strong strong"><strong>Open Console in New Window</strong></span>.
							</li><li class="listitem">
								Optional: Send key combinations to the virtual machine by clicking <span class="strong strong"><strong>Send Key</strong></span>.
							</li><li class="listitem">
								Click outside the console window and then click <span class="strong strong"><strong>Disconnect</strong></span> to end the session.
							</li></ol></div></section><section class="section" id="virt-vm-rdp-console-web_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.1.3. Connecting to a Windows virtual machine with RDP</h4></div></div></div><p>
						The <span class="strong strong"><strong>Desktop viewer</strong></span> console, which utilizes the Remote Desktop Protocol (RDP), provides a better console experience for connecting to Windows virtual machines.
					</p><p>
						To connect to a Windows virtual machine with RDP, download the <code class="literal">console.rdp</code> file for the virtual machine from the <span class="strong strong"><strong>Console</strong></span> tab on the <span class="strong strong"><strong>VirtualMachine details</strong></span> page of the web console and supply it to your preferred RDP client.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								A running Windows virtual machine with the QEMU guest agent installed. The <code class="literal">qemu-guest-agent</code> is included in the VirtIO drivers.
							</li><li class="listitem">
								An RDP client installed on a machine on the same network as the Windows virtual machine.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Click a Windows virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Console</strong></span> tab.
							</li><li class="listitem">
								From the list of consoles, select <span class="strong strong"><strong>Desktop viewer</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Launch Remote Desktop</strong></span> to download the <code class="literal">console.rdp</code> file.
							</li><li class="listitem">
								Reference the <code class="literal">console.rdp</code> file in your preferred RDP client to connect to the Windows virtual machine.
							</li></ol></div></section><section class="section" id="virt-switching-displays_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.1.4. Switching between virtual machine displays</h4></div></div></div><p>
						If your Windows virtual machine (VM) has a vGPU attached, you can switch between the default display and the vGPU display by using the web console.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The mediated device is configured in the <code class="literal">HyperConverged</code> custom resource and assigned to the VM.
							</li><li class="listitem">
								The VM is running.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span>
							</li><li class="listitem">
								Select a Windows virtual machine to open the <span class="strong strong"><strong>Overview</strong></span> screen.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Console</strong></span> tab.
							</li><li class="listitem">
								From the list of consoles, select <span class="strong strong"><strong>VNC console</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Choose the appropriate key combination from the <span class="strong strong"><strong>Send Key</strong></span> list:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To access the default VM display, select <code class="literal">Ctl + Alt+ 1</code>.
									</li><li class="listitem">
										To access the vGPU display, select <code class="literal">Ctl + Alt + 2</code>.
									</li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-mediated-devices">Configuring mediated devices</a>
							</li></ul></div></section><section class="section" id="virt-copying-the-ssh-command_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.1.5. Copying the SSH command using the web console</h4></div></div></div><p>
						Copy the command to connect to a virtual machine (VM) terminal via SSH.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Options</strong></span> menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 for your virtual machine and select <span class="strong strong"><strong>Copy SSH command</strong></span>.
							</li><li class="listitem">
								Paste it in the terminal to access the VM.
							</li></ol></div></section></section><section class="section" id="virt-accessing-vm-consoles-cli"><div class="titlepage"><div><div><h3 class="title">10.8.2. Accessing virtual machine consoles by using CLI commands</h3></div></div></div><section class="section" id="virt-accessing-vmi-ssh_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.2.1. Accessing a virtual machine via SSH by using virtctl</h4></div></div></div><p>
						You can use the <code class="literal">virtctl ssh</code> command to forward SSH traffic to a virtual machine (VM) by using your local SSH client. If you have previously configured SSH key authentication with the VM, skip to step 2 of the procedure because step 1 is not required.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Heavy SSH traffic on the control plane can slow down the API server. If you regularly need a large number of connections, use a dedicated Kubernetes <code class="literal">Service</code> object to access the virtual machine.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								You have installed the <code class="literal">virtctl</code> client.
							</li><li class="listitem">
								The virtual machine you want to access is running.
							</li><li class="listitem">
								You are in the same project as the VM.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Configure SSH key authentication:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Use the <code class="literal">ssh-keygen</code> command to generate an SSH public key pair:
									</p><pre class="programlisting language-terminal">$ ssh-keygen -f &lt;key_file&gt; <span id="CO19-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO19-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Specify the file in which to store the keys.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Create an SSH authentication secret which contains the SSH public key to access the VM:
									</p><pre class="programlisting language-terminal">$ oc create secret generic my-pub-key --from-file=key1=&lt;key_file&gt;.pub</pre></li><li class="listitem"><p class="simpara">
										Add a reference to the secret in the <code class="literal">VirtualMachine</code> manifest. For example:
									</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: testvm
spec:
  running: true
  template:
    spec:
      accessCredentials:
      - sshPublicKey:
          source:
            secret:
              secretName: my-pub-key <span id="CO20-1"><!--Empty--></span><span class="callout">1</span>
          propagationMethod:
            configDrive: {} <span id="CO20-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO20-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Reference to the SSH authentication <code class="literal">Secret</code> object.
											</div></dd><dt><a href="#CO20-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The SSH public key is injected into the VM as cloud-init metadata using the <code class="literal">configDrive</code> provider.
											</div></dd></dl></div></li><li class="listitem">
										Restart the VM to apply your changes.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Connect to the VM via SSH:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Run the following command to access the VM via SSH:
									</p><pre class="programlisting language-terminal">$ virtctl ssh -i &lt;key_file&gt; &lt;vm_username&gt;@&lt;vm_name&gt;</pre></li><li class="listitem"><p class="simpara">
										Optional: To securely transfer files to or from the VM, use the following commands:
									</p><div class="formalpara"><p class="title"><strong>Copy a file from your machine to the VM</strong></p><p>
											
<pre class="programlisting language-terminal">$ virtctl scp -i &lt;key_file&gt; &lt;filename&gt; &lt;vm_username&gt;@&lt;vm_name&gt;:</pre>

										</p></div><div class="formalpara"><p class="title"><strong>Copy a file from the VM to your machine</strong></p><p>
											
<pre class="programlisting language-terminal">$ virtctl scp -i &lt;key_file&gt; &lt;vm_username@&lt;vm_name&gt;:&lt;filename&gt; .</pre>

										</p></div></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-service-vm">Creating a service to expose a virtual machine</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-pods-secrets-about_nodes-pods-secrets">Understanding secrets</a>
							</li></ul></div></section><section class="section" id="virt-using-openssh-and-virtctl-port-forward_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.2.2. Using OpenSSH and virtctl port-forward</h4></div></div></div><p>
						You can use your local OpenSSH client and the <code class="literal">virtctl port-forward</code> command to connect to a running virtual machine (VM). You can use this method with Ansible to automate the configuration of VMs.
					</p><p>
						This method is recommended for low-traffic applications because port-forwarding traffic is sent over the control plane. This method is not recommended for high-traffic applications such as Rsync or Remote Desktop Protocol because it places a heavy burden on the API server.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have installed the <code class="literal">virtctl</code> client.
							</li><li class="listitem">
								The virtual machine you want to access is running.
							</li><li class="listitem">
								The environment where you installed the <code class="literal">virtctl</code> tool has the cluster permissions required to access the VM. For example, you ran <code class="literal">oc login</code> or you set the <code class="literal">KUBECONFIG</code> environment variable.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add the following text to the <code class="literal">~/.ssh/config</code> file on your client machine:
							</p><pre class="programlisting language-terminal">Host vm/*
  ProxyCommand virtctl port-forward --stdio=true %h %p</pre></li><li class="listitem"><p class="simpara">
								Connect to the VM by running the following command:
							</p><pre class="programlisting language-terminal">$ ssh &lt;user&gt;@vm/&lt;vm_name&gt;.&lt;namespace&gt;</pre></li></ol></div></section><section class="section" id="virt-accessing-serial-console_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.2.3. Accessing the serial console of a virtual machine instance</h4></div></div></div><p>
						The <code class="literal">virtctl console</code> command opens a serial console to the specified virtual machine instance.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">virt-viewer</code> package must be installed.
							</li><li class="listitem">
								The virtual machine instance you want to access must be running.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Connect to the serial console with <code class="literal">virtctl</code>:
							</p><pre class="programlisting language-terminal">$ virtctl console &lt;VMI&gt;</pre></li></ul></div></section><section class="section" id="virt-accessing-vnc-console_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.2.4. Accessing the graphical console of a virtual machine instances with VNC</h4></div></div></div><p>
						The <code class="literal">virtctl</code> client utility can use the <code class="literal">remote-viewer</code> function to open a graphical console to a running virtual machine instance. This capability is included in the <code class="literal">virt-viewer</code> package.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">virt-viewer</code> package must be installed.
							</li><li class="listitem">
								The virtual machine instance you want to access must be running.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you use <code class="literal">virtctl</code> via SSH on a remote machine, you must forward the X session to your machine.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Connect to the graphical interface with the <code class="literal">virtctl</code> utility:
							</p><pre class="programlisting language-terminal">$ virtctl vnc &lt;VMI&gt;</pre></li><li class="listitem"><p class="simpara">
								If the command failed, try using the <code class="literal">-v</code> flag to collect troubleshooting information:
							</p><pre class="programlisting language-terminal">$ virtctl vnc &lt;VMI&gt; -v 4</pre></li></ol></div></section><section class="section" id="virt-accessing-rdp-console_virt-accessing-vm-consoles"><div class="titlepage"><div><div><h4 class="title">10.8.2.5. Connecting to a Windows virtual machine with an RDP console</h4></div></div></div><p>
						Create a Kubernetes <code class="literal">Service</code> object to connect to a Windows virtual machine (VM) by using your local Remote Desktop Protocol (RDP) client.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								A running Windows virtual machine with the QEMU guest agent installed. The <code class="literal">qemu-guest-agent</code> object is included in the VirtIO drivers.
							</li><li class="listitem">
								An RDP client installed on your local machine.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">VirtualMachine</code> manifest to add the label for service creation:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: vm-ephemeral
  namespace: example-namespace
spec:
  running: false
  template:
    metadata:
      labels:
        special: key <span id="CO21-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO21-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Add the label <code class="literal">special: key</code> in the <code class="literal">spec.template.metadata.labels</code> section.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Labels on a virtual machine are passed through to the pod. The <code class="literal">special: key</code> label must match the label in the <code class="literal">spec.selector</code> attribute of the <code class="literal">Service</code> manifest.
								</p></div></div></li><li class="listitem">
								Save the <code class="literal">VirtualMachine</code> manifest file to apply your changes.
							</li><li class="listitem"><p class="simpara">
								Create a <code class="literal">Service</code> manifest to expose the VM:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Service
metadata:
  name: rdpservice <span id="CO22-1"><!--Empty--></span><span class="callout">1</span>
  namespace: example-namespace <span id="CO22-2"><!--Empty--></span><span class="callout">2</span>
spec:
  ports:
  - targetPort: 3389 <span id="CO22-3"><!--Empty--></span><span class="callout">3</span>
    protocol: TCP
  selector:
    special: key <span id="CO22-4"><!--Empty--></span><span class="callout">4</span>
  type: NodePort <span id="CO22-5"><!--Empty--></span><span class="callout">5</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO22-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">Service</code> object.
									</div></dd><dt><a href="#CO22-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the <code class="literal">Service</code> object resides. This must match the <code class="literal">metadata.namespace</code> field of the <code class="literal">VirtualMachine</code> manifest.
									</div></dd><dt><a href="#CO22-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The VM port to be exposed by the service. It must reference an open port if a port list is defined in the VM manifest.
									</div></dd><dt><a href="#CO22-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The reference to the label that you added in the <code class="literal">spec.template.metadata.labels</code> stanza of the <code class="literal">VirtualMachine</code> manifest.
									</div></dd><dt><a href="#CO22-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The type of service.
									</div></dd></dl></div></li><li class="listitem">
								Save the <code class="literal">Service</code> manifest file.
							</li><li class="listitem"><p class="simpara">
								Create the service by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;service_name&gt;.yaml</pre></li><li class="listitem">
								Start the VM. If the VM is already running, restart it.
							</li><li class="listitem"><p class="simpara">
								Query the <code class="literal">Service</code> object to verify that it is available:
							</p><pre class="programlisting language-terminal">$ oc get service -n example-namespace</pre><div class="formalpara"><p class="title"><strong>Example output for <code class="literal">NodePort</code> service</strong></p><p>
									
<pre class="programlisting language-terminal">NAME        TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)            AGE
rdpservice   NodePort    172.30.232.73   &lt;none&gt;       3389:30000/TCP    5m</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Run the following command to obtain the IP address for the node:
							</p><pre class="programlisting language-terminal">$ oc get node &lt;node_name&gt; -o wide</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME    STATUS   ROLES   AGE    VERSION  INTERNAL-IP      EXTERNAL-IP
node01  Ready    worker  6d22h  v1.24.0  192.168.55.101   &lt;none&gt;</pre>

								</p></div></li><li class="listitem">
								Specify the node IP address and the assigned port in your preferred RDP client.
							</li><li class="listitem">
								Enter the user name and password to connect to the Windows virtual machine.
							</li></ol></div></section></section></section><section class="section" id="virt-automating-windows-sysprep"><div class="titlepage"><div><div><h2 class="title">10.9. Automating Windows installation with sysprep</h2></div></div></div><p>
				You can use Microsoft DVD images and <code class="literal">sysprep</code> to automate the installation, setup, and software provisioning of Windows virtual machines.
			</p><section class="section" id="virt-using-windows-dvd-disk-image_virt-automating-windows-sysprep"><div class="titlepage"><div><div><h3 class="title">10.9.1. Using a Windows DVD to create a VM disk image</h3></div></div></div><p>
					Microsoft does not provide disk images for download, but you can create a disk image using a Windows DVD. This disk image can then be used to create virtual machines.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Virtualization web console, click <span class="strong strong"><strong>Storage</strong></span> → <span class="strong strong"><strong>PersistentVolumeClaims</strong></span> → <span class="strong strong"><strong>Create PersistentVolumeClaim With Data upload form</strong></span>.
						</li><li class="listitem">
							Select the intended project.
						</li><li class="listitem">
							Set the <span class="strong strong"><strong>Persistent Volume Claim Name</strong></span>.
						</li><li class="listitem">
							Upload the VM disk image from the Windows DVD. The image is now available as a boot source to create a new Windows VM.
						</li></ol></div></section><section class="section" id="virt-using-disk-image-install-windows_virt-automating-windows-sysprep"><div class="titlepage"><div><div><h3 class="title">10.9.2. Using a disk image to install Windows</h3></div></div></div><p>
					You can use a disk image to install Windows on your virtual machine.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must create a disk image using a Windows DVD.
						</li><li class="listitem">
							You must create an <code class="literal">autounattend.xml</code> answer file. See the <a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/update-windows-settings-and-scripts-create-your-own-answer-file-sxs">Microsoft documentation</a> for details.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Catalog</strong></span> from the side menu.
						</li><li class="listitem">
							Select a Windows template and click <span class="strong strong"><strong>Customize VirtualMachine</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Upload (Upload a new file to a PVC)</strong></span> from the <span class="strong strong"><strong>Disk source</strong></span> list and browse to the DVD image.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Review and create VirtualMachine</strong></span>.
						</li><li class="listitem">
							Clear <span class="strong strong"><strong>Clone available operating system source to this Virtual Machine</strong></span>.
						</li><li class="listitem">
							Clear <span class="strong strong"><strong>Start this VirtualMachine after creation</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Sysprep</strong></span> section of the <span class="strong strong"><strong>Scripts</strong></span> tab, click <span class="strong strong"><strong>Edit</strong></span>.
						</li><li class="listitem">
							Browse to the <code class="literal">autounattend.xml</code> answer file and click <span class="strong strong"><strong>Save</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create VirtualMachine</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>YAML</strong></span> tab, replace <code class="literal">running:false</code> with <code class="literal">runStrategy: RerunOnFailure</code> and click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><p>
					The VM will start with the <code class="literal">sysprep</code> disk containing the <code class="literal">autounattend.xml</code> answer file.
				</p></section><section class="section" id="virt-generalizing-windows-sysprep_virt-automating-windows-sysprep"><div class="titlepage"><div><div><h3 class="title">10.9.3. Generalizing a Windows VM using sysprep</h3></div></div></div><p>
					Generalizing an image allows that image to remove all system-specific configuration data when the image is deployed on a virtual machine (VM).
				</p><p>
					Before generalizing the VM, you must ensure the <code class="literal">sysprep</code> tool cannot detect an answer file after the unattended Windows installation.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A running Windows virtual machine with the QEMU guest agent installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span>.
						</li><li class="listitem">
							Select a Windows VM to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span>.
						</li><li class="listitem">
							Click the Options menu 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 beside the <code class="literal">sysprep</code> disk and select <span class="strong strong"><strong>Detach</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Detach</strong></span>.
						</li><li class="listitem">
							Rename <code class="literal">C:\Windows\Panther\unattend.xml</code> to avoid detection by the <code class="literal">sysprep</code> tool.
						</li><li class="listitem"><p class="simpara">
							Start the <code class="literal">sysprep</code> program by running the following command:
						</p><pre class="programlisting language-terminal">%WINDIR%\System32\Sysprep\sysprep.exe /generalize /shutdown /oobe /mode:vm</pre></li><li class="listitem">
							After the <code class="literal">sysprep</code> tool completes, the Windows VM shuts down. The disk image of the VM is now available to use as an installation image for Windows VMs.
						</li></ol></div><p>
					You can now specialize the VM.
				</p></section><section class="section" id="virt-specializing-windows-sysprep_virt-automating-windows-sysprep"><div class="titlepage"><div><div><h3 class="title">10.9.4. Specializing a Windows virtual machine</h3></div></div></div><p>
					Specializing a virtual machine (VM) configures the computer-specific information from a generalized Windows image onto the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must have a generalized Windows disk image.
						</li><li class="listitem">
							You must create an <code class="literal">unattend.xml</code> answer file. See the <a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/update-windows-settings-and-scripts-create-your-own-answer-file-sxs?view=windows-11">Microsoft documentation</a> for details.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Catalog</strong></span>.
						</li><li class="listitem">
							Select a Windows template and click <span class="strong strong"><strong>Customize VirtualMachine</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>PVC (clone PVC)</strong></span> from the <span class="strong strong"><strong>Disk source</strong></span> list.
						</li><li class="listitem">
							Specify the <span class="strong strong"><strong>Persistent Volume Claim project</strong></span> and <span class="strong strong"><strong>Persistent Volume Claim name</strong></span> of the generalized Windows image.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Review and create VirtualMachine</strong></span>.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Scripts</strong></span> tab.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Sysprep</strong></span> section, click <span class="strong strong"><strong>Edit</strong></span>, browse to the <code class="literal">unattend.xml</code> answer file, and click <span class="strong strong"><strong>Save</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create VirtualMachine</strong></span>.
						</li></ol></div><p>
					During the initial boot, Windows uses the <code class="literal">unattend.xml</code> answer file to specialize the VM. The VM is now ready to use.
				</p></section><section class="section _additional-resources" id="additional-resources-virt-automating-windows-sysprep_virt-automating-windows-sysprep"><div class="titlepage"><div><div><h3 class="title">10.9.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-create-vms">Creating virtual machines</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-installing-qemu-guest-agent">Installing the QEMU guest agent and VirtIO drivers</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/sysprep--generalize--a-windows-installation">Microsoft, Sysprep (Generalize) a Windows installation</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/generalize">Microsoft, generalize</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/specialize">Microsoft, specialize</a>
						</li></ul></div></section></section><section class="section" id="virt-triggering-vm-failover-resolving-failed-node"><div class="titlepage"><div><div><h2 class="title">10.10. Triggering virtual machine failover by resolving a failed node</h2></div></div></div><p>
				If a node fails and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/machine_management/#machine-health-checks-about_deploying-machine-health-checks">machine health checks</a> are not deployed on your cluster, virtual machines (VMs) with <code class="literal">RunStrategy: Always</code> configured are not automatically relocated to healthy nodes. To trigger VM failover, you must manually delete the <code class="literal">Node</code> object.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If you installed your cluster by using <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/installing/#ipi-install-overview">installer-provisioned infrastructure</a> and you properly configured machine health checks:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Failed nodes are automatically recycled.
						</li><li class="listitem">
							Virtual machines with <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-runstrategies-vms_virt-create-vms"><code class="literal">RunStrategy</code></a> set to <code class="literal">Always</code> or <code class="literal">RerunOnFailure</code> are automatically scheduled on healthy nodes.
						</li></ul></div></div></div><section class="section" id="prerequisites_virt-triggering-vm-failover-resolving-failed-node"><div class="titlepage"><div><div><h3 class="title">10.10.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A node where a virtual machine was running has the <code class="literal">NotReady</code> <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-nodes-viewing-listing_nodes-nodes-viewing">condition</a>.
						</li><li class="listitem">
							The virtual machine that was running on the failed node has <code class="literal">RunStrategy</code> set to <code class="literal">Always</code>.
						</li><li class="listitem">
							You have installed the OpenShift CLI (<code class="literal">oc</code>).
						</li></ul></div></section><section class="section" id="nodes-nodes-working-deleting-bare-metal_virt-triggering-vm-failover-resolving-failed-node"><div class="titlepage"><div><div><h3 class="title">10.10.2. Deleting nodes from a bare metal cluster</h3></div></div></div><p>
					When you delete a node using the CLI, the node object is deleted in Kubernetes, but the pods that exist on the node are not deleted. Any bare pods not backed by a replication controller become inaccessible to OpenShift Container Platform. Pods backed by replication controllers are rescheduled to other available nodes. You must delete local manifest pods.
				</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						Delete a node from an OpenShift Container Platform cluster running on bare metal by completing the following steps:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Mark the node as unschedulable:
						</p><pre class="programlisting language-terminal">$ oc adm cordon &lt;node_name&gt;</pre></li><li class="listitem"><p class="simpara">
							Drain all pods on the node:
						</p><pre class="programlisting language-terminal">$ oc adm drain &lt;node_name&gt; --force=true</pre><p class="simpara">
							This step might fail if the node is offline or unresponsive. Even if the node does not respond, it might still be running a workload that writes to shared storage. To avoid data corruption, power down the physical hardware before you proceed.
						</p></li><li class="listitem"><p class="simpara">
							Delete the node from the cluster:
						</p><pre class="programlisting language-terminal">$ oc delete node &lt;node_name&gt;</pre><p class="simpara">
							Although the node object is now deleted from the cluster, it can still rejoin the cluster after reboot or if the kubelet service is restarted. To permanently delete the node and all its data, you must <a class="link" href="https://access.redhat.com/solutions/84663">decommission the node</a>.
						</p></li><li class="listitem">
							If you powered down the physical hardware, turn it back on so that the node can rejoin the cluster.
						</li></ol></div></section><section class="section" id="verifying-vm-failover_virt-triggering-vm-failover-resolving-failed-node"><div class="titlepage"><div><div><h3 class="title">10.10.3. Verifying virtual machine failover</h3></div></div></div><p>
					After all resources are terminated on the unhealthy node, a new virtual machine instance (VMI) is automatically created on a healthy node for each relocated VM. To confirm that the VMI was created, view all VMIs by using the <code class="literal">oc</code> CLI.
				</p><section class="section" id="virt-listing-vmis-cli_virt-triggering-vm-failover-resolving-failed-node"><div class="titlepage"><div><div><h4 class="title">10.10.3.1. Listing all virtual machine instances using the CLI</h4></div></div></div><p>
						You can list all virtual machine instances (VMIs) in your cluster, including standalone VMIs and those owned by virtual machines, by using the <code class="literal">oc</code> command-line interface (CLI).
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								List all VMIs by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get vmis -A</pre></li></ul></div></section></section></section><section class="section" id="virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h2 class="title">10.11. Installing the QEMU guest agent and VirtIO drivers</h2></div></div></div><p>
				The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-viewing-qemu-guest-agent-web">QEMU guest agent</a> is a daemon that runs on the virtual machine and passes information to the host about the virtual machine, users, file systems, and secondary networks.
			</p><section class="section" id="installing-the-qemu-guest-agent"><div class="titlepage"><div><div><h3 class="title">10.11.1. Installing the QEMU guest agent</h3></div></div></div><section class="section" id="virt-installing-qemu-guest-agent-on-linux-vm_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.1.1. Installing QEMU guest agent on a Linux virtual machine</h4></div></div></div><p>
						The <code class="literal">qemu-guest-agent</code> is widely available and available by default in Red Hat Enterprise Linux (RHEL) virtual machines (VMs). Install the agent and start the service.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Access the virtual machine command line through one of the consoles or by SSH.
							</li><li class="listitem"><p class="simpara">
								Install the QEMU guest agent on the virtual machine:
							</p><pre class="programlisting language-terminal">$ yum install -y qemu-guest-agent</pre></li><li class="listitem"><p class="simpara">
								Ensure the service is persistent and start it:
							</p><pre class="programlisting language-terminal">$ systemctl enable --now qemu-guest-agent</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the following command to verify that <code class="literal">AgentConnected</code> is listed in the VM spec:
							</p><pre class="programlisting language-terminal">$ oc get vm &lt;vm_name&gt;</pre></li></ol></div></section><section class="section" id="installing-qemu-guest-agent-on-windows-vm_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.1.2. Installing QEMU guest agent on a Windows virtual machine</h4></div></div></div><p>
						For Windows virtual machines, the QEMU guest agent is included in the VirtIO drivers. Install the drivers on an existing or a new Windows installation.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the Windows Guest Operating System (OS), use the <span class="strong strong"><strong>File Explorer</strong></span> to navigate to the <code class="literal">guest-agent</code> directory in the <code class="literal">virtio-win</code> CD drive.
							</li><li class="listitem">
								Run the <code class="literal">qemu-ga-x86_64.msi</code> installer.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the following command to verify that the output contains the <code class="literal">QEMU Guest Agent</code>:
							</p><pre class="programlisting language-terminal">$ net start</pre></li></ol></div></section></section><section class="section" id="installing-virtio-drivers"><div class="titlepage"><div><div><h3 class="title">10.11.2. Installing VirtIO drivers</h3></div></div></div><section class="section" id="virt-supported-virtio-drivers_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.2.1. Supported VirtIO drivers for Microsoft Windows virtual machines</h4></div></div></div><div class="table" id="idm140196974879344"><p class="title"><strong>Table 10.1. Supported drivers</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196972820256" scope="col">Driver name</th><th align="left" valign="top" id="idm140196972819168" scope="col">Hardware ID</th><th align="left" valign="top" id="idm140196972818080" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196972820256"> <p>
										<span class="strong strong"><strong>viostor</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140196972819168"> <p>
										VEN_1AF4&amp;DEV_1001<br/> VEN_1AF4&amp;DEV_1042
									</p>
									 </td><td align="left" valign="top" headers="idm140196972818080"> <p>
										The block driver. Sometimes displays as an <span class="strong strong"><strong>SCSI Controller</strong></span> in the <span class="strong strong"><strong>Other devices</strong></span> group.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196972820256"> <p>
										<span class="strong strong"><strong>viorng</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140196972819168"> <p>
										VEN_1AF4&amp;DEV_1005<br/> VEN_1AF4&amp;DEV_1044
									</p>
									 </td><td align="left" valign="top" headers="idm140196972818080"> <p>
										The entropy source driver. Sometimes displays as a <span class="strong strong"><strong>PCI Device</strong></span> in the <span class="strong strong"><strong>Other devices</strong></span> group.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196972820256"> <p>
										<span class="strong strong"><strong>NetKVM</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140196972819168"> <p>
										VEN_1AF4&amp;DEV_1000<br/> VEN_1AF4&amp;DEV_1041
									</p>
									 </td><td align="left" valign="top" headers="idm140196972818080"> <p>
										The network driver. Sometimes displays as an <span class="strong strong"><strong>Ethernet Controller</strong></span> in the <span class="strong strong"><strong>Other devices</strong></span> group. Available only if a VirtIO NIC is configured.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="virt-about-virtio-drivers_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.2.2. About VirtIO drivers</h4></div></div></div><p>
						VirtIO drivers are paravirtualized device drivers required for Microsoft Windows virtual machines to run in OpenShift Virtualization. The supported drivers are available in the <code class="literal">container-native-virtualization/virtio-win</code> container disk of the <a class="link" href="https://access.redhat.com/containers/#/registry.access.redhat.com/container-native-virtualization/virtio-win">Red Hat Ecosystem Catalog</a>.
					</p><p>
						The <code class="literal">container-native-virtualization/virtio-win</code> container disk must be attached to the virtual machine as a SATA CD drive to enable driver installation. You can install VirtIO drivers during Windows installation on the virtual machine or added to an existing Windows installation.
					</p><p>
						After the drivers are installed, the <code class="literal">container-native-virtualization/virtio-win</code> container disk can be removed from the virtual machine.
					</p></section><section class="section" id="virt-installing-virtio-drivers-existing-windows_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.2.3. Installing VirtIO drivers on an existing Windows virtual machine</h4></div></div></div><p>
						Install the VirtIO drivers from the attached SATA CD drive to an existing Windows virtual machine.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This procedure uses a generic approach to adding drivers to Windows. The process might differ slightly between versions of Windows. See the installation documentation for your version of Windows for specific installation steps.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Start the virtual machine and connect to a graphical console.
							</li><li class="listitem">
								Log in to a Windows user session.
							</li><li class="listitem"><p class="simpara">
								Open <span class="strong strong"><strong>Device Manager</strong></span> and expand <span class="strong strong"><strong>Other devices</strong></span> to list any <span class="strong strong"><strong>Unknown device</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Open the <code class="literal">Device Properties</code> to identify the unknown device. Right-click the device and select <span class="strong strong"><strong>Properties</strong></span>.
									</li><li class="listitem">
										Click the <span class="strong strong"><strong>Details</strong></span> tab and select <span class="strong strong"><strong>Hardware Ids</strong></span> in the <span class="strong strong"><strong>Property</strong></span> list.
									</li><li class="listitem">
										Compare the <span class="strong strong"><strong>Value</strong></span> for the <span class="strong strong"><strong>Hardware Ids</strong></span> with the supported VirtIO drivers.
									</li></ol></div></li><li class="listitem">
								Right-click the device and select <span class="strong strong"><strong>Update Driver Software</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Browse my computer for driver software</strong></span> and browse to the attached SATA CD drive, where the VirtIO drivers are located. The drivers are arranged hierarchically according to their driver type, operating system, and CPU architecture.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Next</strong></span> to install the driver.
							</li><li class="listitem">
								Repeat this process for all the necessary VirtIO drivers.
							</li><li class="listitem">
								After the driver installs, click <span class="strong strong"><strong>Close</strong></span> to close the window.
							</li><li class="listitem">
								Reboot the virtual machine to complete the driver installation.
							</li></ol></div></section><section class="section" id="virt-installing-virtio-drivers-installing-windows_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.2.4. Installing VirtIO drivers during Windows installation</h4></div></div></div><p>
						Install the <code class="literal">virtio</code> drivers during or after Windows installation.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This procedure uses a generic approach to the Windows installation and the installation method might differ between versions of Windows. See the documentation for the version of Windows that you are installing.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								A storage device containing the <code class="literal">virtio</code> drivers must be attached to the VM.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the Windows Guest OS, use the <code class="literal">File Explorer</code> to navigate to the <code class="literal">virtio-win</code> CD drive.
							</li><li class="listitem"><p class="simpara">
								Double-click to run the appropriate installer for your VM:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										For a 64-bit vCPU, use the <code class="literal">virtio-win-gt-x64</code> installer. 32-bit vCPUs are no longer supported.
									</li></ol></div></li><li class="listitem">
								Optional: During the <span class="strong strong"><strong>Custom Setup</strong></span> step of the installer, select the device drivers you want to install. The recommended driver set is selected by default.
							</li><li class="listitem">
								After the installation is complete, select <span class="strong strong"><strong>Finish</strong></span>.
							</li><li class="listitem">
								Reboot the VM.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Open the system disk on the PC. This is typically <code class="literal">C:</code>.
							</li><li class="listitem">
								Navigate to <span class="strong strong"><strong>Program Files</strong></span> → <span class="strong strong"><strong>Virtio-Win</strong></span>.
							</li></ol></div><p>
						If the <span class="strong strong"><strong>Virtio-Win</strong></span> directory is present and contains a sub-directory for each driver, the installation was successful.
					</p></section><section class="section" id="virt-adding-virtio-drivers-vm-yaml_virt-installing-qemu-guest-agent"><div class="titlepage"><div><div><h4 class="title">10.11.2.5. Adding VirtIO drivers container disk to a virtual machine</h4></div></div></div><p>
						OpenShift Virtualization distributes VirtIO drivers for Microsoft Windows as a container disk, which is available from the <a class="link" href="https://access.redhat.com/containers/#/registry.access.redhat.com/container-native-virtualization/virtio-win">Red Hat Ecosystem Catalog</a>. To install these drivers to a Windows virtual machine, attach the <code class="literal">container-native-virtualization/virtio-win</code> container disk to the virtual machine as a SATA CD drive in the virtual machine configuration file.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Download the <code class="literal">container-native-virtualization/virtio-win</code> container disk from the <a class="link" href="https://access.redhat.com/containers/#/registry.access.redhat.com/container-native-virtualization/virtio-win">Red Hat Ecosystem Catalog</a>. This is not mandatory, because the container disk will be downloaded from the Red Hat registry if it not already present in the cluster, but it can reduce installation time.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add the <code class="literal">container-native-virtualization/virtio-win</code> container disk as a <code class="literal">cdrom</code> disk in the Windows virtual machine configuration file. The container disk will be downloaded from the registry if it is not already present in the cluster.
							</p><pre class="programlisting language-yaml">spec:
  domain:
    devices:
      disks:
        - name: virtiocontainerdisk
          bootOrder: 2 <span id="CO23-1"><!--Empty--></span><span class="callout">1</span>
          cdrom:
            bus: sata
volumes:
  - containerDisk:
      image: container-native-virtualization/virtio-win
    name: virtiocontainerdisk</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO23-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										OpenShift Virtualization boots virtual machine disks in the order defined in the <code class="literal">VirtualMachine</code> configuration file. You can either define other disks for the virtual machine before the <code class="literal">container-native-virtualization/virtio-win</code> container disk or use the optional <code class="literal">bootOrder</code> parameter to ensure the virtual machine boots from the correct disk. If you specify the <code class="literal">bootOrder</code> for a disk, it must be specified for all disks in the configuration.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								The disk is available once the virtual machine has started:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If you add the container disk to a running virtual machine, use <code class="literal">oc apply -f &lt;vm.yaml&gt;</code> in the CLI or reboot the virtual machine for the changes to take effect.
									</li><li class="listitem">
										If the virtual machine is not running, use <code class="literal">virtctl start &lt;vm&gt;</code>.
									</li></ul></div></li></ol></div><p>
						After the virtual machine has started, the VirtIO drivers can be installed from the attached SATA CD drive.
					</p></section></section></section><section class="section" id="virt-viewing-qemu-guest-agent-web"><div class="titlepage"><div><div><h2 class="title">10.12. Viewing the QEMU guest agent information for virtual machines</h2></div></div></div><p>
				When the QEMU guest agent runs on the virtual machine, you can use the web console to view information about the virtual machine, users, file systems, and secondary networks.
			</p><p>
				If the QEMU guest agent is not installed, the <span class="strong strong"><strong>Overview</strong></span> and the <span class="strong strong"><strong>Details</strong></span> tabs display information about the operating system that was specified when the virtual machine was created.
			</p><section class="section" id="virt-viewing-qemu-guest-agent-information-web_virt-viewing-qemu-guest-agent-web"><div class="titlepage"><div><div><h3 class="title">10.12.1. Viewing the QEMU guest agent information in the web console</h3></div></div></div><p>
					You can use the web console to view information for virtual machines that is passed by the QEMU guest agent to the host.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Install the QEMU guest agent on the virtual machine.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine name to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Details</strong></span> tab to view active users.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span> tab to view information about the file systems.
						</li></ol></div></section></section><section class="section" id="virt-using-vtpm-devices"><div class="titlepage"><div><div><h2 class="title">10.13. Using virtual Trusted Platform Module devices</h2></div></div></div><p>
				Add a virtual Trusted Platform Module (vTPM) device to a new or existing virtual machine by editing the <code class="literal">VirtualMachine</code> (VM) or <code class="literal">VirtualMachineInstance</code> (VMI) manifest.
			</p><section class="section" id="virt-about-vtpm-devices_virt-using-vtpm-devices"><div class="titlepage"><div><div><h3 class="title">10.13.1. About vTPM devices</h3></div></div></div><p>
					A virtual Trusted Platform Module (vTPM) device functions like a physical Trusted Platform Module (TPM) hardware chip.
				</p><p>
					You can use a vTPM device with any operating system, but Windows 11 requires the presence of a TPM chip to install or boot. A vTPM device allows VMs created from a Windows 11 image to function without a physical TPM chip.
				</p><p>
					If you do not enable vTPM, then the VM does not recognize a TPM device, even if the node has one.
				</p><p>
					vTPM devices also protect virtual machines by temporarily storing secrets without physical hardware. However, using vTPM for persistent secret storage is not currently supported. vTPM discards stored secrets after a VM shuts down.
				</p></section><section class="section" id="virt-adding-vtpm-to-vm_virt-using-vtpm-devices"><div class="titlepage"><div><div><h3 class="title">10.13.2. Adding a vTPM device to a virtual machine</h3></div></div></div><p>
					Adding a virtual Trusted Platform Module (vTPM) device to a virtual machine (VM) allows you to run a VM created from a Windows 11 image without a physical TPM device. A vTPM device also temporarily stores secrets for that VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command to update the VM configuration:
						</p><pre class="programlisting language-terminal">$ oc edit vm &lt;vm_name&gt;</pre></li><li class="listitem"><p class="simpara">
							Edit the VM <code class="literal">spec</code> so that it includes the <code class="literal">tpm: {}</code> line. For example:
						</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
    name: example-vm
spec:
  template:
    spec:
      domain:
        devices:
          tpm: {} <span id="CO24-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO24-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Adds the TPM device to the VM.
								</div></dd></dl></div></li><li class="listitem">
							To apply your changes, save and exit the editor.
						</li><li class="listitem">
							Optional: If you edited a running virtual machine, you must restart it for the changes to take effect.
						</li></ol></div></section></section><section class="section" id="virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h2 class="title">10.14. Managing virtual machines with OpenShift Pipelines</h2></div></div></div><p>
				<a class="link" href="https://docs.openshift.com/pipelines/latest/about/understanding-openshift-pipelines.html">Red Hat OpenShift Pipelines</a> is a Kubernetes-native CI/CD framework that allows developers to design and run each step of the CI/CD pipeline in its own container.
			</p><p>
				The Tekton Tasks Operator (TTO) integrates OpenShift Virtualization with OpenShift Pipelines. TTO includes cluster tasks and example pipelines that allow you to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Create and manage virtual machines (VMs), persistent volume claims (PVCs), and data volumes
					</li><li class="listitem">
						Run commands in VMs
					</li><li class="listitem">
						Manipulate disk images with <code class="literal">libguestfs</code> tools
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Managing virtual machines with Red Hat OpenShift Pipelines is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
				</p></div></div><section class="section" id="prerequisites_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h3 class="title">10.14.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to an OpenShift Container Platform cluster with <code class="literal">cluster-admin</code> permissions.
						</li><li class="listitem">
							You have installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You have <a class="link" href="https://docs.openshift.com/pipelines/latest/install_config/installing-pipelines.html">installed OpenShift Pipelines</a>.
						</li></ul></div></section><section class="section" id="virt-deploying-tto_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h3 class="title">10.14.2. Deploying the Tekton Tasks Operator resources</h3></div></div></div><p>
					The Tekton Tasks Operator (TTO) cluster tasks and example pipelines are not deployed by default when you install OpenShift Virtualization. To deploy TTO resources, enable the <code class="literal">deployTektonTaskResources</code> feature gate in the <code class="literal">HyperConverged</code> custom resource (CR).
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
						</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
							Set the <code class="literal">spec.featureGates.deployTektonTaskResources</code> field to <code class="literal">true</code>.
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: kubevirt-hyperconverged
spec:
  tektonPipelinesNamespace: &lt;user_namespace&gt; <span id="CO25-1"><!--Empty--></span><span class="callout">1</span>
  featureGates:
    deployTektonTaskResources: true <span id="CO25-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO25-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The namespace where the pipelines are to be run.
								</div></dd><dt><a href="#CO25-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The feature gate to be enabled to deploy TTO resources.
								</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The cluster tasks and example pipelines remain available even if you disable the feature gate later.
							</p></div></div></li><li class="listitem">
							Save your changes and exit the editor.
						</li></ol></div></section><section class="section" id="virt-supported-tekton-tasks_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h3 class="title">10.14.3. Virtual machine tasks supported by the Tekton Tasks Operator</h3></div></div></div><p>
					The following table shows the cluster tasks that are included as part of the Tekton Tasks Operator.
				</p><div class="table" id="idm140196959926720"><p class="title"><strong>Table 10.2. Virtual machine tasks supported by the Tekton Tasks Operator</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196959921840" scope="col">Task</th><th align="left" valign="top" id="idm140196959920752" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">create-vm-from-template</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Create a virtual machine from a template.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">copy-template</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Copy a virtual machine template.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">modify-vm-template</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Modify a virtual machine template.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">modify-data-object</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Create or delete data volumes or data sources.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">cleanup-vm</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Run a script or a command in a virtual machine and stop or delete the virtual machine afterward.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">disk-virt-customize</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Use the <code class="literal">virt-customize</code> tool to run a customization script on a target PVC.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">disk-virt-sysprep</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Use the <code class="literal">virt-sysprep</code> tool to run a sysprep script on a target PVC.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196959921840"> <p>
									<code class="literal">wait-for-vmi-status</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196959920752"> <p>
									Wait for a specific status of a virtual machine instance and fail or succeed based on the status.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="example-pipelines_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h3 class="title">10.14.4. Example pipelines</h3></div></div></div><p>
					The Tekton Tasks Operator includes the following example <code class="literal">Pipeline</code> manifests. You can run the example pipelines by using the web console or CLI.
				</p><p>
					You might have to run more than one installer pipline if you need multiple versions of Windows. If you run more than one installer pipeline, each one requires unique parameters, such as the <code class="literal">autounattend</code> config map and base image name. For example, if you need Windows 10 and Windows 11 or Windows Server 2022 images, you have to run both the Windows efi installer pipeline and the Windows bios installer pipeline. However, if you need Windows 11 and Windows Server 2022 images, you have to run only the Windows efi installer pipeline.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Windows EFI installer pipeline</span></dt><dd>
								This pipeline installs Windows 11 or Windows Server 2022 into a new data volume from a Windows installation image (ISO file). A custom answer file is used to run the installation process.
							</dd><dt><span class="term">Windows BIOS installer pipeline</span></dt><dd>
								This pipeline installs Windows 10 into a new data volume from a Windows installation image, also called an ISO file. A custom answer file is used to run the installation process.
							</dd><dt><span class="term">Windows customize pipeline</span></dt><dd>
								This pipeline clones the data volume of a basic Windows 10, 11, or Windows Server 2022 installation, customizes it by installing Microsoft SQL Server Express or Microsoft Visual Studio Code, and then creates a new image and template.
							</dd></dl></div><section class="section" id="virt-running-tto-pipeline-web_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h4 class="title">10.14.4.1. Running the example pipelines using the web console</h4></div></div></div><p>
						You can run the example pipelines from the <span class="strong strong"><strong>Pipelines</strong></span> menu in the web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Pipelines</strong></span> → <span class="strong strong"><strong>Pipelines</strong></span> in the side menu.
							</li><li class="listitem">
								Select a pipeline to open the <span class="strong strong"><strong>Pipeline details</strong></span> page.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Actions</strong></span> list, select <span class="strong strong"><strong>Start</strong></span>. The <span class="strong strong"><strong>Start Pipeline</strong></span> dialog is displayed.
							</li><li class="listitem">
								Keep the default values for the parameters and then click <span class="strong strong"><strong>Start</strong></span> to run the pipeline. The <span class="strong strong"><strong>Details</strong></span> tab tracks the progress of each task and displays the pipeline status.
							</li></ol></div></section><section class="section" id="virt-running-tto-pipeline-cli_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h4 class="title">10.14.4.2. Running the example pipelines using the CLI</h4></div></div></div><p>
						Use a <code class="literal">PipelineRun</code> resource to run the example pipelines. A <code class="literal">PipelineRun</code> object is the running instance of a pipeline. It instantiates a pipeline for execution with specific inputs, outputs, and execution parameters on a cluster. It also creates a <code class="literal">TaskRun</code> object for each task in the pipeline.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To run the Windows 10 installer pipeline, create the following <code class="literal">PipelineRun</code> manifest:
							</p><pre class="programlisting language-yaml">apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  generateName: windows10-installer-run-
  labels:
    pipelinerun: windows10-installer-run
spec:
  params:
  - name: winImageDownloadURL
    value: &lt;link_to_windows_10_iso&gt; <span id="CO26-1"><!--Empty--></span><span class="callout">1</span>
  pipelineRef:
    name: windows10-installer
  taskRunSpecs:
    - pipelineTaskName: copy-template
      taskServiceAccountName: copy-template-task
    - pipelineTaskName: modify-vm-template
      taskServiceAccountName: modify-vm-template-task
    - pipelineTaskName: create-vm-from-template
      taskServiceAccountName: create-vm-from-template-task
    - pipelineTaskName: wait-for-vmi-status
      taskServiceAccountName: wait-for-vmi-status-task
    - pipelineTaskName: create-base-dv
      taskServiceAccountName: modify-data-object-task
    - pipelineTaskName: cleanup-vm
      taskServiceAccountName: cleanup-vm-task
  status: {}</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO26-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the URL for the Windows 10 64-bit ISO file. The product language must be English (United States).
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">PipelineRun</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -f windows10-installer-run.yaml</pre></li><li class="listitem"><p class="simpara">
								To run the Windows 10 customize pipeline, create the following <code class="literal">PipelineRun</code> manifest:
							</p><pre class="programlisting language-yaml">apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  generateName: windows10-customize-run-
  labels:
    pipelinerun: windows10-customize-run
spec:
  params:
    - name: allowReplaceGoldenTemplate
      value: true
    - name: allowReplaceCustomizationTemplate
      value: true
  pipelineRef:
    name: windows10-customize
  taskRunSpecs:
    - pipelineTaskName: copy-template-customize
      taskServiceAccountName: copy-template-task
    - pipelineTaskName: modify-vm-template-customize
      taskServiceAccountName: modify-vm-template-task
    - pipelineTaskName: create-vm-from-template
      taskServiceAccountName: create-vm-from-template-task
    - pipelineTaskName: wait-for-vmi-status
      taskServiceAccountName: wait-for-vmi-status-task
    - pipelineTaskName: create-base-dv
      taskServiceAccountName: modify-data-object-task
    - pipelineTaskName: cleanup-vm
      taskServiceAccountName: cleanup-vm-task
    - pipelineTaskName: copy-template-golden
      taskServiceAccountName: copy-template-task
    - pipelineTaskName: modify-vm-template-golden
      taskServiceAccountName: modify-vm-template-task
status: {}</pre></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">PipelineRun</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -f windows10-customize-run.yaml</pre></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_virt-managing-vms-openshift-pipelines"><div class="titlepage"><div><div><h3 class="title">10.14.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://docs.openshift.com/pipelines/latest/create/creating-applications-with-cicd-pipelines.html">Creating CI/CD solutions for applications using Red Hat OpenShift Pipelines</a>
						</li></ul></div></section></section><section class="section" id="advanced-virtual-machine-management"><div class="titlepage"><div><div><h2 class="title">10.15. Advanced virtual machine management</h2></div></div></div><section class="section" id="virt-working-with-resource-quotas-for-vms"><div class="titlepage"><div><div><h3 class="title">10.15.1. Working with resource quotas for virtual machines</h3></div></div></div><p>
					Create and manage resource quotas for virtual machines.
				</p><section class="section" id="virt-setting-resource-quota-limits-for-vms_virt-working-with-resource-quotas-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.1.1. Setting resource quota limits for virtual machines</h4></div></div></div><p>
						Resource quotas that only use requests automatically work with virtual machines (VMs). If your resource quota uses limits, you must manually set resource limits on VMs. Resource limits must be at least 100 MiB larger than resource requests.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Set limits for a VM by editing the <code class="literal">VirtualMachine</code> manifest. For example:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: with-limits
spec:
  running: false
  template:
    spec:
      domain:
# ...
        resources:
          requests:
            memory: 128Mi
          limits:
            memory: 256Mi  <span id="CO27-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO27-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This configuration is supported because the <code class="literal">limits.memory</code> value is at least <code class="literal">100Mi</code> larger than the <code class="literal">requests.memory</code> value.
									</div></dd></dl></div></li><li class="listitem">
								Save the <code class="literal">VirtualMachine</code> manifest.
							</li></ol></div></section><section class="section _additional-resources" id="additional-resources_virt-working-with-resource-quotas-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.1.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#quotas-setting-per-project">Resource quotas per project</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#quotas-setting-across-multiple-projects">Resource quotas across multiple projects</a>
							</li></ul></div></section></section><section class="section" id="virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h3 class="title">10.15.2. Specifying nodes for virtual machines</h3></div></div></div><p>
					You can place virtual machines (VMs) on specific nodes by using node placement rules.
				</p><section class="section" id="virt-about-node-placement-vms_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.2.1. About node placement for virtual machines</h4></div></div></div><p>
						To ensure that virtual machines (VMs) run on appropriate nodes, you can configure node placement rules. You might want to do this if:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								You have several VMs. To ensure fault tolerance, you want them to run on different nodes.
							</li><li class="listitem">
								You have two chatty VMs. To avoid redundant inter-node routing, you want the VMs to run on the same node.
							</li><li class="listitem">
								Your VMs require specific hardware features that are not present on all available nodes.
							</li><li class="listitem">
								You have a pod that adds capabilities to a node, and you want to place a VM on that node so that it can use those capabilities.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Virtual machine placement relies on any existing node placement rules for workloads. If workloads are excluded from specific nodes on the component level, virtual machines cannot be placed on those nodes.
						</p></div></div><p>
						You can use the following rule types in the <code class="literal">spec</code> field of a <code class="literal">VirtualMachine</code> manifest:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nodeSelector</code></span></dt><dd>
									Allows virtual machines to be scheduled on nodes that are labeled with the key-value pair or pairs that you specify in this field. The node must have labels that exactly match all listed pairs.
								</dd><dt><span class="term"><code class="literal">affinity</code></span></dt><dd><p class="simpara">
									Enables you to use more expressive syntax to set rules that match nodes with virtual machines. For example, you can specify that a rule is a preference, rather than a hard requirement, so that virtual machines are still scheduled if the rule is not satisfied. Pod affinity, pod anti-affinity, and node affinity are supported for virtual machine placement. Pod affinity works for virtual machines because the <code class="literal">VirtualMachine</code> workload type is based on the <code class="literal">Pod</code> object.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Affinity rules only apply during scheduling. OpenShift Container Platform does not reschedule running workloads if the constraints are no longer met.
									</p></div></div></dd><dt><span class="term"><code class="literal">tolerations</code></span></dt><dd>
									Allows virtual machines to be scheduled on nodes that have matching taints. If a taint is applied to a node, that node only accepts virtual machines that tolerate the taint.
								</dd></dl></div></section><section class="section" id="node-placement-examples_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.2.2. Node placement examples</h4></div></div></div><p>
						The following example YAML file snippets use <code class="literal">nodePlacement</code>, <code class="literal">affinity</code>, and <code class="literal">tolerations</code> fields to customize node placement for virtual machines.
					</p><section class="section" id="virt-example-vm-node-placement-node-selector_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h5 class="title">10.15.2.2.1. Example: VM node placement with nodeSelector</h5></div></div></div><p>
							In this example, the virtual machine requires a node that has metadata containing both <code class="literal">example-key-1 = example-value-1</code> and <code class="literal">example-key-2 = example-value-2</code> labels.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								If there are no nodes that fit this description, the virtual machine is not scheduled.
							</p></div></div><div class="formalpara"><p class="title"><strong>Example VM manifest</strong></p><p>
								
<pre class="programlisting language-yaml">metadata:
  name: example-vm-node-selector
apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  template:
    spec:
      nodeSelector:
        example-key-1: example-value-1
        example-key-2: example-value-2
# ...</pre>

							</p></div></section><section class="section" id="virt-example-vm-node-placement-pod-affinity_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h5 class="title">10.15.2.2.2. Example: VM node placement with pod affinity and pod anti-affinity</h5></div></div></div><p>
							In this example, the VM must be scheduled on a node that has a running pod with the label <code class="literal">example-key-1 = example-value-1</code>. If there is no such pod running on any node, the VM is not scheduled.
						</p><p>
							If possible, the VM is not scheduled on a node that has any pod with the label <code class="literal">example-key-2 = example-value-2</code>. However, if all candidate nodes have a pod with this label, the scheduler ignores this constraint.
						</p><div class="formalpara"><p class="title"><strong>Example VM manifest</strong></p><p>
								
<pre class="programlisting language-yaml">metadata:
  name: example-vm-pod-affinity
apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  template:
    spec:
      affinity:
        podAffinity:
          requiredDuringSchedulingIgnoredDuringExecution: <span id="CO28-1"><!--Empty--></span><span class="callout">1</span>
          - labelSelector:
              matchExpressions:
              - key: example-key-1
                operator: In
                values:
                - example-value-1
            topologyKey: kubernetes.io/hostname
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution: <span id="CO28-2"><!--Empty--></span><span class="callout">2</span>
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: example-key-2
                  operator: In
                  values:
                  - example-value-2
              topologyKey: kubernetes.io/hostname
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO28-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									If you use the <code class="literal">requiredDuringSchedulingIgnoredDuringExecution</code> rule type, the VM is not scheduled if the constraint is not met.
								</div></dd><dt><a href="#CO28-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									If you use the <code class="literal">preferredDuringSchedulingIgnoredDuringExecution</code> rule type, the VM is still scheduled if the constraint is not met, as long as all required constraints are met.
								</div></dd></dl></div></section><section class="section" id="virt-example-vm-node-placement-node-affinity_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h5 class="title">10.15.2.2.3. Example: VM node placement with node affinity</h5></div></div></div><p>
							In this example, the VM must be scheduled on a node that has the label <code class="literal">example.io/example-key = example-value-1</code> or the label <code class="literal">example.io/example-key = example-value-2</code>. The constraint is met if only one of the labels is present on the node. If neither label is present, the VM is not scheduled.
						</p><p>
							If possible, the scheduler avoids nodes that have the label <code class="literal">example-node-label-key = example-node-label-value</code>. However, if all candidate nodes have this label, the scheduler ignores this constraint.
						</p><div class="formalpara"><p class="title"><strong>Example VM manifest</strong></p><p>
								
<pre class="programlisting language-yaml">metadata:
  name: example-vm-node-affinity
apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  template:
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution: <span id="CO29-1"><!--Empty--></span><span class="callout">1</span>
            nodeSelectorTerms:
            - matchExpressions:
              - key: example.io/example-key
                operator: In
                values:
                - example-value-1
                - example-value-2
          preferredDuringSchedulingIgnoredDuringExecution: <span id="CO29-2"><!--Empty--></span><span class="callout">2</span>
          - weight: 1
            preference:
              matchExpressions:
              - key: example-node-label-key
                operator: In
                values:
                - example-node-label-value
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO29-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									If you use the <code class="literal">requiredDuringSchedulingIgnoredDuringExecution</code> rule type, the VM is not scheduled if the constraint is not met.
								</div></dd><dt><a href="#CO29-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									If you use the <code class="literal">preferredDuringSchedulingIgnoredDuringExecution</code> rule type, the VM is still scheduled if the constraint is not met, as long as all required constraints are met.
								</div></dd></dl></div></section><section class="section" id="virt-example-vm-node-placement-tolerations_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h5 class="title">10.15.2.2.4. Example: VM node placement with tolerations</h5></div></div></div><p>
							In this example, nodes that are reserved for virtual machines are already labeled with the <code class="literal">key=virtualization:NoSchedule</code> taint. Because this virtual machine has matching <code class="literal">tolerations</code>, it can schedule onto the tainted nodes.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								A virtual machine that tolerates a taint is not required to schedule onto a node with that taint.
							</p></div></div><div class="formalpara"><p class="title"><strong>Example VM manifest</strong></p><p>
								
<pre class="programlisting language-yaml">metadata:
  name: example-vm-tolerations
apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  tolerations:
  - key: "key"
    operator: "Equal"
    value: "virtualization"
    effect: "NoSchedule"
# ...</pre>

							</p></div></section></section><section class="section _additional-resources" id="additional-resources_virt-specifying-nodes-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.2.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-specifying-nodes-for-virtualization-components">Specifying nodes for virtualization components</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-node-selectors">Placing pods on specific nodes using node selectors</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-node-affinity">Controlling pod placement on nodes using node affinity rules</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-taints-tolerations">Controlling pod placement using node taints</a>
							</li></ul></div></section></section><section class="section" id="virt-configuring-certificate-rotation"><div class="titlepage"><div><div><h3 class="title">10.15.3. Configuring certificate rotation</h3></div></div></div><p>
					Configure certificate rotation parameters to replace existing certificates.
				</p><section class="section" id="virt-configuring-certificate-rotation_virt-configuring-certificate-rotation"><div class="titlepage"><div><div><h4 class="title">10.15.3.1. Configuring certificate rotation</h4></div></div></div><p>
						You can do this during OpenShift Virtualization installation in the web console or after installation in the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HyperConverged</code> CR by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">spec.certConfig</code> fields as shown in the following example. To avoid overloading the system, ensure that all values are greater than or equal to 10 minutes. Express all values as strings that comply with the <a class="link" href="https://golang.org/pkg/time/#ParseDuration">golang <code class="literal">ParseDuration</code> format</a>.
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
 name: kubevirt-hyperconverged
 namespace: openshift-cnv
spec:
  certConfig:
    ca:
      duration: 48h0m0s
      renewBefore: 24h0m0s <span id="CO30-1"><!--Empty--></span><span class="callout">1</span>
    server:
      duration: 24h0m0s  <span id="CO30-2"><!--Empty--></span><span class="callout">2</span>
      renewBefore: 12h0m0s  <span id="CO30-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO30-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The value of <code class="literal">ca.renewBefore</code> must be less than or equal to the value of <code class="literal">ca.duration</code>.
									</div></dd><dt><a href="#CO30-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The value of <code class="literal">server.duration</code> must be less than or equal to the value of <code class="literal">ca.duration</code>.
									</div></dd><dt><a href="#CO30-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The value of <code class="literal">server.renewBefore</code> must be less than or equal to the value of <code class="literal">server.duration</code>.
									</div></dd></dl></div></li><li class="listitem">
								Apply the YAML file to your cluster.
							</li></ol></div></section><section class="section" id="virt-troubleshooting-cert-rotation-parameters_virt-configuring-certificate-rotation"><div class="titlepage"><div><div><h4 class="title">10.15.3.2. Troubleshooting certificate rotation parameters</h4></div></div></div><p>
						Deleting one or more <code class="literal">certConfig</code> values causes them to revert to the default values, unless the default values conflict with one of the following conditions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The value of <code class="literal">ca.renewBefore</code> must be less than or equal to the value of <code class="literal">ca.duration</code>.
							</li><li class="listitem">
								The value of <code class="literal">server.duration</code> must be less than or equal to the value of <code class="literal">ca.duration</code>.
							</li><li class="listitem">
								The value of <code class="literal">server.renewBefore</code> must be less than or equal to the value of <code class="literal">server.duration</code>.
							</li></ul></div><p>
						If the default values conflict with these conditions, you will receive an error.
					</p><p>
						If you remove the <code class="literal">server.duration</code> value in the following example, the default value of <code class="literal">24h0m0s</code> is greater than the value of <code class="literal">ca.duration</code>, conflicting with the specified conditions.
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-yaml">certConfig:
   ca:
     duration: 4h0m0s
     renewBefore: 1h0m0s
   server:
     duration: 4h0m0s
     renewBefore: 4h0m0s</pre>

						</p></div><p>
						This results in the following error message:
					</p><pre class="programlisting language-terminal">error: hyperconvergeds.hco.kubevirt.io "kubevirt-hyperconverged" could not be patched: admission webhook "validate-hco.kubevirt.io" denied the request: spec.certConfig: ca.duration is smaller than server.duration</pre><p>
						The error message only mentions the first conflict. Review all certConfig values before you proceed.
					</p></section></section><section class="section" id="virt-configuring-default-cpu-model"><div class="titlepage"><div><div><h3 class="title">10.15.4. Configuring the default CPU model</h3></div></div></div><p>
					Use the <code class="literal">defaultCPUModel</code> setting in the <code class="literal">HyperConverged</code> custom resource (CR) to define a cluster-wide default CPU model.
				</p><p>
					The virtual machine (VM) CPU model depends on the availability of CPU models within the VM and the cluster.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the VM does not have a defined CPU model:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The <code class="literal">defaultCPUModel</code> is automatically set using the CPU model defined at the cluster-wide level.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If both the VM and the cluster have a defined CPU model:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The VM’s CPU model takes precedence.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If neither the VM nor the cluster have a defined CPU model:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The host-model is automatically set using the CPU model defined at the host level.
								</li></ul></div></li></ul></div><section class="section" id="virt-configuring-default-cpu-model_virt-configuring-default-cpu-model"><div class="titlepage"><div><div><h4 class="title">10.15.4.1. Configuring the default CPU model</h4></div></div></div><p>
						Configure the <code class="literal">defaultCPUModel</code> by updating the <code class="literal">HyperConverged</code> custom resource (CR). You can change the <code class="literal">defaultCPUModel</code> while OpenShift Virtualization is running.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">defaultCPUModel</code> is case sensitive.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (oc).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HyperConverged</code> CR by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">defaultCPUModel</code> field to the CR and set the value to the name of a CPU model that exists in the cluster:
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
 name: kubevirt-hyperconverged
 namespace: openshift-cnv
spec:
  defaultCPUModel: "EPYC"</pre></li><li class="listitem">
								Apply the YAML file to your cluster.
							</li></ol></div></section></section><section class="section" id="virt-uefi-mode-for-vms"><div class="titlepage"><div><div><h3 class="title">10.15.5. Using UEFI mode for virtual machines</h3></div></div></div><p>
					You can boot a virtual machine (VM) in Unified Extensible Firmware Interface (UEFI) mode.
				</p><section class="section" id="virt-about-uefi-mode-for-vms_virt-uefi-mode-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.5.1. About UEFI mode for virtual machines</h4></div></div></div><p>
						Unified Extensible Firmware Interface (UEFI), like legacy BIOS, initializes hardware components and operating system image files when a computer starts. UEFI supports more modern features and customization options than BIOS, enabling faster boot times.
					</p><p>
						It stores all the information about initialization and startup in a file with a <code class="literal">.efi</code> extension, which is stored on a special partition called EFI System Partition (ESP). The ESP also contains the boot loader programs for the operating system that is installed on the computer.
					</p></section><section class="section" id="virt-booting-vms-uefi-mode_virt-uefi-mode-for-vms"><div class="titlepage"><div><div><h4 class="title">10.15.5.2. Booting virtual machines in UEFI mode</h4></div></div></div><p>
						You can configure a virtual machine to boot in UEFI mode by editing the <code class="literal">VirtualMachine</code> manifest.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit or create a <code class="literal">VirtualMachine</code> manifest file. Use the <code class="literal">spec.firmware.bootloader</code> stanza to configure UEFI mode:
							</p><div class="formalpara"><p class="title"><strong>Booting in UEFI mode with secure boot active</strong></p><p>
									
<pre class="programlisting language-yaml">apiversion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    special: vm-secureboot
  name: vm-secureboot
spec:
  template:
    metadata:
      labels:
        special: vm-secureboot
    spec:
      domain:
        devices:
          disks:
          - disk:
              bus: virtio
            name: containerdisk
        features:
          acpi: {}
          smm:
            enabled: true <span id="CO31-1"><!--Empty--></span><span class="callout">1</span>
        firmware:
          bootloader:
            efi:
              secureBoot: true <span id="CO31-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO31-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										OpenShift Virtualization requires System Management Mode (<code class="literal">SMM</code>) to be enabled for Secure Boot in UEFI mode to occur.
									</div></dd><dt><a href="#CO31-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										OpenShift Virtualization supports a VM with or without Secure Boot when using UEFI mode. If Secure Boot is enabled, then UEFI mode is required. However, UEFI mode can be enabled without using Secure Boot.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the manifest to your cluster by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;file_name&gt;.yaml</pre></li></ol></div></section></section><section class="section" id="configuring-pxe-booting"><div class="titlepage"><div><div><h3 class="title">10.15.6. Configuring PXE booting for virtual machines</h3></div></div></div><p>
					PXE booting, or network booting, is available in OpenShift Virtualization. Network booting allows a computer to boot and load an operating system or other program without requiring a locally attached storage device. For example, you can use it to choose your desired OS image from a PXE server when deploying a new host.
				</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h4 class="title">10.15.6.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A Linux bridge must be <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-attaching-vm-multiple-networks">connected</a>.
							</li><li class="listitem">
								The PXE server must be connected to the same VLAN as the bridge.
							</li></ul></div></section><section class="section" id="virt-pxe-booting-with-mac-address_pxe-booting"><div class="titlepage"><div><div><h4 class="title">10.15.6.2. PXE booting with a specified MAC address</h4></div></div></div><p>
						As an administrator, you can boot a client over the network by first creating a <code class="literal">NetworkAttachmentDefinition</code> object for your PXE network. Then, reference the network attachment definition in your virtual machine instance configuration file before you start the virtual machine instance. You can also specify a MAC address in the virtual machine instance configuration file, if required by the PXE server.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								A Linux bridge must be connected.
							</li><li class="listitem">
								The PXE server must be connected to the same VLAN as the bridge.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Configure a PXE network on the cluster:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Create the network attachment definition file for PXE network <code class="literal">pxe-net-conf</code>:
									</p><pre class="programlisting language-yaml">apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: pxe-net-conf
spec:
  config: '{
    "cniVersion": "0.3.1",
    "name": "pxe-net-conf",
    "plugins": [
      {
        "type": "cnv-bridge",
        "bridge": "br1",
        "vlan": 1 <span id="CO32-1"><!--Empty--></span><span class="callout">1</span>
      },
      {
        "type": "cnv-tuning" <span id="CO32-2"><!--Empty--></span><span class="callout">2</span>
      }
    ]
  }'</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO32-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Optional: The VLAN tag.
											</div></dd><dt><a href="#CO32-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The <code class="literal">cnv-tuning</code> plugin provides support for custom MAC addresses.
											</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											The virtual machine instance will be attached to the bridge <code class="literal">br1</code> through an access port with the requested VLAN.
										</p></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Create the network attachment definition by using the file you created in the previous step:
							</p><pre class="programlisting language-terminal">$ oc create -f pxe-net-conf.yaml</pre></li><li class="listitem"><p class="simpara">
								Edit the virtual machine instance configuration file to include the details of the interface and network.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Specify the network and MAC address, if required by the PXE server. If the MAC address is not specified, a value is assigned automatically.
									</p><p class="simpara">
										Ensure that <code class="literal">bootOrder</code> is set to <code class="literal">1</code> so that the interface boots first. In this example, the interface is connected to a network called <code class="literal">&lt;pxe-net&gt;</code>:
									</p><pre class="programlisting language-yaml">interfaces:
- masquerade: {}
  name: default
- bridge: {}
  name: pxe-net
  macAddress: de:00:00:00:00:de
  bootOrder: 1</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Boot order is global for interfaces and disks.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Assign a boot device number to the disk to ensure proper booting after operating system provisioning.
									</p><p class="simpara">
										Set the disk <code class="literal">bootOrder</code> value to <code class="literal">2</code>:
									</p><pre class="programlisting language-yaml">devices:
  disks:
  - disk:
      bus: virtio
    name: containerdisk
    bootOrder: 2</pre></li><li class="listitem"><p class="simpara">
										Specify that the network is connected to the previously created network attachment definition. In this scenario, <code class="literal">&lt;pxe-net&gt;</code> is connected to the network attachment definition called <code class="literal">&lt;pxe-net-conf&gt;</code>:
									</p><pre class="programlisting language-yaml">networks:
- name: default
  pod: {}
- name: pxe-net
  multus:
    networkName: pxe-net-conf</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Create the virtual machine instance:
							</p><pre class="programlisting language-terminal">$ oc create -f vmi-pxe-boot.yaml</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">  virtualmachineinstance.kubevirt.io "vmi-pxe-boot" created</pre>

						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Wait for the virtual machine instance to run:
							</p><pre class="programlisting language-terminal">$ oc get vmi vmi-pxe-boot -o yaml | grep -i phase
  phase: Running</pre></li><li class="listitem"><p class="simpara">
								View the virtual machine instance using VNC:
							</p><pre class="programlisting language-terminal">$ virtctl vnc vmi-pxe-boot</pre></li><li class="listitem">
								Watch the boot screen to verify that the PXE boot is successful.
							</li><li class="listitem"><p class="simpara">
								Log in to the virtual machine instance:
							</p><pre class="programlisting language-terminal">$ virtctl console vmi-pxe-boot</pre></li><li class="listitem"><p class="simpara">
								Verify the interfaces and MAC address on the virtual machine and that the interface connected to the bridge has the specified MAC address. In this case, we used <code class="literal">eth1</code> for the PXE boot, without an IP address. The other interface, <code class="literal">eth0</code>, got an IP address from OpenShift Container Platform.
							</p><pre class="programlisting language-terminal">$ ip addr</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">...
3. eth1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
   link/ether de:00:00:00:00:de brd ff:ff:ff:ff:ff:ff</pre>

						</p></div></section><section class="section" id="virt-networking-glossary_pxe-booting"><div class="titlepage"><div><div><h4 class="title">10.15.6.3. OpenShift Virtualization networking glossary</h4></div></div></div><p>
						OpenShift Virtualization provides advanced networking functionality by using custom resources and plugins.
					</p><p>
						The following terms are used throughout OpenShift Virtualization documentation:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Container Network Interface (CNI)</span></dt><dd>
									a <a class="link" href="https://www.cncf.io/">Cloud Native Computing Foundation</a> project, focused on container network connectivity. OpenShift Virtualization uses CNI plugins to build upon the basic Kubernetes networking functionality.
								</dd><dt><span class="term">Multus</span></dt><dd>
									a "meta" CNI plugin that allows multiple CNIs to exist so that a pod or virtual machine can use the interfaces it needs.
								</dd><dt><span class="term">Custom resource definition (CRD)</span></dt><dd>
									a <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">Kubernetes</a> API resource that allows you to define custom resources, or an object defined by using the CRD API resource.
								</dd><dt><span class="term">Network attachment definition (NAD)</span></dt><dd>
									a CRD introduced by the Multus project that allows you to attach pods, virtual machines, and virtual machine instances to one or more networks.
								</dd><dt><span class="term">Node network configuration policy (NNCP)</span></dt><dd>
									a description of the requested network configuration on nodes. You update the node network configuration, including adding and removing interfaces, by applying a <code class="literal">NodeNetworkConfigurationPolicy</code> manifest to the cluster.
								</dd><dt><span class="term">Preboot eXecution Environment (PXE)</span></dt><dd>
									an interface that enables an administrator to boot a client machine from a server over the network. Network booting allows you to remotely load operating systems and other software onto the client.
								</dd></dl></div></section></section><section class="section" id="virt-using-huge-pages-with-vms"><div class="titlepage"><div><div><h3 class="title">10.15.7. Using huge pages with virtual machines</h3></div></div></div><p>
					You can use huge pages as backing memory for virtual machines in your cluster.
				</p><section class="section" id="prerequisites-2"><div class="titlepage"><div><div><h4 class="title">10.15.7.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Nodes must have <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#configuring-huge-pages_huge-pages">pre-allocated huge pages configured</a>.
							</li></ul></div></section><section class="section" id="what-huge-pages-do_virt-using-huge-pages-with-vms"><div class="titlepage"><div><div><h4 class="title">10.15.7.2. What huge pages do</h4></div></div></div><p>
						Memory is managed in blocks known as pages. On most systems, a page is 4Ki. 1Mi of memory is equal to 256 pages; 1Gi of memory is 256,000 pages, and so on. CPUs have a built-in memory management unit that manages a list of these pages in hardware. The Translation Lookaside Buffer (TLB) is a small hardware cache of virtual-to-physical page mappings. If the virtual address passed in a hardware instruction can be found in the TLB, the mapping can be determined quickly. If not, a TLB miss occurs, and the system falls back to slower, software-based address translation, resulting in performance issues. Since the size of the TLB is fixed, the only way to reduce the chance of a TLB miss is to increase the page size.
					</p><p>
						A huge page is a memory page that is larger than 4Ki. On x86_64 architectures, there are two common huge page sizes: 2Mi and 1Gi. Sizes vary on other architectures. To use huge pages, code must be written so that applications are aware of them. Transparent Huge Pages (THP) attempt to automate the management of huge pages without application knowledge, but they have limitations. In particular, they are limited to 2Mi page sizes. THP can lead to performance degradation on nodes with high memory utilization or fragmentation due to defragmenting efforts of THP, which can lock memory pages. For this reason, some applications may be designed to (or recommend) usage of pre-allocated huge pages instead of THP.
					</p><p>
						In OpenShift Virtualization, virtual machines can be configured to consume pre-allocated huge pages.
					</p></section><section class="section" id="virt-configuring-huge-pages-for-vms_virt-using-huge-pages-with-vms"><div class="titlepage"><div><div><h4 class="title">10.15.7.3. Configuring huge pages for virtual machines</h4></div></div></div><p>
						You can configure virtual machines to use pre-allocated huge pages by including the <code class="literal">memory.hugepages.pageSize</code> and <code class="literal">resources.requests.memory</code> parameters in your virtual machine configuration.
					</p><p>
						The memory request must be divisible by the page size. For example, you cannot request <code class="literal">500Mi</code> memory with a page size of <code class="literal">1Gi</code>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The memory layouts of the host and the guest OS are unrelated. Huge pages requested in the virtual machine manifest apply to QEMU. Huge pages inside the guest can only be configured based on the amount of available memory of the virtual machine instance.
						</p></div></div><p>
						If you edit a running virtual machine, the virtual machine must be rebooted for the changes to take effect.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Nodes must have pre-allocated huge pages configured.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In your virtual machine configuration, add the <code class="literal">resources.requests.memory</code> and <code class="literal">memory.hugepages.pageSize</code> parameters to the <code class="literal">spec.domain</code>. The following configuration snippet is for a virtual machine that requests a total of <code class="literal">4Gi</code> memory with a page size of <code class="literal">1Gi</code>:
							</p><pre class="programlisting language-yaml">kind: VirtualMachine
# ...
spec:
  domain:
    resources:
      requests:
        memory: "4Gi" <span id="CO33-1"><!--Empty--></span><span class="callout">1</span>
    memory:
      hugepages:
        pageSize: "1Gi" <span id="CO33-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO33-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The total amount of memory requested for the virtual machine. This value must be divisible by the page size.
									</div></dd><dt><a href="#CO33-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The size of each huge page. Valid values for x86_64 architecture are <code class="literal">1Gi</code> and <code class="literal">2Mi</code>. The page size must be smaller than the requested memory.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the virtual machine configuration:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;virtual_machine&gt;.yaml</pre></li></ol></div></section></section><section class="section" id="virt-dedicated-resources-vm"><div class="titlepage"><div><div><h3 class="title">10.15.8. Enabling dedicated resources for virtual machines</h3></div></div></div><p>
					To improve performance, you can dedicate node resources, such as CPU, to a virtual machine.
				</p><section class="section" id="virt-about-dedicated-resources_virt-dedicated-resources-vm"><div class="titlepage"><div><div><h4 class="title">10.15.8.1. About dedicated resources</h4></div></div></div><p>
						When you enable dedicated resources for your virtual machine, your virtual machine’s workload is scheduled on CPUs that will not be used by other processes. By using dedicated resources, you can improve the performance of the virtual machine and the accuracy of latency predictions.
					</p></section><section class="section" id="prerequisites-3"><div class="titlepage"><div><div><h4 class="title">10.15.8.2. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#using-cpu-manager-and-topology-manager">CPU Manager</a> must be configured on the node. Verify that the node has the <code class="literal">cpumanager = true</code> label before scheduling virtual machine workloads.
							</li><li class="listitem">
								The virtual machine must be powered off.
							</li></ul></div></section><section class="section" id="virt-enabling-dedicated-resources_virt-dedicated-resources-vm"><div class="titlepage"><div><div><h4 class="title">10.15.8.3. Enabling dedicated resources for a virtual machine</h4></div></div></div><p>
						You enable dedicated resources for a virtual machine in the <span class="strong strong"><strong>Details</strong></span> tab. Virtual machines that were created from a Red Hat template can be configured with dedicated resources.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Configuration → Scheduling</strong></span> tab, click the edit icon beside <span class="strong strong"><strong>Dedicated Resources</strong></span>.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Schedule this workload with dedicated resources (guaranteed policy)</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></section></section><section class="section" id="virt-schedule-vms"><div class="titlepage"><div><div><h3 class="title">10.15.9. Scheduling virtual machines</h3></div></div></div><p>
					You can schedule a virtual machine (VM) on a node by ensuring that the VM’s CPU model and policy attribute are matched for compatibility with the CPU models and policy attributes supported by the node.
				</p><section class="section" id="policy-attributes_virt-schedule-vms"><div class="titlepage"><div><div><h4 class="title">10.15.9.1. Policy attributes</h4></div></div></div><p>
						You can schedule a virtual machine (VM) by specifying a policy attribute and a CPU feature that is matched for compatibility when the VM is scheduled on a node. A policy attribute specified for a VM determines how that VM is scheduled on a node.
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196955617920" scope="col">Policy attribute</th><th align="left" valign="top" id="idm140196955616832" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196955617920"> <p>
										force
									</p>
									 </td><td align="left" valign="top" headers="idm140196955616832"> <p>
										The VM is forced to be scheduled on a node. This is true even if the host CPU does not support the VM’s CPU.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196955617920"> <p>
										require
									</p>
									 </td><td align="left" valign="top" headers="idm140196955616832"> <p>
										Default policy that applies to a VM if the VM is not configured with a specific CPU model and feature specification. If a node is not configured to support CPU node discovery with this default policy attribute or any one of the other policy attributes, VMs are not scheduled on that node. Either the host CPU must support the VM’s CPU or the hypervisor must be able to emulate the supported CPU model.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196955617920"> <p>
										optional
									</p>
									 </td><td align="left" valign="top" headers="idm140196955616832"> <p>
										The VM is added to a node if that VM is supported by the host’s physical machine CPU.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196955617920"> <p>
										disable
									</p>
									 </td><td align="left" valign="top" headers="idm140196955616832"> <p>
										The VM cannot be scheduled with CPU node discovery.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196955617920"> <p>
										forbid
									</p>
									 </td><td align="left" valign="top" headers="idm140196955616832"> <p>
										The VM is not scheduled even if the feature is supported by the host CPU and CPU node discovery is enabled.
									</p>
									 </td></tr></tbody></table></div></section><section class="section" id="virt-setting-policy-attributes_virt-schedule-vms"><div class="titlepage"><div><div><h4 class="title">10.15.9.2. Setting a policy attribute and CPU feature</h4></div></div></div><p>
						You can set a policy attribute and CPU feature for each virtual machine (VM) to ensure that it is scheduled on a node according to policy and feature. The CPU feature that you set is verified to ensure that it is supported by the host CPU or emulated by the hypervisor.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">domain</code> spec of your VM configuration file. The following example sets the CPU feature and the <code class="literal">require</code> policy for a virtual machine (VM):
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: myvm
spec:
  template:
    spec:
      domain:
        cpu:
          features:
            - name: apic <span id="CO34-1"><!--Empty--></span><span class="callout">1</span>
              policy: require <span id="CO34-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO34-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Name of the CPU feature for the VM.
									</div></dd><dt><a href="#CO34-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Policy attribute for the VM.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="virt-schedule-supported-cpu-model-vms_virt-schedule-vms"><div class="titlepage"><div><div><h4 class="title">10.15.9.3. Scheduling virtual machines with the supported CPU model</h4></div></div></div><p>
						You can configure a CPU model for a virtual machine (VM) to schedule it on a node where its CPU model is supported.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">domain</code> spec of your virtual machine configuration file. The following example shows a specific CPU model defined for a VM:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: myvm
spec:
  template:
    spec:
      domain:
        cpu:
          model: Conroe <span id="CO35-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO35-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										CPU model for the VM.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="virt-schedule-cpu-host-model-vms_virt-schedule-vms"><div class="titlepage"><div><div><h4 class="title">10.15.9.4. Scheduling virtual machines with the host model</h4></div></div></div><p>
						When the CPU model for a virtual machine (VM) is set to <code class="literal">host-model</code>, the VM inherits the CPU model of the node where it is scheduled.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">domain</code> spec of your VM configuration file. The following example shows <code class="literal">host-model</code> being specified for the virtual machine:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt/v1alpha3
kind: VirtualMachine
metadata:
  name: myvm
spec:
  template:
    spec:
      domain:
        cpu:
          model: host-model <span id="CO36-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO36-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The VM that inherits the CPU model of the node where it is scheduled.
									</div></dd></dl></div></li></ul></div></section></section><section class="section" id="virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h3 class="title">10.15.10. Configuring PCI passthrough</h3></div></div></div><p>
					The Peripheral Component Interconnect (PCI) passthrough feature enables you to access and manage hardware devices from a virtual machine. When PCI passthrough is configured, the PCI devices function as if they were physically attached to the guest operating system.
				</p><p>
					Cluster administrators can expose and manage host devices that are permitted to be used in the cluster by using the <code class="literal">oc</code> command-line interface (CLI).
				</p><section class="section" id="virt-about_pci-passthrough_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h4 class="title">10.15.10.1. About preparing a host device for PCI passthrough</h4></div></div></div><p>
						To prepare a host device for PCI passthrough by using the CLI, create a <code class="literal">MachineConfig</code> object and add kernel arguments to enable the Input-Output Memory Management Unit (IOMMU). Bind the PCI device to the Virtual Function I/O (VFIO) driver and then expose it in the cluster by editing the <code class="literal">permittedHostDevices</code> field of the <code class="literal">HyperConverged</code> custom resource (CR). The <code class="literal">permittedHostDevices</code> list is empty when you first install the OpenShift Virtualization Operator.
					</p><p>
						To remove a PCI host device from the cluster by using the CLI, delete the PCI device information from the <code class="literal">HyperConverged</code> CR.
					</p><section class="section" id="virt-adding-kernel-arguments-enable-IOMMU_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h5 class="title">10.15.10.1.1. Adding kernel arguments to enable the IOMMU driver</h5></div></div></div><p>
							To enable the IOMMU (Input-Output Memory Management Unit) driver in the kernel, create the <code class="literal">MachineConfig</code> object and add the kernel arguments.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									Administrative privilege to a working OpenShift Container Platform cluster.
								</li><li class="listitem">
									Intel or AMD CPU hardware.
								</li><li class="listitem">
									Intel Virtualization Technology for Directed I/O extensions or AMD IOMMU in the BIOS (Basic Input/Output System) is enabled.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a <code class="literal">MachineConfig</code> object that identifies the kernel argument. The following example shows a kernel argument for an Intel CPU.
								</p><pre class="programlisting language-yaml">apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: worker <span id="CO37-1"><!--Empty--></span><span class="callout">1</span>
  name: 100-worker-iommu <span id="CO37-2"><!--Empty--></span><span class="callout">2</span>
spec:
  config:
    ignition:
      version: 3.2.0
  kernelArguments:
      - intel_iommu=on <span id="CO37-3"><!--Empty--></span><span class="callout">3</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO37-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Applies the new kernel argument only to worker nodes.
										</div></dd><dt><a href="#CO37-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The <code class="literal">name</code> indicates the ranking of this kernel argument (100) among the machine configs and its purpose. If you have an AMD CPU, specify the kernel argument as <code class="literal">amd_iommu=on</code>.
										</div></dd><dt><a href="#CO37-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											Identifies the kernel argument as <code class="literal">intel_iommu</code> for an Intel CPU.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create the new <code class="literal">MachineConfig</code> object:
								</p><pre class="programlisting language-terminal">$ oc create -f 100-worker-kernel-arg-iommu.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Verify that the new <code class="literal">MachineConfig</code> object was added.
								</p><pre class="programlisting language-terminal">$ oc get MachineConfig</pre></li></ul></div></section><section class="section" id="virt-binding-devices-vfio-driver_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h5 class="title">10.15.10.1.2. Binding PCI devices to the VFIO driver</h5></div></div></div><p>
							To bind PCI devices to the VFIO (Virtual Function I/O) driver, obtain the values for <code class="literal">vendor-ID</code> and <code class="literal">device-ID</code> from each device and create a list with the values. Add this list to the <code class="literal">MachineConfig</code> object. The <code class="literal">MachineConfig</code> Operator generates the <code class="literal">/etc/modprobe.d/vfio.conf</code> on the nodes with the PCI devices, and binds the PCI devices to the VFIO driver.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You added kernel arguments to enable IOMMU for the CPU.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Run the <code class="literal">lspci</code> command to obtain the <code class="literal">vendor-ID</code> and the <code class="literal">device-ID</code> for the PCI device.
								</p><pre class="programlisting language-terminal">$ lspci -nnv | grep -i nvidia</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">02:01.0 3D controller [0302]: NVIDIA Corporation GV100GL [Tesla V100 PCIe 32GB] [10de:1eb8] (rev a1)</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									Create a Butane config file, <code class="literal">100-worker-vfiopci.bu</code>, binding the PCI device to the VFIO driver.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										See "Creating machine configs with Butane" for information about Butane.
									</p></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
										
<pre class="programlisting language-yaml">variant: openshift
version: 4.13.0
metadata:
  name: 100-worker-vfiopci
  labels:
    machineconfiguration.openshift.io/role: worker <span id="CO38-1"><!--Empty--></span><span class="callout">1</span>
storage:
  files:
  - path: /etc/modprobe.d/vfio.conf
    mode: 0644
    overwrite: true
    contents:
      inline: |
        options vfio-pci ids=10de:1eb8 <span id="CO38-2"><!--Empty--></span><span class="callout">2</span>
  - path: /etc/modules-load.d/vfio-pci.conf <span id="CO38-3"><!--Empty--></span><span class="callout">3</span>
    mode: 0644
    overwrite: true
    contents:
      inline: vfio-pci</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO38-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Applies the new kernel argument only to worker nodes.
										</div></dd><dt><a href="#CO38-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Specify the previously determined <code class="literal">vendor-ID</code> value (<code class="literal">10de</code>) and the <code class="literal">device-ID</code> value (<code class="literal">1eb8</code>) to bind a single device to the VFIO driver. You can add a list of multiple devices with their vendor and device information.
										</div></dd><dt><a href="#CO38-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The file that loads the vfio-pci kernel module on the worker nodes.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Use Butane to generate a <code class="literal">MachineConfig</code> object file, <code class="literal">100-worker-vfiopci.yaml</code>, containing the configuration to be delivered to the worker nodes:
								</p><pre class="programlisting language-terminal">$ butane 100-worker-vfiopci.bu -o 100-worker-vfiopci.yaml</pre></li><li class="listitem"><p class="simpara">
									Apply the <code class="literal">MachineConfig</code> object to the worker nodes:
								</p><pre class="programlisting language-terminal">$ oc apply -f 100-worker-vfiopci.yaml</pre></li><li class="listitem"><p class="simpara">
									Verify that the <code class="literal">MachineConfig</code> object was added.
								</p><pre class="programlisting language-terminal">$ oc get MachineConfig</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">NAME                             GENERATEDBYCONTROLLER                      IGNITIONVERSION  AGE
00-master                        d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
00-worker                        d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
01-master-container-runtime      d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
01-master-kubelet                d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
01-worker-container-runtime      d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
01-worker-kubelet                d3da910bfa9f4b599af4ed7f5ac270d55950a3a1   3.2.0            25h
100-worker-iommu                                                            3.2.0            30s
100-worker-vfiopci-configuration                                            3.2.0            30s</pre>

									</p></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Verify that the VFIO driver is loaded.
								</p><pre class="programlisting language-terminal">$ lspci -nnk -d 10de:</pre><p class="simpara">
									The output confirms that the VFIO driver is being used.
								</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="screen">04:00.0 3D controller [0302]: NVIDIA Corporation GP102GL [Tesla P40] [10de:1eb8] (rev a1)
        Subsystem: NVIDIA Corporation Device [10de:1eb8]
        Kernel driver in use: vfio-pci
        Kernel modules: nouveau</pre>

									</p></div></li></ul></div></section><section class="section" id="virt-exposing-pci-device-in-cluster-cli_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h5 class="title">10.15.10.1.3. Exposing PCI host devices in the cluster using the CLI</h5></div></div></div><p>
							To expose PCI host devices in the cluster, add details about the PCI devices to the <code class="literal">spec.permittedHostDevices.pciHostDevices</code> array of the <code class="literal">HyperConverged</code> custom resource (CR).
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
								</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
									Add the PCI device information to the <code class="literal">spec.permittedHostDevices.pciHostDevices</code> array. For example:
								</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
										
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  permittedHostDevices: <span id="CO39-1"><!--Empty--></span><span class="callout">1</span>
    pciHostDevices: <span id="CO39-2"><!--Empty--></span><span class="callout">2</span>
    - pciDeviceSelector: "10DE:1DB6" <span id="CO39-3"><!--Empty--></span><span class="callout">3</span>
      resourceName: "nvidia.com/GV100GL_Tesla_V100" <span id="CO39-4"><!--Empty--></span><span class="callout">4</span>
    - pciDeviceSelector: "10DE:1EB8"
      resourceName: "nvidia.com/TU104GL_Tesla_T4"
    - pciDeviceSelector: "8086:6F54"
      resourceName: "intel.com/qat"
      externalResourceProvider: true <span id="CO39-5"><!--Empty--></span><span class="callout">5</span>
# ...</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO39-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The host devices that are permitted to be used in the cluster.
										</div></dd><dt><a href="#CO39-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The list of PCI devices available on the node.
										</div></dd><dt><a href="#CO39-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The <code class="literal">vendor-ID</code> and the <code class="literal">device-ID</code> required to identify the PCI device.
										</div></dd><dt><a href="#CO39-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The name of a PCI host device.
										</div></dd><dt><a href="#CO39-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											Optional: Setting this field to <code class="literal">true</code> indicates that the resource is provided by an external device plugin. OpenShift Virtualization allows the usage of this device in the cluster but leaves the allocation and monitoring to an external device plugin.
										</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The above example snippet shows two PCI host devices that are named <code class="literal">nvidia.com/GV100GL_Tesla_V100</code> and <code class="literal">nvidia.com/TU104GL_Tesla_T4</code> added to the list of permitted host devices in the <code class="literal">HyperConverged</code> CR. These devices have been tested and verified to work with OpenShift Virtualization.
									</p></div></div></li><li class="listitem">
									Save your changes and exit the editor.
								</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Verify that the PCI host devices were added to the node by running the following command. The example output shows that there is one device each associated with the <code class="literal">nvidia.com/GV100GL_Tesla_V100</code>, <code class="literal">nvidia.com/TU104GL_Tesla_T4</code>, and <code class="literal">intel.com/qat</code> resource names.
								</p><pre class="programlisting language-terminal">$ oc describe node &lt;node_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">Capacity:
  cpu:                            64
  devices.kubevirt.io/kvm:        110
  devices.kubevirt.io/tun:        110
  devices.kubevirt.io/vhost-net:  110
  ephemeral-storage:              915128Mi
  hugepages-1Gi:                  0
  hugepages-2Mi:                  0
  memory:                         131395264Ki
  nvidia.com/GV100GL_Tesla_V100   1
  nvidia.com/TU104GL_Tesla_T4     1
  intel.com/qat:                  1
  pods:                           250
Allocatable:
  cpu:                            63500m
  devices.kubevirt.io/kvm:        110
  devices.kubevirt.io/tun:        110
  devices.kubevirt.io/vhost-net:  110
  ephemeral-storage:              863623130526
  hugepages-1Gi:                  0
  hugepages-2Mi:                  0
  memory:                         130244288Ki
  nvidia.com/GV100GL_Tesla_V100   1
  nvidia.com/TU104GL_Tesla_T4     1
  intel.com/qat:                  1
  pods:                           250</pre>

									</p></div></li></ul></div></section><section class="section" id="virt-removing-pci-device-from-cluster_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h5 class="title">10.15.10.1.4. Removing PCI host devices from the cluster using the CLI</h5></div></div></div><p>
							To remove a PCI host device from the cluster, delete the information for that device from the <code class="literal">HyperConverged</code> custom resource (CR).
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
								</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
									Remove the PCI device information from the <code class="literal">spec.permittedHostDevices.pciHostDevices</code> array by deleting the <code class="literal">pciDeviceSelector</code>, <code class="literal">resourceName</code> and <code class="literal">externalResourceProvider</code> (if applicable) fields for the appropriate device. In this example, the <code class="literal">intel.com/qat</code> resource has been deleted.
								</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
										
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  permittedHostDevices:
    pciHostDevices:
    - pciDeviceSelector: "10DE:1DB6"
      resourceName: "nvidia.com/GV100GL_Tesla_V100"
    - pciDeviceSelector: "10DE:1EB8"
      resourceName: "nvidia.com/TU104GL_Tesla_T4"
# ...</pre>

									</p></div></li><li class="listitem">
									Save your changes and exit the editor.
								</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Verify that the PCI host device was removed from the node by running the following command. The example output shows that there are zero devices associated with the <code class="literal">intel.com/qat</code> resource name.
								</p><pre class="programlisting language-terminal">$ oc describe node &lt;node_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">Capacity:
  cpu:                            64
  devices.kubevirt.io/kvm:        110
  devices.kubevirt.io/tun:        110
  devices.kubevirt.io/vhost-net:  110
  ephemeral-storage:              915128Mi
  hugepages-1Gi:                  0
  hugepages-2Mi:                  0
  memory:                         131395264Ki
  nvidia.com/GV100GL_Tesla_V100   1
  nvidia.com/TU104GL_Tesla_T4     1
  intel.com/qat:                  0
  pods:                           250
Allocatable:
  cpu:                            63500m
  devices.kubevirt.io/kvm:        110
  devices.kubevirt.io/tun:        110
  devices.kubevirt.io/vhost-net:  110
  ephemeral-storage:              863623130526
  hugepages-1Gi:                  0
  hugepages-2Mi:                  0
  memory:                         130244288Ki
  nvidia.com/GV100GL_Tesla_V100   1
  nvidia.com/TU104GL_Tesla_T4     1
  intel.com/qat:                  0
  pods:                           250</pre>

									</p></div></li></ul></div></section></section><section class="section" id="virt-configuring-vms-for-pci-passthrough"><div class="titlepage"><div><div><h4 class="title">10.15.10.2. Configuring virtual machines for PCI passthrough</h4></div></div></div><p>
						After the PCI devices have been added to the cluster, you can assign them to virtual machines. The PCI devices are now available as if they are physically connected to the virtual machines.
					</p><section class="section" id="virt-assigning-pci-device-virtual-machine_virt-configuring-pci-passthrough"><div class="titlepage"><div><div><h5 class="title">10.15.10.2.1. Assigning a PCI device to a virtual machine</h5></div></div></div><p>
							When a PCI device is available in a cluster, you can assign it to a virtual machine and enable PCI passthrough.
						</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Assign the PCI device to a virtual machine as a host device.
								</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
										
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  domain:
    devices:
      hostDevices:
      - deviceName: nvidia.com/TU104GL_Tesla_T4 <span id="CO40-1"><!--Empty--></span><span class="callout">1</span>
        name: hostdevices1</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO40-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The name of the PCI device that is permitted on the cluster as a host device. The virtual machine can access this host device.
										</div></dd></dl></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Use the following command to verify that the host device is available from the virtual machine.
								</p><pre class="programlisting language-terminal">$ lspci -nnk | grep NVIDIA</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">$ 02:01.0 3D controller [0302]: NVIDIA Corporation GV100GL [Tesla V100 PCIe 32GB] [10de:1eb8] (rev a1)</pre>

									</p></div></li></ul></div></section></section><section class="section _additional-resources" id="additional-resources_configuring-pci-passthrough"><div class="titlepage"><div><div><h4 class="title">10.15.10.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-troubleshooting-enabling_intel_vt_x_and_amd_v_virtualization_hardware_extensions_in_bios">Enabling Intel VT-X and AMD-V Virtualization Hardware Extensions in BIOS</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/assembly_managing-file-permissions_configuring-basic-system-settings">Managing file permissions</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/post-installation_configuration/#post-install-machine-configuration-tasks">Post-installation machine configuration tasks</a>
							</li></ul></div></section></section><section class="section" id="virt-configuring-vgpu-passthrough"><div class="titlepage"><div><div><h3 class="title">10.15.11. Configuring vGPU passthrough</h3></div></div></div><p>
					Your virtual machines can access a virtual GPU (vGPU) hardware. Assigning a vGPU to your virtual machine allows you do the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Access a fraction of the underlying hardware’s GPU to achieve high performance benefits in your virtual machine.
						</li><li class="listitem">
							Streamline resource-intensive I/O operations.
						</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						vGPU passthrough can only be assigned to devices that are connected to clusters running in a bare metal environment.
					</p></div></div><section class="section" id="virt-assign-vgpu-passthrough-to-vm_virt-configuring-vgpu-passthrough"><div class="titlepage"><div><div><h4 class="title">10.15.11.1. Assigning vGPU passthrough devices to a virtual machine</h4></div></div></div><p>
						Use the OpenShift Container Platform web console to assign vGPU passthrough devices to your virtual machine.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The virtual machine must be stopped.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Virtualization → VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select the virtual machine to which you want to assign the device.
							</li><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Details</strong></span> tab, click <span class="strong strong"><strong>GPU devices</strong></span>.
							</p><p class="simpara">
								If you add a vGPU device as a host device, you cannot access the device with the VNC console.
							</p></li><li class="listitem">
								Click <span class="strong strong"><strong>Add GPU device</strong></span>, enter the <span class="strong strong"><strong>Name</strong></span> and select the device from the <span class="strong strong"><strong>Device name</strong></span> list.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab to verify that the new devices have been added to your cluster configuration in the <code class="literal">hostDevices</code> section.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can add hardware devices to virtual machines created from customized templates or a YAML file. You cannot add devices to pre-supplied boot source templates for specific operating systems, such as Windows 10 or RHEL 7.
						</p><p>
							To display resources that are connected to your cluster, click <span class="strong strong"><strong>Compute</strong></span> → <span class="strong strong"><strong>Hardware Devices</strong></span> from the side menu.
						</p></div></div></section><section class="section _additional-resources" id="additional-resources_virt-configuring-vgpu-passthrough"><div class="titlepage"><div><div><h4 class="title">10.15.11.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-create-vms">Creating virtual machines</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-vm-template">Creating virtual machine templates</a>
							</li></ul></div></section></section><section class="section" id="virt-configuring-mediated-devices"><div class="titlepage"><div><div><h3 class="title">10.15.12. Configuring mediated devices</h3></div></div></div><p>
					OpenShift Virtualization automatically creates mediated devices, such as virtual GPUs (vGPUs), if you provide a list of devices in the <code class="literal">HyperConverged</code> custom resource (CR).
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Declarative configuration of mediated devices is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><section class="section" id="about-using-nvidia-gpu_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h4 class="title">10.15.12.1. About using the NVIDIA GPU Operator</h4></div></div></div><p>
						The NVIDIA GPU Operator manages NVIDIA GPU resources in a OpenShift Container Platform cluster and automates tasks related to bootstrapping GPU nodes. Because the GPU is a special resource in the cluster, you must install some components before you can deploy application workloads to the GPU. These components include the NVIDIA drivers that enable the compute unified device architecture (CUDA), Kubernetes device plugin, container runtime, and other features such as automatic node labeling, monitoring, and more.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The NVIDIA GPU Operator is supported only by NVIDIA. For more information about obtaining support from NVIDIA, see <a class="link" href="https://access.redhat.com/solutions/5174941">Obtaining Support from NVIDIA</a>.
						</p></div></div><p>
						There are two ways to enable GPUs with OpenShift Container Platform OpenShift Virtualization: the OpenShift Container Platform-native way described here and by using the NVIDIA GPU Operator.
					</p><p>
						The NVIDIA GPU Operator is a Kubernetes Operator that uses OpenShift Container Platform OpenShift Virtualization to provision GPUs for virtualized workloads running on OpenShift Container Platform. With the Operator, you can easily provision and manage GPU-enabled virtual machines to run complex artificial intelligence/machine learning (AI/ML) workloads on the same platform as their other workloads. The Operator also provides an easy way to scale the GPU capacity of their infrastructure, enabling rapid growth of GPU-based workloads.
					</p><p>
						For more information about using the NVIDIA GPU Operator to provision worker nodes for running GPU-accelerated VMs, see <a class="link" href="https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/openshift/openshift-virtualization.html">NVIDIA GPU Operator with OpenShift Virtualization</a>.
					</p></section><section class="section" id="virt-about-using-virtual-gpus_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h4 class="title">10.15.12.2. About using virtual GPUs with OpenShift Virtualization</h4></div></div></div><p>
						Some graphics processing unit (GPU) cards support the creation of virtual GPUs (vGPUs). OpenShift Virtualization can automatically create vGPUs and other mediated devices if an administrator provides configuration details in the <code class="literal">HyperConverged</code> custom resource (CR). This automation is especially useful for large clusters.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Refer to your hardware vendor’s documentation for functionality and support details.
						</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Mediated device</span></dt><dd>
									A physical device that is divided into one or more virtual devices. A vGPU is a type of mediated device (mdev); the performance of the physical GPU is divided among the virtual devices. You can assign mediated devices to one or more virtual machines (VMs), but the number of guests must be compatible with your GPU. Some GPUs do not support multiple guests.
								</dd></dl></div><section class="section" id="prerequisites_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.1. Prerequisites</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									If your hardware vendor provides drivers, you installed them on the nodes where you want to create mediated devices.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											If you use NVIDIA cards, you <a class="link" href="https://access.redhat.com/solutions/6738411">installed the NVIDIA GRID driver</a>.
										</li></ul></div></li></ul></div></section><section class="section" id="configuration-overview_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.2. Configuration overview</h5></div></div></div><p>
							When configuring mediated devices, an administrator must complete the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Create the mediated devices.
								</li><li class="listitem">
									Expose the mediated devices to the cluster.
								</li></ul></div><p>
							The <code class="literal">HyperConverged</code> CR includes APIs that accomplish both tasks.
						</p><div class="formalpara"><p class="title"><strong>Creating mediated devices</strong></p><p>
								
<pre class="programlisting language-yaml"># ...
spec:
  mediatedDevicesConfiguration:
    mediatedDevicesTypes: <span id="CO41-1"><!--Empty--></span><span class="callout">1</span>
    - &lt;device_type&gt;
    nodeMediatedDeviceTypes: <span id="CO41-2"><!--Empty--></span><span class="callout">2</span>
    - mediatedDevicesTypes: <span id="CO41-3"><!--Empty--></span><span class="callout">3</span>
      - &lt;device_type&gt;
      nodeSelector: <span id="CO41-4"><!--Empty--></span><span class="callout">4</span>
        &lt;node_selector_key&gt;: &lt;node_selector_value&gt;
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO41-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Required: Configures global settings for the cluster.
								</div></dd><dt><a href="#CO41-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Optional: Overrides the global configuration for a specific node or group of nodes. Must be used with the global <code class="literal">mediatedDevicesTypes</code> configuration.
								</div></dd><dt><a href="#CO41-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Required if you use <code class="literal">nodeMediatedDeviceTypes</code>. Overrides the global <code class="literal">mediatedDevicesTypes</code> configuration for the specified nodes.
								</div></dd><dt><a href="#CO41-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									Required if you use <code class="literal">nodeMediatedDeviceTypes</code>. Must include a <code class="literal">key:value</code> pair.
								</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Exposing mediated devices to the cluster</strong></p><p>
								
<pre class="programlisting language-yaml"># ...
  permittedHostDevices:
    mediatedDevices:
    - mdevNameSelector: GRID T4-2Q <span id="CO42-1"><!--Empty--></span><span class="callout">1</span>
      resourceName: nvidia.com/GRID_T4-2Q <span id="CO42-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO42-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Exposes the mediated devices that map to this value on the host.
								</div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can see the mediated device types that your device supports by viewing the contents of <code class="literal">/sys/bus/pci/devices/&lt;slot&gt;:&lt;bus&gt;:&lt;domain&gt;.&lt;function&gt;/mdev_supported_types/&lt;type&gt;/name</code>, substituting the correct values for your system.
									</p><p>
										For example, the name file for the <code class="literal">nvidia-231</code> type contains the selector string <code class="literal">GRID T4-2Q</code>. Using <code class="literal">GRID T4-2Q</code> as the <code class="literal">mdevNameSelector</code> value allows nodes to use the <code class="literal">nvidia-231</code> type.
									</p></div></div></dd><dt><a href="#CO42-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The <code class="literal">resourceName</code> should match that allocated on the node. Find the <code class="literal">resourceName</code> by using the following command:
								</div><pre class="programlisting language-terminal">$ oc get $NODE -o json \
  | jq '.status.allocatable \
    | with_entries(select(.key | startswith("nvidia.com/"))) \
    | with_entries(select(.value != "0"))'</pre></dd></dl></div></section><section class="section" id="how-vgpus-are-assigned-to-nodes_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.3. How vGPUs are assigned to nodes</h5></div></div></div><p>
							For each physical device, OpenShift Virtualization configures the following values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A single mdev type.
								</li><li class="listitem">
									The maximum number of instances of the selected <code class="literal">mdev</code> type.
								</li></ul></div><p>
							The cluster architecture affects how devices are created and assigned to nodes.
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Large cluster with multiple cards per node</span></dt><dd><p class="simpara">
										On nodes with multiple cards that can support similar vGPU types, the relevant device types are created in a round-robin manner. For example:
									</p><pre class="programlisting language-yaml"># ...
mediatedDevicesConfiguration:
  mediatedDevicesTypes:
  - nvidia-222
  - nvidia-228
  - nvidia-105
  - nvidia-108
# ...</pre><p class="simpara">
										In this scenario, each node has two cards, both of which support the following vGPU types:
									</p><pre class="programlisting language-yaml">nvidia-105
# ...
nvidia-108
nvidia-217
nvidia-299
# ...</pre><p class="simpara">
										On each node, OpenShift Virtualization creates the following vGPUs:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												16 vGPUs of type nvidia-105 on the first card.
											</li><li class="listitem">
												2 vGPUs of type nvidia-108 on the second card.
											</li></ul></div></dd><dt><span class="term">One node has a single card that supports more than one requested vGPU type</span></dt><dd><p class="simpara">
										OpenShift Virtualization uses the supported type that comes first on the <code class="literal">mediatedDevicesTypes</code> list.
									</p><p class="simpara">
										For example, the card on a node card supports <code class="literal">nvidia-223</code> and <code class="literal">nvidia-224</code>. The following <code class="literal">mediatedDevicesTypes</code> list is configured:
									</p><pre class="programlisting language-yaml"># ...
mediatedDevicesConfiguration:
  mediatedDevicesTypes:
  - nvidia-22
  - nvidia-223
  - nvidia-224
# ...</pre><p class="simpara">
										In this example, OpenShift Virtualization uses the <code class="literal">nvidia-223</code> type.
									</p></dd></dl></div></section><section class="section" id="about-changing-removing-mediated-devices_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.4. About changing and removing mediated devices</h5></div></div></div><p>
							The cluster’s mediated device configuration can be updated with OpenShift Virtualization by:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Editing the <code class="literal">HyperConverged</code> CR and change the contents of the <code class="literal">mediatedDevicesTypes</code> stanza.
								</li><li class="listitem">
									Changing the node labels that match the <code class="literal">nodeMediatedDeviceTypes</code> node selector.
								</li><li class="listitem"><p class="simpara">
									Removing the device information from the <code class="literal">spec.mediatedDevicesConfiguration</code> and <code class="literal">spec.permittedHostDevices</code> stanzas of the <code class="literal">HyperConverged</code> CR.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you remove the device information from the <code class="literal">spec.permittedHostDevices</code> stanza without also removing it from the <code class="literal">spec.mediatedDevicesConfiguration</code> stanza, you cannot create a new mediated device type on the same node. To properly remove mediated devices, remove the device information from both stanzas.
									</p></div></div></li></ul></div><p>
							Depending on the specific changes, these actions cause OpenShift Virtualization to reconfigure mediated devices or remove them from the cluster nodes.
						</p></section><section class="section" id="virt-preparing-host-for-mdevs_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.5. Preparing hosts for mediated devices</h5></div></div></div><p>
							You must enable the Input-Output Memory Management Unit (IOMMU) driver before you can configure mediated devices.
						</p><section class="section" id="virt-adding-kernel-arguments-enable-IOMMU_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h6 class="title">10.15.12.2.5.1. Adding kernel arguments to enable the IOMMU driver</h6></div></div></div><p>
								To enable the IOMMU (Input-Output Memory Management Unit) driver in the kernel, create the <code class="literal">MachineConfig</code> object and add the kernel arguments.
							</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										Administrative privilege to a working OpenShift Container Platform cluster.
									</li><li class="listitem">
										Intel or AMD CPU hardware.
									</li><li class="listitem">
										Intel Virtualization Technology for Directed I/O extensions or AMD IOMMU in the BIOS (Basic Input/Output System) is enabled.
									</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Create a <code class="literal">MachineConfig</code> object that identifies the kernel argument. The following example shows a kernel argument for an Intel CPU.
									</p><pre class="programlisting language-yaml">apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: worker <span id="CO43-1"><!--Empty--></span><span class="callout">1</span>
  name: 100-worker-iommu <span id="CO43-2"><!--Empty--></span><span class="callout">2</span>
spec:
  config:
    ignition:
      version: 3.2.0
  kernelArguments:
      - intel_iommu=on <span id="CO43-3"><!--Empty--></span><span class="callout">3</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO43-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Applies the new kernel argument only to worker nodes.
											</div></dd><dt><a href="#CO43-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The <code class="literal">name</code> indicates the ranking of this kernel argument (100) among the machine configs and its purpose. If you have an AMD CPU, specify the kernel argument as <code class="literal">amd_iommu=on</code>.
											</div></dd><dt><a href="#CO43-3"><span class="callout">3</span></a> </dt><dd><div class="para">
												Identifies the kernel argument as <code class="literal">intel_iommu</code> for an Intel CPU.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Create the new <code class="literal">MachineConfig</code> object:
									</p><pre class="programlisting language-terminal">$ oc create -f 100-worker-kernel-arg-iommu.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Verify that the new <code class="literal">MachineConfig</code> object was added.
									</p><pre class="programlisting language-terminal">$ oc get MachineConfig</pre></li></ul></div></section></section><section class="section" id="virt-adding-and-removing-mediated-devices_context"><div class="titlepage"><div><div><h5 class="title">10.15.12.2.6. Adding and removing mediated devices</h5></div></div></div><p>
							You can add or remove mediated devices.
						</p><section class="section" id="virt-creating-and-exposing-mediated-devices_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h6 class="title">10.15.12.2.6.1. Creating and exposing mediated devices</h6></div></div></div><p>
								You can expose and create mediated devices such as virtual GPUs (vGPUs) by editing the <code class="literal">HyperConverged</code> custom resource (CR).
							</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										You enabled the IOMMU (Input-Output Memory Management Unit) driver.
									</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
									</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
										Add the mediated device information to the <code class="literal">HyperConverged</code> CR <code class="literal">spec</code>, ensuring that you include the <code class="literal">mediatedDevicesConfiguration</code> and <code class="literal">permittedHostDevices</code> stanzas. For example:
									</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
											
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  mediatedDevicesConfiguration: &lt;.&gt;
    mediatedDevicesTypes: &lt;.&gt;
    - nvidia-231
    nodeMediatedDeviceTypes: &lt;.&gt;
    - mediatedDevicesTypes: &lt;.&gt;
      - nvidia-233
      nodeSelector:
        kubernetes.io/hostname: node-11.redhat.com
  permittedHostDevices: &lt;.&gt;
    mediatedDevices:
    - mdevNameSelector: GRID T4-2Q
      resourceName: nvidia.com/GRID_T4-2Q
    - mdevNameSelector: GRID T4-8Q
      resourceName: nvidia.com/GRID_T4-8Q
# ...</pre>

										</p></div><p class="simpara">
										&lt;.&gt; Creates mediated devices. &lt;.&gt; Required: Global <code class="literal">mediatedDevicesTypes</code> configuration. &lt;.&gt; Optional: Overrides the global configuration for specific nodes. &lt;.&gt; Required if you use <code class="literal">nodeMediatedDeviceTypes</code>. &lt;.&gt; Exposes mediated devices to the cluster.
									</p></li><li class="listitem">
										Save your changes and exit the editor.
									</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										You can verify that a device was added to a specific node by running the following command:
									</p><pre class="programlisting language-terminal">$ oc describe node &lt;node_name&gt;</pre></li></ul></div></section><section class="section" id="virt-removing-mediated-device-from-cluster-cli_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h6 class="title">10.15.12.2.6.2. Removing mediated devices from the cluster using the CLI</h6></div></div></div><p>
								To remove a mediated device from the cluster, delete the information for that device from the <code class="literal">HyperConverged</code> custom resource (CR).
							</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
									</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
										Remove the device information from the <code class="literal">spec.mediatedDevicesConfiguration</code> and <code class="literal">spec.permittedHostDevices</code> stanzas of the <code class="literal">HyperConverged</code> CR. Removing both entries ensures that you can later create a new mediated device type on the same node. For example:
									</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
											
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  mediatedDevicesConfiguration:
    mediatedDevicesTypes: <span id="CO44-1"><!--Empty--></span><span class="callout">1</span>
      - nvidia-231
  permittedHostDevices:
    mediatedDevices: <span id="CO44-2"><!--Empty--></span><span class="callout">2</span>
    - mdevNameSelector: GRID T4-2Q
      resourceName: nvidia.com/GRID_T4-2Q</pre>

										</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO44-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												To remove the <code class="literal">nvidia-231</code> device type, delete it from the <code class="literal">mediatedDevicesTypes</code> array.
											</div></dd><dt><a href="#CO44-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												To remove the <code class="literal">GRID T4-2Q</code> device, delete the <code class="literal">mdevNameSelector</code> field and its corresponding <code class="literal">resourceName</code> field.
											</div></dd></dl></div></li><li class="listitem">
										Save your changes and exit the editor.
									</li></ol></div></section></section></section><section class="section" id="virt-using-mediated-devices_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h4 class="title">10.15.12.3. Using mediated devices</h4></div></div></div><p>
						A vGPU is a type of mediated device; the performance of the physical GPU is divided among the virtual devices. You can assign mediated devices to one or more virtual machines.
					</p><section class="section" id="virt-assigning-mediated-device-virtual-machine_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h5 class="title">10.15.12.3.1. Assigning a mediated device to a virtual machine</h5></div></div></div><p>
							Assign mediated devices such as virtual GPUs (vGPUs) to virtual machines.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The mediated device is configured in the <code class="literal">HyperConverged</code> custom resource.
								</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Assign the mediated device to a virtual machine (VM) by editing the <code class="literal">spec.domain.devices.gpus</code> stanza of the <code class="literal">VirtualMachine</code> manifest:
								</p><div class="formalpara"><p class="title"><strong>Example virtual machine manifest</strong></p><p>
										
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  domain:
    devices:
      gpus:
      - deviceName: nvidia.com/TU104GL_Tesla_T4 <span id="CO45-1"><!--Empty--></span><span class="callout">1</span>
        name: gpu1 <span id="CO45-2"><!--Empty--></span><span class="callout">2</span>
      - deviceName: nvidia.com/GRID_T4-1Q
        name: gpu2</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO45-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The resource name associated with the mediated device.
										</div></dd><dt><a href="#CO45-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											A name to identify the device on the VM.
										</div></dd></dl></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To verify that the device is available from the virtual machine, run the following command, substituting <code class="literal">&lt;device_name&gt;</code> with the <code class="literal">deviceName</code> value from the <code class="literal">VirtualMachine</code> manifest:
								</p><pre class="programlisting language-terminal">$ lspci -nnk | grep &lt;device_name&gt;</pre></li></ul></div></section></section><section class="section _additional-resources" id="additional-resources_virt-configuring-mediated-devices"><div class="titlepage"><div><div><h4 class="title">10.15.12.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-troubleshooting-enabling_intel_vt_x_and_amd_v_virtualization_hardware_extensions_in_bios">Enabling Intel VT-X and AMD-V Virtualization Hardware Extensions in BIOS</a>
							</li></ul></div></section></section><section class="section" id="virt-enabling-descheduler-evictions"><div class="titlepage"><div><div><h3 class="title">10.15.13. Enabling descheduler evictions on virtual machines</h3></div></div></div><p>
					You can use the descheduler to evict pods so that the pods can be rescheduled onto more appropriate nodes. If the pod is a virtual machine, the pod eviction causes the virtual machine to be live migrated to another node.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Descheduler eviction for virtual machines is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><section class="section" id="nodes-descheduler-profiles_virt-enabling-descheduler-evictions"><div class="titlepage"><div><div><h4 class="title">10.15.13.1. Descheduler profiles</h4></div></div></div><p>
						Use the Technology Preview <code class="literal">DevPreviewLongLifecycle</code> profile to enable the descheduler on a virtual machine. This is the only descheduler profile currently available for OpenShift Virtualization. To ensure proper scheduling, create VMs with CPU and memory requests for the expected load.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">DevPreviewLongLifecycle</code></span></dt><dd><p class="simpara">
									This profile balances resource usage between nodes and enables the following strategies:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">RemovePodsHavingTooManyRestarts</code>: removes pods whose containers have been restarted too many times and pods where the sum of restarts over all containers (including Init Containers) is more than 100. Restarting the VM guest operating system does not increase this count.
										</li><li class="listitem"><p class="simpara">
											<code class="literal">LowNodeUtilization</code>: evicts pods from overutilized nodes when there are any underutilized nodes. The destination node for the evicted pod will be determined by the scheduler.
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
													A node is considered underutilized if its usage is below 20% for all thresholds (CPU, memory, and number of pods).
												</li><li class="listitem">
													A node is considered overutilized if its usage is above 50% for any of the thresholds (CPU, memory, and number of pods).
												</li></ul></div></li></ul></div></dd></dl></div></section><section class="section" id="nodes-descheduler-installing_virt-enabling-descheduler-evictions"><div class="titlepage"><div><div><h4 class="title">10.15.13.2. Installing the descheduler</h4></div></div></div><p>
						The descheduler is not available by default. To enable the descheduler, you must install the Kube Descheduler Operator from OperatorHub and enable one or more descheduler profiles.
					</p><p>
						By default, the descheduler runs in predictive mode, which means that it only simulates pod evictions. You must change the mode to automatic for the descheduler to perform the pod evictions.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If you have enabled hosted control planes in your cluster, set a custom priority threshold to lower the chance that pods in the hosted control plane namespaces are evicted. Set the priority threshold class name to <code class="literal">hypershift-control-plane</code>, because it has the lowest priority value (<code class="literal">100000000</code>) of the hosted control plane priority classes.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Cluster administrator privileges.
							</li><li class="listitem">
								Access to the OpenShift Container Platform web console.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in to the OpenShift Container Platform web console.
							</li><li class="listitem"><p class="simpara">
								Create the required namespace for the Kube Descheduler Operator.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Navigate to <span class="strong strong"><strong>Administration</strong></span> → <span class="strong strong"><strong>Namespaces</strong></span> and click <span class="strong strong"><strong>Create Namespace</strong></span>.
									</li><li class="listitem">
										Enter <code class="literal">openshift-kube-descheduler-operator</code> in the <span class="strong strong"><strong>Name</strong></span> field, enter <code class="literal">openshift.io/cluster-monitoring=true</code> in the <span class="strong strong"><strong>Labels</strong></span> field to enable descheduler metrics, and click <span class="strong strong"><strong>Create</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Install the Kube Descheduler Operator.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Navigate to <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
									</li><li class="listitem">
										Type <span class="strong strong"><strong>Kube Descheduler Operator</strong></span> into the filter box.
									</li><li class="listitem">
										Select the <span class="strong strong"><strong>Kube Descheduler Operator</strong></span> and click <span class="strong strong"><strong>Install</strong></span>.
									</li><li class="listitem">
										On the <span class="strong strong"><strong>Install Operator</strong></span> page, select <span class="strong strong"><strong>A specific namespace on the cluster</strong></span>. Select <span class="strong strong"><strong>openshift-kube-descheduler-operator</strong></span> from the drop-down menu.
									</li><li class="listitem">
										Adjust the values for the <span class="strong strong"><strong>Update Channel</strong></span> and <span class="strong strong"><strong>Approval Strategy</strong></span> to the desired values.
									</li><li class="listitem">
										Click <span class="strong strong"><strong>Install</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Create a descheduler instance.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										From the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page, click the <span class="strong strong"><strong>Kube Descheduler Operator</strong></span>.
									</li><li class="listitem">
										Select the <span class="strong strong"><strong>Kube Descheduler</strong></span> tab and click <span class="strong strong"><strong>Create KubeDescheduler</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Edit the settings as necessary.
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												To evict pods instead of simulating the evictions, change the <span class="strong strong"><strong>Mode</strong></span> field to <span class="strong strong"><strong>Automatic</strong></span>.
											</li><li class="listitem"><p class="simpara">
												Expand the <span class="strong strong"><strong>Profiles</strong></span> section and select <code class="literal">DevPreviewLongLifecycle</code>. The <code class="literal">AffinityAndTaints</code> profile is enabled by default.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													The only profile currently available for OpenShift Virtualization is <code class="literal">DevPreviewLongLifecycle</code>.
												</p></div></div></li></ol></div></li></ol></div></li></ol></div><p>
						You can also configure the profiles and settings for the descheduler later using the OpenShift CLI (<code class="literal">oc</code>).
					</p></section><section class="section" id="virt-enabling-descheduler-evictions_virt-enabling-descheduler-evictions"><div class="titlepage"><div><div><h4 class="title">10.15.13.3. Enabling descheduler evictions on a virtual machine (VM)</h4></div></div></div><p>
						After the descheduler is installed, you can enable descheduler evictions on your VM by adding an annotation to the <code class="literal">VirtualMachine</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the descheduler in the OpenShift Container Platform web console or OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								Ensure that the VM is not running.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Before starting the VM, add the <code class="literal">descheduler.alpha.kubernetes.io/evict</code> annotation to the <code class="literal">VirtualMachine</code> CR:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
spec:
  template:
    metadata:
      annotations:
        descheduler.alpha.kubernetes.io/evict: "true"</pre></li><li class="listitem"><p class="simpara">
								If you did not already set the <code class="literal">DevPreviewLongLifecycle</code> profile in the web console during installation, specify the <code class="literal">DevPreviewLongLifecycle</code> in the <code class="literal">spec.profile</code> section of the <code class="literal">KubeDescheduler</code> object:
							</p><pre class="programlisting language-yaml">apiVersion: operator.openshift.io/v1
kind: KubeDescheduler
metadata:
  name: cluster
  namespace: openshift-kube-descheduler-operator
spec:
  deschedulingIntervalSeconds: 3600
  profiles:
  - DevPreviewLongLifecycle
  mode: Predictive <span id="CO46-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO46-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										By default, the descheduler does not evict pods. To evict pods, set <code class="literal">mode</code> to <code class="literal">Automatic</code>.
									</div></dd></dl></div></li></ol></div><p>
						The descheduler is now enabled on the VM.
					</p></section><section class="section _additional-resources" id="additional-resources_enabling-descheduler-evictions"><div class="titlepage"><div><div><h4 class="title">10.15.13.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-descheduler">Evicting pods using the descheduler</a>
							</li></ul></div></section></section></section><section class="section" id="importing-virtual-machines"><div class="titlepage"><div><div><h2 class="title">10.16. Importing virtual machines</h2></div></div></div><section class="section" id="virt-tls-certificates-for-dv-imports"><div class="titlepage"><div><div><h3 class="title">10.16.1. TLS certificates for data volume imports</h3></div></div></div><section class="section" id="virt-adding-tls-certificates-for-authenticating-dv-imports_virt-tls-certificates-for-dv-imports"><div class="titlepage"><div><div><h4 class="title">10.16.1.1. Adding TLS certificates for authenticating data volume imports</h4></div></div></div><p>
						TLS certificates for registry or HTTPS endpoints must be added to a config map to import data from these sources. This config map must be present in the namespace of the destination data volume.
					</p><p>
						Create the config map by referencing the relative file path for the TLS certificate.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Ensure you are in the correct namespace. The config map can only be referenced by data volumes if it is in the same namespace.
							</p><pre class="programlisting language-terminal">$ oc get ns</pre></li><li class="listitem"><p class="simpara">
								Create the config map:
							</p><pre class="programlisting language-terminal">$ oc create configmap &lt;configmap-name&gt; --from-file=&lt;/path/to/file/ca.pem&gt;</pre></li></ol></div></section><section class="section" id="virt-example-configmap-tls-certificate_virt-tls-certificates-for-dv-imports"><div class="titlepage"><div><div><h4 class="title">10.16.1.2. Example: Config map created from a TLS certificate</h4></div></div></div><p>
						The following example is of a config map created from <code class="literal">ca.pem</code> TLS certificate.
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: tls-certs
data:
  ca.pem: |
    -----BEGIN CERTIFICATE-----
    ... &lt;base64 encoded cert&gt; ...
    -----END CERTIFICATE-----</pre></section></section><section class="section" id="virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h3 class="title">10.16.2. Importing virtual machine images with data volumes</h3></div></div></div><p>
					You can import an existing virtual machine image into your OpenShift Container Platform cluster storage. Using the Containerized Data Importer (CDI), you can import the image into a persistent volume claim (PVC) by using a data volume. OpenShift Virtualization uses one or more data volumes to automate the data import and the creation of an underlying PVC. You can attach a data volume to a virtual machine for persistent storage.
				</p><p>
					The virtual machine image can be hosted at an HTTP or HTTPS endpoint, or built into a container disk and stored in a container registry.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						When you import a disk image into a PVC, the disk image is expanded to use the full storage capacity that is requested in the PVC. To use this space, the disk partitions and file system(s) in the virtual machine might need to be expanded.
					</p><p>
						The resizing procedure varies based on the operating system installed on the virtual machine. See the operating system documentation for details.
					</p></div></div><section class="section" id="prerequisites-4"><div class="titlepage"><div><div><h4 class="title">10.16.2.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If the endpoint requires a TLS certificate, the certificate must be <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-adding-tls-certificates-for-authenticating-dv-imports_virt-tls-certificates-for-dv-imports">included in a config map</a> in the same namespace as the data volume and referenced in the data volume configuration.
							</li><li class="listitem"><p class="simpara">
								To import a container disk:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										You might need to <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-preparing-container-disk-for-vms_virt-using-container-disks-with-vms">prepare a container disk from a virtual machine image</a> and store it in your container registry before importing it.
									</li><li class="listitem">
										If the container registry does not have TLS, you must <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-disabling-tls-for-registry_virt-using-container-disks-with-vms">add the registry to the <code class="literal">insecureRegistries</code> field of the <code class="literal">HyperConverged</code> custom resource</a> before you can import a container disk from it.
									</li></ul></div></li><li class="listitem">
								You might need to <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-defining-storageclass_virt-preparing-cdi-scratch-space">define a storage class or prepare CDI scratch space</a> for this operation to complete successfully.
							</li></ul></div><p>
						If you intend to import a virtual machine image into block storage with a data volume, you must have an available <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-local-block-pv_virt-importing-virtual-machine-images-datavolumes">local block persistent volume</a>.
					</p></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.16.2.2. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196998967632" scope="col">Content types</th><th align="left" valign="top" id="idm140196998966544" scope="col">HTTP</th><th align="left" valign="top" id="idm140196998965456" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196998964368" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196998963280" scope="col">Registry</th><th align="left" valign="top" id="idm140196998962192" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196998967632"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196998966544"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196998965456"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196998964368"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196998963280"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196998962192"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196998967632"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196998966544"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196998965456"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196998964368"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196998963280"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196998962192"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							CDI now uses the OpenShift Container Platform <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#enable-cluster-wide-proxy">cluster-wide proxy configuration</a>.
						</p></div></div></section><section class="section" id="virt-about-datavolumes_virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.16.2.3. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="local-block-persistent-volumes"><div class="titlepage"><div><div><h4 class="title">10.16.2.4. Local block persistent volumes</h4></div></div></div><p>
						If you intend to import a virtual machine image into block storage with a data volume, you must have an available local block persistent volume.
					</p><section class="section" id="virt-about-block-pvs_virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h5 class="title">10.16.2.4.1. About block persistent volumes</h5></div></div></div><p>
							A block persistent volume (PV) is a PV that is backed by a raw block device. These volumes do not have a file system and can provide performance benefits for virtual machines by reducing overhead.
						</p><p>
							Raw block volumes are provisioned by specifying <code class="literal">volumeMode: Block</code> in the PV and persistent volume claim (PVC) specification.
						</p></section><section class="section" id="virt-creating-local-block-pv_virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h5 class="title">10.16.2.4.2. Creating a local block persistent volume</h5></div></div></div><p>
							If you intend to import a virtual machine image into block storage with a data volume, you must have an available local block persistent volume.
						</p><p>
							Create a local block persistent volume (PV) on a node by populating a file and mounting it as a loop device. You can then reference this loop device in a PV manifest as a <code class="literal">Block</code> volume and use it as a block device for a virtual machine image.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Log in as <code class="literal">root</code> to the node on which to create the local PV. This procedure uses <code class="literal">node01</code> for its examples.
								</li><li class="listitem"><p class="simpara">
									Create a file and populate it with null characters so that it can be used as a block device. The following example creates a file <code class="literal">loop10</code> with a size of 2Gb (20 100Mb blocks):
								</p><pre class="programlisting language-terminal">$ dd if=/dev/zero of=&lt;loop10&gt; bs=100M count=20</pre></li><li class="listitem"><p class="simpara">
									Mount the <code class="literal">loop10</code> file as a loop device.
								</p><pre class="programlisting language-terminal">$ losetup &lt;/dev/loop10&gt;d3 &lt;loop10&gt; <span id="CO47-1"><!--Empty--></span><span class="callout">1</span> <span id="CO47-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO47-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											File path where the loop device is mounted.
										</div></dd><dt><a href="#CO47-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The file created in the previous step to be mounted as the loop device.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create a <code class="literal">PersistentVolume</code> manifest that references the mounted loop device.
								</p><pre class="programlisting language-yaml">kind: PersistentVolume
apiVersion: v1
metadata:
  name: &lt;local-block-pv10&gt;
  annotations:
spec:
  local:
    path: &lt;/dev/loop10&gt; <span id="CO48-1"><!--Empty--></span><span class="callout">1</span>
  capacity:
    storage: &lt;2Gi&gt;
  volumeMode: Block <span id="CO48-2"><!--Empty--></span><span class="callout">2</span>
  storageClassName: local <span id="CO48-3"><!--Empty--></span><span class="callout">3</span>
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Delete
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - &lt;node01&gt; <span id="CO48-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO48-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The path of the loop device on the node.
										</div></dd><dt><a href="#CO48-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Specifies it is a block PV.
										</div></dd><dt><a href="#CO48-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											Optional: Set a storage class for the PV. If you omit it, the cluster default is used.
										</div></dd><dt><a href="#CO48-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The node on which the block device was mounted.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create the block PV.
								</p><pre class="programlisting language-terminal"># oc create -f &lt;local-block-pv10.yaml&gt;<span id="CO49-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO49-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The file name of the persistent volume created in the previous step.
										</div></dd></dl></div></li></ol></div></section></section><section class="section" id="virt-importing-vm-datavolume_virt-importing-virtual-machine-images-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.16.2.5. Importing a virtual machine image into storage by using a data volume</h4></div></div></div><p>
						You can import a virtual machine image into storage by using a data volume.
					</p><p>
						The virtual machine image can be hosted at an HTTP or HTTPS endpoint or the image can be built into a container disk and stored in a container registry.
					</p><p>
						You specify the data source for the image in a <code class="literal">VirtualMachine</code> configuration file. When the virtual machine is created, the data volume with the virtual machine image is imported into storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To import a virtual machine image you must have the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										A virtual machine disk image in RAW, ISO, or QCOW2 format, optionally compressed by using <code class="literal">xz</code> or <code class="literal">gz</code>.
									</li><li class="listitem">
										An HTTP or HTTPS endpoint where the image is hosted, along with any authentication credentials needed to access the data source.
									</li></ul></div></li><li class="listitem">
								To import a container disk, you must have a virtual machine image built into a container disk and stored in a container registry, along with any authentication credentials needed to access the data source.
							</li><li class="listitem">
								If the virtual machine must communicate with servers that use self-signed certificates or certificates not signed by the system CA bundle, you must create a config map in the same namespace as the data volume.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If your data source requires authentication, create a <code class="literal">Secret</code> manifest, specifying the data source credentials, and save it as <code class="literal">endpoint-secret.yaml</code>:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: endpoint-secret <span id="CO50-1"><!--Empty--></span><span class="callout">1</span>
  labels:
    app: containerized-data-importer
type: Opaque
data:
  accessKeyId: "" <span id="CO50-2"><!--Empty--></span><span class="callout">2</span>
  secretKey:   "" <span id="CO50-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO50-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the name of the <code class="literal">Secret</code>.
									</div></dd><dt><a href="#CO50-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specify the Base64-encoded key ID or user name.
									</div></dd><dt><a href="#CO50-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Specify the Base64-encoded secret key or password.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">Secret</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -f endpoint-secret.yaml</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">VirtualMachine</code> manifest, specifying the data source for the virtual machine image you want to import, and save it as <code class="literal">vm-fedora-datavolume.yaml</code>:
							</p><div class="informalexample"><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  creationTimestamp: null
  labels:
    kubevirt.io/vm: vm-fedora-datavolume
  name: vm-fedora-datavolume <span id="CO51-1"><!--Empty--></span><span class="callout">1</span>
spec:
  dataVolumeTemplates:
  - metadata:
      creationTimestamp: null
      name: fedora-dv <span id="CO51-2"><!--Empty--></span><span class="callout">2</span>
    spec:
      storage:
        volumeMode: Block <span id="CO51-3"><!--Empty--></span><span class="callout">3</span>
        resources:
          requests:
            storage: 10Gi
        storageClassName: local
      source: <span id="CO51-4"><!--Empty--></span><span class="callout">4</span>
        http:
          url: "https://mirror.arizona.edu/fedora/linux/releases/35/Cloud/x86_64/images/Fedora-Cloud-Base-35-1.2.x86_64.qcow2" <span id="CO51-5"><!--Empty--></span><span class="callout">5</span>
          secretRef: endpoint-secret <span id="CO51-6"><!--Empty--></span><span class="callout">6</span>
          certConfigMap: "" <span id="CO51-7"><!--Empty--></span><span class="callout">7</span>
        # To use a registry source, uncomment the following lines and delete the preceding HTTP source block
        # registry:
          # url: "docker://kubevirt/fedora-cloud-container-disk-demo:latest"
          # secretRef: registry-secret <span id="CO51-8"><!--Empty--></span><span class="callout">8</span>
          # certConfigMap: "" <span id="CO51-9"><!--Empty--></span><span class="callout">9</span>
    status: {}
  running: true
  template:
    metadata:
      creationTimestamp: null
      labels:
        kubevirt.io/vm: vm-fedora-datavolume
    spec:
      domain:
        devices:
          disks:
          - disk:
              bus: virtio
            name: datavolumedisk1
        machine:
          type: ""
        resources:
          requests:
            memory: 1.5Gi
      terminationGracePeriodSeconds: 180
      volumes:
      - dataVolume:
          name: fedora-dv
        name: datavolumedisk1
status: {}</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO51-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the name of the virtual machine.
									</div></dd><dt><a href="#CO51-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specify the name of the data volume.
									</div></dd><dt><a href="#CO51-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The volume and access mode are detected automatically for known storage provisioners. Alternatively, you can specify <code class="literal">Block</code>.
									</div></dd><dt><a href="#CO51-4"><span class="callout">4</span></a> <a href="#CO51-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Specify either the URL or the registry endpoint of the virtual machine image you want to import using the comment block. For example, if you want to use a registry source, you can comment out or delete the HTTP or HTTPS source block. Ensure that you replace the example values shown here with your own values.
									</div></dd><dt><a href="#CO51-6"><span class="callout">6</span></a> <a href="#CO51-8"><span class="callout">8</span></a> </dt><dd><div class="para">
										Specify the <code class="literal">Secret</code> name if you created a <code class="literal">Secret</code> for the data source.
									</div></dd><dt><a href="#CO51-7"><span class="callout">7</span></a> <a href="#CO51-9"><span class="callout">9</span></a> </dt><dd><div class="para">
										Optional: Specify a CA certificate config map.
									</div></dd></dl></div></div></li><li class="listitem"><p class="simpara">
								Create the virtual machine:
							</p><pre class="programlisting language-terminal">$ oc create -f vm-fedora-datavolume.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The <code class="literal">oc create</code> command creates the data volume and the virtual machine. The CDI controller creates an underlying PVC with the correct annotation and the import process begins. When the import is complete, the data volume status changes to <code class="literal">Succeeded</code>. You can start the virtual machine.
								</p><p>
									Data volume provisioning happens in the background, so there is no need to monitor the process.
								</p></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								The importer pod downloads the virtual machine image or container disk from the specified URL and stores it on the provisioned PV. View the status of the importer pod by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get pods</pre></li><li class="listitem"><p class="simpara">
								Monitor the data volume until its status is <code class="literal">Succeeded</code> by running the following command:
							</p><pre class="programlisting language-terminal">$ oc describe dv fedora-dv <span id="CO52-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO52-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the data volume name that you defined in the <code class="literal">VirtualMachine</code> manifest.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Verify that provisioning is complete and that the virtual machine has started by accessing its serial console:
							</p><pre class="programlisting language-terminal">$ virtctl console vm-fedora-datavolume</pre></li></ol></div></section><section class="section _additional-resources" id="virt-importing-virtual-machine-images-datavolumes_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.16.2.6. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li></ul></div></section></section></section><section class="section" id="cloning-virtual-machines"><div class="titlepage"><div><div><h2 class="title">10.17. Cloning virtual machines</h2></div></div></div><section class="section" id="virt-enabling-user-permissions-to-clone-datavolumes"><div class="titlepage"><div><div><h3 class="title">10.17.1. Enabling user permissions to clone data volumes across namespaces</h3></div></div></div><p>
					The isolating nature of namespaces means that users cannot by default clone resources between namespaces.
				</p><p>
					To enable a user to clone a virtual machine to another namespace, a user with the <code class="literal">cluster-admin</code> role must create a new cluster role. Bind this cluster role to a user to enable them to clone virtual machines to the destination namespace.
				</p><section class="section" id="prerequisites-5"><div class="titlepage"><div><div><h4 class="title">10.17.1.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only a user with the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#default-roles_using-rbac"><code class="literal">cluster-admin</code></a> role can create cluster roles.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-enabling-user-permissions-to-clone-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.17.1.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-creating-rbac-cloning-dvs_virt-enabling-user-permissions-to-clone-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.17.1.3. Creating RBAC resources for cloning data volumes</h4></div></div></div><p>
						Create a new cluster role that enables permissions for all actions for the <code class="literal">datavolumes</code> resource.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a <code class="literal">ClusterRole</code> manifest:
							</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: &lt;datavolume-cloner&gt; <span id="CO53-1"><!--Empty--></span><span class="callout">1</span>
rules:
- apiGroups: ["cdi.kubevirt.io"]
  resources: ["datavolumes/source"]
  verbs: ["*"]</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO53-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Unique name for the cluster role.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the cluster role in the cluster:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;datavolume-cloner.yaml&gt; <span id="CO54-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO54-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The file name of the <code class="literal">ClusterRole</code> manifest created in the previous step.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">RoleBinding</code> manifest that applies to both the source and destination namespaces and references the cluster role created in the previous step.
							</p><pre class="programlisting language-yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: &lt;allow-clone-to-user&gt; <span id="CO55-1"><!--Empty--></span><span class="callout">1</span>
  namespace: &lt;Source namespace&gt; <span id="CO55-2"><!--Empty--></span><span class="callout">2</span>
subjects:
- kind: ServiceAccount
  name: default
  namespace: &lt;Destination namespace&gt; <span id="CO55-3"><!--Empty--></span><span class="callout">3</span>
roleRef:
  kind: ClusterRole
  name: datavolume-cloner <span id="CO55-4"><!--Empty--></span><span class="callout">4</span>
  apiGroup: rbac.authorization.k8s.io</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO55-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Unique name for the role binding.
									</div></dd><dt><a href="#CO55-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace for the source data volume.
									</div></dd><dt><a href="#CO55-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The namespace to which the data volume is cloned.
									</div></dd><dt><a href="#CO55-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The name of the cluster role created in the previous step.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the role binding in the cluster:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;datavolume-cloner.yaml&gt; <span id="CO56-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO56-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The file name of the <code class="literal">RoleBinding</code> manifest created in the previous step.
									</div></dd></dl></div></li></ol></div></section></section><section class="section" id="virt-cloning-vm-disk-into-new-datavolume"><div class="titlepage"><div><div><h3 class="title">10.17.2. Cloning a virtual machine disk into a new data volume</h3></div></div></div><p>
					You can clone the persistent volume claim (PVC) of a virtual machine disk into a new data volume by referencing the source PVC in your data volume configuration file.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Cloning operations between different volume modes are supported, such as cloning from a persistent volume (PV) with <code class="literal">volumeMode: Block</code> to a PV with <code class="literal">volumeMode: Filesystem</code>.
					</p><p>
						However, you can only clone between different volume modes if they are of the <code class="literal">contentType: kubevirt</code>.
					</p></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					When you enable preallocation globally, or for a single data volume, the Containerized Data Importer (CDI) preallocates disk space during cloning. Preallocation enhances write performance. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Using preallocation for data volumes</a>.
				</p></div></div><section class="section" id="prerequisites-6"><div class="titlepage"><div><div><h4 class="title">10.17.2.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Users need <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-enabling-user-permissions-to-clone-datavolumes">additional permissions</a> to clone the PVC of a virtual machine disk into another namespace.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-cloning-vm-disk-into-new-datavolume"><div class="titlepage"><div><div><h4 class="title">10.17.2.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-cloning-pvc-of-vm-disk-into-new-datavolume_virt-cloning-vm-disk-into-new-datavolume"><div class="titlepage"><div><div><h4 class="title">10.17.2.3. Cloning the persistent volume claim of a virtual machine disk into a new data volume</h4></div></div></div><p>
						You can clone a persistent volume claim (PVC) of an existing virtual machine disk into a new data volume. The new data volume can then be used for a new virtual machine.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When a data volume is created independently of a virtual machine, the lifecycle of the data volume is independent of the virtual machine. If the virtual machine is deleted, neither the data volume nor its associated PVC is deleted.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Determine the PVC of an existing virtual machine disk to use. You must power down the virtual machine that is associated with the PVC before you can clone it.
							</li><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Examine the virtual machine disk you want to clone to identify the name and namespace of the associated PVC.
							</li><li class="listitem"><p class="simpara">
								Create a YAML file for a data volume that specifies the name of the new data volume, the name and namespace of the source PVC, and the size of the new data volume.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;cloner-datavolume&gt; <span id="CO57-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc:
      namespace: "&lt;source-namespace&gt;" <span id="CO57-2"><!--Empty--></span><span class="callout">2</span>
      name: "&lt;my-favorite-vm-disk&gt;" <span id="CO57-3"><!--Empty--></span><span class="callout">3</span>
  pvc:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: &lt;2Gi&gt; <span id="CO57-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO57-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the new data volume.
									</div></dd><dt><a href="#CO57-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the source PVC exists.
									</div></dd><dt><a href="#CO57-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The name of the source PVC.
									</div></dd><dt><a href="#CO57-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The size of the new data volume. You must allocate enough space, or the cloning operation fails. The size must be the same as or larger than the source PVC.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Start cloning the PVC by creating the data volume:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;cloner-datavolume&gt;.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Data volumes prevent a virtual machine from starting before the PVC is prepared, so you can create a virtual machine that references the new data volume while the PVC clones.
								</p></div></div></li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-cloning-vm-disk-into-new-datavolume"><div class="titlepage"><div><div><h4 class="title">10.17.2.4. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196960113600" scope="col">Content types</th><th align="left" valign="top" id="idm140196960112512" scope="col">HTTP</th><th align="left" valign="top" id="idm140196960111424" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196960110336" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196960109248" scope="col">Registry</th><th align="left" valign="top" id="idm140196960108160" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196960113600"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196960112512"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196960111424"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196960110336"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196960109248"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196960108160"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196960113600"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196960112512"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196960111424"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196960110336"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196960109248"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196960108160"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section></section><section class="section" id="virt-cloning-vm-using-datavolumetemplate"><div class="titlepage"><div><div><h3 class="title">10.17.3. Cloning a virtual machine by using a data volume template</h3></div></div></div><p>
					You can create a new virtual machine by cloning the persistent volume claim (PVC) of an existing VM. By including a <code class="literal">dataVolumeTemplate</code> in your virtual machine configuration file, you create a new data volume from the original PVC.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Cloning operations between different volume modes are supported, such as cloning from a persistent volume (PV) with <code class="literal">volumeMode: Block</code> to a PV with <code class="literal">volumeMode: Filesystem</code>.
					</p><p>
						However, you can only clone between different volume modes if they are of the <code class="literal">contentType: kubevirt</code>.
					</p></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					When you enable preallocation globally, or for a single data volume, the Containerized Data Importer (CDI) preallocates disk space during cloning. Preallocation enhances write performance. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Using preallocation for data volumes</a>.
				</p></div></div><section class="section" id="prerequisites-7"><div class="titlepage"><div><div><h4 class="title">10.17.3.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Users need <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-enabling-user-permissions-to-clone-datavolumes">additional permissions</a> to clone the PVC of a virtual machine disk into another namespace.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-cloning-vm-using-datavolumetemplate"><div class="titlepage"><div><div><h4 class="title">10.17.3.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-creating-new-vm-from-cloned-pvc-using-datavolumetemplate_virt-cloning-vm-using-datavolumetemplate"><div class="titlepage"><div><div><h4 class="title">10.17.3.3. Creating a new virtual machine from a cloned persistent volume claim by using a data volume template</h4></div></div></div><p>
						You can create a virtual machine that clones the persistent volume claim (PVC) of an existing virtual machine into a data volume. Reference a <code class="literal">dataVolumeTemplate</code> in the virtual machine manifest and the <code class="literal">source</code> PVC is cloned to a data volume, which is then automatically used for the creation of the virtual machine.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When a data volume is created as part of the data volume template of a virtual machine, the lifecycle of the data volume is then dependent on the virtual machine. If the virtual machine is deleted, the data volume and associated PVC are also deleted.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Determine the PVC of an existing virtual machine disk to use. You must power down the virtual machine that is associated with the PVC before you can clone it.
							</li><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Examine the virtual machine you want to clone to identify the name and namespace of the associated PVC.
							</li><li class="listitem"><p class="simpara">
								Create a YAML file for a <code class="literal">VirtualMachine</code> object. The following virtual machine example clones <code class="literal">my-favorite-vm-disk</code>, which is located in the <code class="literal">source-namespace</code> namespace. The <code class="literal">2Gi</code> data volume called <code class="literal">favorite-clone</code> is created from <code class="literal">my-favorite-vm-disk</code>.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    kubevirt.io/vm: vm-dv-clone
  name: vm-dv-clone <span id="CO58-1"><!--Empty--></span><span class="callout">1</span>
spec:
  running: false
  template:
    metadata:
      labels:
        kubevirt.io/vm: vm-dv-clone
    spec:
      domain:
        devices:
          disks:
          - disk:
              bus: virtio
            name: root-disk
        resources:
          requests:
            memory: 64M
      volumes:
      - dataVolume:
          name: favorite-clone
        name: root-disk
  dataVolumeTemplates:
  - metadata:
      name: favorite-clone
    spec:
      storage:
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 2Gi
      source:
        pvc:
          namespace: "source-namespace"
          name: "my-favorite-vm-disk"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO58-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The virtual machine to create.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the virtual machine with the PVC-cloned data volume:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;vm-clone-datavolumetemplate&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-cloning-vm-using-datavolumetemplate"><div class="titlepage"><div><div><h4 class="title">10.17.3.4. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196957020480" scope="col">Content types</th><th align="left" valign="top" id="idm140196957019392" scope="col">HTTP</th><th align="left" valign="top" id="idm140196957018304" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196957017216" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196957016128" scope="col">Registry</th><th align="left" valign="top" id="idm140196957015040" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196957020480"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196957019392"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957018304"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957017216"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957016128"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957015040"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196957020480"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196957019392"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957018304"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957017216"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957016128"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957015040"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section></section><section class="section" id="virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h3 class="title">10.17.4. Cloning a virtual machine disk into a new block storage persistent volume claim</h3></div></div></div><p>
					You can clone the persistent volume claim (PVC) of a virtual machine disk into a new block PVC by referencing the source PVC in your clone target data volume configuration file.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Cloning operations between different volume modes are supported, such as cloning from a persistent volume (PV) with <code class="literal">volumeMode: Block</code> to a PV with <code class="literal">volumeMode: Filesystem</code>.
					</p><p>
						However, you can only clone between different volume modes if they are of the <code class="literal">contentType: kubevirt</code>.
					</p></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					When you enable preallocation globally, or for a single data volume, the Containerized Data Importer (CDI) preallocates disk space during cloning. Preallocation enhances write performance. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Using preallocation for data volumes</a>.
				</p></div></div><section class="section" id="prerequisites-8"><div class="titlepage"><div><div><h4 class="title">10.17.4.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Users need <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-enabling-user-permissions-to-clone-datavolumes">additional permissions</a> to clone the PVC of a virtual machine disk into another namespace.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h4 class="title">10.17.4.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-about-block-pvs_virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h4 class="title">10.17.4.3. About block persistent volumes</h4></div></div></div><p>
						A block persistent volume (PV) is a PV that is backed by a raw block device. These volumes do not have a file system and can provide performance benefits for virtual machines by reducing overhead.
					</p><p>
						Raw block volumes are provisioned by specifying <code class="literal">volumeMode: Block</code> in the PV and persistent volume claim (PVC) specification.
					</p></section><section class="section" id="virt-creating-local-block-pv_virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h4 class="title">10.17.4.4. Creating a local block persistent volume</h4></div></div></div><p>
						If you intend to import a virtual machine image into block storage with a data volume, you must have an available local block persistent volume.
					</p><p>
						Create a local block persistent volume (PV) on a node by populating a file and mounting it as a loop device. You can then reference this loop device in a PV manifest as a <code class="literal">Block</code> volume and use it as a block device for a virtual machine image.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in as <code class="literal">root</code> to the node on which to create the local PV. This procedure uses <code class="literal">node01</code> for its examples.
							</li><li class="listitem"><p class="simpara">
								Create a file and populate it with null characters so that it can be used as a block device. The following example creates a file <code class="literal">loop10</code> with a size of 2Gb (20 100Mb blocks):
							</p><pre class="programlisting language-terminal">$ dd if=/dev/zero of=&lt;loop10&gt; bs=100M count=20</pre></li><li class="listitem"><p class="simpara">
								Mount the <code class="literal">loop10</code> file as a loop device.
							</p><pre class="programlisting language-terminal">$ losetup &lt;/dev/loop10&gt;d3 &lt;loop10&gt; <span id="CO59-1"><!--Empty--></span><span class="callout">1</span> <span id="CO59-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO59-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										File path where the loop device is mounted.
									</div></dd><dt><a href="#CO59-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The file created in the previous step to be mounted as the loop device.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">PersistentVolume</code> manifest that references the mounted loop device.
							</p><pre class="programlisting language-yaml">kind: PersistentVolume
apiVersion: v1
metadata:
  name: &lt;local-block-pv10&gt;
  annotations:
spec:
  local:
    path: &lt;/dev/loop10&gt; <span id="CO60-1"><!--Empty--></span><span class="callout">1</span>
  capacity:
    storage: &lt;2Gi&gt;
  volumeMode: Block <span id="CO60-2"><!--Empty--></span><span class="callout">2</span>
  storageClassName: local <span id="CO60-3"><!--Empty--></span><span class="callout">3</span>
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Delete
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - &lt;node01&gt; <span id="CO60-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO60-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The path of the loop device on the node.
									</div></dd><dt><a href="#CO60-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specifies it is a block PV.
									</div></dd><dt><a href="#CO60-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: Set a storage class for the PV. If you omit it, the cluster default is used.
									</div></dd><dt><a href="#CO60-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The node on which the block device was mounted.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the block PV.
							</p><pre class="programlisting language-terminal"># oc create -f &lt;local-block-pv10.yaml&gt;<span id="CO61-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO61-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The file name of the persistent volume created in the previous step.
									</div></dd></dl></div></li></ol></div></section><section class="section" id="virt-cloning-pvc-of-vm-disk-into-new-datavolume_virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h4 class="title">10.17.4.5. Cloning the persistent volume claim of a virtual machine disk into a new data volume</h4></div></div></div><p>
						You can clone a persistent volume claim (PVC) of an existing virtual machine disk into a new data volume. The new data volume can then be used for a new virtual machine.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When a data volume is created independently of a virtual machine, the lifecycle of the data volume is independent of the virtual machine. If the virtual machine is deleted, neither the data volume nor its associated PVC is deleted.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Determine the PVC of an existing virtual machine disk to use. You must power down the virtual machine that is associated with the PVC before you can clone it.
							</li><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								At least one available block persistent volume (PV) that is the same size as or larger than the source PVC.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Examine the virtual machine disk you want to clone to identify the name and namespace of the associated PVC.
							</li><li class="listitem"><p class="simpara">
								Create a YAML file for a data volume that specifies the name of the new data volume, the name and namespace of the source PVC, <code class="literal">volumeMode: Block</code> so that an available block PV is used, and the size of the new data volume.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;cloner-datavolume&gt; <span id="CO62-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc:
      namespace: "&lt;source-namespace&gt;" <span id="CO62-2"><!--Empty--></span><span class="callout">2</span>
      name: "&lt;my-favorite-vm-disk&gt;" <span id="CO62-3"><!--Empty--></span><span class="callout">3</span>
  pvc:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: &lt;2Gi&gt; <span id="CO62-4"><!--Empty--></span><span class="callout">4</span>
    volumeMode: Block <span id="CO62-5"><!--Empty--></span><span class="callout">5</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO62-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the new data volume.
									</div></dd><dt><a href="#CO62-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the source PVC exists.
									</div></dd><dt><a href="#CO62-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The name of the source PVC.
									</div></dd><dt><a href="#CO62-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The size of the new data volume. You must allocate enough space, or the cloning operation fails. The size must be the same as or larger than the source PVC.
									</div></dd><dt><a href="#CO62-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Specifies that the destination is a block PV
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Start cloning the PVC by creating the data volume:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;cloner-datavolume&gt;.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Data volumes prevent a virtual machine from starting before the PVC is prepared, so you can create a virtual machine that references the new data volume while the PVC clones.
								</p></div></div></li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-cloning-vm-disk-into-new-block-storage-pvc"><div class="titlepage"><div><div><h4 class="title">10.17.4.6. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196956187024" scope="col">Content types</th><th align="left" valign="top" id="idm140196956185936" scope="col">HTTP</th><th align="left" valign="top" id="idm140196956184848" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196959877840" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196959876752" scope="col">Registry</th><th align="left" valign="top" id="idm140196959875664" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196956187024"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956185936"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956184848"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196959877840"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196959876752"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196959875664"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196956187024"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956185936"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956184848"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196959877840"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196959876752"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196959875664"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section></section></section><section class="section" id="virtual-machine-networking"><div class="titlepage"><div><div><h2 class="title">10.18. Virtual machine networking</h2></div></div></div><section class="section" id="virt-using-the-default-pod-network-with-virt"><div class="titlepage"><div><div><h3 class="title">10.18.1. Configuring the virtual machine for the default pod network</h3></div></div></div><p>
					You can connect a virtual machine to the default internal pod network by configuring its network interface to use the <code class="literal">masquerade</code> binding mode.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Traffic on the virtual Network Interface Cards (vNICs) that are attached to the default pod network is interrupted during live migration.
					</p></div></div><section class="section" id="virt-configuring-masquerade-mode-cli_virt-using-the-default-pod-network-with-virt"><div class="titlepage"><div><div><h4 class="title">10.18.1.1. Configuring masquerade mode from the command line</h4></div></div></div><p>
						You can use masquerade mode to hide a virtual machine’s outgoing traffic behind the pod IP address. Masquerade mode uses Network Address Translation (NAT) to connect virtual machines to the pod network backend through a Linux bridge.
					</p><p>
						Enable masquerade mode and allow traffic to enter the virtual machine by editing your virtual machine configuration file.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The virtual machine must be configured to use DHCP to acquire IPv4 addresses. The examples below are configured to use DHCP.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">interfaces</code> spec of your virtual machine configuration file:
							</p><pre class="programlisting language-yaml">kind: VirtualMachine
spec:
  domain:
    devices:
      interfaces:
        - name: default
          masquerade: {} <span id="CO63-1"><!--Empty--></span><span class="callout">1</span>
          ports: <span id="CO63-2"><!--Empty--></span><span class="callout">2</span>
            - port: 80
  networks:
  - name: default
    pod: {}</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO63-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Connect using masquerade mode.
									</div></dd><dt><a href="#CO63-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Optional: List the ports that you want to expose from the virtual machine, each specified by the <code class="literal">port</code> field. The <code class="literal">port</code> value must be a number between 0 and 65536. When the <code class="literal">ports</code> array is not used, all ports in the valid range are open to incoming traffic. In this example, incoming traffic is allowed on port <code class="literal">80</code>.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Ports 49152 and 49153 are reserved for use by the libvirt platform and all other incoming traffic to these ports is dropped.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Create the virtual machine:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;vm-name&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-configuring-masquerade-mode-dual-stack_virt-using-the-default-pod-network-with-virt"><div class="titlepage"><div><div><h4 class="title">10.18.1.2. Configuring masquerade mode with dual-stack (IPv4 and IPv6)</h4></div></div></div><p>
						You can configure a new virtual machine (VM) to use both IPv6 and IPv4 on the default pod network by using cloud-init.
					</p><p>
						The <code class="literal">Network.pod.vmIPv6NetworkCIDR</code> field in the virtual machine instance configuration determines the static IPv6 address of the VM and the gateway IP address. These are used by the virt-launcher pod to route IPv6 traffic to the virtual machine and are not used externally. The <code class="literal">Network.pod.vmIPv6NetworkCIDR</code> field specifies an IPv6 address block in Classless Inter-Domain Routing (CIDR) notation. The default value is <code class="literal">fd10:0:2::2/120</code>. You can edit this value based on your network requirements.
					</p><p>
						When the virtual machine is running, incoming and outgoing traffic for the virtual machine is routed to both the IPv4 address and the unique IPv6 address of the virt-launcher pod. The virt-launcher pod then routes the IPv4 traffic to the DHCP address of the virtual machine, and the IPv6 traffic to the statically set IPv6 address of the virtual machine.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The OpenShift Container Platform cluster must use the OVN-Kubernetes Container Network Interface (CNI) network plugin configured for dual-stack.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In a new virtual machine configuration, include an interface with <code class="literal">masquerade</code> and configure the IPv6 address and default gateway by using cloud-init.
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: example-vm-ipv6
# ...
          interfaces:
            - name: default
              masquerade: {} <span id="CO64-1"><!--Empty--></span><span class="callout">1</span>
              ports:
                - port: 80 <span id="CO64-2"><!--Empty--></span><span class="callout">2</span>
      networks:
      - name: default
        pod: {}
      volumes:
      - cloudInitNoCloud:
          networkData: |
            version: 2
            ethernets:
              eth0:
                dhcp4: true
                addresses: [ fd10:0:2::2/120 ] <span id="CO64-3"><!--Empty--></span><span class="callout">3</span>
                gateway6: fd10:0:2::1 <span id="CO64-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO64-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Connect using masquerade mode.
									</div></dd><dt><a href="#CO64-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Allows incoming traffic on port 80 to the virtual machine.
									</div></dd><dt><a href="#CO64-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The static IPv6 address as determined by the <code class="literal">Network.pod.vmIPv6NetworkCIDR</code> field in the virtual machine instance configuration. The default value is <code class="literal">fd10:0:2::2/120</code>.
									</div></dd><dt><a href="#CO64-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The gateway IP address as determined by the <code class="literal">Network.pod.vmIPv6NetworkCIDR</code> field in the virtual machine instance configuration. The default value is <code class="literal">fd10:0:2::1</code>.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the virtual machine in the namespace:
							</p><pre class="programlisting language-terminal">$ oc create -f example-vm-ipv6.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To verify that IPv6 has been configured, start the virtual machine and view the interface status of the virtual machine instance to ensure it has an IPv6 address:
							</li></ul></div><pre class="programlisting language-terminal">$ oc get vmi &lt;vmi-name&gt; -o jsonpath="{.status.interfaces[*].ipAddresses}"</pre></section><section class="section" id="virt-jumbo-frames-vm-pod-nw_virt-using-the-default-pod-network-with-virt"><div class="titlepage"><div><div><h4 class="title">10.18.1.3. About jumbo frames support</h4></div></div></div><p>
						When using the OVN-Kubernetes CNI plugin, you can send unfragmented jumbo frame packets between two virtual machines (VMs) that are connected on the default pod network. Jumbo frames have a maximum transmission unit (MTU) value greater than 1500 bytes.
					</p><p>
						The VM automatically gets the MTU value of the cluster network, set by the cluster administrator, in one of the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">libvirt</code>: If the guest OS has the latest version of the VirtIO driver that can interpret incoming data via a Peripheral Component Interconnect (PCI) config register in the emulated device.
							</li><li class="listitem">
								DHCP: If the guest DHCP client can read the MTU value from the DHCP server response.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For Windows VMs that do not have a VirtIO driver, you must set the MTU manually by using <code class="literal">netsh</code> or a similar tool. This is because the Windows DHCP client does not read the MTU value.
						</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#changing-cluster-network-mtu">Changing the MTU for the cluster network</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#optimizing-mtu_optimizing-networking">Optimizing the MTU for your network</a>
							</li></ul></div></section></section><section class="section" id="virt-creating-service-vm"><div class="titlepage"><div><div><h3 class="title">10.18.2. Creating a service to expose a virtual machine</h3></div></div></div><p>
					You can expose a virtual machine within the cluster or outside the cluster by using a <code class="literal">Service</code> object.
				</p><section class="section" id="virt-about-services_virt-creating-service-vm"><div class="titlepage"><div><div><h4 class="title">10.18.2.1. About services</h4></div></div></div><p>
						A Kubernetes <span class="emphasis"><em>service</em></span> exposes network access for clients to an application running on a set of pods. Services offer abstraction, load balancing, and, in the case of NodePort and LoadBalancer, exposure to the outside world.
					</p><p>
						Services can be exposed in the <span class="strong strong"><strong>VirtualMachine details</strong></span> → <span class="strong strong"><strong>Details</strong></span> tab of the web console or by specifying a <code class="literal">spec.type</code> in the <code class="literal">Service</code> object:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ClusterIP</span></dt><dd>
									Exposes the service on an internal IP address and as a DNS name to other applications within the cluster. A single service can map to multiple virtual machines. When a client tries to connect to the service, the client’s request is load balanced among available backends. <code class="literal">ClusterIP</code> is the default service <code class="literal">type</code>.
								</dd><dt><span class="term">NodePort</span></dt><dd>
									Exposes the service on the same port of each selected node in the cluster. <code class="literal">NodePort</code> makes a service accessible from outside the cluster.
								</dd><dt><span class="term">LoadBalancer</span></dt><dd>
									Creates an external load balancer in the current cloud (if supported) and assigns a fixed, external IP address to the service.
								</dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For on-premise clusters, you can configure a load balancing service by using the MetalLB Operator in layer 2 mode. The BGP mode is not supported. The MetalLB Operator is installed in the <code class="literal">metallb-system</code> namespace.
						</p></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#metallb-operator-install">Installing the MetalLB Operator</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#metallb-configure-services">Configuring services to use MetalLB</a>
							</li></ul></div><section class="section" id="virt-dual-stack-support-services_virt-creating-service-vm"><div class="titlepage"><div><div><h5 class="title">10.18.2.1.1. Dual-stack support</h5></div></div></div><p>
							If IPv4 and IPv6 dual-stack networking is enabled for your cluster, you can create a service that uses IPv4, IPv6, or both, by defining the <code class="literal">spec.ipFamilyPolicy</code> and the <code class="literal">spec.ipFamilies</code> fields in the <code class="literal">Service</code> object.
						</p><p>
							The <code class="literal">spec.ipFamilyPolicy</code> field can be set to one of the following values:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SingleStack</span></dt><dd>
										The control plane assigns a cluster IP address for the service based on the first configured service cluster IP range.
									</dd><dt><span class="term">PreferDualStack</span></dt><dd>
										The control plane assigns both IPv4 and IPv6 cluster IP addresses for the service on clusters that have dual-stack configured.
									</dd><dt><span class="term">RequireDualStack</span></dt><dd>
										This option fails for clusters that do not have dual-stack networking enabled. For clusters that have dual-stack configured, the behavior is the same as when the value is set to <code class="literal">PreferDualStack</code>. The control plane allocates cluster IP addresses from both IPv4 and IPv6 address ranges.
									</dd></dl></div><p>
							You can define which IP family to use for single-stack or define the order of IP families for dual-stack by setting the <code class="literal">spec.ipFamilies</code> field to one of the following array values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">[IPv4]</code>
								</li><li class="listitem">
									<code class="literal">[IPv6]</code>
								</li><li class="listitem">
									<code class="literal">[IPv4, IPv6]</code>
								</li><li class="listitem">
									<code class="literal">[IPv6, IPv4]</code>
								</li></ul></div></section></section><section class="section" id="virt-creating-a-service-from-a-virtual-machine_virt-creating-service-vm"><div class="titlepage"><div><div><h4 class="title">10.18.2.2. Exposing a virtual machine as a service</h4></div></div></div><p>
						Create a <code class="literal">ClusterIP</code>, <code class="literal">NodePort</code>, or <code class="literal">LoadBalancer</code> service to connect to a running virtual machine (VM) from within or outside the cluster.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">VirtualMachine</code> manifest to add the label for service creation:
							</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: vm-ephemeral
  namespace: example-namespace
spec:
  running: false
  template:
    metadata:
      labels:
        special: key <span id="CO65-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO65-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Add the label <code class="literal">special: key</code> in the <code class="literal">spec.template.metadata.labels</code> section.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Labels on a virtual machine are passed through to the pod. The <code class="literal">special: key</code> label must match the label in the <code class="literal">spec.selector</code> attribute of the <code class="literal">Service</code> manifest.
								</p></div></div></li><li class="listitem">
								Save the <code class="literal">VirtualMachine</code> manifest file to apply your changes.
							</li><li class="listitem"><p class="simpara">
								Create a <code class="literal">Service</code> manifest to expose the VM:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Service
metadata:
  name: vmservice <span id="CO66-1"><!--Empty--></span><span class="callout">1</span>
  namespace: example-namespace <span id="CO66-2"><!--Empty--></span><span class="callout">2</span>
spec:
  externalTrafficPolicy: Cluster <span id="CO66-3"><!--Empty--></span><span class="callout">3</span>
  ports:
  - nodePort: 30000 <span id="CO66-4"><!--Empty--></span><span class="callout">4</span>
    port: 27017
    protocol: TCP
    targetPort: 22 <span id="CO66-5"><!--Empty--></span><span class="callout">5</span>
  selector:
    special: key <span id="CO66-6"><!--Empty--></span><span class="callout">6</span>
  type: NodePort <span id="CO66-7"><!--Empty--></span><span class="callout">7</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO66-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">Service</code> object.
									</div></dd><dt><a href="#CO66-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the <code class="literal">Service</code> object resides. This must match the <code class="literal">metadata.namespace</code> field of the <code class="literal">VirtualMachine</code> manifest.
									</div></dd><dt><a href="#CO66-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: Specifies how the nodes distribute service traffic that is received on external IP addresses. This only applies to <code class="literal">NodePort</code> and <code class="literal">LoadBalancer</code> service types. The default value is <code class="literal">Cluster</code> which routes traffic evenly to all cluster endpoints.
									</div></dd><dt><a href="#CO66-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optional: When set, the <code class="literal">nodePort</code> value must be unique across all services. If not specified, a value in the range above <code class="literal">30000</code> is dynamically allocated.
									</div></dd><dt><a href="#CO66-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: The VM port to be exposed by the service. It must reference an open port if a port list is defined in the VM manifest. If <code class="literal">targetPort</code> is not specified, it takes the same value as <code class="literal">port</code>.
									</div></dd><dt><a href="#CO66-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										The reference to the label that you added in the <code class="literal">spec.template.metadata.labels</code> stanza of the <code class="literal">VirtualMachine</code> manifest.
									</div></dd><dt><a href="#CO66-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										The type of service. Possible values are <code class="literal">ClusterIP</code>, <code class="literal">NodePort</code> and <code class="literal">LoadBalancer</code>.
									</div></dd></dl></div></li><li class="listitem">
								Save the <code class="literal">Service</code> manifest file.
							</li><li class="listitem"><p class="simpara">
								Create the service by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;service_name&gt;.yaml</pre></li><li class="listitem">
								Start the VM. If the VM is already running, restart it.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Query the <code class="literal">Service</code> object to verify that it is available:
							</p><pre class="programlisting language-terminal">$ oc get service -n example-namespace</pre><div class="formalpara"><p class="title"><strong>Example output for <code class="literal">ClusterIP</code> service</strong></p><p>
									
<pre class="programlisting language-terminal">NAME        TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)     AGE
vmservice   ClusterIP   172.30.3.149   &lt;none&gt;        27017/TCP   2m</pre>

								</p></div><div class="formalpara"><p class="title"><strong>Example output for <code class="literal">NodePort</code> service</strong></p><p>
									
<pre class="programlisting language-terminal">NAME        TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)            AGE
vmservice   NodePort    172.30.232.73   &lt;none&gt;       27017:30000/TCP    5m</pre>

								</p></div><div class="formalpara"><p class="title"><strong>Example output for <code class="literal">LoadBalancer</code> service</strong></p><p>
									
<pre class="programlisting language-terminal">NAME        TYPE            CLUSTER-IP     EXTERNAL-IP                    PORT(S)           AGE
vmservice   LoadBalancer    172.30.27.5   172.29.10.235,172.29.10.235     27017:31829/TCP   5s</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Choose the appropriate method to connect to the virtual machine:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										For a <code class="literal">ClusterIP</code> service, connect to the VM from within the cluster by using the service IP address and the service port. For example:
									</p><pre class="programlisting language-terminal">$ ssh fedora@172.30.3.149 -p 27017</pre></li><li class="listitem"><p class="simpara">
										For a <code class="literal">NodePort</code> service, connect to the VM by specifying the node IP address and the node port outside the cluster network. For example:
									</p><pre class="programlisting language-terminal">$ ssh fedora@$NODE_IP -p 30000</pre></li><li class="listitem">
										For a <code class="literal">LoadBalancer</code> service, use the <code class="literal">vinagre</code> client to connect to your virtual machine by using the public IP address and port. External ports are dynamically allocated.
									</li></ul></div></li></ol></div></section><section class="section _additional-resources" id="additional-resources_creating-service-vm"><div class="titlepage"><div><div><h4 class="title">10.18.2.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#configuring-ingress-cluster-traffic-nodeport">Configuring ingress cluster traffic using a NodePort</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#configuring-ingress-cluster-traffic-load-balancer">Configuring ingress cluster traffic using a load balancer</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-details">Web console overview</a>
							</li></ul></div></section></section><section class="section" id="virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h3 class="title">10.18.3. Connecting a virtual machine to a Linux bridge network</h3></div></div></div><p>
					By default, OpenShift Virtualization is installed with a single, internal pod network.
				</p><p>
					You must create a Linux bridge network attachment definition (NAD) in order to connect to additional networks.
				</p><p>
					To attach a virtual machine to an additional network:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Create a Linux bridge node network configuration policy.
						</li><li class="listitem">
							Create a Linux bridge network attachment definition.
						</li><li class="listitem">
							Configure the virtual machine, enabling the virtual machine to recognize the network attachment definition.
						</li></ol></div><p>
					For more information about scheduling, interface types, and other node networking activities, see the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#k8s-nmstate-updating-node-network-config">node networking</a> section.
				</p><section class="section" id="virt-connecting-network-through-nad"><div class="titlepage"><div><div><h4 class="title">10.18.3.1. Connecting to the network through the network attachment definition</h4></div></div></div><section class="section" id="virt-creating-linux-bridge-nncp_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.1.1. Creating a Linux bridge node network configuration policy</h5></div></div></div><p>
							Use a <code class="literal">NodeNetworkConfigurationPolicy</code> manifest YAML file to create the Linux bridge.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You have installed the Kubernetes NMState Operator.
								</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Create the <code class="literal">NodeNetworkConfigurationPolicy</code> manifest. This example includes sample values that you must replace with your own information.
								</p><pre class="programlisting language-yaml">apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  name: br1-eth1-policy <span id="CO67-1"><!--Empty--></span><span class="callout">1</span>
spec:
  desiredState:
    interfaces:
      - name: br1 <span id="CO67-2"><!--Empty--></span><span class="callout">2</span>
        description: Linux bridge with eth1 as a port <span id="CO67-3"><!--Empty--></span><span class="callout">3</span>
        type: linux-bridge <span id="CO67-4"><!--Empty--></span><span class="callout">4</span>
        state: up <span id="CO67-5"><!--Empty--></span><span class="callout">5</span>
        ipv4:
          enabled: false <span id="CO67-6"><!--Empty--></span><span class="callout">6</span>
        bridge:
          options:
            stp:
              enabled: false <span id="CO67-7"><!--Empty--></span><span class="callout">7</span>
          port:
            - name: eth1 <span id="CO67-8"><!--Empty--></span><span class="callout">8</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO67-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Name of the policy.
										</div></dd><dt><a href="#CO67-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Name of the interface.
										</div></dd><dt><a href="#CO67-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											Optional: Human-readable description of the interface.
										</div></dd><dt><a href="#CO67-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The type of interface. This example creates a bridge.
										</div></dd><dt><a href="#CO67-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The requested state for the interface after creation.
										</div></dd><dt><a href="#CO67-6"><span class="callout">6</span></a> </dt><dd><div class="para">
											Disables IPv4 in this example.
										</div></dd><dt><a href="#CO67-7"><span class="callout">7</span></a> </dt><dd><div class="para">
											Disables STP in this example.
										</div></dd><dt><a href="#CO67-8"><span class="callout">8</span></a> </dt><dd><div class="para">
											The node NIC to which the bridge is attached.
										</div></dd></dl></div></li></ul></div></section></section><section class="section" id="virt-creating-linux-bridge-network-attachment-definition"><div class="titlepage"><div><div><h4 class="title">10.18.3.2. Creating a Linux bridge network attachment definition</h4></div></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Configuring IP address management (IPAM) in a network attachment definition for virtual machines is not supported.
						</p></div></div><section class="section" id="virt-creating-linux-bridge-nad-web_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.2.1. Creating a Linux bridge network attachment definition in the web console</h5></div></div></div><p>
							You can create network attachment definitions to provide layer-2 networking to pods and virtual machines.
						</p><p>
							A Linux bridge network attachment definition is the most efficient method for connecting a virtual machine to a VLAN.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									In the web console, click <span class="strong strong"><strong>Networking</strong></span> → <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>Create Network Attachment Definition</strong></span>.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The network attachment definition must be in the same namespace as the pod or virtual machine.
									</p></div></div></li><li class="listitem">
									Enter a unique <span class="strong strong"><strong>Name</strong></span> and optional <span class="strong strong"><strong>Description</strong></span>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>CNV Linux bridge</strong></span> from the <span class="strong strong"><strong>Network Type</strong></span> list.
								</li><li class="listitem">
									Enter the name of the bridge in the <span class="strong strong"><strong>Bridge Name</strong></span> field.
								</li><li class="listitem">
									Optional: If the resource has VLAN IDs configured, enter the ID numbers in the <span class="strong strong"><strong>VLAN Tag Number</strong></span> field.
								</li><li class="listitem">
									Optional: Select <span class="strong strong"><strong>MAC Spoof Check</strong></span> to enable MAC spoof filtering. This feature provides security against a MAC spoofing attack by allowing only a single MAC address to exit the pod.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Create</strong></span>.
								</li></ol></div></section><section class="section" id="virt-creating-linux-bridge-nad-cli_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.2.2. Creating a Linux bridge network attachment definition in the CLI</h5></div></div></div><p>
							As a network administrator, you can configure a network attachment definition of type <code class="literal">cnv-bridge</code> to provide layer-2 networking to pods and virtual machines.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The node must support nftables and the <code class="literal">nft</code> binary must be deployed to enable MAC spoof check.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Create a network attachment definition in the same namespace as the virtual machine.
								</li><li class="listitem"><p class="simpara">
									Add the virtual machine to the network attachment definition, as in the following example:
								</p><pre class="programlisting language-yaml">apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;bridge-network&gt; <span id="CO68-1"><!--Empty--></span><span class="callout">1</span>
  annotations:
    k8s.v1.cni.cncf.io/resourceName: bridge.network.kubevirt.io/&lt;bridge-interface&gt; <span id="CO68-2"><!--Empty--></span><span class="callout">2</span>
spec:
  config: '{
    "cniVersion": "0.3.1",
    "name": "&lt;bridge-network&gt;", <span id="CO68-3"><!--Empty--></span><span class="callout">3</span>
    "type": "cnv-bridge", <span id="CO68-4"><!--Empty--></span><span class="callout">4</span>
    "bridge": "&lt;bridge-interface&gt;", <span id="CO68-5"><!--Empty--></span><span class="callout">5</span>
    "macspoofchk": true, <span id="CO68-6"><!--Empty--></span><span class="callout">6</span>
    "vlan": 100, <span id="CO68-7"><!--Empty--></span><span class="callout">7</span>
    "preserveDefaultVlan": false <span id="CO68-8"><!--Empty--></span><span class="callout">8</span>
  }'</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO68-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The name for the <code class="literal">NetworkAttachmentDefinition</code> object.
										</div></dd><dt><a href="#CO68-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Optional: Annotation key-value pair for node selection, where <code class="literal">bridge-interface</code> must match the name of a bridge configured on some nodes. If you add this annotation to your network attachment definition, your virtual machine instances will only run on the nodes that have the <code class="literal">bridge-interface</code> bridge connected.
										</div></dd><dt><a href="#CO68-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The name for the configuration. It is recommended to match the configuration name to the <code class="literal">name</code> value of the network attachment definition.
										</div></dd><dt><a href="#CO68-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The actual name of the Container Network Interface (CNI) plugin that provides the network for this network attachment definition. Do not change this field unless you want to use a different CNI.
										</div></dd><dt><a href="#CO68-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The name of the Linux bridge configured on the node.
										</div></dd><dt><a href="#CO68-6"><span class="callout">6</span></a> </dt><dd><div class="para">
											Optional: Flag to enable MAC spoof check. When set to <code class="literal">true</code>, you cannot change the MAC address of the pod or guest interface. This attribute provides security against a MAC spoofing attack by allowing only a single MAC address to exit the pod.
										</div></dd><dt><a href="#CO68-7"><span class="callout">7</span></a> </dt><dd><div class="para">
											Optional: The VLAN tag. No additional VLAN configuration is required on the node network configuration policy.
										</div></dd><dt><a href="#CO68-8"><span class="callout">8</span></a> </dt><dd><div class="para">
											Optional: Indicates whether the VM connects to the bridge through the default VLAN. The default value is <code class="literal">true</code>.
										</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										A Linux bridge network attachment definition is the most efficient method for connecting a virtual machine to a VLAN.
									</p></div></div></li><li class="listitem"><p class="simpara">
									Create the network attachment definition:
								</p><pre class="programlisting language-terminal">$ oc create -f &lt;network-attachment-definition.yaml&gt; <span id="CO69-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO69-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Where <code class="literal">&lt;network-attachment-definition.yaml&gt;</code> is the file name of the network attachment definition manifest.
										</div></dd></dl></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Verify that the network attachment definition was created by running the following command:
								</p><pre class="programlisting language-terminal">$ oc get network-attachment-definition &lt;bridge-network&gt;</pre></li></ul></div></section></section><section class="section" id="virt-configuring-vm-for-linux-bridge-network"><div class="titlepage"><div><div><h4 class="title">10.18.3.3. Configuring the virtual machine for a Linux bridge network</h4></div></div></div><section class="section" id="virt-vm-creating-nic-web_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.3.1. Creating a NIC for a virtual machine in the web console</h5></div></div></div><p>
							Create and attach additional NICs to a virtual machine from the web console.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									A network attachment definition must be available.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									In the correct project in the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
								</li><li class="listitem">
									Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Network interfaces</strong></span> to view the NICs already attached to the virtual machine.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Add Network Interface</strong></span> to create a new slot in the list.
								</li><li class="listitem">
									Select a network attachment definition from the <span class="strong strong"><strong>Network</strong></span> list for the additional network.
								</li><li class="listitem">
									Fill in the <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Model</strong></span>, <span class="strong strong"><strong>Type</strong></span>, and <span class="strong strong"><strong>MAC Address</strong></span> for the new NIC.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Save</strong></span> to save and attach the NIC to the virtual machine.
								</li></ol></div></section><section class="section" id="virt-networking-wizard-fields-web_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.3.2. Networking fields</h5></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196960476624" scope="col">Name</th><th align="left" valign="top" id="idm140196960475536" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196960476624"> <p>
											Name
										</p>
										 </td><td align="left" valign="top" headers="idm140196960475536"> <p>
											Name for the network interface controller.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960476624"> <p>
											Model
										</p>
										 </td><td align="left" valign="top" headers="idm140196960475536"> <p>
											Indicates the model of the network interface controller. Supported values are <span class="strong strong"><strong>e1000e</strong></span> and <span class="strong strong"><strong>virtio</strong></span>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960476624"> <p>
											Network
										</p>
										 </td><td align="left" valign="top" headers="idm140196960475536"> <p>
											List of available network attachment definitions.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960476624"> <p>
											Type
										</p>
										 </td><td align="left" valign="top" headers="idm140196960475536"> <p>
											List of available binding methods. Select the binding method suitable for the network interface:
										</p>
										 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													Default pod network: <code class="literal">masquerade</code>
												</li><li class="listitem">
													Linux bridge network: <code class="literal">bridge</code>
												</li><li class="listitem">
													SR-IOV network: <code class="literal">SR-IOV</code>
												</li></ul></div>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960476624"> <p>
											MAC Address
										</p>
										 </td><td align="left" valign="top" headers="idm140196960475536"> <p>
											MAC address for the network interface controller. If a MAC address is not specified, one is assigned automatically.
										</p>
										 </td></tr></tbody></table></div></section><section class="section" id="virt-attaching-vm-additional-network-cli_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h5 class="title">10.18.3.3.3. Attaching a virtual machine to an additional network in the CLI</h5></div></div></div><p>
							Attach a virtual machine to an additional network by adding a bridge interface and specifying a network attachment definition in the virtual machine configuration.
						</p><p>
							This procedure uses a YAML file to demonstrate editing the configuration and applying the updated file to the cluster. You can alternatively use the <code class="literal">oc edit &lt;object&gt; &lt;name&gt;</code> command to edit an existing virtual machine.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									Shut down the virtual machine before editing the configuration. If you edit a running virtual machine, you must restart the virtual machine for the changes to take effect.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Create or edit a configuration of a virtual machine that you want to connect to the bridge network.
								</li><li class="listitem"><p class="simpara">
									Add the bridge interface to the <code class="literal">spec.template.spec.domain.devices.interfaces</code> list and the network attachment definition to the <code class="literal">spec.template.spec.networks</code> list. This example adds a bridge interface called <code class="literal">bridge-net</code> that connects to the <code class="literal">a-bridge-network</code> network attachment definition:
								</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
    name: &lt;example-vm&gt;
spec:
  template:
    spec:
      domain:
        devices:
          interfaces:
            - masquerade: {}
              name: &lt;default&gt;
            - bridge: {}
              name: &lt;bridge-net&gt; <span id="CO70-1"><!--Empty--></span><span class="callout">1</span>
# ...
      networks:
        - name: &lt;default&gt;
          pod: {}
        - name: &lt;bridge-net&gt; <span id="CO70-2"><!--Empty--></span><span class="callout">2</span>
          multus:
            networkName: &lt;network-namespace&gt;/&lt;a-bridge-network&gt; <span id="CO70-3"><!--Empty--></span><span class="callout">3</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO70-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The name of the bridge interface.
										</div></dd><dt><a href="#CO70-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The name of the network. This value must match the <code class="literal">name</code> value of the corresponding <code class="literal">spec.template.spec.domain.devices.interfaces</code> entry.
										</div></dd><dt><a href="#CO70-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The name of the network attachment definition, prefixed by the namespace where it exists. The namespace must be either the <code class="literal">default</code> namespace or the same namespace where the VM is to be created. In this case, <code class="literal">multus</code> is used. Multus is a cloud network interface (CNI) plugin that allows multiple CNIs to exist so that a pod or virtual machine can use the interfaces it needs.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Apply the configuration:
								</p><pre class="programlisting language-terminal">$ oc apply -f &lt;example-vm.yaml&gt;</pre></li><li class="listitem">
									Optional: If you edited a running virtual machine, you must restart it for the changes to take effect.
								</li></ol></div></section></section><section class="section" id="next-steps_virt-attaching-vm-multiple-networks"><div class="titlepage"><div><div><h4 class="title">10.18.3.4. Next steps</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-vm-secondary-network-fqdn">Accessing a virtual machine on a secondary network by using the cluster domain name</a>
							</li></ul></div></section></section><section class="section" id="virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h3 class="title">10.18.4. Connecting a virtual machine to an SR-IOV network</h3></div></div></div><p>
					You can connect a virtual machine (VM) to a Single Root I/O Virtualization (SR-IOV) network by performing the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Configure an SR-IOV network device.
						</li><li class="listitem">
							Configure an SR-IOV network.
						</li><li class="listitem">
							Connect the VM to the SR-IOV network.
						</li></ol></div><section class="section" id="prerequisites-connecting-vm-to-sriov-network_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#ztp-du-configuring-host-firmware-requirements_sno-configure-for-vdu">enabled global SR-IOV and VT-d settings in the firmware for the host</a>.
							</li><li class="listitem">
								You must have <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#installing-sriov-operator">installed the SR-IOV Network Operator</a>.
							</li></ul></div></section><section class="section" id="nw-sriov-configuring-device_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.2. Configuring SR-IOV network devices</h4></div></div></div><p>
						The SR-IOV Network Operator adds the <code class="literal">SriovNetworkNodePolicy.sriovnetwork.openshift.io</code> CustomResourceDefinition to OpenShift Container Platform. You can configure an SR-IOV network device by creating a SriovNetworkNodePolicy custom resource (CR).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When applying the configuration specified in a <code class="literal">SriovNetworkNodePolicy</code> object, the SR-IOV Operator might drain the nodes, and in some cases, reboot nodes.
						</p><p>
							It might take several minutes for a configuration change to apply.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have installed the SR-IOV Network Operator.
							</li><li class="listitem">
								You have enough available nodes in your cluster to handle the evicted workload from drained nodes.
							</li><li class="listitem">
								You have not selected any control plane nodes for SR-IOV network device configuration.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create an <code class="literal">SriovNetworkNodePolicy</code> object, and then save the YAML in the <code class="literal">&lt;name&gt;-sriov-node-network.yaml</code> file. Replace <code class="literal">&lt;name&gt;</code> with the name for this configuration.
							</p><pre class="programlisting language-yaml">apiVersion: sriovnetwork.openshift.io/v1
kind: SriovNetworkNodePolicy
metadata:
  name: &lt;name&gt; <span id="CO71-1"><!--Empty--></span><span class="callout">1</span>
  namespace: openshift-sriov-network-operator <span id="CO71-2"><!--Empty--></span><span class="callout">2</span>
spec:
  resourceName: &lt;sriov_resource_name&gt; <span id="CO71-3"><!--Empty--></span><span class="callout">3</span>
  nodeSelector:
    feature.node.kubernetes.io/network-sriov.capable: "true" <span id="CO71-4"><!--Empty--></span><span class="callout">4</span>
  priority: &lt;priority&gt; <span id="CO71-5"><!--Empty--></span><span class="callout">5</span>
  mtu: &lt;mtu&gt; <span id="CO71-6"><!--Empty--></span><span class="callout">6</span>
  numVfs: &lt;num&gt; <span id="CO71-7"><!--Empty--></span><span class="callout">7</span>
  nicSelector: <span id="CO71-8"><!--Empty--></span><span class="callout">8</span>
    vendor: "&lt;vendor_code&gt;" <span id="CO71-9"><!--Empty--></span><span class="callout">9</span>
    deviceID: "&lt;device_id&gt;" <span id="CO71-10"><!--Empty--></span><span class="callout">10</span>
    pfNames: ["&lt;pf_name&gt;", ...] <span id="CO71-11"><!--Empty--></span><span class="callout">11</span>
    rootDevices: ["&lt;pci_bus_id&gt;", "..."] <span id="CO71-12"><!--Empty--></span><span class="callout">12</span>
  deviceType: vfio-pci <span id="CO71-13"><!--Empty--></span><span class="callout">13</span>
  isRdma: false <span id="CO71-14"><!--Empty--></span><span class="callout">14</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO71-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify a name for the CR object.
									</div></dd><dt><a href="#CO71-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specify the namespace where the SR-IOV Operator is installed.
									</div></dd><dt><a href="#CO71-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Specify the resource name of the SR-IOV device plugin. You can create multiple <code class="literal">SriovNetworkNodePolicy</code> objects for a resource name.
									</div></dd><dt><a href="#CO71-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Specify the node selector to select which nodes are configured. Only SR-IOV network devices on selected nodes are configured. The SR-IOV Container Network Interface (CNI) plugin and device plugin are deployed only on selected nodes.
									</div></dd><dt><a href="#CO71-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: Specify an integer value between <code class="literal">0</code> and <code class="literal">99</code>. A smaller number gets higher priority, so a priority of <code class="literal">10</code> is higher than a priority of <code class="literal">99</code>. The default value is <code class="literal">99</code>.
									</div></dd><dt><a href="#CO71-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										Optional: Specify a value for the maximum transmission unit (MTU) of the virtual function. The maximum MTU value can vary for different NIC models.
									</div></dd><dt><a href="#CO71-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										Specify the number of the virtual functions (VF) to create for the SR-IOV physical network device. For an Intel network interface controller (NIC), the number of VFs cannot be larger than the total VFs supported by the device. For a Mellanox NIC, the number of VFs cannot be larger than <code class="literal">128</code>.
									</div></dd><dt><a href="#CO71-8"><span class="callout">8</span></a> </dt><dd><div class="para">
										The <code class="literal">nicSelector</code> mapping selects the Ethernet device for the Operator to configure. You do not need to specify values for all the parameters. It is recommended to identify the Ethernet adapter with enough precision to minimize the possibility of selecting an Ethernet device unintentionally. If you specify <code class="literal">rootDevices</code>, you must also specify a value for <code class="literal">vendor</code>, <code class="literal">deviceID</code>, or <code class="literal">pfNames</code>. If you specify both <code class="literal">pfNames</code> and <code class="literal">rootDevices</code> at the same time, ensure that they point to an identical device.
									</div></dd><dt><a href="#CO71-9"><span class="callout">9</span></a> </dt><dd><div class="para">
										Optional: Specify the vendor hex code of the SR-IOV network device. The only allowed values are either <code class="literal">8086</code> or <code class="literal">15b3</code>.
									</div></dd><dt><a href="#CO71-10"><span class="callout">10</span></a> </dt><dd><div class="para">
										Optional: Specify the device hex code of SR-IOV network device. The only allowed values are <code class="literal">158b</code>, <code class="literal">1015</code>, <code class="literal">1017</code>.
									</div></dd><dt><a href="#CO71-11"><span class="callout">11</span></a> </dt><dd><div class="para">
										Optional: The parameter accepts an array of one or more physical function (PF) names for the Ethernet device.
									</div></dd><dt><a href="#CO71-12"><span class="callout">12</span></a> </dt><dd><div class="para">
										The parameter accepts an array of one or more PCI bus addresses for the physical function of the Ethernet device. Provide the address in the following format: <code class="literal">0000:02:00.1</code>.
									</div></dd><dt><a href="#CO71-13"><span class="callout">13</span></a> </dt><dd><div class="para">
										The <code class="literal">vfio-pci</code> driver type is required for virtual functions in OpenShift Virtualization.
									</div></dd><dt><a href="#CO71-14"><span class="callout">14</span></a> </dt><dd><div class="para">
										Optional: Specify whether to enable remote direct memory access (RDMA) mode. For a Mellanox card, set <code class="literal">isRdma</code> to <code class="literal">false</code>. The default value is <code class="literal">false</code>.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If <code class="literal">isRDMA</code> flag is set to <code class="literal">true</code>, you can continue to use the RDMA enabled VF as a normal network device. A device can be used in either mode.
								</p></div></div></li><li class="listitem">
								Optional: Label the SR-IOV capable cluster nodes with <code class="literal">SriovNetworkNodePolicy.Spec.NodeSelector</code> if they are not already labeled. For more information about labeling nodes, see "Understanding how to update labels on nodes".
							</li><li class="listitem"><p class="simpara">
								Create the <code class="literal">SriovNetworkNodePolicy</code> object:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;name&gt;-sriov-node-network.yaml</pre><p class="simpara">
								where <code class="literal">&lt;name&gt;</code> specifies the name for this configuration.
							</p><p class="simpara">
								After applying the configuration update, all the pods in <code class="literal">sriov-network-operator</code> namespace transition to the <code class="literal">Running</code> status.
							</p></li><li class="listitem"><p class="simpara">
								To verify that the SR-IOV network device is configured, enter the following command. Replace <code class="literal">&lt;node_name&gt;</code> with the name of a node with the SR-IOV network device that you just configured.
							</p><pre class="programlisting language-terminal">$ oc get sriovnetworknodestates -n openshift-sriov-network-operator &lt;node_name&gt; -o jsonpath='{.status.syncStatus}'</pre></li></ol></div></section><section class="section" id="nw-sriov-network-attachment_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.3. Configuring SR-IOV additional network</h4></div></div></div><p>
						You can configure an additional network that uses SR-IOV hardware by creating an <code class="literal">SriovNetwork</code> object.
					</p><p>
						When you create an <code class="literal">SriovNetwork</code> object, the SR-IOV Network Operator automatically creates a <code class="literal">NetworkAttachmentDefinition</code> object.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Do not modify or delete an <code class="literal">SriovNetwork</code> object if it is attached to pods or virtual machines in a <code class="literal">running</code> state.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								Log in as a user with <code class="literal">cluster-admin</code> privileges.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Create the following <code class="literal">SriovNetwork</code> object, and then save the YAML in the <code class="literal">&lt;name&gt;-sriov-network.yaml</code> file. Replace <code class="literal">&lt;name&gt;</code> with a name for this additional network.
							</li></ol></div><pre class="programlisting language-yaml">apiVersion: sriovnetwork.openshift.io/v1
kind: SriovNetwork
metadata:
  name: &lt;name&gt; <span id="CO72-1"><!--Empty--></span><span class="callout">1</span>
  namespace: openshift-sriov-network-operator <span id="CO72-2"><!--Empty--></span><span class="callout">2</span>
spec:
  resourceName: &lt;sriov_resource_name&gt; <span id="CO72-3"><!--Empty--></span><span class="callout">3</span>
  networkNamespace: &lt;target_namespace&gt; <span id="CO72-4"><!--Empty--></span><span class="callout">4</span>
  vlan: &lt;vlan&gt; <span id="CO72-5"><!--Empty--></span><span class="callout">5</span>
  spoofChk: "&lt;spoof_check&gt;" <span id="CO72-6"><!--Empty--></span><span class="callout">6</span>
  linkState: &lt;link_state&gt; <span id="CO72-7"><!--Empty--></span><span class="callout">7</span>
  maxTxRate: &lt;max_tx_rate&gt; <span id="CO72-8"><!--Empty--></span><span class="callout">8</span>
  minTxRate: &lt;min_rx_rate&gt; <span id="CO72-9"><!--Empty--></span><span class="callout">9</span>
  vlanQoS: &lt;vlan_qos&gt; <span id="CO72-10"><!--Empty--></span><span class="callout">10</span>
  trust: "&lt;trust_vf&gt;" <span id="CO72-11"><!--Empty--></span><span class="callout">11</span>
  capabilities: &lt;capabilities&gt; <span id="CO72-12"><!--Empty--></span><span class="callout">12</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO72-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;name&gt;</code> with a name for the object. The SR-IOV Network Operator creates a <code class="literal">NetworkAttachmentDefinition</code> object with same name.
							</div></dd><dt><a href="#CO72-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Specify the namespace where the SR-IOV Network Operator is installed.
							</div></dd><dt><a href="#CO72-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;sriov_resource_name&gt;</code> with the value for the <code class="literal">.spec.resourceName</code> parameter from the <code class="literal">SriovNetworkNodePolicy</code> object that defines the SR-IOV hardware for this additional network.
							</div></dd><dt><a href="#CO72-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								Replace <code class="literal">&lt;target_namespace&gt;</code> with the target namespace for the SriovNetwork. Only pods or virtual machines in the target namespace can attach to the SriovNetwork.
							</div></dd><dt><a href="#CO72-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;vlan&gt;</code> with a Virtual LAN (VLAN) ID for the additional network. The integer value must be from <code class="literal">0</code> to <code class="literal">4095</code>. The default value is <code class="literal">0</code>.
							</div></dd><dt><a href="#CO72-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;spoof_check&gt;</code> with the spoof check mode of the VF. The allowed values are the strings <code class="literal">"on"</code> and <code class="literal">"off"</code>.
							</div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									You must enclose the value you specify in quotes or the CR is rejected by the SR-IOV Network Operator.
								</p></div></div></dd><dt><a href="#CO72-7"><span class="callout">7</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;link_state&gt;</code> with the link state of virtual function (VF). Allowed value are <code class="literal">enable</code>, <code class="literal">disable</code> and <code class="literal">auto</code>.
							</div></dd><dt><a href="#CO72-8"><span class="callout">8</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;max_tx_rate&gt;</code> with a maximum transmission rate, in Mbps, for the VF.
							</div></dd><dt><a href="#CO72-9"><span class="callout">9</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;min_tx_rate&gt;</code> with a minimum transmission rate, in Mbps, for the VF. This value should always be less than or equal to Maximum transmission rate.
							</div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Intel NICs do not support the <code class="literal">minTxRate</code> parameter. For more information, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1772847">BZ#1772847</a>.
								</p></div></div></dd><dt><a href="#CO72-10"><span class="callout">10</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;vlan_qos&gt;</code> with an IEEE 802.1p priority level for the VF. The default value is <code class="literal">0</code>.
							</div></dd><dt><a href="#CO72-11"><span class="callout">11</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;trust_vf&gt;</code> with the trust mode of the VF. The allowed values are the strings <code class="literal">"on"</code> and <code class="literal">"off"</code>.
							</div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									You must enclose the value you specify in quotes or the CR is rejected by the SR-IOV Network Operator.
								</p></div></div></dd><dt><a href="#CO72-12"><span class="callout">12</span></a> </dt><dd><div class="para">
								Optional: Replace <code class="literal">&lt;capabilities&gt;</code> with the capabilities to configure for this network.
							</div></dd></dl></div><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p class="simpara">
								To create the object, enter the following command. Replace <code class="literal">&lt;name&gt;</code> with a name for this additional network.
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;name&gt;-sriov-network.yaml</pre></li><li class="listitem"><p class="simpara">
								Optional: To confirm that the <code class="literal">NetworkAttachmentDefinition</code> object associated with the <code class="literal">SriovNetwork</code> object that you created in the previous step exists, enter the following command. Replace <code class="literal">&lt;namespace&gt;</code> with the namespace you specified in the <code class="literal">SriovNetwork</code> object.
							</p><pre class="programlisting language-terminal">$ oc get net-attach-def -n &lt;namespace&gt;</pre></li></ol></div></section><section class="section" id="virt-attaching-vm-to-sriov-network_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.4. Connecting a virtual machine to an SR-IOV network</h4></div></div></div><p>
						You can connect the virtual machine (VM) to the SR-IOV network by including the network details in the VM configuration.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Include the SR-IOV network details in the <code class="literal">spec.domain.devices.interfaces</code> and <code class="literal">spec.networks</code> of the VM configuration:
							</p><pre class="programlisting language-yaml">kind: VirtualMachine
# ...
spec:
  domain:
    devices:
      interfaces:
      - name: &lt;default&gt; <span id="CO73-1"><!--Empty--></span><span class="callout">1</span>
        masquerade: {} <span id="CO73-2"><!--Empty--></span><span class="callout">2</span>
      - name: &lt;nic1&gt; <span id="CO73-3"><!--Empty--></span><span class="callout">3</span>
        sriov: {}
  networks:
  - name: &lt;default&gt; <span id="CO73-4"><!--Empty--></span><span class="callout">4</span>
    pod: {}
  - name: &lt;nic1&gt; <span id="CO73-5"><!--Empty--></span><span class="callout">5</span>
    multus:
        networkName: &lt;sriov-network&gt; <span id="CO73-6"><!--Empty--></span><span class="callout">6</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO73-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										A unique name for the interface that is connected to the pod network.
									</div></dd><dt><a href="#CO73-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">masquerade</code> binding to the default pod network.
									</div></dd><dt><a href="#CO73-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										A unique name for the SR-IOV interface.
									</div></dd><dt><a href="#CO73-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The name of the pod network interface. This must be the same as the <code class="literal">interfaces.name</code> that you defined earlier.
									</div></dd><dt><a href="#CO73-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The name of the SR-IOV interface. This must be the same as the <code class="literal">interfaces.name</code> that you defined earlier.
									</div></dd><dt><a href="#CO73-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										The name of the SR-IOV network attachment definition.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the virtual machine configuration:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;vm-sriov.yaml&gt; <span id="CO74-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO74-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the virtual machine YAML file.
									</div></dd></dl></div></li></ol></div></section><section class="section" id="virt-configuring-cluster-dpdk_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.5. Configuring a cluster for DPDK workloads</h4></div></div></div><p>
						You can use the following procedure to configure an OpenShift Container Platform cluster to run Data Plane Development Kit (DPDK) workloads.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Configuring a cluster for DPDK workloads is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
						</p><p>
							For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with <code class="literal">cluster-admin</code> permissions.
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								You have installed the SR-IOV Network Operator.
							</li><li class="listitem">
								You have installed the Node Tuning Operator.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Map your compute nodes topology to determine which Non-Uniform Memory Access (NUMA) CPUs are isolated for DPDK applications and which ones are reserved for the operating system (OS).
							</li><li class="listitem"><p class="simpara">
								Label a subset of the compute nodes with a custom role; for example, <code class="literal">worker-dpdk</code>:
							</p><pre class="programlisting language-terminal">$ oc label node &lt;node_name&gt; node-role.kubernetes.io/worker-dpdk=""</pre></li><li class="listitem"><p class="simpara">
								Create a new <code class="literal">MachineConfigPool</code> manifest that contains the <code class="literal">worker-dpdk</code> label in the <code class="literal">spec.machineConfigSelector</code> object:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">MachineConfigPool</code> manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfigPool
metadata:
  name: worker-dpdk
  labels:
    machineconfiguration.openshift.io/role: worker-dpdk
spec:
  machineConfigSelector:
    matchExpressions:
      - key: machineconfiguration.openshift.io/role
        operator: In
        values:
          - worker
          - worker-dpdk
  nodeSelector:
    matchLabels:
      node-role.kubernetes.io/worker-dpdk: ""</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">PerformanceProfile</code> manifest that applies to the labeled nodes and the machine config pool that you created in the previous steps. The performance profile specifies the CPUs that are isolated for DPDK applications and the CPUs that are reserved for house keeping.
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">PerformanceProfile</code> manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: performance.openshift.io/v2
kind: PerformanceProfile
metadata:
  name: profile-1
spec:
  cpu:
    isolated: 4-39,44-79
    reserved: 0-3,40-43
  hugepages:
    defaultHugepagesSize: 1G
    pages:
    - count: 32
      node: 0
      size: 1G
  net:
    userLevelNetworking: true
  nodeSelector:
    node-role.kubernetes.io/worker-dpdk: ""
  numa:
    topologyPolicy: single-numa-node</pre>

								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The compute nodes automatically restart after you apply the <code class="literal">MachineConfigPool</code> and <code class="literal">PerformanceProfile</code> manifests.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Retrieve the name of the generated <code class="literal">RuntimeClass</code> resource from the <code class="literal">status.runtimeClass</code> field of the <code class="literal">PerformanceProfile</code> object:
							</p><pre class="programlisting language-terminal">$ oc get performanceprofiles.performance.openshift.io profile-1 -o=jsonpath='{.status.runtimeClass}{"\n"}'</pre></li><li class="listitem"><p class="simpara">
								Set the previously obtained <code class="literal">RuntimeClass</code> name as the default container runtime class for the <code class="literal">virt-launcher</code> pods by adding the following annotation to the <code class="literal">HyperConverged</code> custom resource (CR):
							</p><pre class="programlisting language-terminal">$ oc annotate --overwrite -n openshift-cnv hco kubevirt-hyperconverged \
    kubevirt.kubevirt.io/jsonpatch='[{"op": "add", "path": "/spec/configuration/defaultRuntimeClass", "value": &lt;runtimeclass_name&gt;}]'</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Adding the annotation to the <code class="literal">HyperConverged</code> CR changes a global setting that affects all VMs that are created after the annotation is applied. Setting this annotation breaches support of the OpenShift Virtualization instance and must be used only on test clusters. For best performance, apply for a support exception.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Create an <code class="literal">SriovNetworkNodePolicy</code> object with the <code class="literal">spec.deviceType</code> field set to <code class="literal">vfio-pci</code>:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">SriovNetworkNodePolicy</code> manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: sriovnetwork.openshift.io/v1
kind: SriovNetworkNodePolicy
metadata:
  name: policy-1
  namespace: openshift-sriov-network-operator
spec:
  resourceName: intel_nics_dpdk
  deviceType: vfio-pci
  mtu: 9000
  numVfs: 4
  priority: 99
  nicSelector:
    vendor: "8086"
    deviceID: "1572"
    pfNames:
      - eno3
    rootDevices:
      - "0000:19:00.2"
  nodeSelector:
    feature.node.kubernetes.io/network-sriov.capable: "true"</pre>

								</p></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#using-cpu-manager">Using CPU Manager and Topology Manager</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#configuring-huge-pages_huge-pages">Configuring huge pages</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/solutions/5688941">Creating a custom machine config pool</a>
							</li></ul></div></section><section class="section" id="virt-configuring-vm-project-dpdk_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.6. Configuring a project for DPDK workloads</h4></div></div></div><p>
						You can configure the project to run DPDK workloads on SR-IOV hardware.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your cluster is configured to run DPDK workloads.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a namespace for your DPDK applications:
							</p><pre class="programlisting language-terminal">$ oc create ns dpdk-checkup-ns</pre></li><li class="listitem"><p class="simpara">
								Create an <code class="literal">SriovNetwork</code> object that references the <code class="literal">SriovNetworkNodePolicy</code> object. When you create an <code class="literal">SriovNetwork</code> object, the SR-IOV Network Operator automatically creates a <code class="literal">NetworkAttachmentDefinition</code> object.
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">SriovNetwork</code> manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: sriovnetwork.openshift.io/v1
kind: SriovNetwork
metadata:
  name: dpdk-sriovnetwork
  namespace: openshift-sriov-network-operator
spec:
  ipam: |
    {
      "type": "host-local",
      "subnet": "10.56.217.0/24",
      "rangeStart": "10.56.217.171",
      "rangeEnd": "10.56.217.181",
      "routes": [{
        "dst": "0.0.0.0/0"
      }],
      "gateway": "10.56.217.1"
    }
  networkNamespace: dpdk-checkup-ns <span id="CO75-1"><!--Empty--></span><span class="callout">1</span>
  resourceName: intel_nics_dpdk <span id="CO75-2"><!--Empty--></span><span class="callout">2</span>
  spoofChk: "off"
  trust: "on"
  vlan: 1019</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO75-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The namespace where the <code class="literal">NetworkAttachmentDefinition</code> object is deployed.
									</div></dd><dt><a href="#CO75-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The value of the <code class="literal">spec.resourceName</code> attribute of the <code class="literal">SriovNetworkNodePolicy</code> object that was created when configuring the cluster for DPDK workloads.
									</div></dd></dl></div></li><li class="listitem">
								Optional: Run the virtual machine latency checkup to verify that the network is properly configured.
							</li><li class="listitem">
								Optional: Run the DPDK checkup to verify that the namespace is ready for DPDK workloads.
							</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#working-with-projects">Working with projects</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-measuring-latency-vm-secondary-network_virt-running-cluster-checkups">Virtual machine latency checkup</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-checking-cluster-dpdk-readiness_virt-running-cluster-checkups">DPDK checkup</a>
							</li></ul></div></section><section class="section" id="virt-configuring-vm-dpdk_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.7. Configuring a virtual machine for DPDK workloads</h4></div></div></div><p>
						You can run Data Packet Development Kit (DPDK) workloads on virtual machines (VMs) to achieve lower latency and higher throughput for faster packet processing in the user space. DPDK uses the SR-IOV network for hardware-based I/O sharing.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your cluster is configured to run DPDK workloads.
							</li><li class="listitem">
								You have created and configured the project in which the VM will run.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">VirtualMachine</code> manifest to include information about the SR-IOV network interface, CPU topology, CRI-O annotations, and huge pages:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">VirtualMachine</code> manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: rhel-dpdk-vm
spec:
  running: true
  template:
    metadata:
      annotations:
        cpu-load-balancing.crio.io: disable <span id="CO76-1"><!--Empty--></span><span class="callout">1</span>
        cpu-quota.crio.io: disable <span id="CO76-2"><!--Empty--></span><span class="callout">2</span>
        irq-load-balancing.crio.io: disable <span id="CO76-3"><!--Empty--></span><span class="callout">3</span>
    spec:
      nodeSelector:
        node-role.kubernetes.io/worker-dpdk: "" <span id="CO76-4"><!--Empty--></span><span class="callout">4</span>
      domain:
        cpu:
          sockets: 1 <span id="CO76-5"><!--Empty--></span><span class="callout">5</span>
          cores: 5 <span id="CO76-6"><!--Empty--></span><span class="callout">6</span>
          threads: 2
          dedicatedCpuPlacement: true
          isolateEmulatorThread: true
        interfaces:
          - masquerade: {}
            name: default
          - model: virtio
            name: nic-east
            pciAddress: '0000:07:00.0'
            sriov: {}
          networkInterfaceMultiqueue: true
          rng: {}
      memory:
        hugepages:
          pageSize: 1Gi <span id="CO76-7"><!--Empty--></span><span class="callout">7</span>
      resources:
        requests:
          memory: 8Gi
      networks:
        - name: default
          pod: {}
        - multus:
            networkName: dpdk-net <span id="CO76-8"><!--Empty--></span><span class="callout">8</span>
          name: nic-east
# ...</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO76-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This annotation specifies that load balancing is disabled for CPUs that are used by the container.
									</div></dd><dt><a href="#CO76-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										This annotation specifies that the CPU quota is disabled for CPUs that are used by the container.
									</div></dd><dt><a href="#CO76-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										This annotation specifies that Interrupt Request (IRQ) load balancing is disabled for CPUs that are used by the container.
									</div></dd><dt><a href="#CO76-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The label that is used in the <code class="literal">MachineConfigPool</code> and <code class="literal">PerformanceProfile</code> manifests that were created when configuring the cluster for DPDK workloads.
									</div></dd><dt><a href="#CO76-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The number of sockets inside the VM. This field must be set to <code class="literal">1</code> for the CPUs to be scheduled from the same Non-Uniform Memory Access (NUMA) node.
									</div></dd><dt><a href="#CO76-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										The number of cores inside the VM. This must be a value greater than or equal to <code class="literal">1</code>. In this example, the VM is scheduled with 5 hyper-threads or 10 CPUs.
									</div></dd><dt><a href="#CO76-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										The size of the huge pages. The possible values for x86-64 architecture are 1Gi and 2Mi. In this example, the request is for 8 huge pages of size 1Gi.
									</div></dd><dt><a href="#CO76-8"><span class="callout">8</span></a> </dt><dd><div class="para">
										The name of the SR-IOV <code class="literal">NetworkAttachmentDefinition</code> object.
									</div></dd></dl></div></li><li class="listitem">
								Save and exit the editor.
							</li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">VirtualMachine</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;file_name&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Configure the guest operating system. The following example shows the configuration steps for RHEL 8 OS:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Configure isolated VM CPUs and specify huge pages by using the GRUB bootloader command-line interface. In the following example, 8 1G huge pages are specified. The first two CPUs (0 and 1) are set aside for house keeping tasks and the rest are isolated for the DPDK application.
									</p><pre class="programlisting language-terminal">$ grubby --update-kernel=ALL --args="default_hugepagesz=1GB hugepagesz=1G hugepages=8 isolcpus=2-9"</pre></li><li class="listitem"><p class="simpara">
										To achieve low-latency tuning by using the <code class="literal">cpu-partitioning</code> profile in the TuneD application, run the following commands:
									</p><pre class="programlisting language-terminal">$ dnf install -y tuned-profiles-cpu-partitioning</pre><pre class="programlisting language-terminal">$ echo isolated_cores=2-9 &gt; /etc/tuned/cpu-partitioning-variables.conf</pre><pre class="programlisting language-terminal">$ tuned-adm profile cpu-partitioning</pre></li><li class="listitem"><p class="simpara">
										Override the SR-IOV NIC driver by using the <code class="literal">driverctl</code> device driver control utility:
									</p><pre class="programlisting language-terminal">$ dnf install -y driverctl</pre><pre class="programlisting language-terminal">$ driverctl set-override 0000:07:00.0 vfio-pci</pre></li></ol></div></li><li class="listitem">
								Restart the VM to apply the changes.
							</li></ol></div></section><section class="section" id="next-steps_virt-attaching-vm-to-sriov-network"><div class="titlepage"><div><div><h4 class="title">10.18.4.8. Next steps</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-vm-secondary-network-fqdn">Accessing a virtual machine on a secondary network by using the cluster domain name</a>
							</li></ul></div></section></section><section class="section" id="virt-connecting-vm-to-service-mesh"><div class="titlepage"><div><div><h3 class="title">10.18.5. Connecting a virtual machine to a service mesh</h3></div></div></div><p>
					OpenShift Virtualization is now integrated with OpenShift Service Mesh. You can monitor, visualize, and control traffic between pods that run virtual machine workloads on the default pod network with IPv4.
				</p><section class="section" id="prerequisites-9"><div class="titlepage"><div><div><h4 class="title">10.18.5.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/service_mesh/#installing-ossm">installed the Service Mesh Operator</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/service_mesh/#ossm-create-smcp">deployed the service mesh control plane</a>.
							</li><li class="listitem">
								You must have added the namespace where the virtual machine is created to the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/service_mesh/#ossm-create-mesh">service mesh member roll</a>.
							</li><li class="listitem">
								You must use the <code class="literal">masquerade</code> binding method for the default pod network.
							</li></ul></div></section><section class="section" id="virt-adding-vm-to-service-mesh_virt-connecting-vm-to-service-mesh"><div class="titlepage"><div><div><h4 class="title">10.18.5.2. Configuring a virtual machine for the service mesh</h4></div></div></div><p>
						To add a virtual machine (VM) workload to a service mesh, enable automatic sidecar injection in the VM configuration file by setting the <code class="literal">sidecar.istio.io/inject</code> annotation to <code class="literal">true</code>. Then expose your VM as a service to view your application in the mesh.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To avoid port conflicts, do not use ports used by the Istio sidecar proxy. These include ports 15000, 15001, 15006, 15008, 15020, 15021, and 15090.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the VM configuration file to add the <code class="literal">sidecar.istio.io/inject: "true"</code> annotation.
							</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    kubevirt.io/vm: vm-istio
  name: vm-istio
spec:
  runStrategy: Always
  template:
    metadata:
      labels:
        kubevirt.io/vm: vm-istio
        app: vm-istio <span id="CO77-1"><!--Empty--></span><span class="callout">1</span>
      annotations:
        sidecar.istio.io/inject: "true" <span id="CO77-2"><!--Empty--></span><span class="callout">2</span>
    spec:
      domain:
        devices:
          interfaces:
          - name: default
            masquerade: {} <span id="CO77-3"><!--Empty--></span><span class="callout">3</span>
          disks:
          - disk:
              bus: virtio
            name: containerdisk
          - disk:
              bus: virtio
            name: cloudinitdisk
        resources:
          requests:
            memory: 1024M
      networks:
      - name: default
        pod: {}
      terminationGracePeriodSeconds: 180
      volumes:
      - containerDisk:
          image: registry:5000/kubevirt/fedora-cloud-container-disk-demo:devel
        name: containerdisk</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO77-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The key/value pair (label) that must be matched to the service selector attribute.
									</div></dd><dt><a href="#CO77-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The annotation to enable automatic sidecar injection.
									</div></dd><dt><a href="#CO77-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The binding method (masquerade mode) for use with the default pod network.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the VM configuration:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;vm_name&gt;.yaml <span id="CO78-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO78-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the virtual machine YAML file.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">Service</code> object to expose your VM to the service mesh.
							</p><pre class="programlisting language-yaml">  apiVersion: v1
  kind: Service
  metadata:
    name: vm-istio
  spec:
    selector:
      app: vm-istio <span id="CO79-1"><!--Empty--></span><span class="callout">1</span>
    ports:
      - port: 8080
        name: http
        protocol: TCP</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO79-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The service selector that determines the set of pods targeted by a service. This attribute corresponds to the <code class="literal">spec.metadata.labels</code> field in the VM configuration file. In the above example, the <code class="literal">Service</code> object named <code class="literal">vm-istio</code> targets TCP port 8080 on any pod with the label <code class="literal">app=vm-istio</code>.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the service:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;service_name&gt;.yaml <span id="CO80-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO80-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the service YAML file.
									</div></dd></dl></div></li></ol></div></section></section><section class="section" id="virt-configuring-ip-for-vms"><div class="titlepage"><div><div><h3 class="title">10.18.6. Configuring IP addresses for virtual machines</h3></div></div></div><p>
					You can configure static and dynamic IP addresses for virtual machines.
				</p><section class="section" id="virt-configuring-ip-for-new-vm-cloud-init_virt-configuring-ip-for-vms"><div class="titlepage"><div><div><h4 class="title">10.18.6.1. Configuring an IP address for a new virtual machine using cloud-init</h4></div></div></div><p>
						You can use cloud-init to configure the IP address of a secondary NIC when you create a virtual machine (VM). The IP address can be dynamically or statically provisioned.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If the VM is connected to the pod network, the pod network interface is the default route unless you update it.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The virtual machine is connected to a secondary network.
							</li><li class="listitem">
								You have a DHCP server available on the secondary network to configure a dynamic IP for the virtual machine.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">spec.template.spec.volumes.cloudInitNoCloud.networkData</code> stanza of the virtual machine configuration:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										To configure a dynamic IP address, specify the interface name and enable DHCP:
									</p><pre class="programlisting language-yaml">kind: VirtualMachine
spec:
# ...
  template:
  # ...
    spec:
      volumes:
      - cloudInitNoCloud:
          networkData: |
            version: 2
            ethernets:
              eth1: <span id="CO81-1"><!--Empty--></span><span class="callout">1</span>
                dhcp4: true</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO81-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Specify the interface name.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										To configure a static IP, specify the interface name and the IP address:
									</p><pre class="programlisting language-yaml">kind: VirtualMachine
spec:
# ...
  template:
  # ...
    spec:
      volumes:
      - cloudInitNoCloud:
          networkData: |
            version: 2
            ethernets:
              eth1: <span id="CO82-1"><!--Empty--></span><span class="callout">1</span>
                addresses:
                - 10.10.10.14/24 <span id="CO82-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO82-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Specify the interface name.
											</div></dd><dt><a href="#CO82-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												Specify the static IP address.
											</div></dd></dl></div></li></ul></div></li></ul></div></section></section><section class="section" id="virt-viewing-ip-of-vm-nic"><div class="titlepage"><div><div><h3 class="title">10.18.7. Viewing the IP address of NICs on a virtual machine</h3></div></div></div><p>
					You can view the IP address for a network interface controller (NIC) by using the web console or the <code class="literal">oc</code> client. The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-installing-qemu-guest-agent">QEMU guest agent</a> displays additional information about the virtual machine’s secondary networks.
				</p><section class="section" id="prerequisites_virt-viewing-ip-of-vm-vnic"><div class="titlepage"><div><div><h4 class="title">10.18.7.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the QEMU guest agent on the virtual machine.
							</li></ul></div></section><section class="section" id="virt-viewing-vmi-ip-cli_virt-viewing-ip-of-vm-vnic"><div class="titlepage"><div><div><h4 class="title">10.18.7.2. Viewing the IP address of a virtual machine interface in the CLI</h4></div></div></div><p>
						The network interface configuration is included in the <code class="literal">oc describe vmi &lt;vmi_name&gt;</code> command.
					</p><p>
						You can also view the IP address information by running <code class="literal">ip addr</code> on the virtual machine, or by running <code class="literal">oc get vmi &lt;vmi_name&gt; -o yaml</code>.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal">oc describe</code> command to display the virtual machine interface configuration:
							</p><pre class="programlisting language-terminal">$ oc describe vmi &lt;vmi_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml"># ...
Interfaces:
   Interface Name:  eth0
   Ip Address:      10.244.0.37/24
   Ip Addresses:
     10.244.0.37/24
     fe80::858:aff:fef4:25/64
   Mac:             0a:58:0a:f4:00:25
   Name:            default
   Interface Name:  v2
   Ip Address:      1.1.1.7/24
   Ip Addresses:
     1.1.1.7/24
     fe80::f4d9:70ff:fe13:9089/64
   Mac:             f6:d9:70:13:90:89
   Interface Name:  v1
   Ip Address:      1.1.1.1/24
   Ip Addresses:
     1.1.1.1/24
     1.1.1.2/24
     1.1.1.4/24
     2001:de7:0:f101::1/64
     2001:db8:0:f101::1/64
     fe80::1420:84ff:fe10:17aa/64
   Mac:             16:20:84:10:17:aa</pre>

								</p></div></li></ul></div></section><section class="section" id="virt-viewing-vmi-ip-web_virt-viewing-ip-of-vm-vnic"><div class="titlepage"><div><div><h4 class="title">10.18.7.3. Viewing the IP address of a virtual machine interface in the web console</h4></div></div></div><p>
						The IP information is displayed on the <span class="strong strong"><strong>VirtualMachine details</strong></span> page for the virtual machine.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine name to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li></ol></div><p>
						The information for each attached NIC is displayed under <span class="strong strong"><strong>IP Address</strong></span> on the <span class="strong strong"><strong>Details</strong></span> tab.
					</p></section></section><section class="section" id="virt-accessing-vm-secondary-network-fqdn"><div class="titlepage"><div><div><h3 class="title">10.18.8. Accessing a virtual machine on a secondary network by using the cluster domain name</h3></div></div></div><p>
					You can access a virtual machine (VM) that is attached to a secondary network interface from outside the cluster by using the fully qualified domain name (FQDN) of the cluster.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Accessing VMs by using the cluster FQDN is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><section class="section" id="virt-configuring-secondary-dns-server_virt-accessing-vm-secondary-network-fqdn"><div class="titlepage"><div><div><h4 class="title">10.18.8.1. Configuring DNS server for secondary networks</h4></div></div></div><p>
						The Cluster Network Addons Operator (CNAO) deploys the Domain Name Server (DNS) server and monitoring components when you enable the <code class="literal">KubeSecondaryDNS</code> feature gate in the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								You have access to an OpenShift Container Platform cluster with <code class="literal">cluster-admin</code> permissions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a <code class="literal">LoadBalancer</code> service using MetalLB or any other load balancer to expose the DNS server outside the cluster. The service listens on port 53 and targets port 5353. For example:
							</p><pre class="programlisting language-terminal">$ oc expose -n openshift-cnv deployment/secondary-dns --name=dns-lb --type=LoadBalancer --port=53 --target-port=5353 --protocol='UDP'</pre></li><li class="listitem"><p class="simpara">
								Retrieve the public IP address of the service by querying the <code class="literal">Service</code> object:
							</p><pre class="programlisting language-terminal">$ oc get service -n openshift-cnv</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME        TYPE            CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
dns-lb   LoadBalancer       172.30.27.5    10.46.41.94      53:31829/TCP     5s</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Deploy the DNS server and monitoring components by editing the <code class="literal">HyperConverged</code> CR:
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
    featureGates:
      deployKubeSecondaryDNS: true <span id="CO83-1"><!--Empty--></span><span class="callout">1</span>
    kubeSecondaryDNSNameServerIP: "10.46.41.94" <span id="CO83-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO83-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Set the <code class="literal">KubeSecondaryDNS</code> feature gate to <code class="literal">true</code>.
									</div></dd><dt><a href="#CO83-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Set the IP address of the service to the value retrieved in step 2.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Retrieve the FQDN of the OpenShift Container Platform cluster by using the following command:
							</p><pre class="programlisting language-terminal">$ oc get dnses.config.openshift.io cluster -o json | jq .spec.baseDomain</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">openshift.example.com</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Point to the DNS server by using one of the following methods:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Add the <code class="literal">kubeSecondaryDNSNameServerIP</code> value to the <code class="literal">resolv.conf</code> file on your local machine.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Editing the <code class="literal">resolv.conf</code> file overwrites any existing DNS settings.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Add the <code class="literal">kubeSecondaryDNSNameServerIP</code> value and the cluster FQDN to the enterprise DNS server records. For example:
									</p><pre class="programlisting language-terminal">vm.&lt;FQDN&gt;. IN NS ns.vm.&lt;FQDN&gt;.</pre><pre class="programlisting language-terminal">ns.vm.&lt;FQDN&gt;. IN A 10.46.41.94</pre></li></ul></div></li></ol></div></section><section class="section" id="virt-connecting-vm-secondarynw-fqdn_virt-accessing-vm-secondary-network-fqdn"><div class="titlepage"><div><div><h4 class="title">10.18.8.2. Connecting to a virtual machine on a secondary network by using the cluster FQDN</h4></div></div></div><p>
						You can access a virtual machine (VM) that is attached to a secondary network interface from outside the cluster by using the fully qualified domain name (FQDN) of the cluster.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The QEMU guest agent must be running on the virtual machine.
							</li><li class="listitem">
								The IP address of the VM that you want to connect to, by using a DNS client, must be public.
							</li><li class="listitem">
								You have configured the DNS server for secondary networks.
							</li><li class="listitem">
								You have retrieved the fully qualified domain name (FQDN) of the cluster.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Retrieve the VM configuration by using the following command:
							</p><pre class="programlisting language-terminal">$ oc get vm -n &lt;namespace&gt; &lt;vm_name&gt; -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    kubevirt.io/vm: example-vm
  name: example-vm
  namespace: example-namespace
spec:
  running: true
  template:
    metadata:
      labels:
        kubevirt.io/vm: example-vm
    spec:
      domain:
        devices:
# ...
          interfaces:
            - bridge: {}
              name: example-nic
# ...
      networks:
      - multus:
          networkName: bridge-conf
        name: example-nic <span id="CO84-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO84-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the name of the secondary network interface.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Connect to the VM by using the <code class="literal">ssh</code> command:
							</p><pre class="programlisting language-terminal">$ ssh &lt;user_name&gt;@&lt;interface_name&gt;.&lt;vm_name&gt;.&lt;namespace&gt;.vm.&lt;FQDN&gt; <span id="CO85-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO85-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the user name, interface name, VM name, VM namespace, and FQDN.
									</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
									
<pre class="programlisting language-terminal">$ ssh you@example-nic.example-vm.example-namespace.vm.openshift.example.com</pre>

								</p></div></li></ol></div></section><section class="section _additional-resources" id="additional-resources_accessing-vm-secondary-network-fqdn"><div class="titlepage"><div><div><h4 class="title">10.18.8.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#configuring-ingress-cluster-traffic-load-balancer">Configuring ingress cluster traffic using a load balancer</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#about-metallb">Load balancing with MetalLB</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-ip-for-vms">Configuring IP addresses for virtual machines</a>
							</li></ul></div></section></section><section class="section" id="virt-using-mac-address-pool-for-vms"><div class="titlepage"><div><div><h3 class="title">10.18.9. Using a MAC address pool for virtual machines</h3></div></div></div><p>
					The <span class="emphasis"><em>KubeMacPool</em></span> component provides a MAC address pool service for virtual machine NICs in a namespace.
				</p><section class="section" id="virt-about-kubemacpool_virt-using-mac-address-pool-for-vms"><div class="titlepage"><div><div><h4 class="title">10.18.9.1. About KubeMacPool</h4></div></div></div><p>
						KubeMacPool provides a MAC address pool per namespace and allocates MAC addresses for virtual machine NICs from the pool. This ensures that the NIC is assigned a unique MAC address that does not conflict with the MAC address of another virtual machine.
					</p><p>
						Virtual machine instances created from that virtual machine retain the assigned MAC address across reboots.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							KubeMacPool does not handle virtual machine instances created independently from a virtual machine.
						</p></div></div><p>
						KubeMacPool is enabled by default when you install OpenShift Virtualization. You can disable a MAC address pool for a namespace by adding the <code class="literal">mutatevirtualmachines.kubemacpool.io=ignore</code> label to the namespace. Re-enable KubeMacPool for the namespace by removing the label.
					</p></section><section class="section" id="virt-disabling-mac-address-pool-for-namespace-cli_virt-using-mac-address-pool-for-vms"><div class="titlepage"><div><div><h4 class="title">10.18.9.2. Disabling a MAC address pool for a namespace in the CLI</h4></div></div></div><p>
						Disable a MAC address pool for virtual machines in a namespace by adding the <code class="literal">mutatevirtualmachines.kubemacpool.io=ignore</code> label to the namespace.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Add the <code class="literal">mutatevirtualmachines.kubemacpool.io=ignore</code> label to the namespace. The following example disables KubeMacPool for two namespaces, <code class="literal">&lt;namespace1&gt;</code> and <code class="literal">&lt;namespace2&gt;</code>:
							</p><pre class="programlisting language-terminal">$ oc label namespace &lt;namespace1&gt; &lt;namespace2&gt; mutatevirtualmachines.kubemacpool.io=ignore</pre></li></ul></div></section><section class="section" id="virt-reenabling-mac-address-pool-for-namespace-cli_virt-using-mac-address-pool-for-vms"><div class="titlepage"><div><div><h4 class="title">10.18.9.3. Re-enabling a MAC address pool for a namespace in the CLI</h4></div></div></div><p>
						If you disabled KubeMacPool for a namespace and want to re-enable it, remove the <code class="literal">mutatevirtualmachines.kubemacpool.io=ignore</code> label from the namespace.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Earlier versions of OpenShift Virtualization used the label <code class="literal">mutatevirtualmachines.kubemacpool.io=allocate</code> to enable KubeMacPool for a namespace. This is still supported but redundant as KubeMacPool is now enabled by default.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Remove the KubeMacPool label from the namespace. The following example re-enables KubeMacPool for two namespaces, <code class="literal">&lt;namespace1&gt;</code> and <code class="literal">&lt;namespace2&gt;</code>:
							</p><pre class="programlisting language-terminal">$ oc label namespace &lt;namespace1&gt; &lt;namespace2&gt; mutatevirtualmachines.kubemacpool.io-</pre></li></ul></div></section></section></section><section class="section" id="virtual-machine-disks"><div class="titlepage"><div><div><h2 class="title">10.19. Virtual machine disks</h2></div></div></div><section class="section" id="virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h3 class="title">10.19.1. Configuring local storage for virtual machines</h3></div></div></div><p>
					You can configure local storage for virtual machines by using the hostpath provisioner (HPP).
				</p><p>
					When you install the OpenShift Virtualization Operator, the Hostpath Provisioner (HPP) Operator is automatically installed. The HPP is a local storage provisioner designed for OpenShift Virtualization that is created by the Hostpath Provisioner Operator. To use the HPP, you must create an HPP custom resource (CR).
				</p><section class="section" id="virt-creating-hpp-basic-storage-pool_virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h4 class="title">10.19.1.1. Creating a hostpath provisioner with a basic storage pool</h4></div></div></div><p>
						You configure a hostpath provisioner (HPP) with a basic storage pool by creating an HPP custom resource (CR) with a <code class="literal">storagePools</code> stanza. The storage pool specifies the name and path used by the CSI driver.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The directories specified in <code class="literal">spec.storagePools.path</code> must have read/write access.
							</li><li class="listitem">
								The storage pools must not be in the same partition as the operating system. Otherwise, the operating system partition might become filled to capacity, which will impact performance or cause the node to become unstable or unusable.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create an <code class="literal">hpp_cr.yaml</code> file with a <code class="literal">storagePools</code> stanza as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: hostpathprovisioner.kubevirt.io/v1beta1
kind: HostPathProvisioner
metadata:
  name: hostpath-provisioner
spec:
  imagePullPolicy: IfNotPresent
  storagePools: <span id="CO86-1"><!--Empty--></span><span class="callout">1</span>
  - name: any_name
    path: "/var/myvolumes" <span id="CO86-2"><!--Empty--></span><span class="callout">2</span>
workload:
  nodeSelector:
    kubernetes.io/os: linux</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO86-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The <code class="literal">storagePools</code> stanza is an array to which you can add multiple entries.
									</div></dd><dt><a href="#CO86-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specify the storage pool directories under this node path.
									</div></dd></dl></div></li><li class="listitem">
								Save the file and exit.
							</li><li class="listitem"><p class="simpara">
								Create the HPP by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f hpp_cr.yaml</pre></li></ol></div><section class="section" id="virt-about-creating-storage-classes_virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h5 class="title">10.19.1.1.1. About creating storage classes</h5></div></div></div><p>
							When you create a storage class, you set parameters that affect the dynamic provisioning of persistent volumes (PVs) that belong to that storage class. You cannot update a <code class="literal">StorageClass</code> object’s parameters after you create it.
						</p><p>
							In order to use the hostpath provisioner (HPP) you must create an associated storage class for the CSI driver with the <code class="literal">storagePools</code> stanza.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Virtual machines use data volumes that are based on local PVs. Local PVs are bound to specific nodes. While the disk image is prepared for consumption by the virtual machine, it is possible that the virtual machine cannot be scheduled to the node where the local storage PV was previously pinned.
							</p><p>
								To solve this problem, use the Kubernetes pod scheduler to bind the persistent volume claim (PVC) to a PV on the correct node. By using the <code class="literal">StorageClass</code> value with <code class="literal">volumeBindingMode</code> parameter set to <code class="literal">WaitForFirstConsumer</code>, the binding and provisioning of the PV is delayed until a pod is created using the PVC.
							</p></div></div></section><section class="section" id="virt-creating-storage-class-csi-driver_virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h5 class="title">10.19.1.1.2. Creating a storage class for the CSI driver with the storagePools stanza</h5></div></div></div><p>
							You create a storage class custom resource (CR) for the hostpath provisioner (HPP) CSI driver.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a <code class="literal">storageclass_csi.yaml</code> file to define the storage class:
								</p><pre class="programlisting language-yaml">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: hostpath-csi
provisioner: kubevirt.io.hostpath-provisioner
reclaimPolicy: Delete <span id="CO87-1"><!--Empty--></span><span class="callout">1</span>
volumeBindingMode: WaitForFirstConsumer <span id="CO87-2"><!--Empty--></span><span class="callout">2</span>
parameters:
  storagePool: my-storage-pool <span id="CO87-3"><!--Empty--></span><span class="callout">3</span></pre></li></ol></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO87-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The two possible <code class="literal">reclaimPolicy</code> values are <code class="literal">Delete</code> and <code class="literal">Retain</code>. If you do not specify a value, the default value is <code class="literal">Delete</code>.
								</div></dd><dt><a href="#CO87-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The <code class="literal">volumeBindingMode</code> parameter determines when dynamic provisioning and volume binding occur. Specify <code class="literal">WaitForFirstConsumer</code> to delay the binding and provisioning of a persistent volume (PV) until after a pod that uses the persistent volume claim (PVC) is created. This ensures that the PV meets the pod’s scheduling requirements.
								</div></dd><dt><a href="#CO87-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Specify the name of the storage pool defined in the HPP CR.
								</div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
											Save the file and exit.
										</li><li class="listitem"><p class="simpara">
											Create the <code class="literal">StorageClass</code> object by running the following command:
										</p><pre class="programlisting language-terminal">$ oc create -f storageclass_csi.yaml</pre></li></ol></div></dd></dl></div></section></section><section class="section" id="virt-about-storage-pools-pvc-templates_virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h4 class="title">10.19.1.2. About storage pools created with PVC templates</h4></div></div></div><p>
						If you have a single, large persistent volume (PV), you can create a storage pool by defining a PVC template in the hostpath provisioner (HPP) custom resource (CR).
					</p><p>
						A storage pool created with a PVC template can contain multiple HPP volumes. Splitting a PV into smaller volumes provides greater flexibility for data allocation.
					</p><p>
						The PVC template is based on the <code class="literal">spec</code> stanza of the <code class="literal">PersistentVolumeClaim</code> object:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">PersistentVolumeClaim</code> object</strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: iso-pvc
spec:
  volumeMode: Block <span id="CO88-1"><!--Empty--></span><span class="callout">1</span>
  storageClassName: my-storage-class
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO88-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								This value is only required for block volume mode PVs.
							</div></dd></dl></div><p>
						You define a storage pool using a <code class="literal">pvcTemplate</code> specification in the HPP CR. The Operator creates a PVC from the <code class="literal">pvcTemplate</code> specification for each node containing the HPP CSI driver. The PVC created from the PVC template consumes the single large PV, allowing the HPP to create smaller dynamic volumes.
					</p><p>
						You can combine basic storage pools with storage pools created from PVC templates.
					</p><section class="section" id="virt-creating-storage-pool-pvc-template_virt-configuring-local-storage-for-vms"><div class="titlepage"><div><div><h5 class="title">10.19.1.2.1. Creating a storage pool with a PVC template</h5></div></div></div><p>
							You can create a storage pool for multiple hostpath provisioner (HPP) volumes by specifying a PVC template in the HPP custom resource (CR).
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The directories specified in <code class="literal">spec.storagePools.path</code> must have read/write access.
								</li><li class="listitem">
									The storage pools must not be in the same partition as the operating system. Otherwise, the operating system partition might become filled to capacity, which will impact performance or cause the node to become unstable or unusable.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create an <code class="literal">hpp_pvc_template_pool.yaml</code> file for the HPP CR that specifies a persistent volume (PVC) template in the <code class="literal">storagePools</code> stanza according to the following example:
								</p><pre class="programlisting language-yaml">apiVersion: hostpathprovisioner.kubevirt.io/v1beta1
kind: HostPathProvisioner
metadata:
  name: hostpath-provisioner
spec:
  imagePullPolicy: IfNotPresent
  storagePools: <span id="CO89-1"><!--Empty--></span><span class="callout">1</span>
  - name: my-storage-pool
    path: "/var/myvolumes" <span id="CO89-2"><!--Empty--></span><span class="callout">2</span>
    pvcTemplate:
      volumeMode: Block <span id="CO89-3"><!--Empty--></span><span class="callout">3</span>
      storageClassName: my-storage-class <span id="CO89-4"><!--Empty--></span><span class="callout">4</span>
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 5Gi <span id="CO89-5"><!--Empty--></span><span class="callout">5</span>
  workload:
    nodeSelector:
      kubernetes.io/os: linux</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO89-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The <code class="literal">storagePools</code> stanza is an array that can contain both basic and PVC template storage pools.
										</div></dd><dt><a href="#CO89-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											Specify the storage pool directories under this node path.
										</div></dd><dt><a href="#CO89-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											Optional: The <code class="literal">volumeMode</code> parameter can be either <code class="literal">Block</code> or <code class="literal">Filesystem</code> as long as it matches the provisioned volume format. If no value is specified, the default is <code class="literal">Filesystem</code>. If the <code class="literal">volumeMode</code> is <code class="literal">Block</code>, the mounting pod creates an XFS file system on the block volume before mounting it.
										</div></dd><dt><a href="#CO89-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											If the <code class="literal">storageClassName</code> parameter is omitted, the default storage class is used to create PVCs. If you omit <code class="literal">storageClassName</code>, ensure that the HPP storage class is not the default storage class.
										</div></dd><dt><a href="#CO89-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											You can specify statically or dynamically provisioned storage. In either case, ensure the requested storage size is appropriate for the volume you want to virtually divide or the PVC cannot be bound to the large PV. If the storage class you are using uses dynamically provisioned storage, pick an allocation size that matches the size of a typical request.
										</div></dd></dl></div></li><li class="listitem">
									Save the file and exit.
								</li><li class="listitem"><p class="simpara">
									Create the HPP with a storage pool by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f hpp_pvc_template_pool.yaml</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>
								</li></ul></div></section></section></section><section class="section" id="virt-creating-data-volumes"><div class="titlepage"><div><div><h3 class="title">10.19.2. Creating data volumes</h3></div></div></div><p>
					You can create a data volume by using either the PVC or storage API.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						When using OpenShift Virtualization with OpenShift Container Platform Container Storage, specify RBD block mode persistent volume claims (PVCs) when creating virtual machine disks. With virtual machine disks, RBD block mode volumes are more efficient and provide better performance than Ceph FS or RBD filesystem-mode PVCs.
					</p><p>
						To specify RBD block mode PVCs, use the 'ocs-storagecluster-ceph-rbd' storage class and <code class="literal">VolumeMode: Block</code>.
					</p></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					Whenever possible, use the storage API to optimize space allocation and maximize performance.
				</p></div></div><p>
					A <span class="emphasis"><em>storage profile</em></span> is a custom resource that the CDI manages. It provides recommended storage settings based on the associated storage class. A storage profile is allocated for each storage class.
				</p><p>
					Storage profiles enable you to create data volumes quickly while reducing coding and minimizing potential errors.
				</p><p>
					For recognized storage types, the CDI provides values that optimize the creation of PVCs. However, you can configure automatic settings for a storage class if you customize the storage profile.
				</p><section class="section" id="virt-about-datavolumes_virt-creating-data-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.2.1. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-creating-data-volumes-using-storage-api_virt-creating-data-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.2.2. Creating data volumes using the storage API</h4></div></div></div><p>
						When you create a data volume using the storage API, the Containerized Data Interface (CDI) optimizes your persistent volume claim (PVC) allocation based on the type of storage supported by your selected storage class. You only have to specify the data volume name, namespace, and the amount of storage that you want to allocate.
					</p><p>
						For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								When using Ceph RBD, <code class="literal">accessModes</code> is automatically set to <code class="literal">ReadWriteMany</code>, which enables live migration. <code class="literal">volumeMode</code> is set to <code class="literal">Block</code> to maximize performance.
							</li><li class="listitem">
								When you are using <code class="literal">volumeMode: Filesystem</code>, more space will automatically be requested by the CDI, if required to accommodate file system overhead.
							</li></ul></div><p>
						In the following YAML, using the storage API requests a data volume with two gigabytes of usable space. The user does not need to know the <code class="literal">volumeMode</code> in order to correctly estimate the required persistent volume claim (PVC) size. The CDI chooses the optimal combination of <code class="literal">accessModes</code> and <code class="literal">volumeMode</code> attributes automatically. These optimal values are based on the type of storage or the defaults that you define in your storage profile. If you want to provide custom values, they override the system-calculated values.
					</p><div class="formalpara"><p class="title"><strong>Example DataVolume definition</strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;datavolume&gt; <span id="CO90-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc: <span id="CO90-2"><!--Empty--></span><span class="callout">2</span>
      namespace: "&lt;source_namespace&gt;" <span id="CO90-3"><!--Empty--></span><span class="callout">3</span>
      name: "&lt;my_vm_disk&gt;" <span id="CO90-4"><!--Empty--></span><span class="callout">4</span>
  storage: <span id="CO90-5"><!--Empty--></span><span class="callout">5</span>
    resources:
      requests:
        storage: 2Gi <span id="CO90-6"><!--Empty--></span><span class="callout">6</span>
    storageClassName: &lt;storage_class&gt; <span id="CO90-7"><!--Empty--></span><span class="callout">7</span></pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO90-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The name of the new data volume.
							</div></dd><dt><a href="#CO90-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								Indicate that the source of the import is an existing persistent volume claim (PVC).
							</div></dd><dt><a href="#CO90-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The namespace where the source PVC exists.
							</div></dd><dt><a href="#CO90-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The name of the source PVC.
							</div></dd><dt><a href="#CO90-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								Indicates allocation using the storage API.
							</div></dd><dt><a href="#CO90-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								Specifies the amount of available space that you request for the PVC.
							</div></dd><dt><a href="#CO90-7"><span class="callout">7</span></a> </dt><dd><div class="para">
								Optional: The name of the storage class. If the storage class is not specified, the system default storage class is used.
							</div></dd></dl></div></section><section class="section" id="virt-creating-data-volumes-using-pvc-api_virt-creating-data-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.2.3. Creating data volumes using the PVC API</h4></div></div></div><p>
						When you create a data volume using the PVC API, the Containerized Data Interface (CDI) creates the data volume based on what you specify for the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">accessModes</code> (<code class="literal">ReadWriteOnce</code>, <code class="literal">ReadWriteMany</code>, or <code class="literal">ReadOnlyMany</code>)
							</li><li class="listitem">
								<code class="literal">volumeMode</code> (<code class="literal">Filesystem</code> or <code class="literal">Block</code>)
							</li><li class="listitem">
								<code class="literal">capacity</code> of <code class="literal">storage</code> (<code class="literal">5Gi</code>, for example)
							</li></ul></div><p>
						In the following YAML, using the PVC API allocates a data volume with a storage capacity of two gigabytes. You specify an access mode of <code class="literal">ReadWriteMany</code> to enable live migration. Because you know the values your system can support, you specify <code class="literal">Block</code> storage instead of the default, <code class="literal">Filesystem</code>.
					</p><div class="formalpara"><p class="title"><strong>Example DataVolume definition</strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;datavolume&gt; <span id="CO91-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc: <span id="CO91-2"><!--Empty--></span><span class="callout">2</span>
      namespace: "&lt;source_namespace&gt;" <span id="CO91-3"><!--Empty--></span><span class="callout">3</span>
      name: "&lt;my_vm_disk&gt;" <span id="CO91-4"><!--Empty--></span><span class="callout">4</span>
  pvc: <span id="CO91-5"><!--Empty--></span><span class="callout">5</span>
    accessModes: <span id="CO91-6"><!--Empty--></span><span class="callout">6</span>
      - ReadWriteMany
    resources:
      requests:
        storage: 2Gi <span id="CO91-7"><!--Empty--></span><span class="callout">7</span>
    volumeMode: Block <span id="CO91-8"><!--Empty--></span><span class="callout">8</span>
    storageClassName: &lt;storage_class&gt; <span id="CO91-9"><!--Empty--></span><span class="callout">9</span></pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO91-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The name of the new data volume.
							</div></dd><dt><a href="#CO91-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								In the <code class="literal">source</code> section, <code class="literal">pvc</code> indicates that the source of the import is an existing persistent volume claim (PVC).
							</div></dd><dt><a href="#CO91-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The namespace where the source PVC exists.
							</div></dd><dt><a href="#CO91-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The name of the source PVC.
							</div></dd><dt><a href="#CO91-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								Indicates allocation using the PVC API.
							</div></dd><dt><a href="#CO91-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								<code class="literal">accessModes</code> is required when using the PVC API.
							</div></dd><dt><a href="#CO91-7"><span class="callout">7</span></a> </dt><dd><div class="para">
								Specifies the amount of space you are requesting for your data volume.
							</div></dd><dt><a href="#CO91-8"><span class="callout">8</span></a> </dt><dd><div class="para">
								Specifies that the destination is a block PVC.
							</div></dd><dt><a href="#CO91-9"><span class="callout">9</span></a> </dt><dd><div class="para">
								Optionally, specify the storage class. If the storage class is not specified, the system default storage class is used.
							</div></dd></dl></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							When you explicitly allocate a data volume by using the PVC API and you are not using <code class="literal">volumeMode: Block</code>, consider file system overhead.
						</p><p>
							File system overhead is the amount of space required by the file system to maintain its metadata. The amount of space required for file system metadata is file system dependent. Failing to account for file system overhead in your storage capacity request can result in an underlying persistent volume claim (PVC) that is not large enough to accommodate your virtual machine disk.
						</p><p>
							If you use the storage API, the CDI will factor in file system overhead and request a larger persistent volume claim (PVC) to ensure that your allocation request is successful.
						</p></div></div></section><section class="section" id="virt-customizing-storage-profile_virt-creating-data-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.2.4. Customizing the storage profile</h4></div></div></div><p>
						You can specify default parameters by editing the <code class="literal">StorageProfile</code> object for the provisioner’s storage class. These default parameters only apply to the persistent volume claim (PVC) if they are not configured in the <code class="literal">DataVolume</code> object.
					</p><p>
						An empty <code class="literal">status</code> section in a storage profile indicates that a storage provisioner is not recognized by the Containerized Data Interface (CDI). Customizing a storage profile is necessary if you have a storage provisioner that is not recognized by the CDI. In this case, the administrator sets appropriate values in the storage profile to ensure successful allocations.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							If you create a data volume and omit YAML attributes and these attributes are not defined in the storage profile, then the requested storage will not be allocated and the underlying persistent volume claim (PVC) will not be created.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Ensure that your planned configuration is supported by the storage class and its provider. Specifying an incompatible configuration in a storage profile causes volume provisioning to fail.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the storage profile. In this example, the provisioner is not recognized by CDI:
							</p><pre class="programlisting language-terminal">$ oc edit -n openshift-cnv storageprofile &lt;storage_class&gt;</pre><div class="formalpara"><p class="title"><strong>Example storage profile</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: StorageProfile
metadata:
  name: &lt;unknown_provisioner_class&gt;
# ...
spec: {}
status:
  provisioner: &lt;unknown_provisioner&gt;
  storageClass: &lt;unknown_provisioner_class&gt;</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Provide the needed attribute values in the storage profile:
							</p><div class="formalpara"><p class="title"><strong>Example storage profile</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: StorageProfile
metadata:
  name: &lt;unknown_provisioner_class&gt;
# ...
spec:
  claimPropertySets:
  - accessModes:
    - ReadWriteOnce <span id="CO92-1"><!--Empty--></span><span class="callout">1</span>
    volumeMode:
      Filesystem <span id="CO92-2"><!--Empty--></span><span class="callout">2</span>
status:
  provisioner: &lt;unknown_provisioner&gt;
  storageClass: &lt;unknown_provisioner_class&gt;</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO92-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The <code class="literal">accessModes</code> that you select.
									</div></dd><dt><a href="#CO92-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">volumeMode</code> that you select.
									</div></dd></dl></div><p class="simpara">
								After you save your changes, the selected values appear in the storage profile <code class="literal">status</code> element.
							</p></li></ol></div><section class="section" id="virt-customizing-storage-profile-default-cloning-strategy_virt-creating-data-volumes"><div class="titlepage"><div><div><h5 class="title">10.19.2.4.1. Setting a default cloning strategy using a storage profile</h5></div></div></div><p>
							You can use storage profiles to set a default cloning method for a storage class, creating a <span class="emphasis"><em>cloning strategy</em></span>. Setting cloning strategies can be helpful, for example, if your storage vendor only supports certain cloning methods. It also allows you to select a method that limits resource usage or maximizes performance.
						</p><p>
							Cloning strategies can be specified by setting the <code class="literal">cloneStrategy</code> attribute in a storage profile to one of these values:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">snapshot</code> is used by default when snapshots are configured. This cloning strategy uses a temporary volume snapshot to clone the volume. The storage provisioner must support Container Storage Interface (CSI) snapshots.
								</li><li class="listitem">
									<code class="literal">copy</code> uses a source pod and a target pod to copy data from the source volume to the target volume. Host-assisted cloning is the least efficient method of cloning.
								</li><li class="listitem">
									<code class="literal">csi-clone</code> uses the CSI clone API to efficiently clone an existing volume without using an interim volume snapshot. Unlike <code class="literal">snapshot</code> or <code class="literal">copy</code>, which are used by default if no storage profile is defined, CSI volume cloning is only used when you specify it in the <code class="literal">StorageProfile</code> object for the provisioner’s storage class.
								</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can also set clone strategies using the CLI without modifying the default <code class="literal">claimPropertySets</code> in your YAML <code class="literal">spec</code> section.
							</p></div></div><div class="formalpara"><p class="title"><strong>Example storage profile</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: StorageProfile
metadata:
  name: &lt;provisioner_class&gt;
# ...
spec:
  claimPropertySets:
  - accessModes:
    - ReadWriteOnce <span id="CO93-1"><!--Empty--></span><span class="callout">1</span>
    volumeMode:
      Filesystem <span id="CO93-2"><!--Empty--></span><span class="callout">2</span>
  cloneStrategy: csi-clone <span id="CO93-3"><!--Empty--></span><span class="callout">3</span>
status:
  provisioner: &lt;provisioner&gt;
  storageClass: &lt;provisioner_class&gt;</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO93-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Specify the access mode.
								</div></dd><dt><a href="#CO93-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Specify the volume mode.
								</div></dd><dt><a href="#CO93-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Specify the default cloning strategy.
								</div></dd></dl></div></section></section><section class="section _additional-resources" id="additional-resources_creating-data-volumes-using-profiles"><div class="titlepage"><div><div><h4 class="title">10.19.2.5. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-creating-storage-classes_virt-configuring-local-storage-for-vms">About creating storage classes</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-overriding-default-fs-overhead-value_virt-reserving-pvc-space-fs-overhead">Overriding the default file system overhead value</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-cloning-a-datavolume-using-smart-cloning">Cloning a data volume using smart cloning</a>
							</li></ul></div></section></section><section class="section" id="virt-reserving-pvc-space-fs-overhead"><div class="titlepage"><div><div><h3 class="title">10.19.3. Reserving PVC space for file system overhead</h3></div></div></div><p>
					By default, the OpenShift Virtualization reserves space for file system overhead data in persistent volume claims (PVCs) that use the <code class="literal">Filesystem</code> volume mode. You can set the percentage to reserve space for this purpose globally and for specific storage classes.
				</p><section class="section" id="virt-how-fs-overhead-affects-space-vm-disks_virt-reserving-pvc-space-fs-overhead"><div class="titlepage"><div><div><h4 class="title">10.19.3.1. How file system overhead affects space for virtual machine disks</h4></div></div></div><p>
						When you add a virtual machine disk to a persistent volume claim (PVC) that uses the <code class="literal">Filesystem</code> volume mode, you must ensure that there is enough space on the PVC for:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The virtual machine disk.
							</li><li class="listitem">
								The space reserved for file system overhead, such as metadata
							</li></ul></div><p>
						By default, OpenShift Virtualization reserves 5.5% of the PVC space for overhead, reducing the space available for virtual machine disks by that amount.
					</p><p>
						You can configure a different overhead value by editing the <code class="literal">HCO</code> object. You can change the value globally and you can specify values for specific storage classes.
					</p></section><section class="section" id="virt-overriding-default-fs-overhead-value_virt-reserving-pvc-space-fs-overhead"><div class="titlepage"><div><div><h4 class="title">10.19.3.2. Overriding the default file system overhead value</h4></div></div></div><p>
						Change the amount of persistent volume claim (PVC) space that the OpenShift Virtualization reserves for file system overhead by editing the <code class="literal">spec.filesystemOverhead</code> attribute of the <code class="literal">HCO</code> object.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HCO</code> object for editing by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">spec.filesystemOverhead</code> fields, populating them with your chosen values:
							</p><pre class="programlisting language-yaml"># ...
spec:
  filesystemOverhead:
    global: "&lt;new_global_value&gt;" <span id="CO94-1"><!--Empty--></span><span class="callout">1</span>
    storageClass:
      &lt;storage_class_name&gt;: "&lt;new_value_for_this_storage_class&gt;" <span id="CO94-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO94-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The default file system overhead percentage used for any storage classes that do not already have a set value. For example, <code class="literal">global: "0.07"</code> reserves 7% of the PVC for file system overhead.
									</div></dd><dt><a href="#CO94-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The file system overhead percentage for the specified storage class. For example, <code class="literal">mystorageclass: "0.04"</code> changes the default overhead value for PVCs in the <code class="literal">mystorageclass</code> storage class to 4%.
									</div></dd></dl></div></li><li class="listitem">
								Save and exit the editor to update the <code class="literal">HCO</code> object.
							</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								View the <code class="literal">CDIConfig</code> status and verify your changes by running one of the following commands:
							</p><p class="simpara">
								To generally verify changes to <code class="literal">CDIConfig</code>:
							</p><pre class="programlisting language-terminal">$ oc get cdiconfig -o yaml</pre><p class="simpara">
								To view your specific changes to <code class="literal">CDIConfig</code>:
							</p><pre class="programlisting language-terminal">$ oc get cdiconfig -o jsonpath='{.items..status.filesystemOverhead}'</pre></li></ul></div></section></section><section class="section" id="virt-configuring-cdi-for-namespace-resourcequota"><div class="titlepage"><div><div><h3 class="title">10.19.4. Configuring CDI to work with namespaces that have a compute resource quota</h3></div></div></div><p>
					You can use the Containerized Data Importer (CDI) to import, upload, and clone virtual machine disks into namespaces that are subject to CPU and memory resource restrictions.
				</p><section class="section" id="virt-about-cpu-and-memory-quota-namespace_virt-configuring-cdi-for-namespace-resourcequota"><div class="titlepage"><div><div><h4 class="title">10.19.4.1. About CPU and memory quotas in a namespace</h4></div></div></div><p>
						A <span class="emphasis"><em>resource quota</em></span>, defined by the <code class="literal">ResourceQuota</code> object, imposes restrictions on a namespace that limit the total amount of compute resources that can be consumed by resources within that namespace.
					</p><p>
						The <code class="literal">HyperConverged</code> custom resource (CR) defines the user configuration for the Containerized Data Importer (CDI). The CPU and memory request and limit values are set to a default value of <code class="literal">0</code>. This ensures that pods created by CDI that do not specify compute resource requirements are given the default values and are allowed to run in a namespace that is restricted with a quota.
					</p></section><section class="section" id="virt-overriding-cpu-and-memory-defaults_virt-configuring-cdi-for-namespace-resourcequota"><div class="titlepage"><div><div><h4 class="title">10.19.4.2. Overriding CPU and memory defaults</h4></div></div></div><p>
						Modify the default settings for CPU and memory requests and limits for your use case by adding the <code class="literal">spec.resourceRequirements.storageWorkloads</code> stanza to the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">HyperConverged</code> CR by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">spec.resourceRequirements.storageWorkloads</code> stanza to the CR, setting the values based on your use case. For example:
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  resourceRequirements:
    storageWorkloads:
      limits:
        cpu: "500m"
        memory: "2Gi"
      requests:
        cpu: "250m"
        memory: "1Gi"</pre></li><li class="listitem">
								Save and exit the editor to update the <code class="literal">HyperConverged</code> CR.
							</li></ol></div></section><section class="section _additional-resources" id="virt-configuring-cdi-for-namespace-resourcequota_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.4.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#quotas-setting-per-project">Resource quotas per project</a>
							</li></ul></div></section></section><section class="section" id="virt-virt-managing-data-volume-annotations"><div class="titlepage"><div><div><h3 class="title">10.19.5. Managing data volume annotations</h3></div></div></div><p>
					Data volume (DV) annotations allow you to manage pod behavior. You can add one or more annotations to a data volume, which then propagates to the created importer pods.
				</p><section class="section" id="virt-dv-annotations_virt-managing-data-volume-annotations"><div class="titlepage"><div><div><h4 class="title">10.19.5.1. Example: Data volume annotations</h4></div></div></div><p>
						This example shows how you can configure data volume (DV) annotations to control which network the importer pod uses. The <code class="literal">v1.multus-cni.io/default-network: bridge-network</code> annotation causes the pod to use the multus network named <code class="literal">bridge-network</code> as its default network. If you want the importer pod to use both the default network from the cluster and the secondary multus network, use the <code class="literal">k8s.v1.cni.cncf.io/networks: &lt;network_name&gt;</code> annotation.
					</p><div class="formalpara"><p class="title"><strong>Multus network annotation example</strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: dv-ann
  annotations:
      v1.multus-cni.io/default-network: bridge-network <span id="CO95-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
      http:
         url: "example.exampleurl.com"
  pvc:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: 1Gi</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO95-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								Multus network annotation
							</div></dd></dl></div></section></section><section class="section" id="virt-using-preallocation-for-datavolumes"><div class="titlepage"><div><div><h3 class="title">10.19.6. Using preallocation for data volumes</h3></div></div></div><p>
					The Containerized Data Importer can preallocate disk space to improve write performance when creating data volumes.
				</p><p>
					You can enable preallocation for specific data volumes.
				</p><section class="section" id="virt-about-preallocation_virt-using-preallocation-for-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.19.6.1. About preallocation</h4></div></div></div><p>
						The Containerized Data Importer (CDI) can use the QEMU preallocate mode for data volumes to improve write performance. You can use preallocation mode for importing and uploading operations and when creating blank data volumes.
					</p><p>
						If preallocation is enabled, CDI uses the better preallocation method depending on the underlying file system and device type:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">fallocate</code></span></dt><dd>
									If the file system supports it, CDI uses the operating system’s <code class="literal">fallocate</code> call to preallocate space by using the <code class="literal">posix_fallocate</code> function, which allocates blocks and marks them as uninitialized.
								</dd><dt><span class="term"><code class="literal">full</code></span></dt><dd>
									If <code class="literal">fallocate</code> mode cannot be used, <code class="literal">full</code> mode allocates space for the image by writing data to the underlying storage. Depending on the storage location, all the empty allocated space might be zeroed.
								</dd></dl></div></section><section class="section" id="virt-enabling-preallocation-for-dv_virt-using-preallocation-for-datavolumes"><div class="titlepage"><div><div><h4 class="title">10.19.6.2. Enabling preallocation for a data volume</h4></div></div></div><p>
						You can enable preallocation for specific data volumes by including the <code class="literal">spec.preallocation</code> field in the data volume manifest. You can enable preallocation mode in either the web console or by using the OpenShift CLI (<code class="literal">oc</code>).
					</p><p>
						Preallocation mode is supported for all CDI source types.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Specify the <code class="literal">spec.preallocation</code> field in the data volume manifest:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: preallocated-datavolume
spec:
  source: <span id="CO96-1"><!--Empty--></span><span class="callout">1</span>
    ...
  pvc:
    ...
  preallocation: true <span id="CO96-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO96-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										All CDI source types support preallocation, however preallocation is ignored for cloning operations.
									</div></dd><dt><a href="#CO96-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">preallocation</code> field is a boolean that defaults to false.
									</div></dd></dl></div></li></ul></div></section></section><section class="section" id="virt-uploading-local-disk-images-web"><div class="titlepage"><div><div><h3 class="title">10.19.7. Uploading local disk images by using the web console</h3></div></div></div><p>
					You can upload a locally stored disk image file by using the web console.
				</p><section class="section" id="prerequisites-10"><div class="titlepage"><div><div><h4 class="title">10.19.7.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have a virtual machine image file in IMG, ISO, or QCOW2 format.
							</li><li class="listitem">
								If you require scratch space according to the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-web">CDI supported operations matrix</a>, you must first <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-defining-storageclass_virt-preparing-cdi-scratch-space">define a storage class or prepare CDI scratch space</a> for this operation to complete successfully.
							</li></ul></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-web"><div class="titlepage"><div><div><h4 class="title">10.19.7.2. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196956889376" scope="col">Content types</th><th align="left" valign="top" id="idm140196956888288" scope="col">HTTP</th><th align="left" valign="top" id="idm140196956397744" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196956396656" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196956395568" scope="col">Registry</th><th align="left" valign="top" id="idm140196956394480" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196956889376"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956888288"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956397744"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956396656"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956395568"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956394480"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196956889376"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956888288"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956397744"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956396656"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956395568"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956394480"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section><section class="section" id="virt-uploading-image-web_virt-uploading-local-disk-images-web"><div class="titlepage"><div><div><h4 class="title">10.19.7.3. Uploading an image file using the web console</h4></div></div></div><p>
						Use the web console to upload an image file to a new persistent volume claim (PVC). You can later use this PVC to attach the image to new virtual machines.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								You must have one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										A raw virtual machine image file in either ISO or IMG format.
									</li><li class="listitem">
										A virtual machine image file in QCOW2 format.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								For best results, compress your image file according to the following guidelines before you upload it:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Compress a raw image file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Using a compressed raw image file results in the most efficient upload.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Compress a QCOW2 image file by using the method that is recommended for your client:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												If you use a Linux client, <span class="emphasis"><em>sparsify</em></span> the QCOW2 file by using the <a class="link" href="https://libguestfs.org/virt-sparsify.1.html">virt-sparsify</a> tool.
											</li><li class="listitem">
												If you use a Windows client, compress the QCOW2 file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
											</li></ul></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								From the side menu of the web console, click <span class="strong strong"><strong>Storage</strong></span> → <span class="strong strong"><strong>Persistent Volume Claims</strong></span>.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Create Persistent Volume Claim</strong></span> drop-down list to expand it.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>With Data Upload Form</strong></span> to open the <span class="strong strong"><strong>Upload Data to Persistent Volume Claim</strong></span> page.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Browse</strong></span> to open the file manager and select the image that you want to upload, or drag the file into the <span class="strong strong"><strong>Drag a file here or browse to upload</strong></span> field.
							</li><li class="listitem"><p class="simpara">
								Optional: Set this image as the default image for a specific operating system.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select the <span class="strong strong"><strong>Attach this data to a virtual machine operating system</strong></span> check box.
									</li><li class="listitem">
										Select an operating system from the list.
									</li></ol></div></li><li class="listitem">
								The <span class="strong strong"><strong>Persistent Volume Claim Name</strong></span> field is automatically filled with a unique name and cannot be edited. Take note of the name assigned to the PVC so that you can identify it later, if necessary.
							</li><li class="listitem">
								Select a storage class from the <span class="strong strong"><strong>Storage Class</strong></span> list.
							</li><li class="listitem"><p class="simpara">
								In the <span class="strong strong"><strong>Size</strong></span> field, enter the size value for the PVC. Select the corresponding unit of measurement from the drop-down list.
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									The PVC size must be larger than the size of the uncompressed virtual disk.
								</p></div></div></li><li class="listitem">
								Select an <span class="strong strong"><strong>Access Mode</strong></span> that matches the storage class that you selected.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Upload</strong></span>.
							</li></ol></div></section><section class="section _additional-resources" id="virt-uploading-local-disk-images-web_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.7.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li></ul></div></section></section><section class="section" id="virt-uploading-local-disk-images-virtctl"><div class="titlepage"><div><div><h3 class="title">10.19.8. Uploading local disk images by using the virtctl tool</h3></div></div></div><p>
					You can upload a locally stored disk image to a new or existing persistent volume claim (PVC) by using the <code class="literal">virtctl</code> command-line utility.
				</p><section class="section" id="prerequisites-11"><div class="titlepage"><div><div><h4 class="title">10.19.8.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#installing-virtctl_virt-using-the-cli-tools">Install <code class="literal">virtctl</code></a>.
							</li><li class="listitem">
								You might need to <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-defining-storageclass_virt-preparing-cdi-scratch-space">define a storage class or prepare CDI scratch space</a> for this operation to complete successfully.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-uploading-local-disk-images-virtctl"><div class="titlepage"><div><div><h4 class="title">10.19.8.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-creating-an-upload-dv_virt-uploading-local-disk-images-virtctl"><div class="titlepage"><div><div><h4 class="title">10.19.8.3. Creating an upload data volume</h4></div></div></div><p>
						You can manually create a data volume with an <code class="literal">upload</code> data source to use for uploading local disk images.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a data volume configuration that specifies <code class="literal">spec: source: upload{}</code>:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;upload-datavolume&gt; <span id="CO97-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
      upload: {}
  pvc:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: &lt;2Gi&gt; <span id="CO97-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO97-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the data volume.
									</div></dd><dt><a href="#CO97-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The size of the data volume. Ensure that this value is greater than or equal to the size of the disk that you upload.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the data volume by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;upload-datavolume&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-uploading-local-disk-image-dv_virt-uploading-local-disk-images-virtctl"><div class="titlepage"><div><div><h4 class="title">10.19.8.4. Uploading a local disk image to a data volume</h4></div></div></div><p>
						You can use the <code class="literal">virtctl</code> CLI utility to upload a local disk image from a client machine to a data volume (DV) in your cluster. You can use a DV that already exists in your cluster or create a new DV during this procedure.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							After you upload a local disk image, you can add it to a virtual machine.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								You must have one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										A raw virtual machine image file in either ISO or IMG format.
									</li><li class="listitem">
										A virtual machine image file in QCOW2 format.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								For best results, compress your image file according to the following guidelines before you upload it:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Compress a raw image file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Using a compressed raw image file results in the most efficient upload.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Compress a QCOW2 image file by using the method that is recommended for your client:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												If you use a Linux client, <span class="emphasis"><em>sparsify</em></span> the QCOW2 file by using the <a class="link" href="https://libguestfs.org/virt-sparsify.1.html">virt-sparsify</a> tool.
											</li><li class="listitem">
												If you use a Windows client, compress the QCOW2 file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
											</li></ul></div></li></ul></div></li><li class="listitem">
								The <code class="literal">kubevirt-virtctl</code> package must be installed on the client machine.
							</li><li class="listitem">
								The client machine must be configured to trust the OpenShift Container Platform router’s certificate.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Identify the following items:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The name of the upload data volume that you want to use. If this data volume does not exist, it is created automatically.
									</li><li class="listitem">
										The size of the data volume, if you want it to be created during the upload procedure. The size must be greater than or equal to the size of the disk image.
									</li><li class="listitem">
										The file location of the virtual machine disk image that you want to upload.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Upload the disk image by running the <code class="literal">virtctl image-upload</code> command. Specify the parameters that you identified in the previous step. For example:
							</p><pre class="programlisting language-terminal">$ virtctl image-upload dv &lt;datavolume_name&gt; \ <span id="CO98-1"><!--Empty--></span><span class="callout">1</span>
--size=&lt;datavolume_size&gt; \ <span id="CO98-2"><!--Empty--></span><span class="callout">2</span>
--image-path=&lt;/path/to/image&gt; \ <span id="CO98-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO98-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the data volume.
									</div></dd><dt><a href="#CO98-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The size of the data volume. For example: <code class="literal">--size=500Mi</code>, <code class="literal">--size=1G</code>
									</div></dd><dt><a href="#CO98-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The file path of the virtual machine disk image.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If you do not want to create a new data volume, omit the <code class="literal">--size</code> parameter and include the <code class="literal">--no-create</code> flag.
										</li><li class="listitem">
											When uploading a disk image to a PVC, the PVC size must be larger than the size of the uncompressed virtual disk.
										</li><li class="listitem">
											To allow insecure server connections when using HTTPS, use the <code class="literal">--insecure</code> parameter. Be aware that when you use the <code class="literal">--insecure</code> flag, the authenticity of the upload endpoint is <span class="strong strong"><strong>not</strong></span> verified.
										</li></ul></div></div></div></li><li class="listitem"><p class="simpara">
								Optional. To verify that a data volume was created, view all data volumes by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get dvs</pre></li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-virtctl"><div class="titlepage"><div><div><h4 class="title">10.19.8.5. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196957160048" scope="col">Content types</th><th align="left" valign="top" id="idm140196957158960" scope="col">HTTP</th><th align="left" valign="top" id="idm140196957157872" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196957156784" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196957155696" scope="col">Registry</th><th align="left" valign="top" id="idm140196957154608" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196957160048"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196957158960"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957157872"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957156784"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196957155696"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957154608"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196957160048"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196957158960"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957157872"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957156784"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957155696"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196957154608"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section><section class="section _additional-resources" id="virt-uploading-local-disk-images-virtctl_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.8.6. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li></ul></div></section></section><section class="section" id="virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h3 class="title">10.19.9. Uploading a local disk image to a block storage persistent volume claim</h3></div></div></div><p>
					You can upload a local disk image into a block persistent volume claim (PVC) by using the <code class="literal">virtctl</code> command-line utility.
				</p><p>
					In this workflow, you create a local block device to use as a persistent volume, associate this block volume with an <code class="literal">upload</code> data volume, and use <code class="literal">virtctl</code> to upload the local disk image into the PVC.
				</p><section class="section" id="prerequisites-12"><div class="titlepage"><div><div><h4 class="title">10.19.9.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#installing-virtctl_virt-using-the-cli-tools">Install <code class="literal">virtctl</code></a>.
							</li><li class="listitem">
								You might need to <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-defining-storageclass_virt-preparing-cdi-scratch-space">define a storage class or prepare CDI scratch space</a> for this operation to complete successfully.
							</li></ul></div></section><section class="section" id="virt-about-datavolumes_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.2. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-about-block-pvs_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.3. About block persistent volumes</h4></div></div></div><p>
						A block persistent volume (PV) is a PV that is backed by a raw block device. These volumes do not have a file system and can provide performance benefits for virtual machines by reducing overhead.
					</p><p>
						Raw block volumes are provisioned by specifying <code class="literal">volumeMode: Block</code> in the PV and persistent volume claim (PVC) specification.
					</p></section><section class="section" id="virt-creating-local-block-pv_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.4. Creating a local block persistent volume</h4></div></div></div><p>
						If you intend to import a virtual machine image into block storage with a data volume, you must have an available local block persistent volume.
					</p><p>
						Create a local block persistent volume (PV) on a node by populating a file and mounting it as a loop device. You can then reference this loop device in a PV manifest as a <code class="literal">Block</code> volume and use it as a block device for a virtual machine image.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log in as <code class="literal">root</code> to the node on which to create the local PV. This procedure uses <code class="literal">node01</code> for its examples.
							</li><li class="listitem"><p class="simpara">
								Create a file and populate it with null characters so that it can be used as a block device. The following example creates a file <code class="literal">loop10</code> with a size of 2Gb (20 100Mb blocks):
							</p><pre class="programlisting language-terminal">$ dd if=/dev/zero of=&lt;loop10&gt; bs=100M count=20</pre></li><li class="listitem"><p class="simpara">
								Mount the <code class="literal">loop10</code> file as a loop device.
							</p><pre class="programlisting language-terminal">$ losetup &lt;/dev/loop10&gt;d3 &lt;loop10&gt; <span id="CO99-1"><!--Empty--></span><span class="callout">1</span> <span id="CO99-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO99-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										File path where the loop device is mounted.
									</div></dd><dt><a href="#CO99-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The file created in the previous step to be mounted as the loop device.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">PersistentVolume</code> manifest that references the mounted loop device.
							</p><pre class="programlisting language-yaml">kind: PersistentVolume
apiVersion: v1
metadata:
  name: &lt;local-block-pv10&gt;
  annotations:
spec:
  local:
    path: &lt;/dev/loop10&gt; <span id="CO100-1"><!--Empty--></span><span class="callout">1</span>
  capacity:
    storage: &lt;2Gi&gt;
  volumeMode: Block <span id="CO100-2"><!--Empty--></span><span class="callout">2</span>
  storageClassName: local <span id="CO100-3"><!--Empty--></span><span class="callout">3</span>
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Delete
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - &lt;node01&gt; <span id="CO100-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO100-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The path of the loop device on the node.
									</div></dd><dt><a href="#CO100-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specifies it is a block PV.
									</div></dd><dt><a href="#CO100-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: Set a storage class for the PV. If you omit it, the cluster default is used.
									</div></dd><dt><a href="#CO100-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The node on which the block device was mounted.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the block PV.
							</p><pre class="programlisting language-terminal"># oc create -f &lt;local-block-pv10.yaml&gt;<span id="CO101-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO101-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The file name of the persistent volume created in the previous step.
									</div></dd></dl></div></li></ol></div></section><section class="section" id="virt-creating-an-upload-dv_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.5. Creating an upload data volume</h4></div></div></div><p>
						You can manually create a data volume with an <code class="literal">upload</code> data source to use for uploading local disk images.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a data volume configuration that specifies <code class="literal">spec: source: upload{}</code>:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;upload-datavolume&gt; <span id="CO102-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
      upload: {}
  pvc:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: &lt;2Gi&gt; <span id="CO102-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO102-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the data volume.
									</div></dd><dt><a href="#CO102-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The size of the data volume. Ensure that this value is greater than or equal to the size of the disk that you upload.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the data volume by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;upload-datavolume&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-uploading-local-disk-image-dv_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.6. Uploading a local disk image to a data volume</h4></div></div></div><p>
						You can use the <code class="literal">virtctl</code> CLI utility to upload a local disk image from a client machine to a data volume (DV) in your cluster. You can use a DV that already exists in your cluster or create a new DV during this procedure.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							After you upload a local disk image, you can add it to a virtual machine.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								You must have one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										A raw virtual machine image file in either ISO or IMG format.
									</li><li class="listitem">
										A virtual machine image file in QCOW2 format.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								For best results, compress your image file according to the following guidelines before you upload it:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Compress a raw image file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Using a compressed raw image file results in the most efficient upload.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Compress a QCOW2 image file by using the method that is recommended for your client:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												If you use a Linux client, <span class="emphasis"><em>sparsify</em></span> the QCOW2 file by using the <a class="link" href="https://libguestfs.org/virt-sparsify.1.html">virt-sparsify</a> tool.
											</li><li class="listitem">
												If you use a Windows client, compress the QCOW2 file by using <code class="literal">xz</code> or <code class="literal">gzip</code>.
											</li></ul></div></li></ul></div></li><li class="listitem">
								The <code class="literal">kubevirt-virtctl</code> package must be installed on the client machine.
							</li><li class="listitem">
								The client machine must be configured to trust the OpenShift Container Platform router’s certificate.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Identify the following items:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The name of the upload data volume that you want to use. If this data volume does not exist, it is created automatically.
									</li><li class="listitem">
										The size of the data volume, if you want it to be created during the upload procedure. The size must be greater than or equal to the size of the disk image.
									</li><li class="listitem">
										The file location of the virtual machine disk image that you want to upload.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Upload the disk image by running the <code class="literal">virtctl image-upload</code> command. Specify the parameters that you identified in the previous step. For example:
							</p><pre class="programlisting language-terminal">$ virtctl image-upload dv &lt;datavolume_name&gt; \ <span id="CO103-1"><!--Empty--></span><span class="callout">1</span>
--size=&lt;datavolume_size&gt; \ <span id="CO103-2"><!--Empty--></span><span class="callout">2</span>
--image-path=&lt;/path/to/image&gt; \ <span id="CO103-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO103-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the data volume.
									</div></dd><dt><a href="#CO103-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The size of the data volume. For example: <code class="literal">--size=500Mi</code>, <code class="literal">--size=1G</code>
									</div></dd><dt><a href="#CO103-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The file path of the virtual machine disk image.
									</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If you do not want to create a new data volume, omit the <code class="literal">--size</code> parameter and include the <code class="literal">--no-create</code> flag.
										</li><li class="listitem">
											When uploading a disk image to a PVC, the PVC size must be larger than the size of the uncompressed virtual disk.
										</li><li class="listitem">
											To allow insecure server connections when using HTTPS, use the <code class="literal">--insecure</code> parameter. Be aware that when you use the <code class="literal">--insecure</code> flag, the authenticity of the upload endpoint is <span class="strong strong"><strong>not</strong></span> verified.
										</li></ul></div></div></div></li><li class="listitem"><p class="simpara">
								Optional. To verify that a data volume was created, view all data volumes by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get dvs</pre></li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-uploading-local-disk-images-block"><div class="titlepage"><div><div><h4 class="title">10.19.9.7. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196956250128" scope="col">Content types</th><th align="left" valign="top" id="idm140196956249040" scope="col">HTTP</th><th align="left" valign="top" id="idm140196956247952" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196956246864" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196956245776" scope="col">Registry</th><th align="left" valign="top" id="idm140196956244688" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196956250128"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956249040"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956247952"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956246864"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196956245776"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956244688"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196956250128"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196956249040"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956247952"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956246864"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956245776"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196956244688"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section><section class="section _additional-resources" id="virt-uploading-local-disk-images-block_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.9.8. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li></ul></div></section></section><section class="section" id="virt-managing-vm-snapshots"><div class="titlepage"><div><div><h3 class="title">10.19.10. Managing virtual machine snapshots</h3></div></div></div><p>
					You can create and delete virtual machine (VM) snapshots for VMs, whether the VMs are powered off (offline) or on (online). You can only restore to a powered off (offline) VM. OpenShift Virtualization supports VM snapshots on the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat OpenShift Data Foundation
						</li><li class="listitem">
							Any other cloud storage provider with the Container Storage Interface (CSI) driver that supports the Kubernetes Volume Snapshot API
						</li></ul></div><p>
					Online snapshots have a default time deadline of five minutes (<code class="literal">5m</code>) that can be changed, if needed.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Online snapshots are supported for virtual machines that have hot-plugged virtual disks. However, hot-plugged disks that are not in the virtual machine specification are not included in the snapshot.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
					</p><p>
						The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
					</p></div></div><section class="section" id="virt-about-vm-snapshots_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.1. About virtual machine snapshots</h4></div></div></div><p>
						A <span class="emphasis"><em>snapshot</em></span> represents the state and data of a virtual machine (VM) at a specific point in time. You can use a snapshot to restore an existing VM to a previous state (represented by the snapshot) for backup and disaster recovery or to rapidly roll back to a previous development version.
					</p><p>
						A VM snapshot is created from a VM that is powered off (Stopped state) or powered on (Running state).
					</p><p>
						When taking a snapshot of a running VM, the controller checks that the QEMU guest agent is installed and running. If so, it freezes the VM file system before taking the snapshot, and thaws the file system after the snapshot is taken.
					</p><p>
						The snapshot stores a copy of each Container Storage Interface (CSI) volume attached to the VM and a copy of the VM specification and metadata. Snapshots cannot be changed after creation.
					</p><p>
						With the VM snapshots feature, cluster administrators and application developers can:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Create a new snapshot
							</li><li class="listitem">
								List all snapshots attached to a specific VM
							</li><li class="listitem">
								Restore a VM from a snapshot
							</li><li class="listitem">
								Delete an existing VM snapshot
							</li></ul></div><section class="section" id="vm-snapshot-controller-and-crds_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h5 class="title">10.19.10.1.1. Virtual machine snapshot controller and custom resource definitions (CRDs)</h5></div></div></div><p>
							The VM snapshot feature introduces three new API objects defined as CRDs for managing snapshots:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">VirtualMachineSnapshot</code>: Represents a user request to create a snapshot. It contains information about the current state of the VM.
								</li><li class="listitem">
									<code class="literal">VirtualMachineSnapshotContent</code>: Represents a provisioned resource on the cluster (a snapshot). It is created by the VM snapshot controller and contains references to all resources required to restore the VM.
								</li><li class="listitem">
									<code class="literal">VirtualMachineRestore</code>: Represents a user request to restore a VM from a snapshot.
								</li></ul></div><p>
							The VM snapshot controller binds a <code class="literal">VirtualMachineSnapshotContent</code> object with the <code class="literal">VirtualMachineSnapshot</code> object for which it was created, with a one-to-one mapping.
						</p></section></section><section class="section" id="virt-installing-qemu-guest-agent-on-linux-vm_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.2. Installing QEMU guest agent on a Linux virtual machine</h4></div></div></div><p>
						The <code class="literal">qemu-guest-agent</code> is widely available and available by default in Red Hat Enterprise Linux (RHEL) virtual machines (VMs). Install the agent and start the service.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Access the virtual machine command line through one of the consoles or by SSH.
							</li><li class="listitem"><p class="simpara">
								Install the QEMU guest agent on the virtual machine:
							</p><pre class="programlisting language-terminal">$ yum install -y qemu-guest-agent</pre></li><li class="listitem"><p class="simpara">
								Ensure the service is persistent and start it:
							</p><pre class="programlisting language-terminal">$ systemctl enable --now qemu-guest-agent</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the following command to verify that <code class="literal">AgentConnected</code> is listed in the VM spec:
							</p><pre class="programlisting language-terminal">$ oc get vm &lt;vm_name&gt;</pre></li></ol></div></section><section class="section" id="installing-qemu-guest-agent-on-windows-vm_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.3. Installing QEMU guest agent on a Windows virtual machine</h4></div></div></div><p>
						For Windows virtual machines, the QEMU guest agent is included in the VirtIO drivers. Install the drivers on an existing or a new Windows installation.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the Windows Guest Operating System (OS), use the <span class="strong strong"><strong>File Explorer</strong></span> to navigate to the <code class="literal">guest-agent</code> directory in the <code class="literal">virtio-win</code> CD drive.
							</li><li class="listitem">
								Run the <code class="literal">qemu-ga-x86_64.msi</code> installer.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the following command to verify that the output contains the <code class="literal">QEMU Guest Agent</code>:
							</p><pre class="programlisting language-terminal">$ net start</pre></li></ol></div><section class="section" id="virt-installing-virtio-drivers-existing-windows_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h5 class="title">10.19.10.3.1. Installing VirtIO drivers on an existing Windows virtual machine</h5></div></div></div><p>
							Install the VirtIO drivers from the attached SATA CD drive to an existing Windows virtual machine.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This procedure uses a generic approach to adding drivers to Windows. The process might differ slightly between versions of Windows. See the installation documentation for your version of Windows for specific installation steps.
							</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Start the virtual machine and connect to a graphical console.
								</li><li class="listitem">
									Log in to a Windows user session.
								</li><li class="listitem"><p class="simpara">
									Open <span class="strong strong"><strong>Device Manager</strong></span> and expand <span class="strong strong"><strong>Other devices</strong></span> to list any <span class="strong strong"><strong>Unknown device</strong></span>.
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Open the <code class="literal">Device Properties</code> to identify the unknown device. Right-click the device and select <span class="strong strong"><strong>Properties</strong></span>.
										</li><li class="listitem">
											Click the <span class="strong strong"><strong>Details</strong></span> tab and select <span class="strong strong"><strong>Hardware Ids</strong></span> in the <span class="strong strong"><strong>Property</strong></span> list.
										</li><li class="listitem">
											Compare the <span class="strong strong"><strong>Value</strong></span> for the <span class="strong strong"><strong>Hardware Ids</strong></span> with the supported VirtIO drivers.
										</li></ol></div></li><li class="listitem">
									Right-click the device and select <span class="strong strong"><strong>Update Driver Software</strong></span>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Browse my computer for driver software</strong></span> and browse to the attached SATA CD drive, where the VirtIO drivers are located. The drivers are arranged hierarchically according to their driver type, operating system, and CPU architecture.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Next</strong></span> to install the driver.
								</li><li class="listitem">
									Repeat this process for all the necessary VirtIO drivers.
								</li><li class="listitem">
									After the driver installs, click <span class="strong strong"><strong>Close</strong></span> to close the window.
								</li><li class="listitem">
									Reboot the virtual machine to complete the driver installation.
								</li></ol></div></section></section><section class="section" id="virt-creating-vm-snapshot-web_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.4. Creating a virtual machine snapshot in the web console</h4></div></div></div><p>
						You can create a virtual machine (VM) snapshot by using the web console.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><p>
						The VM snapshot only includes disks that meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Must be either a data volume or persistent volume claim
							</li><li class="listitem">
								Belong to a storage class that supports Container Storage Interface (CSI) volume snapshots
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								If the virtual machine is running, click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Stop</strong></span> to power it down.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Snapshots</strong></span> tab and then click <span class="strong strong"><strong>Take Snapshot</strong></span>.
							</li><li class="listitem">
								Fill in the <span class="strong strong"><strong>Snapshot Name</strong></span> and optional <span class="strong strong"><strong>Description</strong></span> fields.
							</li><li class="listitem">
								Expand <span class="strong strong"><strong>Disks included in this Snapshot</strong></span> to see the storage volumes to be included in the snapshot.
							</li><li class="listitem">
								If your VM has disks that cannot be included in the snapshot and you still wish to proceed, select the <span class="strong strong"><strong>I am aware of this warning and wish to proceed</strong></span> checkbox.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></section><section class="section" id="virt-creating-vm-snapshot-cli_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.5. Creating a virtual machine snapshot in the CLI</h4></div></div></div><p>
						You can create a virtual machine (VM) snapshot for an offline or online VM by creating a <code class="literal">VirtualMachineSnapshot</code> object. Kubevirt will coordinate with the QEMU guest agent to create a snapshot of the online VM.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create snapshots of an online (Running state) VM with the highest integrity, install the QEMU guest agent.
						</p><p>
							The QEMU guest agent takes a consistent snapshot by attempting to quiesce the VM’s file system as much as possible, depending on the system workload. This ensures that in-flight I/O is written to the disk before the snapshot is taken. If the guest agent is not present, quiescing is not possible and a best-effort snapshot is taken. The conditions under which the snapshot was taken are reflected in the snapshot indications that are displayed in the web console or CLI.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Ensure that the persistent volume claims (PVCs) are in a storage class that supports Container Storage Interface (CSI) volume snapshots.
							</li><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								Optional: Power down the VM for which you want to create a snapshot.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a YAML file to define a <code class="literal">VirtualMachineSnapshot</code> object that specifies the name of the new <code class="literal">VirtualMachineSnapshot</code> and the name of the source VM.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-yaml">apiVersion: snapshot.kubevirt.io/v1beta1
kind: VirtualMachineSnapshot
metadata:
  name: my-vmsnapshot <span id="CO104-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    apiGroup: kubevirt.io
    kind: VirtualMachine
    name: my-vm <span id="CO104-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO104-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the new <code class="literal">VirtualMachineSnapshot</code> object.
									</div></dd><dt><a href="#CO104-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The name of the source VM.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">VirtualMachineSnapshot</code> resource. The snapshot controller creates a <code class="literal">VirtualMachineSnapshotContent</code> object, binds it to the <code class="literal">VirtualMachineSnapshot</code> and updates the <code class="literal">status</code> and <code class="literal">readyToUse</code> fields of the <code class="literal">VirtualMachineSnapshot</code> object.
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;my-vmsnapshot&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Optional: If you are taking an online snapshot, you can use the <code class="literal">wait</code> command and monitor the status of the snapshot:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Enter the following command:
									</p><pre class="programlisting language-terminal">$ oc wait my-vm my-vmsnapshot --for condition=Ready</pre></li><li class="listitem"><p class="simpara">
										Verify the status of the snapshot:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<code class="literal">InProgress</code> - The online snapshot operation is still in progress.
											</li><li class="listitem">
												<code class="literal">Succeeded</code> - The online snapshot operation completed successfully.
											</li><li class="listitem"><p class="simpara">
												<code class="literal">Failed</code> - The online snapshot operaton failed.
											</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
													Online snapshots have a default time deadline of five minutes (<code class="literal">5m</code>). If the snapshot does not complete successfully in five minutes, the status is set to <code class="literal">failed</code>. Afterwards, the file system will be thawed and the VM unfrozen but the status remains <code class="literal">failed</code> until you delete the failed snapshot image.
												</p><p>
													To change the default time deadline, add the <code class="literal">FailureDeadline</code> attribute to the VM snapshot spec with the time designated in minutes (<code class="literal">m</code>) or in seconds (<code class="literal">s</code>) that you want to specify before the snapshot operation times out.
												</p><p>
													To set no deadline, you can specify <code class="literal">0</code>, though this is generally not recommended, as it can result in an unresponsive VM.
												</p><p>
													If you do not specify a unit of time such as <code class="literal">m</code> or <code class="literal">s</code>, the default is seconds (<code class="literal">s</code>).
												</p></div></div></li></ul></div></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Verify that the <code class="literal">VirtualMachineSnapshot</code> object is created and bound with <code class="literal">VirtualMachineSnapshotContent</code>. The <code class="literal">readyToUse</code> flag must be set to <code class="literal">true</code>.
							</p><pre class="programlisting language-terminal">$ oc describe vmsnapshot &lt;my-vmsnapshot&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: snapshot.kubevirt.io/v1beta1
kind: VirtualMachineSnapshot
metadata:
  creationTimestamp: "2020-09-30T14:41:51Z"
  finalizers:
  - snapshot.kubevirt.io/vmsnapshot-protection
  generation: 5
  name: mysnap
  namespace: default
  resourceVersion: "3897"
  selfLink: /apis/snapshot.kubevirt.io/v1beta1/namespaces/default/virtualmachinesnapshots/my-vmsnapshot
  uid: 28eedf08-5d6a-42c1-969c-2eda58e2a78d
spec:
  source:
    apiGroup: kubevirt.io
    kind: VirtualMachine
    name: my-vm
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: "2020-09-30T14:42:03Z"
    reason: Operation complete
    status: "False" <span id="CO105-1"><!--Empty--></span><span class="callout">1</span>
    type: Progressing
  - lastProbeTime: null
    lastTransitionTime: "2020-09-30T14:42:03Z"
    reason: Operation complete
    status: "True" <span id="CO105-2"><!--Empty--></span><span class="callout">2</span>
    type: Ready
  creationTime: "2020-09-30T14:42:03Z"
  readyToUse: true <span id="CO105-3"><!--Empty--></span><span class="callout">3</span>
  sourceUID: 355897f3-73a0-4ec4-83d3-3c2df9486f4f
  virtualMachineSnapshotContentName: vmsnapshot-content-28eedf08-5d6a-42c1-969c-2eda58e2a78d <span id="CO105-4"><!--Empty--></span><span class="callout">4</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO105-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The <code class="literal">status</code> field of the <code class="literal">Progressing</code> condition specifies if the snapshot is still being created.
									</div></dd><dt><a href="#CO105-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">status</code> field of the <code class="literal">Ready</code> condition specifies if the snapshot creation process is complete.
									</div></dd><dt><a href="#CO105-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Specifies if the snapshot is ready to be used.
									</div></dd><dt><a href="#CO105-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Specifies that the snapshot is bound to a <code class="literal">VirtualMachineSnapshotContent</code> object created by the snapshot controller.
									</div></dd></dl></div></li><li class="listitem">
								Check the <code class="literal">spec:volumeBackups</code> property of the <code class="literal">VirtualMachineSnapshotContent</code> resource to verify that the expected PVCs are included in the snapshot.
							</li></ol></div></section><section class="section" id="virt-verifying-online-snapshot-creation-with-snapshot-indications_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.6. Verifying online snapshot creation with snapshot indications</h4></div></div></div><p>
						Snapshot indications are contextual information about online virtual machine (VM) snapshot operations. Indications are not available for offline virtual machine (VM) snapshot operations. Indications are helpful in describing details about the online snapshot creation.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To view indications, you must have attempted to create an online VM snapshot using the CLI or the web console.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Display the output from the snapshot indications by doing one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										For snapshots created with the CLI, view indicator output in the <code class="literal">VirtualMachineSnapshot</code> object YAML, in the <span class="strong strong"><strong>status</strong></span> field.
									</li><li class="listitem">
										For snapshots created using the web console, click <span class="strong strong"><strong>VirtualMachineSnapshot &gt; Status</strong></span> in the <span class="strong strong"><strong>Snapshot details</strong></span> screen.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Verify the status of your online VM snapshot:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">Online</code> indicates that the VM was running during online snapshot creation.
									</li><li class="listitem">
										<code class="literal">NoGuestAgent</code> indicates that the QEMU guest agent was not running during online snapshot creation. The QEMU guest agent could not be used to freeze and thaw the file system, either because the QEMU guest agent was not installed or running or due to another error.
									</li></ul></div></li></ol></div></section><section class="section" id="virt-restoring-vm-from-snapshot-web_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.7. Restoring a virtual machine from a snapshot in the web console</h4></div></div></div><p>
						You can restore a virtual machine (VM) to a previous configuration represented by a snapshot in the web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								If the virtual machine is running, click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Stop</strong></span> to power it down.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Snapshots</strong></span> tab. The page displays a list of snapshots associated with the virtual machine.
							</li><li class="listitem"><p class="simpara">
								Choose one of the following methods to restore a VM snapshot:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										For the snapshot that you want to use as the source to restore the VM, click <span class="strong strong"><strong>Restore</strong></span>.
									</li><li class="listitem">
										Select a snapshot to open the <span class="strong strong"><strong>Snapshot Details</strong></span> screen and click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Restore VirtualMachineSnapshot</strong></span>.
									</li></ol></div></li><li class="listitem">
								In the confirmation pop-up window, click <span class="strong strong"><strong>Restore</strong></span> to restore the VM to its previous configuration represented by the snapshot.
							</li></ol></div></section><section class="section" id="virt-restoring-vm-from-snapshot-cli_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.8. Restoring a virtual machine from a snapshot in the CLI</h4></div></div></div><p>
						You can restore an existing virtual machine (VM) to a previous configuration by using a VM snapshot. You can only restore from an offline VM snapshot.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								Power down the VM you want to restore to a previous state.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a YAML file to define a <code class="literal">VirtualMachineRestore</code> object that specifies the name of the VM you want to restore and the name of the snapshot to be used as the source.
							</p><p class="simpara">
								For example:
							</p><pre class="programlisting language-yaml">apiVersion: snapshot.kubevirt.io/v1beta1
kind: VirtualMachineRestore
metadata:
  name: my-vmrestore <span id="CO106-1"><!--Empty--></span><span class="callout">1</span>
spec:
  target:
    apiGroup: kubevirt.io
    kind: VirtualMachine
    name: my-vm <span id="CO106-2"><!--Empty--></span><span class="callout">2</span>
  virtualMachineSnapshotName: my-vmsnapshot <span id="CO106-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO106-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the new <code class="literal">VirtualMachineRestore</code> object.
									</div></dd><dt><a href="#CO106-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The name of the target VM you want to restore.
									</div></dd><dt><a href="#CO106-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">VirtualMachineSnapshot</code> object to be used as the source.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">VirtualMachineRestore</code> resource. The snapshot controller updates the status fields of the <code class="literal">VirtualMachineRestore</code> object and replaces the existing VM configuration with the snapshot content.
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;my-vmrestore&gt;.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Verify that the VM is restored to the previous state represented by the snapshot. The <code class="literal">complete</code> flag must be set to <code class="literal">true</code>.
							</p><pre class="programlisting language-terminal">$ oc get vmrestore &lt;my-vmrestore&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: snapshot.kubevirt.io/v1beta1
kind: VirtualMachineRestore
metadata:
creationTimestamp: "2020-09-30T14:46:27Z"
generation: 5
name: my-vmrestore
namespace: default
ownerReferences:
- apiVersion: kubevirt.io/v1
  blockOwnerDeletion: true
  controller: true
  kind: VirtualMachine
  name: my-vm
  uid: 355897f3-73a0-4ec4-83d3-3c2df9486f4f
  resourceVersion: "5512"
  selfLink: /apis/snapshot.kubevirt.io/v1beta1/namespaces/default/virtualmachinerestores/my-vmrestore
  uid: 71c679a8-136e-46b0-b9b5-f57175a6a041
  spec:
    target:
      apiGroup: kubevirt.io
      kind: VirtualMachine
      name: my-vm
  virtualMachineSnapshotName: my-vmsnapshot
  status:
  complete: true <span id="CO107-1"><!--Empty--></span><span class="callout">1</span>
  conditions:
  - lastProbeTime: null
  lastTransitionTime: "2020-09-30T14:46:28Z"
  reason: Operation complete
  status: "False" <span id="CO107-2"><!--Empty--></span><span class="callout">2</span>
  type: Progressing
  - lastProbeTime: null
  lastTransitionTime: "2020-09-30T14:46:28Z"
  reason: Operation complete
  status: "True" <span id="CO107-3"><!--Empty--></span><span class="callout">3</span>
  type: Ready
  deletedDataVolumes:
  - test-dv1
  restoreTime: "2020-09-30T14:46:28Z"
  restores:
  - dataVolumeName: restore-71c679a8-136e-46b0-b9b5-f57175a6a041-datavolumedisk1
  persistentVolumeClaim: restore-71c679a8-136e-46b0-b9b5-f57175a6a041-datavolumedisk1
  volumeName: datavolumedisk1
  volumeSnapshotName: vmsnapshot-28eedf08-5d6a-42c1-969c-2eda58e2a78d-volume-datavolumedisk1</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO107-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specifies if the process of restoring the VM to the state represented by the snapshot is complete.
									</div></dd><dt><a href="#CO107-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">status</code> field of the <code class="literal">Progressing</code> condition specifies if the VM is still being restored.
									</div></dd><dt><a href="#CO107-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The <code class="literal">status</code> field of the <code class="literal">Ready</code> condition specifies if the VM restoration process is complete.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="virt-deleting-vm-snapshot-web_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.9. Deleting a virtual machine snapshot in the web console</h4></div></div></div><p>
						You can delete an existing virtual machine snapshot by using the web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Snapshots</strong></span> tab. The page displays a list of snapshots associated with the virtual machine.
							</li><li class="listitem">
								Click the Options menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 of the virtual machine snapshot that you want to delete and select <span class="strong strong"><strong>Delete VirtualMachineSnapshot</strong></span>.
							</li><li class="listitem">
								In the confirmation pop-up window, click <span class="strong strong"><strong>Delete</strong></span> to delete the snapshot.
							</li></ol></div></section><section class="section" id="virt-deleting-vm-snapshot-cli_virt-managing-vm-snapshots"><div class="titlepage"><div><div><h4 class="title">10.19.10.10. Deleting a virtual machine snapshot in the CLI</h4></div></div></div><p>
						You can delete an existing virtual machine (VM) snapshot by deleting the appropriate <code class="literal">VirtualMachineSnapshot</code> object.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Delete the <code class="literal">VirtualMachineSnapshot</code> object. The snapshot controller deletes the <code class="literal">VirtualMachineSnapshot</code> along with the associated <code class="literal">VirtualMachineSnapshotContent</code> object.
							</p><pre class="programlisting language-terminal">$ oc delete vmsnapshot &lt;my-vmsnapshot&gt;</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Verify that the snapshot is deleted and no longer attached to this VM:
							</p><pre class="programlisting language-terminal">$ oc get vmsnapshot</pre></li></ul></div></section><section class="section _additional-resources" id="additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.10.11. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#persistent-storage-csi-snapshots">CSI Volume Snapshots</a>
							</li></ul></div></section></section><section class="section" id="virt-moving-local-vm-disk-to-different-node"><div class="titlepage"><div><div><h3 class="title">10.19.11. Moving a local virtual machine disk to a different node</h3></div></div></div><p>
					Virtual machines that use local volume storage can be moved so that they run on a specific node.
				</p><p>
					You might want to move the virtual machine to a specific node for the following reasons:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The current node has limitations to the local storage configuration.
						</li><li class="listitem">
							The new node is better optimized for the workload of that virtual machine.
						</li></ul></div><p>
					To move a virtual machine that uses local storage, you must clone the underlying volume by using a data volume. After the cloning operation is complete, you can <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-edit-vms">edit the virtual machine configuration</a> so that it uses the new data volume, or <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-add-disk-to-vm_virt-edit-vms">add the new data volume to another virtual machine</a>.
				</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					When you enable preallocation globally, or for a single data volume, the Containerized Data Importer (CDI) preallocates disk space during cloning. Preallocation enhances write performance. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Using preallocation for data volumes</a>.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Users without the <code class="literal">cluster-admin</code> role require <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-enabling-user-permissions-to-clone-datavolumes">additional user permissions</a> to clone volumes across namespaces.
					</p></div></div><section class="section" id="virt-cloning-local-volume-to-another-node_virt-moving-local-vm-disk-to-different-node"><div class="titlepage"><div><div><h4 class="title">10.19.11.1. Cloning a local volume to another node</h4></div></div></div><p>
						You can move a virtual machine disk so that it runs on a specific node by cloning the underlying persistent volume claim (PVC).
					</p><p>
						To ensure the virtual machine disk is cloned to the correct node, you must either create a new persistent volume (PV) or identify one on the correct node. Apply a unique label to the PV so that it can be referenced by the data volume.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The destination PV must be the same size or larger than the source PVC. If the destination PV is smaller than the source PVC, the cloning operation fails.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The virtual machine must not be running. Power down the virtual machine before cloning the virtual machine disk.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Either create a new local PV on the node, or identify a local PV already on the node:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Create a local PV that includes the <code class="literal">nodeAffinity.nodeSelectorTerms</code> parameters. The following manifest creates a <code class="literal">10Gi</code> local PV on <code class="literal">node01</code>.
									</p><pre class="programlisting language-yaml">kind: PersistentVolume
apiVersion: v1
metadata:
  name: &lt;destination-pv&gt; <span id="CO108-1"><!--Empty--></span><span class="callout">1</span>
  annotations:
spec:
  accessModes:
  - ReadWriteOnce
  capacity:
    storage: 10Gi <span id="CO108-2"><!--Empty--></span><span class="callout">2</span>
  local:
    path: /mnt/local-storage/local/disk1 <span id="CO108-3"><!--Empty--></span><span class="callout">3</span>
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - node01 <span id="CO108-4"><!--Empty--></span><span class="callout">4</span>
  persistentVolumeReclaimPolicy: Delete
  storageClassName: local
  volumeMode: Filesystem</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO108-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												The name of the PV.
											</div></dd><dt><a href="#CO108-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The size of the PV. You must allocate enough space, or the cloning operation fails. The size must be the same as or larger than the source PVC.
											</div></dd><dt><a href="#CO108-3"><span class="callout">3</span></a> </dt><dd><div class="para">
												The mount path on the node.
											</div></dd><dt><a href="#CO108-4"><span class="callout">4</span></a> </dt><dd><div class="para">
												The name of the node where you want to create the PV.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Identify a PV that already exists on the target node. You can identify the node where a PV is provisioned by viewing the <code class="literal">nodeAffinity</code> field in its configuration:
									</p><pre class="programlisting language-terminal">$ oc get pv &lt;destination-pv&gt; -o yaml</pre><p class="simpara">
										The following snippet shows that the PV is on <code class="literal">node01</code>:
									</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
											
<pre class="programlisting language-yaml"># ...
spec:
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname <span id="CO109-1"><!--Empty--></span><span class="callout">1</span>
          operator: In
          values:
          - node01 <span id="CO109-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre>

										</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO109-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												The <code class="literal">kubernetes.io/hostname</code> key uses the node hostname to select a node.
											</div></dd><dt><a href="#CO109-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The hostname of the node.
											</div></dd></dl></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Add a unique label to the PV:
							</p><pre class="programlisting language-terminal">$ oc label pv &lt;destination-pv&gt; node=node01</pre></li><li class="listitem"><p class="simpara">
								Create a data volume manifest that references the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The PVC name and namespace of the virtual machine.
									</li><li class="listitem">
										The label you applied to the PV in the previous step.
									</li><li class="listitem"><p class="simpara">
										The size of the destination PV.
									</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;clone-datavolume&gt; <span id="CO110-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc:
      name: "&lt;source-vm-disk&gt;" <span id="CO110-2"><!--Empty--></span><span class="callout">2</span>
      namespace: "&lt;source-namespace&gt;" <span id="CO110-3"><!--Empty--></span><span class="callout">3</span>
  pvc:
    accessModes:
      - ReadWriteOnce
    selector:
      matchLabels:
        node: node01 <span id="CO110-4"><!--Empty--></span><span class="callout">4</span>
    resources:
      requests:
        storage: &lt;10Gi&gt; <span id="CO110-5"><!--Empty--></span><span class="callout">5</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO110-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												The name of the new data volume.
											</div></dd><dt><a href="#CO110-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The name of the source PVC. If you do not know the PVC name, you can find it in the virtual machine configuration: <code class="literal">spec.volumes.persistentVolumeClaim.claimName</code>.
											</div></dd><dt><a href="#CO110-3"><span class="callout">3</span></a> </dt><dd><div class="para">
												The namespace where the source PVC exists.
											</div></dd><dt><a href="#CO110-4"><span class="callout">4</span></a> </dt><dd><div class="para">
												The label that you applied to the PV in the previous step.
											</div></dd><dt><a href="#CO110-5"><span class="callout">5</span></a> </dt><dd><div class="para">
												The size of the destination PV.
											</div></dd></dl></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Start the cloning operation by applying the data volume manifest to your cluster:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;clone-datavolume.yaml&gt;</pre></li></ol></div><p>
						The data volume clones the PVC of the virtual machine into the PV on the specific node.
					</p></section></section><section class="section" id="virt-expanding-virtual-storage-with-blank-disk-images"><div class="titlepage"><div><div><h3 class="title">10.19.12. Expanding virtual storage by adding blank disk images</h3></div></div></div><p>
					You can increase your storage capacity or create new data partitions by adding blank disk images to OpenShift Virtualization.
				</p><section class="section" id="virt-about-datavolumes_virt-expanding-virtual-storage-with-blank-disk-images"><div class="titlepage"><div><div><h4 class="title">10.19.12.1. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-creating-blank-disk-datavolumes_virt-expanding-virtual-storage-with-blank-disk-images"><div class="titlepage"><div><div><h4 class="title">10.19.12.2. Creating a blank disk image with data volumes</h4></div></div></div><p>
						You can create a new blank disk image in a persistent volume claim by customizing and deploying a data volume configuration file.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								At least one available persistent volume.
							</li><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">DataVolume</code> manifest:
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: blank-image-datavolume
spec:
  source:
      blank: {}
  pvc:
    storageClassName: "hostpath" <span id="CO111-1"><!--Empty--></span><span class="callout">1</span>
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: 500Mi</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO111-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Optional: If you do not specify a storage class, the default storage class is applied.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the blank disk image by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;blank-image-datavolume&gt;.yaml</pre></li></ol></div></section><section class="section _additional-resources" id="virt-expanding-virtual-storage-with-blank-disk-images_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.12.3. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li></ul></div></section></section><section class="section" id="virt-cloning-a-datavolume-using-smart-cloning"><div class="titlepage"><div><div><h3 class="title">10.19.13. Cloning a data volume using smart-cloning</h3></div></div></div><p>
					Smart-cloning is a built-in feature of Red Hat OpenShift Data Foundation. Smart-cloning is faster and more efficient than host-assisted cloning.
				</p><p>
					You do not need to perform any action to enable smart-cloning, but you need to ensure your storage environment is compatible with smart-cloning to use this feature.
				</p><p>
					When you create a data volume with a persistent volume claim (PVC) source, you automatically initiate the cloning process. You always receive a clone of the data volume if your environment supports smart-cloning or not. However, you will only receive the performance benefits of smart cloning if your storage provider supports smart-cloning.
				</p><section class="section" id="virt-about-datavolumes_virt-cloning-a-datavolume-using-smart-cloning"><div class="titlepage"><div><div><h4 class="title">10.19.13.1. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-about-smart-cloning_virt-cloning-a-datavolume-using-smart-cloning"><div class="titlepage"><div><div><h4 class="title">10.19.13.2. About smart-cloning</h4></div></div></div><p>
						When a data volume is smart-cloned, the following occurs:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								A snapshot of the source persistent volume claim (PVC) is created.
							</li><li class="listitem">
								A PVC is created from the snapshot.
							</li><li class="listitem">
								The snapshot is deleted.
							</li></ol></div></section><section class="section" id="virt-cloning-a-datavolume_virt-cloning-a-datavolume-using-smart-cloning"><div class="titlepage"><div><div><h4 class="title">10.19.13.3. Cloning a data volume</h4></div></div></div><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
							For smart-cloning to occur, the following conditions are required:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Your storage provider must support snapshots.
							</li><li class="listitem">
								The source and target PVCs must be defined to the same storage class.
							</li><li class="listitem">
								The source and target PVCs share the same <span class="strong strong"><strong>volumeMode</strong></span>.
							</li><li class="listitem">
								The <code class="literal">VolumeSnapshotClass</code> object must reference the storage class defined to both the source and target PVCs.
							</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
							To initiate cloning of a data volume:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a YAML file for a <code class="literal">DataVolume</code> object that specifies the name of the new data volume and the name and namespace of the source PVC. In this example, because you specify the <span class="strong strong"><strong>storage</strong></span> API, there is no need to specify <span class="strong strong"><strong>accessModes</strong></span> or <span class="strong strong"><strong>volumeMode</strong></span>. The optimal values will be calculated for you automatically.
							</p><pre class="programlisting language-yaml">apiVersion: cdi.kubevirt.io/v1beta1
kind: DataVolume
metadata:
  name: &lt;cloner-datavolume&gt; <span id="CO112-1"><!--Empty--></span><span class="callout">1</span>
spec:
  source:
    pvc:
      namespace: "&lt;source-namespace&gt;" <span id="CO112-2"><!--Empty--></span><span class="callout">2</span>
      name: "&lt;my-favorite-vm-disk&gt;" <span id="CO112-3"><!--Empty--></span><span class="callout">3</span>
  storage: <span id="CO112-4"><!--Empty--></span><span class="callout">4</span>
    resources:
      requests:
        storage: &lt;2Gi&gt; <span id="CO112-5"><!--Empty--></span><span class="callout">5</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO112-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the new data volume.
									</div></dd><dt><a href="#CO112-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the source PVC exists.
									</div></dd><dt><a href="#CO112-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The name of the source PVC.
									</div></dd><dt><a href="#CO112-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Specifies allocation with the <span class="strong strong"><strong>storage</strong></span> API
									</div></dd><dt><a href="#CO112-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The size of the new data volume.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Start cloning the PVC by creating the data volume:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;cloner-datavolume&gt;.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Data volumes prevent a virtual machine from starting before the PVC is prepared, so you can create a virtual machine that references the new data volume while the PVC clones.
								</p></div></div></li></ol></div></section><section class="section _additional-resources" id="virt-cloning-a-datavolume-using-smart-cloning_additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.13.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-cloning-pvc-of-vm-disk-into-new-datavolume_virt-cloning-vm-disk-into-new-datavolume">Cloning the persistent volume claim of a virtual machine disk into a new data volume</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-preallocation-for-datavolumes">Configure preallocation mode</a> to improve write performance for data volume operations.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>
							</li></ul></div></section></section><section class="section" id="virt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h3 class="title">10.19.14. Hot plugging virtual disks</h3></div></div></div><p>
					You can add or remove virtual disks without stopping your virtual machine (VM) or virtual machine instance (VMI).
				</p><section class="section" id="virt-about-hot-plugging-virtual-disks_virt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.1. About hot plugging virtual disks</h4></div></div></div><p>
						When you <span class="emphasis"><em>hot plug</em></span> a virtual disk, you attach a virtual disk to a virtual machine instance while the virtual machine is running.
					</p><p>
						When you <span class="emphasis"><em>hot unplug</em></span> a virtual disk, you detach a virtual disk from a virtual machine instance while the virtual machine is running.
					</p><p>
						Only data volumes and persistent volume claims (PVCs) can be hot plugged and hot unplugged. You cannot hot plug or hot unplug container disks.
					</p><p>
						After you hot plug a virtual disk, it remains attached until you detach it, even if you restart the virtual machine.
					</p><p>
						In the web console, hot-plugged volumes are marked by a "persistent hotplug" label on the disk in the disk list (<span class="strong strong"><strong>VirtualMachine Details</strong></span> → <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span> tab). To change a hot-plug volume to a persistent volume, click the <span class="strong strong"><strong>Options</strong></span> menu 
						<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
						 and select <span class="strong strong"><strong>Make persistent</strong></span>. The "persistent hotplug" label is removed and the change is applied after the next reboot.
					</p></section><section class="section" id="virt-about-virtio-scsi_virt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.2. About virtio-scsi</h4></div></div></div><p>
						In OpenShift Virtualization, each virtual machine (VM) has a <code class="literal">virtio-scsi</code> controller so that hot plugged disks can use a <code class="literal">scsi</code> bus. The <code class="literal">virtio-scsi</code> controller overcomes the limitations of <code class="literal">virtio</code> while retaining its performance advantages. It is highly scalable and supports hot plugging over 4 million disks.
					</p><p>
						Regular <code class="literal">virtio</code> is not available for hot plugged disks because it is not scalable: each <code class="literal">virtio</code> disk uses one of the limited PCI Express (PCIe) slots in the VM. PCIe slots are also used by other devices and must be reserved in advance, therefore slots might not be available on demand.
					</p></section><section class="section" id="virt-hot-plugging-a-virtual-disk-using-the-cli_virt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.3. Hot plugging a virtual disk using the CLI</h4></div></div></div><p>
						Hot plug virtual disks that you want to attach to a virtual machine instance (VMI) while a virtual machine is running.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have a running virtual machine to hot plug a virtual disk.
							</li><li class="listitem">
								You must have at least one data volume or persistent volume claim (PVC) available for hot plugging.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Hot plug a virtual disk by running the following command:
							</p><pre class="programlisting language-terminal">$ virtctl addvolume &lt;virtual-machine|virtual-machine-instance&gt; --volume-name=&lt;datavolume|PVC&gt; \
[--persist] [--serial=&lt;label-name&gt;]</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Use the optional <code class="literal">--persist</code> flag to add the hot plugged disk to the virtual machine specification as a permanently mounted virtual disk. Stop, restart, or reboot the virtual machine to permanently mount the virtual disk. After specifying the <code class="literal">--persist</code> flag, you can no longer hot plug or hot unplug the virtual disk. The <code class="literal">--persist</code> flag applies to virtual machines, not virtual machine instances.
									</li><li class="listitem">
										The optional <code class="literal">--serial</code> flag allows you to add an alphanumeric string label of your choice. This helps you to identify the hot plugged disk in a guest virtual machine. If you do not specify this option, the label defaults to the name of the hot plugged data volume or PVC.
									</li></ul></div></li></ul></div></section><section class="section" id="virt-hot-unplugging-a-virtual-disk-using-the-cli_virt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.4. Hot unplugging a virtual disk using the CLI</h4></div></div></div><p>
						Hot unplug virtual disks that you want to detach from a virtual machine instance (VMI) while a virtual machine is running.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your virtual machine must be running.
							</li><li class="listitem">
								You must have at least one data volume or persistent volume claim (PVC) available and hot plugged.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Hot unplug a virtual disk by running the following command:
							</p><pre class="programlisting language-terminal">$ virtctl removevolume &lt;virtual-machine|virtual-machine-instance&gt; --volume-name=&lt;datavolume|PVC&gt;</pre></li></ul></div></section><section class="section" id="virt-hot-plugging-a-virtual-disk-using-the-web-consolevirt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.5. Hot plugging a virtual disk using the web console</h4></div></div></div><p>
						Hot plug virtual disks that you want to attach to a virtual machine instance (VMI) while a virtual machine is running. When you hot plug a virtual disk, it remains attached to the VMI until you unplug it.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have a running virtual machine to hot plug a virtual disk.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select the running virtual machine to which you want to hot plug a virtual disk.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>VirtualMachine details</strong></span> page, click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Add disk</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Add disk (hot plugged)</strong></span> window, fill in the information for the virtual disk that you want to hot plug.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></section><section class="section" id="virt-hot-unplugging-a-virtual-disk-using-the-web-consolevirt-hot-plugging-virtual-disks"><div class="titlepage"><div><div><h4 class="title">10.19.14.6. Hot unplugging a virtual disk using the web console</h4></div></div></div><p>
						Hot unplug virtual disks that you want to detach from a virtual machine instance (VMI) while a virtual machine is running.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your virtual machine must be running with a hot plugged disk attached.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
							</li><li class="listitem">
								Select the running virtual machine with the disk you want to hot unplug to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Configuration</strong></span> → <span class="strong strong"><strong>Disks</strong></span>.
							</li><li class="listitem">
								Click the Options menu 
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
								 beside the virtual disk that you want to hot unplug and select <span class="strong strong"><strong>Detach</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Detach</strong></span>.
							</li></ol></div></section></section><section class="section" id="virt-using-container-disks-with-vms"><div class="titlepage"><div><div><h3 class="title">10.19.15. Using container disks with virtual machines</h3></div></div></div><p>
					You can build a virtual machine image into a container disk and store it in your container registry. You can then import the container disk into persistent storage for a virtual machine or attach it directly to the virtual machine for ephemeral storage.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If you use large container disks, I/O traffic might increase, impacting worker nodes. This can lead to unavailable nodes. You can resolve this by:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#pruning-deployments_pruning-objects">Pruning <code class="literal">DeploymentConfig</code> objects</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-nodes-garbage-collection-configuring_nodes-nodes-configuring">Configuring garbage collection</a>
							</li></ul></div></div></div><section class="section" id="virt-about-container-disks_virt-using-container-disks-with-vms"><div class="titlepage"><div><div><h4 class="title">10.19.15.1. About container disks</h4></div></div></div><p>
						A container disk is a virtual machine image that is stored as a container image in a container image registry. You can use container disks to deliver the same disk images to multiple virtual machines and to create large numbers of virtual machine clones.
					</p><p>
						A container disk can either be imported into a persistent volume claim (PVC) by using a data volume that is attached to a virtual machine, or attached directly to a virtual machine as an ephemeral <code class="literal">containerDisk</code> volume.
					</p><section class="section" id="importing-a-container-disk-into-a-pvc-by-using-a-data-volume"><div class="titlepage"><div><div><h5 class="title">10.19.15.1.1. Importing a container disk into a PVC by using a data volume</h5></div></div></div><p>
							Use the Containerized Data Importer (CDI) to import the container disk into a PVC by using a data volume. You can then attach the data volume to a virtual machine for persistent storage.
						</p></section><section class="section" id="attaching-a-container-disk-to-a-virtual-machine-as-a-literal-containerdisk-literal-volume"><div class="titlepage"><div><div><h5 class="title">10.19.15.1.2. Attaching a container disk to a virtual machine as a <code class="literal">containerDisk</code> volume</h5></div></div></div><p>
							A <code class="literal">containerDisk</code> volume is ephemeral. It is discarded when the virtual machine is stopped, restarted, or deleted. When a virtual machine with a <code class="literal">containerDisk</code> volume starts, the container image is pulled from the registry and hosted on the node that is hosting the virtual machine.
						</p><p>
							Use <code class="literal">containerDisk</code> volumes for read-only file systems such as CD-ROMs or for disposable virtual machines.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Using <code class="literal">containerDisk</code> volumes for read-write file systems is not recommended because the data is temporarily written to local storage on the hosting node. This slows live migration of the virtual machine, such as in the case of node maintenance, because the data must be migrated to the destination node. Additionally, all data is lost if the node loses power or otherwise shuts down unexpectedly.
							</p></div></div></section></section><section class="section" id="virt-preparing-container-disk-for-vms_virt-using-container-disks-with-vms"><div class="titlepage"><div><div><h4 class="title">10.19.15.2. Preparing a container disk for virtual machines</h4></div></div></div><p>
						You must build a container disk with a virtual machine image and push it to a container registry before it can used with a virtual machine. You can then either import the container disk into a PVC using a data volume and attach it to a virtual machine, or you can attach the container disk directly to a virtual machine as an ephemeral <code class="literal">containerDisk</code> volume.
					</p><p>
						The size of a disk image inside a container disk is limited by the maximum layer size of the registry where the container disk is hosted.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/">Red Hat Quay</a>, you can change the maximum layer size by editing the YAML configuration file that is created when Red Hat Quay is first deployed.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install <code class="literal">podman</code> if it is not already installed.
							</li><li class="listitem">
								The virtual machine image must be either QCOW2 or RAW format.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a Dockerfile to build the virtual machine image into a container image. The virtual machine image must be owned by QEMU, which has a UID of <code class="literal">107</code>, and placed in the <code class="literal">/disk/</code> directory inside the container. Permissions for the <code class="literal">/disk/</code> directory must then be set to <code class="literal">0440</code>.
							</p><p class="simpara">
								The following example uses the Red Hat Universal Base Image (UBI) to handle these configuration changes in the first stage, and uses the minimal <code class="literal">scratch</code> image in the second stage to store the result:
							</p><pre class="programlisting language-terminal">$ cat &gt; Dockerfile &lt;&lt; EOF
FROM registry.access.redhat.com/ubi8/ubi:latest AS builder
ADD --chown=107:107 &lt;vm_image&gt;.qcow2 /disk/ <span id="CO113-1"><!--Empty--></span><span class="callout">1</span>
RUN chmod 0440 /disk/*

FROM scratch
COPY --from=builder /disk/* /disk/
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO113-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Where &lt;vm_image&gt; is the virtual machine image in either QCOW2 or RAW format.<br/> To use a remote virtual machine image, replace <code class="literal">&lt;vm_image&gt;.qcow2</code> with the complete url for the remote image.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Build and tag the container:
							</p><pre class="programlisting language-terminal">$ podman build -t &lt;registry&gt;/&lt;container_disk_name&gt;:latest .</pre></li><li class="listitem"><p class="simpara">
								Push the container image to the registry:
							</p><pre class="programlisting language-terminal">$ podman push &lt;registry&gt;/&lt;container_disk_name&gt;:latest</pre></li></ol></div><p>
						If your container registry does not have TLS you must add it as an insecure registry before you can import container disks into persistent storage.
					</p></section><section class="section" id="virt-disabling-tls-for-registry_virt-using-container-disks-with-vms"><div class="titlepage"><div><div><h4 class="title">10.19.15.3. Disabling TLS for a container registry to use as insecure registry</h4></div></div></div><p>
						You can disable TLS (transport layer security) for one or more container registries by editing the <code class="literal">insecureRegistries</code> field of the <code class="literal">HyperConverged</code> custom resource.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Log in to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">HyperConverged</code> custom resource and add a list of insecure registries to the <code class="literal">spec.storageImport.insecureRegistries</code> field.
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  storageImport:
    insecureRegistries: <span id="CO114-1"><!--Empty--></span><span class="callout">1</span>
      - "private-registry-example-1:5000"
      - "private-registry-example-2:5000"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO114-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace the examples in this list with valid registry hostnames.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="next-steps-2"><div class="titlepage"><div><div><h4 class="title">10.19.15.4. Next steps</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-importing-virtual-machine-images-datavolumes">Import the container disk into persistent storage for a virtual machine</a>.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-create-vms">Create a virtual machine</a> that uses a <code class="literal">containerDisk</code> volume for ephemeral storage.
							</li></ul></div></section></section><section class="section" id="virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h3 class="title">10.19.16. Preparing CDI scratch space</h3></div></div></div><section class="section" id="virt-about-datavolumes_virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h4 class="title">10.19.16.1. About data volumes</h4></div></div></div><p>
						<code class="literal">DataVolume</code> objects are custom resources that are provided by the Containerized Data Importer (CDI) project. Data volumes orchestrate import, clone, and upload operations that are associated with an underlying persistent volume claim (PVC). You can create a data volume as either a standalone resource or by using the <code class="literal">dataVolumeTemplate</code> field in the virtual machine (VM) specification.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									VM disk PVCs that are prepared by using standalone data volumes maintain an independent lifecycle from the VM. If you use the <code class="literal">dataVolumeTemplate</code> field in the VM specification to prepare the PVC, the PVC shares the same lifecycle as the VM.
								</li></ul></div></div></div></section><section class="section" id="virt-about-scratch-space_virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h4 class="title">10.19.16.2. About scratch space</h4></div></div></div><p>
						The Containerized Data Importer (CDI) requires scratch space (temporary storage) to complete some operations, such as importing and uploading virtual machine images. During this process, CDI provisions a scratch space PVC equal to the size of the PVC backing the destination data volume (DV). The scratch space PVC is deleted after the operation completes or aborts.
					</p><p>
						You can define the storage class that is used to bind the scratch space PVC in the <code class="literal">spec.scratchSpaceStorageClass</code> field of the <code class="literal">HyperConverged</code> custom resource.
					</p><p>
						If the defined storage class does not match a storage class in the cluster, then the default storage class defined for the cluster is used. If there is no default storage class defined in the cluster, the storage class used to provision the original DV or PVC is used.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							CDI requires requesting scratch space with a <code class="literal">file</code> volume mode, regardless of the PVC backing the origin data volume. If the origin PVC is backed by <code class="literal">block</code> volume mode, you must define a storage class capable of provisioning <code class="literal">file</code> volume mode PVCs.
						</p></div></div><h6 id="manual-provisioning">Manual provisioning</h6><p>
						If there are no storage classes, CDI uses any PVCs in the project that match the size requirements for the image. If there are no PVCs that match these requirements, the CDI import pod remains in a <span class="strong strong"><strong>Pending</strong></span> state until an appropriate PVC is made available or until a timeout function kills the pod.
					</p></section><section class="section" id="virt-operations-requiring-scratch-space_virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h4 class="title">10.19.16.3. CDI operations that require scratch space</h4></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977723904" scope="col">Type</th><th align="left" valign="top" id="idm140196977722816" scope="col">Reason</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977723904"> <p>
										Registry imports
									</p>
									 </td><td align="left" valign="top" headers="idm140196977722816"> <p>
										CDI must download the image to a scratch space and extract the layers to find the image file. The image file is then passed to QEMU-IMG for conversion to a raw disk.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977723904"> <p>
										Upload image
									</p>
									 </td><td align="left" valign="top" headers="idm140196977722816"> <p>
										QEMU-IMG does not accept input from STDIN. Instead, the image to upload is saved in scratch space before it can be passed to QEMU-IMG for conversion.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977723904"> <p>
										HTTP imports of archived images
									</p>
									 </td><td align="left" valign="top" headers="idm140196977722816"> <p>
										QEMU-IMG does not know how to handle the archive formats CDI supports. Instead, the image is unarchived and saved into scratch space before it is passed to QEMU-IMG.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977723904"> <p>
										HTTP imports of authenticated images
									</p>
									 </td><td align="left" valign="top" headers="idm140196977722816"> <p>
										QEMU-IMG inadequately handles authentication. Instead, the image is saved to scratch space and authenticated before it is passed to QEMU-IMG.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977723904"> <p>
										HTTP imports of custom certificates
									</p>
									 </td><td align="left" valign="top" headers="idm140196977722816"> <p>
										QEMU-IMG inadequately handles custom certificates of HTTPS endpoints. Instead, CDI downloads the image to scratch space before passing the file to QEMU-IMG.
									</p>
									 </td></tr></tbody></table></div></section><section class="section" id="virt-defining-storageclass_virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h4 class="title">10.19.16.4. Defining a storage class</h4></div></div></div><p>
						You can define the storage class that the Containerized Data Importer (CDI) uses when allocating scratch space by adding the <code class="literal">spec.scratchSpaceStorageClass</code> field to the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift CLI (<code class="literal">oc</code>).
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">HyperConverged</code> CR by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">spec.scratchSpaceStorageClass</code> field to the CR, setting the value to the name of a storage class that exists in the cluster:
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  scratchSpaceStorageClass: "&lt;storage_class&gt;" <span id="CO115-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO115-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										If you do not specify a storage class, CDI uses the storage class of the persistent volume claim that is being populated.
									</div></dd></dl></div></li><li class="listitem">
								Save and exit your default editor to update the <code class="literal">HyperConverged</code> CR.
							</li></ol></div></section><section class="section" id="virt-cdi-supported-operations-matrix_virt-preparing-cdi-scratch-space"><div class="titlepage"><div><div><h4 class="title">10.19.16.5. CDI supported operations matrix</h4></div></div></div><p>
						This matrix shows the supported CDI operations for content types against endpoints, and which of these operations requires scratch space.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977674816" scope="col">Content types</th><th align="left" valign="top" id="idm140196977673728" scope="col">HTTP</th><th align="left" valign="top" id="idm140196977672640" scope="col">HTTPS</th><th align="left" valign="top" id="idm140196977671552" scope="col">HTTP basic auth</th><th align="left" valign="top" id="idm140196977670464" scope="col">Registry</th><th align="left" valign="top" id="idm140196958092448" scope="col">Upload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977674816"> <p>
										KubeVirt (QCOW2)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977673728"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196977672640"> <p>
										✓ QCOW2**<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196977671552"> <p>
										✓ QCOW2<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td><td align="left" valign="top" headers="idm140196977670464"> <p>
										✓ QCOW2*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196958092448"> <p>
										✓ QCOW2*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196977674816"> <p>
										KubeVirt (RAW)
									</p>
									 </td><td align="left" valign="top" headers="idm140196977673728"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196977672640"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196977671552"> <p>
										✓ RAW<br/> ✓ GZ<br/> ✓ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196977670464"> <p>
										✓ RAW*<br/> □ GZ<br/> □ XZ
									</p>
									 </td><td align="left" valign="top" headers="idm140196958092448"> <p>
										✓ RAW*<br/> ✓ GZ*<br/> ✓ XZ*
									</p>
									 </td></tr></tbody></table></div><p>
						✓ Supported operation
					</p><p>
						□ Unsupported operation
					</p><p>
						* Requires scratch space
					</p><p>
						** Requires scratch space if a custom certificate authority is required
					</p></section><section class="section _additional-resources" id="virt-preparing-cdi-scratch-space-additional-resources"><div class="titlepage"><div><div><h4 class="title">10.19.16.6. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#about_dynamic-provisioning">Dynamic provisioning</a>
							</li></ul></div></section></section><section class="section" id="virt-reusing-persistent-volumes"><div class="titlepage"><div><div><h3 class="title">10.19.17. Re-using persistent volumes</h3></div></div></div><p>
					To re-use a statically provisioned persistent volume (PV), you must first reclaim the volume. This involves deleting the PV so that the storage configuration can be re-used.
				</p><section class="section" id="virt-about-reclaiming-statically-provisioned-persistent-volumes_virt-reusing-statically-provisioned-persistent-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.17.1. About reclaiming statically provisioned persistent volumes</h4></div></div></div><p>
						When you reclaim a persistent volume (PV), you unbind the PV from a persistent volume claim (PVC) and delete the PV. Depending on the underlying storage, you might need to manually delete the shared storage.
					</p><p>
						You can then re-use the PV configuration to create a PV with a different name.
					</p><p>
						Statically provisioned PVs must have a reclaim policy of <code class="literal">Retain</code> to be reclaimed. If they do not, the PV enters a failed state when the PVC is unbound from the PV.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The <code class="literal">Recycle</code> reclaim policy is deprecated in OpenShift Container Platform 4.
						</p></div></div></section><section class="section" id="virt-reclaiming-statically-provisioned-persistent-volumes_virt-reusing-statically-provisioned-persistent-volumes"><div class="titlepage"><div><div><h4 class="title">10.19.17.2. Reclaiming statically provisioned persistent volumes</h4></div></div></div><p>
						Reclaim a statically provisioned persistent volume (PV) by unbinding the persistent volume claim (PVC) and deleting the PV. You might also need to manually delete the shared storage.
					</p><p>
						Reclaiming a statically provisioned PV is dependent on the underlying storage. This procedure provides a general approach that might need to be customized depending on your storage.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Ensure that the reclaim policy of the PV is set to <code class="literal">Retain</code>:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Check the reclaim policy of the PV:
									</p><pre class="programlisting language-terminal">$ oc get pv &lt;pv_name&gt; -o yaml | grep 'persistentVolumeReclaimPolicy'</pre></li><li class="listitem"><p class="simpara">
										If the <code class="literal">persistentVolumeReclaimPolicy</code> is not set to <code class="literal">Retain</code>, edit the reclaim policy with the following command:
									</p><pre class="programlisting language-terminal">$ oc patch pv &lt;pv_name&gt; -p '{"spec":{"persistentVolumeReclaimPolicy":"Retain"}}'</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Ensure that no resources are using the PV:
							</p><pre class="programlisting language-terminal">$ oc describe pvc &lt;pvc_name&gt; | grep 'Mounted By:'</pre><p class="simpara">
								Remove any resources that use the PVC before continuing.
							</p></li><li class="listitem"><p class="simpara">
								Delete the PVC to release the PV:
							</p><pre class="programlisting language-terminal">$ oc delete pvc &lt;pvc_name&gt;</pre></li><li class="listitem"><p class="simpara">
								Optional: Export the PV configuration to a YAML file. If you manually remove the shared storage later in this procedure, you can refer to this configuration. You can also use <code class="literal">spec</code> parameters in this file as the basis to create a new PV with the same storage configuration after you reclaim the PV:
							</p><pre class="programlisting language-terminal">$ oc get pv &lt;pv_name&gt; -o yaml &gt; &lt;file_name&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Delete the PV:
							</p><pre class="programlisting language-terminal">$ oc delete pv &lt;pv_name&gt;</pre></li><li class="listitem"><p class="simpara">
								Optional: Depending on the storage type, you might need to remove the contents of the shared storage folder:
							</p><pre class="programlisting language-terminal">$ rm -rf &lt;path_to_share_storage&gt;</pre></li><li class="listitem"><p class="simpara">
								Optional: Create a PV that uses the same storage configuration as the deleted PV. If you exported the reclaimed PV configuration earlier, you can use the <code class="literal">spec</code> parameters of that file as the basis for a new PV manifest:
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									To avoid possible conflict, it is good practice to give the new PV object a different name than the one that you deleted.
								</p></div></div><pre class="programlisting language-terminal">$ oc create -f &lt;new_pv_name&gt;.yaml</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-local-storage-for-vms">Configuring local storage for virtual machines</a>
							</li><li class="listitem">
								The OpenShift Container Platform Storage documentation has more information on <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#understanding-persistent-storage">Persistent Storage</a>.
							</li></ul></div></section></section><section class="section" id="virt-vm-disk-resizing"><div class="titlepage"><div><div><h3 class="title">10.19.18. Expanding a virtual machine disk</h3></div></div></div><p>
					You can enlarge the size of a virtual machine’s (VM) disk to provide a greater storage capacity by resizing the disk’s persistent volume claim (PVC).
				</p><p>
					However, you cannot reduce the size of a VM disk.
				</p><section class="section" id="virt-enlarging-vm-disk_virt-expanding-vm-disk"><div class="titlepage"><div><div><h4 class="title">10.19.18.1. Enlarging a virtual machine disk</h4></div></div></div><p>
						Virtual machine (VM) disk enlargement makes extra space available to the virtual machine. However, it is the responsibility of the VM owner to decide how to consume the storage.
					</p><p>
						If the disk is a <code class="literal">Filesystem</code> PVC, the matching file expands to the remaining size while reserving some space for file system overhead.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">PersistentVolumeClaim</code> manifest of the VM disk that you want to expand:
							</p><pre class="programlisting language-terminal">$ oc edit pvc &lt;pvc_name&gt;</pre></li><li class="listitem"><p class="simpara">
								Update the disk size:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
   name: vm-disk-expand
spec:
  accessModes:
     - ReadWriteMany
  resources:
    requests:
       storage: 3Gi <span id="CO116-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO116-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the new disk size.
									</div></dd></dl></div></li></ol></div></section><section class="section _additional-resources" id="additional-resources_virt-vm-disk-resizing"><div class="titlepage"><div><div><h4 class="title">10.19.18.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://docs.microsoft.com/en-us/windows-server/storage/disk-management/extend-a-basic-volume">Extending a basic volume in Windows</a>.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/solutions/29095">Extending an existing file system partition without destroying data in Red Hat Enterprise Linux</a>.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/solutions/24770">Extending a logical volume and its file system online in Red Hat Enterprise Linux</a>.
							</li></ul></div></section></section></section></section><section class="chapter" id="virtual-machine-templates"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Virtual machine templates</h1></div></div></div><section class="section" id="virt-creating-vm-template"><div class="titlepage"><div><div><h2 class="title">11.1. Creating virtual machine templates</h2></div></div></div><section class="section" id="virt-about-vm-templates_virt-creating-vm-template"><div class="titlepage"><div><div><h3 class="title">11.1.1. About virtual machine templates</h3></div></div></div><p>
					Preconfigured Red Hat virtual machine templates are listed in the <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> page. These templates are available for different versions of Red Hat Enterprise Linux, Fedora, Microsoft Windows 10, and Microsoft Windows Servers. Each Red Hat virtual machine template is preconfigured with the operating system image, default settings for the operating system, flavor (CPU and memory), and workload type (server).
				</p><p>
					The <span class="strong strong"><strong>Templates</strong></span> page displays four types of virtual machine templates:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Red Hat Supported</strong></span> templates are fully supported by Red Hat.
						</li><li class="listitem">
							<span class="strong strong"><strong>User Supported</strong></span> templates are <span class="strong strong"><strong>Red Hat Supported</strong></span> templates that were cloned and created by users.
						</li><li class="listitem">
							<span class="strong strong"><strong>Red Hat Provided</strong></span> templates have limited support from Red Hat.
						</li><li class="listitem">
							<span class="strong strong"><strong>User Provided</strong></span> templates are <span class="strong strong"><strong>Red Hat Provided</strong></span> templates that were cloned and created by users.
						</li></ul></div><p>
					You can use the filters in the template <span class="strong strong"><strong>Catalog</strong></span> to sort the templates by attributes such as boot source availability, operating system, and workload.
				</p><p>
					You cannot edit or delete a <span class="strong strong"><strong>Red Hat Supported</strong></span> or <span class="strong strong"><strong>Red Hat Provided</strong></span> template. You can clone the template, save it as a custom virtual machine template, and then edit it.
				</p><p>
					You can also create a custom virtual machine template by editing a YAML file example.
				</p></section><section class="section" id="virt-about-vms-and-boot-sources_virt-creating-vm-template"><div class="titlepage"><div><div><h3 class="title">11.1.2. About virtual machines and boot sources</h3></div></div></div><p>
					Virtual machines consist of a virtual machine definition and one or more disks that are backed by data volumes. Virtual machine templates enable you to create virtual machines using predefined virtual machine specifications.
				</p><p>
					Every virtual machine template requires a boot source, which is a fully configured virtual machine disk image including configured drivers. Each virtual machine template contains a virtual machine definition with a pointer to the boot source. Each boot source has a predefined name and namespace. For some operating systems, a boot source is automatically provided. If it is not provided, then an administrator must prepare a custom boot source.
				</p><p>
					Provided boot sources are updated automatically to the latest version of the operating system. For auto-updated boot sources, persistent volume claims (PVCs) are created with the cluster’s default storage class. If you select a different default storage class after configuration, you must delete the existing data volumes in the cluster namespace that are configured with the previous default storage class.
				</p><p>
					To use the boot sources feature, install the latest release of OpenShift Virtualization. The namespace <code class="literal">openshift-virtualization-os-images</code> enables the feature and is installed with the OpenShift Virtualization Operator. Once the boot source feature is installed, you can create boot sources, attach them to templates, and create virtual machines from the templates.
				</p><p>
					Define a boot source by using a persistent volume claim (PVC) that is populated by uploading a local file, cloning an existing PVC, importing from a registry, or by URL. Attach a boot source to a virtual machine template by using the web console. After the boot source is attached to a virtual machine template, you create any number of fully configured ready-to-use virtual machines from the template.
				</p></section><section class="section" id="virt-creating-template_virt-creating-vm-template"><div class="titlepage"><div><div><h3 class="title">11.1.3. Creating a virtual machine template in the web console</h3></div></div></div><p>
					You create a virtual machine template by editing a YAML file example in the OpenShift Container Platform web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the web console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> in the side menu.
						</li><li class="listitem">
							Optional: Use the <span class="strong strong"><strong>Project</strong></span> drop-down menu to change the project associated with the new template. All templates are saved to the <code class="literal">openshift</code> project by default.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create Template</strong></span>.
						</li><li class="listitem">
							Specify the template parameters by editing the YAML file.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</p><p class="simpara">
							The template is displayed on the <span class="strong strong"><strong>Templates</strong></span> page.
						</p></li><li class="listitem">
							Optional: Click <span class="strong strong"><strong>Download</strong></span> to download and save the YAML file.
						</li></ol></div></section><section class="section" id="virt-adding-a-boot-source-web_virt-creating-vm-template"><div class="titlepage"><div><div><h3 class="title">11.1.4. Adding a boot source for a virtual machine template</h3></div></div></div><p>
					A boot source can be configured for any virtual machine template that you want to use for creating virtual machines or custom templates. When virtual machine templates are configured with a boot source, they are labeled <span class="strong strong"><strong>Source available</strong></span> on the <span class="strong strong"><strong>Templates</strong></span> page. After you add a boot source to a template, you can create a new virtual machine from the template.
				</p><p>
					There are four methods for selecting and adding a boot source in the web console:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Upload local file (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>URL (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Clone (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Registry (creates PVC)</strong></span>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To add a boot source, you must be logged in as a user with the <code class="literal">os-images.kubevirt.io:edit</code> RBAC role or as an administrator. You do not need special privileges to create a virtual machine from a template with a boot source added.
						</li><li class="listitem">
							To upload a local file, the operating system image file must exist on your local machine.
						</li><li class="listitem">
							To import via URL, access to the web server with the operating system image is required. For example: the Red Hat Enterprise Linux web page with images.
						</li><li class="listitem">
							To clone an existing PVC, access to the project with a PVC is required.
						</li><li class="listitem">
							To import via registry, access to the container registry is required.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
						</li><li class="listitem">
							Click the options menu beside a template and select <span class="strong strong"><strong>Edit boot source</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add disk</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Add disk</strong></span> window, select <span class="strong strong"><strong>Use this disk as a boot source</strong></span>.
						</li><li class="listitem">
							Enter the disk name and select a <span class="strong strong"><strong>Source</strong></span>, for example, <span class="strong strong"><strong>Blank (creates PVC)</strong></span>.
						</li><li class="listitem">
							Enter a value for <span class="strong strong"><strong>Persistent Volume Claim size</strong></span> to specify the PVC size that is adequate for the uncompressed image and any additional space that is required.
						</li><li class="listitem">
							Select a <span class="strong strong"><strong>Type</strong></span>, for example, <span class="strong strong"><strong>Disk</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Optional: Click <span class="strong strong"><strong>Storage class</strong></span> and select the storage class that is used to create the disk. Typically, this storage class is the default storage class that is created for use by all PVCs.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Provided boot sources are updated automatically to the latest version of the operating system. For auto-updated boot sources, persistent volume claims (PVCs) are created with the cluster’s default storage class. If you select a different default storage class after configuration, you must delete the existing data volumes in the cluster namespace that are configured with the previous default storage class.
							</p></div></div></li><li class="listitem">
							Optional: Clear <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> to edit the access mode or volume mode.
						</li><li class="listitem"><p class="simpara">
							Select the appropriate method to save your boot source:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click <span class="strong strong"><strong>Save and upload</strong></span> if you uploaded a local file.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Save and import</strong></span> if you imported content from a URL or the registry.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Save and clone</strong></span> if you cloned an existing PVC.
								</li></ol></div></li></ol></div><p>
					Your custom virtual machine template with a boot source is listed on the <span class="strong strong"><strong>Catalog</strong></span> page. You can use this template to create a virtual machine.
				</p><section class="section" id="virt-template-fields-for-boot-source_virt-creating-vm-template"><div class="titlepage"><div><div><h4 class="title">11.1.4.1. Virtual machine template fields for adding a boot source</h4></div></div></div><p>
						The following table describes the fields for <span class="strong strong"><strong>Add boot source to template</strong></span> window. This window displays when you click <span class="strong strong"><strong>Add source</strong></span> for a virtual machine template on the <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> page.
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 30%; " class="col_2"><!--Empty--></col><col style="width: 50%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196959732784" scope="col">Name</th><th align="left" valign="top" id="idm140196959731696" scope="col">Parameter</th><th align="left" valign="top" id="idm140196959730608" scope="col">Description</th></tr></thead><tbody><tr><td rowspan="4" align="left" valign="top" headers="idm140196959732784"> <p>
										Boot source type
									</p>
									 </td><td align="left" valign="top" headers="idm140196959731696"> <p>
										Upload local file (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Upload a file from your local device. Supported file types include gz, xz, tar, and qcow2.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959731696"> <p>
										URL (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Import content from an image available from an HTTP or HTTPS endpoint. Obtain the download link URL from the web page where the image download is available and enter that URL link in the <span class="strong strong"><strong>Import URL</strong></span> field. Example: For a Red Hat Enterprise Linux image, log on to the Red Hat Customer Portal, access the image download page, and copy the download link URL for the KVM guest image.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959731696"> <p>
										PVC (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Use a PVC that is already available in the cluster and clone it.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959731696"> <p>
										Registry (creates PVC)
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Specify the bootable operating system container that is located in a registry and accessible from the cluster. Example: kubevirt/cirros-registry-dis-demo.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959732784"> <p>
										Source provider
									</p>
									 </td><td align="left" valign="top" headers="idm140196959731696"> </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Optional field. Add descriptive text about the source for the template or the name of the user who created the template. Example: Red Hat.
									</p>
									 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm140196959732784"> <p>
										Advanced Storage settings
									</p>
									 </td><td align="left" valign="top" headers="idm140196959731696"> <p>
										StorageClass
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										The storage class that is used to create the disk.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959731696"> <p>
										Access mode
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Access mode of the persistent volume. Supported access modes are <span class="strong strong"><strong>Single User (RWO)</strong></span>, <span class="strong strong"><strong>Shared Access (RWX)</strong></span>, <span class="strong strong"><strong>Read Only (ROX)</strong></span>. If <span class="strong strong"><strong>Single User (RWO)</strong></span> is selected, the disk can be mounted as read/write by a single node. If <span class="strong strong"><strong>Shared Access (RWX)</strong></span> is selected, the disk can be mounted as read-write by many nodes. The <code class="literal">kubevirt-storage-class-defaults</code> config map provides access mode defaults for data volumes. The default value is set according to the best option for each storage class in the cluster.
									</p>
									 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Shared Access (RWX) is required for some features, such as live migration of virtual machines between nodes.
										</p></div></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140196959731696"> <p>
										Volume mode
									</p>
									 </td><td align="left" valign="top" headers="idm140196959730608"> <p>
										Defines whether the persistent volume uses a formatted file system or raw block state. Supported modes are <span class="strong strong"><strong>Block</strong></span> and <span class="strong strong"><strong>Filesystem</strong></span>. The <code class="literal">kubevirt-storage-class-defaults</code> config map provides volume mode defaults for data volumes. The default value is set according to the best option for each storage class in the cluster.
									</p>
									 </td></tr></tbody></table></div></section></section><section class="section _additional-resources" id="additional-resources_creating-vm-template"><div class="titlepage"><div><div><h3 class="title">11.1.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-and-using-boot-sources">Creating and using boot sources</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>
						</li></ul></div></section></section><section class="section" id="virt-editing-vm-template"><div class="titlepage"><div><div><h2 class="title">11.2. Editing virtual machine templates</h2></div></div></div><p>
				You can edit a virtual machine template in the web console.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot edit a template provided by the Red Hat Virtualization Operator. If you clone the template, you can edit it.
				</p></div></div><section class="section" id="virt-editing-vm-web_virt-editing-vm-template"><div class="titlepage"><div><div><h3 class="title">11.2.1. Editing a virtual machine template in the web console</h3></div></div></div><p>
					You can edit a virtual machine template by using the OpenShift Container Platform web console or the command line interface.
				</p><p>
					Editing a virtual machine template does not affect virtual machines already created from that template.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> in the web console.
						</li><li class="listitem">
							Click the 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 Options menu beside a virtual machine template and select the object to edit.
						</li><li class="listitem"><p class="simpara">
							To edit a Red Hat template, click the 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 Options menu, select <span class="strong strong"><strong>Clone</strong></span> to create a custom template, and then edit the custom template.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								<span class="strong strong"><strong>Edit boot source reference</strong></span> is disabled if the template’s data source is managed by the <code class="literal">DataImportCron</code> custom resource or if the template does not have a data volume reference.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div><section class="section" id="virt-vm-add-nic_virt-editing-vm-template"><div class="titlepage"><div><div><h4 class="title">11.2.1.1. Adding a network interface to a virtual machine template</h4></div></div></div><p>
						Use this procedure to add a network interface to a virtual machine template.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine template to open the <span class="strong strong"><strong>Template details</strong></span> page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Network interfaces</strong></span> tab, click <span class="strong strong"><strong>Add Network Interface</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Add Network Interface</strong></span> window, specify the <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Model</strong></span>, <span class="strong strong"><strong>Network</strong></span>, <span class="strong strong"><strong>Type</strong></span>, and <span class="strong strong"><strong>MAC Address</strong></span> of the network interface.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Add</strong></span>.
							</li></ol></div></section><section class="section" id="virt-add-disk-to-vm_virt-editing-vm-template"><div class="titlepage"><div><div><h4 class="title">11.2.1.2. Adding a virtual disk to a virtual machine template</h4></div></div></div><p>
						Use this procedure to add a virtual disk to a virtual machine template.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
							</li><li class="listitem">
								Select a virtual machine template to open the <span class="strong strong"><strong>Template details</strong></span> page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Disks</strong></span> tab, click <span class="strong strong"><strong>Add disk</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Specify the <span class="strong strong"><strong>Source</strong></span>, <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Size</strong></span>, <span class="strong strong"><strong>Type</strong></span>, <span class="strong strong"><strong>Interface</strong></span>, and <span class="strong strong"><strong>Storage Class</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Optional: You can enable preallocation if you use a blank disk source and require maximum write performance when creating data volumes. To do so, select the <span class="strong strong"><strong>Enable preallocation</strong></span> checkbox.
									</li><li class="listitem">
										Optional: You can clear <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> to change the <span class="strong strong"><strong>Volume Mode</strong></span> and <span class="strong strong"><strong>Access Mode</strong></span> for the virtual disk. If you do not specify these parameters, the system uses the default values from the <code class="literal">kubevirt-storage-class-defaults</code> config map.
									</li></ol></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Add</strong></span>.
							</li></ol></div></section></section></section><section class="section" id="virt-dedicated-resources-vm-template"><div class="titlepage"><div><div><h2 class="title">11.3. Enabling dedicated resources for virtual machine templates</h2></div></div></div><p>
				Virtual machines can have resources of a node, such as CPU, dedicated to them to improve performance.
			</p><section class="section" id="virt-about-dedicated-resources_virt-dedicated-resources-vm-template"><div class="titlepage"><div><div><h3 class="title">11.3.1. About dedicated resources</h3></div></div></div><p>
					When you enable dedicated resources for your virtual machine, your virtual machine’s workload is scheduled on CPUs that will not be used by other processes. By using dedicated resources, you can improve the performance of the virtual machine and the accuracy of latency predictions.
				</p></section><section class="section" id="prerequisites-13"><div class="titlepage"><div><div><h3 class="title">11.3.2. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#using-cpu-manager-and-topology-manager">CPU Manager</a> must be configured on the node. Verify that the node has the <code class="literal">cpumanager</code> = <code class="literal">true</code> label before scheduling virtual machine workloads.
						</li></ul></div></section><section class="section" id="virt-enabling-dedicated-resources_virt-dedicated-resources-vm-template"><div class="titlepage"><div><div><h3 class="title">11.3.3. Enabling dedicated resources for a virtual machine template</h3></div></div></div><p>
					You enable dedicated resources for a virtual machine template in the <span class="strong strong"><strong>Details</strong></span> tab. Virtual machines that were created from a Red Hat template can be configured with dedicated resources.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
						</li><li class="listitem">
							Select a virtual machine template to open the <span class="strong strong"><strong>Template details</strong></span> page.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Scheduling</strong></span> tab, click the edit icon beside <span class="strong strong"><strong>Dedicated Resources</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Schedule this workload with dedicated resources (guaranteed policy)</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section></section><section class="section" id="virt-deploying-vm-template-to-custom-namespace"><div class="titlepage"><div><div><h2 class="title">11.4. Deploying a virtual machine template to a custom namespace</h2></div></div></div><p>
				Red Hat provides preconfigured virtual machine templates that are installed in the <code class="literal">openshift</code> namespace. The <code class="literal">ssp-operator</code> deploys virtual machine templates to the <code class="literal">openshift</code> namespace by default. Templates in the <code class="literal">openshift</code> namespace are publicly available to all users. These templates are listed on the <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> page for different operating systems.
			</p><section class="section" id="virt-creating-custom-namespace-for-templates_virt-deploying-vm-template-to-custom-namespace"><div class="titlepage"><div><div><h3 class="title">11.4.1. Creating a custom namespace for templates</h3></div></div></div><p>
					You can create a custom namespace that is used to deploy virtual machine templates for use by anyone who has permissions to access those templates. To add templates to a custom namespace, edit the <code class="literal">HyperConverged</code> custom resource (CR), add <code class="literal">commonTemplatesNamespace</code> to the spec, and specify the custom namespace for the virtual machine templates. After the <code class="literal">HyperConverged</code> CR is modified, the <code class="literal">ssp-operator</code> populates the templates in the custom namespace.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Install the OpenShift Container Platform CLI <code class="literal">oc</code>.
						</li><li class="listitem">
							Log in as a user with cluster-admin privileges.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the following command to create your custom namespace:
						</p><pre class="screen">$ oc create namespace &lt;mycustomnamespace&gt;</pre></li></ul></div></section><section class="section" id="virt-adding-templates-to-custom-namespace_virt-deploying-vm-template-to-custom-namespace"><div class="titlepage"><div><div><h3 class="title">11.4.2. Adding templates to a custom namespace</h3></div></div></div><p>
					The <code class="literal">ssp-operator</code> deploys virtual machine templates to the <code class="literal">openshift</code> namespace by default. Templates in the <code class="literal">openshift</code> namespace are publicly availably to all users. When a custom namespace is created and templates are added to that namespace, you can modify or delete virtual machine templates in the <code class="literal">openshift</code> namespace. To add templates to a custom namespace, edit the <code class="literal">HyperConverged</code> custom resource (CR) which contains the <code class="literal">ssp-operator</code>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							View the list of virtual machine templates that are available in the <code class="literal">openshift</code> namespace.
						</p><pre class="programlisting language-terminal">$ oc get templates -n openshift</pre></li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
						</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
							View the list of virtual machine templates that are available in the custom namespace.
						</p><pre class="programlisting language-terminal">$ oc get templates -n customnamespace</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal">commonTemplatesNamespace</code> attribute and specify the custom namespace. Example:
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  commonTemplatesNamespace: customnamespace <span id="CO117-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO117-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The custom namespace for deploying templates.
								</div></dd></dl></div></li><li class="listitem">
							Save your changes and exit the editor. The <code class="literal">ssp-operator</code> adds virtual machine templates that exist in the default <code class="literal">openshift</code> namespace to the custom namespace.
						</li></ol></div><section class="section" id="virt-deleting-templates-from-custom-namespace_virt-deploying-vm-template-to-custom-namespace"><div class="titlepage"><div><div><h4 class="title">11.4.2.1. Deleting templates from a custom namespace</h4></div></div></div><p>
						To delete virtual machine templates from a custom namespace, remove the <code class="literal">commonTemplateNamespace</code> attribute from the <code class="literal">HyperConverged</code> custom resource (CR) and delete each template from that custom namespace.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Remove the <code class="literal">commonTemplateNamespace</code> attribute.
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  commonTemplatesNamespace: customnamespace <span id="CO118-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO118-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The <code class="literal">commonTemplatesNamespace</code> attribute to be deleted.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Delete a specific template from the custom namespace that was removed.
							</p><pre class="programlisting language-terminal">$ oc delete templates -n customnamespace &lt;template_name&gt;</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Verify that the template was deleted from the custom namespace.
							</p><pre class="programlisting language-terminal">$ oc get templates -n customnamespace</pre></li></ul></div></section><section class="section _additional-resources" id="additional-resources_deploying-vm-templates-to-custom-namespace"><div class="titlepage"><div><div><h4 class="title">11.4.2.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-creating-vm-template">Creating virtual machine templates</a>
							</li></ul></div></section></section></section><section class="section" id="virt-deleting-vm-template"><div class="titlepage"><div><div><h2 class="title">11.5. Deleting virtual machine templates</h2></div></div></div><p>
				You can delete customized virtual machine templates based on Red Hat templates by using the web console.
			</p><p>
				You cannot delete Red Hat templates.
			</p><section class="section" id="virt-deleting-template-wizard-web_virt-deleting-vm-template"><div class="titlepage"><div><div><h3 class="title">11.5.1. Deleting a virtual machine template in the web console</h3></div></div></div><p>
					Deleting a virtual machine template permanently removes it from the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can delete customized virtual machine templates. You cannot delete Red Hat-supplied templates.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
						</li><li class="listitem">
							Click the Options menu 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 of a template and select <span class="strong strong"><strong>Delete template</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Delete</strong></span>.
						</li></ol></div></section></section><section class="section" id="virt-creating-and-using-boot-sources"><div class="titlepage"><div><div><h2 class="title">11.6. Creating and using boot sources</h2></div></div></div><p>
				A boot source contains a bootable operating system (OS) and all of the configuration settings for the OS, such as drivers.
			</p><p>
				You use a boot source to create virtual machine templates with specific configurations. These templates can be used to create any number of available virtual machines.
			</p><p>
				Quick Start tours are available in the OpenShift Container Platform web console to assist you in creating a custom boot source, uploading a boot source, and other tasks. Select <span class="strong strong"><strong>Quick Starts</strong></span> from the <span class="strong strong"><strong>Help</strong></span> menu to view the Quick Start tours.
			</p><section class="section" id="virt-about-vms-and-boot-sources_virt-creating-and-using-boot-sources"><div class="titlepage"><div><div><h3 class="title">11.6.1. About virtual machines and boot sources</h3></div></div></div><p>
					Virtual machines consist of a virtual machine definition and one or more disks that are backed by data volumes. Virtual machine templates enable you to create virtual machines using predefined virtual machine specifications.
				</p><p>
					Every virtual machine template requires a boot source, which is a fully configured virtual machine disk image including configured drivers. Each virtual machine template contains a virtual machine definition with a pointer to the boot source. Each boot source has a predefined name and namespace. For some operating systems, a boot source is automatically provided. If it is not provided, then an administrator must prepare a custom boot source.
				</p><p>
					Provided boot sources are updated automatically to the latest version of the operating system. For auto-updated boot sources, persistent volume claims (PVCs) are created with the cluster’s default storage class. If you select a different default storage class after configuration, you must delete the existing data volumes in the cluster namespace that are configured with the previous default storage class.
				</p><p>
					To use the boot sources feature, install the latest release of OpenShift Virtualization. The namespace <code class="literal">openshift-virtualization-os-images</code> enables the feature and is installed with the OpenShift Virtualization Operator. Once the boot source feature is installed, you can create boot sources, attach them to templates, and create virtual machines from the templates.
				</p><p>
					Define a boot source by using a persistent volume claim (PVC) that is populated by uploading a local file, cloning an existing PVC, importing from a registry, or by URL. Attach a boot source to a virtual machine template by using the web console. After the boot source is attached to a virtual machine template, you create any number of fully configured ready-to-use virtual machines from the template.
				</p></section><section class="section" id="virt-importing-rhel-image-boot-source-web_virt-creating-and-using-boot-sources"><div class="titlepage"><div><div><h3 class="title">11.6.2. Importing a RHEL image as a boot source</h3></div></div></div><p>
					You can import a Red Hat Enterprise Linux (RHEL) image as a boot source by specifying a URL for the image.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must have access to a web page with the operating system image. For example: Download Red Hat Enterprise Linux web page with images.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
						</li><li class="listitem">
							Identify the RHEL template for which you want to configure a boot source and click <span class="strong strong"><strong>Add source</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Add boot source to template</strong></span> window, select <span class="strong strong"><strong>URL (creates PVC)</strong></span> from the <span class="strong strong"><strong>Boot source type</strong></span> list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>RHEL download page</strong></span> to access the Red Hat Customer Portal. A list of available installers and images is displayed on the Download Red Hat Enterprise Linux page.
						</li><li class="listitem">
							Identify the Red Hat Enterprise Linux KVM guest image that you want to download. Right-click <span class="strong strong"><strong>Download Now</strong></span>, and copy the URL for the image.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Add boot source to template</strong></span> window, paste the URL into the <span class="strong strong"><strong>Import URL</strong></span> field, and click <span class="strong strong"><strong>Save and import</strong></span>.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Verify that the template displays a green checkmark in the <span class="strong strong"><strong>Boot source</strong></span> column on the <span class="strong strong"><strong>Templates</strong></span> page.
						</li></ol></div><p>
					You can now use this template to create RHEL virtual machines.
				</p></section><section class="section" id="virt-adding-a-boot-source-web_virt-creating-and-using-boot-sources"><div class="titlepage"><div><div><h3 class="title">11.6.3. Adding a boot source for a virtual machine template</h3></div></div></div><p>
					A boot source can be configured for any virtual machine template that you want to use for creating virtual machines or custom templates. When virtual machine templates are configured with a boot source, they are labeled <span class="strong strong"><strong>Source available</strong></span> on the <span class="strong strong"><strong>Templates</strong></span> page. After you add a boot source to a template, you can create a new virtual machine from the template.
				</p><p>
					There are four methods for selecting and adding a boot source in the web console:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Upload local file (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>URL (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Clone (creates PVC)</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Registry (creates PVC)</strong></span>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To add a boot source, you must be logged in as a user with the <code class="literal">os-images.kubevirt.io:edit</code> RBAC role or as an administrator. You do not need special privileges to create a virtual machine from a template with a boot source added.
						</li><li class="listitem">
							To upload a local file, the operating system image file must exist on your local machine.
						</li><li class="listitem">
							To import via URL, access to the web server with the operating system image is required. For example: the Red Hat Enterprise Linux web page with images.
						</li><li class="listitem">
							To clone an existing PVC, access to the project with a PVC is required.
						</li><li class="listitem">
							To import via registry, access to the container registry is required.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Templates</strong></span> from the side menu.
						</li><li class="listitem">
							Click the options menu beside a template and select <span class="strong strong"><strong>Edit boot source</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add disk</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Add disk</strong></span> window, select <span class="strong strong"><strong>Use this disk as a boot source</strong></span>.
						</li><li class="listitem">
							Enter the disk name and select a <span class="strong strong"><strong>Source</strong></span>, for example, <span class="strong strong"><strong>Blank (creates PVC)</strong></span>.
						</li><li class="listitem">
							Enter a value for <span class="strong strong"><strong>Persistent Volume Claim size</strong></span> to specify the PVC size that is adequate for the uncompressed image and any additional space that is required.
						</li><li class="listitem">
							Select a <span class="strong strong"><strong>Type</strong></span>, for example, <span class="strong strong"><strong>Disk</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Optional: Click <span class="strong strong"><strong>Storage class</strong></span> and select the storage class that is used to create the disk. Typically, this storage class is the default storage class that is created for use by all PVCs.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Provided boot sources are updated automatically to the latest version of the operating system. For auto-updated boot sources, persistent volume claims (PVCs) are created with the cluster’s default storage class. If you select a different default storage class after configuration, you must delete the existing data volumes in the cluster namespace that are configured with the previous default storage class.
							</p></div></div></li><li class="listitem">
							Optional: Clear <span class="strong strong"><strong>Apply optimized StorageProfile settings</strong></span> to edit the access mode or volume mode.
						</li><li class="listitem"><p class="simpara">
							Select the appropriate method to save your boot source:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click <span class="strong strong"><strong>Save and upload</strong></span> if you uploaded a local file.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Save and import</strong></span> if you imported content from a URL or the registry.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Save and clone</strong></span> if you cloned an existing PVC.
								</li></ol></div></li></ol></div><p>
					Your custom virtual machine template with a boot source is listed on the <span class="strong strong"><strong>Catalog</strong></span> page. You can use this template to create a virtual machine.
				</p></section><section class="section" id="virt-creating-a-vm-from-a-template-with-an-attached-boot-source_virt-creating-and-using-boot-sources"><div class="titlepage"><div><div><h3 class="title">11.6.4. Creating a virtual machine from a template with an attached boot source</h3></div></div></div><p>
					After you add a boot source to a template, you can create a virtual machine from the template.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Catalog</strong></span> in the side menu.
						</li><li class="listitem">
							Select the updated template and click <span class="strong strong"><strong>Quick create VirtualMachine</strong></span>.
						</li></ol></div><p>
					The <span class="strong strong"><strong>VirtualMachine details</strong></span> is displayed with the status <span class="strong strong"><strong>Starting</strong></span>.
				</p></section><section class="section _additional-resources" id="additional-resources_creating-and-using-boot-sources"><div class="titlepage"><div><div><h3 class="title">11.6.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-create-vms">Creating virtual machine templates</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-automatic-bootsource-updates">Managing automatic boot source updates</a>
						</li></ul></div></section></section><section class="section" id="virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h2 class="title">11.7. Managing automatic boot source updates</h2></div></div></div><p>
				Manage automatic boot source updates.
			</p><section class="section" id="virt-about-auto-bootsource-updates_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h3 class="title">11.7.1. About automatic boot source updates</h3></div></div></div><p>
					Boot sources can make virtual machine (VM) creation more accessible and efficient for users. If automatic boot source updates are enabled, the Containerized Data Importer (CDI) imports, polls, and updates the images so that they are ready to be cloned for new VMs. By default, CDI automatically updates the <span class="emphasis"><em>system-defined</em></span> boot sources that OpenShift Virtualization provides.
				</p><p>
					You can opt out of automatic updates for all system-defined boot sources by disabling the <code class="literal">enableCommonBootImageImport</code> feature gate. If you disable this feature gate, all <code class="literal">DataImportCron</code> objects are deleted. This does not remove previously imported <code class="literal">PersistentVolumeClaim</code> (PVC) objects that store operating system images, though administrators can delete them manually.
				</p><p>
					When the <code class="literal">enableCommonBootImageImport</code> feature gate is disabled, <code class="literal">DataSource</code> objects are reset so that they no longer point to the original PVCs. An administrator can manually provide a boot source by creating a new PVC for the <code class="literal">DataSource</code> object and populating the PVC with an operating system image.
				</p><p>
					<span class="emphasis"><em>Custom</em></span> boot sources that are not provided by OpenShift Virtualization are not controlled by the feature gate. You must manage them individually by editing the <code class="literal">HyperConverged</code> custom resource (CR). You can also use this method to manage individual system-defined boot sources.
				</p></section><section class="section" id="enable-disable-auto-updates-all-system-boot-sources_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h3 class="title">11.7.2. Enable or disable automatic updates for all system boot sources</h3></div></div></div><p>
					Control automatic updates for all system-defined boot sources by using the feature gate.
				</p><section class="section" id="virt-managing-auto-update-all-system-boot-sources_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h4 class="title">11.7.2.1. Managing automatic updates for all system-defined boot sources</h4></div></div></div><p>
						Disabling automatic boot source imports and updates can lower resource usage. In disconnected environments, disabling automatic boot source updates prevents <code class="literal">CDIDataImportCronOutdated</code> alerts from filling up logs.
					</p><p>
						To disable automatic updates for all system-defined boot sources, turn off the <code class="literal">enableCommonBootImageImport</code> feature gate by setting the value to <code class="literal">false</code>. Setting this value to <code class="literal">true</code> re-enables the feature gate and turns automatic updates back on.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Custom boot sources are not affected by this setting.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Toggle the feature gate for automatic boot source updates by editing the <code class="literal">HyperConverged</code> custom resource (CR).
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										To disable automatic boot source updates, set the <code class="literal">spec.featureGates.enableCommonBootImageImport</code> field in the <code class="literal">HyperConverged</code> CR to <code class="literal">false</code>. For example:
									</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n openshift-cnv \
  --type json -p '[{"op": "replace", "path": \
  "/spec/featureGates/enableCommonBootImageImport", \
  "value": false}]'</pre></li><li class="listitem"><p class="simpara">
										To re-enable automatic boot source updates, set the <code class="literal">spec.featureGates.enableCommonBootImageImport</code> field in the <code class="literal">HyperConverged</code> CR to <code class="literal">true</code>. For example:
									</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n openshift-cnv \
  --type json -p '[{"op": "replace", "path": \
  "/spec/featureGates/enableCommonBootImageImport", \
  "value": true}]'</pre></li></ul></div></li></ul></div></section></section><section class="section" id="enable-updates-custom-boot-sources_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h3 class="title">11.7.3. Enable automatic updates for custom boot sources</h3></div></div></div><p>
					Ensure that your cluster has a default storage class. Then, enable automatic updates for custom boot sources.
				</p><section class="section" id="virt-configuring-storage-class-bootsource-update_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h4 class="title">11.7.3.1. Configuring a storage class for custom boot source updates</h4></div></div></div><p>
						Specify a new default storage class in the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Boot sources are created from storage using the default storage class. If your cluster does not have a default storage class, you must define one before configuring automatic updates for custom boot sources.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre></li><li class="listitem"><p class="simpara">
								Define a new storage class by entering a value in the <code class="literal">storageClassName</code> field:
							</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  dataImportCronTemplates:
  - metadata:
      name: rhel8-image-cron
    spec:
      template:
        spec:
          storageClassName: &lt;new_storage_class&gt; <span id="CO119-1"><!--Empty--></span><span class="callout">1</span>
#...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO119-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Define the storage class.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Remove the <code class="literal">storageclass.kubernetes.io/is-default-class</code> annotation from the current default storage class.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Retrieve the name of the current default storage class by running the following command:
									</p><pre class="programlisting language-terminal">$ oc get sc</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
											
<pre class="programlisting language-text">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
csi-manila-ceph manila.csi.openstack.org Delete Immediate false 11d
hostpath-csi-basic (default) kubevirt.io.hostpath-provisioner Delete WaitForFirstConsumer false 11d <span id="CO120-1"><!--Empty--></span><span class="callout">1</span>
...</pre>

										</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO120-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												In this example, the current default storage class is named <code class="literal">hostpath-csi-basic</code>.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Remove the annotation from the current default storage class by running the following command:
									</p><pre class="programlisting language-terminal">$ oc patch storageclass &lt;current_default_storage_class&gt; -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"false"}}}' <span id="CO121-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO121-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												Replace <code class="literal">&lt;current_default_storage_class&gt;</code> with the <code class="literal">storageClassName</code> value of the default storage class.
											</div></dd></dl></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Set the new storage class as the default by running the following command:
							</p><pre class="programlisting language-terminal">$ oc patch storageclass &lt;new_storage_class&gt; -p '{"metadata":{"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}' <span id="CO122-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO122-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace <code class="literal">&lt;new_storage_class&gt;</code> with the <code class="literal">storageClassName</code> value that you added to the <code class="literal">HyperConverged</code> CR.
									</div></dd></dl></div></li></ol></div></section><section class="section" id="virt-autoupdate-custom-bootsource_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h4 class="title">11.7.3.2. Enabling automatic updates for custom boot sources</h4></div></div></div><p>
						OpenShift Virtualization automatically updates system-defined boot sources by default, but does not automatically update custom boot sources. You must manually enable automatic updates by editing the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The cluster has a default storage class.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">HyperConverged</code> CR, adding the appropriate template and boot source in the <code class="literal">dataImportCronTemplates</code> section. For example:
							</p><div class="formalpara"><p class="title"><strong>Example custom resource</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  dataImportCronTemplates:
  - metadata:
      name: centos7-image-cron
      annotations:
        cdi.kubevirt.io/storage.bind.immediate.requested: "true" <span id="CO123-1"><!--Empty--></span><span class="callout">1</span>
    spec:
      schedule: "0 */12 * * *" <span id="CO123-2"><!--Empty--></span><span class="callout">2</span>
      template:
        spec:
          source:
            registry: <span id="CO123-3"><!--Empty--></span><span class="callout">3</span>
              url: docker://quay.io/containerdisks/centos:7-2009
          storage:
            resources:
              requests:
                storage: 10Gi
      managedDataSource: centos7 <span id="CO123-4"><!--Empty--></span><span class="callout">4</span>
      retentionPolicy: "None" <span id="CO123-5"><!--Empty--></span><span class="callout">5</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO123-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This annotation is required for storage classes with <code class="literal">volumeBindingMode</code> set to <code class="literal">WaitForFirstConsumer</code>.
									</div></dd><dt><a href="#CO123-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Schedule for the job specified in cron format.
									</div></dd><dt><a href="#CO123-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Use to create a data volume from a registry source. Use the default <code class="literal">pod</code> <code class="literal">pullMethod</code> and not <code class="literal">node</code> <code class="literal">pullMethod</code>, which is based on the <code class="literal">node</code> docker cache. The <code class="literal">node</code> docker cache is useful when a registry image is available via <code class="literal">Container.Image</code>, but the CDI importer is not authorized to access it.
									</div></dd><dt><a href="#CO123-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										For the custom image to be detected as an available boot source, the name of the image’s <code class="literal">managedDataSource</code> must match the name of the template’s <code class="literal">DataSource</code>, which is found under <code class="literal">spec.dataVolumeTemplates.spec.sourceRef.name</code> in the VM template YAML file.
									</div></dd><dt><a href="#CO123-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Use <code class="literal">All</code> to retain data volumes and data sources when the cron job is deleted. Use <code class="literal">None</code> to delete data volumes and data sources when the cron job is deleted.
									</div></dd></dl></div></li><li class="listitem">
								Save the file.
							</li></ol></div></section></section><section class="section" id="disable-auto-updates-specific-boot-source_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h3 class="title">11.7.4. Disable automatic updates for a specific boot source</h3></div></div></div><p>
					Disable automatic updates for individual boot sources.
				</p><section class="section" id="virt-disable-auto-updates-single-boot-source_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h4 class="title">11.7.4.1. Disabling automatic updates for a single boot source</h4></div></div></div><p>
						You can disable automatic updates for an individual boot source, whether it is custom or system-defined, by editing the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
							</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
								Disable automatic updates for an individual boot source by editing the <code class="literal">spec.dataImportCronTemplates</code> field.
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Custom boot source</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													Remove the boot source from the <code class="literal">spec.dataImportCronTemplates</code> field. Automatic updates are disabled for custom boot sources by default.
												</li></ul></div></dd><dt><span class="term">System-defined boot source</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
													Add the boot source to <code class="literal">spec.dataImportCronTemplates</code>.
												</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
														Automatic updates are enabled by default for system-defined boot sources, but these boot sources are not listed in the CR unless you add them.
													</p></div></div></li><li class="listitem"><p class="simpara">
													Set the value of the <code class="literal">dataimportcrontemplate.kubevirt.io/enable</code> annotation to <code class="literal">false</code>.
												</p><p class="simpara">
													For example:
												</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  dataImportCronTemplates:
  - metadata:
      annotations:
        dataimportcrontemplate.kubevirt.io/enable: false
      name: rhel8-image-cron
# ...</pre></li></ol></div></dd></dl></div></li><li class="listitem">
								Save the file.
							</li></ol></div></section></section><section class="section" id="virt-verify-status-bootsource-update_virt-automatic-bootsource-updates"><div class="titlepage"><div><div><h3 class="title">11.7.5. Verifying the status of a boot source</h3></div></div></div><p>
					You can determine if a boot source is system-defined or custom by viewing the <code class="literal">HyperConverged</code> custom resource (CR).
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							View the contents of the <code class="literal">HyperConverged</code> CR by running the following command:
						</p><pre class="programlisting language-terminal">$ oc get hco -n openshift-cnv kubevirt-hyperconverged -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
# ...
status:
# ...
  dataImportCronTemplates:
  - metadata:
      annotations:
        cdi.kubevirt.io/storage.bind.immediate.requested: "true"
      name: centos-7-image-cron
    spec:
      garbageCollect: Outdated
      managedDataSource: centos7
      schedule: 55 8/12 * * *
      template:
        metadata: {}
        spec:
          source:
            registry:
              url: docker://quay.io/containerdisks/centos:7-2009
          storage:
            resources:
              requests:
                storage: 30Gi
        status: {}
    status:
      commonTemplate: true <span id="CO124-1"><!--Empty--></span><span class="callout">1</span>
# ...
  - metadata:
      annotations:
        cdi.kubevirt.io/storage.bind.immediate.requested: "true"
      name: user-defined-dic
    spec:
      garbageCollect: Outdated
      managedDataSource: user-defined-centos-stream8
      schedule: 55 8/12 * * *
      template:
        metadata: {}
        spec:
          source:
            registry:
              pullMethod: node
              url: docker://quay.io/containerdisks/centos-stream:8
          storage:
            resources:
              requests:
                storage: 30Gi
        status: {}
    status: {} <span id="CO124-2"><!--Empty--></span><span class="callout">2</span>
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO124-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Indicates a system-defined boot source.
								</div></dd><dt><a href="#CO124-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Indicates a custom boot source.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Verify the status of the boot source by reviewing the <code class="literal">status.dataImportCronTemplates.status</code> field.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If the field contains <code class="literal">commonTemplate: true</code>, it is a system-defined boot source.
								</li><li class="listitem">
									If the <code class="literal">status.dataImportCronTemplates.status</code> field has the value <code class="literal">{}</code>, it is a custom boot source.
								</li></ul></div></li></ol></div></section></section></section><section class="chapter" id="live-migration"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Live migration</h1></div></div></div><section class="section" id="virt-live-migration"><div class="titlepage"><div><div><h2 class="title">12.1. Virtual machine live migration</h2></div></div></div><section class="section" id="virt-about-live-migration_virt-live-migration"><div class="titlepage"><div><div><h3 class="title">12.1.1. About live migration</h3></div></div></div><p>
					Live migration is the process of moving a running virtual machine instance (VMI) to another node in the cluster without interrupting the virtual workload or access. If a VMI uses the <code class="literal">LiveMigrate</code> eviction strategy, it automatically migrates when the node that the VMI runs on is placed into maintenance mode. You can also manually start live migration by selecting a VMI to migrate.
				</p><p>
					You can use live migration if the following conditions are met:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Shared storage with <code class="literal">ReadWriteMany</code> (RWX) access mode.
						</li><li class="listitem">
							Sufficient RAM and network bandwidth.
						</li><li class="listitem">
							If the virtual machine uses a host model CPU, the nodes must support the virtual machine’s host model CPU.
						</li></ul></div><p>
					By default, live migration traffic is encrypted using Transport Layer Security (TLS).
				</p></section><section class="section _additional-resources" id="additional-resources_virt-live-migration"><div class="titlepage"><div><div><h3 class="title">12.1.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-migrate-vmi">Migrating a virtual machine instance to another node</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration-metrics_virt-prometheus-queries">Live migration metrics</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration-limits">Live migration limiting</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/articles/6994974#vm-migration-tuning">VM migration tuning</a>
						</li></ul></div></section></section><section class="section" id="virt-live-migration-limits"><div class="titlepage"><div><div><h2 class="title">12.2. Live migration limits and timeouts</h2></div></div></div><p>
				Apply live migration limits and timeouts so that migration processes do not overwhelm the cluster. Configure these settings by editing the <code class="literal">HyperConverged</code> custom resource (CR).
			</p><section class="section" id="virt-configuring-live-migration-limits_virt-live-migration-limits"><div class="titlepage"><div><div><h3 class="title">12.2.1. Configuring live migration limits and timeouts</h3></div></div></div><p>
					Configure live migration limits and timeouts for the cluster by updating the <code class="literal">HyperConverged</code> custom resource (CR), which is located in the <code class="literal">openshift-cnv</code> namespace.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Edit the <code class="literal">HyperConverged</code> CR and add the necessary live migration parameters.
						</p><pre class="programlisting language-terminal">$ oc edit hco -n openshift-cnv kubevirt-hyperconverged</pre><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  liveMigrationConfig: <span id="CO125-1"><!--Empty--></span><span class="callout">1</span>
    bandwidthPerMigration: 64Mi
    completionTimeoutPerGiB: 800
    parallelMigrationsPerCluster: 5
    parallelOutboundMigrationsPerNode: 2
    progressTimeout: 150</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO125-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									In this example, the <code class="literal">spec.liveMigrationConfig</code> array contains the default values for each field.
								</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can restore the default value for any <code class="literal">spec.liveMigrationConfig</code> field by deleting that key/value pair and saving the file. For example, delete <code class="literal">progressTimeout: &lt;value&gt;</code> to restore the default <code class="literal">progressTimeout: 150</code>.
							</p></div></div></li></ul></div></section><section class="section" id="virt-live-migration-limits-ref_virt-live-migration-limits"><div class="titlepage"><div><div><h3 class="title">12.2.2. Cluster-wide live migration limits and timeouts</h3></div></div></div><div class="table" id="idm140196957701536"><p class="title"><strong>Table 12.1. Migration parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196957695776" scope="col">Parameter</th><th align="left" valign="top" id="idm140196957694688" scope="col">Description</th><th align="left" valign="top" id="idm140196958202144" scope="col">Default</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196957695776"> <p>
									<code class="literal">parallelMigrationsPerCluster</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196957694688"> <p>
									Number of migrations running in parallel in the cluster.
								</p>
								 </td><td align="left" valign="top" headers="idm140196958202144"> <p>
									5
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196957695776"> <p>
									<code class="literal">parallelOutboundMigrationsPerNode</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196957694688"> <p>
									Maximum number of outbound migrations per node.
								</p>
								 </td><td align="left" valign="top" headers="idm140196958202144"> <p>
									2
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196957695776"> <p>
									<code class="literal">bandwidthPerMigration</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196957694688"> <p>
									Bandwidth limit of each migration, in MiB/s.
								</p>
								 </td><td align="left" valign="top" headers="idm140196958202144"> <p>
									0 <sup>[1]</sup>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196957695776"> <p>
									<code class="literal">completionTimeoutPerGiB</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196957694688"> <p>
									The migration is canceled if it has not completed in this time, in seconds per GiB of memory. For example, a virtual machine instance with 6GiB memory times out if it has not completed migration in 4800 seconds. If the <code class="literal">Migration Method</code> is <code class="literal">BlockMigration</code>, the size of the migrating disks is included in the calculation.
								</p>
								 </td><td align="left" valign="top" headers="idm140196958202144"> <p>
									800
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196957695776"> <p>
									<code class="literal">progressTimeout</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140196957694688"> <p>
									The migration is canceled if memory copy fails to make progress in this time, in seconds.
								</p>
								 </td><td align="left" valign="top" headers="idm140196958202144"> <p>
									150
								</p>
								 </td></tr></tbody></table></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The default value of <code class="literal">0</code> is unlimited.
						</li></ol></div></section></section><section class="section" id="virt-migrate-vmi"><div class="titlepage"><div><div><h2 class="title">12.3. Migrating a virtual machine instance to another node</h2></div></div></div><p>
				Manually initiate a live migration of a virtual machine instance to another node using either the web console or the CLI.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If a virtual machine uses a host model CPU, you can perform live migration of that virtual machine only between nodes that support its host CPU model.
				</p></div></div><section class="section" id="virt-initiating-vm-migration-web_virt-migrate-vmi"><div class="titlepage"><div><div><h3 class="title">12.3.1. Initiating live migration of a virtual machine instance in the web console</h3></div></div></div><p>
					Migrate a running virtual machine instance to a different node in the cluster.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <span class="strong strong"><strong>Migrate</strong></span> action is visible to all users but only admin users can initiate a virtual machine migration.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem"><p class="simpara">
							You can initiate the migration from this page, which makes it easier to perform actions on multiple virtual machines on the same page, or from the <span class="strong strong"><strong>VirtualMachine details</strong></span> page where you can view comprehensive details of the selected virtual machine:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Click the Options menu 
									<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
									 next to the virtual machine and select <span class="strong strong"><strong>Migrate</strong></span>.
								</li><li class="listitem">
									Click the virtual machine name to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page and click <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Migrate</strong></span>.
								</li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Migrate</strong></span> to migrate the virtual machine to another node.
						</li></ol></div><section class="section" id="monitoring-live-migration-by-using-the-web-console_virt-migrate-vmi"><div class="titlepage"><div><div><h4 class="title">12.3.1.1. Monitoring live migration by using the web console</h4></div></div></div><p>
						You can monitor the progress of all live migrations on the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-migrations"><span class="strong strong"><strong>Overview</strong></span> → <span class="strong strong"><strong>Migrations</strong></span> tab</a> in the web console.
					</p><p>
						You can view the migration metrics of a virtual machine on the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-metrics"><span class="strong strong"><strong>VirtualMachine details</strong></span> → <span class="strong strong"><strong>Metrics</strong></span> tab</a> in the web console.
					</p></section></section><section class="section" id="virt-initiating-vm-migration-cli_virt-migrate-vmi"><div class="titlepage"><div><div><h3 class="title">12.3.2. Initiating live migration of a virtual machine instance in the CLI</h3></div></div></div><p>
					Initiate a live migration of a running virtual machine instance by creating a <code class="literal">VirtualMachineInstanceMigration</code> object in the cluster and referencing the name of the virtual machine instance.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">VirtualMachineInstanceMigration</code> configuration file for the virtual machine instance to migrate. For example, <code class="literal">vmi-migrate.yaml</code>:
						</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachineInstanceMigration
metadata:
  name: migration-job
spec:
  vmiName: vmi-fedora</pre></li><li class="listitem"><p class="simpara">
							Create the object in the cluster by running the following command:
						</p><pre class="programlisting language-terminal">$ oc create -f vmi-migrate.yaml</pre></li></ol></div><p>
					The <code class="literal">VirtualMachineInstanceMigration</code> object triggers a live migration of the virtual machine instance. This object exists in the cluster for as long as the virtual machine instance is running, unless manually deleted.
				</p><section class="section" id="virt-monitoring-vm-migration-cli_virt-migrate-vmi"><div class="titlepage"><div><div><h4 class="title">12.3.2.1. Monitoring live migration of a virtual machine instance in the CLI</h4></div></div></div><p>
						The status of the virtual machine migration is stored in the <code class="literal">Status</code> component of the <code class="literal">VirtualMachineInstance</code> configuration.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal">oc describe</code> command on the migrating virtual machine instance:
							</p><pre class="programlisting language-terminal">$ oc describe vmi vmi-fedora</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml"># ...
Status:
  Conditions:
    Last Probe Time:       &lt;nil&gt;
    Last Transition Time:  &lt;nil&gt;
    Status:                True
    Type:                  LiveMigratable
  Migration Method:  LiveMigration
  Migration State:
    Completed:                    true
    End Timestamp:                2018-12-24T06:19:42Z
    Migration UID:                d78c8962-0743-11e9-a540-fa163e0c69f1
    Source Node:                  node2.example.com
    Start Timestamp:              2018-12-24T06:19:35Z
    Target Node:                  node1.example.com
    Target Node Address:          10.9.0.18:43891
    Target Node Domain Detected:  true</pre>

								</p></div></li></ul></div></section></section><section class="section _additional-resources" id="virt-migrate-vmi_additional-resources"><div class="titlepage"><div><div><h3 class="title">12.3.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-cancel-vmi-migration">Cancelling the live migration of a virtual machine instance</a>
						</li></ul></div></section></section><section class="section" id="virt-migrating-vm-on-secondary-network"><div class="titlepage"><div><div><h2 class="title">12.4. Migrating a virtual machine over a dedicated additional network</h2></div></div></div><p>
				You can configure a dedicated <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-attaching-vm-multiple-networks">Multus network</a> for live migration. A dedicated network minimizes the effects of network saturation on tenant workloads during live migration.
			</p><section class="section" id="virt-configuring-secondary-network-vm-live-migration_virt-migrating-vm-on-secondary-network"><div class="titlepage"><div><div><h3 class="title">12.4.1. Configuring a dedicated secondary network for virtual machine live migration</h3></div></div></div><p>
					To configure a dedicated secondary network for live migration, you must first create a bridge network attachment definition for the <code class="literal">openshift-cnv</code> namespace by using the CLI. Then, add the name of the <code class="literal">NetworkAttachmentDefinition</code> object to the <code class="literal">HyperConverged</code> custom resource (CR).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You logged in to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							The Multus Container Network Interface (CNI) plugin is installed on the cluster.
						</li><li class="listitem">
							Every node on the cluster has at least two Network Interface Cards (NICs), and the NICs to be used for live migration are connected to the same VLAN.
						</li><li class="listitem">
							The virtual machine (VM) is running with the <code class="literal">LiveMigrate</code> eviction strategy.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">NetworkAttachmentDefinition</code> manifest.
						</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: my-secondary-network <span id="CO126-1"><!--Empty--></span><span class="callout">1</span>
  namespace: openshift-cnv <span id="CO126-2"><!--Empty--></span><span class="callout">2</span>
spec:
  config: '{
    "cniVersion": "0.3.1",
    "name": "migration-bridge",
    "type": "macvlan",
    "master": "eth1", <span id="CO126-3"><!--Empty--></span><span class="callout">3</span>
    "mode": "bridge",
    "ipam": {
      "type": "whereabouts", <span id="CO126-4"><!--Empty--></span><span class="callout">4</span>
      "range": "10.200.5.0/24" <span id="CO126-5"><!--Empty--></span><span class="callout">5</span>
    }
  }'</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO126-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The name of the <code class="literal">NetworkAttachmentDefinition</code> object.
								</div></dd><dt><a href="#CO126-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The namespace where the <code class="literal">NetworkAttachmentDefinition</code> object resides. This must be <code class="literal">openshift-cnv</code>.
								</div></dd><dt><a href="#CO126-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The name of the NIC to be used for live migration.
								</div></dd><dt><a href="#CO126-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The name of the CNI plugin that provides the network for this network attachment definition.
								</div></dd><dt><a href="#CO126-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The IP address range for the secondary network. This range must not have any overlap with the IP addresses of the main network.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Open the <code class="literal">HyperConverged</code> CR in your default editor by running the following command:
						</p><pre class="programlisting language-terminal">oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
							Add the name of the <code class="literal">NetworkAttachmentDefinition</code> object to the <code class="literal">spec.liveMigrationConfig</code> stanza of the <code class="literal">HyperConverged</code> CR. For example:
						</p><div class="formalpara"><p class="title"><strong>Example configuration file</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  liveMigrationConfig:
    completionTimeoutPerGiB: 800
    network: my-secondary-network  <span id="CO127-1"><!--Empty--></span><span class="callout">1</span>
    parallelMigrationsPerCluster: 5
    parallelOutboundMigrationsPerNode: 2
    progressTimeout: 150
# ...</pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO127-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The name of the Multus <code class="literal">NetworkAttachmentDefinition</code> object to be used for live migrations.
								</div></dd></dl></div></li><li class="listitem">
							Save your changes and exit the editor. The <code class="literal">virt-handler</code> pods restart and connect to the secondary network.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							When the node that the virtual machine runs on is placed into maintenance mode, the VM automatically migrates to another node in the cluster. You can verify that the migration occurred over the secondary network and not the default pod network by checking the target IP address in the virtual machine instance (VMI) metadata.
						</p><pre class="programlisting language-terminal">oc get vmi &lt;vmi_name&gt; -o jsonpath='{.status.migrationState.targetNodeAddress}'</pre></li></ul></div></section><section class="section" id="virt-selecting-migration-network-ui_virt-migrating-vm-on-secondary-network"><div class="titlepage"><div><div><h3 class="title">12.4.2. Selecting a dedicated network by using the web console</h3></div></div></div><p>
					You can select a dedicated network for live migration by using the OpenShift Container Platform web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You configured a Multus network for live migration.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to <span class="strong strong"><strong>Virtualization &gt; Overview</strong></span> in the OpenShift Container Platform web console.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Settings</strong></span> tab and then click <span class="strong strong"><strong>Live migration</strong></span>.
						</li><li class="listitem">
							Select the network from the <span class="strong strong"><strong>Live migration network</strong></span> list.
						</li></ol></div></section><section class="section" id="additional-resources_virt-migrating-vm-on-secondary-network"><div class="titlepage"><div><div><h3 class="title">12.4.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration-limits">Live migration limits and timeouts</a>
						</li></ul></div></section></section><section class="section" id="virt-cancel-vmi-migration"><div class="titlepage"><div><div><h2 class="title">12.5. Cancelling the live migration of a virtual machine instance</h2></div></div></div><p>
				Cancel the live migration so that the virtual machine instance remains on the original node.
			</p><p>
				You can cancel a live migration from either the web console or the CLI.
			</p><section class="section" id="virt-cancelling-vm-migration-web_virt-cancel-vmi-migration"><div class="titlepage"><div><div><h3 class="title">12.5.1. Cancelling live migration of a virtual machine instance in the web console</h3></div></div></div><p>
					You can cancel the live migration of a virtual machine instance in the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform console, click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span> from the side menu.
						</li><li class="listitem">
							Click the Options menu 
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
							 beside a virtual machine and select <span class="strong strong"><strong>Cancel Migration</strong></span>.
						</li></ol></div></section><section class="section" id="virt-cancelling-vm-migration-cli_virt-cancel-vmi-migration"><div class="titlepage"><div><div><h3 class="title">12.5.2. Cancelling live migration of a virtual machine instance in the CLI</h3></div></div></div><p>
					Cancel the live migration of a virtual machine instance by deleting the <code class="literal">VirtualMachineInstanceMigration</code> object associated with the migration.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Delete the <code class="literal">VirtualMachineInstanceMigration</code> object that triggered the live migration, <code class="literal">migration-job</code> in this example:
						</p><pre class="programlisting language-terminal">$ oc delete vmim migration-job</pre></li></ul></div></section></section><section class="section" id="virt-configuring-vmi-eviction-strategy"><div class="titlepage"><div><div><h2 class="title">12.6. Configuring virtual machine eviction strategy</h2></div></div></div><p>
				The <code class="literal">LiveMigrate</code> eviction strategy ensures that a virtual machine instance is not interrupted if the node is placed into maintenance or drained. Virtual machines instances with this eviction strategy will be live migrated to another node.
			</p><section class="section" id="virt-configuring-vm-live-migration-cli_virt-configuring-vmi-eviction-strategy"><div class="titlepage"><div><div><h3 class="title">12.6.1. Configuring custom virtual machines with the LiveMigration eviction strategy</h3></div></div></div><p>
					You only need to configure the <code class="literal">LiveMigration</code> eviction strategy on custom virtual machines. Common templates have this eviction strategy configured by default.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the <code class="literal">evictionStrategy: LiveMigrate</code> option to the <code class="literal">spec.template.spec</code> section in the virtual machine configuration file. This example uses <code class="literal">oc edit</code> to update the relevant snippet of the <code class="literal">VirtualMachine</code> configuration file:
						</p><pre class="programlisting language-terminal">$ oc edit vm &lt;custom-vm&gt; -n &lt;my-namespace&gt;</pre><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: custom-vm
spec:
  template:
    spec:
      evictionStrategy: LiveMigrate
# ...</pre></li><li class="listitem"><p class="simpara">
							Restart the virtual machine for the update to take effect:
						</p><pre class="programlisting language-terminal">$ virtctl restart &lt;custom-vm&gt; -n &lt;my-namespace&gt;</pre></li></ol></div></section></section><section class="section" id="virt-configuring-live-migration-policies"><div class="titlepage"><div><div><h2 class="title">12.7. Configuring live migration policies</h2></div></div></div><p>
				You can define different migration configurations for specified groups of virtual machine instances (VMIs) by using a live migration policy.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Live migration policy is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
				</p></div></div><p>
				To configure a live migration policy by using the web console, see the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-migrationpolicies-page">MigrationPolicies page documentation</a>.
			</p><section class="section" id="virt-configuring-a-live-migration-policy_virt-live-migration"><div class="titlepage"><div><div><h3 class="title">12.7.1. Configuring a live migration policy from the command line</h3></div></div></div><p>
					Use the <code class="literal">MigrationPolicy</code> custom resource definition (CRD) to define migration policies for one or more groups of selected virtual machine instances (VMIs).
				</p><p>
					You can specify groups of VMIs by using any combination of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Virtual machine instance labels such as <code class="literal">size</code>, <code class="literal">os</code>, <code class="literal">gpu</code>, and other VMI labels.
						</li><li class="listitem">
							Namespace labels such as <code class="literal">priority</code>, <code class="literal">bandwidth</code>, <code class="literal">hpc-workload</code>, and other namespace labels.
						</li></ul></div><p>
					For the policy to apply to a specific group of VMIs, all labels on the group of VMIs must match the labels in the policy.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If multiple live migration policies apply to a VMI, the policy with the highest number of matching labels takes precedence. If multiple policies meet this criteria, the policies are sorted by lexicographic order of the matching labels keys, and the first one in that order takes precedence.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">MigrationPolicy</code> CRD for your specified group of VMIs. The following example YAML configures a group with the labels <code class="literal">hpc-workloads:true</code>, <code class="literal">xyz-workloads-type: ""</code>, <code class="literal">workload-type: db</code>, and <code class="literal">operating-system: ""</code>:
						</p><pre class="programlisting language-yaml">apiVersion: migrations.kubevirt.io/v1beta1
kind: MigrationPolicy
metadata:
  name: my-awesome-policy
spec:
  # Migration Configuration
  allowAutoConverge: true
  bandwidthPerMigration: 217Ki
  completionTimeoutPerGiB: 23
  allowPostCopy: false

  # Matching to VMIs
  selectors:
    namespaceSelector: <span id="CO128-1"><!--Empty--></span><span class="callout">1</span>
      hpc-workloads: "True"
      xyz-workloads-type: ""
    virtualMachineInstanceSelector: <span id="CO128-2"><!--Empty--></span><span class="callout">2</span>
      workload-type: "db"
      operating-system: ""</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO128-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Use <code class="literal">namespaceSelector</code> to define a group of VMIs by using namespace labels.
								</div></dd><dt><a href="#CO128-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Use <code class="literal">virtualMachineInstanceSelector</code> to define a group of VMIs by using VMI labels.
								</div></dd></dl></div></li></ol></div></section></section></section><section class="chapter" id="node-maintenance"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Node maintenance</h1></div></div></div><section class="section" id="virt-about-node-maintenance"><div class="titlepage"><div><div><h2 class="title">13.1. About node maintenance</h2></div></div></div><section class="section" id="virt-about-node-maintenance_virt-about-node-maintenance"><div class="titlepage"><div><div><h3 class="title">13.1.1. About node maintenance mode</h3></div></div></div><p>
					Nodes can be placed into maintenance mode using the <code class="literal">oc adm</code> utility, or using <code class="literal">NodeMaintenance</code> custom resources (CRs).
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">node-maintenance-operator</code> (NMO) is no longer shipped with OpenShift Virtualization. It is now available to deploy as a standalone Operator from the <span class="strong strong"><strong>OperatorHub</strong></span> in the OpenShift Container Platform web console, or by using the OpenShift CLI (<code class="literal">oc</code>).
					</p></div></div><p>
					Placing a node into maintenance marks the node as unschedulable and drains all the virtual machines and pods from it. Virtual machine instances that have a <code class="literal">LiveMigrate</code> eviction strategy are live migrated to another node without loss of service. This eviction strategy is configured by default in virtual machine created from common templates but must be configured manually for custom virtual machines.
				</p><p>
					Virtual machine instances without an eviction strategy are shut down. Virtual machines with a <code class="literal">RunStrategy</code> of <code class="literal">Running</code> or <code class="literal">RerunOnFailure</code> are recreated on another node. Virtual machines with a <code class="literal">RunStrategy</code> of <code class="literal">Manual</code> are not automatically restarted.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Virtual machines must have a persistent volume claim (PVC) with a shared <code class="literal">ReadWriteMany</code> (RWX) access mode to be live migrated.
					</p></div></div><p>
					The Node Maintenance Operator watches for new or deleted <code class="literal">NodeMaintenance</code> CRs. When a new <code class="literal">NodeMaintenance</code> CR is detected, no new workloads are scheduled and the node is cordoned off from the rest of the cluster. All pods that can be evicted are evicted from the node. When a <code class="literal">NodeMaintenance</code> CR is deleted, the node that is referenced in the CR is made available for new workloads.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Using a <code class="literal">NodeMaintenance</code> CR for node maintenance tasks achieves the same results as the <code class="literal">oc adm cordon</code> and <code class="literal">oc adm drain</code> commands using standard OpenShift Container Platform custom resource processing.
					</p></div></div></section><section class="section" id="virt-maintaining-bare-metal-nodes_virt-about-node-maintenance"><div class="titlepage"><div><div><h3 class="title">13.1.2. Maintaining bare metal nodes</h3></div></div></div><p>
					When you deploy OpenShift Container Platform on bare metal infrastructure, there are additional considerations that must be taken into account compared to deploying on cloud infrastructure. Unlike in cloud environments where the cluster nodes are considered ephemeral, re-provisioning a bare metal node requires significantly more time and effort for maintenance tasks.
				</p><p>
					When a bare metal node fails, for example, if a fatal kernel error happens or a NIC card hardware failure occurs, workloads on the failed node need to be restarted elsewhere else on the cluster while the problem node is repaired or replaced. Node maintenance mode allows cluster administrators to gracefully power down nodes, moving workloads to other parts of the cluster and ensuring workloads do not get interrupted. Detailed progress and node status details are provided during maintenance.
				</p></section><section class="section _additional-resources" id="additional-resources_virt-about-node-maintenance"><div class="titlepage"><div><div><h3 class="title">13.1.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-remediating-fencing-maintaining-rhwa">Installing the Node Maintenance Operator by using the CLI</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-remediating-fencing-maintaining-rhwa">Setting a node to maintenance mode</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-remediating-fencing-maintaining-rhwa">Resuming a node from maintenance mode</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-runstrategies-vms_virt-create-vms">About RunStrategies for virtual machines</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-live-migration">Virtual machine live migration</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-configuring-vmi-eviction-strategy">Configuring virtual machine eviction strategy</a>
						</li></ul></div></section></section><section class="section" id="virt-automatic-certificates"><div class="titlepage"><div><div><h2 class="title">13.2. Automatic renewal of TLS certificates</h2></div></div></div><p>
				All TLS certificates for OpenShift Virtualization components are renewed and rotated automatically. You are not required to refresh them manually.
			</p><section class="section" id="virt-automatic-certificates-renewal_virt-automatic-certificates"><div class="titlepage"><div><div><h3 class="title">13.2.1. TLS certificates automatic renewal schedules</h3></div></div></div><p>
					TLS certificates are automatically deleted and replaced according to the following schedule:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							KubeVirt certificates are renewed daily.
						</li><li class="listitem">
							Containerized Data Importer controller (CDI) certificates are renewed every 15 days.
						</li><li class="listitem">
							MAC pool certificates are renewed every year.
						</li></ul></div><p>
					Automatic TLS certificate rotation does not disrupt any operations. For example, the following operations continue to function without any disruption:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Migrations
						</li><li class="listitem">
							Image uploads
						</li><li class="listitem">
							VNC and console connections
						</li></ul></div></section></section><section class="section" id="virt-managing-node-labeling-obsolete-cpu-models"><div class="titlepage"><div><div><h2 class="title">13.3. Managing node labeling for obsolete CPU models</h2></div></div></div><p>
				You can schedule a virtual machine (VM) on a node as long as the VM CPU model and policy are supported by the node.
			</p><section class="section" id="virt-about-node-labeling-obsolete-cpu-models_virt-managing-node-labeling-obsolete-cpu-models"><div class="titlepage"><div><div><h3 class="title">13.3.1. About node labeling for obsolete CPU models</h3></div></div></div><p>
					The OpenShift Virtualization Operator uses a predefined list of obsolete CPU models to ensure that a node supports only valid CPU models for scheduled VMs.
				</p><p>
					By default, the following CPU models are eliminated from the list of labels generated for the node:
				</p><div class="example" id="idm140196958261280"><p class="title"><strong>Example 13.1. Obsolete CPU models</strong></p><div class="example-contents"><pre class="screen">"486"
Conroe
athlon
core2duo
coreduo
kvm32
kvm64
n270
pentium
pentium2
pentium3
pentiumpro
phenom
qemu32
qemu64</pre></div></div><p>
					This predefined list is not visible in the <code class="literal">HyperConverged</code> CR. You cannot <span class="emphasis"><em>remove</em></span> CPU models from this list, but you can add to the list by editing the <code class="literal">spec.obsoleteCPUs.cpuModels</code> field of the <code class="literal">HyperConverged</code> CR.
				</p></section><section class="section" id="virt-about-node-labeling-cpu-features_virt-managing-node-labeling-obsolete-cpu-models"><div class="titlepage"><div><div><h3 class="title">13.3.2. About node labeling for CPU features</h3></div></div></div><p>
					Through the process of iteration, the base CPU features in the minimum CPU model are eliminated from the list of labels generated for the node.
				</p><p>
					For example:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An environment might have two supported CPU models: <code class="literal">Penryn</code> and <code class="literal">Haswell</code>.
						</li><li class="listitem"><p class="simpara">
							If <code class="literal">Penryn</code> is specified as the CPU model for <code class="literal">minCPU</code>, each base CPU feature for <code class="literal">Penryn</code> is compared to the list of CPU features supported by <code class="literal">Haswell</code>.
						</p><div class="example" id="idm140196958249424"><p class="title"><strong>Example 13.2. CPU features supported by <code class="literal">Penryn</code></strong></p><div class="example-contents"><pre class="screen">apic
clflush
cmov
cx16
cx8
de
fpu
fxsr
lahf_lm
lm
mca
mce
mmx
msr
mtrr
nx
pae
pat
pge
pni
pse
pse36
sep
sse
sse2
sse4.1
ssse3
syscall
tsc</pre></div></div><div class="example" id="idm140196958247520"><p class="title"><strong>Example 13.3. CPU features supported by <code class="literal">Haswell</code></strong></p><div class="example-contents"><pre class="screen">aes
apic
avx
avx2
bmi1
bmi2
clflush
cmov
cx16
cx8
de
erms
fma
fpu
fsgsbase
fxsr
hle
invpcid
lahf_lm
lm
mca
mce
mmx
movbe
msr
mtrr
nx
pae
pat
pcid
pclmuldq
pge
pni
popcnt
pse
pse36
rdtscp
rtm
sep
smep
sse
sse2
sse4.1
sse4.2
ssse3
syscall
tsc
tsc-deadline
x2apic
xsave</pre></div></div></li><li class="listitem"><p class="simpara">
							If both <code class="literal">Penryn</code> and <code class="literal">Haswell</code> support a specific CPU feature, a label is not created for that feature. Labels are generated for CPU features that are supported only by <code class="literal">Haswell</code> and not by <code class="literal">Penryn</code>.
						</p><div class="example" id="idm140196958242480"><p class="title"><strong>Example 13.4. Node labels created for CPU features after iteration</strong></p><div class="example-contents"><pre class="screen">aes
avx
avx2
bmi1
bmi2
erms
fma
fsgsbase
hle
invpcid
movbe
pcid
pclmuldq
popcnt
rdtscp
rtm
sse4.2
tsc-deadline
x2apic
xsave</pre></div></div></li></ul></div></section><section class="section" id="virt-configuring-obsolete-cpu-models_virt-managing-node-labeling-obsolete-cpu-models"><div class="titlepage"><div><div><h3 class="title">13.3.3. Configuring obsolete CPU models</h3></div></div></div><p>
					You can configure a list of obsolete CPU models by editing the <code class="literal">HyperConverged</code> custom resource (CR).
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Edit the <code class="literal">HyperConverged</code> custom resource, specifying the obsolete CPU models in the <code class="literal">obsoleteCPUs</code> array. For example:
						</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
  namespace: openshift-cnv
spec:
  obsoleteCPUs:
    cpuModels: <span id="CO129-1"><!--Empty--></span><span class="callout">1</span>
      - "&lt;obsolete_cpu_1&gt;"
      - "&lt;obsolete_cpu_2&gt;"
    minCPUModel: "&lt;minimum_cpu_model&gt;" <span id="CO129-2"><!--Empty--></span><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO129-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Replace the example values in the <code class="literal">cpuModels</code> array with obsolete CPU models. Any value that you specify is added to a predefined list of obsolete CPU models. The predefined list is not visible in the CR.
								</div></dd><dt><a href="#CO129-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Replace this value with the minimum CPU model that you want to use for basic CPU features. If you do not specify a value, <code class="literal">Penryn</code> is used by default.
								</div></dd></dl></div></li></ul></div></section></section><section class="section" id="virt-using-skip-node"><div class="titlepage"><div><div><h2 class="title">13.4. Preventing node reconciliation</h2></div></div></div><p>
				Use <code class="literal">skip-node</code> annotation to prevent the <code class="literal">node-labeller</code> from reconciling a node.
			</p><section class="section" id="virt-using-skip-node_virt-preventing-node-reconciliation"><div class="titlepage"><div><div><h3 class="title">13.4.1. Using skip-node annotation</h3></div></div></div><p>
					If you want the <code class="literal">node-labeller</code> to skip a node, annotate that node by using the <code class="literal">oc</code> CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed the OpenShift CLI (<code class="literal">oc</code>).
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Annotate the node that you want to skip by running the following command:
						</p><pre class="programlisting language-terminal">$ oc annotate node &lt;node_name&gt; node-labeller.kubevirt.io/skip-node=true <span id="CO130-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO130-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Replace <code class="literal">&lt;node_name&gt;</code> with the name of the relevant node to skip.
								</div></dd></dl></div><p class="simpara">
							Reconciliation resumes on the next cycle after the node annotation is removed or set to false.
						</p></li></ul></div></section><section class="section _additional-resources" id="additional-resources_virt-preventing-node-reconciliation"><div class="titlepage"><div><div><h3 class="title">13.4.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-managing-node-labeling-obsolete-cpu-models">Managing node labeling for obsolete CPU models</a>
						</li></ul></div></section></section></section><section class="chapter" id="support"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Support</h1></div></div></div><section class="section" id="virt-support-overview"><div class="titlepage"><div><div><h2 class="title">14.1. Support overview</h2></div></div></div><p>
				You can collect data about your environment, monitor the health of your cluster and virtual machines (VMs), and troubleshoot OpenShift Virtualization resources with the following tools.
			</p><section class="section" id="virt-web-console_virt-support-overview"><div class="titlepage"><div><div><h3 class="title">14.1.1. Web console</h3></div></div></div><p>
					The OpenShift Container Platform web console displays resource usage, alerts, events, and trends for your cluster and for OpenShift Virtualization components and resources.
				</p><div class="table" id="idm140196960921888"><p class="title"><strong>Table 14.1. Web console pages for monitoring and troubleshooting</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196960917024" scope="col">Page</th><th align="left" valign="top" id="idm140196960915936" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>Overview</strong></span> page
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									Cluster details, status, alerts, inventory, and resource usage
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>Virtualization</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-overview"><span class="strong strong"><strong>Overview</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									OpenShift Virtualization resources, usage, alerts, and status
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>Virtualization</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-top-consumers"><span class="strong strong"><strong>Top consumers</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									Top consumers of CPU, memory, and storage
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>Virtualization</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-migrations"><span class="strong strong"><strong>Migrations</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									Progress of live migrations
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>VirtualMachines</strong></span> → <span class="strong strong"><strong>VirtualMachine</strong></span> → <span class="strong strong"><strong>VirtualMachine details</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-metrics"><span class="strong strong"><strong>Metrics</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									VM resource usage, storage, network, and migration
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>VirtualMachines</strong></span> → <span class="strong strong"><strong>VirtualMachine</strong></span> → <span class="strong strong"><strong>VirtualMachine details</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-events"><span class="strong strong"><strong>Events</strong></span> tab</a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									List of VM events
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140196960917024"> <p>
									<span class="strong strong"><strong>VirtualMachines</strong></span> → <span class="strong strong"><strong>VirtualMachine</strong></span> → <span class="strong strong"><strong>VirtualMachine details</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-diagnostics"><span class="strong strong"><strong>Diagnostics tab</strong></span></a>
								</p>
								 </td><td align="left" valign="top" headers="idm140196960915936"> <p>
									VM status conditions and volume snapshot status
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="collecting-data-for-red-hat-support_virt-support-overview"><div class="titlepage"><div><div><h3 class="title">14.1.2. Collecting data for Red Hat Support</h3></div></div></div><p>
					When you submit a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#support-submitting-a-case_getting-support">support case</a> to Red Hat Support, it is helpful to provide debugging information. You can gather debugging information by performing the following steps:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-collecting-data-about-your-environment_virt-collecting-virt-data">Collecting data about your environment</a></span></dt><dd>
								Configure Prometheus and Alertmanager and collect <code class="literal">must-gather</code> data for OpenShift Container Platform and OpenShift Virtualization.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-collecting-data-about-vms_virt-collecting-virt-data">Collecting data about VMs</a></span></dt><dd>
								Collect <code class="literal">must-gather</code> data and memory dumps from VMs.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-virt-must-gather_virt-collecting-virt-data"><code class="literal">must-gather</code> tool for OpenShift Virtualization</a></span></dt><dd>
								Configure and use the <code class="literal">must-gather</code> tool.
							</dd></dl></div></section><section class="section" id="monitoring_virt-support-overview"><div class="titlepage"><div><div><h3 class="title">14.1.3. Monitoring</h3></div></div></div><p>
					You can monitor the health of your cluster and VMs. For details about monitoring tools, see the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-monitoring-overview">Monitoring overview</a>.
				</p></section><section class="section" id="troubleshooting_virt-support-overview"><div class="titlepage"><div><div><h3 class="title">14.1.4. Troubleshooting</h3></div></div></div><p>
					Troubleshoot OpenShift Virtualization components and VMs and resolve issues that trigger alerts in the web console.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#events_virt-troubleshooting">Events</a></span></dt><dd>
								View important life-cycle information for VMs, namespaces, and resources.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-logs_virt-troubleshooting">Logs</a></span></dt><dd>
								View and configure logs for OpenShift Virtualization components and VMs.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-runbooks">Runbooks</a></span></dt><dd>
								Diagnose and resolve issues that trigger OpenShift Virtualization alerts in the web console.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#troubleshooting-data-volumes_virt-troubleshooting">Troubleshooting data volumes</a></span></dt><dd>
								Troubleshoot data volumes by analyzing conditions and events.
							</dd></dl></div></section></section><section class="section" id="virt-collecting-virt-data"><div class="titlepage"><div><div><h2 class="title">14.2. Collecting data for Red Hat Support</h2></div></div></div><p>
				When you submit a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#support-submitting-a-case_getting-support">support case</a> to Red Hat Support, it is helpful to provide debugging information for OpenShift Container Platform and OpenShift Virtualization by using the following tools:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">must-gather tool</span></dt><dd>
							The <code class="literal">must-gather</code> tool collects diagnostic information, including resource definitions and service logs.
						</dd><dt><span class="term">Prometheus</span></dt><dd>
							Prometheus is a time-series database and a rule evaluation engine for metrics. Prometheus sends alerts to Alertmanager for processing.
						</dd><dt><span class="term">Alertmanager</span></dt><dd>
							The Alertmanager service handles alerts received from Prometheus. The Alertmanager is also responsible for sending the alerts to external notification systems.
						</dd></dl></div><p>
				For information about the OpenShift Container Platform monitoring stack, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#about-openshift-monitoring">About OpenShift Container Platform monitoring</a>.
			</p><section class="section" id="virt-collecting-data-about-your-environment_virt-collecting-virt-data"><div class="titlepage"><div><div><h3 class="title">14.2.1. Collecting data about your environment</h3></div></div></div><p>
					Collecting data about your environment minimizes the time required to analyze and determine the root cause.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#modifying-retention-time-for-prometheus-metrics-data_configuring-the-monitoring-stack">Set the retention time for Prometheus metrics data</a> to a minimum of seven days.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#sending-notifications-to-external-systems_managing-alerts">Configure the Alertmanager to capture relevant alerts and to send alert notifications to a dedicated mailbox</a> so that they can be viewed and persisted outside the cluster.
						</li><li class="listitem">
							Record the exact number of affected nodes and virtual machines.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#support_gathering_data_gathering-cluster-data">Collect must-gather data for the cluster</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.13/html-single/troubleshooting_openshift_data_foundation/index#downloading-log-files-and-diagnostic-information_rhodf">Collect must-gather data for Red Hat OpenShift Data Foundation</a>, if necessary.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-using-virt-must-gather_virt-collecting-virt-data">Collect must-gather data for OpenShift Virtualization</a>.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#querying-metrics-for-all-projects-as-an-administrator_managing-metrics">Collect Prometheus metrics for the cluster</a>.
						</li></ol></div></section><section class="section" id="virt-collecting-data-about-vms_virt-collecting-virt-data"><div class="titlepage"><div><div><h3 class="title">14.2.2. Collecting data about virtual machines</h3></div></div></div><p>
					Collecting data about malfunctioning virtual machines (VMs) minimizes the time required to analyze and determine the root cause.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Linux VMs: <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-installing-qemu-guest-agent-on-linux-vm_virt-installing-qemu-guest-agent">Install the latest QEMU guest agent</a>.
						</li><li class="listitem"><p class="simpara">
							Windows VMs:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Record the Windows patch update details.
								</li><li class="listitem">
									<a class="link" href="https://access.redhat.com/solutions/6957701">Install the latest VirtIO drivers</a>.
								</li><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-installing-virtio-drivers-existing-windows_virt-installing-qemu-guest-agent">Install the latest QEMU guest agent</a>.
								</li><li class="listitem">
									If Remote Desktop Protocol (RDP) is enabled, try to connect to the VMs with RDP by using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-vm-rdp-console-web_virt-accessing-vm-consoles">web console</a> or the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-accessing-rdp-console_virt-accessing-vm-consoles">command line</a> to determine whether there is a problem with the connection software.
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-must-gather-options_virt-collecting-virt-data">Collect must-gather data for the VMs</a> using the <code class="literal">/usr/bin/gather</code> script.
						</li><li class="listitem">
							Collect screenshots of VMs that have crashed <span class="emphasis"><em>before</em></span> you restart them.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#vm-memory-dump-commands_virt-using-the-cli-tools">Collect memory dumps from VMs</a> <span class="emphasis"><em>before</em></span> remediation attempts.
						</li><li class="listitem">
							Record factors that the malfunctioning VMs have in common. For example, the VMs have the same host or network.
						</li></ol></div></section><section class="section" id="virt-using-virt-must-gather_virt-collecting-virt-data"><div class="titlepage"><div><div><h3 class="title">14.2.3. Using the must-gather tool for OpenShift Virtualization</h3></div></div></div><p>
					You can collect data about OpenShift Virtualization resources by running the <code class="literal">must-gather</code> command with the OpenShift Virtualization image.
				</p><p>
					The default data collection includes information about the following resources:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							OpenShift Virtualization Operator namespaces, including child objects
						</li><li class="listitem">
							OpenShift Virtualization custom resource definitions
						</li><li class="listitem">
							Namespaces that contain virtual machines
						</li><li class="listitem">
							Basic virtual machine definitions
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the following command to collect data about OpenShift Virtualization:
						</p><pre class="programlisting language-terminal">$ oc adm must-gather
  --image=registry.redhat.io/container-native-virtualization/cnv-must-gather-rhel9:v4.13.4 \
  -- /usr/bin/gather</pre></li></ul></div><section class="section" id="virt-must-gather-options_virt-collecting-virt-data"><div class="titlepage"><div><div><h4 class="title">14.2.3.1. must-gather tool options</h4></div></div></div><p>
						You can specify a combination of scripts and environment variables for the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Collecting detailed virtual machine (VM) information from a namespace
							</li><li class="listitem">
								Collecting detailed information about specified VMs
							</li><li class="listitem">
								Collecting image, image-stream, and image-stream-tags information
							</li><li class="listitem">
								Limiting the maximum number of parallel processes used by the <code class="literal">must-gather</code> tool
							</li></ul></div><section class="section" id="parameters"><div class="titlepage"><div><div><h5 class="title">14.2.3.1.1. Parameters</h5></div></div></div><div class="formalpara"><p class="title"><strong>Environment variables</strong></p><p>
								You can specify environment variables for a compatible script.
							</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">NS=&lt;namespace_name&gt;</code></span></dt><dd>
										Collect virtual machine information, including <code class="literal">virt-launcher</code> pod details, from the namespace that you specify. The <code class="literal">VirtualMachine</code> and <code class="literal">VirtualMachineInstance</code> CR data is collected for all namespaces.
									</dd><dt><span class="term"><code class="literal">VM=&lt;vm_name&gt;</code></span></dt><dd>
										Collect details about a particular virtual machine. To use this option, you must also specify a namespace by using the <code class="literal">NS</code> environment variable.
									</dd><dt><span class="term"><code class="literal">PROS=&lt;number_of_processes&gt;</code></span></dt><dd><p class="simpara">
										Modify the maximum number of parallel processes that the <code class="literal">must-gather</code> tool uses. The default value is <code class="literal">5</code>.
									</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
											Using too many parallel processes can cause performance issues. Increasing the maximum number of parallel processes is not recommended.
										</p></div></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Scripts</strong></p><p>
								Each script is compatible only with certain environment variable combinations.
							</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/usr/bin/gather</code></span></dt><dd>
										Use the default <code class="literal">must-gather</code> script, which collects cluster data from all namespaces and includes only basic VM information. This script is compatible only with the <code class="literal">PROS</code> variable.
									</dd><dt><span class="term"><code class="literal">/usr/bin/gather --vms_details</code></span></dt><dd>
										Collect VM log files, VM definitions, control-plane logs, and namespaces that belong to OpenShift Virtualization resources. Specifying namespaces includes their child objects. If you use this parameter without specifying a namespace or VM, the <code class="literal">must-gather</code> tool collects this data for all VMs in the cluster. This script is compatible with all environment variables, but you must specify a namespace if you use the <code class="literal">VM</code> variable.
									</dd><dt><span class="term"><code class="literal">/usr/bin/gather --images</code></span></dt><dd>
										Collect image, image-stream, and image-stream-tags custom resource information. This script is compatible only with the <code class="literal">PROS</code> variable.
									</dd></dl></div></section><section class="section" id="usage-and-examples_virt-collecting-virt-data"><div class="titlepage"><div><div><h5 class="title">14.2.3.1.2. Usage and examples</h5></div></div></div><p>
							Environment variables are optional. You can run a script by itself or with one or more compatible environment variables.
						</p><div class="table" id="idm140196960742976"><p class="title"><strong>Table 14.2. Compatible parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196960738144" scope="col">Script</th><th align="left" valign="top" id="idm140196960737056" scope="col">Compatible environment variable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196960738144"> <p>
											<code class="literal">/usr/bin/gather</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196960737056"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<code class="literal">PROS=&lt;number_of_processes&gt;</code>
												</li></ul></div>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960738144"> <p>
											<code class="literal">/usr/bin/gather --vms_details</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196960737056"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													For a namespace: <code class="literal">NS=&lt;namespace_name&gt;</code>
												</li><li class="listitem">
													For a VM: <code class="literal">VM=&lt;vm_name&gt; NS=&lt;namespace_name&gt;</code>
												</li><li class="listitem">
													<code class="literal">PROS=&lt;number_of_processes&gt;</code>
												</li></ul></div>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196960738144"> <p>
											<code class="literal">/usr/bin/gather --images</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196960737056"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<code class="literal">PROS=&lt;number_of_processes&gt;</code>
												</li></ul></div>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Syntax</strong></p><p>
								
<pre class="programlisting language-terminal">$ oc adm must-gather \
  --image=registry.redhat.io/container-native-virtualization/cnv-must-gather-rhel9:v4.13.4 \
  -- &lt;environment_variable_1&gt; &lt;environment_variable_2&gt; &lt;script_name&gt;</pre>

							</p></div><div class="formalpara"><p class="title"><strong>Default data collection parallel processes</strong></p><p>
								By default, five processes run in parallel.
							</p></div><pre class="programlisting language-terminal">$ oc adm must-gather \
  --image=registry.redhat.io/container-native-virtualization/cnv-must-gather-rhel9:v4.13.4 \
  -- PROS=5 /usr/bin/gather <span id="CO131-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO131-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									You can modify the number of parallel processes by changing the default.
								</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Detailed VM information</strong></p><p>
								The following command collects detailed VM information for the <code class="literal">my-vm</code> VM in the <code class="literal">mynamespace</code> namespace:
							</p></div><pre class="programlisting language-terminal">$ oc adm must-gather \
  --image=registry.redhat.io/container-native-virtualization/cnv-must-gather-rhel9:v4.13.4 \
  -- NS=mynamespace VM=my-vm /usr/bin/gather --vms_details <span id="CO132-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO132-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The <code class="literal">NS</code> environment variable is mandatory if you use the <code class="literal">VM</code> environment variable.
								</div></dd></dl></div><div class="formalpara"><p class="title"><strong>Image, image-stream, and image-stream-tags information</strong></p><p>
								The following command collects image, image-stream, and image-stream-tags information from the cluster:
							</p></div><pre class="programlisting language-terminal">$ oc adm must-gather \
  --image=registry.redhat.io/container-native-virtualization/cnv-must-gather-rhel9:v4.13.4 \
  /usr/bin/gather --images</pre></section></section></section></section><section class="section" id="monitoring"><div class="titlepage"><div><div><h2 class="title">14.3. Monitoring</h2></div></div></div><section class="section" id="virt-monitoring-overview"><div class="titlepage"><div><div><h3 class="title">14.3.1. Monitoring overview</h3></div></div></div><p>
					You can monitor the health of your cluster and virtual machines (VMs) with the following tools:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-running-cluster-checkups">OpenShift Container Platform cluster checkup framework</a></span></dt><dd><p class="simpara">
								Run automated tests on your cluster with the OpenShift Container Platform cluster checkup framework to check the following conditions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Network connectivity and latency between two VMs attached to a secondary network interface
									</li><li class="listitem">
										VM running a Data Plane Development Kit (DPDK) workload with zero packet loss
									</li></ul></div></dd></dl></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The OpenShift Container Platform cluster checkup framework is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-prometheus-queries">Prometheus queries for virtual resources</a></span></dt><dd>
								Query vCPU, network, storage, and guest memory swapping usage and live migration progress.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-exposing-custom-metrics-for-vms">VM custom metrics</a></span></dt><dd>
								Configure the <code class="literal">node-exporter</code> service to expose internal VM metrics and processes.
							</dd><dt><span class="term"><a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#">VM health checks</a></span></dt><dd>
								Configure readiness, liveness, and guest agent ping probes and a watchdog for VMs.
							</dd></dl></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The guest agent ping probe is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div></section><section class="section" id="virt-running-cluster-checkups"><div class="titlepage"><div><div><h3 class="title">14.3.2. OpenShift Container Platform cluster checkup framework</h3></div></div></div><p>
					OpenShift Virtualization includes predefined checkups that can be used for cluster maintenance and troubleshooting.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The OpenShift Container Platform cluster checkup framework is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
					</p></div></div><section class="section" id="virt-about-cluster-checkup-framework_virt-running-cluster-checkups"><div class="titlepage"><div><div><h4 class="title">14.3.2.1. About the OpenShift Container Platform cluster checkup framework</h4></div></div></div><p>
						A <span class="emphasis"><em>checkup</em></span> is an automated test workload that allows you to verify if a specific cluster functionality works as expected. The cluster checkup framework uses native Kubernetes resources to configure and execute the checkup.
					</p><p>
						By using predefined checkups, cluster administrators and developers can improve cluster maintainability, troubleshoot unexpected behavior, minimize errors, and save time. They can also review the results of the checkup and share them with experts for further analysis. Vendors can write and publish checkups for features or services that they provide and verify that their customer environments are configured correctly.
					</p><p>
						Running a predefined checkup in an existing namespace involves setting up a service account for the checkup, creating the <code class="literal">Role</code> and <code class="literal">RoleBinding</code> objects for the service account, enabling permissions for the checkup, and creating the input config map and the checkup job. You can run a checkup multiple times.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You must always:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Verify that the checkup image is from a trustworthy source before applying it.
								</li><li class="listitem">
									Review the checkup permissions before creating the <code class="literal">Role</code> and <code class="literal">RoleBinding</code> objects.
								</li></ul></div></div></div></section><section class="section" id="virt-measuring-latency-vm-secondary-network_virt-running-cluster-checkups"><div class="titlepage"><div><div><h4 class="title">14.3.2.2. Virtual machine latency checkup</h4></div></div></div><p>
						You use a predefined checkup to verify network connectivity and measure latency between two virtual machines (VMs) that are attached to a secondary network interface. The latency checkup uses the ping utility.
					</p><p>
						You run a latency checkup by performing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Create a service account, roles, and rolebindings to provide cluster access permissions to the latency checkup.
							</li><li class="listitem">
								Create a config map to provide the input to run the checkup and to store the results.
							</li><li class="listitem">
								Create a job to run the checkup.
							</li><li class="listitem">
								Review the results in the config map.
							</li><li class="listitem">
								Optional: To rerun the checkup, delete the existing config map and job and then create a new config map and job.
							</li><li class="listitem">
								When you are finished, delete the latency checkup resources.
							</li></ol></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								The cluster has at least two worker nodes.
							</li><li class="listitem">
								The Multus Container Network Interface (CNI) plugin is installed on the cluster.
							</li><li class="listitem">
								You configured a network attachment definition for a namespace.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a <code class="literal">ServiceAccount</code>, <code class="literal">Role</code>, and <code class="literal">RoleBinding</code> manifest for the latency checkup:
							</p><div class="example" id="idm140196960639664"><p class="title"><strong>Example 14.1. Example role manifest file</strong></p><div class="example-contents"><pre class="programlisting language-yaml">---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: vm-latency-checkup-sa
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kubevirt-vm-latency-checker
rules:
- apiGroups: ["kubevirt.io"]
  resources: ["virtualmachineinstances"]
  verbs: ["get", "create", "delete"]
- apiGroups: ["subresources.kubevirt.io"]
  resources: ["virtualmachineinstances/console"]
  verbs: ["get"]
- apiGroups: ["k8s.cni.cncf.io"]
  resources: ["network-attachment-definitions"]
  verbs: ["get"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kubevirt-vm-latency-checker
subjects:
- kind: ServiceAccount
  name: vm-latency-checkup-sa
roleRef:
  kind: Role
  name: kubevirt-vm-latency-checker
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kiagnose-configmap-access
rules:
- apiGroups: [ "" ]
  resources: [ "configmaps" ]
  verbs: ["get", "update"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kiagnose-configmap-access
subjects:
- kind: ServiceAccount
  name: vm-latency-checkup-sa
roleRef:
  kind: Role
  name: kiagnose-configmap-access
  apiGroup: rbac.authorization.k8s.io</pre></div></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">ServiceAccount</code>, <code class="literal">Role</code>, and <code class="literal">RoleBinding</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;latency_sa_roles_rolebinding&gt;.yaml <span id="CO133-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO133-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										<code class="literal">&lt;target_namespace&gt;</code> is the namespace where the checkup is to be run. This must be an existing namespace where the <code class="literal">NetworkAttachmentDefinition</code> object resides.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">ConfigMap</code> manifest that contains the input parameters for the checkup:
							</p><div class="formalpara"><p class="title"><strong>Example input config map</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: kubevirt-vm-latency-checkup-config
data:
  spec.timeout: 5m
  spec.param.networkAttachmentDefinitionNamespace: &lt;target_namespace&gt;
  spec.param.networkAttachmentDefinitionName: "blue-network" <span id="CO134-1"><!--Empty--></span><span class="callout">1</span>
  spec.param.maxDesiredLatencyMilliseconds: "10" <span id="CO134-2"><!--Empty--></span><span class="callout">2</span>
  spec.param.sampleDurationSeconds: "5" <span id="CO134-3"><!--Empty--></span><span class="callout">3</span>
  spec.param.sourceNode: "worker1" <span id="CO134-4"><!--Empty--></span><span class="callout">4</span>
  spec.param.targetNode: "worker2" <span id="CO134-5"><!--Empty--></span><span class="callout">5</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO134-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">NetworkAttachmentDefinition</code> object.
									</div></dd><dt><a href="#CO134-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Optional: The maximum desired latency, in milliseconds, between the virtual machines. If the measured latency exceeds this value, the checkup fails.
									</div></dd><dt><a href="#CO134-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: The duration of the latency check, in seconds.
									</div></dd><dt><a href="#CO134-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optional: When specified, latency is measured from this node to the target node. If the source node is specified, the <code class="literal">spec.param.targetNode</code> field cannot be empty.
									</div></dd><dt><a href="#CO134-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: When specified, latency is measured from the source node to this node.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the config map manifest in the target namespace:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;latency_config_map&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">Job</code> manifest to run the checkup:
							</p><div class="formalpara"><p class="title"><strong>Example job manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: batch/v1
kind: Job
metadata:
  name: kubevirt-vm-latency-checkup
spec:
  backoffLimit: 0
  template:
    spec:
      serviceAccountName: vm-latency-checkup-sa
      restartPolicy: Never
      containers:
        - name: vm-latency-checkup
          image: registry.redhat.io/container-native-virtualization/vm-network-latency-checkup-rhel9:v4.13.0
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            runAsNonRoot: true
            seccompProfile:
              type: "RuntimeDefault"
          env:
            - name: CONFIGMAP_NAMESPACE
              value: &lt;target_namespace&gt;
            - name: CONFIGMAP_NAME
              value: kubevirt-vm-latency-checkup-config
            - name: POD_UID
              valueFrom:
                fieldRef:
                  fieldPath: metadata.uid</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">Job</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;latency_job&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Wait for the job to complete:
							</p><pre class="programlisting language-terminal">$ oc wait job kubevirt-vm-latency-checkup -n &lt;target_namespace&gt; --for condition=complete --timeout 6m</pre></li><li class="listitem"><p class="simpara">
								Review the results of the latency checkup by running the following command. If the maximum measured latency is greater than the value of the <code class="literal">spec.param.maxDesiredLatencyMilliseconds</code> attribute, the checkup fails and returns an error.
							</p><pre class="programlisting language-terminal">$ oc get configmap kubevirt-vm-latency-checkup-config -n &lt;target_namespace&gt; -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output config map (success)</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: kubevirt-vm-latency-checkup-config
  namespace: &lt;target_namespace&gt;
data:
  spec.timeout: 5m
  spec.param.networkAttachmentDefinitionNamespace: &lt;target_namespace&gt;
  spec.param.networkAttachmentDefinitionName: "blue-network"
  spec.param.maxDesiredLatencyMilliseconds: "10"
  spec.param.sampleDurationSeconds: "5"
  spec.param.sourceNode: "worker1"
  spec.param.targetNode: "worker2"
  status.succeeded: "true"
  status.failureReason: ""
  status.completionTimestamp: "2022-01-01T09:00:00Z"
  status.startTimestamp: "2022-01-01T09:00:07Z"
  status.result.avgLatencyNanoSec: "177000"
  status.result.maxLatencyNanoSec: "244000" <span id="CO135-1"><!--Empty--></span><span class="callout">1</span>
  status.result.measurementDurationSec: "5"
  status.result.minLatencyNanoSec: "135000"
  status.result.sourceNode: "worker1"
  status.result.targetNode: "worker2"</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO135-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The maximum measured latency in nanoseconds.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Optional: To view the detailed job log in case of checkup failure, use the following command:
							</p><pre class="programlisting language-terminal">$ oc logs job.batch/kubevirt-vm-latency-checkup -n &lt;target_namespace&gt;</pre></li><li class="listitem"><p class="simpara">
								Delete the job and config map that you previously created by running the following commands:
							</p><pre class="programlisting language-terminal">$ oc delete job -n &lt;target_namespace&gt; kubevirt-vm-latency-checkup</pre><pre class="programlisting language-terminal">$ oc delete config-map -n &lt;target_namespace&gt; kubevirt-vm-latency-checkup-config</pre></li><li class="listitem"><p class="simpara">
								Optional: If you do not plan to run another checkup, delete the roles manifest:
							</p><pre class="programlisting language-terminal">$ oc delete -f &lt;latency_sa_roles_rolebinding&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-checking-cluster-dpdk-readiness_virt-running-cluster-checkups"><div class="titlepage"><div><div><h4 class="title">14.3.2.3. DPDK checkup</h4></div></div></div><p>
						Use a predefined checkup to verify that your OpenShift Container Platform cluster node can run a virtual machine (VM) with a Data Plane Development Kit (DPDK) workload with zero packet loss. The DPDK checkup runs traffic between a traffic generator pod and a VM running a test DPDK application.
					</p><p>
						You run a DPDK checkup by performing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Create a service account, role, and role bindings for the DPDK checkup and a service account for the traffic generator pod.
							</li><li class="listitem">
								Create a security context constraints resource for the traffic generator pod.
							</li><li class="listitem">
								Create a config map to provide the input to run the checkup and to store the results.
							</li><li class="listitem">
								Create a job to run the checkup.
							</li><li class="listitem">
								Review the results in the config map.
							</li><li class="listitem">
								Optional: To rerun the checkup, delete the existing config map and job and then create a new config map and job.
							</li><li class="listitem">
								When you are finished, delete the DPDK checkup resources.
							</li></ol></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with <code class="literal">cluster-admin</code> permissions.
							</li><li class="listitem">
								You have installed the OpenShift CLI (<code class="literal">oc</code>).
							</li><li class="listitem">
								You have configured the compute nodes to run DPDK applications on VMs with zero packet loss.
							</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The traffic generator pod created by the checkup has elevated privileges:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									It runs as root.
								</li><li class="listitem">
									It has a bind mount to the node’s file system.
								</li></ul></div><p>
							The container image of the traffic generator is pulled from the upstream Project Quay container registry.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a <code class="literal">ServiceAccount</code>, <code class="literal">Role</code>, and <code class="literal">RoleBinding</code> manifest for the DPDK checkup and the traffic generator pod:
							</p><div class="example" id="idm140196960558768"><p class="title"><strong>Example 14.2. Example service account, role, and rolebinding manifest file</strong></p><div class="example-contents"><pre class="programlisting language-yaml">---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: dpdk-checkup-sa
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kiagnose-configmap-access
rules:
  - apiGroups: [ "" ]
    resources: [ "configmaps" ]
    verbs: [ "get", "update" ]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kiagnose-configmap-access
subjects:
  - kind: ServiceAccount
    name: dpdk-checkup-sa
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kiagnose-configmap-access
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kubevirt-dpdk-checker
rules:
  - apiGroups: [ "kubevirt.io" ]
    resources: [ "virtualmachineinstances" ]
    verbs: [ "create", "get", "delete" ]
  - apiGroups: [ "subresources.kubevirt.io" ]
    resources: [ "virtualmachineinstances/console" ]
    verbs: [ "get" ]
  - apiGroups: [ "" ]
    resources: [ "pods" ]
    verbs: [ "create", "get", "delete" ]
  - apiGroups: [ "" ]
    resources: [ "pods/exec" ]
    verbs: [ "create" ]
  - apiGroups: [ "k8s.cni.cncf.io" ]
    resources: [ "network-attachment-definitions" ]
    verbs: [ "get" ]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kubevirt-dpdk-checker
subjects:
  - kind: ServiceAccount
    name: dpdk-checkup-sa
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kubevirt-dpdk-checker
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: dpdk-checkup-traffic-gen-sa</pre></div></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">ServiceAccount</code>, <code class="literal">Role</code>, and <code class="literal">RoleBinding</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;dpdk_sa_roles_rolebinding&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">SecurityContextConstraints</code> manifest for the traffic generator pod:
							</p><div class="formalpara"><p class="title"><strong>Example security context constraints manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: security.openshift.io/v1
kind: SecurityContextConstraints
metadata:
  name: dpdk-checkup-traffic-gen
allowHostDirVolumePlugin: true
allowHostIPC: false
allowHostNetwork: false
allowHostPID: false
allowHostPorts: false
allowPrivilegeEscalation: false
allowPrivilegedContainer: false
allowedCapabilities:
- IPC_LOCK
- NET_ADMIN
- NET_RAW
- SYS_RESOURCE
defaultAddCapabilities: null
fsGroup:
  type: RunAsAny
groups: []
readOnlyRootFilesystem: false
requiredDropCapabilities: null
runAsUser:
  type: RunAsAny
seLinuxContext:
  type: RunAsAny
seccompProfiles:
- runtime/default
- unconfined
supplementalGroups:
  type: RunAsAny
users:
- system:serviceaccount:dpdk-checkup-ns:dpdk-checkup-traffic-gen-sa</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">SecurityContextConstraints</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -f &lt;dpdk_scc&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">ConfigMap</code> manifest that contains the input parameters for the checkup:
							</p><div class="formalpara"><p class="title"><strong>Example input config map</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: dpdk-checkup-config
data:
  spec.timeout: 10m
  spec.param.networkAttachmentDefinitionName: &lt;network_name&gt; <span id="CO136-1"><!--Empty--></span><span class="callout">1</span>
  spec.param.trafficGeneratorRuntimeClassName: &lt;runtimeclass_name&gt; <span id="CO136-2"><!--Empty--></span><span class="callout">2</span>
  spec.param.trafficGeneratorImage: "quay.io/kiagnose/kubevirt-dpdk-checkup-traffic-gen:v0.1.1" <span id="CO136-3"><!--Empty--></span><span class="callout">3</span>
  spec.param.vmContainerDiskImage: "quay.io/kiagnose/kubevirt-dpdk-checkup-vm:v0.1.1" <span id="CO136-4"><!--Empty--></span><span class="callout">4</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO136-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">NetworkAttachmentDefinition</code> object.
									</div></dd><dt><a href="#CO136-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">RuntimeClass</code> resource that the traffic generator pod uses.
									</div></dd><dt><a href="#CO136-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The container image for the traffic generator. In this example, the image is pulled from the upstream Project Quay Container Registry.
									</div></dd><dt><a href="#CO136-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The container disk image for the VM. In this example, the image is pulled from the upstream Project Quay Container Registry.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">ConfigMap</code> manifest in the target namespace:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;dpdk_config_map&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">Job</code> manifest to run the checkup:
							</p><div class="formalpara"><p class="title"><strong>Example job manifest</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: batch/v1
kind: Job
metadata:
  name: dpdk-checkup
spec:
  backoffLimit: 0
  template:
    spec:
      serviceAccountName: dpdk-checkup-sa
      restartPolicy: Never
      containers:
        - name: dpdk-checkup
          image: registry.redhat.io/container-native-virtualization/kubevirt-dpdk-checkup-rhel9:v4.13.0
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop: ["ALL"]
            runAsNonRoot: true
            seccompProfile:
              type: "RuntimeDefault"
          env:
            - name: CONFIGMAP_NAMESPACE
              value: &lt;target-namespace&gt;
            - name: CONFIGMAP_NAME
              value: dpdk-checkup-config
            - name: POD_UID
              valueFrom:
                fieldRef:
                  fieldPath: metadata.uid</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Apply the <code class="literal">Job</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc apply -n &lt;target_namespace&gt; -f &lt;dpdk_job&gt;.yaml</pre></li><li class="listitem"><p class="simpara">
								Wait for the job to complete:
							</p><pre class="programlisting language-terminal">$ oc wait job dpdk-checkup -n &lt;target_namespace&gt; --for condition=complete --timeout 10m</pre></li><li class="listitem"><p class="simpara">
								Review the results of the checkup by running the following command:
							</p><pre class="programlisting language-terminal">$ oc get configmap dpdk-checkup-config -n &lt;target_namespace&gt; -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output config map (success)</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: dpdk-checkup-config
data:
  spec.timeout: 1h2m
  spec.param.NetworkAttachmentDefinitionName: "mlx-dpdk-network-1"
  spec.param.trafficGeneratorRuntimeClassName: performance-performance-zeus10
  spec.param.trafficGeneratorImage: "quay.io/kiagnose/kubevirt-dpdk-checkup-traffic-gen:v0.1.1"
  spec.param.vmContainerDiskImage: "quay.io/kiagnose/kubevirt-dpdk-checkup-vm:v0.1.1"
  status.succeeded: true
  status.failureReason: " "
  status.startTimestamp: 2022-12-21T09:33:06+00:00
  status.completionTimestamp: 2022-12-21T11:33:06+00:00
  status.result.actualTrafficGeneratorTargetNode: worker-dpdk1
  status.result.actualDPDKVMTargetNode: worker-dpdk2
  status.result.dropRate: 0</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Delete the job and config map that you previously created by running the following commands:
							</p><pre class="programlisting language-terminal">$ oc delete job -n &lt;target_namespace&gt; dpdk-checkup</pre><pre class="programlisting language-terminal">$ oc delete config-map -n &lt;target_namespace&gt; dpdk-checkup-config</pre></li><li class="listitem"><p class="simpara">
								Optional: If you do not plan to run another checkup, delete the <code class="literal">ServiceAccount</code>, <code class="literal">Role</code>, and <code class="literal">RoleBinding</code> manifest:
							</p><pre class="programlisting language-terminal">$ oc delete -f &lt;dpdk_sa_roles_rolebinding&gt;.yaml</pre></li></ol></div><section class="section" id="virt-dpdk-config-map-parameters_virt-running-cluster-checkups"><div class="titlepage"><div><div><h5 class="title">14.3.2.3.1. DPDK checkup config map parameters</h5></div></div></div><p>
							The following table shows the mandatory and optional parameters that you can set in the <code class="literal">data</code> stanza of the input <code class="literal">ConfigMap</code> manifest when you run a cluster DPDK readiness checkup:
						</p><div class="table" id="idm140196955222304"><p class="title"><strong>Table 14.3. DPDK checkup config map parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196955216528" scope="col">Parameter</th><th align="left" valign="top" id="idm140196955215440" scope="col">Description</th><th align="left" valign="top" id="idm140196955214352" scope="col">Is Mandatory</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.timeout</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The time, in minutes, before the checkup fails.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											True
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.networkAttachmentDefinitionName</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The name of the <code class="literal">NetworkAttachmentDefinition</code> object of the SR-IOV NICs connected.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											True
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorRuntimeClassName</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The RuntimeClass resource that the traffic generator pod uses.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											True
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorImage</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The container image for the traffic generator. The default value is <code class="literal">quay.io/kiagnose/kubevirt-dpdk-checkup-traffic-gen:main</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorNodeSelector</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The node on which the traffic generator pod is to be scheduled. The node should be configured to allow DPDK traffic.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorPacketsPerSecond</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The number of packets per second, in kilo (k) or million(m). The default value is 14m.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorEastMacAddress</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The MAC address of the NIC connected to the traffic generator pod or VM. The default value is a random MAC address in the format <code class="literal">50:xx:xx:xx:xx:01</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.trafficGeneratorWestMacAddress</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The MAC address of the NIC connected to the traffic generator pod or VM. The default value is a random MAC address in the format <code class="literal">50:xx:xx:xx:xx:02</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.vmContainerDiskImage</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The container disk image for the VM. The default value is <code class="literal">quay.io/kiagnose/kubevirt-dpdk-checkup-vm:main</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.DPDKLabelSelector</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The label of the node on which the VM runs. The node should be configured to allow DPDK traffic.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.DPDKEastMacAddress</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The MAC address of the NIC that is connected to the VM. The default value is a random MAC address in the format <code class="literal">60:xx:xx:xx:xx:01</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.DPDKWestMacAddress</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The MAC address of the NIC that is connected to the VM. The default value is a random MAC address in the format <code class="literal">60:xx:xx:xx:xx:02</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.testDuration</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The duration, in minutes, for which the traffic generator runs. The default value is 5 minutes.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.portBandwidthGB</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											The maximum bandwidth of the SR-IOV NIC. The default value is 10GB.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196955216528"> <p>
											<code class="literal">spec.param.verbose</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196955215440"> <p>
											When set to <code class="literal">true</code>, it increases the verbosity of the checkup log. The default value is <code class="literal">false</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140196955214352"> <p>
											False
										</p>
										 </td></tr></tbody></table></div></div></section><section class="section" id="virt-building-vm-containerdisk-image_virt-running-cluster-checkups"><div class="titlepage"><div><div><h5 class="title">14.3.2.3.2. Building a container disk image for RHEL virtual machines</h5></div></div></div><p>
							You can build a custom Red Hat Enterprise Linux (RHEL) 8 OS image in <code class="literal">qcow2</code> format and use it to create a container disk image. You can store the container disk image in a registry that is accessible from your cluster and specify the image location in the <code class="literal">spec.param.vmContainerDiskImage</code> attribute of the DPDK checkup config map.
						</p><p>
							To build a container disk image, you must create an image builder virtual machine (VM). The <span class="emphasis"><em>image builder VM</em></span> is a RHEL 8 VM that can be used to build custom RHEL images.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The image builder VM must run RHEL 8.7 and must have a minimum of 2 CPU cores, 4 GiB RAM, and 20 GB of free space in the <code class="literal">/var</code> directory.
								</li><li class="listitem">
									You have installed the image builder tool and its CLI (<code class="literal">composer-cli</code>) on the VM.
								</li><li class="listitem"><p class="simpara">
									You have installed the <code class="literal">virt-customize</code> tool:
								</p><pre class="programlisting language-terminal"># dnf install libguestfs-tools</pre></li><li class="listitem">
									You have installed the Podman CLI tool (<code class="literal">podman</code>).
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Verify that you can build a RHEL 8.7 image:
								</p><pre class="programlisting language-terminal"># composer-cli distros list</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										To run the <code class="literal">composer-cli</code> commands as non-root, add your user to the <code class="literal">weldr</code> or <code class="literal">root</code> groups:
									</p><pre class="programlisting language-terminal"># usermod -a -G weldr user</pre><pre class="programlisting language-terminal">$ newgrp weldr</pre></div></div></li><li class="listitem"><p class="simpara">
									Enter the following command to create an image blueprint file in TOML format that contains the packages to be installed, kernel customizations, and the services to be disabled during boot time:
								</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF &gt; dpdk-vm.toml
name = "dpdk_image"
description = "Image to use with the DPDK checkup"
version = "0.0.1"
distro = "rhel-87"

[[packages]]
name = "dpdk"

[[packages]]
name = "dpdk-tools"

[[packages]]
name = "driverctl"

[[packages]]
name = "tuned-profiles-cpu-partitioning"

[customizations.kernel]
append = "default_hugepagesz=1GB hugepagesz=1G hugepages=8 isolcpus=2-7"

[customizations.services]
disabled = ["NetworkManager-wait-online", "sshd"]
EOF</pre></li><li class="listitem"><p class="simpara">
									Push the blueprint file to the image builder tool by running the following command:
								</p><pre class="programlisting language-terminal"># composer-cli blueprints push dpdk-vm.toml</pre></li><li class="listitem"><p class="simpara">
									Generate the system image by specifying the blueprint name and output file format. The Universally Unique Identifier (UUID) of the image is displayed when you start the compose process.
								</p><pre class="programlisting language-terminal"># composer-cli compose start dpdk_image qcow2</pre></li><li class="listitem"><p class="simpara">
									Wait for the compose process to complete. The compose status must show <code class="literal">FINISHED</code> before you can continue to the next step.
								</p><pre class="programlisting language-terminal"># composer-cli compose status</pre></li><li class="listitem"><p class="simpara">
									Enter the following command to download the <code class="literal">qcow2</code> image file by specifying its UUID:
								</p><pre class="programlisting language-terminal"># composer-cli compose image &lt;UUID&gt;</pre></li><li class="listitem"><p class="simpara">
									Create the customization scripts by running the following commands:
								</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF &gt;customize-vm
echo  isolated_cores=2-7 &gt; /etc/tuned/cpu-partitioning-variables.conf
tuned-adm profile cpu-partitioning
echo "options vfio enable_unsafe_noiommu_mode=1" &gt; /etc/modprobe.d/vfio-noiommu.conf
EOF</pre><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF &gt;first-boot
driverctl set-override 0000:06:00.0 vfio-pci
driverctl set-override 0000:07:00.0 vfio-pci

mkdir /mnt/huge
mount /mnt/huge --source nodev -t hugetlbfs -o pagesize=1GB
EOF</pre></li><li class="listitem"><p class="simpara">
									Use the <code class="literal">virt-customize</code> tool to customize the image generated by the image builder tool:
								</p><pre class="programlisting language-terminal">$ virt-customize -a &lt;UUID&gt;.qcow2 --run=customize-vm --firstboot=first-boot --selinux-relabel</pre></li><li class="listitem"><p class="simpara">
									To create a Dockerfile that contains all the commands to build the container disk image, enter the following command:
								</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF &gt; Dockerfile
FROM scratch
COPY &lt;uuid&gt;-disk.qcow2 /disk/
EOF</pre><p class="simpara">
									where:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;uuid&gt;-disk.qcow2</span></dt><dd>
												Specifies the name of the custom image in <code class="literal">qcow2</code> format.
											</dd></dl></div></li><li class="listitem"><p class="simpara">
									Build and tag the container by running the following command:
								</p><pre class="programlisting language-terminal">$ podman build . -t dpdk-rhel:latest</pre></li><li class="listitem"><p class="simpara">
									Push the container disk image to a registry that is accessible from your cluster by running the following command:
								</p><pre class="programlisting language-terminal">$ podman push dpdk-rhel:latest</pre></li><li class="listitem">
									Provide a link to the container disk image in the <code class="literal">spec.param.vmContainerDiskImage</code> attribute in the DPDK checkup config map.
								</li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_running-cluster-checkups"><div class="titlepage"><div><div><h4 class="title">14.3.2.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-attaching-vm-multiple-networks">Attaching a virtual machine to multiple networks</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#example-vf-use-in-dpdk-mode-intel_using-dpdk-and-rdma">Using a virtual function in DPDK mode with an Intel NIC</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/networking/#nw-example-dpdk-line-rate_using-dpdk-and-rdma">Using SR-IOV and the Node Tuning Operator to achieve a DPDK line rate</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/installing-composer_composing-a-customized-rhel-system-image">Installing image builder</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/solutions/253273">How to register and subscribe a RHEL system to the Red Hat Customer Portal using Red Hat Subscription Manager</a>
							</li></ul></div></section></section><section class="section" id="virt-prometheus-queries"><div class="titlepage"><div><div><h3 class="title">14.3.3. Prometheus queries for virtual resources</h3></div></div></div><p>
					OpenShift Virtualization provides metrics that you can use to monitor the consumption of cluster infrastructure resources, including vCPU, network, storage, and guest memory swapping. You can also use metrics to query live migration status.
				</p><p>
					Use the OpenShift Container Platform monitoring dashboard to query virtualization metrics.
				</p><section class="section" id="prerequisites_virt-prometheus-queries"><div class="titlepage"><div><div><h4 class="title">14.3.3.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use the vCPU metric, the <code class="literal">schedstats=enable</code> kernel argument must be applied to the <code class="literal">MachineConfig</code> object. This kernel argument enables scheduler statistics used for debugging and performance tuning and adds a minor additional load to the scheduler. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/post-installation_configuration/#nodes-nodes-kernel-arguments_post-install-machine-configuration-tasks">Adding kernel arguments to nodes</a>.
							</li><li class="listitem">
								For guest memory swapping queries to return data, memory swapping must be enabled on the virtual guests.
							</li></ul></div></section><section class="section" id="about-querying-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h4 class="title">14.3.3.2. Querying metrics</h4></div></div></div><p>
						The OpenShift Container Platform monitoring dashboard enables you to run Prometheus Query Language (PromQL) queries to examine metrics visualized on a plot. This functionality provides information about the state of a cluster and any user-defined workloads that you are monitoring.
					</p><p>
						As a cluster administrator, you can query metrics for all core OpenShift Container Platform and user-defined projects.
					</p><p>
						As a developer, you must specify a project name when querying metrics. You must have the required privileges to view metrics for the selected project.
					</p><section class="section" id="querying-metrics-for-all-projects-as-an-administrator_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.2.1. Querying metrics for all projects as a cluster administrator</h5></div></div></div><p>
							As a cluster administrator or as a user with view permissions for all projects, you can access metrics for all default OpenShift Container Platform and user-defined projects in the Metrics UI.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You have access to the cluster as a user with the <code class="literal">cluster-admin</code> cluster role or with view permissions for all projects.
								</li><li class="listitem">
									You have installed the OpenShift CLI (<code class="literal">oc</code>).
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									From the <span class="strong strong"><strong>Administrator</strong></span> perspective in the OpenShift Container Platform web console, select <span class="strong strong"><strong>Observe</strong></span> → <span class="strong strong"><strong>Metrics</strong></span>.
								</li><li class="listitem"><p class="simpara">
									To add one or more queries, do any of the following:
								</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196955028832" scope="col">Option</th><th align="left" valign="top" id="idm140196955027744" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196955028832"> <p>
													Create a custom query.
												</p>
												 </td><td align="left" valign="top" headers="idm140196955027744"> <p>
													Add your Prometheus Query Language (PromQL) query to the <span class="strong strong"><strong>Expression</strong></span> field.
												</p>
												 <p>
													As you type a PromQL expression, autocomplete suggestions appear in a drop-down list. These suggestions include functions, metrics, labels, and time tokens. You can use the keyboard arrows to select one of these suggested items and then press Enter to add the item to your expression. You can also move your mouse pointer over a suggested item to view a brief description of that item.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196955028832"> <p>
													Add multiple queries.
												</p>
												 </td><td align="left" valign="top" headers="idm140196955027744"> <p>
													Select <span class="strong strong"><strong>Add query</strong></span>.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196955028832"> <p>
													Duplicate an existing query.
												</p>
												 </td><td align="left" valign="top" headers="idm140196955027744"> <p>
													Select the Options menu 
													<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
													 next to the query, then choose <span class="strong strong"><strong>Duplicate query</strong></span>.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196955028832"> <p>
													Disable a query from being run.
												</p>
												 </td><td align="left" valign="top" headers="idm140196955027744"> <p>
													Select the Options menu 
													<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
													 next to the query and choose <span class="strong strong"><strong>Disable query</strong></span>.
												</p>
												 </td></tr></tbody></table></div></li><li class="listitem"><p class="simpara">
									To run queries that you created, select <span class="strong strong"><strong>Run queries</strong></span>. The metrics from the queries are visualized on the plot. If a query is invalid, the UI shows an error message.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Queries that operate on large amounts of data might time out or overload the browser when drawing time series graphs. To avoid this, select <span class="strong strong"><strong>Hide graph</strong></span> and calibrate your query using only the metrics table. Then, after finding a feasible query, enable the plot to draw the graphs.
									</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										By default, the query table shows an expanded view that lists every metric and its current value. You can select <span class="strong strong"><strong>˅</strong></span> to minimize the expanded view for a query.
									</p></div></div></li><li class="listitem">
									Optional: The page URL now contains the queries you ran. To use this set of queries again in the future, save this URL.
								</li><li class="listitem"><p class="simpara">
									Explore the visualized metrics. Initially, all metrics from all enabled queries are shown on the plot. You can select which metrics are shown by doing any of the following:
								</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196954988688" scope="col">Option</th><th align="left" valign="top" id="idm140196954987600" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Hide all metrics from a query.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Click the Options menu 
													<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/OpenShift_Container_Platform-4.13-Virtualization-en-US/images/f468284ec3cc9bf27e6bd2c83849ca50/kebab.png" alt="kebab"/></span>
													 for the query and click <span class="strong strong"><strong>Hide all series</strong></span>.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Hide a specific metric.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Go to the query table and click the colored square near the metric name.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Zoom into the plot and change the time range.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Either:
												</p>
												 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
															Visually select the time range by clicking and dragging on the plot horizontally.
														</li><li class="listitem">
															Use the menu in the left upper corner to select the time range.
														</li></ul></div>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Reset the time range.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Select <span class="strong strong"><strong>Reset zoom</strong></span>.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Display outputs for all queries at a specific point in time.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Hold the mouse cursor on the plot at that point. The query outputs will appear in a pop-up box.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954988688"> <p>
													Hide the plot.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954987600"> <p>
													Select <span class="strong strong"><strong>Hide graph</strong></span>.
												</p>
												 </td></tr></tbody></table></div></li></ol></div></section><section class="section" id="querying-metrics-for-user-defined-projects-as-a-developer_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.2.2. Querying metrics for user-defined projects as a developer</h5></div></div></div><p>
							You can access metrics for a user-defined project as a developer or as a user with view permissions for the project.
						</p><p>
							In the <span class="strong strong"><strong>Developer</strong></span> perspective, the Metrics UI includes some predefined CPU, memory, bandwidth, and network packet queries for the selected project. You can also run custom Prometheus Query Language (PromQL) queries for CPU, memory, bandwidth, network packet and application metrics for the project.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Developers can only use the <span class="strong strong"><strong>Developer</strong></span> perspective and not the <span class="strong strong"><strong>Administrator</strong></span> perspective. As a developer, you can only query metrics for one project at a time.
							</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You have access to the cluster as a developer or as a user with view permissions for the project that you are viewing metrics for.
								</li><li class="listitem">
									You have enabled monitoring for user-defined projects.
								</li><li class="listitem">
									You have deployed a service in a user-defined project.
								</li><li class="listitem">
									You have created a <code class="literal">ServiceMonitor</code> custom resource definition (CRD) for the service to define how the service is monitored.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select <span class="strong strong"><strong>Observe</strong></span> → <span class="strong strong"><strong>Metrics</strong></span>.
								</li><li class="listitem">
									Select the project that you want to view metrics for in the <span class="strong strong"><strong>Project:</strong></span> list.
								</li><li class="listitem"><p class="simpara">
									Select a query from the <span class="strong strong"><strong>Select query</strong></span> list, or create a custom PromQL query based on the selected query by selecting <span class="strong strong"><strong>Show PromQL</strong></span>. The metrics from the queries are visualized on the plot.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										In the Developer perspective, you can only run one query at a time.
									</p></div></div></li><li class="listitem"><p class="simpara">
									Explore the visualized metrics by doing any of the following:
								</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196954927904" scope="col">Option</th><th align="left" valign="top" id="idm140196954926816" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196954927904"> <p>
													Zoom into the plot and change the time range.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954926816"> <p>
													Either:
												</p>
												 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
															Visually select the time range by clicking and dragging on the plot horizontally.
														</li><li class="listitem">
															Use the menu in the left upper corner to select the time range.
														</li></ul></div>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954927904"> <p>
													Reset the time range.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954926816"> <p>
													Select <span class="strong strong"><strong>Reset zoom</strong></span>.
												</p>
												 </td></tr><tr><td align="left" valign="top" headers="idm140196954927904"> <p>
													Display outputs for all queries at a specific point in time.
												</p>
												 </td><td align="left" valign="top" headers="idm140196954926816"> <p>
													Hold the mouse cursor on the plot at that point. The query outputs appear in a pop-up box.
												</p>
												 </td></tr></tbody></table></div></li></ol></div></section></section><section class="section" id="virt-querying-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h4 class="title">14.3.3.3. Virtualization metrics</h4></div></div></div><p>
						The following metric descriptions include example Prometheus Query Language (PromQL) queries. These metrics are not an API and might change between versions.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The following examples use <code class="literal">topk</code> queries that specify a time period. If virtual machines are deleted during that time period, they can still appear in the query output.
						</p></div></div><section class="section" id="virt-promql-vcpu-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.3.1. vCPU metrics</h5></div></div></div><p>
							The following query can identify virtual machines that are waiting for Input/Output (I/O):
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmi_vcpu_wait_seconds</code></span></dt><dd>
										Returns the wait time (in seconds) for a virtual machine’s vCPU. Type: Counter.
									</dd></dl></div><p>
							A value above '0' means that the vCPU wants to run, but the host scheduler cannot run it yet. This inability to run indicates that there is an issue with I/O.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To query the vCPU metric, the <code class="literal">schedstats=enable</code> kernel argument must first be applied to the <code class="literal">MachineConfig</code> object. This kernel argument enables scheduler statistics used for debugging and performance tuning and adds a minor additional load to the scheduler.
							</p></div></div><div class="formalpara"><p class="title"><strong>Example vCPU wait time query</strong></p><p>
								
<pre class="programlisting language-promql">topk(3, sum by (name, namespace) (rate(kubevirt_vmi_vcpu_wait_seconds[6m]))) &gt; 0 <span id="CO137-1"><!--Empty--></span><span class="callout">1</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO137-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									This query returns the top 3 VMs waiting for I/O at every given moment over a six-minute time period.
								</div></dd></dl></div></section><section class="section" id="virt-promql-network-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.3.2. Network metrics</h5></div></div></div><p>
							The following queries can identify virtual machines that are saturating the network:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmi_network_receive_bytes_total</code></span></dt><dd>
										Returns the total amount of traffic received (in bytes) on the virtual machine’s network. Type: Counter.
									</dd><dt><span class="term"><code class="literal">kubevirt_vmi_network_transmit_bytes_total</code></span></dt><dd>
										Returns the total amount of traffic transmitted (in bytes) on the virtual machine’s network. Type: Counter.
									</dd></dl></div><div class="formalpara"><p class="title"><strong>Example network traffic query</strong></p><p>
								
<pre class="programlisting language-promql">topk(3, sum by (name, namespace) (rate(kubevirt_vmi_network_receive_bytes_total[6m])) + sum by (name, namespace) (rate(kubevirt_vmi_network_transmit_bytes_total[6m]))) &gt; 0 <span id="CO138-1"><!--Empty--></span><span class="callout">1</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO138-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									This query returns the top 3 VMs transmitting the most network traffic at every given moment over a six-minute time period.
								</div></dd></dl></div></section><section class="section" id="virt-promql-storage-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.3.3. Storage metrics</h5></div></div></div><section class="section" id="virt-storage-traffic_virt-prometheus-queries"><div class="titlepage"><div><div><h6 class="title">14.3.3.3.3.1. Storage-related traffic</h6></div></div></div><p>
								The following queries can identify VMs that are writing large amounts of data:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmi_storage_read_traffic_bytes_total</code></span></dt><dd>
											Returns the total amount (in bytes) of the virtual machine’s storage-related traffic. Type: Counter.
										</dd><dt><span class="term"><code class="literal">kubevirt_vmi_storage_write_traffic_bytes_total</code></span></dt><dd>
											Returns the total amount of storage writes (in bytes) of the virtual machine’s storage-related traffic. Type: Counter.
										</dd></dl></div><div class="formalpara"><p class="title"><strong>Example storage-related traffic query</strong></p><p>
									
<pre class="programlisting language-promql">topk(3, sum by (name, namespace) (rate(kubevirt_vmi_storage_read_traffic_bytes_total[6m])) + sum by (name, namespace) (rate(kubevirt_vmi_storage_write_traffic_bytes_total[6m]))) &gt; 0 <span id="CO139-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO139-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This query returns the top 3 VMs performing the most storage traffic at every given moment over a six-minute time period.
									</div></dd></dl></div></section><section class="section" id="virt-storage-snapshot-data_virt-prometheus-queries"><div class="titlepage"><div><div><h6 class="title">14.3.3.3.3.2. Storage snapshot data</h6></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmsnapshot_disks_restored_from_source_total</code></span></dt><dd>
											Returns the total number of virtual machine disks restored from the source virtual machine. Type: Gauge.
										</dd><dt><span class="term"><code class="literal">kubevirt_vmsnapshot_disks_restored_from_source_bytes</code></span></dt><dd>
											Returns the amount of space in bytes restored from the source virtual machine. Type: Gauge.
										</dd></dl></div><div class="formalpara"><p class="title"><strong>Examples of storage snapshot data queries</strong></p><p>
									
<pre class="programlisting language-promql">kubevirt_vmsnapshot_disks_restored_from_source_total{vm_name="simple-vm", vm_namespace="default"} <span id="CO140-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO140-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This query returns the total number of virtual machine disks restored from the source virtual machine.
									</div></dd></dl></div><pre class="programlisting language-promql">kubevirt_vmsnapshot_disks_restored_from_source_bytes{vm_name="simple-vm", vm_namespace="default"} <span id="CO141-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO141-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This query returns the amount of space in bytes restored from the source virtual machine.
									</div></dd></dl></div></section><section class="section" id="virt-iops_virt-prometheus-queries"><div class="titlepage"><div><div><h6 class="title">14.3.3.3.3.3. I/O performance</h6></div></div></div><p>
								The following queries can determine the I/O performance of storage devices:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmi_storage_iops_read_total</code></span></dt><dd>
											Returns the amount of write I/O operations the virtual machine is performing per second. Type: Counter.
										</dd><dt><span class="term"><code class="literal">kubevirt_vmi_storage_iops_write_total</code></span></dt><dd>
											Returns the amount of read I/O operations the virtual machine is performing per second. Type: Counter.
										</dd></dl></div><div class="formalpara"><p class="title"><strong>Example I/O performance query</strong></p><p>
									
<pre class="programlisting language-promql">topk(3, sum by (name, namespace) (rate(kubevirt_vmi_storage_iops_read_total[6m])) + sum by (name, namespace) (rate(kubevirt_vmi_storage_iops_write_total[6m]))) &gt; 0 <span id="CO142-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO142-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										This query returns the top 3 VMs performing the most I/O operations per second at every given moment over a six-minute time period.
									</div></dd></dl></div></section></section><section class="section" id="virt-promql-guest-memory-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.3.4. Guest memory swapping metrics</h5></div></div></div><p>
							The following queries can identify which swap-enabled guests are performing the most memory swapping:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_vmi_memory_swap_in_traffic_bytes_total</code></span></dt><dd>
										Returns the total amount (in bytes) of memory the virtual guest is swapping in. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_vmi_memory_swap_out_traffic_bytes_total</code></span></dt><dd>
										Returns the total amount (in bytes) of memory the virtual guest is swapping out. Type: Gauge.
									</dd></dl></div><div class="formalpara"><p class="title"><strong>Example memory swapping query</strong></p><p>
								
<pre class="programlisting language-promql">topk(3, sum by (name, namespace) (rate(kubevirt_vmi_memory_swap_in_traffic_bytes_total[6m])) + sum by (name, namespace) (rate(kubevirt_vmi_memory_swap_out_traffic_bytes_total[6m]))) &gt; 0 <span id="CO143-1"><!--Empty--></span><span class="callout">1</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO143-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									This query returns the top 3 VMs where the guest is performing the most memory swapping at every given moment over a six-minute time period.
								</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Memory swapping indicates that the virtual machine is under memory pressure. Increasing the memory allocation of the virtual machine can mitigate this issue.
							</p></div></div></section><section class="section" id="virt-live-migration-metrics_virt-prometheus-queries"><div class="titlepage"><div><div><h5 class="title">14.3.3.3.5. Live migration metrics</h5></div></div></div><p>
							The following metrics can be queried to show live migration status:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_data_processed_bytes</code></span></dt><dd>
										The amount of guest operating system data that has migrated to the new virtual machine (VM). Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_data_remaining_bytes</code></span></dt><dd>
										The amount of guest operating system data that remains to be migrated. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_dirty_memory_rate_bytes</code></span></dt><dd>
										The rate at which memory is becoming dirty in the guest operating system. Dirty memory is data that has been changed but not yet written to disk. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_pending_count</code></span></dt><dd>
										The number of pending migrations. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_scheduling_count</code></span></dt><dd>
										The number of scheduling migrations. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_running_count</code></span></dt><dd>
										The number of running migrations. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_succeeded</code></span></dt><dd>
										The number of successfully completed migrations. Type: Gauge.
									</dd><dt><span class="term"><code class="literal">kubevirt_migrate_vmi_failed</code></span></dt><dd>
										The number of failed migrations. Type: Gauge.
									</dd></dl></div></section></section><section class="section _additional-resources" id="additional-resources_virt-prometheus-queries"><div class="titlepage"><div><div><h4 class="title">14.3.3.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#monitoring-overview">Monitoring overview</a>
							</li><li class="listitem">
								<a class="link" href="https://prometheus.io/docs/prometheus/latest/querying/basics/">Querying Prometheus</a>
							</li><li class="listitem">
								<a class="link" href="https://prometheus.io/docs/prometheus/latest/querying/examples/">Prometheus query examples</a>
							</li></ul></div></section></section><section class="section" id="virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h3 class="title">14.3.4. Exposing custom metrics for virtual machines</h3></div></div></div><p>
					OpenShift Container Platform includes a pre-configured, pre-installed, and self-updating monitoring stack that provides monitoring for core platform components. This monitoring stack is based on the Prometheus monitoring system. Prometheus is a time-series database and a rule evaluation engine for metrics.
				</p><p>
					In addition to using the OpenShift Container Platform monitoring stack, you can enable monitoring for user-defined projects by using the CLI and query custom metrics that are exposed for virtual machines through the <code class="literal">node-exporter</code> service.
				</p><section class="section" id="virt-configuring-node-exporter-service_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h4 class="title">14.3.4.1. Configuring the node exporter service</h4></div></div></div><p>
						The node-exporter agent is deployed on every virtual machine in the cluster from which you want to collect metrics. Configure the node-exporter agent as a service to expose internal metrics and processes that are associated with virtual machines.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift Container Platform CLI <code class="literal">oc</code>.
							</li><li class="listitem">
								Log in to the cluster as a user with <code class="literal">cluster-admin</code> privileges.
							</li><li class="listitem">
								Create the <code class="literal">cluster-monitoring-config</code> <code class="literal">ConfigMap</code> object in the <code class="literal">openshift-monitoring</code> project.
							</li><li class="listitem">
								Configure the <code class="literal">user-workload-monitoring-config</code> <code class="literal">ConfigMap</code> object in the <code class="literal">openshift-user-workload-monitoring</code> project by setting <code class="literal">enableUserWorkload</code> to <code class="literal">true</code>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the <code class="literal">Service</code> YAML file. In the following example, the file is called <code class="literal">node-exporter-service.yaml</code>.
							</p><pre class="programlisting language-yaml">kind: Service
apiVersion: v1
metadata:
  name: node-exporter-service <span id="CO144-1"><!--Empty--></span><span class="callout">1</span>
  namespace: dynamation <span id="CO144-2"><!--Empty--></span><span class="callout">2</span>
  labels:
    servicetype: metrics <span id="CO144-3"><!--Empty--></span><span class="callout">3</span>
spec:
  ports:
    - name: exmet <span id="CO144-4"><!--Empty--></span><span class="callout">4</span>
      protocol: TCP
      port: 9100 <span id="CO144-5"><!--Empty--></span><span class="callout">5</span>
      targetPort: 9100 <span id="CO144-6"><!--Empty--></span><span class="callout">6</span>
  type: ClusterIP
  selector:
    monitor: metrics <span id="CO144-7"><!--Empty--></span><span class="callout">7</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO144-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The node-exporter service that exposes the metrics from the virtual machines.
									</div></dd><dt><a href="#CO144-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the service is created.
									</div></dd><dt><a href="#CO144-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The label for the service. The <code class="literal">ServiceMonitor</code> uses this label to match this service.
									</div></dd><dt><a href="#CO144-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The name given to the port that exposes metrics on port 9100 for the <code class="literal">ClusterIP</code> service.
									</div></dd><dt><a href="#CO144-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										The target port used by <code class="literal">node-exporter-service</code> to listen for requests.
									</div></dd><dt><a href="#CO144-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										The TCP port number of the virtual machine that is configured with the <code class="literal">monitor</code> label.
									</div></dd><dt><a href="#CO144-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										The label used to match the virtual machine’s pods. In this example, any virtual machine’s pod with the label <code class="literal">monitor</code> and a value of <code class="literal">metrics</code> will be matched.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the node-exporter service:
							</p><pre class="programlisting language-terminal">$ oc create -f node-exporter-service.yaml</pre></li></ol></div></section><section class="section" id="virt-configuring-vm-with-node-exporter-service_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h4 class="title">14.3.4.2. Configuring a virtual machine with the node exporter service</h4></div></div></div><p>
						Download the <code class="literal">node-exporter</code> file on to the virtual machine. Then, create a <code class="literal">systemd</code> service that runs the node-exporter service when the virtual machine boots.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The pods for the component are running in the <code class="literal">openshift-user-workload-monitoring</code> project.
							</li><li class="listitem">
								Grant the <code class="literal">monitoring-edit</code> role to users who need to monitor this user-defined project.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Log on to the virtual machine.
							</li><li class="listitem"><p class="simpara">
								Download the <code class="literal">node-exporter</code> file on to the virtual machine by using the directory path that applies to the version of <code class="literal">node-exporter</code> file.
							</p><pre class="programlisting language-terminal">$ wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</pre></li><li class="listitem"><p class="simpara">
								Extract the executable and place it in the <code class="literal">/usr/bin</code> directory.
							</p><pre class="programlisting language-terminal">$ sudo tar xvf node_exporter-1.3.1.linux-amd64.tar.gz \
    --directory /usr/bin --strip 1 "*/node_exporter"</pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">node_exporter.service</code> file in this directory path: <code class="literal">/etc/systemd/system</code>. This <code class="literal">systemd</code> service file runs the node-exporter service when the virtual machine reboots.
							</p><pre class="programlisting language-terminal">[Unit]
Description=Prometheus Metrics Exporter
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
Restart=always
RestartSec=1
User=root
ExecStart=/usr/bin/node_exporter

[Install]
WantedBy=multi-user.target</pre></li><li class="listitem"><p class="simpara">
								Enable and start the <code class="literal">systemd</code> service.
							</p><pre class="programlisting language-terminal">$ sudo systemctl enable node_exporter.service
$ sudo systemctl start node_exporter.service</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Verify that the node-exporter agent is reporting metrics from the virtual machine.
							</p><pre class="programlisting language-terminal">$ curl http://localhost:9100/metrics</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">go_gc_duration_seconds{quantile="0"} 1.5244e-05
go_gc_duration_seconds{quantile="0.25"} 3.0449e-05
go_gc_duration_seconds{quantile="0.5"} 3.7913e-05</pre>

								</p></div></li></ul></div></section><section class="section" id="virt-creating-custom-monitoring-label-for-vms_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h4 class="title">14.3.4.3. Creating a custom monitoring label for virtual machines</h4></div></div></div><p>
						To enable queries to multiple virtual machines from a single service, add a custom label in the virtual machine’s YAML file.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Install the OpenShift Container Platform CLI <code class="literal">oc</code>.
							</li><li class="listitem">
								Log in as a user with <code class="literal">cluster-admin</code> privileges.
							</li><li class="listitem">
								Access to the web console for stop and restart a virtual machine.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">template</code> spec of your virtual machine configuration file. In this example, the label <code class="literal">monitor</code> has the value <code class="literal">metrics</code>.
							</p><pre class="programlisting language-yaml">spec:
  template:
    metadata:
      labels:
        monitor: metrics</pre></li><li class="listitem">
								Stop and restart the virtual machine to create a new pod with the label name given to the <code class="literal">monitor</code> label.
							</li></ol></div><section class="section" id="virt-querying-the-node-exporter-service-for-metrics-_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h5 class="title">14.3.4.3.1. Querying the node-exporter service for metrics</h5></div></div></div><p>
							Metrics are exposed for virtual machines through an HTTP service endpoint under the <code class="literal">/metrics</code> canonical name. When you query for metrics, Prometheus directly scrapes the metrics from the metrics endpoint exposed by the virtual machines and presents these metrics for viewing.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You have access to the cluster as a user with <code class="literal">cluster-admin</code> privileges or the <code class="literal">monitoring-edit</code> role.
								</li><li class="listitem">
									You have enabled monitoring for the user-defined project by configuring the node-exporter service.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Obtain the HTTP service endpoint by specifying the namespace for the service:
								</p><pre class="programlisting language-terminal">$ oc get service -n &lt;namespace&gt; &lt;node-exporter-service&gt;</pre></li><li class="listitem"><p class="simpara">
									To list all available metrics for the node-exporter service, query the <code class="literal">metrics</code> resource.
								</p><pre class="programlisting language-terminal">$ curl http://&lt;172.30.226.162:9100&gt;/metrics | grep -vE "^#|^$"</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">node_arp_entries{device="eth0"} 1
node_boot_time_seconds 1.643153218e+09
node_context_switches_total 4.4938158e+07
node_cooling_device_cur_state{name="0",type="Processor"} 0
node_cooling_device_max_state{name="0",type="Processor"} 0
node_cpu_guest_seconds_total{cpu="0",mode="nice"} 0
node_cpu_guest_seconds_total{cpu="0",mode="user"} 0
node_cpu_seconds_total{cpu="0",mode="idle"} 1.10586485e+06
node_cpu_seconds_total{cpu="0",mode="iowait"} 37.61
node_cpu_seconds_total{cpu="0",mode="irq"} 233.91
node_cpu_seconds_total{cpu="0",mode="nice"} 551.47
node_cpu_seconds_total{cpu="0",mode="softirq"} 87.3
node_cpu_seconds_total{cpu="0",mode="steal"} 86.12
node_cpu_seconds_total{cpu="0",mode="system"} 464.15
node_cpu_seconds_total{cpu="0",mode="user"} 1075.2
node_disk_discard_time_seconds_total{device="vda"} 0
node_disk_discard_time_seconds_total{device="vdb"} 0
node_disk_discarded_sectors_total{device="vda"} 0
node_disk_discarded_sectors_total{device="vdb"} 0
node_disk_discards_completed_total{device="vda"} 0
node_disk_discards_completed_total{device="vdb"} 0
node_disk_discards_merged_total{device="vda"} 0
node_disk_discards_merged_total{device="vdb"} 0
node_disk_info{device="vda",major="252",minor="0"} 1
node_disk_info{device="vdb",major="252",minor="16"} 1
node_disk_io_now{device="vda"} 0
node_disk_io_now{device="vdb"} 0
node_disk_io_time_seconds_total{device="vda"} 174
node_disk_io_time_seconds_total{device="vdb"} 0.054
node_disk_io_time_weighted_seconds_total{device="vda"} 259.79200000000003
node_disk_io_time_weighted_seconds_total{device="vdb"} 0.039
node_disk_read_bytes_total{device="vda"} 3.71867136e+08
node_disk_read_bytes_total{device="vdb"} 366592
node_disk_read_time_seconds_total{device="vda"} 19.128
node_disk_read_time_seconds_total{device="vdb"} 0.039
node_disk_reads_completed_total{device="vda"} 5619
node_disk_reads_completed_total{device="vdb"} 96
node_disk_reads_merged_total{device="vda"} 5
node_disk_reads_merged_total{device="vdb"} 0
node_disk_write_time_seconds_total{device="vda"} 240.66400000000002
node_disk_write_time_seconds_total{device="vdb"} 0
node_disk_writes_completed_total{device="vda"} 71584
node_disk_writes_completed_total{device="vdb"} 0
node_disk_writes_merged_total{device="vda"} 19761
node_disk_writes_merged_total{device="vdb"} 0
node_disk_written_bytes_total{device="vda"} 2.007924224e+09
node_disk_written_bytes_total{device="vdb"} 0</pre>

									</p></div></li></ol></div></section></section><section class="section" id="virt-creating-servicemonitor-resource-for-node-exporter_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h4 class="title">14.3.4.4. Creating a ServiceMonitor resource for the node exporter service</h4></div></div></div><p>
						You can use a Prometheus client library and scrape metrics from the <code class="literal">/metrics</code> endpoint to access and view the metrics exposed by the node-exporter service. Use a <code class="literal">ServiceMonitor</code> custom resource definition (CRD) to monitor the node exporter service.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with <code class="literal">cluster-admin</code> privileges or the <code class="literal">monitoring-edit</code> role.
							</li><li class="listitem">
								You have enabled monitoring for the user-defined project by configuring the node-exporter service.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a YAML file for the <code class="literal">ServiceMonitor</code> resource configuration. In this example, the service monitor matches any service with the label <code class="literal">metrics</code> and queries the <code class="literal">exmet</code> port every 30 seconds.
							</p><pre class="programlisting language-yaml">apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    k8s-app: node-exporter-metrics-monitor
  name: node-exporter-metrics-monitor <span id="CO145-1"><!--Empty--></span><span class="callout">1</span>
  namespace: dynamation <span id="CO145-2"><!--Empty--></span><span class="callout">2</span>
spec:
  endpoints:
  - interval: 30s <span id="CO145-3"><!--Empty--></span><span class="callout">3</span>
    port: exmet <span id="CO145-4"><!--Empty--></span><span class="callout">4</span>
    scheme: http
  selector:
    matchLabels:
      servicetype: metrics</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO145-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The name of the <code class="literal">ServiceMonitor</code>.
									</div></dd><dt><a href="#CO145-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The namespace where the <code class="literal">ServiceMonitor</code> is created.
									</div></dd><dt><a href="#CO145-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										The interval at which the port will be queried.
									</div></dd><dt><a href="#CO145-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The name of the port that is queried every 30 seconds
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">ServiceMonitor</code> configuration for the node-exporter service.
							</p><pre class="programlisting language-terminal">$ oc create -f node-exporter-metrics-monitor.yaml</pre></li></ol></div><section class="section" id="virt-accessing-node-exporter-outside-cluster_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h5 class="title">14.3.4.4.1. Accessing the node exporter service outside the cluster</h5></div></div></div><p>
							You can access the node-exporter service outside the cluster and view the exposed metrics.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									You have access to the cluster as a user with <code class="literal">cluster-admin</code> privileges or the <code class="literal">monitoring-edit</code> role.
								</li><li class="listitem">
									You have enabled monitoring for the user-defined project by configuring the node-exporter service.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Expose the node-exporter service.
								</p><pre class="programlisting language-terminal">$ oc expose service -n &lt;namespace&gt; &lt;node_exporter_service_name&gt;</pre></li><li class="listitem"><p class="simpara">
									Obtain the FQDN (Fully Qualified Domain Name) for the route.
								</p><pre class="programlisting language-terminal">$ oc get route -o=custom-columns=NAME:.metadata.name,DNS:.spec.host</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">NAME                    DNS
node-exporter-service   node-exporter-service-dynamation.apps.cluster.example.org</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									Use the <code class="literal">curl</code> command to display metrics for the node-exporter service.
								</p><pre class="programlisting language-terminal">$ curl -s http://node-exporter-service-dynamation.apps.cluster.example.org/metrics</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">go_gc_duration_seconds{quantile="0"} 1.5382e-05
go_gc_duration_seconds{quantile="0.25"} 3.1163e-05
go_gc_duration_seconds{quantile="0.5"} 3.8546e-05
go_gc_duration_seconds{quantile="0.75"} 4.9139e-05
go_gc_duration_seconds{quantile="1"} 0.000189423</pre>

									</p></div></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_virt-exposing-custom-metrics-for-vms"><div class="titlepage"><div><div><h4 class="title">14.3.4.5. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#configuring-the-monitoring-stack">Configuring the monitoring stack</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#enabling-monitoring-for-user-defined-projects">Enabling monitoring for user-defined projects</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#managing-metrics">Managing metrics</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#reviewing-monitoring-dashboards">Reviewing monitoring dashboards</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#application-health">Monitoring application health by using health checks</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-pods-configmaps">Creating and using config maps</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-controlling-vm-states">Controlling virtual machine states</a>
							</li></ul></div></section></section><section class="section" id="virt-monitoring-vm-health"><div class="titlepage"><div><div><h3 class="title">14.3.5. Virtual machine health checks</h3></div></div></div><p>
					You can configure virtual machine (VM) health checks by defining readiness and liveness probes in the <code class="literal">VirtualMachine</code> resource.
				</p><section class="section" id="virt-about-readiness-liveness-probes_virt-monitoring-vm-health"><div class="titlepage"><div><div><h4 class="title">14.3.5.1. About readiness and liveness probes</h4></div></div></div><p>
						Use readiness and liveness probes to detect and handle unhealthy virtual machines (VMs). You can include one or more probes in the specification of the VM to ensure that traffic does not reach a VM that is not ready for it and that a new VM is created when a VM becomes unresponsive.
					</p><p>
						A <span class="emphasis"><em>readiness probe</em></span> determines whether a VM is ready to accept service requests. If the probe fails, the VM is removed from the list of available endpoints until the VM is ready.
					</p><p>
						A <span class="emphasis"><em>liveness probe</em></span> determines whether a VM is responsive. If the probe fails, the VM is deleted and a new VM is created to restore responsiveness.
					</p><p>
						You can configure readiness and liveness probes by setting the <code class="literal">spec.readinessProbe</code> and the <code class="literal">spec.livenessProbe</code> fields of the <code class="literal">VirtualMachine</code> object. These fields support the following tests:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">HTTP GET</span></dt><dd>
									The probe determines the health of the VM by using a web hook. The test is successful if the HTTP response code is between 200 and 399. You can use an HTTP GET test with applications that return HTTP status codes when they are completely initialized.
								</dd><dt><span class="term">TCP socket</span></dt><dd>
									The probe attempts to open a socket to the VM. The VM is only considered healthy if the probe can establish a connection. You can use a TCP socket test with applications that do not start listening until initialization is complete.
								</dd><dt><span class="term">Guest agent ping</span></dt><dd>
									The probe uses the <code class="literal">guest-ping</code> command to determine if the QEMU guest agent is running on the virtual machine.
								</dd></dl></div><section class="section" id="virt-define-http-readiness-probe_virt-monitoring-vm-health"><div class="titlepage"><div><div><h5 class="title">14.3.5.1.1. Defining an HTTP readiness probe</h5></div></div></div><p>
							Define an HTTP readiness probe by setting the <code class="literal">spec.readinessProbe.httpGet</code> field of the virtual machine (VM) configuration.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Include details of the readiness probe in the VM configuration file.
								</p><div class="formalpara"><p class="title"><strong>Sample readiness probe with an HTTP GET test</strong></p><p>
										
<pre class="programlisting language-yaml"># ...
spec:
  readinessProbe:
    httpGet: <span id="CO146-1"><!--Empty--></span><span class="callout">1</span>
      port: 1500 <span id="CO146-2"><!--Empty--></span><span class="callout">2</span>
      path: /healthz <span id="CO146-3"><!--Empty--></span><span class="callout">3</span>
      httpHeaders:
      - name: Custom-Header
        value: Awesome
    initialDelaySeconds: 120 <span id="CO146-4"><!--Empty--></span><span class="callout">4</span>
    periodSeconds: 20 <span id="CO146-5"><!--Empty--></span><span class="callout">5</span>
    timeoutSeconds: 10 <span id="CO146-6"><!--Empty--></span><span class="callout">6</span>
    failureThreshold: 3 <span id="CO146-7"><!--Empty--></span><span class="callout">7</span>
    successThreshold: 3 <span id="CO146-8"><!--Empty--></span><span class="callout">8</span>
# ...</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO146-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The HTTP GET request to perform to connect to the VM.
										</div></dd><dt><a href="#CO146-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The port of the VM that the probe queries. In the above example, the probe queries port 1500.
										</div></dd><dt><a href="#CO146-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The path to access on the HTTP server. In the above example, if the handler for the server’s /healthz path returns a success code, the VM is considered to be healthy. If the handler returns a failure code, the VM is removed from the list of available endpoints.
										</div></dd><dt><a href="#CO146-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The time, in seconds, after the VM starts before the readiness probe is initiated.
										</div></dd><dt><a href="#CO146-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The delay, in seconds, between performing probes. The default delay is 10 seconds. This value must be greater than <code class="literal">timeoutSeconds</code>.
										</div></dd><dt><a href="#CO146-6"><span class="callout">6</span></a> </dt><dd><div class="para">
											The number of seconds of inactivity after which the probe times out and the VM is assumed to have failed. The default value is 1. This value must be lower than <code class="literal">periodSeconds</code>.
										</div></dd><dt><a href="#CO146-7"><span class="callout">7</span></a> </dt><dd><div class="para">
											The number of times that the probe is allowed to fail. The default is 3. After the specified number of attempts, the pod is marked <code class="literal">Unready</code>.
										</div></dd><dt><a href="#CO146-8"><span class="callout">8</span></a> </dt><dd><div class="para">
											The number of times that the probe must report success, after a failure, to be considered successful. The default is 1.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create the VM by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f &lt;file_name&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-define-tcp-readiness-probe_virt-monitoring-vm-health"><div class="titlepage"><div><div><h5 class="title">14.3.5.1.2. Defining a TCP readiness probe</h5></div></div></div><p>
							Define a TCP readiness probe by setting the <code class="literal">spec.readinessProbe.tcpSocket</code> field of the virtual machine (VM) configuration.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Include details of the TCP readiness probe in the VM configuration file.
								</p><div class="formalpara"><p class="title"><strong>Sample readiness probe with a TCP socket test</strong></p><p>
										
<pre class="programlisting language-yaml"># ...
spec:
  readinessProbe:
    initialDelaySeconds: 120 <span id="CO147-1"><!--Empty--></span><span class="callout">1</span>
    periodSeconds: 20 <span id="CO147-2"><!--Empty--></span><span class="callout">2</span>
    tcpSocket: <span id="CO147-3"><!--Empty--></span><span class="callout">3</span>
      port: 1500 <span id="CO147-4"><!--Empty--></span><span class="callout">4</span>
    timeoutSeconds: 10 <span id="CO147-5"><!--Empty--></span><span class="callout">5</span>
# ...</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO147-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The time, in seconds, after the VM starts before the readiness probe is initiated.
										</div></dd><dt><a href="#CO147-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The delay, in seconds, between performing probes. The default delay is 10 seconds. This value must be greater than <code class="literal">timeoutSeconds</code>.
										</div></dd><dt><a href="#CO147-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The TCP action to perform.
										</div></dd><dt><a href="#CO147-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The port of the VM that the probe queries.
										</div></dd><dt><a href="#CO147-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The number of seconds of inactivity after which the probe times out and the VM is assumed to have failed. The default value is 1. This value must be lower than <code class="literal">periodSeconds</code>.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create the VM by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f &lt;file_name&gt;.yaml</pre></li></ol></div></section><section class="section" id="virt-define-http-liveness-probe_virt-monitoring-vm-health"><div class="titlepage"><div><div><h5 class="title">14.3.5.1.3. Defining an HTTP liveness probe</h5></div></div></div><p>
							Define an HTTP liveness probe by setting the <code class="literal">spec.livenessProbe.httpGet</code> field of the virtual machine (VM) configuration. You can define both HTTP and TCP tests for liveness probes in the same way as readiness probes. This procedure configures a sample liveness probe with an HTTP GET test.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Include details of the HTTP liveness probe in the VM configuration file.
								</p><div class="formalpara"><p class="title"><strong>Sample liveness probe with an HTTP GET test</strong></p><p>
										
<pre class="programlisting language-yaml"># ...
spec:
  livenessProbe:
    initialDelaySeconds: 120 <span id="CO148-1"><!--Empty--></span><span class="callout">1</span>
    periodSeconds: 20 <span id="CO148-2"><!--Empty--></span><span class="callout">2</span>
    httpGet: <span id="CO148-3"><!--Empty--></span><span class="callout">3</span>
      port: 1500 <span id="CO148-4"><!--Empty--></span><span class="callout">4</span>
      path: /healthz <span id="CO148-5"><!--Empty--></span><span class="callout">5</span>
      httpHeaders:
      - name: Custom-Header
        value: Awesome
    timeoutSeconds: 10 <span id="CO148-6"><!--Empty--></span><span class="callout">6</span>
# ...</pre>

									</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO148-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The time, in seconds, after the VM starts before the liveness probe is initiated.
										</div></dd><dt><a href="#CO148-2"><span class="callout">2</span></a> </dt><dd><div class="para">
											The delay, in seconds, between performing probes. The default delay is 10 seconds. This value must be greater than <code class="literal">timeoutSeconds</code>.
										</div></dd><dt><a href="#CO148-3"><span class="callout">3</span></a> </dt><dd><div class="para">
											The HTTP GET request to perform to connect to the VM.
										</div></dd><dt><a href="#CO148-4"><span class="callout">4</span></a> </dt><dd><div class="para">
											The port of the VM that the probe queries. In the above example, the probe queries port 1500. The VM installs and runs a minimal HTTP server on port 1500 via cloud-init.
										</div></dd><dt><a href="#CO148-5"><span class="callout">5</span></a> </dt><dd><div class="para">
											The path to access on the HTTP server. In the above example, if the handler for the server’s <code class="literal">/healthz</code> path returns a success code, the VM is considered to be healthy. If the handler returns a failure code, the VM is deleted and a new VM is created.
										</div></dd><dt><a href="#CO148-6"><span class="callout">6</span></a> </dt><dd><div class="para">
											The number of seconds of inactivity after which the probe times out and the VM is assumed to have failed. The default value is 1. This value must be lower than <code class="literal">periodSeconds</code>.
										</div></dd></dl></div></li><li class="listitem"><p class="simpara">
									Create the VM by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f &lt;file_name&gt;.yaml</pre></li></ol></div></section></section><section class="section" id="watchdog_virt-monitoring-vm-health"><div class="titlepage"><div><div><h4 class="title">14.3.5.2. Defining a watchdog</h4></div></div></div><p>
						You can define a watchdog to monitor the health of the guest operating system by performing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Configure a watchdog device for the virtual machine (VM).
							</li><li class="listitem">
								Install the watchdog agent on the guest.
							</li></ol></div><p>
						The watchdog device monitors the agent and performs one of the following actions if the guest operating system is unresponsive:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">poweroff</code>: The VM powers down immediately. If <code class="literal">spec.running</code> is set to <code class="literal">true</code> or <code class="literal">spec.runStrategy</code> is not set to <code class="literal">manual</code>, then the VM reboots.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">reset</code>: The VM reboots in place and the guest operating system cannot react.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The reboot time might cause liveness probes to time out. If cluster-level protections detect a failed liveness probe, the VM might be forcibly rescheduled, increasing the reboot time.
								</p></div></div></li><li class="listitem">
								<code class="literal">shutdown</code>: The VM gracefully powers down by stopping all services.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Watchdog is not available for Windows VMs.
						</p></div></div><section class="section" id="virt-defining-watchdog-device-vm"><div class="titlepage"><div><div><h5 class="title">14.3.5.2.1. Configuring a watchdog device for the virtual machine</h5></div></div></div><p>
							You configure a watchdog device for the virtual machine (VM).
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The VM must have kernel support for an <code class="literal">i6300esb</code> watchdog device. Red Hat Enterprise Linux (RHEL) images support <code class="literal">i6300esb</code>.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a <code class="literal">YAML</code> file with the following contents:
								</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  labels:
    kubevirt.io/vm: vm2-rhel84-watchdog
  name: &lt;vm-name&gt;
spec:
  running: false
  template:
    metadata:
      labels:
        kubevirt.io/vm: vm2-rhel84-watchdog
    spec:
      domain:
        devices:
          watchdog:
            name: &lt;watchdog&gt;
            i6300esb:
              action: "poweroff" <span id="CO149-1"><!--Empty--></span><span class="callout">1</span>
# ...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO149-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											Specify <code class="literal">poweroff</code>, <code class="literal">reset</code>, or <code class="literal">shutdown</code>.
										</div></dd></dl></div><p class="simpara">
									The example above configures the <code class="literal">i6300esb</code> watchdog device on a RHEL8 VM with the poweroff action and exposes the device as <code class="literal">/dev/watchdog</code>.
								</p><p class="simpara">
									This device can now be used by the watchdog binary.
								</p></li><li class="listitem"><p class="simpara">
									Apply the YAML file to your cluster by running the following command:
								</p><pre class="programlisting language-yaml">$ oc apply -f &lt;file_name&gt;.yaml</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								This procedure is provided for testing watchdog functionality only and must not be run on production machines.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Run the following command to verify that the VM is connected to the watchdog device:
								</p><pre class="programlisting language-terminal">$ lspci | grep watchdog -i</pre></li><li class="listitem"><p class="simpara">
									Run one of the following commands to confirm the watchdog is active:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											Trigger a kernel panic:
										</p><pre class="programlisting language-terminal"># echo c &gt; /proc/sysrq-trigger</pre></li><li class="listitem"><p class="simpara">
											Stop the watchdog service:
										</p><pre class="programlisting language-terminal"># pkill -9 watchdog</pre></li></ul></div></li></ol></div></section><section class="section" id="virt-installing-watchdog-agent_virt-monitoring-vm-health"><div class="titlepage"><div><div><h5 class="title">14.3.5.2.2. Installing the watchdog agent on the guest</h5></div></div></div><p>
							You install the watchdog agent on the guest and start the <code class="literal">watchdog</code> service.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Log in to the virtual machine as root user.
								</li><li class="listitem"><p class="simpara">
									Install the <code class="literal">watchdog</code> package and its dependencies:
								</p><pre class="programlisting language-terminal"># yum install watchdog</pre></li><li class="listitem"><p class="simpara">
									Uncomment the following line in the <code class="literal">/etc/watchdog.conf</code> file and save the changes:
								</p><pre class="programlisting language-terminal">#watchdog-device = /dev/watchdog</pre></li><li class="listitem"><p class="simpara">
									Enable the <code class="literal">watchdog</code> service to start on boot:
								</p><pre class="programlisting language-terminal"># systemctl enable --now watchdog.service</pre></li></ol></div></section></section><section class="section" id="virt-define-guest-agent-ping-probe_virt-monitoring-vm-health"><div class="titlepage"><div><div><h4 class="title">14.3.5.3. Defining a guest agent ping probe</h4></div></div></div><p>
						Define a guest agent ping probe by setting the <code class="literal">spec.readinessProbe.guestAgentPing</code> field of the virtual machine (VM) configuration.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The guest agent ping probe is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
						</p><p>
							For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The QEMU guest agent must be installed and enabled on the virtual machine.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Include details of the guest agent ping probe in the VM configuration file. For example:
							</p><div class="formalpara"><p class="title"><strong>Sample guest agent ping probe</strong></p><p>
									
<pre class="programlisting language-yaml"># ...
spec:
  readinessProbe:
    guestAgentPing: {} <span id="CO150-1"><!--Empty--></span><span class="callout">1</span>
    initialDelaySeconds: 120 <span id="CO150-2"><!--Empty--></span><span class="callout">2</span>
    periodSeconds: 20 <span id="CO150-3"><!--Empty--></span><span class="callout">3</span>
    timeoutSeconds: 10 <span id="CO150-4"><!--Empty--></span><span class="callout">4</span>
    failureThreshold: 3 <span id="CO150-5"><!--Empty--></span><span class="callout">5</span>
    successThreshold: 3 <span id="CO150-6"><!--Empty--></span><span class="callout">6</span>
# ...</pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO150-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The guest agent ping probe to connect to the VM.
									</div></dd><dt><a href="#CO150-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Optional: The time, in seconds, after the VM starts before the guest agent probe is initiated.
									</div></dd><dt><a href="#CO150-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: The delay, in seconds, between performing probes. The default delay is 10 seconds. This value must be greater than <code class="literal">timeoutSeconds</code>.
									</div></dd><dt><a href="#CO150-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optional: The number of seconds of inactivity after which the probe times out and the VM is assumed to have failed. The default value is 1. This value must be lower than <code class="literal">periodSeconds</code>.
									</div></dd><dt><a href="#CO150-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: The number of times that the probe is allowed to fail. The default is 3. After the specified number of attempts, the pod is marked <code class="literal">Unready</code>.
									</div></dd><dt><a href="#CO150-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										Optional: The number of times that the probe must report success, after a failure, to be considered successful. The default is 1.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the VM by running the following command:
							</p><pre class="programlisting language-terminal">$ oc create -f &lt;file_name&gt;.yaml</pre></li></ol></div></section><section class="section _additional-resources" id="additional-resources_monitoring-vm-health"><div class="titlepage"><div><div><h4 class="title">14.3.5.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/building_applications/#application-health">Monitoring application health by using health checks</a>
							</li></ul></div></section></section></section><section class="section" id="virt-troubleshooting"><div class="titlepage"><div><div><h2 class="title">14.4. Troubleshooting</h2></div></div></div><p>
				OpenShift Virtualization provides tools and logs for troubleshooting virtual machines and virtualization components.
			</p><p>
				You can troubleshoot OpenShift Virtualization components by using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-web-console_virt-support-overview">tools provided in the web console</a> or by using the <code class="literal">oc</code> CLI tool.
			</p><section class="section" id="events_virt-troubleshooting"><div class="titlepage"><div><div><h3 class="title">14.4.1. Events</h3></div></div></div><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-containers-events">OpenShift Container Platform events</a> are records of important life-cycle information and are useful for monitoring and troubleshooting virtual machine, namespace, and resource issues.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							VM events: Navigate to the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#ui-virtualmachine-details-events"><span class="strong strong"><strong>Events</strong></span> tab</a> of the <span class="strong strong"><strong>VirtualMachine details</strong></span> page in the web console.
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Namespace events</span></dt><dd><p class="simpara">
										You can view namespace events by running the following command:
									</p><pre class="programlisting language-terminal">$ oc get events -n &lt;namespace&gt;</pre><p class="simpara">
										See the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-containers-events-list_nodes-containers-events">list of events</a> for details about specific events.
									</p></dd><dt><span class="term">Resource events</span></dt><dd><p class="simpara">
										You can view resource events by running the following command:
									</p><pre class="programlisting language-terminal">$ oc describe &lt;resource&gt; &lt;resource_name&gt;</pre></dd></dl></div></li></ul></div></section><section class="section" id="virt-logs_virt-troubleshooting"><div class="titlepage"><div><div><h3 class="title">14.4.2. Logs</h3></div></div></div><p>
					You can review the following logs for troubleshooting:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#viewing-virt-component-pods_virt-troubleshooting">Virtual machine</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-viewing-logs-cli_virt-troubleshooting">OpenShift Virtualization pod</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-viewing-logs-loki_virt-troubleshooting">Aggregated OpenShift Virtualization logs</a>
						</li></ul></div><section class="section" id="virt-viewing-virtual-machine-logs-web_virt-troubleshooting"><div class="titlepage"><div><div><h4 class="title">14.4.2.1. Viewing virtual machine logs with the web console</h4></div></div></div><p>
						You can view virtual machine logs with the OpenShift Container Platform web console.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>VirtualMachines</strong></span>.
							</li><li class="listitem">
								Select a virtual machine to open the <span class="strong strong"><strong>VirtualMachine details</strong></span> page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Details</strong></span> tab, click the pod name to open the <span class="strong strong"><strong>Pod details</strong></span> page.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Logs</strong></span> tab to view the logs.
							</li></ol></div></section><section class="section" id="viewing-virt-component-pods_virt-troubleshooting"><div class="titlepage"><div><div><h4 class="title">14.4.2.2. Viewing OpenShift Virtualization pod logs</h4></div></div></div><p>
						You can view logs for OpenShift Virtualization pods by using the <code class="literal">oc</code> CLI tool.
					</p><p>
						You can configure the verbosity level of the logs by editing the <code class="literal">HyperConverged</code> custom resource (CR).
					</p><section class="section" id="virt-viewing-logs-cli_virt-troubleshooting"><div class="titlepage"><div><div><h5 class="title">14.4.2.2.1. Viewing OpenShift Virtualization pod logs with the CLI</h5></div></div></div><p>
							You can view logs for the OpenShift Virtualization pods by using the <code class="literal">oc</code> CLI tool.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									View a list of pods in the OpenShift Virtualization namespace by running the following command:
								</p><pre class="programlisting language-terminal">$ oc get pods -n openshift-cnv</pre><div class="example" id="idm140196977299568"><p class="title"><strong>Example 14.3. Example output</strong></p><div class="example-contents"><pre class="programlisting language-terminal">NAME                               READY   STATUS    RESTARTS   AGE
disks-images-provider-7gqbc        1/1     Running   0          32m
disks-images-provider-vg4kx        1/1     Running   0          32m
virt-api-57fcc4497b-7qfmc          1/1     Running   0          31m
virt-api-57fcc4497b-tx9nc          1/1     Running   0          31m
virt-controller-76c784655f-7fp6m   1/1     Running   0          30m
virt-controller-76c784655f-f4pbd   1/1     Running   0          30m
virt-handler-2m86x                 1/1     Running   0          30m
virt-handler-9qs6z                 1/1     Running   0          30m
virt-operator-7ccfdbf65f-q5snk     1/1     Running   0          32m
virt-operator-7ccfdbf65f-vllz8     1/1     Running   0          32m</pre></div></div></li><li class="listitem"><p class="simpara">
									View the pod log by running the following command:
								</p><pre class="programlisting language-terminal">$ oc logs -n openshift-cnv &lt;pod_name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If a pod fails to start, you can use the <code class="literal">--previous</code> option to view logs from the last attempt.
									</p><p>
										To monitor log output in real time, use the <code class="literal">-f</code> option.
									</p></div></div><div class="example" id="idm140196977291488"><p class="title"><strong>Example 14.4. Example output</strong></p><div class="example-contents"><pre class="programlisting language-terminal">{"component":"virt-handler","level":"info","msg":"set verbosity to 2","pos":"virt-handler.go:453","timestamp":"2022-04-17T08:58:37.373695Z"}
{"component":"virt-handler","level":"info","msg":"set verbosity to 2","pos":"virt-handler.go:453","timestamp":"2022-04-17T08:58:37.373726Z"}
{"component":"virt-handler","level":"info","msg":"setting rate limiter to 5 QPS and 10 Burst","pos":"virt-handler.go:462","timestamp":"2022-04-17T08:58:37.373782Z"}
{"component":"virt-handler","level":"info","msg":"CPU features of a minimum baseline CPU model: map[apic:true clflush:true cmov:true cx16:true cx8:true de:true fpu:true fxsr:true lahf_lm:true lm:true mca:true mce:true mmx:true msr:true mtrr:true nx:true pae:true pat:true pge:true pni:true pse:true pse36:true sep:true sse:true sse2:true sse4.1:true ssse3:true syscall:true tsc:true]","pos":"cpu_plugin.go:96","timestamp":"2022-04-17T08:58:37.390221Z"}
{"component":"virt-handler","level":"warning","msg":"host model mode is expected to contain only one model","pos":"cpu_plugin.go:103","timestamp":"2022-04-17T08:58:37.390263Z"}
{"component":"virt-handler","level":"info","msg":"node-labeller is running","pos":"node_labeller.go:94","timestamp":"2022-04-17T08:58:37.391011Z"}</pre></div></div></li></ol></div></section><section class="section" id="virt-configuring-pod-log-verbosity_virt-troubleshooting"><div class="titlepage"><div><div><h5 class="title">14.4.2.2.2. Configuring OpenShift Virtualization pod log verbosity</h5></div></div></div><p>
							You can configure the verbosity level of OpenShift Virtualization pod logs by editing the <code class="literal">HyperConverged</code> custom resource (CR).
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									To set log verbosity for specific components, open the <code class="literal">HyperConverged</code> CR in your default text editor by running the following command:
								</p><pre class="programlisting language-terminal">$ oc edit hyperconverged kubevirt-hyperconverged -n openshift-cnv</pre></li><li class="listitem"><p class="simpara">
									Set the log level for one or more components by editing the <code class="literal">spec.logVerbosityConfig</code> stanza. For example:
								</p><pre class="programlisting language-yaml">apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  logVerbosityConfig:
    kubevirt:
      virtAPI: 5 <span id="CO151-1"><!--Empty--></span><span class="callout">1</span>
      virtController: 4
      virtHandler: 3
      virtLauncher: 2
      virtOperator: 6</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO151-1"><span class="callout">1</span></a> </dt><dd><div class="para">
											The log verbosity value must be an integer in the range <code class="literal">1–9</code>, where a higher number indicates a more detailed log. In this example, the <code class="literal">virtAPI</code> component logs are exposed if their priority level is <code class="literal">5</code> or higher.
										</div></dd></dl></div></li><li class="listitem">
									Apply your changes by saving and exiting the editor.
								</li></ol></div></section><section class="section" id="virt-common-error-messages_virt-troubleshooting"><div class="titlepage"><div><div><h5 class="title">14.4.2.2.3. Common error messages</h5></div></div></div><p>
							The following error messages might appear in OpenShift Virtualization logs:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ErrImagePull</code> or <code class="literal">ImagePullBackOff</code></span></dt><dd>
										Indicates an incorrect deployment configuration or problems with the images that are referenced.
									</dd></dl></div></section></section><section class="section" id="virt-viewing-logs-loki_virt-troubleshooting"><div class="titlepage"><div><div><h4 class="title">14.4.2.3. Viewing aggregated OpenShift Virtualization logs with the LokiStack</h4></div></div></div><p>
						You can view aggregated logs for OpenShift Virtualization pods and containers by using the LokiStack in the web console.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You deployed the LokiStack.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate to <span class="strong strong"><strong>Observe</strong></span> → <span class="strong strong"><strong>Logs</strong></span> in the web console.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>application</strong></span>, for <code class="literal">virt-launcher</code> pod logs, or <span class="strong strong"><strong>infrastructure</strong></span>, for OpenShift Virtualization control plane pods and containers, from the log type list.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Show Query</strong></span> to display the query field.
							</li><li class="listitem">
								Enter the LogQL query in the query field and click <span class="strong strong"><strong>Run Query</strong></span> to display the filtered logs.
							</li></ol></div><section class="section" id="virt-loki-log-queries_virt-troubleshooting"><div class="titlepage"><div><div><h5 class="title">14.4.2.3.1. OpenShift Virtualization LogQL queries</h5></div></div></div><p>
							You can view and filter aggregated logs for OpenShift Virtualization components by running Loki Query Language (LogQL) queries on the <span class="strong strong"><strong>Observe</strong></span> → <span class="strong strong"><strong>Logs</strong></span> page in the web console.
						</p><p>
							The default log type is <span class="emphasis"><em>infrastructure</em></span>. The <code class="literal">virt-launcher</code> log type is <span class="emphasis"><em>application</em></span>.
						</p><p>
							Optional: You can include or exclude strings or regular expressions by using line filter expressions.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If the query matches a large number of logs, the query might time out.
							</p></div></div><div class="table" id="idm140196977160832"><p class="title"><strong>Table 14.4. OpenShift Virtualization LogQL example queries</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 14%; " class="col_1"><!--Empty--></col><col style="width: 86%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977156032" scope="col">Component</th><th align="left" valign="top" id="idm140196977154944" scope="col">LogQL query</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											All
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">cdi-apiserver</code>
										</p>
										 <p>
											<code class="literal">cdi-deployment</code>
										</p>
										 <p>
											<code class="literal">cdi-operator</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|kubernetes_labels_app_kubernetes_io_component="storage"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">hco-operator</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|kubernetes_labels_app_kubernetes_io_component="deployment"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">kubemacpool</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|kubernetes_labels_app_kubernetes_io_component="network"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">virt-api</code>
										</p>
										 <p>
											<code class="literal">virt-controller</code>
										</p>
										 <p>
											<code class="literal">virt-handler</code>
										</p>
										 <p>
											<code class="literal">virt-operator</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|kubernetes_labels_app_kubernetes_io_component="compute"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">ssp-operator</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|kubernetes_labels_app_kubernetes_io_component="schedule"</pre>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											Container
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944">
<pre class="programlisting language-text">{log_type=~".+",kubernetes_container_name=~"&lt;container&gt;|&lt;container&gt;"} <span id="CO152-1"><!--Empty--></span><span class="callout">1</span>
|json|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"</pre>
										 <div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO152-1"><span class="callout">1</span></a> </dt><dd><div class="para">
													Specify one or more containers separated by a pipe (<code class="literal">|</code>).
												</div></dd></dl></div>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977156032"> <p>
											<code class="literal">virt-launcher</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977154944"> <p>
											You must select <span class="strong strong"><strong>application</strong></span> from the log type list before running this query.
										</p>
										 
<pre class="programlisting language-text">{log_type=~".+", kubernetes_container_name="compute"}|json
|!= "custom-ga-command" <span id="CO153-1"><!--Empty--></span><span class="callout">1</span></pre>
										 <div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO153-1"><span class="callout">1</span></a> </dt><dd><div class="para">
													<code class="literal">|!= "custom-ga-command"</code> excludes libvirt logs that contain the string <code class="literal">custom-ga-command</code>. (<a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=2177684"><span class="strong strong"><strong>BZ#2177684</strong></span></a>)
												</div></dd></dl></div>
										 </td></tr></tbody></table></div></div><p>
							You can filter log lines to include or exclude strings or regular expressions by using line filter expressions.
						</p><div class="table" id="idm140196977101008"><p class="title"><strong>Table 14.5. Line filter expressions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140196977096176" scope="col">Line filter expression</th><th align="left" valign="top" id="idm140196977095088" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140196977096176"> <p>
											<code class="literal">|= "&lt;string&gt;"</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977095088"> <p>
											Log line contains string
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977096176"> <p>
											<code class="literal">!= "&lt;string&gt;"</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977095088"> <p>
											Log line does not contain string
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977096176"> <p>
											<code class="literal">|~ "&lt;regex&gt;"</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977095088"> <p>
											Log line contains regular expression
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140196977096176"> <p>
											<code class="literal">!~ "&lt;regex&gt;"</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140196977095088"> <p>
											Log line does not contain regular expression
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example line filter expression</strong></p><p>
								
<pre class="programlisting language-text">{log_type=~".+"}|json
|kubernetes_labels_app_kubernetes_io_part_of="hyperconverged-cluster"
|= "error" != "timeout"</pre>

							</p></div></section><section class="section _additional-resources" id="additional-resources_virt-troubleshooting"><div class="titlepage"><div><div><h5 class="title">14.4.2.3.2. Additional resources for LokiStack and LogQL</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/logging/#about-logging-loki_cluster-logging-loki">About the LokiStack</a>
								</li><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/logging/#logging-loki-deploy_cluster-logging-loki">Deploying the LokiStack</a> on OpenShift Container Platform
								</li><li class="listitem">
									<a class="link" href="https://grafana.com/docs/loki/latest/logql/log_queries/">LogQL log queries</a> in the Grafana documentation
								</li></ul></div></section></section></section><section class="section" id="troubleshooting-data-volumes_virt-troubleshooting"><div class="titlepage"><div><div><h3 class="title">14.4.3. Troubleshooting data volumes</h3></div></div></div><p>
					You can check the <code class="literal">Conditions</code> and <code class="literal">Events</code> sections of the <code class="literal">DataVolume</code> object to analyze and resolve issues.
				</p><section class="section" id="virt-about-dv-conditions-and-events.adoc_virt-troubleshooting"><div class="titlepage"><div><div><h4 class="title">14.4.3.1. About data volume conditions and events</h4></div></div></div><p>
						You can diagnose data volume issues by examining the output of the <code class="literal">Conditions</code> and <code class="literal">Events</code> sections generated by the command:
					</p><pre class="programlisting language-terminal">$ oc describe dv &lt;DataVolume&gt;</pre><p>
						The <code class="literal">Conditions</code> section displays the following <code class="literal">Types</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Bound</code>
							</li><li class="listitem">
								<code class="literal">Running</code>
							</li><li class="listitem">
								<code class="literal">Ready</code>
							</li></ul></div><p>
						The <code class="literal">Events</code> section provides the following additional information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Type</code> of event
							</li><li class="listitem">
								<code class="literal">Reason</code> for logging
							</li><li class="listitem">
								<code class="literal">Source</code> of the event
							</li><li class="listitem">
								<code class="literal">Message</code> containing additional diagnostic information.
							</li></ul></div><p>
						The output from <code class="literal">oc describe</code> does not always contains <code class="literal">Events</code>.
					</p><p>
						An event is generated when the <code class="literal">Status</code>, <code class="literal">Reason</code>, or <code class="literal">Message</code> changes. Both conditions and events react to changes in the state of the data volume.
					</p><p>
						For example, if you misspell the URL during an import operation, the import generates a 404 message. That message change generates an event with a reason. The output in the <code class="literal">Conditions</code> section is updated as well.
					</p></section><section class="section" id="virt-analyzing-datavolume-conditions-and-events_virt-troubleshooting"><div class="titlepage"><div><div><h4 class="title">14.4.3.2. Analyzing data volume conditions and events</h4></div></div></div><p>
						By inspecting the <code class="literal">Conditions</code> and <code class="literal">Events</code> sections generated by the <code class="literal">describe</code> command, you determine the state of the data volume in relation to persistent volume claims (PVCs), and whether or not an operation is actively running or completed. You might also receive messages that offer specific details about the status of the data volume, and how it came to be in its current state.
					</p><p>
						There are many different combinations of conditions. Each must be evaluated in its unique context.
					</p><p>
						Examples of various combinations follow.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">Bound</code> - A successfully bound PVC displays in this example.
							</p><p class="simpara">
								Note that the <code class="literal">Type</code> is <code class="literal">Bound</code>, so the <code class="literal">Status</code> is <code class="literal">True</code>. If the PVC is not bound, the <code class="literal">Status</code> is <code class="literal">False</code>.
							</p><p class="simpara">
								When the PVC is bound, an event is generated stating that the PVC is bound. In this case, the <code class="literal">Reason</code> is <code class="literal">Bound</code> and <code class="literal">Status</code> is <code class="literal">True</code>. The <code class="literal">Message</code> indicates which PVC owns the data volume.
							</p><p class="simpara">
								<code class="literal">Message</code>, in the <code class="literal">Events</code> section, provides further details including how long the PVC has been bound (<code class="literal">Age</code>) and by what resource (<code class="literal">From</code>), in this case <code class="literal">datavolume-controller</code>:
							</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">Status:
  Conditions:
    Last Heart Beat Time:  2020-07-15T03:58:24Z
    Last Transition Time:  2020-07-15T03:58:24Z
    Message:               PVC win10-rootdisk Bound
    Reason:                Bound
    Status:                True
    Type:                  Bound
...
  Events:
    Type     Reason     Age    From                   Message
    ----     ------     ----   ----                   -------
    Normal   Bound      24s    datavolume-controller  PVC example-dv Bound</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								<code class="literal">Running</code> - In this case, note that <code class="literal">Type</code> is <code class="literal">Running</code> and <code class="literal">Status</code> is <code class="literal">False</code>, indicating that an event has occurred that caused an attempted operation to fail, changing the Status from <code class="literal">True</code> to <code class="literal">False</code>.
							</p><p class="simpara">
								However, note that <code class="literal">Reason</code> is <code class="literal">Completed</code> and the <code class="literal">Message</code> field indicates <code class="literal">Import Complete</code>.
							</p><p class="simpara">
								In the <code class="literal">Events</code> section, the <code class="literal">Reason</code> and <code class="literal">Message</code> contain additional troubleshooting information about the failed operation. In this example, the <code class="literal">Message</code> displays an inability to connect due to a <code class="literal">404</code>, listed in the <code class="literal">Events</code> section’s first <code class="literal">Warning</code>.
							</p><p class="simpara">
								From this information, you conclude that an import operation was running, creating contention for other operations that are attempting to access the data volume:
							</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">Status:
  Conditions:
    Last Heart Beat Time:  2020-07-15T04:31:39Z
    Last Transition Time:  2020-07-15T04:31:39Z
    Message:               Import Complete
    Reason:                Completed
    Status:                False
    Type:                  Running
...
  Events:
    Type     Reason       Age                From                   Message
    ----     ------       ----               ----                   -------
    Warning  Error        12s (x2 over 14s)  datavolume-controller  Unable to connect
    to http data source: expected status code 200, got 404. Status: 404 Not Found</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								<code class="literal">Ready</code> – If <code class="literal">Type</code> is <code class="literal">Ready</code> and <code class="literal">Status</code> is <code class="literal">True</code>, then the data volume is ready to be used, as in the following example. If the data volume is not ready to be used, the <code class="literal">Status</code> is <code class="literal">False</code>:
							</p><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">Status:
  Conditions:
    Last Heart Beat Time: 2020-07-15T04:31:39Z
    Last Transition Time:  2020-07-15T04:31:39Z
    Status:                True
    Type:                  Ready</pre>

								</p></div></li></ul></div></section></section></section><section class="section" id="virt-runbooks"><div class="titlepage"><div><div><h2 class="title">14.5. OpenShift Virtualization runbooks</h2></div></div></div><p>
				You can use the procedures in these runbooks to diagnose and resolve issues that trigger OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/monitoring/#managing-alerts">alerts</a>.
			</p><p>
				OpenShift Virtualization alerts are displayed on the <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Overview</strong></span> → <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virtualization-overview-overview"><span class="strong strong"><strong>Overview</strong></span> tab</a> in the web console.
			</p><section class="section" id="virt-runbook-CDIDataImportCronOutdated"><div class="titlepage"><div><div><h3 class="title">14.5.1. CDIDataImportCronOutdated</h3></div></div></div><h5 id="meaning-cdidataimportcronoutdated">Meaning</h5><p>
					This alert fires when <code class="literal">DataImportCron</code> cannot poll or import the latest disk image versions.
				</p><p>
					<code class="literal">DataImportCron</code> polls disk images, checking for the latest versions, and imports the images as persistent volume claims (PVCs). This process ensures that PVCs are updated to the latest version so that they can be used as reliable clone sources or golden images for virtual machines (VMs).
				</p><p>
					For golden images, <span class="emphasis"><em>latest</em></span> refers to the latest operating system of the distribution. For other disk images, <span class="emphasis"><em>latest</em></span> refers to the latest hash of the image that is available.
				</p><h5 id="impact-cdidataimportcronoutdated">Impact</h5><p>
					VMs might be created from outdated disk images.
				</p><p>
					VMs might fail to start because no source PVC is available for cloning.
				</p><h5 id="diagnosis-cdidataimportcronoutdated">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the cluster for a default storage class:
						</p><pre class="programlisting language-terminal">$ oc get sc</pre><p class="simpara">
							The output displays the storage classes with <code class="literal">(default)</code> beside the name of the default storage class. You must set a default storage class, either on the cluster or in the <code class="literal">DataImportCron</code> specification, in order for the <code class="literal">DataImportCron</code> to poll and import golden images. If no storage class is defined, the DataVolume controller fails to create PVCs and the following event is displayed: <code class="literal">DataVolume.storage spec is missing accessMode and no storageClass to choose profile</code>.
						</p></li><li class="listitem"><p class="simpara">
							Obtain the <code class="literal">DataImportCron</code> namespace and name:
						</p><pre class="programlisting language-terminal">$ oc get dataimportcron -A -o json | jq -r '.items[] | \
  select(.status.conditions[] | select(.type == "UpToDate" and \
  .status == "False")) | .metadata.namespace + "/" + .metadata.name'</pre></li><li class="listitem"><p class="simpara">
							If a default storage class is not defined on the cluster, check the <code class="literal">DataImportCron</code> specification for a default storage class:
						</p><pre class="programlisting language-terminal">$ oc get dataimportcron &lt;dataimportcron&gt; -o yaml | \
  grep -B 5 storageClassName</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-yaml">      url: docker://.../cdi-func-test-tinycore
    storage:
      resources:
        requests:
          storage: 5Gi
    storageClassName: rook-ceph-block</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Obtain the name of the <code class="literal">DataVolume</code> associated with the <code class="literal">DataImportCron</code> object:
						</p><pre class="programlisting language-terminal">$ oc -n &lt;namespace&gt; get dataimportcron &lt;dataimportcron&gt; -o json | \
  jq .status.lastImportedPVC.name</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">DataVolume</code> log for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n &lt;namespace&gt; get dv &lt;datavolume&gt; -o yaml</pre></li><li class="listitem"><p class="simpara">
							Set the <code class="literal">CDI_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export CDI_NAMESPACE="$(oc get deployment -A | \
  grep cdi-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">cdi-deployment</code> log for error messages:
						</p><pre class="programlisting language-terminal">$ oc logs -n $CDI_NAMESPACE deployment/cdi-deployment</pre></li></ol></div><h5 id="mitigation-cdidataimportcronoutdated">Mitigation</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Set a default storage class, either on the cluster or in the <code class="literal">DataImportCron</code> specification, to poll and import golden images. The updated Containerized Data Importer (CDI) will resolve the issue within a few seconds.
						</li><li class="listitem">
							If the issue does not resolve itself, delete the data volumes associated with the affected <code class="literal">DataImportCron</code> objects. The CDI will recreate the data volumes with the default storage class.
						</li><li class="listitem"><p class="simpara">
							If your cluster is installed in a restricted network environment, disable the <code class="literal">enableCommonBootImageImport</code> feature gate in order to opt out of automatic updates:
						</p><pre class="programlisting language-terminal">$ oc patch hco kubevirt-hyperconverged -n $CDI_NAMESPACE --type json \
  -p '[{"op": "replace", "path": \
  "/spec/featureGates/enableCommonBootImageImport", "value": false}]'</pre></li></ol></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-CDIDataVolumeUnusualRestartCount"><div class="titlepage"><div><div><h3 class="title">14.5.2. CDIDataVolumeUnusualRestartCount</h3></div></div></div><h5 id="meaning-cdidatavolumeunusualrestartcount">Meaning</h5><p>
					This alert fires when a <code class="literal">DataVolume</code> object restarts more than three times.
				</p><h5 id="impact-cdidatavolumeunusualrestartcount">Impact</h5><p>
					Data volumes are responsible for importing and creating a virtual machine disk on a persistent volume claim. If a data volume restarts more than three times, these operations are unlikely to succeed. You must diagnose and resolve the issue.
				</p><h5 id="diagnosis-cdidatavolumeunusualrestartcount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the name and namespace of the data volume:
						</p><pre class="programlisting language-terminal">$ oc get dv -A -o json | jq -r '.items[] | \
  select(.status.restartCount&gt;3)' | jq '.metadata.name, .metadata.namespace'</pre></li><li class="listitem"><p class="simpara">
							Check the status of the pods associated with the data volume:
						</p><pre class="programlisting language-terminal">$ oc get pods -n &lt;namespace&gt; -o json | jq -r '.items[] | \
  select(.metadata.ownerReferences[] | \
  select(.name=="&lt;dv_name&gt;")).metadata.name'</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the pods:
						</p><pre class="programlisting language-terminal">$ oc -n &lt;namespace&gt; describe pods &lt;pod&gt;</pre></li><li class="listitem"><p class="simpara">
							Check the pod logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n &lt;namespace&gt; describe logs &lt;pod&gt;</pre></li></ol></div><h5 id="mitigation-cdidatavolumeunusualrestartcount">Mitigation</h5><p>
					Delete the data volume, resolve the issue, and create a new data volume.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-CDINotReady"><div class="titlepage"><div><div><h3 class="title">14.5.3. CDINotReady</h3></div></div></div><h5 id="meaning-cdinotready">Meaning</h5><p>
					This alert fires when the Containerized Data Importer (CDI) is in a degraded state:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Not progressing
						</li><li class="listitem">
							Not available to use
						</li></ul></div><h5 id="impact-cdinotready">Impact</h5><p>
					CDI is not usable, so users cannot build virtual machine disks on persistent volume claims (PVCs) using CDI’s data volumes. CDI components are not ready and they stopped progressing towards a ready state.
				</p><h5 id="diagnosis-cdinotready">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">CDI_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export CDI_NAMESPACE="$(oc get deployment -A | \
  grep cdi-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the CDI deployment for components that are not ready:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE get deploy -l cdi.kubevirt.io</pre></li><li class="listitem"><p class="simpara">
							Check the details of the failing pod:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE describe pods &lt;pod&gt;</pre></li><li class="listitem"><p class="simpara">
							Check the logs of the failing pod:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE logs &lt;pod&gt;</pre></li></ol></div><h5 id="mitigation-cdinotready">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-CDIOperatorDown"><div class="titlepage"><div><div><h3 class="title">14.5.4. CDIOperatorDown</h3></div></div></div><h5 id="meaning-cdioperatordown">Meaning</h5><p>
					This alert fires when the Containerized Data Importer (CDI) Operator is down. The CDI Operator deploys and manages the CDI infrastructure components, such as data volume and persistent volume claim (PVC) controllers. These controllers help users build virtual machine disks on PVCs.
				</p><h5 id="impact-cdioperatordown">Impact</h5><p>
					The CDI components might fail to deploy or to stay in a required state. The CDI installation might not function correctly.
				</p><h5 id="diagnosis-cdioperatordown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">CDI_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export CDI_NAMESPACE="$(oc get deployment -A | grep cdi-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check whether the <code class="literal">cdi-operator</code> pod is currently running:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE get pods -l name=cdi-operator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">cdi-operator</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE describe pods -l name=cdi-operator</pre></li><li class="listitem"><p class="simpara">
							Check the log of the <code class="literal">cdi-operator</code> pod for errors:
						</p><pre class="programlisting language-terminal">$ oc -n $CDI_NAMESPACE logs -l name=cdi-operator</pre></li></ol></div><h5 id="mitigation-cdioperatordown">Mitigation</h5><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-CDIStorageProfilesIncomplete"><div class="titlepage"><div><div><h3 class="title">14.5.5. CDIStorageProfilesIncomplete</h3></div></div></div><h5 id="meaning-cdistorageprofilesincomplete">Meaning</h5><p>
					This alert fires when a Containerized Data Importer (CDI) storage profile is incomplete.
				</p><p>
					If a storage profile is incomplete, the CDI cannot infer persistent volume claim (PVC) fields, such as <code class="literal">volumeMode</code> and <code class="literal">accessModes</code>, which are required to create a virtual machine (VM) disk.
				</p><h5 id="impact-cdistorageprofilesincomplete">Impact</h5><p>
					The CDI cannot create a VM disk on the PVC.
				</p><h5 id="diagnosis-cdistorageprofilesincomplete">Diagnosis</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Identify the incomplete storage profile:
						</p><pre class="programlisting language-terminal">$ oc get storageprofile &lt;storage_class&gt;</pre></li></ul></div><h5 id="mitigation-cdistorageprofilesincomplete">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Add the missing storage profile information as in the following example:
						</p><pre class="programlisting language-terminal">$ oc patch storageprofile local --type=merge -p '{"spec": \
  {"claimPropertySets": [{"accessModes": ["ReadWriteOnce"], \
  "volumeMode": "Filesystem"}]}}'</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-CnaoDown"><div class="titlepage"><div><div><h3 class="title">14.5.6. CnaoDown</h3></div></div></div><h5 id="meaning-cnaodown">Meaning</h5><p>
					This alert fires when the Cluster Network Addons Operator (CNAO) is down. The CNAO deploys additional networking components on top of the cluster.
				</p><h5 id="impact-cnaodown">Impact</h5><p>
					If the CNAO is not running, the cluster cannot reconcile changes to virtual machine components. As a result, the changes might fail to take effect.
				</p><h5 id="diagnosis-cnaodown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | \
  grep cluster-network-addons-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">cluster-network-addons-operator</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l name=cluster-network-addons-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">cluster-network-addons-operator</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs -l name=cluster-network-addons-operator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">cluster-network-addons-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pods -l name=cluster-network-addons-operator</pre></li></ol></div><h5 id="mitigation-cnaodown">Mitigation</h5><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-HPPNotReady"><div class="titlepage"><div><div><h3 class="title">14.5.7. HPPNotReady</h3></div></div></div><h5 id="meaning-hppnotready">Meaning</h5><p>
					This alert fires when a hostpath provisioner (HPP) installation is in a degraded state.
				</p><p>
					The HPP dynamically provisions hostpath volumes to provide storage for persistent volume claims (PVCs).
				</p><h5 id="impact-hppnotready">Impact</h5><p>
					HPP is not usable. Its components are not ready and they are not progressing towards a ready state.
				</p><h5 id="diagnosis-hppnotready">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">HPP_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export HPP_NAMESPACE="$(oc get deployment -A | \
  grep hostpath-provisioner-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check for HPP components that are currently not ready:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE get all -l k8s-app=hostpath-provisioner</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the failing pod:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE describe pods &lt;pod&gt;</pre></li><li class="listitem"><p class="simpara">
							Check the logs of the failing pod:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE logs &lt;pod&gt;</pre></li></ol></div><h5 id="mitigation-hppnotready">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-HPPOperatorDown"><div class="titlepage"><div><div><h3 class="title">14.5.8. HPPOperatorDown</h3></div></div></div><h5 id="meaning-hppoperatordown">Meaning</h5><p>
					This alert fires when the hostpath provisioner (HPP) Operator is down.
				</p><p>
					The HPP Operator deploys and manages the HPP infrastructure components, such as the daemon set that provisions hostpath volumes.
				</p><h5 id="impact-hppoperatordown">Impact</h5><p>
					The HPP components might fail to deploy or to remain in the required state. As a result, the HPP installation might not work correctly in the cluster.
				</p><h5 id="diagnosis-hppoperatordown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the <code class="literal">HPP_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ HPP_NAMESPACE="$(oc get deployment -A | grep \
  hostpath-provisioner-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check whether the <code class="literal">hostpath-provisioner-operator</code> pod is currently running:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE get pods -l name=hostpath-provisioner-operator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">hostpath-provisioner-operator</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE describe pods -l name=hostpath-provisioner-operator</pre></li><li class="listitem"><p class="simpara">
							Check the log of the <code class="literal">hostpath-provisioner-operator</code> pod for errors:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE logs -l name=hostpath-provisioner-operator</pre></li></ol></div><h5 id="mitigation-hppoperatordown">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-HPPSharingPoolPathWithOS"><div class="titlepage"><div><div><h3 class="title">14.5.9. HPPSharingPoolPathWithOS</h3></div></div></div><h5 id="meaning-hppsharingpoolpathwithos">Meaning</h5><p>
					This alert fires when the hostpath provisioner (HPP) shares a file system with other critical components, such as <code class="literal">kubelet</code> or the operating system (OS).
				</p><p>
					HPP dynamically provisions hostpath volumes to provide storage for persistent volume claims (PVCs).
				</p><h5 id="impact-hppsharingpoolpathwithos">Impact</h5><p>
					A shared hostpath pool puts pressure on the node’s disks. The node might have degraded performance and stability.
				</p><h5 id="diagnosis-hppsharingpoolpathwithos">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the <code class="literal">HPP_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export HPP_NAMESPACE="$(oc get deployment -A | \
  grep hostpath-provisioner-operator | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Obtain the status of the <code class="literal">hostpath-provisioner-csi</code> daemon set pods:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE get pods | grep hostpath-provisioner-csi</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">hostpath-provisioner-csi</code> logs to identify the shared pool and path:
						</p><pre class="programlisting language-terminal">$ oc -n $HPP_NAMESPACE logs &lt;csi_daemonset&gt; -c hostpath-provisioner</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">I0208 15:21:03.769731       1 utils.go:221] pool (&lt;legacy, csi-data-dir&gt;/csi),
shares path with OS which can lead to node disk pressure</pre>

							</p></div></li></ol></div><h5 id="mitigation-hppsharingpoolpathwithos">Mitigation</h5><p>
					Using the data obtained in the Diagnosis section, try to prevent the pool path from being shared with the OS. The specific steps vary based on the node and other circumstances.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-KubeMacPoolDown"><div class="titlepage"><div><div><h3 class="title">14.5.10. KubeMacPoolDown</h3></div></div></div><h5 id="meaning-kubemacpooldown">Meaning</h5><p>
					<code class="literal">KubeMacPool</code> is down. <code class="literal">KubeMacPool</code> is responsible for allocating MAC addresses and preventing MAC address conflicts.
				</p><h5 id="impact-kubemacpooldown">Impact</h5><p>
					If <code class="literal">KubeMacPool</code> is down, <code class="literal">VirtualMachine</code> objects cannot be created.
				</p><h5 id="diagnosis-kubemacpooldown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">KMP_NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export KMP_NAMESPACE="$(oc get pod -A --no-headers -l \
  control-plane=mac-controller-manager | awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Set the <code class="literal">KMP_NAME</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export KMP_NAME="$(oc get pod -A --no-headers -l \
  control-plane=mac-controller-manager | awk '{print $2}')"</pre></li><li class="listitem"><p class="simpara">
							Obtain the <code class="literal">KubeMacPool-manager</code> pod details:
						</p><pre class="programlisting language-terminal">$ oc describe pod -n $KMP_NAMESPACE $KMP_NAME</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">KubeMacPool-manager</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc logs -n $KMP_NAMESPACE $KMP_NAME</pre></li></ol></div><h5 id="mitigation-kubemacpooldown">Mitigation</h5><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-KubeMacPoolDuplicateMacsFound"><div class="titlepage"><div><div><h3 class="title">14.5.11. KubeMacPoolDuplicateMacsFound</h3></div></div></div><h5 id="meaning-kubemacpoolduplicatemacsfound">Meaning</h5><p>
					This alert fires when <code class="literal">KubeMacPool</code> detects duplicate MAC addresses.
				</p><p>
					<code class="literal">KubeMacPool</code> is responsible for allocating MAC addresses and preventing MAC address conflicts. When <code class="literal">KubeMacPool</code> starts, it scans the cluster for the MAC addresses of virtual machines (VMs) in managed namespaces.
				</p><h5 id="impact-kubemacpoolduplicatemacsfound">Impact</h5><p>
					Duplicate MAC addresses on the same LAN might cause network issues.
				</p><h5 id="diagnosis-kubemacpoolduplicatemacsfound">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the namespace and the name of the <code class="literal">kubemacpool-mac-controller</code> pod:
						</p><pre class="programlisting language-terminal">$ oc get pod -A -l control-plane=mac-controller-manager --no-headers \
  -o custom-columns=":metadata.namespace,:metadata.name"</pre></li><li class="listitem"><p class="simpara">
							Obtain the duplicate MAC addresses from the <code class="literal">kubemacpool-mac-controller</code> logs:
						</p><pre class="programlisting language-terminal">$ oc logs -n &lt;namespace&gt; &lt;kubemacpool_mac_controller&gt; | \
  grep "already allocated"</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">mac address 02:00:ff:ff:ff:ff already allocated to
vm/kubemacpool-test/testvm, br1,
conflict with: vm/kubemacpool-test/testvm2, br1</pre>

							</p></div></li></ol></div><h5 id="mitigation-kubemacpoolduplicatemacsfound">Mitigation</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Update the VMs to remove the duplicate MAC addresses.
						</li><li class="listitem"><p class="simpara">
							Restart the <code class="literal">kubemacpool-mac-controller</code> pod:
						</p><pre class="programlisting language-terminal">$ oc delete pod -n &lt;namespace&gt; &lt;kubemacpool_mac_controller&gt;</pre></li></ol></div></section><section class="section" id="virt-runbook-kubevirtcomponentexceedsrequestedcpu_virt-runbooks"><div class="titlepage"><div><div><h3 class="title">14.5.12. KubeVirtComponentExceedsRequestedCPU</h3></div></div></div><h5 id="meaning-kubevirtcomponentexceedsrequestedcpu">Meaning</h5><p>
					This alert fires when a component’s CPU usage exceeds the requested limit.
				</p><h5 id="impact-kubevirtcomponentexceedsrequestedcpu">Impact</h5><p>
					Usage of CPU resources is not optimal and the node might be overloaded.
				</p><h5 id="diagnosis-kubevirtcomponentexceedsrequestedcpu">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the component’s CPU request limit:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deployment &lt;component&gt; -o yaml | grep requests: -A 2</pre></li><li class="listitem"><p class="simpara">
							Check the actual CPU usage by using a PromQL query:
						</p><pre class="programlisting language-text">node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
{namespace="$NAMESPACE",container="&lt;component&gt;"}</pre></li></ol></div><p>
					See the <a class="link" href="https://prometheus.io/docs/prometheus/latest/querying/basics/">Prometheus documentation</a> for more information.
				</p><h5 id="mitigation-kubevirtcomponentexceedsrequestedcpu">Mitigation</h5><p>
					Update the CPU request limit in the <code class="literal">HCO</code> custom resource.
				</p></section><section class="section" id="virt-runbook-KubeVirtComponentExceedsRequestedMemory"><div class="titlepage"><div><div><h3 class="title">14.5.13. KubeVirtComponentExceedsRequestedMemory</h3></div></div></div><h5 id="meaning-kubevirtcomponentexceedsrequestedmemory">Meaning</h5><p>
					This alert fires when a component’s memory usage exceeds the requested limit.
				</p><h5 id="impact-kubevirtcomponentexceedsrequestedmemory">Impact</h5><p>
					Usage of memory resources is not optimal and the node might be overloaded.
				</p><h5 id="diagnosis-kubevirtcomponentexceedsrequestedmemory">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the component’s memory request limit:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deployment &lt;component&gt; -o yaml | \
  grep requests: -A 2</pre></li><li class="listitem"><p class="simpara">
							Check the actual memory usage by using a PromQL query:
						</p><pre class="programlisting language-text">container_memory_usage_bytes{namespace="$NAMESPACE",container="&lt;component&gt;"}</pre></li></ol></div><p>
					See the <a class="link" href="https://prometheus.io/docs/prometheus/latest/querying/basics/">Prometheus documentation</a> for more information.
				</p><h5 id="mitigation-kubevirtcomponentexceedsrequestedmemory">Mitigation</h5><p>
					Update the memory request limit in the <code class="literal">HCO</code> custom resource.
				</p></section><section class="section" id="virt-runbook-KubevirtHyperconvergedClusterOperatorCRModification"><div class="titlepage"><div><div><h3 class="title">14.5.14. KubevirtHyperconvergedClusterOperatorCRModification</h3></div></div></div><h5 id="meaning-kubevirthyperconvergedclusteroperatorcrmodification">Meaning</h5><p>
					This alert fires when an operand of the HyperConverged Cluster Operator (HCO) is changed by someone or something other than HCO.
				</p><p>
					HCO configures OpenShift Virtualization and its supporting operators in an opinionated way and overwrites its operands when there is an unexpected change to them. Users must not modify the operands directly. The <code class="literal">HyperConverged</code> custom resource is the source of truth for the configuration.
				</p><h5 id="impact-kubevirthyperconvergedclusteroperatorcrmodification">Impact</h5><p>
					Changing the operands manually causes the cluster configuration to fluctuate and might lead to instability.
				</p><h5 id="diagnosis-kubevirthyperconvergedclusteroperatorcrmodification">Diagnosis</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Check the <code class="literal">component_name</code> value in the alert details to determine the operand kind (<code class="literal">kubevirt</code>) and the operand name (<code class="literal">kubevirt-kubevirt-hyperconverged</code>) that are being changed:
						</p><pre class="programlisting language-text">Labels
  alertname=KubevirtHyperconvergedClusterOperatorCRModification
  component_name=kubevirt/kubevirt-kubevirt-hyperconverged
  severity=warning</pre></li></ul></div><h5 id="mitigation-kubevirthyperconvergedclusteroperatorcrmodification">Mitigation</h5><p>
					Do not change the HCO operands directly. Use <code class="literal">HyperConverged</code> objects to configure the cluster.
				</p><p>
					The alert resolves itself after 10 minutes if the operands are not changed manually.
				</p></section><section class="section" id="virt-runbook-KubevirtHyperconvergedClusterOperatorInstallationNotCompletedAlert"><div class="titlepage"><div><div><h3 class="title">14.5.15. KubevirtHyperconvergedClusterOperatorInstallationNotCompletedAlert</h3></div></div></div><h5 id="meaning-kubevirthyperconvergedclusteroperatorinstallationnotcompletedalert">Meaning</h5><p>
					This alert fires when the HyperConverged Cluster Operator (HCO) runs for more than an hour without a <code class="literal">HyperConverged</code> custom resource (CR).
				</p><p>
					This alert has the following causes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							During the installation process, you installed the HCO but you did not create the <code class="literal">HyperConverged</code> CR.
						</li><li class="listitem">
							During the uninstall process, you removed the <code class="literal">HyperConverged</code> CR before uninstalling the HCO and the HCO is still running.
						</li></ul></div><h5 id="mitigation-kubevirthyperconvergedclusteroperatorinstallationnotcompletedalert">Mitigation</h5><p>
					The mitigation depends on whether you are installing or uninstalling the HCO:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Complete the installation by creating a <code class="literal">HyperConverged</code> CR with its default values:
						</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: hco-operatorgroup
  namespace: kubevirt-hyperconverged
spec: {}
EOF</pre></li><li class="listitem">
							Uninstall the HCO. If the uninstall process continues to run, you must resolve that issue in order to cancel the alert.
						</li></ul></div></section><section class="section" id="virt-runbook-KubevirtHyperconvergedClusterOperatorUSModification"><div class="titlepage"><div><div><h3 class="title">14.5.16. KubevirtHyperconvergedClusterOperatorUSModification</h3></div></div></div><h5 id="meaning-kubevirthyperconvergedclusteroperatorusmodification">Meaning</h5><p>
					This alert fires when a JSON Patch annotation is used to change an operand of the HyperConverged Cluster Operator (HCO).
				</p><p>
					HCO configures OpenShift Virtualization and its supporting operators in an opinionated way and overwrites its operands when there is an unexpected change to them. Users must not modify the operands directly.
				</p><p>
					However, if a change is required and it is not supported by the HCO API, you can force HCO to set a change in an operator by using JSON Patch annotations. These changes are not reverted by HCO during its reconciliation process.
				</p><h5 id="impact-kubevirthyperconvergedclusteroperatorusmodification">Impact</h5><p>
					Incorrect use of JSON Patch annotations might lead to unexpected results or an unstable environment.
				</p><p>
					Upgrading a system with JSON Patch annotations is dangerous because the structure of the component custom resources might change.
				</p><h5 id="diagnosis-kubevirthyperconvergedclusteroperatorusmodification">Diagnosis</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Check the <code class="literal">annotation_name</code> in the alert details to identify the JSON Patch annotation:
						</p><pre class="programlisting language-text">Labels
  alertname=KubevirtHyperconvergedClusterOperatorUSModification
  annotation_name=kubevirt.kubevirt.io/jsonpatch
  severity=info</pre></li></ul></div><h5 id="mitigation-kubevirthyperconvergedclusteroperatorusmodification">Mitigation</h5><p>
					It is best to use the HCO API to change an operand. However, if the change can only be done with a JSON Patch annotation, proceed with caution.
				</p><p>
					Remove JSON Patch annotations before upgrade to avoid potential issues.
				</p></section><section class="section" id="virt-runbook-KubevirtVmHighMemoryUsage"><div class="titlepage"><div><div><h3 class="title">14.5.17. KubevirtVmHighMemoryUsage</h3></div></div></div><h5 id="meaning-kubevirtvmhighmemoryusage">Meaning</h5><p>
					This alert fires when a container hosting a virtual machine (VM) has less than 20 MB free memory.
				</p><h5 id="impact-kubevirtvmhighmemoryusage">Impact</h5><p>
					The virtual machine running inside the container is terminated by the runtime if the container’s memory limit is exceeded.
				</p><h5 id="diagnosis-kubevirtvmhighmemoryusage">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the <code class="literal">virt-launcher</code> pod details:
						</p><pre class="programlisting language-terminal">$ oc get pod &lt;virt-launcher&gt; -o yaml</pre></li><li class="listitem"><p class="simpara">
							Identify <code class="literal">compute</code> container processes with high memory usage in the <code class="literal">virt-launcher</code> pod:
						</p><pre class="programlisting language-terminal">$ oc exec -it &lt;virt-launcher&gt; -c compute -- top</pre></li></ol></div><h5 id="mitigation-kubevirtvmhighmemoryusage">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Increase the memory limit in the <code class="literal">VirtualMachine</code> specification as in the following example:
						</p><pre class="programlisting language-yaml">spec:
  running: false
  template:
    metadata:
      labels:
        kubevirt.io/vm: vm-name
    spec:
      domain:
        resources:
          limits:
            memory: 200Mi
          requests:
            memory: 128Mi</pre></li></ul></div></section><section class="section" id="virt-runbook-KubeVirtVMIExcessiveMigrations"><div class="titlepage"><div><div><h3 class="title">14.5.18. KubeVirtVMIExcessiveMigrations</h3></div></div></div><h5 id="meaning-kubevirtvmiexcessivemigrations">Meaning</h5><p>
					This alert fires when a virtual machine instance (VMI) live migrates more than 12 times over a period of 24 hours.
				</p><p>
					This migration rate is abnormally high, even during an upgrade. This alert might indicate a problem in the cluster infrastructure, such as network disruptions or insufficient resources.
				</p><h5 id="impact-kubevirtvmiexcessivemigrations">Impact</h5><p>
					A virtual machine (VM) that migrates too frequently might experience degraded performance because memory page faults occur during the transition.
				</p><h5 id="diagnosis-kubevirtvmiexcessivemigrations">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that the worker node has sufficient resources:
						</p><pre class="programlisting language-terminal">$ oc get nodes -l node-role.kubernetes.io/worker= -o json | \
  jq .items[].status.allocatable</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-json">{
  "cpu": "3500m",
  "devices.kubevirt.io/kvm": "1k",
  "devices.kubevirt.io/sev": "0",
  "devices.kubevirt.io/tun": "1k",
  "devices.kubevirt.io/vhost-net": "1k",
  "ephemeral-storage": "38161122446",
  "hugepages-1Gi": "0",
  "hugepages-2Mi": "0",
  "memory": "7000128Ki",
  "pods": "250"
}</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Check the status of the worker node:
						</p><pre class="programlisting language-terminal">$ oc get nodes -l node-role.kubernetes.io/worker= -o json | \
  jq .items[].status.conditions</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-json">{
  "lastHeartbeatTime": "2022-05-26T07:36:01Z",
  "lastTransitionTime": "2022-05-23T08:12:02Z",
  "message": "kubelet has sufficient memory available",
  "reason": "KubeletHasSufficientMemory",
  "status": "False",
  "type": "MemoryPressure"
},
{
  "lastHeartbeatTime": "2022-05-26T07:36:01Z",
  "lastTransitionTime": "2022-05-23T08:12:02Z",
  "message": "kubelet has no disk pressure",
  "reason": "KubeletHasNoDiskPressure",
  "status": "False",
  "type": "DiskPressure"
},
{
  "lastHeartbeatTime": "2022-05-26T07:36:01Z",
  "lastTransitionTime": "2022-05-23T08:12:02Z",
  "message": "kubelet has sufficient PID available",
  "reason": "KubeletHasSufficientPID",
  "status": "False",
  "type": "PIDPressure"
},
{
  "lastHeartbeatTime": "2022-05-26T07:36:01Z",
  "lastTransitionTime": "2022-05-23T08:24:15Z",
  "message": "kubelet is posting ready status",
  "reason": "KubeletReady",
  "status": "True",
  "type": "Ready"
}</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Log in to the worker node and verify that the <code class="literal">kubelet</code> service is running:
						</p><pre class="programlisting language-terminal">$ systemctl status kubelet</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">kubelet</code> journal log for error messages:
						</p><pre class="programlisting language-terminal">$ journalctl -r -u kubelet</pre></li></ol></div><h5 id="mitigation-kubevirtvmiexcessivemigrations">Mitigation</h5><p>
					Ensure that the worker nodes have sufficient resources (CPU, memory, disk) to run VM workloads without interruption.
				</p><p>
					If the problem persists, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-LowKVMNodesCount"><div class="titlepage"><div><div><h3 class="title">14.5.19. LowKVMNodesCount</h3></div></div></div><h5 id="meaning-lowkvmnodescount">Meaning</h5><p>
					This alert fires when fewer than two nodes in the cluster have KVM resources.
				</p><h5 id="impact-lowkvmnodescount">Impact</h5><p>
					The cluster must have at least two nodes with KVM resources for live migration.
				</p><p>
					Virtual machines cannot be scheduled or run if no nodes have KVM resources.
				</p><h5 id="diagnosis-lowkvmnodescount">Diagnosis</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Identify the nodes with KVM resources:
						</p><pre class="programlisting language-terminal">$ oc get nodes -o jsonpath='{.items[*].status.allocatable}' | \
  grep devices.kubevirt.io/kvm</pre></li></ul></div><h5 id="mitigation-lowkvmnodescount">Mitigation</h5><p>
					Install KVM on the nodes without KVM resources.
				</p></section><section class="section" id="virt-runbook-LowReadyVirtControllersCount"><div class="titlepage"><div><div><h3 class="title">14.5.20. LowReadyVirtControllersCount</h3></div></div></div><h5 id="meaning-lowreadyvirtcontrollerscount">Meaning</h5><p>
					This alert fires when one or more <code class="literal">virt-controller</code> pods are running, but none of these pods has been in the <code class="literal">Ready</code> state for the past 5 minutes.
				</p><p>
					A <code class="literal">virt-controller</code> device monitors the custom resource definitions (CRDs) of a virtual machine instance (VMI) and manages the associated pods. The device creates pods for VMIs and manages their lifecycle. The device is critical for cluster-wide virtualization functionality.
				</p><h5 id="impact-lowreadyvirtcontrollerscount">Impact</h5><p>
					This alert indicates that a cluster-level failure might occur. Actions related to VM lifecycle management, such as launching a new VMI or shutting down an existing VMI, will fail.
				</p><h5 id="diagnosis-lowreadyvirtcontrollerscount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Verify a <code class="literal">virt-controller</code> device is available:
						</p><pre class="programlisting language-terminal">$ oc get deployment -n $NAMESPACE virt-controller \
  -o jsonpath='{.status.readyReplicas}'</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-controller</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-controller -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-controller</code> deployment to check for status conditions, such as crashing pods or failures to pull images:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-controller</pre></li><li class="listitem"><p class="simpara">
							Check if any problems occurred with the nodes. For example, they might be in a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-lowreadyvirtcontrollerscount">Mitigation</h5><p>
					This alert can have multiple causes, including the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The cluster has insufficient memory.
						</li><li class="listitem">
							The nodes are down.
						</li><li class="listitem">
							The API server is overloaded. For example, the scheduler might be under a heavy load and therefore not completely available.
						</li><li class="listitem">
							There are network issues.
						</li></ul></div><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-LowReadyVirtOperatorsCount"><div class="titlepage"><div><div><h3 class="title">14.5.21. LowReadyVirtOperatorsCount</h3></div></div></div><h5 id="meaning-lowreadyvirtoperatorscount">Meaning</h5><p>
					This alert fires when one or more <code class="literal">virt-operator</code> pods are running, but none of these pods has been in a <code class="literal">Ready</code> state for the last 10 minutes.
				</p><p>
					The <code class="literal">virt-operator</code> is the first Operator to start in a cluster. The <code class="literal">virt-operator</code> deployment has a default replica of two <code class="literal">virt-operator</code> pods.
				</p><p>
					Its primary responsibilities include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Installing, live-updating, and live-upgrading a cluster
						</li><li class="listitem">
							Monitoring the lifecycle of top-level controllers, such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, <code class="literal">virt-launcher</code>, and managing their reconciliation
						</li><li class="listitem">
							Certain cluster-wide tasks, such as certificate rotation and infrastructure management
						</li></ul></div><h5 id="impact-lowreadyvirtoperatorscount">Impact</h5><p>
					A cluster-level failure might occur. Critical cluster-wide management functionalities, such as certification rotation, upgrade, and reconciliation of controllers, might become unavailable. Such a state also triggers the <code class="literal">NoReadyVirtOperator</code> alert.
				</p><p>
					The <code class="literal">virt-operator</code> is not directly responsible for virtual machines (VMs) in the cluster. Therefore, its temporary unavailability does not significantly affect VM workloads.
				</p><h5 id="diagnosis-lowreadyvirtoperatorscount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Obtain the name of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-operator -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check for node issues, such as a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-lowreadyvirtoperatorscount">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-LowVirtAPICount"><div class="titlepage"><div><div><h3 class="title">14.5.22. LowVirtAPICount</h3></div></div></div><h5 id="meaning-lowvirtapicount">Meaning</h5><p>
					This alert fires when only one available <code class="literal">virt-api</code> pod is detected during a 60-minute period, although at least two nodes are available for scheduling.
				</p><h5 id="impact-lowvirtapicount">Impact</h5><p>
					An API call outage might occur during node eviction because the <code class="literal">virt-api</code> pod becomes a single point of failure.
				</p><h5 id="diagnosis-lowvirtapicount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the number of available <code class="literal">virt-api</code> pods:
						</p><pre class="programlisting language-terminal">$ oc get deployment -n $NAMESPACE virt-api \
  -o jsonpath='{.status.readyReplicas}'</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> deployment for error conditions:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-api -o yaml</pre></li><li class="listitem"><p class="simpara">
							Check the nodes for issues such as nodes in a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-lowvirtapicount">Mitigation</h5><p>
					Try to identify the root cause and to resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-LowVirtControllersCount"><div class="titlepage"><div><div><h3 class="title">14.5.23. LowVirtControllersCount</h3></div></div></div><h5 id="meaning-lowvirtcontrollerscount">Meaning</h5><p>
					This alert fires when a low number of <code class="literal">virt-controller</code> pods is detected. At least one <code class="literal">virt-controller</code> pod must be available in order to ensure high availability. The default number of replicas is 2.
				</p><p>
					A <code class="literal">virt-controller</code> device monitors the custom resource definitions (CRDs) of a virtual machine instance (VMI) and manages the associated pods. The device create pods for VMIs and manages the lifecycle of the pods. The device is critical for cluster-wide virtualization functionality.
				</p><h5 id="impact-lowvirtcontrollerscount">Impact</h5><p>
					The responsiveness of OpenShift Virtualization might become negatively affected. For example, certain requests might be missed.
				</p><p>
					In addition, if another <code class="literal">virt-launcher</code> instance terminates unexpectedly, OpenShift Virtualization might become completely unresponsive.
				</p><h5 id="diagnosis-lowvirtcontrollerscount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Verify that running <code class="literal">virt-controller</code> pods are available:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-controller</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-launcher</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs &lt;virt-launcher&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-launcher</code> pod to check for status conditions such as unexpected termination or a <code class="literal">NotReady</code> state.
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pod/&lt;virt-launcher&gt;</pre></li></ol></div><h5 id="mitigation-lowvirtcontrollerscount">Mitigation</h5><p>
					This alert can have a variety of causes, including:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Not enough memory on the cluster
						</li><li class="listitem">
							Nodes are down
						</li><li class="listitem">
							The API server is overloaded. For example, the scheduler might be under a heavy load and therefore not completely available.
						</li><li class="listitem">
							Networking issues
						</li></ul></div><p>
					Identify the root cause and fix it, if possible.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-LowVirtOperatorCount"><div class="titlepage"><div><div><h3 class="title">14.5.24. LowVirtOperatorCount</h3></div></div></div><h5 id="meaning-lowvirtoperatorcount">Meaning</h5><p>
					This alert fires when only one <code class="literal">virt-operator</code> pod in a <code class="literal">Ready</code> state has been running for the last 60 minutes.
				</p><p>
					The <code class="literal">virt-operator</code> is the first Operator to start in a cluster. Its primary responsibilities include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Installing, live-updating, and live-upgrading a cluster
						</li><li class="listitem">
							Monitoring the lifecycle of top-level controllers, such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, <code class="literal">virt-launcher</code>, and managing their reconciliation
						</li><li class="listitem">
							Certain cluster-wide tasks, such as certificate rotation and infrastructure management
						</li></ul></div><h5 id="impact-lowvirtoperatorcount">Impact</h5><p>
					The <code class="literal">virt-operator</code> cannot provide high availability (HA) for the deployment. HA requires two or more <code class="literal">virt-operator</code> pods in a <code class="literal">Ready</code> state. The default deployment is two pods.
				</p><p>
					The <code class="literal">virt-operator</code> is not directly responsible for virtual machines (VMs) in the cluster. Therefore, its decreased availability does not significantly affect VM workloads.
				</p><h5 id="diagnosis-lowvirtoperatorcount">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the states of the <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-operator</pre></li><li class="listitem"><p class="simpara">
							Review the logs of the affected <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs &lt;virt-operator&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the affected <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pod &lt;virt-operator&gt;</pre></li></ol></div><h5 id="mitigation-lowvirtoperatorcount">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the Diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-NetworkAddonsConfigNotReady"><div class="titlepage"><div><div><h3 class="title">14.5.25. NetworkAddonsConfigNotReady</h3></div></div></div><h5 id="meaning-networkaddonsconfignotready">Meaning</h5><p>
					This alert fires when the <code class="literal">NetworkAddonsConfig</code> custom resource (CR) of the Cluster Network Addons Operator (CNAO) is not ready.
				</p><p>
					CNAO deploys additional networking components on the cluster. This alert indicates that one of the deployed components is not ready.
				</p><h5 id="impact-networkaddonsconfignotready">Impact</h5><p>
					Network functionality is affected.
				</p><h5 id="diagnosis-networkaddonsconfignotready">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the status conditions of the <code class="literal">NetworkAddonsConfig</code> CR to identify the deployment or daemon set that is not ready:
						</p><pre class="programlisting language-terminal">$ oc get networkaddonsconfig \
  -o custom-columns="":.status.conditions[*].message</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">DaemonSet "cluster-network-addons/macvtap-cni" update is being processed...</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Check the component’s pod for errors:
						</p><pre class="programlisting language-terminal">$ oc -n cluster-network-addons get daemonset &lt;pod&gt; -o yaml</pre></li><li class="listitem"><p class="simpara">
							Check the component’s logs:
						</p><pre class="programlisting language-terminal">$ oc -n cluster-network-addons logs &lt;pod&gt;</pre></li><li class="listitem"><p class="simpara">
							Check the component’s details for error conditions:
						</p><pre class="programlisting language-terminal">$ oc -n cluster-network-addons describe &lt;pod&gt;</pre></li></ol></div><h5 id="mitigation-networkaddonsconfignotready">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-NoLeadingVirtOperator"><div class="titlepage"><div><div><h3 class="title">14.5.26. NoLeadingVirtOperator</h3></div></div></div><h5 id="meaning-noleadingvirtoperator">Meaning</h5><p>
					This alert fires when no <code class="literal">virt-operator</code> pod with a leader lease has been detected for 10 minutes, although the <code class="literal">virt-operator</code> pods are in a <code class="literal">Ready</code> state. The alert indicates that no leader pod is available.
				</p><p>
					The <code class="literal">virt-operator</code> is the first Operator to start in a cluster. Its primary responsibilities include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Installing, live updating, and live upgrading a cluster
						</li><li class="listitem">
							Monitoring the lifecycle of top-level controllers, such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, <code class="literal">virt-launcher</code>, and managing their reconciliation
						</li><li class="listitem">
							Certain cluster-wide tasks, such as certificate rotation and infrastructure management
						</li></ul></div><p>
					The <code class="literal">virt-operator</code> deployment has a default replica of 2 pods, with one pod holding a leader lease.
				</p><h5 id="impact-noleadingvirtoperator">Impact</h5><p>
					This alert indicates a failure at the level of the cluster. As a result, critical cluster-wide management functionalities, such as certification rotation, upgrade, and reconciliation of controllers, might not be available.
				</p><h5 id="diagnosis-noleadingvirtoperator">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A -o \
  custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Obtain the status of the <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-operator</code> pod logs to determine the leader status:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs | grep lead</pre><p class="simpara">
							Leader pod example:
						</p><pre class="programlisting language-text">{"component":"virt-operator","level":"info","msg":"Attempting to acquire
leader status","pos":"application.go:400","timestamp":"2021-11-30T12:15:18.635387Z"}
I1130 12:15:18.635452       1 leaderelection.go:243] attempting to acquire
leader lease &lt;namespace&gt;/virt-operator...
I1130 12:15:19.216582       1 leaderelection.go:253] successfully acquired
lease &lt;namespace&gt;/virt-operator
{"component":"virt-operator","level":"info","msg":"Started leading",
"pos":"application.go:385","timestamp":"2021-11-30T12:15:19.216836Z"}</pre><p class="simpara">
							Non-leader pod example:
						</p><pre class="programlisting language-text">{"component":"virt-operator","level":"info","msg":"Attempting to acquire
leader status","pos":"application.go:400","timestamp":"2021-11-30T12:15:20.533696Z"}
I1130 12:15:20.533792       1 leaderelection.go:243] attempting to acquire
leader lease &lt;namespace&gt;/virt-operator...</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the affected <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pod &lt;virt-operator&gt;</pre></li></ol></div><h5 id="mitigation-noleadingvirtoperator">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to find the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-NoReadyVirtController"><div class="titlepage"><div><div><h3 class="title">14.5.27. NoReadyVirtController</h3></div></div></div><h5 id="meaning-noreadyvirtcontroller">Meaning</h5><p>
					This alert fires when no available <code class="literal">virt-controller</code> devices have been detected for 5 minutes.
				</p><p>
					The <code class="literal">virt-controller</code> devices monitor the custom resource definitions of virtual machine instances (VMIs) and manage the associated pods. The devices create pods for VMIs and manage the lifecycle of the pods.
				</p><p>
					Therefore, <code class="literal">virt-controller</code> devices are critical for all cluster-wide virtualization functionality.
				</p><h5 id="impact-noreadyvirtcontroller">Impact</h5><p>
					Any actions related to VM lifecycle management fail. This notably includes launching a new VMI or shutting down an existing VMI.
				</p><h5 id="diagnosis-noreadyvirtcontroller">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Verify the number of <code class="literal">virt-controller</code> devices:
						</p><pre class="programlisting language-terminal">$ oc get deployment -n $NAMESPACE virt-controller \
  -o jsonpath='{.status.readyReplicas}'</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-controller</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-controller -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-controller</code> deployment to check for status conditions such as crashing pods or failure to pull images:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-controller</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-controller</code> pods:
						</p><pre class="programlisting language-terminal">$ get pods -n $NAMESPACE | grep virt-controller</pre></li><li class="listitem"><p class="simpara">
							Check the logs of the <code class="literal">virt-controller</code> pods for error messages:
						</p><pre class="programlisting language-terminal">$ oc logs -n $NAMESPACE &lt;virt-controller&gt;</pre></li><li class="listitem"><p class="simpara">
							Check the nodes for problems, such as a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-noreadyvirtcontroller">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to find the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-NoReadyVirtOperator"><div class="titlepage"><div><div><h3 class="title">14.5.28. NoReadyVirtOperator</h3></div></div></div><h5 id="meaning-noreadyvirtoperator">Meaning</h5><p>
					This alert fires when no <code class="literal">virt-operator</code> pod in a <code class="literal">Ready</code> state has been detected for 10 minutes.
				</p><p>
					The <code class="literal">virt-operator</code> is the first Operator to start in a cluster. Its primary responsibilities include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Installing, live-updating, and live-upgrading a cluster
						</li><li class="listitem">
							Monitoring the life cycle of top-level controllers, such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, <code class="literal">virt-launcher</code>, and managing their reconciliation
						</li><li class="listitem">
							Certain cluster-wide tasks, such as certificate rotation and infrastructure management
						</li></ul></div><p>
					The default deployment is two <code class="literal">virt-operator</code> pods.
				</p><h5 id="impact-noreadyvirtoperator">Impact</h5><p>
					This alert indicates a cluster-level failure. Critical cluster management functionalities, such as certification rotation, upgrade, and reconciliation of controllers, might not be not available.
				</p><p>
					The <code class="literal">virt-operator</code> is not directly responsible for virtual machines in the cluster. Therefore, its temporary unavailability does not significantly affect workloads.
				</p><h5 id="diagnosis-noreadyvirtoperator">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Obtain the name of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-operator -o yaml</pre></li><li class="listitem"><p class="simpara">
							Generate the description of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check for node issues, such as a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-noreadyvirtoperator">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the Diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-OrphanedVirtualMachineInstances"><div class="titlepage"><div><div><h3 class="title">14.5.29. OrphanedVirtualMachineInstances</h3></div></div></div><h5 id="meaning-orphanedvirtualmachineinstances">Meaning</h5><p>
					This alert fires when a virtual machine instance (VMI), or <code class="literal">virt-launcher</code> pod, runs on a node that does not have a running <code class="literal">virt-handler</code> pod. Such a VMI is called <span class="emphasis"><em>orphaned</em></span>.
				</p><h5 id="impact-orphanedvirtualmachineinstances">Impact</h5><p>
					Orphaned VMIs cannot be managed.
				</p><h5 id="diagnosis-orphanedvirtualmachineinstances">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-handler</code> pods to view the nodes on which they are running:
						</p><pre class="programlisting language-terminal">$ oc get pods --all-namespaces -o wide -l kubevirt.io=virt-handler</pre></li><li class="listitem"><p class="simpara">
							Check the status of the VMIs to identify VMIs running on nodes that do not have a running <code class="literal">virt-handler</code> pod:
						</p><pre class="programlisting language-terminal">$ oc get vmis --all-namespaces</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-handler</code> daemon:
						</p><pre class="programlisting language-terminal">$ oc get daemonset virt-handler --all-namespaces</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">NAME          DESIRED  CURRENT  READY  UP-TO-DATE  AVAILABLE ...
virt-handler  2        2        2      2           2         ...</pre>

							</p></div><p class="simpara">
							The daemon set is considered healthy if the <code class="literal">Desired</code>, <code class="literal">Ready</code>, and <code class="literal">Available</code> columns contain the same value.
						</p></li><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-handler</code> daemon set is not healthy, check the <code class="literal">virt-handler</code> daemon set for pod deployment issues:
						</p><pre class="programlisting language-terminal">$ oc get daemonset virt-handler --all-namespaces -o yaml | jq .status</pre></li><li class="listitem"><p class="simpara">
							Check the nodes for issues such as a <code class="literal">NotReady</code> status:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">spec.workloads</code> stanza of the <code class="literal">KubeVirt</code> custom resource (CR) for a workloads placement policy:
						</p><pre class="programlisting language-terminal">$ oc get kubevirt kubevirt --all-namespaces -o yaml</pre></li></ol></div><h5 id="mitigation-orphanedvirtualmachineinstances">Mitigation</h5><p>
					If a workloads placement policy is configured, add the node with the VMI to the policy.
				</p><p>
					Possible causes for the removal of a <code class="literal">virt-handler</code> pod from a node include changes to the node’s taints and tolerations or to a pod’s scheduling rules.
				</p><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-OutdatedVirtualMachineInstanceWorkloads"><div class="titlepage"><div><div><h3 class="title">14.5.30. OutdatedVirtualMachineInstanceWorkloads</h3></div></div></div><h5 id="meaning-outdatedvirtualmachineinstanceworkloads">Meaning</h5><p>
					This alert fires when running virtual machine instances (VMIs) in outdated <code class="literal">virt-launcher</code> pods are detected 24 hours after the OpenShift Virtualization control plane has been updated.
				</p><h5 id="impact-outdatedvirtualmachineinstanceworkloads">Impact</h5><p>
					Outdated VMIs might not have access to new OpenShift Virtualization features.
				</p><p>
					Outdated VMIs will not receive the security fixes associated with the <code class="literal">virt-launcher</code> pod update.
				</p><h5 id="diagnosis-outdatedvirtualmachineinstanceworkloads">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify the outdated VMIs:
						</p><pre class="programlisting language-terminal">$ oc get vmi -l kubevirt.io/outdatedLauncherImage --all-namespaces</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">KubeVirt</code> custom resource (CR) to determine whether <code class="literal">workloadUpdateMethods</code> is configured in the <code class="literal">workloadUpdateStrategy</code> stanza:
						</p><pre class="programlisting language-terminal">$ oc get kubevirt kubevirt --all-namespaces -o yaml</pre></li><li class="listitem"><p class="simpara">
							Check each outdated VMI to determine whether it is live-migratable:
						</p><pre class="programlisting language-terminal">$ oc get vmi &lt;vmi&gt; -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
# ...
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: null
      message: cannot migrate VMI which does not use masquerade
      to connect to the pod network
      reason: InterfaceNotLiveMigratable
      status: "False"
      type: LiveMigratable</pre>

							</p></div></li></ol></div><h5 id="mitigation-outdatedvirtualmachineinstanceworkloads">Mitigation</h5><h6 id="configuring-automated-workload-updates-outdatedvirtualmachineinstanceworkloads">Configuring automated workload updates</h6><p>
					Update the <code class="literal">HyperConverged</code> CR to enable automatic workload updates.
				</p><h6 id="stopping-a-vm-associated-with-a-non-live-migratable-vmi-outdatedvirtualmachineinstanceworkloads">Stopping a VM associated with a non-live-migratable VMI</h6><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If a VMI is not live-migratable and if <code class="literal">runStrategy: always</code> is set in the corresponding <code class="literal">VirtualMachine</code> object, you can update the VMI by manually stopping the virtual machine (VM):
						</p><pre class="programlisting language-terminal">$ virctl stop --namespace &lt;namespace&gt; &lt;vm&gt;</pre></li></ul></div><p>
					A new VMI spins up immediately in an updated <code class="literal">virt-launcher</code> pod to replace the stopped VMI. This is the equivalent of a restart action.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Manually stopping a <span class="emphasis"><em>live-migratable</em></span> VM is destructive and not recommended because it interrupts the workload.
					</p></div></div><h6 id="migrating-a-live-migratable-vmi-outdatedvirtualmachineinstanceworkloads">Migrating a live-migratable VMI</h6><p>
					If a VMI is live-migratable, you can update it by creating a <code class="literal">VirtualMachineInstanceMigration</code> object that targets a specific running VMI. The VMI is migrated into an updated <code class="literal">virt-launcher</code> pod.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">VirtualMachineInstanceMigration</code> manifest and save it as <code class="literal">migration.yaml</code>:
						</p><pre class="programlisting language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachineInstanceMigration
metadata:
  name: &lt;migration_name&gt;
  namespace: &lt;namespace&gt;
spec:
  vmiName: &lt;vmi_name&gt;</pre></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">VirtualMachineInstanceMigration</code> object to trigger the migration:
						</p><pre class="programlisting language-terminal">$ oc create -f migration.yaml</pre></li></ol></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-SSPCommonTemplatesModificationReverted"><div class="titlepage"><div><div><h3 class="title">14.5.31. SSPCommonTemplatesModificationReverted</h3></div></div></div><h5 id="meaning-sspcommontemplatesmodificationreverted">Meaning</h5><p>
					This alert fires when the Scheduling, Scale, and Performance (SSP) Operator reverts changes to common templates as part of its reconciliation procedure.
				</p><p>
					The SSP Operator deploys and reconciles the common templates and the Template Validator. If a user or script changes a common template, the changes are reverted by the SSP Operator.
				</p><h5 id="impact-sspcommontemplatesmodificationreverted">Impact</h5><p>
					Changes to common templates are overwritten.
				</p><h5 id="diagnosis-sspcommontemplatesmodificationreverted">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">ssp-operator</code> logs for templates with reverted changes:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator | \
  grep 'common template' -C 3</pre></li></ol></div><h5 id="mitigation-sspcommontemplatesmodificationreverted">Mitigation</h5><p>
					Try to identify and resolve the cause of the changes.
				</p><p>
					Ensure that changes are made only to copies of templates, and not to the templates themselves.
				</p></section><section class="section" id="virt-runbook-SSPDown"><div class="titlepage"><div><div><h3 class="title">14.5.32. SSPDown</h3></div></div></div><h5 id="meaning-sspdown">Meaning</h5><p>
					This alert fires when all the Scheduling, Scale and Performance (SSP) Operator pods are down.
				</p><p>
					The SSP Operator is responsible for deploying and reconciling the common templates and the Template Validator.
				</p><h5 id="impact-sspdown">Impact</h5><p>
					Dependent components might not be deployed. Changes in the components might not be reconciled. As a result, the common templates and/or the Template Validator might not be updated or reset if they fail.
				</p><h5 id="diagnosis-sspdown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">ssp-operator</code> pods.
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l control-plane=ssp-operator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">ssp-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pods -l control-plane=ssp-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">ssp-operator</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator</pre></li></ol></div><h5 id="mitigation-sspdown">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-SSPFailingToReconcile"><div class="titlepage"><div><div><h3 class="title">14.5.33. SSPFailingToReconcile</h3></div></div></div><h5 id="meaning-sspfailingtoreconcile">Meaning</h5><p>
					This alert fires when the reconcile cycle of the Scheduling, Scale and Performance (SSP) Operator fails repeatedly, although the SSP Operator is running.
				</p><p>
					The SSP Operator is responsible for deploying and reconciling the common templates and the Template Validator.
				</p><h5 id="impact-sspfailingtoreconcile">Impact</h5><p>
					Dependent components might not be deployed. Changes in the components might not be reconciled. As a result, the common templates or the Template Validator might not be updated or reset if they fail.
				</p><h5 id="diagnosis-sspfailingtoreconcile">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Export the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">ssp-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pods -l control-plane=ssp-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">ssp-operator</code> logs for errors:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator</pre></li><li class="listitem"><p class="simpara">
							Obtain the status of the <code class="literal">virt-template-validator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l name=virt-template-validator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-template-validator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pods -l name=virt-template-validator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-template-validator</code> logs for errors:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator</pre></li></ol></div><h5 id="mitigation-sspfailingtoreconcile">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-SSPHighRateRejectedVms"><div class="titlepage"><div><div><h3 class="title">14.5.34. SSPHighRateRejectedVms</h3></div></div></div><h5 id="meaning-ssphighraterejectedvms">Meaning</h5><p>
					This alert fires when a user or script attempts to create or modify a large number of virtual machines (VMs), using an invalid configuration.
				</p><h5 id="impact-ssphighraterejectedvms">Impact</h5><p>
					The VMs are not created or modified. As a result, the environment might not behave as expected.
				</p><h5 id="diagnosis-ssphighraterejectedvms">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Export the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-template-validator</code> logs for errors that might indicate the cause:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-text">{"component":"kubevirt-template-validator","level":"info","msg":"evalution
summary for ubuntu-3166wmdbbfkroku0:\nminimal-required-memory applied: FAIL,
value 1073741824 is lower than minimum [2147483648]\n\nsucceeded=false",
"pos":"admission.go:25","timestamp":"2021-09-28T17:59:10.934470Z"}</pre>

							</p></div></li></ol></div><h5 id="mitigation-ssphighraterejectedvms">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-SSPTemplateValidatorDown"><div class="titlepage"><div><div><h3 class="title">14.5.35. SSPTemplateValidatorDown</h3></div></div></div><h5 id="meaning-ssptemplatevalidatordown">Meaning</h5><p>
					This alert fires when all the Template Validator pods are down.
				</p><p>
					The Template Validator checks virtual machines (VMs) to ensure that they do not violate their templates.
				</p><h5 id="impact-ssptemplatevalidatordown">Impact</h5><p>
					VMs are not validated against their templates. As a result, VMs might be created with specifications that do not match their respective workloads.
				</p><h5 id="diagnosis-ssptemplatevalidatordown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | \
  awk '{print $1}')"</pre></li><li class="listitem"><p class="simpara">
							Obtain the status of the <code class="literal">virt-template-validator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l name=virt-template-validator</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-template-validator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pods -l name=virt-template-validator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-template-validator</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator</pre></li></ol></div><h5 id="mitigation-ssptemplatevalidatordown">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtAPIDown"><div class="titlepage"><div><div><h3 class="title">14.5.36. VirtAPIDown</h3></div></div></div><h5 id="meaning-virtapidown">Meaning</h5><p>
					This alert fires when all the API Server pods are down.
				</p><h5 id="impact-virtapidown">Impact</h5><p>
					OpenShift Virtualization objects cannot send API calls.
				</p><h5 id="diagnosis-virtapidown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-api</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-api -o yaml</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-api</code> deployment details for issues such as crashing pods or image pull failures:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-api</pre></li><li class="listitem"><p class="simpara">
							Check for issues such as nodes in a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-virtapidown">Mitigation</h5><p>
					Try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtApiRESTErrorsBurst"><div class="titlepage"><div><div><h3 class="title">14.5.37. VirtApiRESTErrorsBurst</h3></div></div></div><h5 id="meaning-virtapiresterrorsburst">Meaning</h5><p>
					More than 80% of REST calls have failed in the <code class="literal">virt-api</code> pods in the last 5 minutes.
				</p><h5 id="impact-virtapiresterrorsburst">Impact</h5><p>
					A very high rate of failed REST calls to <code class="literal">virt-api</code> might lead to slow response and execution of API calls, and potentially to API calls being completely dismissed.
				</p><p>
					However, currently running virtual machine workloads are not likely to be affected.
				</p><h5 id="diagnosis-virtapiresterrorsburst">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Obtain the list of <code class="literal">virt-api</code> pods on your deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-api</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-api</code> logs for error messages:
						</p><pre class="programlisting language-terminal">$ oc logs -n $NAMESPACE &lt;virt-api&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-api</code> pods:
						</p><pre class="programlisting language-terminal">$ oc describe -n $NAMESPACE &lt;virt-api&gt;</pre></li><li class="listitem"><p class="simpara">
							Check if any problems occurred with the nodes. For example, they might be in a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-api -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-api</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-api</pre></li></ol></div><h5 id="mitigation-virtapiresterrorsburst">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtApiRESTErrorsHigh"><div class="titlepage"><div><div><h3 class="title">14.5.38. VirtApiRESTErrorsHigh</h3></div></div></div><h5 id="meaning-virtapiresterrorshigh">Meaning</h5><p>
					More than 5% of REST calls have failed in the <code class="literal">virt-api</code> pods in the last 60 minutes.
				</p><h5 id="impact-virtapiresterrorshigh">Impact</h5><p>
					A high rate of failed REST calls to <code class="literal">virt-api</code> might lead to slow response and execution of API calls.
				</p><p>
					However, currently running virtual machine workloads are not likely to be affected.
				</p><h5 id="diagnosis-virtapiresterrorshigh">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable as follows:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-api</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-api</code> logs:
						</p><pre class="programlisting language-terminal">$ oc logs -n  $NAMESPACE &lt;virt-api&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-api</code> pods:
						</p><pre class="programlisting language-terminal">$ oc describe -n $NAMESPACE &lt;virt-api&gt;</pre></li><li class="listitem"><p class="simpara">
							Check if any problems occurred with the nodes. For example, they might be in a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-api</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-api -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-api</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-api</pre></li></ol></div><h5 id="mitigation-virtapiresterrorshigh">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to identify the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtControllerDown"><div class="titlepage"><div><div><h3 class="title">14.5.39. VirtControllerDown</h3></div></div></div><h5 id="meaning-virtcontrollerdown">Meaning</h5><p>
					No running <code class="literal">virt-controller</code> pod has been detected for 5 minutes.
				</p><h5 id="impact-virtcontrollerdown">Impact</h5><p>
					Any actions related to virtual machine (VM) lifecycle management fail. This notably includes launching a new virtual machine instance (VMI) or shutting down an existing VMI.
				</p><h5 id="diagnosis-virtcontrollerdown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-controller</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc get deployment -n $NAMESPACE virt-controller -o yaml</pre></li><li class="listitem"><p class="simpara">
							Review the logs of the <code class="literal">virt-controller</code> pod:
						</p><pre class="programlisting language-terminal">$ oc get logs &lt;virt-controller&gt;</pre></li></ol></div><h5 id="mitigation-virtcontrollerdown">Mitigation</h5><p>
					This alert can have a variety of causes, including the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Node resource exhaustion
						</li><li class="listitem">
							Not enough memory on the cluster
						</li><li class="listitem">
							Nodes are down
						</li><li class="listitem">
							The API server is overloaded. For example, the scheduler might be under a heavy load and therefore not completely available.
						</li><li class="listitem">
							Networking issues
						</li></ul></div><p>
					Identify the root cause and fix it, if possible.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtControllerRESTErrorsBurst"><div class="titlepage"><div><div><h3 class="title">14.5.40. VirtControllerRESTErrorsBurst</h3></div></div></div><h5 id="meaning-virtcontrollerresterrorsburst">Meaning</h5><p>
					More than 80% of REST calls in <code class="literal">virt-controller</code> pods failed in the last 5 minutes.
				</p><p>
					The <code class="literal">virt-controller</code> has likely fully lost the connection to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-controller</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virtcontrollerresterrorsburst">Impact</h5><p>
					Status updates are not propagated and actions like migrations cannot take place. However, running workloads are not impacted.
				</p><h5 id="diagnosis-virtcontrollerresterrorsburst">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							List the available <code class="literal">virt-controller</code> pods:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-controller</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-controller</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc logs -n  $NAMESPACE &lt;virt-controller&gt;</pre></li></ol></div><h5 id="mitigation-virtcontrollerresterrorsburst">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-controller</code> pod cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-controller&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtControllerRESTErrorsHigh"><div class="titlepage"><div><div><h3 class="title">14.5.41. VirtControllerRESTErrorsHigh</h3></div></div></div><h5 id="meaning-virtcontrollerresterrorshigh">Meaning</h5><p>
					More than 5% of REST calls failed in <code class="literal">virt-controller</code> in the last 60 minutes.
				</p><p>
					This is most likely because <code class="literal">virt-controller</code> has partially lost connection to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-controller</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virtcontrollerresterrorshigh">Impact</h5><p>
					Node-related actions, such as starting and migrating, and scheduling virtual machines, are delayed. Running workloads are not affected, but reporting their current status might be delayed.
				</p><h5 id="diagnosis-virtcontrollerresterrorshigh">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							List the available <code class="literal">virt-controller</code> pods:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-controller</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-controller</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc logs -n  $NAMESPACE &lt;virt-controller&gt;</pre></li></ol></div><h5 id="mitigation-virtcontrollerresterrorshigh">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-controller</code> pod cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-controller&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtHandlerDaemonSetRolloutFailing"><div class="titlepage"><div><div><h3 class="title">14.5.42. VirtHandlerDaemonSetRolloutFailing</h3></div></div></div><h5 id="meaning-virthandlerdaemonsetrolloutfailing">Meaning</h5><p>
					The <code class="literal">virt-handler</code> daemon set has failed to deploy on one or more worker nodes after 15 minutes.
				</p><h5 id="impact-virthandlerdaemonsetrolloutfailing">Impact</h5><p>
					This alert is a warning. It does not indicate that all <code class="literal">virt-handler</code> daemon sets have failed to deploy. Therefore, the normal lifecycle of virtual machines is not affected unless the cluster is overloaded.
				</p><h5 id="diagnosis-virthandlerdaemonsetrolloutfailing">Diagnosis</h5><p>
					Identify worker nodes that do not have a running <code class="literal">virt-handler</code> pod:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Export the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-handler</code> pods to identify pods that have not deployed:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-handler</pre></li><li class="listitem"><p class="simpara">
							Obtain the name of the worker node of the <code class="literal">virt-handler</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pod &lt;virt-handler&gt; -o jsonpath='{.spec.nodeName}'</pre></li></ol></div><h5 id="mitigation-virthandlerdaemonsetrolloutfailing">Mitigation</h5><p>
					If the <code class="literal">virt-handler</code> pods failed to deploy because of insufficient resources, you can delete other pods on the affected worker node.
				</p></section><section class="section" id="virt-runbook-VirtHandlerRESTErrorsBurst"><div class="titlepage"><div><div><h3 class="title">14.5.43. VirtHandlerRESTErrorsBurst</h3></div></div></div><h5 id="meaning-virthandlerresterrorsburst">Meaning</h5><p>
					More than 80% of REST calls failed in <code class="literal">virt-handler</code> in the last 5 minutes. This alert usually indicates that the <code class="literal">virt-handler</code> pods cannot connect to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-handler</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virthandlerresterrorsburst">Impact</h5><p>
					Status updates are not propagated and node-related actions, such as migrations, fail. However, running workloads on the affected node are not impacted.
				</p><h5 id="diagnosis-virthandlerresterrorsburst">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-handler</code> pod:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-handler</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-handler</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc logs -n  $NAMESPACE &lt;virt-handler&gt;</pre></li></ol></div><h5 id="mitigation-virthandlerresterrorsburst">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-handler</code> cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-handler&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtHandlerRESTErrorsHigh"><div class="titlepage"><div><div><h3 class="title">14.5.44. VirtHandlerRESTErrorsHigh</h3></div></div></div><h5 id="meaning-virthandlerresterrorshigh">Meaning</h5><p>
					More than 5% of REST calls failed in <code class="literal">virt-handler</code> in the last 60 minutes. This alert usually indicates that the <code class="literal">virt-handler</code> pods have partially lost connection to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-handler</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virthandlerresterrorshigh">Impact</h5><p>
					Node-related actions, such as starting and migrating workloads, are delayed on the node that <code class="literal">virt-handler</code> is running on. Running workloads are not affected, but reporting their current status might be delayed.
				</p><h5 id="diagnosis-virthandlerresterrorshigh">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-handler</code> pod:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-handler</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-handler</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc logs -n $NAMESPACE &lt;virt-handler&gt;</pre></li></ol></div><h5 id="mitigation-virthandlerresterrorshigh">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-handler</code> cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-handler&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtOperatorDown"><div class="titlepage"><div><div><h3 class="title">14.5.45. VirtOperatorDown</h3></div></div></div><h5 id="meaning-virtoperatordown">Meaning</h5><p>
					This alert fires when no <code class="literal">virt-operator</code> pod in the <code class="literal">Running</code> state has been detected for 10 minutes.
				</p><p>
					The <code class="literal">virt-operator</code> is the first Operator to start in a cluster. Its primary responsibilities include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Installing, live-updating, and live-upgrading a cluster
						</li><li class="listitem">
							Monitoring the life cycle of top-level controllers, such as <code class="literal">virt-controller</code>, <code class="literal">virt-handler</code>, <code class="literal">virt-launcher</code>, and managing their reconciliation
						</li><li class="listitem">
							Certain cluster-wide tasks, such as certificate rotation and infrastructure management
						</li></ul></div><p>
					The <code class="literal">virt-operator</code> deployment has a default replica of 2 pods.
				</p><h5 id="impact-virtoperatordown">Impact</h5><p>
					This alert indicates a failure at the level of the cluster. Critical cluster-wide management functionalities, such as certification rotation, upgrade, and reconciliation of controllers, might not be available.
				</p><p>
					The <code class="literal">virt-operator</code> is not directly responsible for virtual machines (VMs) in the cluster. Therefore, its temporary unavailability does not significantly affect VM workloads.
				</p><h5 id="diagnosis-virtoperatordown">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get deploy virt-operator -o yaml</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-operator</code> deployment:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe deploy virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc get pods -n $NAMESPACE -l=kubevirt.io=virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check for node issues, such as a <code class="literal">NotReady</code> state:
						</p><pre class="programlisting language-terminal">$ oc get nodes</pre></li></ol></div><h5 id="mitigation-virtoperatordown">Mitigation</h5><p>
					Based on the information obtained during the diagnosis procedure, try to find the root cause and resolve the issue.
				</p><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtOperatorRESTErrorsBurst"><div class="titlepage"><div><div><h3 class="title">14.5.46. VirtOperatorRESTErrorsBurst</h3></div></div></div><h5 id="meaning-virtoperatorresterrorsburst">Meaning</h5><p>
					This alert fires when more than 80% of the REST calls in the <code class="literal">virt-operator</code> pods failed in the last 5 minutes. This usually indicates that the <code class="literal">virt-operator</code> pods cannot connect to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-operator</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virtoperatorresterrorsburst">Impact</h5><p>
					Cluster-level actions, such as upgrading and controller reconciliation, might not be available.
				</p><p>
					However, workloads such as virtual machines (VMs) and VM instances (VMIs) are not likely to be affected.
				</p><h5 id="diagnosis-virtoperatorresterrorsburst">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-operator</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs &lt;virt-operator&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-operator</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pod &lt;virt-operator&gt;</pre></li></ol></div><h5 id="mitigation-virtoperatorresterrorsburst">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-operator</code> pod cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-operator&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VirtOperatorRESTErrorsHigh"><div class="titlepage"><div><div><h3 class="title">14.5.47. VirtOperatorRESTErrorsHigh</h3></div></div></div><h5 id="meaning-virtoperatorresterrorshigh">Meaning</h5><p>
					This alert fires when more than 5% of the REST calls in <code class="literal">virt-operator</code> pods failed in the last 60 minutes. This usually indicates the <code class="literal">virt-operator</code> pods cannot connect to the API server.
				</p><p>
					This error is frequently caused by one of the following problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The API server is overloaded, which causes timeouts. To verify if this is the case, check the metrics of the API server, and view its response times and overall calls.
						</li><li class="listitem">
							The <code class="literal">virt-operator</code> pod cannot reach the API server. This is commonly caused by DNS issues on the node and networking connectivity issues.
						</li></ul></div><h5 id="impact-virtoperatorresterrorshigh">Impact</h5><p>
					Cluster-level actions, such as upgrading and controller reconciliation, might be delayed.
				</p><p>
					However, workloads such as virtual machines (VMs) and VM instances (VMIs) are not likely to be affected.
				</p><h5 id="diagnosis-virtoperatorresterrorshigh">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set the <code class="literal">NAMESPACE</code> environment variable:
						</p><pre class="programlisting language-terminal">$ export NAMESPACE="$(oc get kubevirt -A \
  -o custom-columns="":.metadata.namespace)"</pre></li><li class="listitem"><p class="simpara">
							Check the status of the <code class="literal">virt-operator</code> pods:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE get pods -l kubevirt.io=virt-operator</pre></li><li class="listitem"><p class="simpara">
							Check the <code class="literal">virt-operator</code> logs for error messages when connecting to the API server:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE logs &lt;virt-operator&gt;</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the <code class="literal">virt-operator</code> pod:
						</p><pre class="programlisting language-terminal">$ oc -n $NAMESPACE describe pod &lt;virt-operator&gt;</pre></li></ol></div><h5 id="mitigation-virtoperatorresterrorshigh">Mitigation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If the <code class="literal">virt-operator</code> pod cannot connect to the API server, delete the pod to force a restart:
						</p><pre class="programlisting language-terminal">$ oc delete -n $NAMESPACE &lt;virt-operator&gt;</pre></li></ul></div><p>
					If you cannot resolve the issue, log in to the <a class="link" href="https://access.redhat.com">Customer Portal</a> and open a support case, attaching the artifacts gathered during the diagnosis procedure.
				</p></section><section class="section" id="virt-runbook-VMCannotBeEvicted"><div class="titlepage"><div><div><h3 class="title">14.5.48. VMCannotBeEvicted</h3></div></div></div><h5 id="meaning-vmcannotbeevicted">Meaning</h5><p>
					This alert fires when the eviction strategy of a virtual machine (VM) is set to <code class="literal">LiveMigration</code> but the VM is not migratable.
				</p><h5 id="impact-vmcannotbeevicted">Impact</h5><p>
					Non-migratable VMs prevent node eviction. This condition affects operations such as node drain and updates.
				</p><h5 id="diagnosis-vmcannotbeevicted">Diagnosis</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the VMI configuration to determine whether the value of <code class="literal">evictionStrategy</code> is <code class="literal">LiveMigrate</code>:
						</p><pre class="programlisting language-terminal">$ oc get vmis -o yaml</pre></li><li class="listitem"><p class="simpara">
							Check for a <code class="literal">False</code> status in the <code class="literal">LIVE-MIGRATABLE</code> column to identify VMIs that are not migratable:
						</p><pre class="programlisting language-terminal">$ oc get vmis -o wide</pre></li><li class="listitem"><p class="simpara">
							Obtain the details of the VMI and check <code class="literal">spec.conditions</code> to identify the issue:
						</p><pre class="programlisting language-terminal">$ oc get vmi &lt;vmi&gt; -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-yaml">status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: null
    message: cannot migrate VMI which does not use masquerade to connect
    to the pod network
    reason: InterfaceNotLiveMigratable
    status: "False"
    type: LiveMigratable</pre>

							</p></div></li></ol></div><h5 id="mitigation-vmcannotbeevicted">Mitigation</h5><p>
					Set the <code class="literal">evictionStrategy</code> of the VMI to <code class="literal">shutdown</code> or resolve the issue that prevents the VMI from migrating.
				</p></section></section></section><section class="chapter" id="backup-and-restore"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Backup and restore</h1></div></div></div><section class="section" id="virt-installing-configuring-oadp"><div class="titlepage"><div><div><h2 class="title">15.1. Installing and configuring OADP</h2></div></div></div><p>
				As a cluster administrator, you install the OpenShift API for Data Protection (OADP) by installing the OADP Operator. The Operator installs <a class="link" href="https://velero.io/docs/v1.11/">Velero 1.11</a>.
			</p><p>
				You create a default <code class="literal">Secret</code> for your backup storage provider and then you install the Data Protection Application.
			</p><section class="section" id="oadp-installing-operator_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h3 class="title">15.1.1. Installing the OADP Operator</h3></div></div></div><p>
					You install the OpenShift API for Data Protection (OADP) Operator on OpenShift Container Platform 4.13 by using Operator Lifecycle Manager (OLM).
				</p><p>
					The OADP Operator installs <a class="link" href="https://velero.io/docs/v1.11/">Velero 1.11</a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must be logged in as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
						</li><li class="listitem">
							Use the <span class="strong strong"><strong>Filter by keyword</strong></span> field to find the <span class="strong strong"><strong>OADP Operator</strong></span>.
						</li><li class="listitem">
							Select the <span class="strong strong"><strong>OADP Operator</strong></span> and click <span class="strong strong"><strong>Install</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Install</strong></span> to install the Operator in the <code class="literal">openshift-adp</code> project.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> to verify the installation.
						</li></ol></div></section><section class="section" id="oadp-about-backup-snapshot-locations_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h3 class="title">15.1.2. About backup and snapshot locations and their secrets</h3></div></div></div><p>
					You specify backup and snapshot locations and their secrets in the <code class="literal">DataProtectionApplication</code> custom resource (CR).
				</p><h5 id="backup-locations_virt-installing-configuring-oadp">Backup locations</h5><p>
					You specify S3-compatible object storage, such as Multicloud Object Gateway, Noobaa, or Minio, as a backup location.
				</p><p>
					Velero backs up OpenShift Container Platform resources, Kubernetes objects, and internal images as an archive file on object storage.
				</p><h5 id="snapshot-locations_virt-installing-configuring-oadp">Snapshot locations</h5><p>
					If you use your cloud provider’s native snapshot API to back up persistent volumes, you must specify the cloud provider as the snapshot location.
				</p><p>
					If you use Container Storage Interface (CSI) snapshots, you do not need to specify a snapshot location because you will create a <code class="literal">VolumeSnapshotClass</code> CR to register the CSI driver.
				</p><p>
					If you use Restic, you do not need to specify a snapshot location because Restic backs up the file system on object storage.
				</p><h5 id="secrets_virt-installing-configuring-oadp">Secrets</h5><p>
					If the backup and snapshot locations use the same credentials or if you do not require a snapshot location, you create a default <code class="literal">Secret</code>.
				</p><p>
					If the backup and snapshot locations use different credentials, you create two secret objects:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Custom <code class="literal">Secret</code> for the backup location, which you specify in the <code class="literal">DataProtectionApplication</code> CR.
						</li><li class="listitem">
							Default <code class="literal">Secret</code> for the snapshot location, which is not referenced in the <code class="literal">DataProtectionApplication</code> CR.
						</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The Data Protection Application requires a default <code class="literal">Secret</code>. Otherwise, the installation will fail.
					</p><p>
						If you do not want to specify backup or snapshot locations during the installation, you can create a default <code class="literal">Secret</code> with an empty <code class="literal">credentials-velero</code> file.
					</p></div></div><section class="section" id="oadp-creating-default-secret_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h4 class="title">15.1.2.1. Creating a default Secret</h4></div></div></div><p>
						You create a default <code class="literal">Secret</code> if your backup and snapshot locations use the same credentials or if you do not require a snapshot location.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">DataProtectionApplication</code> custom resource (CR) requires a default <code class="literal">Secret</code>. Otherwise, the installation will fail. If the name of the backup location <code class="literal">Secret</code> is not specified, the default name is used.
						</p><p>
							If you do not want to use the backup location credentials during the installation, you can create a <code class="literal">Secret</code> with the default name by using an empty <code class="literal">credentials-velero</code> file.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Your object storage and cloud storage, if any, must use the same credentials.
							</li><li class="listitem">
								You must configure object storage for Velero.
							</li><li class="listitem">
								You must create a <code class="literal">credentials-velero</code> file for the object storage in the appropriate format.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Create a <code class="literal">Secret</code> with the default name:
							</p><pre class="programlisting language-terminal">$ oc create secret generic cloud-credentials -n openshift-adp --from-file cloud=credentials-velero</pre></li></ul></div><p>
						The <code class="literal">Secret</code> is referenced in the <code class="literal">spec.backupLocations.credential</code> block of the <code class="literal">DataProtectionApplication</code> CR when you install the Data Protection Application.
					</p></section></section><section class="section" id="configuring-dpa-ocs"><div class="titlepage"><div><div><h3 class="title">15.1.3. Configuring the Data Protection Application</h3></div></div></div><p>
					You can configure the Data Protection Application by setting Velero resource allocations or enabling self-signed CA certificates.
				</p><section class="section" id="oadp-setting-resource-limits-and-requests_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h4 class="title">15.1.3.1. Setting Velero CPU and memory resource allocations</h4></div></div></div><p>
						You set the CPU and memory resource allocations for the <code class="literal">Velero</code> pod by editing the <code class="literal">DataProtectionApplication</code> custom resource (CR) manifest.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have the OpenShift API for Data Protection (OADP) Operator installed.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the values in the <code class="literal">spec.configuration.velero.podConfig.ResourceAllocations</code> block of the <code class="literal">DataProtectionApplication</code> CR manifest, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: oadp.openshift.io/v1alpha1
kind: DataProtectionApplication
metadata:
  name: &lt;dpa_sample&gt;
spec:
...
  configuration:
    velero:
      podConfig:
        nodeSelector: &lt;node selector&gt; <span id="CO154-1"><!--Empty--></span><span class="callout">1</span>
        resourceAllocations: <span id="CO154-2"><!--Empty--></span><span class="callout">2</span>
          limits:
            cpu: "1"
            memory: 1024Mi
          requests:
            cpu: 200m
            memory: 256Mi</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO154-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the node selector to be supplied to Velero podSpec.
									</div></dd><dt><a href="#CO154-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">resourceAllocations</code> listed are for average usage.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="oadp-self-signed-certificate_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h4 class="title">15.1.3.2. Enabling self-signed CA certificates</h4></div></div></div><p>
						You must enable a self-signed CA certificate for object storage by editing the <code class="literal">DataProtectionApplication</code> custom resource (CR) manifest to prevent a <code class="literal">certificate signed by unknown authority</code> error.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must have the OpenShift API for Data Protection (OADP) Operator installed.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">spec.backupLocations.velero.objectStorage.caCert</code> parameter and <code class="literal">spec.backupLocations.velero.config</code> parameters of the <code class="literal">DataProtectionApplication</code> CR manifest:
							</p><pre class="programlisting language-yaml">apiVersion: oadp.openshift.io/v1alpha1
kind: DataProtectionApplication
metadata:
  name: &lt;dpa_sample&gt;
spec:
...
  backupLocations:
    - name: default
      velero:
        provider: aws
        default: true
        objectStorage:
          bucket: &lt;bucket&gt;
          prefix: &lt;prefix&gt;
          caCert: &lt;base64_encoded_cert_string&gt; <span id="CO155-1"><!--Empty--></span><span class="callout">1</span>
        config:
          insecureSkipTLSVerify: "false" <span id="CO155-2"><!--Empty--></span><span class="callout">2</span>
...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO155-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Specify the Base64-encoded CA certificate string.
									</div></dd><dt><a href="#CO155-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										The <code class="literal">insecureSkipTLSVerify</code> configuration can be set to either <code class="literal">"true"</code> or <code class="literal">"false"</code>. If set to <code class="literal">"true"</code>, SSL/TLS security is disabled. If set to <code class="literal">"false"</code>, SSL/TLS security is enabled.
									</div></dd></dl></div></li></ul></div></section></section><section class="section" id="oadp-installing-dpa_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h3 class="title">15.1.4. Installing the Data Protection Application</h3></div></div></div><p>
					You install the Data Protection Application (DPA) by creating an instance of the <code class="literal">DataProtectionApplication</code> API.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must install the OADP Operator.
						</li><li class="listitem">
							You must configure object storage as a backup location.
						</li><li class="listitem">
							If you use snapshots to back up PVs, your cloud provider must support either a native snapshot API or Container Storage Interface (CSI) snapshots.
						</li><li class="listitem">
							If the backup and snapshot locations use the same credentials, you must create a <code class="literal">Secret</code> with the default name, <code class="literal">cloud-credentials</code>.
						</li><li class="listitem"><p class="simpara">
							If the backup and snapshot locations use different credentials, you must create two <code class="literal">Secrets</code>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">Secret</code> with a custom name for the backup location. You add this <code class="literal">Secret</code> to the <code class="literal">DataProtectionApplication</code> CR.
								</li><li class="listitem"><p class="simpara">
									<code class="literal">Secret</code> with the default name, <code class="literal">cloud-credentials</code>, for the snapshot location. This <code class="literal">Secret</code> is not referenced in the <code class="literal">DataProtectionApplication</code> CR.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you do not want to specify backup or snapshot locations during the installation, you can create a default <code class="literal">Secret</code> with an empty <code class="literal">credentials-velero</code> file. If there is no default <code class="literal">Secret</code>, the installation will fail.
									</p></div></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> and select the OADP Operator.
						</li><li class="listitem">
							Under <span class="strong strong"><strong>Provided APIs</strong></span>, click <span class="strong strong"><strong>Create instance</strong></span> in the <span class="strong strong"><strong>DataProtectionApplication</strong></span> box.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>YAML View</strong></span> and update the parameters of the <code class="literal">DataProtectionApplication</code> manifest:
						</p><pre class="programlisting language-yaml">apiVersion: oadp.openshift.io/v1alpha1
kind: DataProtectionApplication
metadata:
  name: &lt;dpa_sample&gt;
  namespace: openshift-adp
spec:
  configuration:
    velero:
      defaultPlugins:
        - kubevirt <span id="CO156-1"><!--Empty--></span><span class="callout">1</span>
        - gcp <span id="CO156-2"><!--Empty--></span><span class="callout">2</span>
        - csi <span id="CO156-3"><!--Empty--></span><span class="callout">3</span>
        - openshift <span id="CO156-4"><!--Empty--></span><span class="callout">4</span>
      resourceTimeout: 10m <span id="CO156-5"><!--Empty--></span><span class="callout">5</span>
    restic:
      enable: true <span id="CO156-6"><!--Empty--></span><span class="callout">6</span>
      podConfig:
        nodeSelector: &lt;node_selector&gt; <span id="CO156-7"><!--Empty--></span><span class="callout">7</span>
  backupLocations:
    - velero:
        provider: gcp <span id="CO156-8"><!--Empty--></span><span class="callout">8</span>
        default: true
        credential:
          key: cloud
          name: &lt;default_secret&gt; <span id="CO156-9"><!--Empty--></span><span class="callout">9</span>
        objectStorage:
          bucket: &lt;bucket_name&gt; <span id="CO156-10"><!--Empty--></span><span class="callout">10</span>
          prefix: &lt;prefix&gt; <span id="CO156-11"><!--Empty--></span><span class="callout">11</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO156-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The <code class="literal">kubevirt</code> plugin is mandatory for OpenShift Virtualization.
								</div></dd><dt><a href="#CO156-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Specify the plugin for the backup provider, for example, <code class="literal">gcp</code>, if it exists.
								</div></dd><dt><a href="#CO156-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The <code class="literal">csi</code> plugin is mandatory for backing up PVs with CSI snapshots. The <code class="literal">csi</code> plugin uses the <a class="link" href="https://velero.io/docs/main/csi/">Velero CSI beta snapshot APIs</a>. You do not need to configure a snapshot location.
								</div></dd><dt><a href="#CO156-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The <code class="literal">openshift</code> plugin is mandatory.
								</div></dd><dt><a href="#CO156-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									Specify how many minutes to wait for several Velero resources before timeout occurs, such as Velero CRD availability, volumeSnapshot deletion, and backup repository availability. The default is 10m.
								</div></dd><dt><a href="#CO156-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									Set to <code class="literal">false</code>, if you want to disable the Restic installation. Restic deploys a daemon set, which means that each worker node has <code class="literal">Restic</code> pods running. You can configure Restic for backups by adding <code class="literal">spec.defaultVolumesToRestic: true</code> to the <code class="literal">Backup</code> CR.
								</div></dd><dt><a href="#CO156-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									Specify on which nodes Restic is available. By default, Restic runs on all nodes.
								</div></dd><dt><a href="#CO156-8"><span class="callout">8</span></a> </dt><dd><div class="para">
									Specify the backup provider.
								</div></dd><dt><a href="#CO156-9"><span class="callout">9</span></a> </dt><dd><div class="para">
									Specify the correct default name for the <code class="literal">Secret</code>, for example, <code class="literal">cloud-credentials-gcp</code>, if you use a default plugin for the backup provider. If specifying a custom name, then the custom name is used for the backup location. If you do not specify a <code class="literal">Secret</code> name, the default name is used.
								</div></dd><dt><a href="#CO156-10"><span class="callout">10</span></a> </dt><dd><div class="para">
									Specify a bucket as the backup storage location. If the bucket is not a dedicated bucket for Velero backups, you must specify a prefix.
								</div></dd><dt><a href="#CO156-11"><span class="callout">11</span></a> </dt><dd><div class="para">
									Specify a prefix for Velero backups, for example, <code class="literal">velero</code>, if the bucket is used for multiple purposes.
								</div></dd></dl></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Verify the installation by viewing the OADP resources:
						</p><pre class="programlisting language-terminal">$ oc get all -n openshift-adp</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="screen">NAME                                                     READY   STATUS    RESTARTS   AGE
pod/oadp-operator-controller-manager-67d9494d47-6l8z8    2/2     Running   0          2m8s
pod/restic-9cq4q                                         1/1     Running   0          94s
pod/restic-m4lts                                         1/1     Running   0          94s
pod/restic-pv4kr                                         1/1     Running   0          95s
pod/velero-588db7f655-n842v                              1/1     Running   0          95s

NAME                                                       TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
service/oadp-operator-controller-manager-metrics-service   ClusterIP   172.30.70.140    &lt;none&gt;        8443/TCP   2m8s

NAME                    DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
daemonset.apps/restic   3         3         3       3            3           &lt;none&gt;          96s

NAME                                                READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/oadp-operator-controller-manager    1/1     1            1           2m9s
deployment.apps/velero                              1/1     1            1           96s

NAME                                                           DESIRED   CURRENT   READY   AGE
replicaset.apps/oadp-operator-controller-manager-67d9494d47    1         1         1       2m9s
replicaset.apps/velero-588db7f655                              1         1         1       96s</pre>

							</p></div></li></ol></div><section class="section" id="oadp-enabling-csi-dpa_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h4 class="title">15.1.4.1. Enabling CSI in the DataProtectionApplication CR</h4></div></div></div><p>
						You enable the Container Storage Interface (CSI) in the <code class="literal">DataProtectionApplication</code> custom resource (CR) in order to back up persistent volumes with CSI snapshots.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The cloud provider must support CSI snapshots.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">DataProtectionApplication</code> CR, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: oadp.openshift.io/v1alpha1
kind: DataProtectionApplication
...
spec:
  configuration:
    velero:
      defaultPlugins:
      - openshift
      - csi <span id="CO157-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO157-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Add the <code class="literal">csi</code> default plugin.
									</div></dd></dl></div></li></ul></div></section></section><section class="section" id="uninstalling-oadp_virt-installing-configuring-oadp"><div class="titlepage"><div><div><h3 class="title">15.1.5. Uninstalling OADP</h3></div></div></div><p>
					You uninstall the OpenShift API for Data Protection (OADP) by deleting the OADP Operator. See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/operators/#olm-deleting-operators-from-cluster">Deleting Operators from a cluster</a> for details.
				</p></section></section><section class="section" id="virt-backup-restore-overview"><div class="titlepage"><div><div><h2 class="title">15.2. Backing up and restoring virtual machines</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					OADP for OpenShift Virtualization is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
				</p></div></div><p>
				You back up and restore virtual machines by using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#application-backup-restore-operations-overview">OpenShift API for Data Protection (OADP)</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Install the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#about-installing-oadp">OADP Operator</a> according to the instructions for your storage provider.
					</li><li class="listitem">
						Install the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#oadp-installing-dpa_installing-oadp-ocs">Data Protection Application</a> with the <code class="literal">kubevirt</code> and <code class="literal">openshift</code> <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#oadp-plugins_oadp-features-plugins">plugins</a>.
					</li><li class="listitem">
						Back up virtual machines by creating a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#backing-up-applications"><code class="literal">Backup</code> custom resource (CR)</a>.
					</li><li class="listitem">
						Restore the <code class="literal">Backup</code> CR by creating a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#restoring-applications"><code class="literal">Restore</code> CR</a>.
					</li></ol></div><section class="section _additional-resources" id="additional-resources_virt-backup-restore-overview"><div class="titlepage"><div><div><h3 class="title">15.2.1. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#oadp-features-plugins">OADP features and plugins</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#troubleshooting">Troubleshooting</a>
						</li></ul></div></section></section><section class="section" id="virt-backing-up-vms"><div class="titlepage"><div><div><h2 class="title">15.3. Backing up virtual machines</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					OADP for OpenShift Virtualization is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
				</p></div></div><p>
				You back up virtual machines (VMs) by creating an OpenShift API for Data Protection (OADP) <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-creating-backup-cr_virt-backing-up-vms"><code class="literal">Backup</code> custom resource (CR)</a>.
			</p><p>
				The <code class="literal">Backup</code> CR performs the following actions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Backs up OpenShift Virtualization resources by creating an archive file on S3-compatible object storage, such as <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/backup_and_restore/#installing-oadp-mcg">Multicloud Object Gateway</a>, Noobaa, or Minio.
					</li><li class="listitem"><p class="simpara">
						Backs up VM disks by using one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-backing-up-pvs-csi_virt-backing-up-vms">Container Storage Interface (CSI) snapshots</a> on CSI-enabled cloud storage, such as Ceph RBD or Ceph FS.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-backing-up-applications-restic_virt-backing-up-vms">Restic file system backups</a> on object storage.
							</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					OADP provides backup hooks to freeze the VM file system before the backup operation and unfreeze it when the backup is complete.
				</p><p>
					The <code class="literal">kubevirt-controller</code> creates the <code class="literal">virt-launcher</code> pods with annotations that enable Velero to run the <code class="literal">virt-freezer</code> binary before and after the backup operation.
				</p><p>
					The <code class="literal">freeze</code> and <code class="literal">unfreeze</code> APIs are subresources of the VM snapshot API. See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#virt-about-vm-snapshots_virt-managing-vm-snapshots">About virtual machine snapshots</a> for details.
				</p></div></div><p>
				You can add <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-creating-backup-hooks_virt-backing-up-vms">hooks</a> to the <code class="literal">Backup</code> CR to run commands on specific VMs before or after the backup operation.
			</p><p>
				You schedule a backup by creating a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-scheduling-backups_virt-backing-up-vms"><code class="literal">Schedule</code> CR</a> instead of a <code class="literal">Backup</code> CR.
			</p><section class="section" id="oadp-creating-backup-cr_virt-backing-up-vms"><div class="titlepage"><div><div><h3 class="title">15.3.1. Creating a Backup CR</h3></div></div></div><p>
					You back up Kubernetes images, internal images, and persistent volumes (PVs) by creating a <code class="literal">Backup</code> custom resource (CR).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must install the OpenShift API for Data Protection (OADP) Operator.
						</li><li class="listitem">
							The <code class="literal">DataProtectionApplication</code> CR must be in a <code class="literal">Ready</code> state.
						</li><li class="listitem"><p class="simpara">
							Backup location prerequisites:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									You must have S3 object storage configured for Velero.
								</li><li class="listitem">
									You must have a backup location configured in the <code class="literal">DataProtectionApplication</code> CR.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Snapshot location prerequisites:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Your cloud provider must have a native snapshot API or support Container Storage Interface (CSI) snapshots.
								</li><li class="listitem">
									For CSI snapshots, you must create a <code class="literal">VolumeSnapshotClass</code> CR to register the CSI driver.
								</li><li class="listitem">
									You must have a volume location configured in the <code class="literal">DataProtectionApplication</code> CR.
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Retrieve the <code class="literal">backupStorageLocations</code> CRs by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc get backupStorageLocations -n openshift-adp</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAMESPACE       NAME              PHASE       LAST VALIDATED   AGE   DEFAULT
openshift-adp   velero-sample-1   Available   11s              31m</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">Backup</code> CR, as in the following example:
						</p><pre class="programlisting language-yaml">apiVersion: velero.io/v1
kind: Backup
metadata:
  name: &lt;backup&gt;
  labels:
    velero.io/storage-location: default
  namespace: openshift-adp
spec:
  hooks: {}
  includedNamespaces:
  - &lt;namespace&gt; <span id="CO158-1"><!--Empty--></span><span class="callout">1</span>
  includedResources: [] <span id="CO158-2"><!--Empty--></span><span class="callout">2</span>
  excludedResources: [] <span id="CO158-3"><!--Empty--></span><span class="callout">3</span>
  storageLocation: &lt;velero-sample-1&gt; <span id="CO158-4"><!--Empty--></span><span class="callout">4</span>
  ttl: 720h0m0s
  labelSelector: <span id="CO158-5"><!--Empty--></span><span class="callout">5</span>
    matchLabels:
      app=&lt;label_1&gt;
      app=&lt;label_2&gt;
      app=&lt;label_3&gt;
  orLabelSelectors: <span id="CO158-6"><!--Empty--></span><span class="callout">6</span>
  - matchLabels:
      app=&lt;label_1&gt;
      app=&lt;label_2&gt;
      app=&lt;label_3&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO158-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Specify an array of namespaces to back up.
								</div></dd><dt><a href="#CO158-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Optional: Specify an array of resources to include in the backup. Resources might be shortcuts (for example, 'po' for 'pods') or fully-qualified. If unspecified, all resources are included.
								</div></dd><dt><a href="#CO158-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Optional: Specify an array of resources to exclude from the backup. Resources might be shortcuts (for example, 'po' for 'pods') or fully-qualified.
								</div></dd><dt><a href="#CO158-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									Specify the name of the <code class="literal">backupStorageLocations</code> CR.
								</div></dd><dt><a href="#CO158-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									Map of {key,value} pairs of backup resources that have <span class="strong strong"><strong>all</strong></span> of the specified labels.
								</div></dd><dt><a href="#CO158-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									Map of {key,value} pairs of backup resources that have <span class="strong strong"><strong>one or more</strong></span> of the specified labels.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Verify that the status of the <code class="literal">Backup</code> CR is <code class="literal">Completed</code>:
						</p><pre class="programlisting language-terminal">$ oc get backup -n openshift-adp &lt;backup&gt; -o jsonpath='{.status.phase}'</pre></li></ol></div><section class="section" id="oadp-backing-up-pvs-csi_virt-backing-up-vms"><div class="titlepage"><div><div><h4 class="title">15.3.1.1. Backing up persistent volumes with CSI snapshots</h4></div></div></div><p>
						You back up persistent volumes with Container Storage Interface (CSI) snapshots by editing the <code class="literal">VolumeSnapshotClass</code> custom resource (CR) of the cloud storage before you create the <code class="literal">Backup</code> CR.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The cloud provider must support CSI snapshots.
							</li><li class="listitem">
								You must enable CSI in the <code class="literal">DataProtectionApplication</code> CR.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Add the <code class="literal">metadata.labels.velero.io/csi-volumesnapshot-class: "true"</code> key-value pair to the <code class="literal">VolumeSnapshotClass</code> CR:
							</p><pre class="programlisting language-yaml">apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotClass
metadata:
  name: &lt;volume_snapshot_class_name&gt;
  labels:
    velero.io/csi-volumesnapshot-class: "true"
driver: &lt;csi_driver&gt;
deletionPolicy: Retain</pre></li></ul></div><p>
						You can now create a <code class="literal">Backup</code> CR.
					</p></section><section class="section" id="oadp-backing-up-applications-restic_virt-backing-up-vms"><div class="titlepage"><div><div><h4 class="title">15.3.1.2. Backing up applications with Restic</h4></div></div></div><p>
						You back up Kubernetes resources, internal images, and persistent volumes with Restic by editing the <code class="literal">Backup</code> custom resource (CR).
					</p><p>
						You do not need to specify a snapshot location in the <code class="literal">DataProtectionApplication</code> CR.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Restic does not support backing up <code class="literal">hostPath</code> volumes. For more information, see <a class="link" href="https://velero.io/docs/v1.11/restic/#limitations">additional Restic limitations</a>.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must install the OpenShift API for Data Protection (OADP) Operator.
							</li><li class="listitem">
								You must not disable the default Restic installation by setting <code class="literal">spec.configuration.restic.enable</code> to <code class="literal">false</code> in the <code class="literal">DataProtectionApplication</code> CR.
							</li><li class="listitem">
								The <code class="literal">DataProtectionApplication</code> CR must be in a <code class="literal">Ready</code> state.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">Backup</code> CR, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: velero.io/v1
kind: Backup
metadata:
  name: &lt;backup&gt;
  labels:
    velero.io/storage-location: default
  namespace: openshift-adp
spec:
  defaultVolumesToRestic: true <span id="CO159-1"><!--Empty--></span><span class="callout">1</span>
...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO159-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Add <code class="literal">defaultVolumesToRestic: true</code> to the <code class="literal">spec</code> block.
									</div></dd></dl></div></li></ul></div></section><section class="section" id="oadp-creating-backup-hooks_virt-backing-up-vms"><div class="titlepage"><div><div><h4 class="title">15.3.1.3. Creating backup hooks</h4></div></div></div><p>
						You create backup hooks to run commands in a container in a pod by editing the <code class="literal">Backup</code> custom resource (CR).
					</p><p>
						<span class="emphasis"><em>Pre</em></span> hooks run before the pod is backed up. <span class="emphasis"><em>Post</em></span> hooks run after the backup.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Add a hook to the <code class="literal">spec.hooks</code> block of the <code class="literal">Backup</code> CR, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: velero.io/v1
kind: Backup
metadata:
  name: &lt;backup&gt;
  namespace: openshift-adp
spec:
  hooks:
    resources:
      - name: &lt;hook_name&gt;
        includedNamespaces:
        - &lt;namespace&gt; <span id="CO160-1"><!--Empty--></span><span class="callout">1</span>
        excludedNamespaces: <span id="CO160-2"><!--Empty--></span><span class="callout">2</span>
        - &lt;namespace&gt;
        includedResources: []
        - pods <span id="CO160-3"><!--Empty--></span><span class="callout">3</span>
        excludedResources: [] <span id="CO160-4"><!--Empty--></span><span class="callout">4</span>
        labelSelector: <span id="CO160-5"><!--Empty--></span><span class="callout">5</span>
          matchLabels:
            app: velero
            component: server
        pre: <span id="CO160-6"><!--Empty--></span><span class="callout">6</span>
          - exec:
              container: &lt;container&gt; <span id="CO160-7"><!--Empty--></span><span class="callout">7</span>
              command:
              - /bin/uname <span id="CO160-8"><!--Empty--></span><span class="callout">8</span>
              - -a
              onError: Fail <span id="CO160-9"><!--Empty--></span><span class="callout">9</span>
              timeout: 30s <span id="CO160-10"><!--Empty--></span><span class="callout">10</span>
        post: <span id="CO160-11"><!--Empty--></span><span class="callout">11</span>
...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO160-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Optional: You can specify namespaces to which the hook applies. If this value is not specified, the hook applies to all namespaces.
									</div></dd><dt><a href="#CO160-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Optional: You can specify namespaces to which the hook does not apply.
									</div></dd><dt><a href="#CO160-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Currently, pods are the only supported resource that hooks can apply to.
									</div></dd><dt><a href="#CO160-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optional: You can specify resources to which the hook does not apply.
									</div></dd><dt><a href="#CO160-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: This hook only applies to objects matching the label. If this value is not specified, the hook applies to all namespaces.
									</div></dd><dt><a href="#CO160-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										Array of hooks to run before the backup.
									</div></dd><dt><a href="#CO160-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										Optional: If the container is not specified, the command runs in the first container in the pod.
									</div></dd><dt><a href="#CO160-8"><span class="callout">8</span></a> </dt><dd><div class="para">
										This is the entrypoint for the init container being added.
									</div></dd><dt><a href="#CO160-9"><span class="callout">9</span></a> </dt><dd><div class="para">
										Allowed values for error handling are <code class="literal">Fail</code> and <code class="literal">Continue</code>. The default is <code class="literal">Fail</code>.
									</div></dd><dt><a href="#CO160-10"><span class="callout">10</span></a> </dt><dd><div class="para">
										Optional: How long to wait for the commands to run. The default is <code class="literal">30s</code>.
									</div></dd><dt><a href="#CO160-11"><span class="callout">11</span></a> </dt><dd><div class="para">
										This block defines an array of hooks to run after the backup, with the same parameters as the pre-backup hooks.
									</div></dd></dl></div></li></ul></div></section></section><section class="section" id="oadp-scheduling-backups_virt-backing-up-vms"><div class="titlepage"><div><div><h3 class="title">15.3.2. Scheduling backups</h3></div></div></div><p>
					You schedule backups by creating a <code class="literal">Schedule</code> custom resource (CR) instead of a <code class="literal">Backup</code> CR.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Leave enough time in your backup schedule for a backup to finish before another backup is created.
					</p><p>
						For example, if a backup of a namespace typically takes 10 minutes, do not schedule backups more frequently than every 15 minutes.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must install the OpenShift API for Data Protection (OADP) Operator.
						</li><li class="listitem">
							The <code class="literal">DataProtectionApplication</code> CR must be in a <code class="literal">Ready</code> state.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Retrieve the <code class="literal">backupStorageLocations</code> CRs:
						</p><pre class="programlisting language-terminal">$ oc get backupStorageLocations -n openshift-adp</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAMESPACE       NAME              PHASE       LAST VALIDATED   AGE   DEFAULT
openshift-adp   velero-sample-1   Available   11s              31m</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">Schedule</code> CR, as in the following example:
						</p><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: &lt;schedule&gt;
  namespace: openshift-adp
spec:
  schedule: 0 7 * * * <span id="CO161-1"><!--Empty--></span><span class="callout">1</span>
  template:
    hooks: {}
    includedNamespaces:
    - &lt;namespace&gt; <span id="CO161-2"><!--Empty--></span><span class="callout">2</span>
    storageLocation: &lt;velero-sample-1&gt; <span id="CO161-3"><!--Empty--></span><span class="callout">3</span>
    defaultVolumesToRestic: true <span id="CO161-4"><!--Empty--></span><span class="callout">4</span>
    ttl: 720h0m0s
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO161-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									<code class="literal">cron</code> expression to schedule the backup, for example, <code class="literal">0 7 * * *</code> to perform a backup every day at 7:00.
								</div></dd><dt><a href="#CO161-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Array of namespaces to back up.
								</div></dd><dt><a href="#CO161-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Name of the <code class="literal">backupStorageLocations</code> CR.
								</div></dd><dt><a href="#CO161-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									Optional: Add the <code class="literal">defaultVolumesToRestic: true</code> key-value pair if you are backing up volumes with Restic.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Verify that the status of the <code class="literal">Schedule</code> CR is <code class="literal">Completed</code> after the scheduled backup runs:
						</p><pre class="programlisting language-terminal">$ oc get schedule -n openshift-adp &lt;schedule&gt; -o jsonpath='{.status.phase}'</pre></li></ol></div></section><section class="section" id="additional-resources_virt-backing-up-vms"><div class="titlepage"><div><div><h3 class="title">15.3.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/storage/#persistent-storage-csi-snapshots-overview_persistent-storage-csi-snapshots">Overview of CSI volume snapshots</a>
						</li></ul></div></section></section><section class="section" id="virt-restoring-vms"><div class="titlepage"><div><div><h2 class="title">15.4. Restoring virtual machines</h2></div></div></div><p>
				You restore an OpenShift API for Data Protection (OADP) <code class="literal">Backup</code> custom resource (CR) by creating a <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-creating-restore-cr_virt-restoring-vms"><code class="literal">Restore</code> CR</a>.
			</p><p>
				You can add <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/virtualization/#oadp-creating-restore-hooks_virt-restoring-vms">hooks</a> to the <code class="literal">Restore</code> CR to run commands in init containers, before the application container starts, or in the application container itself.
			</p><section class="section" id="oadp-creating-restore-cr_virt-restoring-vms"><div class="titlepage"><div><div><h3 class="title">15.4.1. Creating a Restore CR</h3></div></div></div><p>
					You restore a <code class="literal">Backup</code> custom resource (CR) by creating a <code class="literal">Restore</code> CR.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must install the OpenShift API for Data Protection (OADP) Operator.
						</li><li class="listitem">
							The <code class="literal">DataProtectionApplication</code> CR must be in a <code class="literal">Ready</code> state.
						</li><li class="listitem">
							You must have a Velero <code class="literal">Backup</code> CR.
						</li><li class="listitem">
							Adjust the requested size so the persistent volume (PV) capacity matches the requested size at backup time.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">Restore</code> CR, as in the following example:
						</p><pre class="programlisting language-yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: &lt;restore&gt;
  namespace: openshift-adp
spec:
  backupName: &lt;backup&gt; <span id="CO162-1"><!--Empty--></span><span class="callout">1</span>
  includedResources: [] <span id="CO162-2"><!--Empty--></span><span class="callout">2</span>
  excludedResources:
  - nodes
  - events
  - events.events.k8s.io
  - backups.velero.io
  - restores.velero.io
  - resticrepositories.velero.io
  restorePVs: true <span id="CO162-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO162-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Name of the <code class="literal">Backup</code> CR.
								</div></dd><dt><a href="#CO162-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Optional: Specify an array of resources to include in the restore process. Resources might be shortcuts (for example, <code class="literal">po</code> for <code class="literal">pods</code>) or fully-qualified. If unspecified, all resources are included.
								</div></dd><dt><a href="#CO162-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Optional: The <code class="literal">restorePVs</code> parameter can be set to <code class="literal">false</code> in order to turn off restore of <code class="literal">PersistentVolumes</code> from <code class="literal">VolumeSnapshot</code> of Container Storage Interface (CSI) snapshots, or from native snapshots when <code class="literal">VolumeSnapshotLocation</code> is configured.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Verify that the status of the <code class="literal">Restore</code> CR is <code class="literal">Completed</code> by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc get restore -n openshift-adp &lt;restore&gt; -o jsonpath='{.status.phase}'</pre></li><li class="listitem"><p class="simpara">
							Verify that the backup resources have been restored by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc get all -n &lt;namespace&gt; <span id="CO163-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO163-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Namespace that you backed up.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							If you use Restic to restore <code class="literal">DeploymentConfig</code> objects or if you use post-restore hooks, run the <code class="literal">dc-restic-post-restore.sh</code> cleanup script by entering the following command:
						</p><pre class="programlisting language-terminal">$ bash dc-restic-post-restore.sh &lt;restore-name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In the course of the restore process, the OADP Velero plug-ins scale down the <code class="literal">DeploymentConfig</code> objects and restore the pods as standalone pods to prevent the cluster from deleting the restored <code class="literal">DeploymentConfig</code> pods immediately on restore and to allow Restic and post-restore hooks to complete their actions on the restored pods. The cleanup script removes these disconnected pods and scale any <code class="literal">DeploymentConfig</code> objects back up to the appropriate number of replicas.
							</p></div></div><div class="example" id="idm140196954175584"><p class="title"><strong>Example 15.1. <code class="literal">dc-restic-post-restore.sh</code> cleanup script</strong></p><div class="example-contents"><pre class="programlisting language-bash">#!/bin/bash
set -e

# if sha256sum exists, use it to check the integrity of the file
if command -v sha256sum &gt;/dev/null 2&gt;&amp;1; then
  CHECKSUM_CMD="sha256sum"
else
  CHECKSUM_CMD="shasum -a 256"
fi

label_name () {
    if [ "${#1}" -le "63" ]; then
	echo $1
	return
    fi
    sha=$(echo -n $1|$CHECKSUM_CMD)
    echo "${1:0:57}${sha:0:6}"
}

OADP_NAMESPACE=${OADP_NAMESPACE:=openshift-adp}

if [[ $# -ne 1 ]]; then
    echo "usage: ${BASH_SOURCE} restore-name"
    exit 1
fi

echo using OADP Namespace $OADP_NAMESPACE
echo restore: $1

label=$(label_name $1)
echo label: $label

echo Deleting disconnected restore pods
oc delete pods -l oadp.openshift.io/disconnected-from-dc=$label

for dc in $(oc get dc --all-namespaces -l oadp.openshift.io/replicas-modified=$label -o jsonpath='{range .items[*]}{.metadata.namespace}{","}{.metadata.name}{","}{.metadata.annotations.oadp\.openshift\.io/original-replicas}{","}{.metadata.annotations.oadp\.openshift\.io/original-paused}{"\n"}')
do
    IFS=',' read -ra dc_arr &lt;&lt;&lt; "$dc"
    if [ ${#dc_arr[0]} -gt 0 ]; then
	echo Found deployment ${dc_arr[0]}/${dc_arr[1]}, setting replicas: ${dc_arr[2]}, paused: ${dc_arr[3]}
	cat &lt;&lt;EOF | oc patch dc  -n ${dc_arr[0]} ${dc_arr[1]} --patch-file /dev/stdin
spec:
  replicas: ${dc_arr[2]}
  paused: ${dc_arr[3]}
EOF
    fi
done</pre></div></div></li></ol></div><section class="section" id="oadp-creating-restore-hooks_virt-restoring-vms"><div class="titlepage"><div><div><h4 class="title">15.4.1.1. Creating restore hooks</h4></div></div></div><p>
						You create restore hooks to run commands in a container in a pod while restoring your application by editing the <code class="literal">Restore</code> custom resource (CR).
					</p><p>
						You can create two types of restore hooks:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								An <code class="literal">init</code> hook adds an init container to a pod to perform setup tasks before the application container starts.
							</p><p class="simpara">
								If you restore a Restic backup, the <code class="literal">restic-wait</code> init container is added before the restore hook init container.
							</p></li><li class="listitem">
								An <code class="literal">exec</code> hook runs commands or scripts in a container of a restored pod.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Add a hook to the <code class="literal">spec.hooks</code> block of the <code class="literal">Restore</code> CR, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: velero.io/v1
kind: Restore
metadata:
  name: &lt;restore&gt;
  namespace: openshift-adp
spec:
  hooks:
    resources:
      - name: &lt;hook_name&gt;
        includedNamespaces:
        - &lt;namespace&gt; <span id="CO164-1"><!--Empty--></span><span class="callout">1</span>
        excludedNamespaces:
        - &lt;namespace&gt;
        includedResources:
        - pods <span id="CO164-2"><!--Empty--></span><span class="callout">2</span>
        excludedResources: []
        labelSelector: <span id="CO164-3"><!--Empty--></span><span class="callout">3</span>
          matchLabels:
            app: velero
            component: server
        postHooks:
        - init:
            initContainers:
            - name: restore-hook-init
              image: alpine:latest
              volumeMounts:
              - mountPath: /restores/pvc1-vm
                name: pvc1-vm
              command:
              - /bin/ash
              - -c
            timeout: <span id="CO164-4"><!--Empty--></span><span class="callout">4</span>
        - exec:
            container: &lt;container&gt; <span id="CO164-5"><!--Empty--></span><span class="callout">5</span>
            command:
            - /bin/bash <span id="CO164-6"><!--Empty--></span><span class="callout">6</span>
            - -c
            - "psql &lt; /backup/backup.sql"
            waitTimeout: 5m <span id="CO164-7"><!--Empty--></span><span class="callout">7</span>
            execTimeout: 1m <span id="CO164-8"><!--Empty--></span><span class="callout">8</span>
            onError: Continue <span id="CO164-9"><!--Empty--></span><span class="callout">9</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO164-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Optional: Array of namespaces to which the hook applies. If this value is not specified, the hook applies to all namespaces.
									</div></dd><dt><a href="#CO164-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Currently, pods are the only supported resource that hooks can apply to.
									</div></dd><dt><a href="#CO164-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Optional: This hook only applies to objects matching the label selector.
									</div></dd><dt><a href="#CO164-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										Optional: Timeout specifies the maximum amount of time Velero waits for <code class="literal">initContainers</code> to complete.
									</div></dd><dt><a href="#CO164-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										Optional: If the container is not specified, the command runs in the first container in the pod.
									</div></dd><dt><a href="#CO164-6"><span class="callout">6</span></a> </dt><dd><div class="para">
										This is the entrypoint for the init container being added.
									</div></dd><dt><a href="#CO164-7"><span class="callout">7</span></a> </dt><dd><div class="para">
										Optional: How long to wait for a container to become ready. This should be long enough for the container to start and for any preceding hooks in the same container to complete. If not set, the restore process waits indefinitely.
									</div></dd><dt><a href="#CO164-8"><span class="callout">8</span></a> </dt><dd><div class="para">
										Optional: How long to wait for the commands to run. The default is <code class="literal">30s</code>.
									</div></dd><dt><a href="#CO164-9"><span class="callout">9</span></a> </dt><dd><div class="para">
										Allowed values for error handling are <code class="literal">Fail</code> and <code class="literal">Continue</code>:
									</div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												<code class="literal">Continue</code>: Only command failures are logged.
											</li><li class="listitem">
												<code class="literal">Fail</code>: No more restore hooks run in any container in any pod. The status of the <code class="literal">Restore</code> CR will be <code class="literal">PartiallyFailed</code>.
											</li></ul></div></dd></dl></div></li></ul></div></section></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140196955811984"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                        <span class="status-description"></span>
                        <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>
                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                            <div id="privacy_policy">We've updated our <a href='http://www.redhat.com/en/about/privacy-policy' class='privacy-policy'>Privacy Statement</a> effective September 15, 2023.
                            </div>
                          </div>
                        </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="https://access.redhat.com/chrome_themes/nimbus/img/rh-summit-red-a.svg" alt="Red Hat Summit" /> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  </body>
</html>
