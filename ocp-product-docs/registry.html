<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/index" />
<meta property="og:title" content="Registry OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta property="og:description" content="This document provides instructions for configuring and managing the internal registry for OpenShift Container Platform. It also provides a general overview of registries associated with OpenShift Container Platform." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="This document provides instructions for configuring and managing the internal registry for OpenShift Container Platform. It also provides a general overview of registries associated with OpenShift Container Platform." />
<meta name="twitter:title" content="Registry OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/index" />
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="title" content="Registry OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="id" href="https://access.redhat.com/documentation/id-id/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="th" href="https://access.redhat.com/documentation/th-th/openshift_container_platform/4.13/html-single/registry/index" />
<link rel="alternate" hreflang="vi" href="https://access.redhat.com/documentation/vi-vn/openshift_container_platform/4.13/html-single/registry/index" />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="revision" product="b0738f19-59ac-47eb-9512-8a439cd6dfb0" title="de606fa7-9fb6-4b5e-8bd8-635c9b87e0b1" page="23153e76-77ca-4e1e-aacf-1d8b97d6ab29" revision="dccd48b1f252cc22dad43e9ae6252b9287d98ca1:en-us" body="8c7b5e16a98c8b6586c90a3c06db50c5.html" toc="f98be8d47c27adbe569c7ab8968a5da0.json" />

    <title>Registry OpenShift Container Platform 4.13 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />
<link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css" />

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/openshift_container_platform\/4.13\/html-single\/registry\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"d8ea0bce2d740dacbdfe0257cf55baa0e33f7fb8468a26d055ce75daaaa2d315"}}</script>
<script src="/sites/dxp-docs/files/js/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
  <script src="//www.redhat.com/dtm.js"></script><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-139-77b4fb8768-25dr9" />
<meta name="avalon-version" content="27861f77" />
<meta name="cp-chrome-build-date" content="2023-10-06T19:17:59.039Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "27861f77",
        builddate : "2023-10-06T19:17:59.039Z",        fetchdate : "2023-10-10T17:45:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico" /><link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap-grid.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/main.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/components.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/pages.css?v=27861f77" />

<link href="https://access.redhat.com/webassets/avalon/s/chosen.css?v=27861f77" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/pfe-navigation--lightdom.min.css" />
<!-- /cssInclude -->
<script src="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/ie-polyfills.js?v=27861f77"></script>

<script async>
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="https://access.redhat.com/webassets/avalon/j/lib/require.js?v=27861f77" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="https://access.redhat.com/chrome_themes/nimbus/js/new-nav.js?v=27861f77" ></script>
<!-- /CP_PRIMER_HEAD -->

  </head>
  <body>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#cp-main" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg" />
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linkType="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linkType="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="//www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linkType="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat&#039;s specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linkType="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="//redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linkType="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>                            <div>Or <a href="/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu">
                    <button class="pfe-navigation__secondary-link">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true"></pfe-icon>English
                    </button>

                    <pfe-navigation-dropdown dropdown-width="single">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en" data-analytics-text="English">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown>
                </div>                <rh-account-dropdown slot="account"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing" slot="main-menu__dropdown--product__product-listing" consistent-height>
                    <h3 slot="details-nav">Infrastructure and Management                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Cloud Computing                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Storage                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Runtimes                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Integration and Automation                    </h3>
                    <div slot="details">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linkType="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            </pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["OpenShift Container Platform","\/documentation\/en-us\/openshift_container_platform"],["4.13","\/documentation\/en-us\/openshift_container_platform\/4.13"],["Registry","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/registry"],["Registry","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/registry\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback class="hidden"></div>


    </div>
        <div class="container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer pvof-doc__content-wrapper__outer--css-not-removed">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container">
              <button class="j-sidebar__menu-trigger content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry" class="j-doc-nav__link ">
    Registry
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-overview-1" class="j-doc-nav__link j-doc-nav__link--has-children">
    1. OpenShift image registry overview
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1. OpenShift image registry overview"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1. OpenShift image registry overview"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#openshift-registry-common-terms_registry-overview" class="j-doc-nav__link ">
    1.1. Glossary of common terms for OpenShift image registry
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-integrated-openshift-registry_registry-overview" class="j-doc-nav__link ">
    1.2. Integrated OpenShift image registry
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-third-party-registries_registry-overview" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.3. Third-party registries
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.3. Third-party registries"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.3. Third-party registries"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#authentication_registry-overview" class="j-doc-nav__link j-doc-nav__link--has-children">
    1.3.1. Authentication
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "1.3.1. Authentication"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "1.3.1. Authentication"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-authentication_registry-overview" class="j-doc-nav__link ">
    1.3.1.1. Registry authentication with Podman
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-quay-overview_registry-overview" class="j-doc-nav__link ">
    1.4. Red Hat Quay registries
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-authentication-enabled-registry-overview_registry-overview" class="j-doc-nav__link ">
    1.5. Authentication enabled Red Hat registry
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Image Registry Operator in OpenShift Container Platform
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Image Registry Operator in OpenShift Container Platform"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Image Registry Operator in OpenShift Container Platform"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#image-registry-on-cloud" class="j-doc-nav__link ">
    2.1. Image Registry on cloud platforms and OpenStack
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#image-registry-on-bare-metal-vsphere" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.2. Image Registry on bare metal, Nutanix, and vSphere
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.2. Image Registry on bare metal, Nutanix, and vSphere"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.2. Image Registry on bare metal, Nutanix, and vSphere"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-removed_configuring-registry-operator" class="j-doc-nav__link ">
    2.2.1. Image registry removed during installation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-distribution-across-availability-zones_configuring-registry-operator" class="j-doc-nav__link ">
    2.3. Image Registry Operator distribution across availability zones
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#additional-resources" class="j-doc-nav__link ">
    2.4. Additional resources
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-configuration-resource-overview_configuring-registry-operator" class="j-doc-nav__link ">
    2.5. Image Registry Operator configuration parameters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-default-crd_configuring-registry-operator" class="j-doc-nav__link ">
    2.6. Enable the Image Registry default route with the Custom Resource Definition
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#images-configuration-cas_configuring-registry-operator" class="j-doc-nav__link ">
    2.7. Configuring additional trust stores for image registry access
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-config-resources-storage-credentials_configuring-registry-operator" class="j-doc-nav__link ">
    2.8. Configuring storage credentials for the Image Registry Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#additional-resources-2" class="j-doc-nav__link ">
    2.9. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#setting-up-and-configuring-the-registry" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Setting up and configuring the registry
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Setting up and configuring the registry"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Setting up and configuring the registry"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-aws-user-infrastructure" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.1. Configuring the registry for AWS user-provisioned infrastructure
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.1. Configuring the registry for AWS user-provisioned infrastructure"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.1. Configuring the registry for AWS user-provisioned infrastructure"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-config-resources-secret-aws_configuring-registry-storage-aws-user-infrastructure" class="j-doc-nav__link ">
    3.1.1. Configuring a secret for the Image Registry Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-aws-user-infra_configuring-registry-storage-aws-user-infrastructure" class="j-doc-nav__link ">
    3.1.2. Configuring registry storage for AWS with user-provisioned infrastructure
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-configuration-resource-overview-aws-s3_configuring-registry-storage-aws-user-infrastructure" class="j-doc-nav__link ">
    3.1.3. Image Registry Operator configuration parameters for AWS S3
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-gcp-user-infrastructure" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.2. Configuring the registry for GCP user-provisioned infrastructure
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.2. Configuring the registry for GCP user-provisioned infrastructure"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.2. Configuring the registry for GCP user-provisioned infrastructure"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-config-resources-secret-gcp_configuring-registry-storage-gcp-user-infrastructure" class="j-doc-nav__link ">
    3.2.1. Configuring a secret for the Image Registry Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-gcp-user-infra_configuring-registry-storage-gcp-user-infrastructure" class="j-doc-nav__link ">
    3.2.2. Configuring the registry storage for GCP with user-provisioned infrastructure
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-configuration-resource-overview-gcp-gcs_configuring-registry-storage-gcp-user-infrastructure" class="j-doc-nav__link ">
    3.2.3. Image Registry Operator configuration parameters for GCP GCS
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-openstack-user-infrastructure" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.3. Configuring the registry for OpenStack user-provisioned infrastructure
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.3. Configuring the registry for OpenStack user-provisioned infrastructure"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.3. Configuring the registry for OpenStack user-provisioned infrastructure"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-swift-trust_configuring-registry-storage-openstack-user-infrastructure" class="j-doc-nav__link ">
    3.3.1. Configuring the Image Registry Operator to trust Swift storage
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-config-resources-secret-openstack_configuring-registry-storage-openstack-user-infrastructure" class="j-doc-nav__link ">
    3.3.2. Configuring a secret for the Image Registry Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-openstack-user-infra_configuring-registry-storage-openstack-user-infrastructure" class="j-doc-nav__link ">
    3.3.3. Registry storage for RHOSP with user-provisioned infrastructure
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-configuration-resource-overview-openstack-swift_configuring-registry-storage-openstack-user-infrastructure" class="j-doc-nav__link ">
    3.3.4. Image Registry Operator configuration parameters for RHOSP Swift
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-azure-user-infrastructure" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.4. Configuring the registry for Azure user-provisioned infrastructure
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.4. Configuring the registry for Azure user-provisioned infrastructure"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.4. Configuring the registry for Azure user-provisioned infrastructure"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-operator-config-resources-secret-azure_configuring-registry-storage-azure-user-infrastructure" class="j-doc-nav__link ">
    3.4.1. Configuring a secret for the Image Registry Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-azure-user-infra_configuring-registry-storage-azure-user-infrastructure" class="j-doc-nav__link ">
    3.4.2. Configuring registry storage for Azure
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-azure-gov-cloud_configuring-registry-storage-azure-user-infrastructure" class="j-doc-nav__link ">
    3.4.3. Configuring registry storage for Azure Government
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-openstack" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.5. Configuring the registry for RHOSP
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.5. Configuring the registry for RHOSP"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.5. Configuring the registry for RHOSP"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-osp-creating-custom-pvc_configuring-registry-storage-openstack" class="j-doc-nav__link ">
    3.5.1. Configuring an image registry with custom storage on clusters that run on RHOSP
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-baremetal" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.6. Configuring the registry for bare metal
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.6. Configuring the registry for bare metal"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.6. Configuring the registry for bare metal"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-removed_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.1. Image registry removed during installation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-change-management-state_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.2. Changing the image registry’s management state
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-config_configuring-registry-storage-baremetal" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.6.3. Image registry storage configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.6.3. Image registry storage configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.6.3. Image registry storage configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-baremetal_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.3.1. Configuring registry storage for bare metal and other manual installations
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-non-production_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.3.2. Configuring storage for the image registry in non-production clusters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-block-recreate-rollout-bare-metal_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.3.3. Configuring block registry storage
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-baremetal" class="j-doc-nav__link ">
    3.6.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-baremetal-addtl-resources" class="j-doc-nav__link ">
    3.6.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-vsphere" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.7. Configuring the registry for vSphere
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.7. Configuring the registry for vSphere"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.7. Configuring the registry for vSphere"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-removed_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.1. Image registry removed during installation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-change-management-state_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.2. Changing the image registry’s management state
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-config_configuring-registry-storage-vsphere" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.7.3. Image registry storage configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.7.3. Image registry storage configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.7.3. Image registry storage configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-storage-vsphere_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.3.1. Configuring registry storage for VMware vSphere
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-non-production_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.3.2. Configuring storage for the image registry in non-production clusters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-block-recreate-rollout_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.3.3. Configuring block registry storage for VMware vSphere
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-vsphere" class="j-doc-nav__link ">
    3.7.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-vsphere-addtl-resources" class="j-doc-nav__link ">
    3.7.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-rhodf" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.8. Configuring the registry for Red Hat OpenShift Data Foundation
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.8. Configuring the registry for Red Hat OpenShift Data Foundation"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.8. Configuring the registry for Red Hat OpenShift Data Foundation"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-rhodf" class="j-doc-nav__link ">
    3.8.1. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-rhodf" class="j-doc-nav__link ">
    3.8.2. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-rhodf" class="j-doc-nav__link ">
    3.8.3. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-ocs" class="j-doc-nav__link ">
    3.8.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-nutanix" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.9. Configuring the registry for Nutanix
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.9. Configuring the registry for Nutanix"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.9. Configuring the registry for Nutanix"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-removed_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.1. Image registry removed during installation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-change-management-state_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.2. Changing the image registry’s management state
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-config_configuring-registry-storage-nutanix" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.9.3. Image registry storage configuration
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.9.3. Image registry storage configuration"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.9.3. Image registry storage configuration"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-nutanix_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.3.1. Configuring registry storage for Nutanix
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-non-production_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.3.2. Configuring storage for the image registry in non-production clusters
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#installation-registry-storage-block-recreate-rollout-nutanix_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.3.3. Configuring block registry storage for Nutanix volumes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-nutanix" class="j-doc-nav__link ">
    3.9.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#configuring-registry-storage-nutanix-addtl-resources" class="j-doc-nav__link ">
    3.9.5. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#accessing-the-registry" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Accessing the registry
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Accessing the registry"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Accessing the registry"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#prerequisites" class="j-doc-nav__link ">
    4.1. Prerequisites
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-accessing-directly_accessing-the-registry" class="j-doc-nav__link ">
    4.2. Accessing the registry directly from the cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#checking-the-status-of-registry-pods_accessing-the-registry" class="j-doc-nav__link ">
    4.3. Checking the status of the registry pods
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-viewing-logs_accessing-the-registry" class="j-doc-nav__link ">
    4.4. Viewing registry logs
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-accessing-metrics_accessing-the-registry" class="j-doc-nav__link ">
    4.5. Accessing registry metrics
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#accessing-the-registry-additional-resources" class="j-doc-nav__link ">
    4.6. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#securing-exposing-registry" class="j-doc-nav__link j-doc-nav__link--has-children">
    5. Exposing the registry
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "5. Exposing the registry"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "5. Exposing the registry"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-exposing-default-registry-manually_securing-exposing-registry" class="j-doc-nav__link ">
    5.1. Exposing a default registry manually
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#registry-exposing-secure-registry-manually_securing-exposing-registry" class="j-doc-nav__link ">
    5.2. Exposing a secure registry manually
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry#idm140294603208480" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/registry" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/registry" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/registry" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/registry" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/registry">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/registry">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/registry">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/registry"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/registry" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/registry/OpenShift_Container_Platform-4.13-Registry-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/registry">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/registry/OpenShift_Container_Platform-4.13-Registry-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner">
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/registry" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/registry" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/registry" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/registry" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/registry">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/registry">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/registry">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/registry"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/registry" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/registry/OpenShift_Container_Platform-4.13-Registry-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/registry">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/registry">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/registry/OpenShift_Container_Platform-4.13-Registry-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Registry</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140294604284400"><div class="titlepage"><div><div class="producttitle"><span class="productname">OpenShift Container Platform</span> <span class="productnumber">4.13</span></div><div><h2 class="subtitle">Configuring registries for OpenShift Container Platform </h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat OpenShift Documentation Team</span></div></div><div><a href="#idm140294603208480">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides instructions for configuring and managing the internal registry for OpenShift Container Platform. It also provides a general overview of registries associated with OpenShift Container Platform.
			</div></div></div></div><hr/></div><section class="chapter" id="registry-overview-1"><div class="titlepage"><div><div><h1 class="title">Chapter 1. OpenShift image registry overview</h1></div></div></div><p>
			OpenShift Container Platform can build images from your source code, deploy them, and manage their lifecycle. It provides an internal, integrated container image registry that can be deployed in your OpenShift Container Platform environment to locally manage images. This overview contains reference information and links for registries commonly used with OpenShift Container Platform, with a focus on the OpenShift image registry.
		</p><section class="section" id="openshift-registry-common-terms_registry-overview"><div class="titlepage"><div><div><h2 class="title">1.1. Glossary of common terms for OpenShift image registry</h2></div></div></div><p>
				This glossary defines the common terms that are used in the registry content.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">container</span></dt><dd>
							Lightweight and executable images that consist software and all its dependencies. Because containers virtualize the operating system, you can run containers in data center, a public or private cloud, or your local host.
						</dd><dt><span class="term">Image Registry Operator</span></dt><dd>
							The Image Registry Operator runs in the <code class="literal">openshift-image-registry</code> namespace, and manages the registry instance in that location.
						</dd><dt><span class="term">image repository</span></dt><dd>
							An image repository is a collection of related container images and tags identifying images.
						</dd><dt><span class="term">mirror registry</span></dt><dd>
							The mirror registry is a registry that holds the mirror of OpenShift Container Platform images.
						</dd><dt><span class="term">namespace</span></dt><dd>
							A namespace isolates groups of resources within a single cluster.
						</dd><dt><span class="term">pod</span></dt><dd>
							The pod is the smallest logical unit in Kubernetes. A pod is comprised of one or more containers to run in a worker node.
						</dd><dt><span class="term">private registry</span></dt><dd>
							A registry is a server that implements the container image registry API. A private registry is a registry that requires authentication to allow users access its contents.
						</dd><dt><span class="term">public registry</span></dt><dd>
							A registry is a server that implements the container image registry API. A public registry is a registry that serves its contently publicly.
						</dd><dt><span class="term">Quay.io</span></dt><dd>
							A public Red Hat Quay Container Registry instance provided and maintained by Red Hat, that serves most of the container images and Operators to OpenShift Container Platform clusters.
						</dd><dt><span class="term">OpenShift image registry</span></dt><dd>
							OpenShift image registry is the registry provided by OpenShift Container Platform to manage images.
						</dd><dt><span class="term">registry authentication</span></dt><dd>
							To push and pull images to and from private image repositories, the registry needs to authenticate its users with credentials.
						</dd><dt><span class="term">route</span></dt><dd>
							Exposes a service to allow for network access to pods from users and applications outside the OpenShift Container Platform instance.
						</dd><dt><span class="term">scale down</span></dt><dd>
							To decrease the number of replicas.
						</dd><dt><span class="term">scale up</span></dt><dd>
							To increase the number of replicas.
						</dd><dt><span class="term">service</span></dt><dd>
							A service exposes a running application on a set of pods.
						</dd></dl></div></section><section class="section" id="registry-integrated-openshift-registry_registry-overview"><div class="titlepage"><div><div><h2 class="title">1.2. Integrated OpenShift image registry</h2></div></div></div><p>
				OpenShift Container Platform provides a built-in container image registry that runs as a standard workload on the cluster. The registry is configured and managed by an infrastructure Operator. It provides an out-of-the-box solution for users to manage the images that run their workloads, and runs on top of the existing cluster infrastructure. This registry can be scaled up or down like any other cluster workload and does not require specific infrastructure provisioning. In addition, it is integrated into the cluster user authentication and authorization system, which means that access to create and retrieve images is controlled by defining user permissions on the image resources.
			</p><p>
				The registry is typically used as a publication target for images built on the cluster, as well as being a source of images for workloads running on the cluster. When a new image is pushed to the registry, the cluster is notified of the new image and other components can react to and consume the updated image.
			</p><p>
				Image data is stored in two locations. The actual image data is stored in a configurable storage location, such as cloud storage or a filesystem volume. The image metadata, which is exposed by the standard cluster APIs and is used to perform access control, is stored as standard API resources, specifically images and imagestreams.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-operator">Image Registry Operator in OpenShift Container Platform</a>
					</li></ul></div></section><section class="section" id="registry-third-party-registries_registry-overview"><div class="titlepage"><div><div><h2 class="title">1.3. Third-party registries</h2></div></div></div><p>
				OpenShift Container Platform can create containers using images from third-party registries, but it is unlikely that these registries offer the same image notification support as the integrated OpenShift image registry. In this situation, OpenShift Container Platform will fetch tags from the remote registry upon imagestream creation. To refresh the fetched tags, run <code class="literal">oc import-image &lt;stream&gt;</code>. When new images are detected, the previously described build and deployment reactions occur.
			</p><section class="section" id="authentication_registry-overview"><div class="titlepage"><div><div><h3 class="title">1.3.1. Authentication</h3></div></div></div><p>
					OpenShift Container Platform can communicate with registries to access private image repositories using credentials supplied by the user. This allows OpenShift Container Platform to push and pull images to and from private repositories.
				</p><section class="section" id="registry-authentication_registry-overview"><div class="titlepage"><div><div><h4 class="title">1.3.1.1. Registry authentication with Podman</h4></div></div></div><p>
						Some container image registries require access authorization. Podman is an open source tool for managing containers and container images and interacting with image registries. You can use Podman to authenticate your credentials, pull the registry image, and store local images in a local file system. The following is a generic example of authenticating the registry with Podman.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Use the <a class="link" href="https://catalog.redhat.com/software/containers/explore">Red Hat Ecosystem Catalog</a> to search for specific container images from the Red Hat Repository and select the required image.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Get this image</strong></span> to find the command for your container image.
							</li><li class="listitem"><p class="simpara">
								Log in by running the following command and entering your username and password to authenticate:
							</p><pre class="programlisting language-terminal">$ podman login registry.redhat.io
 Username:&lt;your_registry_account_username&gt;
 Password:&lt;your_registry_account_password&gt;</pre></li><li class="listitem"><p class="simpara">
								Download the image and save it locally by running the following command:
							</p><pre class="programlisting language-terminal">$ podman pull registry.redhat.io/&lt;repository_name&gt;</pre></li></ol></div></section></section></section><section class="section" id="registry-quay-overview_registry-overview"><div class="titlepage"><div><div><h2 class="title">1.4. Red Hat Quay registries</h2></div></div></div><p>
				If you need an enterprise-quality container image registry, Red Hat Quay is available both as a hosted service and as software you can install in your own data center or cloud environment. Advanced features in Red Hat Quay include geo-replication, image scanning, and the ability to roll back images.
			</p><p>
				Visit the <a class="link" href="https://quay.io">Quay.io</a> site to set up your own hosted Quay registry account. After that, follow the Quay Tutorial to log in to the Quay registry and start managing your images.
			</p><p>
				You can access your Red Hat Quay registry from OpenShift Container Platform like any remote container image registry.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/">Red Hat Quay product documentation</a>
					</li></ul></div></section><section class="section" id="registry-authentication-enabled-registry-overview_registry-overview"><div class="titlepage"><div><div><h2 class="title">1.5. Authentication enabled Red Hat registry</h2></div></div></div><p>
				All container images available through the Container images section of the Red Hat Ecosystem Catalog are hosted on an image registry, <code class="literal">registry.redhat.io</code>.
			</p><p>
				The registry, <code class="literal">registry.redhat.io</code>, requires authentication for access to images and hosted content on OpenShift Container Platform. Following the move to the new registry, the existing registry will be available for a period of time.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					OpenShift Container Platform pulls images from <code class="literal">registry.redhat.io</code>, so you must configure your cluster to use it.
				</p></div></div><p>
				The new registry uses standard OAuth mechanisms for authentication, with the following methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Authentication token.</strong></span> Tokens, which are generated by administrators, are service accounts that give systems the ability to authenticate against the container image registry. Service accounts are not affected by changes in user accounts, so the token authentication method is reliable and resilient. This is the only supported authentication option for production clusters.
					</li><li class="listitem">
						<span class="strong strong"><strong>Web username and password.</strong></span> This is the standard set of credentials you use to log in to resources such as <code class="literal">access.redhat.com</code>. While it is possible to use this authentication method with OpenShift Container Platform, it is not supported for production deployments. Restrict this authentication method to stand-alone projects outside OpenShift Container Platform.
					</li></ul></div><p>
				You can use <code class="literal">podman login</code> with your credentials, either username and password or authentication token, to access content on the new registry.
			</p><p>
				All imagestreams point to the new registry, which uses the installation pull secret to authenticate.
			</p><p>
				You must place your credentials in either of the following places:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong><code class="literal">openshift</code> namespace</strong></span>. Your credentials must exist in the <code class="literal">openshift</code> namespace so that the imagestreams in the <code class="literal">openshift</code> namespace can import.
					</li><li class="listitem">
						<span class="strong strong"><strong>Your host</strong></span>. Your credentials must exist on your host because Kubernetes uses the credentials from your host when it goes to pull images.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/terms-based-registry/">Registry service accounts</a>
					</li></ul></div></section></section><section class="chapter" id="configuring-registry-operator"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Image Registry Operator in OpenShift Container Platform</h1></div></div></div><section class="section" id="image-registry-on-cloud"><div class="titlepage"><div><div><h2 class="title">2.1. Image Registry on cloud platforms and OpenStack</h2></div></div></div><p>
				The Image Registry Operator installs a single instance of the OpenShift image registry, and manages all registry configuration, including setting up registry storage.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Storage is only automatically configured when you install an installer-provisioned infrastructure cluster on AWS, Azure, GCP, IBM, or OpenStack.
				</p><p>
					When you install or upgrade an installer-provisioned infrastructure cluster on AWS, Azure, GCP, IBM, or OpenStack, the Image Registry Operator sets the <code class="literal">spec.storage.managementState</code> parameter to <code class="literal">Managed</code>. If the <code class="literal">spec.storage.managementState</code> parameter is set to <code class="literal">Unmanaged</code>, the Image Registry Operator takes no action related to storage.
				</p></div></div><p>
				After the control plane deploys, the Operator creates a default <code class="literal">configs.imageregistry.operator.openshift.io</code> resource instance based on configuration detected in the cluster.
			</p><p>
				If insufficient information is available to define a complete <code class="literal">configs.imageregistry.operator.openshift.io</code> resource, the incomplete resource is defined and the Operator updates the resource status with information about what is missing.
			</p><p>
				The Image Registry Operator runs in the <code class="literal">openshift-image-registry</code> namespace, and manages the registry instance in that location as well. All configuration and workload resources for the registry reside in that namespace.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The Image Registry Operator’s behavior for managing the pruner is orthogonal to the <code class="literal">managementState</code> specified on the <code class="literal">ClusterOperator</code> object for the Image Registry Operator. If the Image Registry Operator is not in the <code class="literal">Managed</code> state, the image pruner can still be configured and managed by the <code class="literal">Pruning</code> custom resource.
				</p><p>
					However, the <code class="literal">managementState</code> of the Image Registry Operator alters the behavior of the deployed image pruner job:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">Managed</code>: the <code class="literal">--prune-registry</code> flag for the image pruner is set to <code class="literal">true</code>.
						</li><li class="listitem">
							<code class="literal">Removed</code>: the <code class="literal">--prune-registry</code> flag for the image pruner is set to <code class="literal">false</code>, meaning it only prunes image metatdata in etcd.
						</li></ul></div></div></div></section><section class="section" id="image-registry-on-bare-metal-vsphere"><div class="titlepage"><div><div><h2 class="title">2.2. Image Registry on bare metal, Nutanix, and vSphere</h2></div></div></div><section class="section" id="registry-removed_configuring-registry-operator"><div class="titlepage"><div><div><h3 class="title">2.2.1. Image registry removed during installation</h3></div></div></div><p>
					On platforms that do not provide shareable object storage, the OpenShift Image Registry Operator bootstraps itself as <code class="literal">Removed</code>. This allows <code class="literal">openshift-installer</code> to complete installations on these platform types.
				</p><p>
					After installation, you must edit the Image Registry Operator configuration to switch the <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p></section></section><section class="section" id="registry-operator-distribution-across-availability-zones_configuring-registry-operator"><div class="titlepage"><div><div><h2 class="title">2.3. Image Registry Operator distribution across availability zones</h2></div></div></div><p>
				The default configuration of the Image Registry Operator spreads image registry pods across topology zones to prevent delayed recovery times in case of a complete zone failure where all pods are impacted.
			</p><p>
				The Image Registry Operator defaults to the following when deployed with a zone-related topology constraint:
			</p><div class="formalpara"><p class="title"><strong>Image Registry Operator deployed with a zone related topology constraint</strong></p><p>
					
<pre class="programlisting language-yaml">  topologySpreadConstraints:
  - labelSelector:
      matchLabels:
        docker-registry: default
    maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: DoNotSchedule
  - labelSelector:
      matchLabels:
        docker-registry: default
    maxSkew: 1
    topologyKey: node-role.kubernetes.io/worker
    whenUnsatisfiable: DoNotSchedule
  - labelSelector:
      matchLabels:
        docker-registry: default
    maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: DoNotSchedule</pre>

				</p></div><p>
				The Image Registry Operator defaults to the following when deployed without a zone-related topology constraint, which applies to bare metal and vSphere instances:
			</p><div class="formalpara"><p class="title"><strong>Image Registry Operator deployed without a zone related topology constraint</strong></p><p>
					
<pre class="programlisting language-yaml"> topologySpreadConstraints:
  - labelSelector:
      matchLabels:
        docker-registry: default
    maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: DoNotSchedule
  - labelSelector:
      matchLabels:
        docker-registry: default
    maxSkew: 1
    topologyKey: node-role.kubernetes.io/worker
    whenUnsatisfiable: DoNotSchedule</pre>

				</p></div><p>
				A cluster administrator can override the default <code class="literal">topologySpreadConstraints</code> by configuring the <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code> spec file. In that case, only the constraints you provide apply.
			</p></section><section class="section _additional-resources" id="additional-resources"><div class="titlepage"><div><div><h2 class="title">2.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/nodes/#nodes-scheduler-pod-topology-spread-constraints">Configuring pod topology spread constraints</a>
					</li></ul></div></section><section class="section" id="registry-operator-configuration-resource-overview_configuring-registry-operator"><div class="titlepage"><div><div><h2 class="title">2.5. Image Registry Operator configuration parameters</h2></div></div></div><p>
				The <code class="literal">configs.imageregistry.operator.openshift.io</code> resource offers the following configuration parameters.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 27%; " class="col_1"><!--Empty--></col><col style="width: 73%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140294608539008" scope="col">Parameter</th><th align="left" valign="top" id="idm140294608537920" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">managementState</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								<code class="literal">Managed</code>: The Operator updates the registry as configuration resources are updated.
							</p>
							 <p>
								<code class="literal">Unmanaged</code>: The Operator ignores changes to the configuration resources.
							</p>
							 <p>
								<code class="literal">Removed</code>: The Operator removes the registry instance and tear down any storage that the Operator provisioned.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">logLevel</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Sets <code class="literal">logLevel</code> of the registry instance. Defaults to <code class="literal">Normal</code>.
							</p>
							 <p>
								The following values for <code class="literal">logLevel</code> are supported:
							</p>
							 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">Normal</code>
									</li><li class="listitem">
										<code class="literal">Debug</code>
									</li><li class="listitem">
										<code class="literal">Trace</code>
									</li><li class="listitem">
										<code class="literal">TraceAll</code>
									</li></ul></div>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">httpSecret</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Value needed by the registry to secure uploads, generated by default.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">operatorLogLevel</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								The <code class="literal">operatorLogLevel</code> configuration parameter provides intent-based logging for the Operator itself and a simple way to manage coarse-grained logging choices that Operators must interpret for themselves. This configuration parameter defaults to <code class="literal">Normal</code>. It does not provide fine-grained control.
							</p>
							 <p>
								The following values for <code class="literal">operatorLogLevel</code> are supported:
							</p>
							 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">Normal</code>
									</li><li class="listitem">
										<code class="literal">Debug</code>
									</li><li class="listitem">
										<code class="literal">Trace</code>
									</li><li class="listitem">
										<code class="literal">TraceAll</code>
									</li></ul></div>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">proxy</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Defines the Proxy to be used when calling master API and upstream registries.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">storage</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								<code class="literal">Storagetype</code>: Details for configuring registry storage, for example S3 bucket coordinates. Normally configured by default.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">readOnly</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Indicates whether the registry instance should reject attempts to push new images or delete existing ones.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">requests</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								API Request Limit details. Controls how many parallel requests a given registry instance will handle before queuing additional requests.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">defaultRoute</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Determines whether or not an external route is defined using the default hostname. If enabled, the route uses re-encrypt encryption. Defaults to <code class="literal">false</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">routes</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Array of additional routes to create. You provide the hostname and certificate for the route.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">rolloutStrategy</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Defines rollout strategy for the image registry deployment. Defaults to <code class="literal">RollingUpdate</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">replicas</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Replica count for the registry.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">disableRedirect</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								Controls whether to route all data through the registry, rather than redirecting to the back end. Defaults to <code class="literal">false</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140294608539008"> <p>
								<code class="literal">spec.storage.managementState</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140294608537920"> <p>
								The Image Registry Operator sets the <code class="literal">spec.storage.managementState</code> parameter to <code class="literal">Managed</code> on new installations or upgrades of clusters using installer-provisioned infrastructure on AWS or Azure.
							</p>
							 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										<code class="literal">Managed</code>: Determines that the Image Registry Operator manages underlying storage. If the Image Registry Operator’s <code class="literal">managementState</code> is set to <code class="literal">Removed</code>, then the storage is deleted.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												If the <code class="literal">managementState</code> is set to <code class="literal">Managed</code>, the Image Registry Operator attempts to apply some default configuration on the underlying storage unit. For example, if set to <code class="literal">Managed</code>, the Operator tries to enable encryption on the S3 bucket before making it available to the registry. If you do not want the default settings to be applied on the storage you are providing, make sure the <code class="literal">managementState</code> is set to <code class="literal">Unmanaged</code>.
											</li></ul></div></li><li class="listitem">
										<code class="literal">Unmanaged</code>: Determines that the Image Registry Operator ignores the storage settings. If the Image Registry Operator’s <code class="literal">managementState</code> is set to <code class="literal">Removed</code>, then the storage is not deleted. If you provided an underlying storage unit configuration, such as a bucket or container name, and the <code class="literal">spec.storage.managementState</code> is not yet set to any value, then the Image Registry Operator configures it to <code class="literal">Unmanaged</code>.
									</li></ul></div>
							 </td></tr></tbody></table></div></section><section class="section" id="registry-operator-default-crd_configuring-registry-operator"><div class="titlepage"><div><div><h2 class="title">2.6. Enable the Image Registry default route with the Custom Resource Definition</h2></div></div></div><p>
				In OpenShift Container Platform, the <code class="literal">Registry</code> Operator controls the OpenShift image registry feature. The Operator is defined by the <code class="literal">configs.imageregistry.operator.openshift.io</code> Custom Resource Definition (CRD).
			</p><p>
				If you need to automatically enable the Image Registry default route, patch the Image Registry Operator CRD.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Patch the Image Registry Operator CRD:
					</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io/cluster --type merge -p '{"spec":{"defaultRoute":true}}'</pre></li></ul></div></section><section class="section" id="images-configuration-cas_configuring-registry-operator"><div class="titlepage"><div><div><h2 class="title">2.7. Configuring additional trust stores for image registry access</h2></div></div></div><p>
				The <code class="literal">image.config.openshift.io/cluster</code> custom resource can contain a reference to a config map that contains additional certificate authorities to be trusted during image registry access.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The certificate authorities (CA) must be PEM-encoded.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					You can create a config map in the <code class="literal">openshift-config</code> namespace and use its name in <code class="literal">AdditionalTrustedCA</code> in the <code class="literal">image.config.openshift.io</code> custom resource to provide additional CAs that should be trusted when contacting external registries.
				</p></div><p>
				The config map key is the hostname of a registry with the port for which this CA is to be trusted, and the PEM certificate content is the value, for each additional registry CA to trust.
			</p><div class="formalpara"><p class="title"><strong>Image registry CA config map example</strong></p><p>
					
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: my-registry-ca
data:
  registry.example.com: |
    -----BEGIN CERTIFICATE-----
    ...
    -----END CERTIFICATE-----
  registry-with-port.example.com..5000: | <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>
    -----BEGIN CERTIFICATE-----
    ...
    -----END CERTIFICATE-----</pre>

				</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						If the registry has the port, such as <code class="literal">registry-with-port.example.com:5000</code>, <code class="literal">:</code> should be replaced with <code class="literal">..</code>.
					</div></dd></dl></div><p>
				You can configure additional CAs with the following procedure.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure an additional CA:
					</p><pre class="programlisting language-terminal">$ oc create configmap registry-config --from-file=&lt;external_registry_address&gt;=ca.crt -n openshift-config</pre><pre class="programlisting language-terminal">$ oc edit image.config.openshift.io cluster</pre><pre class="programlisting language-yaml">spec:
  additionalTrustedCA:
    name: registry-config</pre></li></ol></div></section><section class="section" id="registry-operator-config-resources-storage-credentials_configuring-registry-operator"><div class="titlepage"><div><div><h2 class="title">2.8. Configuring storage credentials for the Image Registry Operator</h2></div></div></div><p>
				In addition to the <code class="literal">configs.imageregistry.operator.openshift.io</code> and ConfigMap resources, storage credential configuration is provided to the Operator by a separate secret resource located within the <code class="literal">openshift-image-registry</code> namespace.
			</p><p>
				The <code class="literal">image-registry-private-configuration-user</code> secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create an OpenShift Container Platform secret that contains the required keys.
					</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=KEY1=value1 --from-literal=KEY2=value2 --namespace openshift-image-registry</pre></li></ul></div></section><section class="section _additional-resources" id="additional-resources-2"><div class="titlepage"><div><div><h2 class="title">2.9. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-storage-aws-user-infrastructure">Configuring the registry for AWS user-provisioned infrastructure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-storage-gcp-user-infrastructure">Configuring the registry for GCP user-provisioned infrastructure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-storage-azure-user-infrastructure">Configuring the registry for Azure user-provisioned infrastructure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-storage-baremetal">Configuring the registry for bare metal</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#configuring-registry-storage-vsphere">Configuring the registry for vSphere</a>
					</li></ul></div></section></section><section class="chapter" id="setting-up-and-configuring-the-registry"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Setting up and configuring the registry</h1></div></div></div><section class="section" id="configuring-registry-storage-aws-user-infrastructure"><div class="titlepage"><div><div><h2 class="title">3.1. Configuring the registry for AWS user-provisioned infrastructure</h2></div></div></div><section class="section" id="registry-operator-config-resources-secret-aws_configuring-registry-storage-aws-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.1.1. Configuring a secret for the Image Registry Operator</h3></div></div></div><p>
					In addition to the <code class="literal">configs.imageregistry.operator.openshift.io</code> and ConfigMap resources, configuration is provided to the Operator by a separate secret resource located within the <code class="literal">openshift-image-registry</code> namespace.
				</p><p>
					The <code class="literal">image-registry-private-configuration-user</code> secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.
				</p><p>
					For S3 on AWS storage, the secret is expected to contain two keys:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_S3_ACCESSKEY</code>
						</li><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_S3_SECRETKEY</code>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create an OpenShift Container Platform secret that contains the required keys.
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=myaccesskey --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=mysecretkey --namespace openshift-image-registry</pre></li></ul></div></section><section class="section" id="registry-configuring-storage-aws-user-infra_configuring-registry-storage-aws-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.1.2. Configuring registry storage for AWS with user-provisioned infrastructure</h3></div></div></div><p>
					During installation, your cloud credentials are sufficient to create an Amazon S3 bucket and the Registry Operator will automatically configure storage.
				</p><p>
					If the Registry Operator cannot create an S3 bucket and automatically configure storage, you can create an S3 bucket and configure storage with the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a cluster on AWS with user-provisioned infrastructure.
						</li><li class="listitem"><p class="simpara">
							For Amazon S3 storage, the secret is expected to contain two keys:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_S3_ACCESSKEY</code>
								</li><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_S3_SECRETKEY</code>
								</li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						Use the following procedure if the Registry Operator cannot create an S3 bucket and automatically configure storage.
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Set up a <a class="link" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html#mpu-abort-incomplete-mpu-lifecycle-config">Bucket Lifecycle Policy</a> to abort incomplete multipart uploads that are one day old.
						</li><li class="listitem"><p class="simpara">
							Fill in the storage configuration in <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code>:
						</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example configuration</strong></p><p>
								
<pre class="programlisting language-yaml">storage:
  s3:
    bucket: &lt;bucket-name&gt;
    region: &lt;region-name&gt;</pre>

							</p></div></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						To secure your registry images in AWS, <a class="link" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-publicaccessblockconfiguration.html">block public access</a> to the S3 bucket.
					</p></div></div></section><section class="section" id="registry-operator-configuration-resource-overview-aws-s3_configuring-registry-storage-aws-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.1.3. Image Registry Operator configuration parameters for AWS S3</h3></div></div></div><p>
					The following configuration parameters are available for AWS S3 registry storage.
				</p><p>
					The image registry <code class="literal">spec.storage.s3</code> configuration parameter holds the information to configure the registry to use the AWS S3 service for back-end storage. See the <a class="link" href="https://docs.docker.com/registry/storage-drivers/s3/">S3 storage driver documentation</a> for more information.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 27%; " class="col_1"><!--Empty--></col><col style="width: 73%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140294614209184" scope="col">Parameter</th><th align="left" valign="top" id="idm140294614208096" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">bucket</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									Bucket is the bucket name in which you want to store the registry’s data. It is optional and is generated if not provided.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">region</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									Region is the AWS region in which your bucket exists. It is optional and is set based on the installed AWS Region.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">regionEndpoint</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									RegionEndpoint is the endpoint for S3 compatible storage services. It is optional and defaults based on the Region that is provided.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">virtualHostedStyle</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									VirtualHostedStyle enables using S3 virtual hosted style bucket paths with a custom RegionEndpoint. It is optional and defaults to false.
								</p>
								 <p>
									Set this parameter to deploy OpenShift Container Platform to hidden regions.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">encrypt</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									Encrypt specifies whether or not the registry stores the image in encrypted format. It is optional and defaults to false.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">keyID</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									KeyID is the KMS key ID to use for encryption. It is optional. Encrypt must be true, or this parameter is ignored.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">cloudFront</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									CloudFront configures Amazon Cloudfront as the storage middleware in a registry. It is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614209184"> <p>
									<code class="literal">trustedCA</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614208096"> <p>
									The namespace for the config map referenced by <code class="literal">trustedCA</code> is <code class="literal">openshift-config</code>. The key for the bundle in the config map is <code class="literal">ca-bundle.crt</code>. It is optional.
								</p>
								 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When the value of the <code class="literal">regionEndpoint</code> parameter is configured to a URL of a Rados Gateway, an explicit port must not be specified. For example:
					</p><pre class="programlisting language-yaml">regionEndpoint: http://rook-ceph-rgw-ocs-storagecluster-cephobjectstore.openshift-storage.svc.cluster.local</pre></div></div></section></section><section class="section" id="configuring-registry-storage-gcp-user-infrastructure"><div class="titlepage"><div><div><h2 class="title">3.2. Configuring the registry for GCP user-provisioned infrastructure</h2></div></div></div><section class="section" id="registry-operator-config-resources-secret-gcp_configuring-registry-storage-gcp-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.2.1. Configuring a secret for the Image Registry Operator</h3></div></div></div><p>
					In addition to the <code class="literal">configs.imageregistry.operator.openshift.io</code> and ConfigMap resources, configuration is provided to the Operator by a separate secret resource located within the <code class="literal">openshift-image-registry</code> namespace.
				</p><p>
					The <code class="literal">image-registry-private-configuration-user</code> secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.
				</p><p>
					For GCS on GCP storage, the secret is expected to contain one key whose value is the contents of a credentials file provided by GCP:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_GCS_KEYFILE</code>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create an OpenShift Container Platform secret that contains the required keys.
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-file=REGISTRY_STORAGE_GCS_KEYFILE=&lt;path_to_keyfile&gt; --namespace openshift-image-registry</pre></li></ul></div></section><section class="section" id="registry-configuring-storage-gcp-user-infra_configuring-registry-storage-gcp-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.2.2. Configuring the registry storage for GCP with user-provisioned infrastructure</h3></div></div></div><p>
					If the Registry Operator cannot create a Google Cloud Platform (GCP) bucket, you must set up the storage medium manually and configure the settings in the registry custom resource (CR).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A cluster on GCP with user-provisioned infrastructure.
						</li><li class="listitem">
							To configure registry storage for GCP, you need to provide Registry Operator cloud credentials.
						</li><li class="listitem"><p class="simpara">
							For GCS on GCP storage, the secret is expected to contain one key whose value is the contents of a credentials file provided by GCP:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_GCS_KEYFILE</code>
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Set up an <a class="link" href="https://cloud.google.com/storage/docs/lifecycle">Object Lifecycle Management policy</a> to abort incomplete multipart uploads that are one day old.
						</li><li class="listitem"><p class="simpara">
							Fill in the storage configuration in <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code>:
						</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example configuration</strong></p><p>
								
<pre class="programlisting language-yaml"># ...
storage:
  gcs:
    bucket: &lt;bucket-name&gt;
    projectID: &lt;project-id&gt;
    region: &lt;region-name&gt;
# ...</pre>

							</p></div></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						You can secure your registry images that use a Google Cloud Storage bucket by setting <a class="link" href="https://cloud.google.com/storage/docs/using-public-access-prevention">public access prevention</a>.
					</p></div></div></section><section class="section" id="registry-operator-configuration-resource-overview-gcp-gcs_configuring-registry-storage-gcp-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.2.3. Image Registry Operator configuration parameters for GCP GCS</h3></div></div></div><p>
					The following configuration parameters are available for GCP GCS registry storage.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 27%; " class="col_1"><!--Empty--></col><col style="width: 73%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140294614175488" scope="col">Parameter</th><th align="left" valign="top" id="idm140294614174400" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140294614175488"> <p>
									<code class="literal">bucket</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614174400"> <p>
									Bucket is the bucket name in which you want to store the registry’s data. It is optional and is generated if not provided.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614175488"> <p>
									<code class="literal">region</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614174400"> <p>
									Region is the GCS location in which your bucket exists. It is optional and is set based on the installed GCS Region.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614175488"> <p>
									<code class="literal">projectID</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614174400"> <p>
									ProjectID is the Project ID of the GCP project that this bucket should be associated with. It is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294614175488"> <p>
									<code class="literal">keyID</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294614174400"> <p>
									KeyID is the KMS key ID to use for encryption. It is optional because buckets are encrypted by default on GCP. This allows for the use of a custom encryption key.
								</p>
								 </td></tr></tbody></table></div></section></section><section class="section" id="configuring-registry-storage-openstack-user-infrastructure"><div class="titlepage"><div><div><h2 class="title">3.3. Configuring the registry for OpenStack user-provisioned infrastructure</h2></div></div></div><p>
				You can configure the registry of a cluster that runs on your own Red Hat OpenStack Platform (RHOSP) infrastructure.
			</p><section class="section" id="registry-configuring-registry-storage-swift-trust_configuring-registry-storage-openstack-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.3.1. Configuring the Image Registry Operator to trust Swift storage</h3></div></div></div><p>
					You must configure the Image Registry Operator to trust Red Hat OpenStack Platform (RHOSP) Swift storage.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							From a command line, enter the following command to change the value of the <code class="literal">spec.disableRedirect</code> field in the <code class="literal">config.imageregistry</code> object to <code class="literal">true</code>:
						</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"disableRedirect":true}}'</pre></li></ul></div></section><section class="section" id="registry-operator-config-resources-secret-openstack_configuring-registry-storage-openstack-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.3.2. Configuring a secret for the Image Registry Operator</h3></div></div></div><p>
					In addition to the <code class="literal">configs.imageregistry.operator.openshift.io</code> and ConfigMap resources, configuration is provided to the Operator by a separate secret resource located within the <code class="literal">openshift-image-registry</code> namespace.
				</p><p>
					The <code class="literal">image-registry-private-configuration-user</code> secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.
				</p><p>
					For Swift on Red Hat OpenStack Platform (RHOSP) storage, the secret is expected to contain the following two keys:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_SWIFT_USER</code>
						</li><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_SWIFT_PASSWORD</code>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create an OpenShift Container Platform secret that contains the required keys.
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_SWIFT_USER=&lt;username&gt; --from-literal=REGISTRY_STORAGE_SWIFT_PASSWORD=&lt;password&gt; -n openshift-image-registry</pre></li></ul></div></section><section class="section" id="registry-configuring-storage-openstack-user-infra_configuring-registry-storage-openstack-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.3.3. Registry storage for RHOSP with user-provisioned infrastructure</h3></div></div></div><p>
					If the Registry Operator cannot create a Swift bucket, you must set up the storage medium manually and configure the settings in the registry custom resource (CR).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A cluster on Red Hat OpenStack Platform (RHOSP) with user-provisioned infrastructure.
						</li><li class="listitem">
							To configure registry storage for RHOSP, you need to provide Registry Operator cloud credentials.
						</li><li class="listitem"><p class="simpara">
							For Swift on RHOSP storage, the secret is expected to contain the following two keys:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_SWIFT_USER</code>
								</li><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_SWIFT_PASSWORD</code>
								</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Fill in the storage configuration in <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code>:
						</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example configuration</strong></p><p>
								
<pre class="programlisting language-yaml"># ...
storage:
  swift:
    container: &lt;container-id&gt;
# ...</pre>

							</p></div></li></ul></div></section><section class="section" id="registry-operator-configuration-resource-overview-openstack-swift_configuring-registry-storage-openstack-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.3.4. Image Registry Operator configuration parameters for RHOSP Swift</h3></div></div></div><p>
					The following configuration parameters are available for Red Hat OpenStack Platform (RHOSP) Swift registry storage.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 27%; " class="col_1"><!--Empty--></col><col style="width: 73%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140294606679568" scope="col">Parameter</th><th align="left" valign="top" id="idm140294606678480" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">authURL</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Defines the URL for obtaining the authentication token. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">authVersion</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Specifies the Auth version of RHOSP, for example, <code class="literal">authVersion: "3"</code>. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">container</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Defines the name of a Swift container for storing registry data. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">domain</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Specifies the RHOSP domain name for the Identity v3 API. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">domainID</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Specifies the RHOSP domain ID for the Identity v3 API. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">tenant</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Defines the RHOSP tenant name to be used by the registry. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">tenantID</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Defines the RHOSP tenant ID to be used by the registry. This value is optional.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140294606679568"> <p>
									<code class="literal">regionName</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140294606678480"> <p>
									Defines the RHOSP region in which the container exists. This value is optional.
								</p>
								 </td></tr></tbody></table></div></section></section><section class="section" id="configuring-registry-storage-azure-user-infrastructure"><div class="titlepage"><div><div><h2 class="title">3.4. Configuring the registry for Azure user-provisioned infrastructure</h2></div></div></div><section class="section" id="registry-operator-config-resources-secret-azure_configuring-registry-storage-azure-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.4.1. Configuring a secret for the Image Registry Operator</h3></div></div></div><p>
					In addition to the <code class="literal">configs.imageregistry.operator.openshift.io</code> and ConfigMap resources, configuration is provided to the Operator by a separate secret resource located within the <code class="literal">openshift-image-registry</code> namespace.
				</p><p>
					The <code class="literal">image-registry-private-configuration-user</code> secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.
				</p><p>
					For Azure registry storage, the secret is expected to contain one key whose value is the contents of a credentials file provided by Azure:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">REGISTRY_STORAGE_AZURE_ACCOUNTKEY</code>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create an OpenShift Container Platform secret that contains the required key.
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_AZURE_ACCOUNTKEY=&lt;accountkey&gt; --namespace openshift-image-registry</pre></li></ul></div></section><section class="section" id="registry-configuring-storage-azure-user-infra_configuring-registry-storage-azure-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.4.2. Configuring registry storage for Azure</h3></div></div></div><p>
					During installation, your cloud credentials are sufficient to create Azure Blob Storage, and the Registry Operator automatically configures storage.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A cluster on Azure with user-provisioned infrastructure.
						</li><li class="listitem">
							To configure registry storage for Azure, provide Registry Operator cloud credentials.
						</li><li class="listitem"><p class="simpara">
							For Azure storage the secret is expected to contain one key:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_AZURE_ACCOUNTKEY</code>
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create an <a class="link" href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal">Azure storage container</a>.
						</li><li class="listitem"><p class="simpara">
							Fill in the storage configuration in <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code>:
						</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example configuration</strong></p><p>
								
<pre class="programlisting language-yaml">storage:
  azure:
    accountName: &lt;storage-account-name&gt;
    container: &lt;container-name&gt;</pre>

							</p></div></li></ol></div></section><section class="section" id="registry-configuring-storage-azure-gov-cloud_configuring-registry-storage-azure-user-infrastructure"><div class="titlepage"><div><div><h3 class="title">3.4.3. Configuring registry storage for Azure Government</h3></div></div></div><p>
					During installation, your cloud credentials are sufficient to create Azure Blob Storage, and the Registry Operator automatically configures storage.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A cluster on Azure with user-provisioned infrastructure in a government region.
						</li><li class="listitem">
							To configure registry storage for Azure, provide Registry Operator cloud credentials.
						</li><li class="listitem"><p class="simpara">
							For Azure storage, the secret is expected to contain one key:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">REGISTRY_STORAGE_AZURE_ACCOUNTKEY</code>
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create an <a class="link" href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal">Azure storage container</a>.
						</li><li class="listitem"><p class="simpara">
							Fill in the storage configuration in <code class="literal">configs.imageregistry.operator.openshift.io/cluster</code>:
						</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io/cluster</pre><div class="formalpara"><p class="title"><strong>Example configuration</strong></p><p>
								
<pre class="programlisting language-yaml">storage:
  azure:
    accountName: &lt;storage-account-name&gt;
    container: &lt;container-name&gt;
    cloudName: AzureUSGovernmentCloud <span id="CO2-1"><!--Empty--></span><span class="callout">1</span></pre>

							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									<code class="literal">cloudName</code> is the name of the Azure cloud environment, which can be used to configure the Azure SDK with the appropriate Azure API endpoints. Defaults to <code class="literal">AzurePublicCloud</code>. You can also set <code class="literal">cloudName</code> to <code class="literal">AzureUSGovernmentCloud</code>, <code class="literal">AzureChinaCloud</code>, or <code class="literal">AzureGermanCloud</code> with sufficient credentials.
								</div></dd></dl></div></li></ol></div></section></section><section class="section" id="configuring-registry-storage-openstack"><div class="titlepage"><div><div><h2 class="title">3.5. Configuring the registry for RHOSP</h2></div></div></div><section class="section" id="installation-registry-osp-creating-custom-pvc_configuring-registry-storage-openstack"><div class="titlepage"><div><div><h3 class="title">3.5.1. Configuring an image registry with custom storage on clusters that run on RHOSP</h3></div></div></div><p>
					After you install a cluster on Red Hat OpenStack Platform (RHOSP), you can use a Cinder volume that is in a specific availability zone for registry storage.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a YAML file that specifies the storage class and availability zone to use. For example:
						</p><pre class="programlisting language-yaml">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: custom-csi-storageclass
provisioner: cinder.csi.openstack.org
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true
parameters:
  availability: &lt;availability_zone_name&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								OpenShift Container Platform does not verify the existence of the availability zone you choose. Verify the name of the availability zone before you apply the configuration.
							</p></div></div></li><li class="listitem"><p class="simpara">
							From a command line, apply the configuration:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;storage_class_file_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">storageclass.storage.k8s.io/custom-csi-storageclass created</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Create a YAML file that specifies a persistent volume claim (PVC) that uses your storage class and the <code class="literal">openshift-image-registry</code> namespace. For example:
						</p><pre class="programlisting language-yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: csi-pvc-imageregistry
  namespace: openshift-image-registry <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
  annotations:
    imageregistry.openshift.io: "true"
spec:
  accessModes:
  - ReadWriteOnce
  volumeMode: Filesystem
  resources:
    requests:
      storage: 100Gi <span id="CO3-2"><!--Empty--></span><span class="callout">2</span>
  storageClassName: &lt;your_custom_storage_class&gt; <span id="CO3-3"><!--Empty--></span><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Enter the namespace <code class="literal">openshift-image-registry</code>. This namespace allows the Cluster Image Registry Operator to consume the PVC.
								</div></dd><dt><a href="#CO3-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Optional: Adjust the volume size.
								</div></dd><dt><a href="#CO3-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Enter the name of the storage class that you created.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							From a command line, apply the configuration:
						</p><pre class="programlisting language-terminal">$ oc apply -f &lt;pvc_file_name&gt;</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">persistentvolumeclaim/csi-pvc-imageregistry created</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Replace the original persistent volume claim in the image registry configuration with the new claim:
						</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io/cluster --type 'json' -p='[{"op": "replace", "path": "/spec/storage/pvc/claim", "value": "csi-pvc-imageregistry"}]'</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">config.imageregistry.operator.openshift.io/cluster patched</pre>

							</p></div><p class="simpara">
							Over the next several minutes, the configuration is updated.
						</p></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To confirm that the registry is using the resources that you defined:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that the PVC claim value is identical to the name that you provided in your PVC definition:
						</p><pre class="programlisting language-terminal">$ oc get configs.imageregistry.operator.openshift.io/cluster -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">...
status:
    ...
    managementState: Managed
    pvc:
      claim: csi-pvc-imageregistry
...</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Verify that the status of the PVC is <code class="literal">Bound</code>:
						</p><pre class="programlisting language-terminal">$ oc get pvc -n openshift-image-registry csi-pvc-imageregistry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS             AGE
csi-pvc-imageregistry  Bound    pvc-72a8f9c9-f462-11e8-b6b6-fa163e18b7b5   100Gi      RWO            custom-csi-storageclass  11m</pre>

							</p></div></li></ol></div></section></section><section class="section" id="configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h2 class="title">3.6. Configuring the registry for bare metal</h2></div></div></div><section class="section" id="registry-removed_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h3 class="title">3.6.1. Image registry removed during installation</h3></div></div></div><p>
					On platforms that do not provide shareable object storage, the OpenShift Image Registry Operator bootstraps itself as <code class="literal">Removed</code>. This allows <code class="literal">openshift-installer</code> to complete installations on these platform types.
				</p><p>
					After installation, you must edit the Image Registry Operator configuration to switch the <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p></section><section class="section" id="registry-change-management-state_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h3 class="title">3.6.2. Changing the image registry’s management state</h3></div></div></div><p>
					To start the image registry, you must change the Image Registry Operator configuration’s <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Change <code class="literal">managementState</code> Image Registry Operator configuration from <code class="literal">Removed</code> to <code class="literal">Managed</code>. For example:
						</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"managementState":"Managed"}}'</pre></li></ul></div></section><section class="section" id="installation-registry-storage-config_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h3 class="title">3.6.3. Image registry storage configuration</h3></div></div></div><p>
					The Image Registry Operator is not initially available for platforms that do not provide default storage. After installation, you must configure your registry to use storage so that the Registry Operator is made available.
				</p><p>
					Instructions are shown for configuring a persistent volume, which is required for production clusters. Where applicable, instructions are shown for configuring an empty directory as the storage location, which is available for only non-production clusters.
				</p><p>
					Additional instructions are provided for allowing the image registry to use block storage types by using the <code class="literal">Recreate</code> rollout strategy during upgrades.
				</p><section class="section" id="registry-configuring-storage-baremetal_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h4 class="title">3.6.3.1. Configuring registry storage for bare metal and other manual installations</h4></div></div></div><p>
						As a cluster administrator, following installation you must configure your registry to use storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have a cluster that uses manually-provisioned Red Hat Enterprise Linux CoreOS (RHCOS) nodes, such as bare metal.
							</li><li class="listitem"><p class="simpara">
								You have provisioned persistent storage for your cluster, such as Red Hat OpenShift Data Foundation.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									OpenShift Container Platform supports <code class="literal">ReadWriteOnce</code> access for image registry storage when you have only one replica. <code class="literal">ReadWriteOnce</code> access also requires that the registry uses the <code class="literal">Recreate</code> rollout strategy. To deploy an image registry that supports high availability with two or more replicas, <code class="literal">ReadWriteMany</code> access is required.
								</p></div></div></li><li class="listitem">
								Must have 100Gi capacity.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To configure your registry to use storage, change the <code class="literal">spec.storage.pvc</code> in the <code class="literal">configs.imageregistry/cluster</code> resource.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									When you use shared storage, review your security settings to prevent outside access.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Verify that you do not have a registry pod:
							</p><pre class="programlisting language-terminal">$ oc get pod -n openshift-image-registry -l docker-registry=default</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">No resources found in openshift-image-registry namespace</pre>

								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do have a registry pod in your output, you do not need to continue with this procedure.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Check the registry configuration:
							</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">storage:
  pvc:
    claim:</pre>

								</p></div><p class="simpara">
								Leave the <code class="literal">claim</code> field blank to allow the automatic creation of an <code class="literal">image-registry-storage</code> PVC.
							</p></li><li class="listitem"><p class="simpara">
								Check the <code class="literal">clusteroperator</code> status:
							</p><pre class="programlisting language-terminal">$ oc get clusteroperator image-registry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME             VERSION              AVAILABLE   PROGRESSING   DEGRADED   SINCE   MESSAGE
image-registry   4.13                 True        False         False      6h50m</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Ensure that your registry is set to managed to enable building and pushing of images.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Run:
									</p><pre class="screen">$ oc edit configs.imageregistry/cluster</pre><p class="simpara">
										Then, change the line
									</p><pre class="screen">managementState: Removed</pre><p class="simpara">
										to
									</p><pre class="screen">managementState: Managed</pre></li></ul></div></li></ol></div></section><section class="section" id="installation-registry-storage-non-production_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h4 class="title">3.6.3.2. Configuring storage for the image registry in non-production clusters</h4></div></div></div><p>
						You must configure storage for the Image Registry Operator. For non-production clusters, you can set the image registry to an empty directory. If you do so, all images are lost if you restart the registry.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To set the image registry storage to an empty directory:
							</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"storage":{"emptyDir":{}}}}'</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Configure this option for only non-production clusters.
								</p></div></div><p class="simpara">
								If you run this command before the Image Registry Operator initializes its components, the <code class="literal">oc patch</code> command fails with the following error:
							</p><pre class="programlisting language-terminal">Error from server (NotFound): configs.imageregistry.operator.openshift.io "cluster" not found</pre><p class="simpara">
								Wait a few minutes and run the command again.
							</p></li></ul></div></section><section class="section" id="installation-registry-storage-block-recreate-rollout-bare-metal_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h4 class="title">3.6.3.3. Configuring block registry storage</h4></div></div></div><p>
						To allow the image registry to use block storage types during upgrades as a cluster administrator, you can use the <code class="literal">Recreate</code> rollout strategy.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Block storage volumes, or block persistent volumes, are supported but not recommended for use with the image registry on production clusters. An installation where the registry is configured on block storage is not highly available because the registry cannot have more than one replica.
						</p><p>
							If you choose to use a block storage volume with the image registry, you must use a filesystem persistent volume claim (PVC).
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To set the image registry storage as a block storage type, patch the registry so that it uses the <code class="literal">Recreate</code> rollout strategy and runs with only one (<code class="literal">1</code>) replica:
							</p><pre class="programlisting language-terminal">$ oc patch config.imageregistry.operator.openshift.io/cluster --type=merge -p '{"spec":{"rolloutStrategy":"Recreate","replicas":1}}'</pre></li><li class="listitem">
								Provision the PV for the block storage device, and create a PVC for that volume. The requested block volume uses the ReadWriteOnce (RWO) access mode.
							</li><li class="listitem">
								Edit the registry configuration so that it references the correct PVC.
							</li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h4 class="title">3.6.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Ceph RGW storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Ceph RGW object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">ocs-storagecluster-ceph-rgw</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: rgwtest
  namespace: openshift-storage <span id="CO4-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: ocs-storagecluster-ceph-rgw
  generateBucketName: rgwtest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage rgwtest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Create a encryption route for Ceph RGW by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create route reencrypt &lt;route_name&gt; --service=rook-ceph-rgw-ocs-storagecluster-cephobjectstore --port=https -n openshift-storage</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Get the route host by entering the following command:
									</p><pre class="programlisting language-terminal">$ route_host=$(oc get route &lt;route_name&gt; -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Ceph RGW object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h4 class="title">3.6.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Noobaa storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Noobaa object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">openshift-storage.noobaa.io</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: noobaatest
  namespace: openshift-storage <span id="CO5-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: openshift-storage.noobaa.io
  generateBucketName: noobaatest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage noobaatest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Get the route host by entering the following command:
							</p><pre class="programlisting language-terminal">$ route_host=$(oc get route s3 -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Nooba object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-baremetal"><div class="titlepage"><div><div><h3 class="title">3.6.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use CephFS storage.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						CephFS uses persistent volume claim (PVC) storage. It is not recommended to use PVCs for image registry storage if there are other options are available, such as Ceph RGW or Noobaa.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and CephFS file storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a PVC to use the <code class="literal">cephfs</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: registry-storage-pvc
 namespace: openshift-image-registry
spec:
 accessModes:
 - ReadWriteMany
 resources:
   requests:
     storage: 100Gi
 storageClassName: ocs-storagecluster-cephfs
EOF</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the CephFS file system storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","pvc":{"claim":"registry-storage-pvc"}}}}' --type=merge</pre></li></ol></div></section><section class="section _additional-resources" id="configuring-registry-storage-baremetal-addtl-resources"><div class="titlepage"><div><div><h3 class="title">3.6.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#optimizing-storage">Recommended configurable storage technology</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10/html-single/managing_and_allocating_storage_resources/index#configuring-image-registry-to-use-openshift-data-foundation_rhodf">Configuring Image Registry to use OpenShift Data Foundation</a>
						</li></ul></div></section></section><section class="section" id="configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h2 class="title">3.7. Configuring the registry for vSphere</h2></div></div></div><section class="section" id="registry-removed_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h3 class="title">3.7.1. Image registry removed during installation</h3></div></div></div><p>
					On platforms that do not provide shareable object storage, the OpenShift Image Registry Operator bootstraps itself as <code class="literal">Removed</code>. This allows <code class="literal">openshift-installer</code> to complete installations on these platform types.
				</p><p>
					After installation, you must edit the Image Registry Operator configuration to switch the <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p></section><section class="section" id="registry-change-management-state_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h3 class="title">3.7.2. Changing the image registry’s management state</h3></div></div></div><p>
					To start the image registry, you must change the Image Registry Operator configuration’s <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Change <code class="literal">managementState</code> Image Registry Operator configuration from <code class="literal">Removed</code> to <code class="literal">Managed</code>. For example:
						</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"managementState":"Managed"}}'</pre></li></ul></div></section><section class="section" id="installation-registry-storage-config_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h3 class="title">3.7.3. Image registry storage configuration</h3></div></div></div><p>
					The Image Registry Operator is not initially available for platforms that do not provide default storage. After installation, you must configure your registry to use storage so that the Registry Operator is made available.
				</p><p>
					Instructions are shown for configuring a persistent volume, which is required for production clusters. Where applicable, instructions are shown for configuring an empty directory as the storage location, which is available for only non-production clusters.
				</p><p>
					Additional instructions are provided for allowing the image registry to use block storage types by using the <code class="literal">Recreate</code> rollout strategy during upgrades.
				</p><section class="section" id="registry-configuring-storage-vsphere_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h4 class="title">3.7.3.1. Configuring registry storage for VMware vSphere</h4></div></div></div><p>
						As a cluster administrator, following installation you must configure your registry to use storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Cluster administrator permissions.
							</li><li class="listitem">
								A cluster on VMware vSphere.
							</li><li class="listitem"><p class="simpara">
								Persistent storage provisioned for your cluster, such as Red Hat OpenShift Data Foundation.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									OpenShift Container Platform supports <code class="literal">ReadWriteOnce</code> access for image registry storage when you have only one replica. <code class="literal">ReadWriteOnce</code> access also requires that the registry uses the <code class="literal">Recreate</code> rollout strategy. To deploy an image registry that supports high availability with two or more replicas, <code class="literal">ReadWriteMany</code> access is required.
								</p></div></div></li><li class="listitem">
								Must have "100Gi" capacity.
							</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Testing shows issues with using the NFS server on RHEL as storage backend for core services. This includes the OpenShift Container Registry and Quay, Prometheus for monitoring storage, and Elasticsearch for logging storage. Therefore, using RHEL NFS to back PVs used by core services is not recommended.
						</p><p>
							Other NFS implementations on the marketplace might not have these issues. Contact the individual NFS implementation vendor for more information on any testing that was possibly completed against these OpenShift Container Platform core components.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To configure your registry to use storage, change the <code class="literal">spec.storage.pvc</code> in the <code class="literal">configs.imageregistry/cluster</code> resource.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									When you use shared storage, review your security settings to prevent outside access.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Verify that you do not have a registry pod:
							</p><pre class="programlisting language-terminal">$ oc get pod -n openshift-image-registry -l docker-registry=default</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">No resourses found in openshift-image-registry namespace</pre>

								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do have a registry pod in your output, you do not need to continue with this procedure.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Check the registry configuration:
							</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">storage:
  pvc:
    claim: <span id="CO6-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Leave the <code class="literal">claim</code> field blank to allow the automatic creation of an <code class="literal">image-registry-storage</code> persistent volume claim (PVC). The PVC is generated based on the default storage class. However, be aware that the default storage class might provide ReadWriteOnce (RWO) volumes, such as a RADOS Block Device (RBD), which can cause issues when you replicate to more than one replica.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Check the <code class="literal">clusteroperator</code> status:
							</p><pre class="programlisting language-terminal">$ oc get clusteroperator image-registry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME             VERSION                              AVAILABLE   PROGRESSING   DEGRADED   SINCE   MESSAGE
image-registry   4.7                                  True        False         False      6h50m</pre>

								</p></div></li></ol></div></section><section class="section" id="installation-registry-storage-non-production_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h4 class="title">3.7.3.2. Configuring storage for the image registry in non-production clusters</h4></div></div></div><p>
						You must configure storage for the Image Registry Operator. For non-production clusters, you can set the image registry to an empty directory. If you do so, all images are lost if you restart the registry.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To set the image registry storage to an empty directory:
							</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"storage":{"emptyDir":{}}}}'</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Configure this option for only non-production clusters.
								</p></div></div><p class="simpara">
								If you run this command before the Image Registry Operator initializes its components, the <code class="literal">oc patch</code> command fails with the following error:
							</p><pre class="programlisting language-terminal">Error from server (NotFound): configs.imageregistry.operator.openshift.io "cluster" not found</pre><p class="simpara">
								Wait a few minutes and run the command again.
							</p></li></ul></div></section><section class="section" id="installation-registry-storage-block-recreate-rollout_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h4 class="title">3.7.3.3. Configuring block registry storage for VMware vSphere</h4></div></div></div><p>
						To allow the image registry to use block storage types such as vSphere Virtual Machine Disk (VMDK) during upgrades as a cluster administrator, you can use the <code class="literal">Recreate</code> rollout strategy.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Block storage volumes are supported but not recommended for use with image registry on production clusters. An installation where the registry is configured on block storage is not highly available because the registry cannot have more than one replica.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To set the image registry storage as a block storage type, patch the registry so that it uses the <code class="literal">Recreate</code> rollout strategy and runs with only <code class="literal">1</code> replica:
							</p><pre class="programlisting language-terminal">$ oc patch config.imageregistry.operator.openshift.io/cluster --type=merge -p '{"spec":{"rolloutStrategy":"Recreate","replicas":1}}'</pre></li><li class="listitem"><p class="simpara">
								Provision the PV for the block storage device, and create a PVC for that volume. The requested block volume uses the ReadWriteOnce (RWO) access mode.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Create a <code class="literal">pvc.yaml</code> file with the following contents to define a VMware vSphere <code class="literal">PersistentVolumeClaim</code> object:
									</p><pre class="programlisting language-yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: image-registry-storage <span id="CO7-1"><!--Empty--></span><span class="callout">1</span>
  namespace: openshift-image-registry <span id="CO7-2"><!--Empty--></span><span class="callout">2</span>
spec:
  accessModes:
  - ReadWriteOnce <span id="CO7-3"><!--Empty--></span><span class="callout">3</span>
  resources:
    requests:
      storage: 100Gi <span id="CO7-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												A unique name that represents the <code class="literal">PersistentVolumeClaim</code> object.
											</div></dd><dt><a href="#CO7-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The namespace for the <code class="literal">PersistentVolumeClaim</code> object, which is <code class="literal">openshift-image-registry</code>.
											</div></dd><dt><a href="#CO7-3"><span class="callout">3</span></a> </dt><dd><div class="para">
												The access mode of the persistent volume claim. With <code class="literal">ReadWriteOnce</code>, the volume can be mounted with read and write permissions by a single node.
											</div></dd><dt><a href="#CO7-4"><span class="callout">4</span></a> </dt><dd><div class="para">
												The size of the persistent volume claim.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Create the <code class="literal">PersistentVolumeClaim</code> object from the file:
									</p><pre class="programlisting language-terminal">$ oc create -f pvc.yaml -n openshift-image-registry</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Edit the registry configuration so that it references the correct PVC:
							</p><pre class="programlisting language-terminal">$ oc edit config.imageregistry.operator.openshift.io -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">storage:
  pvc:
    claim: <span id="CO8-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										By creating a custom PVC, you can leave the <code class="literal">claim</code> field blank for the default automatic creation of an <code class="literal">image-registry-storage</code> PVC.
									</div></dd></dl></div></li></ol></div><p>
						For instructions about configuring registry storage so that it references the correct PVC, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#registry-configuring-storage-vsphere_configuring-registry-storage-vsphere">Configuring the registry for vSphere</a>.
					</p></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h4 class="title">3.7.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Ceph RGW storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Ceph RGW object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">ocs-storagecluster-ceph-rgw</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: rgwtest
  namespace: openshift-storage <span id="CO9-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: ocs-storagecluster-ceph-rgw
  generateBucketName: rgwtest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO9-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage rgwtest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Create a encryption route for Ceph RGW by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create route reencrypt &lt;route_name&gt; --service=rook-ceph-rgw-ocs-storagecluster-cephobjectstore --port=https -n openshift-storage</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Get the route host by entering the following command:
									</p><pre class="programlisting language-terminal">$ route_host=$(oc get route &lt;route_name&gt; -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Ceph RGW object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h4 class="title">3.7.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Noobaa storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Noobaa object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">openshift-storage.noobaa.io</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: noobaatest
  namespace: openshift-storage <span id="CO10-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: openshift-storage.noobaa.io
  generateBucketName: noobaatest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO10-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage noobaatest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Get the route host by entering the following command:
							</p><pre class="programlisting language-terminal">$ route_host=$(oc get route s3 -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Nooba object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-vsphere"><div class="titlepage"><div><div><h3 class="title">3.7.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use CephFS storage.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						CephFS uses persistent volume claim (PVC) storage. It is not recommended to use PVCs for image registry storage if there are other options are available, such as Ceph RGW or Noobaa.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and CephFS file storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a PVC to use the <code class="literal">cephfs</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: registry-storage-pvc
 namespace: openshift-image-registry
spec:
 accessModes:
 - ReadWriteMany
 resources:
   requests:
     storage: 100Gi
 storageClassName: ocs-storagecluster-cephfs
EOF</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the CephFS file system storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","pvc":{"claim":"registry-storage-pvc"}}}}' --type=merge</pre></li></ol></div></section><section class="section _additional-resources" id="configuring-registry-storage-vsphere-addtl-resources"><div class="titlepage"><div><div><h3 class="title">3.7.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#optimizing-storage">Recommended configurable storage technology</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10/html-single/managing_and_allocating_storage_resources/index#configuring-image-registry-to-use-openshift-data-foundation_rhodf">Configuring Image Registry to use OpenShift Data Foundation</a>
						</li></ul></div></section></section><section class="section" id="configuring-registry-storage-rhodf"><div class="titlepage"><div><div><h2 class="title">3.8. Configuring the registry for Red Hat OpenShift Data Foundation</h2></div></div></div><p>
				To configure the OpenShift image registry on bare metal and vSphere to use Red Hat OpenShift Data Foundation storage, you must install OpenShift Data Foundation and then configure image registry using Ceph or Noobaa.
			</p><section class="section" id="registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-rhodf"><div class="titlepage"><div><div><h3 class="title">3.8.1. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use Ceph RGW storage.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Ceph RGW object storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the object bucket claim using the <code class="literal">ocs-storagecluster-ceph-rgw</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: rgwtest
  namespace: openshift-storage <span id="CO11-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: ocs-storagecluster-ceph-rgw
  generateBucketName: rgwtest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO11-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Get the bucket name by entering the following command:
						</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage rgwtest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
							Get the AWS credentials by entering the following commands:
						</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
							Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
							Create a encryption route for Ceph RGW by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc create route reencrypt &lt;route_name&gt; --service=rook-ceph-rgw-ocs-storagecluster-cephobjectstore --port=https -n openshift-storage</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Get the route host by entering the following command:
								</p><pre class="programlisting language-terminal">$ route_host=$(oc get route &lt;route_name&gt; -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Create a config map that uses an ingress certificate by entering the following commands:
						</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the Ceph RGW object storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-rhodf"><div class="titlepage"><div><div><h3 class="title">3.8.2. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use Noobaa storage.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Noobaa object storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the object bucket claim using the <code class="literal">openshift-storage.noobaa.io</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: noobaatest
  namespace: openshift-storage <span id="CO12-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: openshift-storage.noobaa.io
  generateBucketName: noobaatest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO12-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Get the bucket name by entering the following command:
						</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage noobaatest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
							Get the AWS credentials by entering the following commands:
						</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
							Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
							Get the route host by entering the following command:
						</p><pre class="programlisting language-terminal">$ route_host=$(oc get route s3 -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li><li class="listitem"><p class="simpara">
							Create a config map that uses an ingress certificate by entering the following commands:
						</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the Nooba object storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-rhodf"><div class="titlepage"><div><div><h3 class="title">3.8.3. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use CephFS storage.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						CephFS uses persistent volume claim (PVC) storage. It is not recommended to use PVCs for image registry storage if there are other options are available, such as Ceph RGW or Noobaa.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and CephFS file storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a PVC to use the <code class="literal">cephfs</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: registry-storage-pvc
 namespace: openshift-image-registry
spec:
 accessModes:
 - ReadWriteMany
 resources:
   requests:
     storage: 100Gi
 storageClassName: ocs-storagecluster-cephfs
EOF</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the CephFS file system storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","pvc":{"claim":"registry-storage-pvc"}}}}' --type=merge</pre></li></ol></div></section><section class="section _additional-resources" id="configuring-registry-storage-ocs"><div class="titlepage"><div><div><h3 class="title">3.8.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10/html-single/managing_and_allocating_storage_resources/index#configuring-image-registry-to-use-openshift-data-foundation_rhodf">Configuring Image Registry to use OpenShift Data Foundation</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/solutions/6719951">Performance tuning guide for Multicloud Object Gateway (NooBaa)</a>
						</li></ul></div></section></section><section class="section" id="configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h2 class="title">3.9. Configuring the registry for Nutanix</h2></div></div></div><p>
				By following the steps outlined in this documentation, users can optimize container image distribution, security, and access controls, enabling a robust foundation for Nutanix applications on OpenShift Container Platform
			</p><section class="section" id="registry-removed_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h3 class="title">3.9.1. Image registry removed during installation</h3></div></div></div><p>
					On platforms that do not provide shareable object storage, the OpenShift Image Registry Operator bootstraps itself as <code class="literal">Removed</code>. This allows <code class="literal">openshift-installer</code> to complete installations on these platform types.
				</p><p>
					After installation, you must edit the Image Registry Operator configuration to switch the <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p></section><section class="section" id="registry-change-management-state_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h3 class="title">3.9.2. Changing the image registry’s management state</h3></div></div></div><p>
					To start the image registry, you must change the Image Registry Operator configuration’s <code class="literal">managementState</code> from <code class="literal">Removed</code> to <code class="literal">Managed</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Change <code class="literal">managementState</code> Image Registry Operator configuration from <code class="literal">Removed</code> to <code class="literal">Managed</code>. For example:
						</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"managementState":"Managed"}}'</pre></li></ul></div></section><section class="section" id="installation-registry-storage-config_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h3 class="title">3.9.3. Image registry storage configuration</h3></div></div></div><p>
					The Image Registry Operator is not initially available for platforms that do not provide default storage. After installation, you must configure your registry to use storage so that the Registry Operator is made available.
				</p><p>
					Instructions are shown for configuring a persistent volume, which is required for production clusters. Where applicable, instructions are shown for configuring an empty directory as the storage location, which is available for only non-production clusters.
				</p><p>
					Additional instructions are provided for allowing the image registry to use block storage types by using the <code class="literal">Recreate</code> rollout strategy during upgrades.
				</p><section class="section" id="configuring-registry-storage-nutanix_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h4 class="title">3.9.3.1. Configuring registry storage for Nutanix</h4></div></div></div><p>
						As a cluster administrator, following installation you must configure your registry to use storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have a cluster on Nutanix.
							</li><li class="listitem"><p class="simpara">
								You have provisioned persistent storage for your cluster, such as Red Hat OpenShift Data Foundation.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									OpenShift Container Platform supports <code class="literal">ReadWriteOnce</code> access for image registry storage when you have only one replica. <code class="literal">ReadWriteOnce</code> access also requires that the registry uses the <code class="literal">Recreate</code> rollout strategy. To deploy an image registry that supports high availability with two or more replicas, <code class="literal">ReadWriteMany</code> access is required.
								</p></div></div></li><li class="listitem">
								You must have 100 Gi capacity.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To configure your registry to use storage, change the <code class="literal">spec.storage.pvc</code> in the <code class="literal">configs.imageregistry/cluster</code> resource.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									When you use shared storage, review your security settings to prevent outside access.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Verify that you do not have a registry pod:
							</p><pre class="programlisting language-terminal">$ oc get pod -n openshift-image-registry -l docker-registry=default</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">No resourses found in openshift-image-registry namespace</pre>

								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do have a registry pod in your output, you do not need to continue with this procedure.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Check the registry configuration:
							</p><pre class="programlisting language-terminal">$ oc edit configs.imageregistry.operator.openshift.io</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">storage:
  pvc:
    claim: <span id="CO13-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO13-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Leave the <code class="literal">claim</code> field blank to allow the automatic creation of an <code class="literal">image-registry-storage</code> persistent volume claim (PVC). The PVC is generated based on the default storage class. However, be aware that the default storage class might provide ReadWriteOnce (RWO) volumes, such as a RADOS Block Device (RBD), which can cause issues when you replicate to more than one replica.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Check the <code class="literal">clusteroperator</code> status:
							</p><pre class="programlisting language-terminal">$ oc get clusteroperator image-registry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-terminal">NAME             VERSION                              AVAILABLE   PROGRESSING   DEGRADED   SINCE   MESSAGE
image-registry   4.13                                  True        False         False      6h50m</pre>

								</p></div></li></ol></div></section><section class="section" id="installation-registry-storage-non-production_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h4 class="title">3.9.3.2. Configuring storage for the image registry in non-production clusters</h4></div></div></div><p>
						You must configure storage for the Image Registry Operator. For non-production clusters, you can set the image registry to an empty directory. If you do so, all images are lost if you restart the registry.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To set the image registry storage to an empty directory:
							</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"storage":{"emptyDir":{}}}}'</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Configure this option for only non-production clusters.
								</p></div></div><p class="simpara">
								If you run this command before the Image Registry Operator initializes its components, the <code class="literal">oc patch</code> command fails with the following error:
							</p><pre class="programlisting language-terminal">Error from server (NotFound): configs.imageregistry.operator.openshift.io "cluster" not found</pre><p class="simpara">
								Wait a few minutes and run the command again.
							</p></li></ul></div></section><section class="section" id="installation-registry-storage-block-recreate-rollout-nutanix_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h4 class="title">3.9.3.3. Configuring block registry storage for Nutanix volumes</h4></div></div></div><p>
						To allow the image registry to use block storage types such as Nutanix volumes during upgrades as a cluster administrator, you can use the <code class="literal">Recreate</code> rollout strategy.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Block storage volumes, or block persistent volumes, are supported but not recommended for use with the image registry on production clusters. An installation where the registry is configured on block storage is not highly available because the registry cannot have more than one replica.
						</p><p>
							If you choose to use a block storage volume with the image registry, you must use a filesystem persistent volume claim (PVC).
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To set the image registry storage as a block storage type, patch the registry so that it uses the <code class="literal">Recreate</code> rollout strategy and runs with only one (<code class="literal">1</code>) replica:
							</p><pre class="programlisting language-terminal">$ oc patch config.imageregistry.operator.openshift.io/cluster --type=merge -p '{"spec":{"rolloutStrategy":"Recreate","replicas":1}}'</pre></li><li class="listitem"><p class="simpara">
								Provision the PV for the block storage device, and create a PVC for that volume. The requested block volume uses the ReadWriteOnce (RWO) access mode.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Create a <code class="literal">pvc.yaml</code> file with the following contents to define a Nutanix <code class="literal">PersistentVolumeClaim</code> object:
									</p><pre class="programlisting language-yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: image-registry-storage <span id="CO14-1"><!--Empty--></span><span class="callout">1</span>
  namespace: openshift-image-registry <span id="CO14-2"><!--Empty--></span><span class="callout">2</span>
spec:
  accessModes:
  - ReadWriteOnce <span id="CO14-3"><!--Empty--></span><span class="callout">3</span>
  resources:
    requests:
      storage: 100Gi <span id="CO14-4"><!--Empty--></span><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO14-1"><span class="callout">1</span></a> </dt><dd><div class="para">
												A unique name that represents the <code class="literal">PersistentVolumeClaim</code> object.
											</div></dd><dt><a href="#CO14-2"><span class="callout">2</span></a> </dt><dd><div class="para">
												The namespace for the <code class="literal">PersistentVolumeClaim</code> object, which is <code class="literal">openshift-image-registry</code>.
											</div></dd><dt><a href="#CO14-3"><span class="callout">3</span></a> </dt><dd><div class="para">
												The access mode of the persistent volume claim. With <code class="literal">ReadWriteOnce</code>, the volume can be mounted with read and write permissions by a single node.
											</div></dd><dt><a href="#CO14-4"><span class="callout">4</span></a> </dt><dd><div class="para">
												The size of the persistent volume claim.
											</div></dd></dl></div></li><li class="listitem"><p class="simpara">
										Create the <code class="literal">PersistentVolumeClaim</code> object from the file:
									</p><pre class="programlisting language-terminal">$ oc create -f pvc.yaml -n openshift-image-registry</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Edit the registry configuration so that it references the correct PVC:
							</p><pre class="programlisting language-terminal">$ oc edit config.imageregistry.operator.openshift.io -o yaml</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
									
<pre class="programlisting language-yaml">storage:
  pvc:
    claim: <span id="CO15-1"><!--Empty--></span><span class="callout">1</span></pre>

								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO15-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										By creating a custom PVC, you can leave the <code class="literal">claim</code> field blank for the default automatic creation of an <code class="literal">image-registry-storage</code> PVC.
									</div></dd></dl></div></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephrgw_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h4 class="title">3.9.3.4. Configuring the Image Registry Operator to use Ceph RGW storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Ceph RGW storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Ceph RGW object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">ocs-storagecluster-ceph-rgw</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: rgwtest
  namespace: openshift-storage <span id="CO16-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: ocs-storagecluster-ceph-rgw
  generateBucketName: rgwtest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO16-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage rgwtest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage rgwtest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Create a encryption route for Ceph RGW by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create route reencrypt &lt;route_name&gt; --service=rook-ceph-rgw-ocs-storagecluster-cephobjectstore --port=https -n openshift-storage</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Get the route host by entering the following command:
									</p><pre class="programlisting language-terminal">$ route_host=$(oc get route &lt;route_name&gt; -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Ceph RGW object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section><section class="section" id="registry-configuring-registry-storage-rhodf-nooba_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h4 class="title">3.9.3.5. Configuring the Image Registry Operator to use Noobaa storage with Red Hat OpenShift Data Foundation</h4></div></div></div><p>
						Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Ceph, a shared and distributed file system and on-premises object storage
							</li><li class="listitem">
								NooBaa, providing a Multicloud Object Gateway
							</li></ul></div><p>
						This document outlines the procedure to configure the image registry to use Noobaa storage.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
							</li><li class="listitem">
								You have access to the OpenShift Container Platform web console.
							</li><li class="listitem">
								You installed the <code class="literal">oc</code> CLI.
							</li><li class="listitem">
								You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and Noobaa object storage.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the object bucket claim using the <code class="literal">openshift-storage.noobaa.io</code> storage class. For example:
							</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: noobaatest
  namespace: openshift-storage <span id="CO17-1"><!--Empty--></span><span class="callout">1</span>
spec:
  storageClassName: openshift-storage.noobaa.io
  generateBucketName: noobaatest
EOF</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO17-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Alternatively, you can use the <code class="literal">openshift-image-registry</code> namespace.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Get the bucket name by entering the following command:
							</p><pre class="programlisting language-terminal">$ bucket_name=$(oc get obc -n openshift-storage noobaatest -o jsonpath='{.spec.bucketName}')</pre></li><li class="listitem"><p class="simpara">
								Get the AWS credentials by entering the following commands:
							</p><pre class="programlisting language-terminal">$ AWS_ACCESS_KEY_ID=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_ACCESS_KEY_ID:" | head -n1 | awk '{print $2}' | base64 --decode)</pre><pre class="programlisting language-terminal">$ AWS_SECRET_ACCESS_KEY=$(oc get secret -n openshift-storage noobaatest -o yaml | grep -w "AWS_SECRET_ACCESS_KEY:" | head -n1 | awk '{print $2}' | base64 --decode)</pre></li><li class="listitem"><p class="simpara">
								Create the secret <code class="literal">image-registry-private-configuration-user</code> with the AWS credentials for the new bucket under <code class="literal">openshift-image-registry project</code> by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc create secret generic image-registry-private-configuration-user --from-literal=REGISTRY_STORAGE_S3_ACCESSKEY=${AWS_ACCESS_KEY_ID} --from-literal=REGISTRY_STORAGE_S3_SECRETKEY=${AWS_SECRET_ACCESS_KEY} --namespace openshift-image-registry</pre></li><li class="listitem"><p class="simpara">
								Get the route host by entering the following command:
							</p><pre class="programlisting language-terminal">$ route_host=$(oc get route s3 -n openshift-storage -o=jsonpath='{.spec.host}')</pre></li><li class="listitem"><p class="simpara">
								Create a config map that uses an ingress certificate by entering the following commands:
							</p><pre class="programlisting language-terminal">$ oc extract secret/router-certs-default  -n openshift-ingress  --confirm</pre><pre class="programlisting language-terminal">$ oc create configmap image-registry-s3-bundle --from-file=ca-bundle.crt=./tls.crt  -n openshift-config</pre></li><li class="listitem"><p class="simpara">
								Configure the image registry to use the Nooba object storage by entering the following command:
							</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","s3":{"bucket":'\"${bucket_name}\"',"region":"us-east-1","regionEndpoint":'\"https://${route_host}\"',"virtualHostedStyle":false,"encrypt":false,"trustedCA":{"name":"image-registry-s3-bundle"}}}}}' --type=merge</pre></li></ol></div></section></section><section class="section" id="registry-configuring-registry-storage-rhodf-cephfs_configuring-registry-storage-nutanix"><div class="titlepage"><div><div><h3 class="title">3.9.4. Configuring the Image Registry Operator to use CephFS storage with Red Hat OpenShift Data Foundation</h3></div></div></div><p>
					Red Hat OpenShift Data Foundation integrates multiple storage types that you can use with the OpenShift image registry:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ceph, a shared and distributed file system and on-premises object storage
						</li><li class="listitem">
							NooBaa, providing a Multicloud Object Gateway
						</li></ul></div><p>
					This document outlines the procedure to configure the image registry to use CephFS storage.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						CephFS uses persistent volume claim (PVC) storage. It is not recommended to use PVCs for image registry storage if there are other options are available, such as Ceph RGW or Noobaa.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
						</li><li class="listitem">
							You have access to the OpenShift Container Platform web console.
						</li><li class="listitem">
							You installed the <code class="literal">oc</code> CLI.
						</li><li class="listitem">
							You installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10">OpenShift Data Foundation Operator</a> to provide object storage and CephFS file storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a PVC to use the <code class="literal">cephfs</code> storage class. For example:
						</p><pre class="programlisting language-terminal">cat &lt;&lt;EOF | oc apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: registry-storage-pvc
 namespace: openshift-image-registry
spec:
 accessModes:
 - ReadWriteMany
 resources:
   requests:
     storage: 100Gi
 storageClassName: ocs-storagecluster-cephfs
EOF</pre></li><li class="listitem"><p class="simpara">
							Configure the image registry to use the CephFS file system storage by entering the following command:
						</p><pre class="programlisting language-terminal">$ oc patch config.image/cluster -p '{"spec":{"managementState":"Managed","replicas":2,"storage":{"managementState":"Unmanaged","pvc":{"claim":"registry-storage-pvc"}}}}' --type=merge</pre></li></ol></div></section><section class="section _additional-resources" id="configuring-registry-storage-nutanix-addtl-resources"><div class="titlepage"><div><div><h3 class="title">3.9.5. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/scalability_and_performance/#optimizing-storage">Recommended configurable storage technology</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.10/html-single/managing_and_allocating_storage_resources/index#configuring-image-registry-to-use-openshift-data-foundation_rhodf">Configuring Image Registry to use OpenShift Data Foundation</a>
						</li></ul></div></section></section></section><section class="chapter" id="accessing-the-registry"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Accessing the registry</h1></div></div></div><p>
			Use the following sections for instructions on accessing the registry, including viewing logs and metrics, as well as securing and exposing the registry.
		</p><p>
			You can access the registry directly to invoke <code class="literal">podman</code> commands. This allows you to push images to or pull them from the integrated registry directly using operations like <code class="literal">podman push</code> or <code class="literal">podman pull</code>. To do so, you must be logged in to the registry using the <code class="literal">podman login</code> command. The operations you can perform depend on your user permissions, as described in the following sections.
		</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h2 class="title">4.1. Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li><li class="listitem">
						You must have configured an identity provider (IDP).
					</li><li class="listitem"><p class="simpara">
						For pulling images, for example when using the <code class="literal">podman pull</code> command, the user must have the <code class="literal">registry-viewer</code> role. To add this role, run the following command:
					</p><pre class="programlisting language-terminal">$ oc policy add-role-to-user registry-viewer &lt;user_name&gt;</pre></li><li class="listitem"><p class="simpara">
						For writing or pushing images, for example when using the <code class="literal">podman push</code> command:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								The user must have the <code class="literal">registry-editor</code> role. To add this role, run the following command:
							</p><pre class="programlisting language-terminal">$ oc policy add-role-to-user registry-editor &lt;user_name&gt;</pre></li><li class="listitem">
								Your cluster must have an existing project where the images can be pushed to.
							</li></ul></div></li></ul></div></section><section class="section" id="registry-accessing-directly_accessing-the-registry"><div class="titlepage"><div><div><h2 class="title">4.2. Accessing the registry directly from the cluster</h2></div></div></div><p>
				You can access the registry from inside the cluster.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Access the registry from the cluster by using internal routes:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the node by getting the node’s name:
					</p><pre class="programlisting language-terminal">$ oc get nodes</pre><pre class="programlisting language-terminal">$ oc debug nodes/&lt;node_name&gt;</pre></li><li class="listitem"><p class="simpara">
						To enable access to tools such as <code class="literal">oc</code> and <code class="literal">podman</code> on the node, change your root directory to <code class="literal">/host</code>:
					</p><pre class="programlisting language-terminal">sh-4.2# chroot /host</pre></li><li class="listitem"><p class="simpara">
						Log in to the container image registry by using your access token:
					</p><pre class="programlisting language-terminal">sh-4.2# oc login -u kubeadmin -p &lt;password_from_install_log&gt; https://api-int.&lt;cluster_name&gt;.&lt;base_domain&gt;:6443</pre><pre class="programlisting language-terminal">sh-4.2# podman login -u kubeadmin -p $(oc whoami -t) image-registry.openshift-image-registry.svc:5000</pre><p class="simpara">
						You should see a message confirming login, such as:
					</p><pre class="programlisting language-terminal">Login Succeeded!</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can pass any value for the user name; the token contains all necessary information. Passing a user name that contains colons will result in a login failure.
						</p><p>
							Since the Image Registry Operator creates the route, it will likely be similar to <code class="literal">default-route-openshift-image-registry.&lt;cluster_name&gt;</code>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Perform <code class="literal">podman pull</code> and <code class="literal">podman push</code> operations against your registry:
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You can pull arbitrary images, but if you have the <span class="strong strong"><strong>system:registry</strong></span> role added, you can only push images to the registry in your project.
						</p></div></div><p class="simpara">
						In the following examples, use:
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140294604311664" scope="col">Component</th><th align="left" valign="top" id="idm140294604310576" scope="col">Value</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140294604311664"> <p>
										<span class="strong strong"><strong>&lt;registry_ip&gt;</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140294604310576"> <p>
										<code class="literal">172.30.124.220</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140294604311664"> <p>
										<span class="strong strong"><strong>&lt;port&gt;</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140294604310576"> <p>
										<code class="literal">5000</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140294604311664"> <p>
										<span class="strong strong"><strong>&lt;project&gt;</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140294604310576"> <p>
										<code class="literal">openshift</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140294604311664"> <p>
										<span class="strong strong"><strong>&lt;image&gt;</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140294604310576"> <p>
										<code class="literal">image</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140294604311664"> <p>
										<span class="strong strong"><strong>&lt;tag&gt;</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140294604310576"> <p>
										omitted (defaults to <code class="literal">latest</code>)
									</p>
									 </td></tr></tbody></table></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Pull an arbitrary image:
							</p><pre class="programlisting language-terminal">sh-4.2# podman pull &lt;name.io&gt;/&lt;image&gt;</pre></li><li class="listitem"><p class="simpara">
								Tag the new image with the form <code class="literal">&lt;registry_ip&gt;:&lt;port&gt;/&lt;project&gt;/&lt;image&gt;</code>. The project name must appear in this pull specification for OpenShift Container Platform to correctly place and later access the image in the registry:
							</p><pre class="programlisting language-terminal">sh-4.2# podman tag &lt;name.io&gt;/&lt;image&gt; image-registry.openshift-image-registry.svc:5000/openshift/&lt;image&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You must have the <code class="literal">system:image-builder</code> role for the specified project, which allows the user to write or push an image. Otherwise, the <code class="literal">podman push</code> in the next step will fail. To test, you can create a new project to push the image.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Push the newly tagged image to your registry:
							</p><pre class="programlisting language-terminal">sh-4.2# podman push image-registry.openshift-image-registry.svc:5000/openshift/&lt;image&gt;</pre></li></ol></div></li></ol></div></section><section class="section" id="checking-the-status-of-registry-pods_accessing-the-registry"><div class="titlepage"><div><div><h2 class="title">4.3. Checking the status of the registry pods</h2></div></div></div><p>
				As a cluster administrator, you can list the image registry pods running in the <code class="literal">openshift-image-registry</code> project and check their status.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List the pods in the <code class="literal">openshift-image-registry</code> project and view their status:
					</p><pre class="programlisting language-terminal">$ oc get pods -n openshift-image-registry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">NAME READY STATUS RESTARTS AGE
cluster-image-registry-operator-764bd7f846-qqtpb 1/1 Running 0 78m
image-registry-79fb4469f6-llrln 1/1 Running 0 77m
node-ca-hjksc 1/1 Running 0 73m
node-ca-tftj6 1/1 Running 0 77m
node-ca-wb6ht 1/1 Running 0 77m
node-ca-zvt9q 1/1 Running 0 74m</pre>

						</p></div></li></ul></div></section><section class="section" id="registry-viewing-logs_accessing-the-registry"><div class="titlepage"><div><div><h2 class="title">4.4. Viewing registry logs</h2></div></div></div><p>
				You can view the logs for the registry by using the <code class="literal">oc logs</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">oc logs</code> command with deployments to view the logs for the container image registry:
					</p><pre class="programlisting language-terminal">$ oc logs deployments/image-registry -n openshift-image-registry</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal">2015-05-01T19:48:36.300593110Z time="2015-05-01T19:48:36Z" level=info msg="version=v2.0.0+unknown"
2015-05-01T19:48:36.303294724Z time="2015-05-01T19:48:36Z" level=info msg="redis not configured" instance.id=9ed6c43d-23ee-453f-9a4b-031fea646002
2015-05-01T19:48:36.303422845Z time="2015-05-01T19:48:36Z" level=info msg="using inmemory layerinfo cache" instance.id=9ed6c43d-23ee-453f-9a4b-031fea646002
2015-05-01T19:48:36.303433991Z time="2015-05-01T19:48:36Z" level=info msg="Using OpenShift Auth handler"
2015-05-01T19:48:36.303439084Z time="2015-05-01T19:48:36Z" level=info msg="listening on :5000" instance.id=9ed6c43d-23ee-453f-9a4b-031fea646002</pre>

						</p></div></li></ul></div></section><section class="section" id="registry-accessing-metrics_accessing-the-registry"><div class="titlepage"><div><div><h2 class="title">4.5. Accessing registry metrics</h2></div></div></div><p>
				The OpenShift Container Registry provides an endpoint for <a class="link" href="https://prometheus.io/docs/introduction/overview/">Prometheus metrics</a>. Prometheus is a stand-alone, open source systems monitoring and alerting toolkit.
			</p><p>
				The metrics are exposed at the <span class="strong strong"><strong><span class="emphasis"><em>/extensions/v2/metrics</em></span></strong></span> path of the registry endpoint.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					You can access the metrics by running a metrics query using a cluster role.
				</p></div><p>
				<span class="strong strong"><strong>Cluster role</strong></span>
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a cluster role if you do not already have one to access the metrics:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF | oc create -f -
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus-scraper
rules:
- apiGroups:
  - image.openshift.io
  resources:
  - registry/metrics
  verbs:
  - get
EOF</pre></li><li class="listitem"><p class="simpara">
						Add this role to a user, run the following command:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-cluster-role-to-user prometheus-scraper &lt;username&gt;</pre></li></ol></div><p>
				<span class="strong strong"><strong>Metrics query</strong></span>
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Get the user token.
					</p><pre class="programlisting language-terminal">openshift:
$ oc whoami -t</pre></li><li class="listitem"><p class="simpara">
						Run a metrics query in node or inside a pod, for example:
					</p><pre class="programlisting language-terminal">$ curl --insecure -s -u &lt;user&gt;:&lt;secret&gt; \ <span id="CO18-1"><!--Empty--></span><span class="callout">1</span>
    https://image-registry.openshift-image-registry.svc:5000/extensions/v2/metrics | grep imageregistry | head -n 20</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
							
<pre class="programlisting language-terminal"># HELP imageregistry_build_info A metric with a constant '1' value labeled by major, minor, git commit &amp; git version from which the image registry was built.
# TYPE imageregistry_build_info gauge
imageregistry_build_info{gitCommit="9f72191",gitVersion="v3.11.0+9f72191-135-dirty",major="3",minor="11+"} 1
# HELP imageregistry_digest_cache_requests_total Total number of requests without scope to the digest cache.
# TYPE imageregistry_digest_cache_requests_total counter
imageregistry_digest_cache_requests_total{type="Hit"} 5
imageregistry_digest_cache_requests_total{type="Miss"} 24
# HELP imageregistry_digest_cache_scoped_requests_total Total number of scoped requests to the digest cache.
# TYPE imageregistry_digest_cache_scoped_requests_total counter
imageregistry_digest_cache_scoped_requests_total{type="Hit"} 33
imageregistry_digest_cache_scoped_requests_total{type="Miss"} 44
# HELP imageregistry_http_in_flight_requests A gauge of requests currently being served by the registry.
# TYPE imageregistry_http_in_flight_requests gauge
imageregistry_http_in_flight_requests 1
# HELP imageregistry_http_request_duration_seconds A histogram of latencies for requests to the registry.
# TYPE imageregistry_http_request_duration_seconds summary
imageregistry_http_request_duration_seconds{method="get",quantile="0.5"} 0.01296087
imageregistry_http_request_duration_seconds{method="get",quantile="0.9"} 0.014847248
imageregistry_http_request_duration_seconds{method="get",quantile="0.99"} 0.015981195
imageregistry_http_request_duration_seconds_sum{method="get"} 12.260727916000022</pre>

						</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO18-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The <code class="literal">&lt;user&gt;</code> object can be arbitrary, but <code class="literal">&lt;secret&gt;</code> tag must use the user token.
							</div></dd></dl></div></li></ol></div></section><section class="section _additional-resources" id="accessing-the-registry-additional-resources"><div class="titlepage"><div><div><h2 class="title">4.6. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on allowing pods in a project to reference images in another project, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/images/#images-allow-pods-to-reference-images-across-projects_using-image-pull-secrets">Allowing pods to reference images across projects</a>.
					</li><li class="listitem">
						A <code class="literal">kubeadmin</code> can access the registry until deleted. See <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#removing-the-kubeadmin-user">Removing the kubeadmin user</a> for more information.
					</li><li class="listitem">
						For more information on configuring an identity provider, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#understanding-identity-provider-configuration">Understanding identity provider configuration</a>.
					</li></ul></div></section></section><section class="chapter" id="securing-exposing-registry"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Exposing the registry</h1></div></div></div><p>
			By default, the OpenShift image registry is secured during cluster installation so that it serves traffic through TLS. Unlike previous versions of OpenShift Container Platform, the registry is not exposed outside of the cluster at the time of installation.
		</p><section class="section" id="registry-exposing-default-registry-manually_securing-exposing-registry"><div class="titlepage"><div><div><h2 class="title">5.1. Exposing a default registry manually</h2></div></div></div><p>
				Instead of logging in to the default OpenShift image registry from within the cluster, you can gain external access to it by exposing it with a route. This external access enables you to log in to the registry from outside the cluster using the route address and to tag and push images to an existing project by using the route host.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The following prerequisites are automatically performed:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Deploy the Registry Operator.
							</li><li class="listitem">
								Deploy the Ingress Operator.
							</li></ul></div></li><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					You can expose the route by using the <code class="literal">defaultRoute</code> parameter in the <code class="literal">configs.imageregistry.operator.openshift.io</code> resource.
				</p></div><p>
				To expose the registry using the <code class="literal">defaultRoute</code>:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set <code class="literal">defaultRoute</code> to <code class="literal">true</code>:
					</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io/cluster --patch '{"spec":{"defaultRoute":true}}' --type=merge</pre></li><li class="listitem"><p class="simpara">
						Get the default registry route:
					</p><pre class="programlisting language-terminal">$ HOST=$(oc get route default-route -n openshift-image-registry --template='{{ .spec.host }}')</pre></li><li class="listitem"><p class="simpara">
						Get the certificate of the Ingress Operator:
					</p><pre class="programlisting language-terminal">$ oc get secret -n openshift-ingress  router-certs-default -o go-template='{{index .data "tls.crt"}}' | base64 -d | sudo tee /etc/pki/ca-trust/source/anchors/${HOST}.crt  &gt; /dev/null</pre></li><li class="listitem"><p class="simpara">
						Enable the cluster’s default certificate to trust the route using the following commands:
					</p><pre class="programlisting language-terminal">$ sudo update-ca-trust enable</pre></li><li class="listitem"><p class="simpara">
						Log in with podman using the default route:
					</p><pre class="programlisting language-terminal">$ sudo podman login -u kubeadmin -p $(oc whoami -t) $HOST</pre></li></ol></div></section><section class="section" id="registry-exposing-secure-registry-manually_securing-exposing-registry"><div class="titlepage"><div><div><h2 class="title">5.2. Exposing a secure registry manually</h2></div></div></div><p>
				Instead of logging in to the OpenShift image registry from within the cluster, you can gain external access to it by exposing it with a route. This allows you to log in to the registry from outside the cluster using the route address, and to tag and push images to an existing project by using the route host.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The following prerequisites are automatically performed:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Deploy the Registry Operator.
							</li><li class="listitem">
								Deploy the Ingress Operator.
							</li></ul></div></li><li class="listitem">
						You have access to the cluster as a user with the <code class="literal">cluster-admin</code> role.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					You can expose the route by using <code class="literal">DefaultRoute</code> parameter in the <code class="literal">configs.imageregistry.operator.openshift.io</code> resource or by using custom routes.
				</p></div><p>
				To expose the registry using <code class="literal">DefaultRoute</code>:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set <code class="literal">DefaultRoute</code> to <code class="literal">True</code>:
					</p><pre class="programlisting language-terminal">$ oc patch configs.imageregistry.operator.openshift.io/cluster --patch '{"spec":{"defaultRoute":true}}' --type=merge</pre></li><li class="listitem"><p class="simpara">
						Log in with <code class="literal">podman</code>:
					</p><pre class="programlisting language-terminal">$ HOST=$(oc get route default-route -n openshift-image-registry --template='{{ .spec.host }}')</pre><pre class="programlisting language-terminal">$ podman login -u kubeadmin -p $(oc whoami -t) --tls-verify=false $HOST <span id="CO19-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO19-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								<code class="literal">--tls-verify=false</code> is needed if the cluster’s default certificate for routes is untrusted. You can set a custom, trusted certificate as the default certificate with the Ingress Operator.
							</div></dd></dl></div></li></ol></div><p>
				To expose the registry using custom routes:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a secret with your route’s TLS keys:
					</p><pre class="programlisting language-terminal">$ oc create secret tls public-route-tls \
    -n openshift-image-registry \
    --cert=&lt;/path/to/tls.crt&gt; \
    --key=&lt;/path/to/tls.key&gt;</pre><p class="simpara">
						This step is optional. If you do not create a secret, the route uses the default TLS configuration from the Ingress Operator.
					</p></li><li class="listitem"><p class="simpara">
						On the Registry Operator:
					</p><pre class="programlisting language-yaml">spec:
  routes:
    - name: public-routes
      hostname: myregistry.mycorp.organization
      secretName: public-route-tls
...</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Only set <code class="literal">secretName</code> if you are providing a custom TLS configuration for the registry’s route.
						</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/5419501">Error creating TLS secret</a>
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140294603208480"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                        <span class="status-description"></span>
                        <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>
                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                            <div id="privacy_policy">We've updated our <a href='http://www.redhat.com/en/about/privacy-policy' class='privacy-policy'>Privacy Statement</a> effective September 15, 2023.
                            </div>
                          </div>
                        </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="https://access.redhat.com/chrome_themes/nimbus/img/rh-summit-red-a.svg" alt="Red Hat Summit" /> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  </body>
</html>
