<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<meta property="og:title" content="Specialized hardware and driver enablement OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta property="og:description" content="This document provides an overview of hardware enablement in OpenShift Container Platform." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="This document provides an overview of hardware enablement in OpenShift Container Platform." />
<meta name="twitter:title" content="Specialized hardware and driver enablement OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<meta name="twitter:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="title" content="Specialized hardware and driver enablement OpenShift Container Platform 4.13 | Red Hat Customer Portal" />
<link rel="alternate" hreflang="en" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="ko" href="https://access.redhat.com/documentation/ko-kr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="zh-hans" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="ja" href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="es" href="https://access.redhat.com/documentation/es-es/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="ru" href="https://access.redhat.com/documentation/ru-ru/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="pt-br" href="https://access.redhat.com/documentation/pt-br/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="it" href="https://access.redhat.com/documentation/it-it/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="de" href="https://access.redhat.com/documentation/de-de/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="fr" href="https://access.redhat.com/documentation/fr-fr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="zh-hant" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="id" href="https://access.redhat.com/documentation/id-id/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="th" href="https://access.redhat.com/documentation/th-th/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<link rel="alternate" hreflang="vi" href="https://access.redhat.com/documentation/vi-vn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/index" />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="revision" product="b0738f19-59ac-47eb-9512-8a439cd6dfb0" title="f067d142-09f1-4ebe-a7c2-1d74033d4df6" page="8b7be9ea-3c8a-440a-8138-fd164a107696" revision="a9b2f940183f7b22b049f578bab422b40265d849:en-us" body="d194d6f357d67b2aed9cc00b917bd273.html" toc="76a0d33f5983de608581414377a44ab4.json" />

    <title>Specialized hardware and driver enablement OpenShift Container Platform 4.13 | Red Hat Customer Portal</title>
    <link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />
<link rel="stylesheet" media="all" href="/sites/dxp-docs/files/css/css__Xq4GfgPDJw9K_yYJFmlRZGJeCENu3R3r4s0K7Tr_9g.css" />

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"documentation\/en-us\/openshift_container_platform\/4.13\/html-single\/specialized_hardware_and_driver_enablement\/index","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"red_hat_jwt":{"client_id":"customer-portal","cookie_name":"rh_jwt","leeway":"0","realm":"redhat-external","sso_host":"https:\/\/sso.redhat.com\/","user_integration":1,"user_plugin":"drupal_user_auth","use_external_js":0,"use_internal_js":0,"use_in_admin":0},"user":{"uid":0,"permissionsHash":"d8ea0bce2d740dacbdfe0257cf55baa0e33f7fb8468a26d055ce75daaaa2d315"}}</script>
<script src="/sites/dxp-docs/files/js/js_EQWKo9EokWkWS99x_e1oM-NEM0zlKyTkp_83mGdm5Ks.js"></script>

    <!-- CP_PRIMER_HEAD -->  <!-- TrustArc & DTM -->
  <script src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
  <script src="//www.redhat.com/dtm.js"></script><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="dxp-kbase-prod-139-77b4fb8768-25dr9" />
<meta name="avalon-version" content="27861f77" />
<meta name="cp-chrome-build-date" content="2023-10-06T19:17:59.039Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />
<!-- title -->
<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>
<!-- /title -->
<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en", 
        version   : "27861f77",
        builddate : "2023-10-06T19:17:59.039Z",        fetchdate : "2023-10-10T17:45:08-0400",        nrid      : "NOLONGERSUPPORTED",
        nrlk      : "NOLONGERSUPPORTED"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico" /><link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/bootstrap-grid.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/main.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/components.css?v=27861f77" />
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/pages.css?v=27861f77" />

<link href="https://access.redhat.com/webassets/avalon/s/chosen.css?v=27861f77" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]--><noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/pfe-navigation--lightdom.min.css" />
<!-- /cssInclude -->
<script src="https://access.redhat.com/webassets/avalon/j/public_modules/node_modules/@cpelements/pfe-navigation/dist/ie-polyfills.js?v=27861f77"></script>

<script async>
  if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
    import("https://www.redhatstatic.com/dx/v1-alpha/es-module-shims@1.7.3.js");
  }
</script>
<script type="importmap">
{
  "imports": {
    "@patternfly/elements/" : "https://www.redhatstatic.com/dx/v1-alpha/@patternfly/elements@2.2.2/",
    "@rhds/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/elements/",
    "@rhds/elements/lib/":"https://www.redhatstatic.com/dx/v1-alpha/@rhds/elements@1.1.0/lib/",
    "@cpelements/elements/":"https://www.redhatstatic.com/dx/v1-alpha/@cpelements/elements@2.0.0-alpha.7/elements/"
  }
}
</script><script type="text/javascript" src="https://access.redhat.com/webassets/avalon/j/lib/require.js?v=27861f77" data-main="/webassets/avalon/j/"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
<script type="text/javascript" src="https://access.redhat.com/chrome_themes/nimbus/js/new-nav.js?v=27861f77" ></script>
<!-- /CP_PRIMER_HEAD -->

  </head>
  <body>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
      <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden">Skip to navigation</a>
            <a href="#cp-main" class="skip-link visually-hidden">Skip to main content</a>            <nav id="portal-utility-nav" class="utility-navigation utility-navigation--bar hidden-at-mobile" data-analytics-region="utility" aria-labelledby="nav__utility-nav--desktop">
                <h3 id="nav__utility-nav--desktop" class="element-invisible">Utilities
                </h3>
                <ul aria-labelledby="nav__utility-nav--desktop">
                    <li id="nav-subscription" data-portal-tour-1="1">
                        <a class="top-nav-subscriptions" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                        </a>
                    </li>
                    <li id="nav-downloads" data-portal-tour-1="2">
                        <a class="top-nav-downloads" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                        </a>
                    </li>
                    <li id="nav-containers">
                        <a class="top-nav-containers" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                        </a>
                    </li>
                    <li id="nav-support" data-portal-tour-1="3">
                        <a class="top-nav-support-cases" data-analytics-level="2" data-analytics-category="Utilities" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                        </a>
                    </li>
                </ul>
            </nav>

            <pfe-navigation id="pfe-navigation" data-analytics-region="mega menu">
                <div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper">
                    <a href="https://access.redhat.com/" class="pfe-navigation__logo-link" data-analytics-text="logo" data-analytics-category="MM|logo">
                        <img class="pfe-navigation__logo-image" alt="Red Hat Customer Portal" src="https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg" />
                    </a>
                </div>

                <nav class="pfe-navigation" aria-label="Main Navigation" data-analytics-region="main nav">
                    <ul class="pfe-navigation__menu" id="pfe-navigation__menu">                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-subscription--mobile" data-portal-tour-1="1">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Subscription" href="https://access.redhat.com/management/" >Subscriptions
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-downloads--mobile" data-portal-tour-1="2">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Downloads" href="https://access.redhat.com/downloads/" >Downloads
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-containers--mobile">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Containers" href="https://catalog.redhat.com/software/containers/explore/" >Containers
                            </a>
                        </li>
                        <li class="pfe-navigation__menu-item hidden-at-tablet hidden-at-desktop" id="nav-support--mobile" data-portal-tour-1="3">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Support Cases" href="https://access.redhat.com/support/cases/" >Support Cases
                            </a>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Products and Services">Products &amp; Services
                            </a>
                            <div class="pfe-navigation__dropdown has-primary-detail">                                <div class="desktop-col-span-2 tablet-col-span-all">
                                    <h3>
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Products" href="https://access.redhat.com/products/">Products
                                        </a>
                                    </h3>
                                    <slot name="main-menu__dropdown--product__product-listing"></slot>
                                </div>                                <div>
                                    <h3 id="nav__products__support">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Support" href="https://access.redhat.com/support">Support
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__support">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Production Support" href="https://access.redhat.com/support/offerings/production/">Production Support
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Development Support" href="https://access.redhat.com/support/offerings/developer/">Development Support
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Support" data-analytics-text="Product Life Cycles" href="https://access.redhat.com/product-life-cycles/">Product Life Cycles
                                                    </a></li>
                                    </ul>

                                    <h3 id="nav__products__services">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Services" href="https://www.redhat.com/en/services">Services
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__services">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Consulting" href="https://www.redhat.com/en/services/consulting">Consulting
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Technical Account Management" href="https://access.redhat.com/support/offerings/tam/">Technical Account Management
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Services" data-analytics-text="Training and Certifications" href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__products__documentation">
                                        <a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Documentation" href="https://access.redhat.com/documentation">Documentation
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__products__documentation">
                                        <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Products and Services|Documentation" data-analytics-text="All Documentation" data-analytics-linkType="cta" href="https://access.redhat.com/documentation">All Documentation
                                        </a>
                                    </pfe-cta>

                                    <h3 id="nav__products__catalog"><a data-analytics-level="2" data-analytics-category="Products and Services" data-analytics-text="Ecosystem Catalog" href="https://catalog.redhat.com/">Ecosystem Catalog
                                        </a></h3>
                                        <ul aria-labelledby="nav__products__catalog">
                                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Red Hat Partner Ecosystem" href="https://access.redhat.com/ecosystem/">Red Hat Partner Ecosystem
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Products and Services|Ecosystem Catalog" data-analytics-text="Partner Resources" href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources
                                                    </a></li>
                                        </ul>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Tools" href="https://access.redhat.com/labs/">Tools
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__tools__tools" data-analytics-level="2" data-analytics-text="Tools" data-analytics-category="Tools">Tools
                                    </h3>
                                    <ul aria-labelledby="nav__tools__tools">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Solution Engine" href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Packages" href="https://access.redhat.com/downloads/content/package-browser">Packages
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Tools" data-analytics-text="Errata" href="https://access.redhat.com/errata/">Errata
                                                    </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__tools__labs">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Customer Portal Labs" href="https://access.redhat.com/labs/">Customer Portal Labs
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__tools__labs">
                                        <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Configuration" href="https://access.redhat.com/labs/#!?type=config">Configuration
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Deployment" href="https://access.redhat.com/labs/#!?type=deploy">Deployment
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Security" href="https://access.redhat.com/labs/#!?type=security">Security
                                                    </a></li>                                                    <li><a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="Troubleshooting" href="https://access.redhat.com/labs/#!?type=troubleshoot">Troubleshoot
                                                        </a></li>
                                    </ul>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Tools|Customer Portal Labs" data-analytics-text="All Labs" data-analytics-linkType="cta" href="https://access.redhat.com/labs/">All labs
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h4 id="nav__tools__red-hat-insights">
                                        <a data-analytics-level="2" data-analytics-category="Tools" data-analytics-text="Red Hat Insights" href="//www.redhat.com/en/technologies/management/insights">Red Hat Insights
                                        </a>
                                    </h4>
                                    <p>Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Learn more" href="https://www.redhat.com/en/technologies/management/insights">Learn More
                                    </a>
                                    <br>
                                    <a data-analytics-level="3" data-analytics-category="Tools|Red Hat Insights" data-analytics-text="Go to Insights" href="https://cloud.redhat.com/insights">Go to Insights
                                    </a>
                                </div>
                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Security" href="https://access.redhat.com/security/">Security
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="security__security-center">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Red Hat Product Security Center" href="https://access.redhat.com/security">Red Hat Product Security Center
                                        </a>
                                    </h3>
                                    <p>Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.
                                    </p>
                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Security|Red Hat Product Security Center" data-analytics-text="Product Security Center" data-analytics-linkType="cta" href="https://access.redhat.com/security/">Product Security Center
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__updates" data-analytics-level="2" data-analytics-text="Security Updates" data-analytics-category="Security">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Security Updates" href="/security">Security Updates
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__updates">
                                        <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Advisories" href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Red Hat CVE Database" href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="Security Labs" href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs
                                                    </a></li>
                                    </ul>
                                    <p class="margin-top-xl">Keep your systems secure with Red Hat&#039;s specialized responses to security vulnerabilities.
                                    </p>
                                    <pfe-cta>
                                        <a data-analytics-level="3" data-analytics-category="Security|Security Updates" data-analytics-text="View Responses" data-analytics-linkType="cta" href="https://access.redhat.com/security/vulnerability">View Responses
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__security__resources">
                                        <a data-analytics-level="2" data-analytics-category="Security" data-analytics-text="Resources" href="https://access.redhat.com/security/overview">Resources
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__security__resources">                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Blog" href="//redhat.com/en/blog/channel/security">Security Blog
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Security Measurement" href="https://www.redhat.com/security/data/metrics/">Security Measurement
                                                    </a></li>
                                                    <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Severity Ratings" href="https://access.redhat.com/security/updates/classification/">Severity Ratings
                                                        </a></li>
                                                        <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Backporting Policies" href="https://access.redhat.com/security/updates/backporting/">Backporting Policies
                                                            </a></li>
                                                            <li><a data-analytics-level="3" data-analytics-category="Security|Resources" data-analytics-text="Product Signing (GPG) Keys" href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys
                                                                </a></li>
                                    </ul>
                                </div>

                            </div>
                        </li>                        <li class="pfe-navigation__menu-item">
                            <a href="https://access.redhat.com/community/" class="pfe-navigation__menu-link" data-analytics-level="1" data-analytics-text="Community">Community
                            </a>
                            <div class="pfe-navigation__dropdown pfe-navigation__dropdown--3-column">                                <div>
                                    <h3 id="nav__community__cp-community">
                                        <a href="https://access.redhat.com/community" data-analytics-level="2" data-analytics-text="Customer Portal Community" data-analytics-text="Customer Portal Community" data-analytics-category="Community">Customer Portal Community
                                        </a>
                                    </h3>
                                    <ul aria-labelledby="nav__community__cp-community">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Discussions" href="https://access.redhat.com/discussions">Discussions
                                            </a></li>                                                <li><a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Private Groups" href="https://access.redhat.com/groups/">Private Groups
                                                    </a></li>
                                    </ul>

                                    <pfe-cta pfe-priority="primary">
                                        <a data-analytics-level="3" data-analytics-category="Community|Customer Portal Community" data-analytics-text="Community Activity" data-analytics-linkType="cta" href="https://access.redhat.com/community/">Community Activity
                                        </a>
                                    </pfe-cta>
                                </div>                                <div>
                                    <h3 id="nav__community__events" data-analytics-level="2" data-analytics-text="Customer Events" data-analytics-category="Community">Customer Events
                                    </h3>
                                    <ul aria-labelledby="nav__community__events">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Convergence" href="https://access.redhat.com/convergence/">Red Hat Convergence
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-category="Community|Customer Events" data-analytics-text="Red Hat Summit" href="http://www.redhat.com/summit/">Red Hat Summit
                                                </a></li>
                                    </ul>
                                </div>                                <div>
                                    <h3 id="nav__community__stories" data-analytics-level="2" data-analytics-text="Stories" data-analytics-category="Community">Stories
                                    </h3>
                                    <ul aria-labelledby="nav__community__stories">
                                        <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Red Hat Subscription Value" href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value
                                            </a></li>
                                            <li><a data-analytics-level="3" data-analytics-text="You Asked. We Acted." data-analytics-category="Community|Stories" href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.
                                                </a></li>
                                                <li><a data-analytics-level="3" data-analytics-category="Community|Stories" data-analytics-text="Open Source Communities" href="http://www.redhat.com/en/open-source">Open Source Communities
                                                    </a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>                </nav>                <div id="site-search" slot="search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom" path="/webassets/avalon/j/data.json"></cp-search-autocomplete>                            <div>Or <a href="/support/cases/#/troubleshoot">troubleshoot an issue</a>.
                            </div>
                        </form>
                    </div>
                </div>


                <div slot="secondary-links" id="localesMenu">
                    <button class="pfe-navigation__secondary-link">
                        <pfe-icon icon="web-icon-globe" size="sm" aria-hidden="true"></pfe-icon>English
                    </button>

                    <pfe-navigation-dropdown dropdown-width="single">
                        <h2 class="utility-header">Select Your Language
                        </h2>
                        <ul class="reset">
                            <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en" data-analytics-text="English">English</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko" data-analytics-text="Korean">한국어</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja" data-analytics-text="Japanese">日本語</a></li>
                            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN" data-analytics-text="Chinese">中文 (中国)</a></li>
                        </ul>

                    </pfe-navigation-dropdown>
                </div>                <rh-account-dropdown slot="account"></rh-account-dropdown>                <pfe-primary-detail breakpoint-width="600" class="main-menu__dropdown--product__product-listing" slot="main-menu__dropdown--product__product-listing" consistent-height>
                    <h3 slot="details-nav">Infrastructure and Management                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Enterprise Linux" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Satellite" href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Subscription Management" href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Insights" href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights
                                </a>
                            </li>
                            <li><a data-analytics-level="3" data-analytics-category="Products and Services|Products:Infrastructure and Management" data-analytics-text="Red Hat Ansible Automation Platform" href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform
                                </a></li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Cloud Computing                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift" href="https://access.redhat.com/products/openshift">Red Hat OpenShift
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenStack Platform" href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Container Platform" href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat OpenShift Data Science" href="https://access.redhat.com/products/red-hat-openshift-data-science/">Red Hat OpenShift Data Science
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Dedicated" href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing Platform" data-analytics-text="Red Hat Advanced Cluster Security for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/">Red Hat Advanced Cluster Security for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Advanced Cluster Management for Kubernetes" href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat Quay" href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat CodeReady Workspaces" href="https://access.redhat.com/products/red-hat-codeready-workspaces/">OpenShift Dev Spaces
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Cloud Computing" data-analytics-text="Red Hat OpenShift Service on AWS" href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Storage                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Gluster Storage" href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Hyperconverged Infrastructure" href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Ceph Storage" href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Storage" data-analytics-text="Red Hat Openshift Container Storage" href="https://access.redhat.com/products/red-hat-openshift-data-foundation">Red Hat OpenShift Data Foundation
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Runtimes                    </h3>
                    <div slot="details">
                        <ul>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Runtimes" href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Enterprise Application Platform" href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Data Grid" href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat JBoss Web Server" href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat Single Sign On" href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat support for Spring Boot" href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Node.js" href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js
                                </a>
                            </li>                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Runtimes" data-analytics-text="Red Hat build of Quarkus" href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus
                                </a>
                            </li>
                        </ul>
                    </div>

                    <h3 slot="details-nav">Integration and Automation                    </h3>
                    <div slot="details">
                        <ul class="border-bottom" id="portal-menu-border-bottom">
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Application Foundations" href="https://access.redhat.com/products/red-hat-application-foundations/">Red Hat Application Foundations
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat Fuse" href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat AMQ" href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ
                                </a>
                            </li>
                            <li>
                                <a data-analytics-level="3" data-analytics-category="Products and Services|Products:Integration and Automation" data-analytics-text="Red Hat 3scale API Management" href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div slot="details-nav--footer">
                        <pfe-cta pfe-priority="primary">
                            <a href="https://access.redhat.com/products/" class="pfe-navigation__menu-link" data-analytics-level="2" data-analytics-text="All Products" data-analytics-category="Products and Services|Products:" data-analytics-linkType="cta">All Products
                            </a>
                        </pfe-cta>
                    </div>
                </pfe-primary-detail>

            </pfe-navigation>

            <div id="scroll-anchor"></div>

            <!--[if IE 8]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>
                You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
                </div>
            <![endif]-->
            <!--[if IE 9]>
                <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                <span class="icon-warning alert-icon" aria-hidden="true"></span>As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
                </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">                            <!-- /CP_PRIMER_HEADER -->

      <div class="container">
        

                                                                                                        <script>breadcrumbs = [["Products & Services","\/products\/"],["Product Documentation","\/documentation"],["OpenShift Container Platform","\/documentation\/en-us\/openshift_container_platform"],["4.13","\/documentation\/en-us\/openshift_container_platform\/4.13"],["Specialized hardware and driver enablement","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/specialized_hardware_and_driver_enablement"],["Specialized hardware and driver enablement","\/documentation\/en-us\/openshift_container_platform\/4.13\/html\/specialized_hardware_and_driver_enablement\/--single-page-document--"]]</script>

<div data-drupal-messages-fallback class="hidden"></div>


    </div>
        <div class="container">
        

  

  


  <article class="pvof-doc__content-wrapper__outer pvof-doc__content-wrapper__outer--css-not-removed">
    <script>
      'use strict';

            var $outerWrapper = document.querySelector('.pvof-doc__content-wrapper__outer');
      if ($outerWrapper && $outerWrapper.closest) {
        var $containerWrapper = $outerWrapper.closest('.container');
        if ($containerWrapper) {
          $containerWrapper.classList.remove('container');
          $containerWrapper.classList.add('j-chrome-content-container');
        }
      }

            var cssRemoved = false;
      try {
        var $crapCss = document.querySelectorAll(
          'link[href*="/chrome_themes/nimbus/css/pages.css"], link[href*="/chrome_themes/nimbus/css/components.css"]'
        );
        if ($crapCss.length) {
          for (let index = 0; index < $crapCss.length; index++) {
            const $stylesheet = $crapCss[index];
            $stylesheet.remove();
          }
        }
        cssRemoved = true;
      }
      catch (error) {
        console.error('Ran into an issue while trying to retheme page', error);
        cssRemoved = false;
      }

            if (cssRemoved) {
        var $pvofOuterWrapper = document.querySelector('.pvof-doc__content-wrapper__outer--css-not-removed');
        if ($pvofOuterWrapper) {
          $pvofOuterWrapper.classList.remove('pvof-doc__content-wrapper__outer--css-not-removed');
        }
      }
    </script>
    <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
    <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
    <div class="pvof-doc__content-wrapper pvof-doc__content-wrapper--has-sidebar">
                                <div class="pvof-doc__content-wrapper__inner j-superdoc j-superdoc--has-nav">
                            <div class="pvof-sidebar__wrapper j-doc-nav j-superdoc__nav">
            <div class="j-sidebar__menu-container">
              <button class="j-sidebar__menu-trigger content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-text">Jump To</span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>

              <div class="pvof-sidebar__inner-wrapper j-doc-nav__wrapper content-expander">
                <div class="j-sidebar__menu-details-container">
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--expand">
                    Expand all
                  </button>
                  <button class="j-sidebar__menu-details-button j-sidebar__menu-details-button--collapse">
                    Collapse all
                  </button>
                </div>
                

  <nav id="pvof-doc__toc" class="pvof-doc__toc">
  <h2 class="j-doc-nav__title" id="j-doc-nav__title">
    Table of contents
  </h2>
  <div class="pvof-doc__toc-inner">
              <ol class="j-doc-nav__list" aria-labelledby="j-doc-nav__title">
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" class="j-doc-nav__link ">
    Specialized hardware and driver enablement
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#about-hardware-enablement" class="j-doc-nav__link ">
    1. About specialized hardware and driver enablement
  </a>
  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#driver-toolkit" class="j-doc-nav__link j-doc-nav__link--has-children">
    2. Driver Toolkit
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2. Driver Toolkit"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2. Driver Toolkit"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#about-driver-toolkit_driver-toolkit" class="j-doc-nav__link ">
    2.1. About the Driver Toolkit
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#pulling-the-driver-toolkit_driver-toolkit" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.2. Pulling the Driver Toolkit container image
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.2. Pulling the Driver Toolkit container image"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.2. Pulling the Driver Toolkit container image"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#pulling-the-driver-toolkit-from-registry" class="j-doc-nav__link ">
    2.2.1. Pulling the Driver Toolkit container image from registry.redhat.io
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#pulling-the-driver-toolkit-from-payload" class="j-doc-nav__link ">
    2.2.2. Finding the Driver Toolkit image URL in the payload
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#using-the-driver-toolkit_driver-toolkit" class="j-doc-nav__link j-doc-nav__link--has-children">
    2.3. Using the Driver Toolkit
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "2.3. Using the Driver Toolkit"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "2.3. Using the Driver Toolkit"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#create-simple-kmod-image_driver-toolkit" class="j-doc-nav__link ">
    2.3.1. Build and run the simple-kmod driver container on a cluster
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#additional-resources_driver-toolkkit-id" class="j-doc-nav__link ">
    2.4. Additional resources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3. Node Feature Discovery Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3. Node Feature Discovery Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3. Node Feature Discovery Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#about-node-feature-discovery-operator_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.1. About the Node Feature Discovery Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#installing-the-node-feature-discovery-operator_node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.2. Installing the Node Feature Discovery Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.2. Installing the Node Feature Discovery Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.2. Installing the Node Feature Discovery Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#install-operator-cli_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.2.1. Installing the NFD Operator using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#install-operator-web-console_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.2.2. Installing the NFD Operator using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#using-the-node-feature-discovery-operator_node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.3. Using the Node Feature Discovery Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.3. Using the Node Feature Discovery Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.3. Using the Node Feature Discovery Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#create-cd-cli_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.3.1. Create a NodeFeatureDiscovery instance using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#create-nfd-cr-web-console_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.3.2. Create a NodeFeatureDiscovery CR using the web console
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#configuring-the-node-feature-discovery_node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.4. Configuring the Node Feature Discovery Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.4. Configuring the Node Feature Discovery Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.4. Configuring the Node Feature Discovery Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#configuring-node-feature-discovery-operator-core_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.4.1. core
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#configuring-node-feature-discovery-operator-sources_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.4.2. sources
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#using-the-nfd-topology-updater_node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.5. Using the NFD Topology Updater
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.5. Using the NFD Topology Updater"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.5. Using the NFD Topology Updater"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#noderesourcetopology-cr" class="j-doc-nav__link ">
    3.5.1. NodeResourceTopology CR
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#nfd-topology-updater-command-line-flags_node-feature-discovery-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    3.5.2. NFD Topology Updater command line flags
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "3.5.2. NFD Topology Updater command line flags"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "3.5.2. NFD Topology Updater command line flags"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#nfd-topology-updater-oneshot_node-feature-discovery-operator" class="j-doc-nav__link ">
    3.5.2.1. -oneshot
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                      

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4. Kernel Module Management Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4. Kernel Module Management Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4. Kernel Module Management Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#about-kmm_kernel-module-management-operator" class="j-doc-nav__link ">
    4.1. About the Kernel Module Management Operator
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-install_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.2. Installing the Kernel Module Management Operator
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.2. Installing the Kernel Module Management Operator"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.2. Installing the Kernel Module Management Operator"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-install-using-web-console_kernel-module-management-operator" class="j-doc-nav__link ">
    4.2.1. Installing the Kernel Module Management Operator using the web console
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-install-using-cli_kernel-module-management-operator" class="j-doc-nav__link ">
    4.2.2. Installing the Kernel Module Management Operator by using the CLI
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-install-older-version_kernel-module-management-operator" class="j-doc-nav__link ">
    4.2.3. Installing the Kernel Module Management Operator on earlier versions of OpenShift Container Platform
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-deploy-kernel-modules_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.3. Kernel module deployment
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.3. Kernel module deployment"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.3. Kernel module deployment"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-creating-module-cr_kernel-module-management-operator" class="j-doc-nav__link ">
    4.3.1. The Module custom resource definition
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-setting-soft-dependencies-between-kernel-modules_kernel-module-management-operator" class="j-doc-nav__link ">
    4.3.2. Set soft dependencies between kernel modules
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-security_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.3.3. Security and permissions
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.3.3. Security and permissions"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.3.3. Security and permissions"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#serviceaccounts-and-securitycontextconstraint_kernel-module-management-operator" class="j-doc-nav__link ">
    4.3.3.1. ServiceAccounts and SecurityContextConstraints
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#pod-security-standards_kernel-module-management-operator" class="j-doc-nav__link ">
    4.3.3.2. Pod security standards
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-replacing-in-tree-modules-with-out-of-tree-modules_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.4. Replacing in-tree modules with out-of-tree modules
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.4. Replacing in-tree modules with out-of-tree modules"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.4. Replacing in-tree modules with out-of-tree modules"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-example-cr_kernel-module-management-operator" class="j-doc-nav__link ">
    4.4.1. Example Module CR
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-creating-moduleloader-image_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.5. Using a ModuleLoader image
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.5. Using a ModuleLoader image"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.5. Using a ModuleLoader image"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-running-depmod_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.5.1. Running depmod
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.5.1. Running depmod"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.5.1. Running depmod"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#example-dockerfile_kernel-module-management-operator" class="j-doc-nav__link ">
    4.5.1.1. Example Dockerfile
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-building-in-cluster_kernel-module-management-operator" class="j-doc-nav__link ">
    4.5.2. Building in the cluster
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-using-driver-toolkit_kernel-module-management-operator" class="j-doc-nav__link ">
    4.5.3. Using the Driver Toolkit
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-using-signing-with-kmm_kernel-module-management-operator" class="j-doc-nav__link ">
    4.6. Using signing with Kernel Module Management (KMM)
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-adding-the-keys-for-secureboot_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.7. Adding the keys for secureboot
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.7. Adding the keys for secureboot"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.7. Adding the keys for secureboot"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-checking-the-keys_kernel-module-management-operator" class="j-doc-nav__link ">
    4.7.1. Checking the keys
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-signing-a-prebuilt-driver-container_kernel-module-management-operator" class="j-doc-nav__link ">
    4.8. Signing a pre-built driver container
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-building-and-signing-a-moduleloader-container-image_kernel-module-management-operator" class="j-doc-nav__link ">
    4.9. Building and signing a ModuleLoader container image
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-customizing-upgrades-for-kernel-modules_kernel-module-management-operator" class="j-doc-nav__link ">
    4.10. Customizing upgrades for kernel modules
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-kernel-module-loading_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.11. Day 1 kernel module loading
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.11. Day 1 kernel module loading"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.11. Day 1 kernel module loading"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-supported-use-cases_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.1. Day 1 supported use cases
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-oot-kernel-module-loading-flow_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.2. OOT kernel module loading flow
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-kernel-module-image_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.3. The kernel module image
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-in-tree-module-replacement_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.4. In-tree module replacement
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-mco-yaml-creation_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.5. MCO yaml creation
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-day1-machineconfigpool_kernel-module-management-operator" class="j-doc-nav__link ">
    4.11.6. The MachineConfigPool
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-debugging-and-troubleshooting_kernel-module-management-operator" class="j-doc-nav__link ">
    4.12. Debugging and troubleshooting
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-firmware-support_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.13. KMM firmware support
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.13. KMM firmware support"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.13. KMM firmware support"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-configuring-the-lookup-path-on-nodes_kernel-module-management-operator" class="j-doc-nav__link ">
    4.13.1. Configuring the lookup path on nodes
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-building-a-moduleloader-image_kernel-module-management-operator" class="j-doc-nav__link ">
    4.13.2. Building a ModuleLoader image
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-tuning-the-module-resource_kernel-module-management-operator" class="j-doc-nav__link ">
    4.13.3. Tuning the Module resource
  </a>
  
          </li>
              </ol>

  
          </li>
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-troubleshooting_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.14. Troubleshooting KMM
  </a>
                    <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.14. Troubleshooting KMM"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.14. Troubleshooting KMM"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                          

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-must-gather-tool_kernel-module-management-operator" class="j-doc-nav__link j-doc-nav__link--has-children">
    4.14.1. Using the must-gather tool
  </a>
                              <button class="j-doc-nav__children-toggle content-expander__trigger">
        <span class="visually-hidden j-doc-nav__children-toggle__expand-text">
          Expand section "4.14.1. Using the must-gather tool"
        </span>
        <span class="visually-hidden  j-doc-nav__children-toggle__collapse-text">
          Collapse section "4.14.1. Using the must-gather tool"
        </span>
      </button>

      <ol class="j-doc-nav__subnav j-superdoc-subnav content-expander">
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-gathering-data-for-kmm_kernel-module-management-operator" class="j-doc-nav__link ">
    4.14.1.1. Gathering data for KMM
  </a>
  
          </li>
                  <li class="j-superdoc-subnav__item">
                        

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#kmm-gathering-data-for-kmm-hub_kernel-module-management-operator" class="j-doc-nav__link ">
    4.14.1.2. Gathering data for KMM-Hub
  </a>
  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
              </ol>

  
          </li>
                  <li class="j-doc-nav__list-item">
                                    

    <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement#idm140302641719904" class="j-doc-nav__link ">
    Legal Notice
  </a>
  
          </li>
              </ol>
    
  </div>
</nav>


              </div>
            </div>
            <div class="j-options-container j-options-container--mobile">
              <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--options content-expander__trigger">
                <span class="j-sidebar__menu-trigger__open-headline">
                  Settings
                </span>
                <span class="j-sidebar__menu-trigger__close-text">Close</span>
              </button>
              

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language">
        Language:
      </label>
      <select id="j-doc-language" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/specialized_hardware_and_driver_enablement"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/specialized_hardware_and_driver_enablement/OpenShift_Container_Platform-4.13-Specialized_hardware_and_driver_enablement-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/specialized_hardware_and_driver_enablement">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/specialized_hardware_and_driver_enablement/OpenShift_Container_Platform-4.13-Specialized_hardware_and_driver_enablement-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


              </div>
          </div>
                <div class="pvof-doc__tertiary-sidebar j-doc__tertiary-sidebar">
          <div class="pvof-doc__tertiary-sidebar__inner j-doc__tertiary-sidebar__inner">
            <div class="j-doc__doc-options">
              <div class="j-options-container j-options-container--desktop">
                <button class="j-sidebar__menu-trigger j-sidebar__menu-trigger--tablet content-expander__trigger">
                  <span class="j-sidebar__menu-trigger-icon"></span>
                  <h2 class="visually-hidden">Language and Page Formatting Options</h2>
                </button>
                  

  <ul class="j-doc-options__list content-expander">
    <li class="j-doc-options__item">
          <label class="j-doc-option__label j-doc-option__label--language" for="j-doc-language--2">
        Language:
      </label>
      <select id="j-doc-language--2" class="j-doc-option__select">
                  <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" selected=''>
            English
          </option>
                  <option value="/documentation/ja-jp/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            日本語
          </option>
                  <option value="/documentation/zh-cn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            简体中文
          </option>
                  <option value="/documentation/ko-kr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" >
            한국어
          </option>
              </select>

            <noscript>
        <div class="j-doc-option__label j-doc-option__label--language" id="j-doc-option__label--language--nojs">
          Language:
        </div>
        <ul aria-labelledby="j-doc-option__label--language--nojs" class="j-doc-option__languages-list">
                      <li>
              <a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">English</a>
            </li>
                      <li>
              <a href="/documentation/ja-jp/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">日本語</a>
            </li>
                      <li>
              <a href="/documentation/zh-cn/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">简体中文</a>
            </li>
                      <li>
              <a href="/documentation/ko-kr/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">한국어</a>
            </li>
                  </ul>
      </noscript>

      </li>

    <li class="j-doc-options__item">
    <label for="j-doc-mode--2" class="j-doc-option__label j-doc-option__label--format">
      Format:
    </label>
    <select id="j-doc-mode--2" class="j-doc-option__select">
              <option value="/documentation/en-us/openshift_container_platform/4.13/html/specialized_hardware_and_driver_enablement"  class="j-doc-options__option j-doc-options__option--multi-page">
          Multi-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement" selected='' class="j-doc-options__option j-doc-options__option--single-page">
          Single-page
        </option>
              <option value="/documentation/en-us/openshift_container_platform/4.13/pdf/specialized_hardware_and_driver_enablement/OpenShift_Container_Platform-4.13-Specialized_hardware_and_driver_enablement-en-US.pdf"  class="j-doc-options__option j-doc-options__option--pdf">
          PDF
        </option>
          </select>

        <noscript>
      <div class="j-doc-option__label j-doc-option__label--format" id="j-doc-option__label--format--nojs">
        Format:
      </div>
      <ul class="j-doc-option__format-list" aria-labelledby="j-doc-option__label--format--nojs">
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--multi-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html/specialized_hardware_and_driver_enablement">Multi-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--single-page"><a href="/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement">Single-page</a></li>
                  <li class="j-doc-mode-no-js__link j-doc-mode-no-js__link--pdf"><a href="/documentation/en-us/openshift_container_platform/4.13/pdf/specialized_hardware_and_driver_enablement/OpenShift_Container_Platform-4.13-Specialized_hardware_and_driver_enablement-en-US.pdf">PDF</a></li>
              </ul>
    </noscript>
  </li>
</ul>


                </div>
              </div>
          </div>
        </div>

                  <div class="doc-wrapper pvof-doc__wrapper j-superdoc__content-wrapper" id="doc-wrapper">
            

  <div class="pane-page-title">
    <h1 class="title" itemprop="name">Specialized hardware and driver enablement</h1>
  </div>


  <div xml:lang="en-US" class="book" id="idm140302640389568"><div class="titlepage"><div><div class="producttitle"><span class="productname">OpenShift Container Platform</span> <span class="productnumber">4.13</span></div><div><h2 class="subtitle">Learn about hardware enablement on OpenShift Container Platform </h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat OpenShift Documentation Team</span></div></div><div><a href="#idm140302641719904">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides an overview of hardware enablement in OpenShift Container Platform.
			</div></div></div></div><hr/></div><section class="chapter" id="about-hardware-enablement"><div class="titlepage"><div><div><h1 class="title">Chapter 1. About specialized hardware and driver enablement</h1></div></div></div><p>
			The Driver Toolkit (DTK) is a container image in the OpenShift Container Platform payload which is meant to be used as a base image on which to build driver containers. The Driver Toolkit image contains the kernel packages commonly required as dependencies to build or install kernel modules as well as a few tools needed in driver containers. The version of these packages will match the kernel version running on the RHCOS nodes in the corresponding OpenShift Container Platform release.
		</p><p>
			Driver containers are container images used for building and deploying out-of-tree kernel modules and drivers on container operating systems such as Red Hat Enterprise Linux CoreOS (RHCOS). Kernel modules and drivers are software libraries running with a high level of privilege in the operating system kernel. They extend the kernel functionalities or provide the hardware-specific code required to control new devices. Examples include hardware devices like field-programmable gate arrays (FPGA) or graphics processing units (GPU), and software-defined storage solutions, which all require kernel modules on client machines. Driver containers are the first layer of the software stack used to enable these technologies on OpenShift Container Platform deployments.
		</p></section><section class="chapter" id="driver-toolkit"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Driver Toolkit</h1></div></div></div><p>
			Learn about the Driver Toolkit and how you can use it as a base image for driver containers for enabling special software and hardware devices on OpenShift Container Platform deployments.
		</p><section class="section" id="about-driver-toolkit_driver-toolkit"><div class="titlepage"><div><div><h2 class="title">2.1. About the Driver Toolkit</h2></div></div></div><h4 id="background">Background</h4><p>
				The Driver Toolkit is a container image in the OpenShift Container Platform payload used as a base image on which you can build driver containers. The Driver Toolkit image includes the kernel packages commonly required as dependencies to build or install kernel modules, as well as a few tools needed in driver containers. The version of these packages will match the kernel version running on the Red Hat Enterprise Linux CoreOS (RHCOS) nodes in the corresponding OpenShift Container Platform release.
			</p><p>
				Driver containers are container images used for building and deploying out-of-tree kernel modules and drivers on container operating systems like RHCOS. Kernel modules and drivers are software libraries running with a high level of privilege in the operating system kernel. They extend the kernel functionalities or provide the hardware-specific code required to control new devices. Examples include hardware devices like Field Programmable Gate Arrays (FPGA) or GPUs, and software-defined storage (SDS) solutions, such as Lustre parallel file systems, which require kernel modules on client machines. Driver containers are the first layer of the software stack used to enable these technologies on Kubernetes.
			</p><p>
				The list of kernel packages in the Driver Toolkit includes the following and their dependencies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">kernel-core</code>
					</li><li class="listitem">
						<code class="literal">kernel-devel</code>
					</li><li class="listitem">
						<code class="literal">kernel-headers</code>
					</li><li class="listitem">
						<code class="literal">kernel-modules</code>
					</li><li class="listitem">
						<code class="literal">kernel-modules-extra</code>
					</li></ul></div><p>
				In addition, the Driver Toolkit also includes the corresponding real-time kernel packages:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">kernel-rt-core</code>
					</li><li class="listitem">
						<code class="literal">kernel-rt-devel</code>
					</li><li class="listitem">
						<code class="literal">kernel-rt-modules</code>
					</li><li class="listitem">
						<code class="literal">kernel-rt-modules-extra</code>
					</li></ul></div><p>
				The Driver Toolkit also has several tools that are commonly needed to build and install kernel modules, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">elfutils-libelf-devel</code>
					</li><li class="listitem">
						<code class="literal">kmod</code>
					</li><li class="listitem">
						<code class="literal">binutilskabi-dw</code>
					</li><li class="listitem">
						<code class="literal">kernel-abi-whitelists</code>
					</li><li class="listitem">
						dependencies for the above
					</li></ul></div><h4 id="purpose">Purpose</h4><p>
				Prior to the Driver Toolkit’s existence, users would install kernel packages in a pod or build config on OpenShift Container Platform using <a class="link" href="https://www.openshift.com/blog/how-to-use-entitled-image-builds-to-build-drivercontainers-with-ubi-on-openshift">entitled builds</a> or by installing from the kernel RPMs in the hosts <code class="literal">machine-os-content</code>. The Driver Toolkit simplifies the process by removing the entitlement step, and avoids the privileged operation of accessing the machine-os-content in a pod. The Driver Toolkit can also be used by partners who have access to pre-released OpenShift Container Platform versions to prebuild driver-containers for their hardware devices for future OpenShift Container Platform releases.
			</p><p>
				The Driver Toolkit is also used by the Kernel Module Management (KMM), which is currently available as a community Operator on OperatorHub. KMM supports out-of-tree and third-party kernel drivers and the support software for the underlying operating system. Users can create modules for KMM to build and deploy a driver container, as well as support software like a device plugin, or metrics. Modules can include a build config to build a driver container-based on the Driver Toolkit, or KMM can deploy a prebuilt driver container.
			</p></section><section class="section" id="pulling-the-driver-toolkit_driver-toolkit"><div class="titlepage"><div><div><h2 class="title">2.2. Pulling the Driver Toolkit container image</h2></div></div></div><p>
				The <code class="literal">driver-toolkit</code> image is available from the <a class="link" href="https://registry.redhat.io/">Container images section of the Red Hat Ecosystem Catalog</a> and in the OpenShift Container Platform release payload. The image corresponding to the most recent minor release of OpenShift Container Platform will be tagged with the version number in the catalog. The image URL for a specific release can be found using the <code class="literal">oc adm</code> CLI command.
			</p><section class="section" id="pulling-the-driver-toolkit-from-registry"><div class="titlepage"><div><div><h3 class="title">2.2.1. Pulling the Driver Toolkit container image from registry.redhat.io</h3></div></div></div><p>
					Instructions for pulling the <code class="literal">driver-toolkit</code> image from <code class="literal">registry.redhat.io</code> with <code class="literal">podman</code> or in OpenShift Container Platform can be found on the <a class="link" href="https://catalog.redhat.com/software/containers/openshift4/driver-toolkit-rhel8/604009d6122bd89307e00865?container-tabs=gti">Red Hat Ecosystem Catalog</a>. The driver-toolkit image for the latest minor release are tagged with the minor release version on <code class="literal">registry.redhat.io</code>, for example: <code class="literal">registry.redhat.io/openshift4/driver-toolkit-rhel8:v4.13</code>.
				</p></section><section class="section" id="pulling-the-driver-toolkit-from-payload"><div class="titlepage"><div><div><h3 class="title">2.2.2. Finding the Driver Toolkit image URL in the payload</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You obtained the image <a class="link" href="https://console.redhat.com/openshift/install/pull-secret">pull secret from the Red Hat OpenShift Cluster Manager</a>.
						</li><li class="listitem">
							You installed the OpenShift CLI (<code class="literal">oc</code>).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">oc adm</code> command to extract the image URL of the <code class="literal">driver-toolkit</code> corresponding to a certain release:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For an x86 image, the command is as follows:
								</p><pre class="programlisting language-terminal">$ oc adm release info quay.io/openshift-release-dev/ocp-release:4.13.z-x86_64 --image-for=driver-toolkit</pre></li><li class="listitem"><p class="simpara">
									For an ARM image, the command is as follows:
								</p><pre class="programlisting language-terminal">$ oc adm release info quay.io/openshift-release-dev/ocp-release:4.13.z-aarch64 --image-for=driver-toolkit</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								The output for the <code class="literal">ocp-release:4.13.0-x86_64</code> image is as follows:
							</p></div><pre class="programlisting language-terminal">quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b53883ca2bac5925857148c4a1abc300ced96c222498e3bc134fe7ce3a1dd404</pre></li><li class="listitem"><p class="simpara">
							Obtain this image using a valid pull secret, such as the pull secret required to install OpenShift Container Platform:
						</p><pre class="programlisting language-terminal">$ podman pull --authfile=path/to/pullsecret.json quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:&lt;SHA&gt;</pre></li></ol></div></section></section><section class="section" id="using-the-driver-toolkit_driver-toolkit"><div class="titlepage"><div><div><h2 class="title">2.3. Using the Driver Toolkit</h2></div></div></div><p>
				As an example, the Driver Toolkit can be used as the base image for building a very simple kernel module called <code class="literal">simple-kmod</code>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Driver Toolkit includes the necessary dependencies, <code class="literal">openssl</code>, <code class="literal">mokutil</code>, and <code class="literal">keyutils</code>, needed to sign a kernel module. However, in this example, the <code class="literal">simple-kmod</code> kernel module is not signed and therefore cannot be loaded on systems with <code class="literal">Secure Boot</code> enabled.
				</p></div></div><section class="section" id="create-simple-kmod-image_driver-toolkit"><div class="titlepage"><div><div><h3 class="title">2.3.1. Build and run the simple-kmod driver container on a cluster</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a running OpenShift Container Platform cluster.
						</li><li class="listitem">
							You set the Image Registry Operator state to <code class="literal">Managed</code> for your cluster.
						</li><li class="listitem">
							You installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You are logged into the OpenShift CLI as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						Create a namespace. For example:
					</p></div><pre class="programlisting language-terminal">$ oc new-project simple-kmod-demo</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							The YAML defines an <code class="literal">ImageStream</code> for storing the <code class="literal">simple-kmod</code> driver container image, and a <code class="literal">BuildConfig</code> for building the container. Save this YAML as <code class="literal">0000-buildconfig.yaml.template</code>.
						</p><pre class="programlisting language-yaml">apiVersion: image.openshift.io/v1
kind: ImageStream
metadata:
  labels:
    app: simple-kmod-driver-container
  name: simple-kmod-driver-container
  namespace: simple-kmod-demo
spec: {}
---
apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  labels:
    app: simple-kmod-driver-build
  name: simple-kmod-driver-build
  namespace: simple-kmod-demo
spec:
  nodeSelector:
    node-role.kubernetes.io/worker: ""
  runPolicy: "Serial"
  triggers:
    - type: "ConfigChange"
    - type: "ImageChange"
  source:
    dockerfile: |
      ARG DTK
      FROM ${DTK} as builder

      ARG KVER

      WORKDIR /build/

      RUN git clone https://github.com/openshift-psap/simple-kmod.git

      WORKDIR /build/simple-kmod

      RUN make all install KVER=${KVER}

      FROM registry.redhat.io/ubi8/ubi-minimal

      ARG KVER

      # Required for installing `modprobe`
      RUN microdnf install kmod

      COPY --from=builder /lib/modules/${KVER}/simple-kmod.ko /lib/modules/${KVER}/
      COPY --from=builder /lib/modules/${KVER}/simple-procfs-kmod.ko /lib/modules/${KVER}/
      RUN depmod ${KVER}
  strategy:
    dockerStrategy:
      buildArgs:
        - name: KMODVER
          value: DEMO
          # $ oc adm release info quay.io/openshift-release-dev/ocp-release:&lt;cluster version&gt;-x86_64 --image-for=driver-toolkit
        - name: DTK
          value: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:34864ccd2f4b6e385705a730864c04a40908e57acede44457a783d739e377cae
        - name: KVER
          value: 4.18.0-372.26.1.el8_6.x86_64
  output:
    to:
      kind: ImageStreamTag
      name: simple-kmod-driver-container:demo</pre></li><li class="listitem"><p class="simpara">
							Substitute the correct driver toolkit image for the OpenShift Container Platform version you are running in place of “DRIVER_TOOLKIT_IMAGE” with the following commands.
						</p><pre class="programlisting language-terminal">$ OCP_VERSION=$(oc get clusterversion/version -ojsonpath={.status.desired.version})</pre><pre class="programlisting language-terminal">$ DRIVER_TOOLKIT_IMAGE=$(oc adm release info $OCP_VERSION --image-for=driver-toolkit)</pre><pre class="programlisting language-terminal">$ sed "s#DRIVER_TOOLKIT_IMAGE#${DRIVER_TOOLKIT_IMAGE}#" 0000-buildconfig.yaml.template &gt; 0000-buildconfig.yaml</pre></li><li class="listitem"><p class="simpara">
							Create the image stream and build config with
						</p><pre class="programlisting language-terminal">$ oc create -f 0000-buildconfig.yaml</pre></li><li class="listitem"><p class="simpara">
							After the builder pod completes successfully, deploy the driver container image as a <code class="literal">DaemonSet</code>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									The driver container must run with the privileged security context in order to load the kernel modules on the host. The following YAML file contains the RBAC rules and the <code class="literal">DaemonSet</code> for running the driver container. Save this YAML as <code class="literal">1000-drivercontainer.yaml</code>.
								</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: simple-kmod-driver-container
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: simple-kmod-driver-container
rules:
- apiGroups:
  - security.openshift.io
  resources:
  - securitycontextconstraints
  verbs:
  - use
  resourceNames:
  - privileged
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: simple-kmod-driver-container
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: simple-kmod-driver-container
subjects:
- kind: ServiceAccount
  name: simple-kmod-driver-container
userNames:
- system:serviceaccount:simple-kmod-demo:simple-kmod-driver-container
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: simple-kmod-driver-container
spec:
  selector:
    matchLabels:
      app: simple-kmod-driver-container
  template:
    metadata:
      labels:
        app: simple-kmod-driver-container
    spec:
      serviceAccount: simple-kmod-driver-container
      serviceAccountName: simple-kmod-driver-container
      containers:
      - image: image-registry.openshift-image-registry.svc:5000/simple-kmod-demo/simple-kmod-driver-container:demo
        name: simple-kmod-driver-container
        imagePullPolicy: Always
        command: [sleep, infinity]
        lifecycle:
          postStart:
            exec:
              command: ["modprobe", "-v", "-a" , "simple-kmod", "simple-procfs-kmod"]
          preStop:
            exec:
              command: ["modprobe", "-r", "-a" , "simple-kmod", "simple-procfs-kmod"]
        securityContext:
          privileged: true
      nodeSelector:
        node-role.kubernetes.io/worker: ""</pre></li><li class="listitem"><p class="simpara">
									Create the RBAC rules and daemon set:
								</p><pre class="programlisting language-terminal">$ oc create -f 1000-drivercontainer.yaml</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							After the pods are running on the worker nodes, verify that the <code class="literal">simple_kmod</code> kernel module is loaded successfully on the host machines with <code class="literal">lsmod</code>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Verify that the pods are running:
								</p><pre class="programlisting language-terminal">$ oc get pod -n simple-kmod-demo</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">NAME                                 READY   STATUS      RESTARTS   AGE
simple-kmod-driver-build-1-build     0/1     Completed   0          6m
simple-kmod-driver-container-b22fd   1/1     Running     0          40s
simple-kmod-driver-container-jz9vn   1/1     Running     0          40s
simple-kmod-driver-container-p45cc   1/1     Running     0          40s</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									Execute the <code class="literal">lsmod</code> command in the driver container pod:
								</p><pre class="programlisting language-terminal">$ oc exec -it pod/simple-kmod-driver-container-p45cc -- lsmod | grep simple</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
										
<pre class="programlisting language-terminal">simple_procfs_kmod     16384  0
simple_kmod            16384  0</pre>

									</p></div></li></ol></div></li></ol></div></section></section><section class="section _additional-resources" id="additional-resources_driver-toolkkit-id"><div class="titlepage"><div><div><h2 class="title">2.4. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about configuring registry storage for your cluster, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/registry/#registry-removed_configuring-registry-operator">Image Registry Operator in OpenShift Container Platform</a>.
					</li></ul></div></section></section><section class="chapter" id="node-feature-discovery-operator"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Node Feature Discovery Operator</h1></div></div></div><p>
			Learn about the Node Feature Discovery (NFD) Operator and how you can use it to expose node-level information by orchestrating Node Feature Discovery, a Kubernetes add-on for detecting hardware features and system configuration.
		</p><section class="section" id="about-node-feature-discovery-operator_node-feature-discovery-operator"><div class="titlepage"><div><div><h2 class="title">3.1. About the Node Feature Discovery Operator</h2></div></div></div><p>
				The Node Feature Discovery Operator (NFD) manages the detection of hardware features and configuration in an OpenShift Container Platform cluster by labeling the nodes with hardware-specific information. NFD labels the host with node-specific attributes, such as PCI cards, kernel, operating system version, and so on.
			</p><p>
				The NFD Operator can be found on the Operator Hub by searching for “Node Feature Discovery”.
			</p></section><section class="section" id="installing-the-node-feature-discovery-operator_node-feature-discovery-operator"><div class="titlepage"><div><div><h2 class="title">3.2. Installing the Node Feature Discovery Operator</h2></div></div></div><p>
				The Node Feature Discovery (NFD) Operator orchestrates all resources needed to run the NFD daemon set. As a cluster administrator, you can install the NFD Operator by using the OpenShift Container Platform CLI or the web console.
			</p><section class="section" id="install-operator-cli_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.2.1. Installing the NFD Operator using the CLI</h3></div></div></div><p>
					As a cluster administrator, you can install the NFD Operator using the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An OpenShift Container Platform cluster
						</li><li class="listitem">
							Install the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							Log in as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a namespace for the NFD Operator.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Namespace</code> custom resource (CR) that defines the <code class="literal">openshift-nfd</code> namespace, and then save the YAML in the <code class="literal">nfd-namespace.yaml</code> file:
								</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: openshift-nfd</pre></li><li class="listitem"><p class="simpara">
									Create the namespace by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f nfd-namespace.yaml</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Install the NFD Operator in the namespace you created in the previous step by creating the following objects:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create the following <code class="literal">OperatorGroup</code> CR and save the YAML in the <code class="literal">nfd-operatorgroup.yaml</code> file:
								</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  generateName: openshift-nfd-
  name: openshift-nfd
  namespace: openshift-nfd
spec:
  targetNamespaces:
  - openshift-nfd</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">OperatorGroup</code> CR by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f nfd-operatorgroup.yaml</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Subscription</code> CR and save the YAML in the <code class="literal">nfd-sub.yaml</code> file:
								</p><div class="formalpara"><p class="title"><strong>Example Subscription</strong></p><p>
										
<pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: nfd
  namespace: openshift-nfd
spec:
  channel: "stable"
  installPlanApproval: Automatic
  name: nfd
  source: redhat-operators
  sourceNamespace: openshift-marketplace</pre>

									</p></div></li><li class="listitem"><p class="simpara">
									Create the subscription object by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f nfd-sub.yaml</pre></li><li class="listitem"><p class="simpara">
									Change to the <code class="literal">openshift-nfd</code> project:
								</p><pre class="programlisting language-terminal">$ oc project openshift-nfd</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To verify that the Operator deployment is successful, run:
						</p><pre class="programlisting language-terminal">$ oc get pods</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                                      READY   STATUS    RESTARTS   AGE
nfd-controller-manager-7f86ccfb58-vgr4x   2/2     Running   0          10m</pre>

							</p></div><p class="simpara">
							A successful deployment shows a <code class="literal">Running</code> status.
						</p></li></ul></div></section><section class="section" id="install-operator-web-console_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.2.2. Installing the NFD Operator using the web console</h3></div></div></div><p>
					As a cluster administrator, you can install the NFD Operator using the web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
						</li><li class="listitem">
							Choose <span class="strong strong"><strong>Node Feature Discovery</strong></span> from the list of available Operators, and then click <span class="strong strong"><strong>Install</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Install Operator</strong></span> page, select <span class="strong strong"><strong>A specific namespace on the cluster</strong></span>, and then click <span class="strong strong"><strong>Install</strong></span>. You do not need to create a namespace because it is created for you.
						</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify that the NFD Operator installed successfully:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page.
						</li><li class="listitem"><p class="simpara">
							Ensure that <span class="strong strong"><strong>Node Feature Discovery</strong></span> is listed in the <span class="strong strong"><strong>openshift-nfd</strong></span> project with a <span class="strong strong"><strong>Status</strong></span> of <span class="strong strong"><strong>InstallSucceeded</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								During installation an Operator might display a <span class="strong strong"><strong>Failed</strong></span> status. If the installation later succeeds with an <span class="strong strong"><strong>InstallSucceeded</strong></span> message, you can ignore the <span class="strong strong"><strong>Failed</strong></span> message.
							</p></div></div></li></ol></div><div class="formalpara"><p class="title"><strong>Troubleshooting</strong></p><p>
						If the Operator does not appear as installed, troubleshoot further:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page and inspect the <span class="strong strong"><strong>Operator Subscriptions</strong></span> and <span class="strong strong"><strong>Install Plans</strong></span> tabs for any failure or errors under <span class="strong strong"><strong>Status</strong></span>.
						</li><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Pods</strong></span> page and check the logs for pods in the <code class="literal">openshift-nfd</code> project.
						</li></ol></div></section></section><section class="section" id="using-the-node-feature-discovery-operator_node-feature-discovery-operator"><div class="titlepage"><div><div><h2 class="title">3.3. Using the Node Feature Discovery Operator</h2></div></div></div><p>
				The Node Feature Discovery (NFD) Operator orchestrates all resources needed to run the Node-Feature-Discovery daemon set by watching for a <code class="literal">NodeFeatureDiscovery</code> CR. Based on the <code class="literal">NodeFeatureDiscovery</code> CR, the Operator will create the operand (NFD) components in the desired namespace. You can edit the CR to choose another <code class="literal">namespace</code>, <code class="literal">image</code>, <code class="literal">imagePullPolicy</code>, and <code class="literal">nfd-worker-conf</code>, among other options.
			</p><p>
				As a cluster administrator, you can create a <code class="literal">NodeFeatureDiscovery</code> instance using the OpenShift Container Platform CLI or the web console.
			</p><section class="section" id="create-cd-cli_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.3.1. Create a NodeFeatureDiscovery instance using the CLI</h3></div></div></div><p>
					As a cluster administrator, you can create a <code class="literal">NodeFeatureDiscovery</code> CR instance using the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An OpenShift Container Platform cluster
						</li><li class="listitem">
							Install the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							Log in as a user with <code class="literal">cluster-admin</code> privileges.
						</li><li class="listitem">
							Install the NFD Operator.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the following <code class="literal">NodeFeatureDiscovery</code> Custom Resource (CR), and then save the YAML in the <code class="literal">NodeFeatureDiscovery.yaml</code> file:
						</p><pre class="programlisting language-yaml">apiVersion: nfd.openshift.io/v1
kind: NodeFeatureDiscovery
metadata:
  name: nfd-instance
  namespace: openshift-nfd
spec:
  instance: "" # instance is empty by default
  topologyupdater: false # False by default
  operand:
    image: registry.redhat.io/openshift4/ose-node-feature-discovery:v4.13
    imagePullPolicy: Always
  workerConfig:
    configData: |
      core:
      #  labelWhiteList:
      #  noPublish: false
        sleepInterval: 60s
      #  sources: [all]
      #  klog:
      #    addDirHeader: false
      #    alsologtostderr: false
      #    logBacktraceAt:
      #    logtostderr: true
      #    skipHeaders: false
      #    stderrthreshold: 2
      #    v: 0
      #    vmodule:
      ##   NOTE: the following options are not dynamically run-time configurable
      ##         and require a nfd-worker restart to take effect after being changed
      #    logDir:
      #    logFile:
      #    logFileMaxSize: 1800
      #    skipLogHeaders: false
      sources:
        cpu:
          cpuid:
      #     NOTE: whitelist has priority over blacklist
            attributeBlacklist:
              - "BMI1"
              - "BMI2"
              - "CLMUL"
              - "CMOV"
              - "CX16"
              - "ERMS"
              - "F16C"
              - "HTT"
              - "LZCNT"
              - "MMX"
              - "MMXEXT"
              - "NX"
              - "POPCNT"
              - "RDRAND"
              - "RDSEED"
              - "RDTSCP"
              - "SGX"
              - "SSE"
              - "SSE2"
              - "SSE3"
              - "SSE4.1"
              - "SSE4.2"
              - "SSSE3"
            attributeWhitelist:
        kernel:
          kconfigFile: "/path/to/kconfig"
          configOpts:
            - "NO_HZ"
            - "X86"
            - "DMI"
        pci:
          deviceClassWhitelist:
            - "0200"
            - "03"
            - "12"
          deviceLabelFields:
            - "class"
  customConfig:
    configData: |
          - name: "more.kernel.features"
            matchOn:
            - loadedKMod: ["example_kmod3"]</pre></li></ol></div><p>
					For more details on how to customize NFD workers, refer to the <a class="link" href="https://kubernetes-sigs.github.io/node-feature-discovery/v0.10/advanced/worker-configuration-reference.html">Configuration file reference of nfd-worker</a>.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">NodeFeatureDiscovery</code> CR instance by running the following command:
						</p><pre class="programlisting language-terminal">$ oc create -f NodeFeatureDiscovery.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To verify that the instance is created, run:
						</p><pre class="programlisting language-terminal">$ oc get pods</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                                      READY   STATUS    RESTARTS   AGE
nfd-controller-manager-7f86ccfb58-vgr4x   2/2     Running   0          11m
nfd-master-hcn64                          1/1     Running   0          60s
nfd-master-lnnxx                          1/1     Running   0          60s
nfd-master-mp6hr                          1/1     Running   0          60s
nfd-worker-vgcz9                          1/1     Running   0          60s
nfd-worker-xqbws                          1/1     Running   0          60s</pre>

							</p></div><p class="simpara">
							A successful deployment shows a <code class="literal">Running</code> status.
						</p></li></ul></div></section><section class="section" id="create-nfd-cr-web-console_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.3.2. Create a NodeFeatureDiscovery CR using the web console</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page.
						</li><li class="listitem">
							Find <span class="strong strong"><strong>Node Feature Discovery</strong></span> and see a box under <span class="strong strong"><strong>Provided APIs</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create instance</strong></span>.
						</li><li class="listitem">
							Edit the values of the <code class="literal">NodeFeatureDiscovery</code> CR.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</li></ol></div></section></section><section class="section" id="configuring-the-node-feature-discovery_node-feature-discovery-operator"><div class="titlepage"><div><div><h2 class="title">3.4. Configuring the Node Feature Discovery Operator</h2></div></div></div><section class="section" id="configuring-node-feature-discovery-operator-core_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.4.1. core</h3></div></div></div><p>
					The <code class="literal">core</code> section contains common configuration settings that are not specific to any particular feature source.
				</p><h5 id="configuring-node-feature-discovery-operator-core-sleepInterval_node-feature-discovery-operator">core.sleepInterval</h5><p>
					<code class="literal">core.sleepInterval</code> specifies the interval between consecutive passes of feature detection or re-detection, and thus also the interval between node re-labeling. A non-positive value implies infinite sleep interval; no re-detection or re-labeling is done.
				</p><p>
					This value is overridden by the deprecated <code class="literal">--sleep-interval</code> command line flag, if specified.
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">core:
  sleepInterval: 60s <span id="CO1-1"><!--Empty--></span><span class="callout">1</span></pre>

					</p></div><p>
					The default value is <code class="literal">60s</code>.
				</p><h5 id="configuring-node-feature-discovery-operator-core-sources_node-feature-discovery-operator">core.sources</h5><p>
					<code class="literal">core.sources</code> specifies the list of enabled feature sources. A special value <code class="literal">all</code> enables all feature sources.
				</p><p>
					This value is overridden by the deprecated <code class="literal">--sources</code> command line flag, if specified.
				</p><p>
					Default: <code class="literal">[all]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">core:
  sources:
    - system
    - custom</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-core-label-whitelist_node-feature-discovery-operator">core.labelWhiteList</h5><p>
					<code class="literal">core.labelWhiteList</code> specifies a regular expression for filtering feature labels based on the label name. Non-matching labels are not published.
				</p><p>
					The regular expression is only matched against the basename part of the label, the part of the name after '/'. The label prefix, or namespace, is omitted.
				</p><p>
					This value is overridden by the deprecated <code class="literal">--label-whitelist</code> command line flag, if specified.
				</p><p>
					Default: <code class="literal">null</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">core:
  labelWhiteList: '^cpu-cpuid'</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-core-no-publish_node-feature-discovery-operator">core.noPublish</h5><p>
					Setting <code class="literal">core.noPublish</code> to <code class="literal">true</code> disables all communication with the <code class="literal">nfd-master</code>. It is effectively a dry run flag; <code class="literal">nfd-worker</code> runs feature detection normally, but no labeling requests are sent to <code class="literal">nfd-master</code>.
				</p><p>
					This value is overridden by the <code class="literal">--no-publish</code> command line flag, if specified.
				</p><p>
					Example:
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">core:
  noPublish: true <span id="CO1-2"><!--Empty--></span><span class="callout">1</span></pre>

					</p></div><p>
					The default value is <code class="literal">false</code>.
				</p><h4 id="configuring-node-feature-discovery-operator-core-klog_node-feature-discovery-operator">core.klog</h4><p>
					The following options specify the logger configuration, most of which can be dynamically adjusted at run-time.
				</p><p>
					The logger options can also be specified using command line flags, which take precedence over any corresponding config file options.
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-adddirheader_node-feature-discovery-operator">core.klog.addDirHeader</h5><p>
					If set to <code class="literal">true</code>, <code class="literal">core.klog.addDirHeader</code> adds the file directory to the header of the log messages.
				</p><p>
					Default: <code class="literal">false</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-alsologtostderr_node-feature-discovery-operator">core.klog.alsologtostderr</h5><p>
					Log to standard error as well as files.
				</p><p>
					Default: <code class="literal">false</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-BacktraceAt_node-feature-discovery-operator">core.klog.logBacktraceAt</h5><p>
					When logging hits line file:N, emit a stack trace.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-logdir_node-feature-discovery-operator">core.klog.logDir</h5><p>
					If non-empty, write log files in this directory.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><p>
					Run-time configurable: no
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-logfile_node-feature-discovery-operator">core.klog.logFile</h5><p>
					If not empty, use this log file.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><p>
					Run-time configurable: no
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-logFileMaxSize_node-feature-discovery-operator">core.klog.logFileMaxSize</h5><p>
					<code class="literal">core.klog.logFileMaxSize</code> defines the maximum size a log file can grow to. Unit is megabytes. If the value is <code class="literal">0</code>, the maximum file size is unlimited.
				</p><p>
					Default: <code class="literal">1800</code>
				</p><p>
					Run-time configurable: no
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-logtostderr_node-feature-discovery-operator">core.klog.logtostderr</h5><p>
					Log to standard error instead of files
				</p><p>
					Default: <code class="literal">true</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-skipHeaders_node-feature-discovery-operator">core.klog.skipHeaders</h5><p>
					If <code class="literal">core.klog.skipHeaders</code> is set to <code class="literal">true</code>, avoid header prefixes in the log messages.
				</p><p>
					Default: <code class="literal">false</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-skipLogHeaders_node-feature-discovery-operator">core.klog.skipLogHeaders</h5><p>
					If <code class="literal">core.klog.skipLogHeaders</code> is set to <code class="literal">true</code>, avoid headers when opening log files.
				</p><p>
					Default: <code class="literal">false</code>
				</p><p>
					Run-time configurable: no
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-stderrthreshold_node-feature-discovery-operator">core.klog.stderrthreshold</h5><p>
					Logs at or above this threshold go to stderr.
				</p><p>
					Default: <code class="literal">2</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-v_node-feature-discovery-operator">core.klog.v</h5><p>
					<code class="literal">core.klog.v</code> is the number for the log level verbosity.
				</p><p>
					Default: <code class="literal">0</code>
				</p><p>
					Run-time configurable: yes
				</p><h5 id="configuring-node-feature-discovery-operator-core-klog-vmodule_node-feature-discovery-operator">core.klog.vmodule</h5><p>
					<code class="literal">core.klog.vmodule</code> is a comma-separated list of <code class="literal">pattern=N</code> settings for file-filtered logging.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><p>
					Run-time configurable: yes
				</p></section><section class="section" id="configuring-node-feature-discovery-operator-sources_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.4.2. sources</h3></div></div></div><p>
					The <code class="literal">sources</code> section contains feature source specific configuration parameters.
				</p><h5 id="configuring-node-feature-discovery-operator-sources-cpu-cpuid-attributeBlacklist_node-feature-discovery-operator">sources.cpu.cpuid.attributeBlacklist</h5><p>
					Prevent publishing <code class="literal">cpuid</code> features listed in this option.
				</p><p>
					This value is overridden by <code class="literal">sources.cpu.cpuid.attributeWhitelist</code>, if specified.
				</p><p>
					Default: <code class="literal">[BMI1, BMI2, CLMUL, CMOV, CX16, ERMS, F16C, HTT, LZCNT, MMX, MMXEXT, NX, POPCNT, RDRAND, RDSEED, RDTSCP, SGX, SGXLC, SSE, SSE2, SSE3, SSE4.1, SSE4.2, SSSE3]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  cpu:
    cpuid:
      attributeBlacklist: [MMX, MMXEXT]</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-cpu-cpuid-attributeWhitelist_node-feature-discovery-operator">sources.cpu.cpuid.attributeWhitelist</h5><p>
					Only publish the <code class="literal">cpuid</code> features listed in this option.
				</p><p>
					<code class="literal">sources.cpu.cpuid.attributeWhitelist</code> takes precedence over <code class="literal">sources.cpu.cpuid.attributeBlacklist</code>.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  cpu:
    cpuid:
      attributeWhitelist: [AVX512BW, AVX512CD, AVX512DQ, AVX512F, AVX512VL]</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-kernel-kconfigFilet_node-feature-discovery-operator">sources.kernel.kconfigFile</h5><p>
					<code class="literal">sources.kernel.kconfigFile</code> is the path of the kernel config file. If empty, NFD runs a search in the well-known standard locations.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  kernel:
    kconfigFile: "/path/to/kconfig"</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-kernel-configOpts_node-feature-discovery-operator">sources.kernel.configOpts</h5><p>
					<code class="literal">sources.kernel.configOpts</code> represents kernel configuration options to publish as feature labels.
				</p><p>
					Default: <code class="literal">[NO_HZ, NO_HZ_IDLE, NO_HZ_FULL, PREEMPT]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  kernel:
    configOpts: [NO_HZ, X86, DMI]</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-pci-deviceClassWhitelist_node-feature-discovery-operator">sources.pci.deviceClassWhitelist</h5><p>
					<code class="literal">sources.pci.deviceClassWhitelist</code> is a list of <a class="link" href="https://pci-ids.ucw.cz/read/PD">PCI device class IDs</a> for which to publish a label. It can be specified as a main class only (for example, <code class="literal">03</code>) or full class-subclass combination (for example <code class="literal">0300</code>). The former implies that all subclasses are accepted. The format of the labels can be further configured with <code class="literal">deviceLabelFields</code>.
				</p><p>
					Default: <code class="literal">["03", "0b40", "12"]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  pci:
    deviceClassWhitelist: ["0200", "03"]</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-pci-deviceLabelFields_node-feature-discovery-operator">sources.pci.deviceLabelFields</h5><p>
					<code class="literal">sources.pci.deviceLabelFields</code> is the set of PCI ID fields to use when constructing the name of the feature label. Valid fields are <code class="literal">class</code>, <code class="literal">vendor</code>, <code class="literal">device</code>, <code class="literal">subsystem_vendor</code> and <code class="literal">subsystem_device</code>.
				</p><p>
					Default: <code class="literal">[class, vendor]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  pci:
    deviceLabelFields: [class, vendor, device]</pre>

					</p></div><p>
					With the example config above, NFD would publish labels such as <code class="literal">feature.node.kubernetes.io/pci-&lt;class-id&gt;_&lt;vendor-id&gt;_&lt;device-id&gt;.present=true</code>
				</p><h5 id="configuring-node-feature-discovery-operator-sources-usb-deviceClassWhitelist_node-feature-discovery-operator">sources.usb.deviceClassWhitelist</h5><p>
					<code class="literal">sources.usb.deviceClassWhitelist</code> is a list of USB <a class="link" href="https://www.usb.org/defined-class-codes">device class</a> IDs for which to publish a feature label. The format of the labels can be further configured with <code class="literal">deviceLabelFields</code>.
				</p><p>
					Default: <code class="literal">["0e", "ef", "fe", "ff"]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  usb:
    deviceClassWhitelist: ["ef", "ff"]</pre>

					</p></div><h5 id="configuring-node-feature-discovery-operator-sources-usb-deviceLabelFields_node-feature-discovery-operator">sources.usb.deviceLabelFields</h5><p>
					<code class="literal">sources.usb.deviceLabelFields</code> is the set of USB ID fields from which to compose the name of the feature label. Valid fields are <code class="literal">class</code>, <code class="literal">vendor</code>, and <code class="literal">device</code>.
				</p><p>
					Default: <code class="literal">[class, vendor, device]</code>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">sources:
  pci:
    deviceLabelFields: [class, vendor]</pre>

					</p></div><p>
					With the example config above, NFD would publish labels like: <code class="literal">feature.node.kubernetes.io/usb-&lt;class-id&gt;_&lt;vendor-id&gt;.present=true</code>.
				</p><h5 id="configuring-node-feature-discovery-operator-sources-custom_node-feature-discovery-operator">sources.custom</h5><p>
					<code class="literal">sources.custom</code> is the list of rules to process in the custom feature source to create user-specific labels.
				</p><p>
					Default: <span class="strong strong"><strong>empty</strong></span>
				</p><div class="formalpara"><p class="title"><strong>Example usage</strong></p><p>
						
<pre class="programlisting language-yaml">source:
  custom:
  - name: "my.custom.feature"
    matchOn:
    - loadedKMod: ["e1000e"]
    - pciId:
        class: ["0200"]
        vendor: ["8086"]</pre>

					</p></div></section></section><section class="section" id="using-the-nfd-topology-updater_node-feature-discovery-operator"><div class="titlepage"><div><div><h2 class="title">3.5. Using the NFD Topology Updater</h2></div></div></div><p>
				The Node Feature Discovery (NFD) Topology Updater is a daemon responsible for examining allocated resources on a worker node. It accounts for resources that are available to be allocated to new pod on a per-zone basis, where a zone can be a Non-Uniform Memory Access (NUMA) node. The NFD Topology Updater communicates the information to nfd-master, which creates a <code class="literal">NodeResourceTopology</code> custom resource (CR) corresponding to all of the worker nodes in the cluster. One instance of the NFD Topology Updater runs on each node of the cluster.
			</p><p>
				To enable the Topology Updater workers in NFD, set the <code class="literal">topologyupdater</code> variable to <code class="literal">true</code> in the <code class="literal">NodeFeatureDiscovery</code> CR, as described in the section <span class="strong strong"><strong>Using the Node Feature Discovery Operator</strong></span>.
			</p><section class="section" id="noderesourcetopology-cr"><div class="titlepage"><div><div><h3 class="title">3.5.1. NodeResourceTopology CR</h3></div></div></div><p>
					When run with NFD Topology Updater, NFD creates custom resource instances corresponding to the node resource hardware topology, such as:
				</p><pre class="programlisting language-yaml">apiVersion: topology.node.k8s.io/v1alpha1
kind: NodeResourceTopology
metadata:
  name: node1
topologyPolicies: ["SingleNUMANodeContainerLevel"]
zones:
  - name: node-0
    type: Node
    resources:
      - name: cpu
        capacity: 20
        allocatable: 16
        available: 10
      - name: vendor/nic1
        capacity: 3
        allocatable: 3
        available: 3
  - name: node-1
    type: Node
    resources:
      - name: cpu
        capacity: 30
        allocatable: 30
        available: 15
      - name: vendor/nic2
        capacity: 6
        allocatable: 6
        available: 6
  - name: node-2
    type: Node
    resources:
      - name: cpu
        capacity: 30
        allocatable: 30
        available: 15
      - name: vendor/nic1
        capacity: 3
        allocatable: 3
        available: 3</pre></section><section class="section" id="nfd-topology-updater-command-line-flags_node-feature-discovery-operator"><div class="titlepage"><div><div><h3 class="title">3.5.2. NFD Topology Updater command line flags</h3></div></div></div><p>
					To view available command line flags, run the <code class="literal">nfd-topology-updater -help</code> command. For example, in a podman container, run the following command:
				</p><pre class="programlisting language-terminal">$ podman run gcr.io/k8s-staging-nfd/node-feature-discovery:master nfd-topology-updater -help</pre><h5 id="nfd-topology-updater-ca-file_node-feature-discovery-operator">-ca-file</h5><p>
					The <code class="literal">-ca-file</code> flag is one of the three flags, together with the <code class="literal">-cert-file</code> and `-key-file`flags, that controls the mutual TLS authentication on the NFD Topology Updater. This flag specifies the TLS root certificate that is used for verifying the authenticity of nfd-master.
				</p><p>
					Default: empty
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal">-ca-file</code> flag must be specified together with the <code class="literal">-cert-file</code> and <code class="literal">-key-file</code> flags.
					</p></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						
<pre class="programlisting language-terminal">$ nfd-topology-updater -ca-file=/opt/nfd/ca.crt -cert-file=/opt/nfd/updater.crt -key-file=/opt/nfd/updater.key</pre>

					</p></div><h5 id="nfd-topology-updater-cert-file_node-feature-discovery-operator">-cert-file</h5><p>
					The <code class="literal">-cert-file</code> flag is one of the three flags, together with the <code class="literal">-ca-file</code> and <code class="literal">-key-file flags</code>, that controls mutual TLS authentication on the NFD Topology Updater. This flag specifies the TLS certificate presented for authenticating outgoing requests.
				</p><p>
					Default: empty
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal">-cert-file</code> flag must be specified together with the <code class="literal">-ca-file</code> and <code class="literal">-key-file</code> flags.
					</p></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						
<pre class="programlisting language-terminal">$ nfd-topology-updater -cert-file=/opt/nfd/updater.crt -key-file=/opt/nfd/updater.key -ca-file=/opt/nfd/ca.crt</pre>

					</p></div><h5 id="nfd-topology-updater-help_node-feature-discovery-operator">-h, -help</h5><p>
					Print usage and exit.
				</p><h5 id="nfd-topology-updater-key-file_node-feature-discovery-operator">-key-file</h5><p>
					The <code class="literal">-key-file</code> flag is one of the three flags, together with the <code class="literal">-ca-file</code> and <code class="literal">-cert-file</code> flags, that controls the mutual TLS authentication on the NFD Topology Updater. This flag specifies the private key corresponding the given certificate file, or <code class="literal">-cert-file</code>, that is used for authenticating outgoing requests.
				</p><p>
					Default: empty
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal">-key-file</code> flag must be specified together with the <code class="literal">-ca-file</code> and <code class="literal">-cert-file</code> flags.
					</p></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						
<pre class="programlisting language-terminal">$ nfd-topology-updater -key-file=/opt/nfd/updater.key -cert-file=/opt/nfd/updater.crt -ca-file=/opt/nfd/ca.crt</pre>

					</p></div><h5 id="nfd-topology-updater-kubelet-config-file_node-feature-discovery-operator">-kubelet-config-file</h5><p>
					The <code class="literal">-kubelet-config-file</code> specifies the path to the Kubelet’s configuration file.
				</p><p>
					Default: <code class="literal">/host-var/lib/kubelet/config.yaml</code>
				</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						
<pre class="programlisting language-terminal">$ nfd-topology-updater -kubelet-config-file=/var/lib/kubelet/config.yaml</pre>

					</p></div><h5 id="nfd-topology-updater-no-publish_node-feature-discovery-operator">-no-publish</h5><p>
					The <code class="literal">-no-publish</code> flag disables all communication with the nfd-master, making it a dry run flag for nfd-topology-updater. NFD Topology Updater runs resource hardware topology detection normally, but no CR requests are sent to nfd-master.
				</p><p>
					Default: <code class="literal">false</code>
				</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						
<pre class="programlisting language-terminal">$ nfd-topology-updater -no-publish</pre>

					</p></div><section class="section" id="nfd-topology-updater-oneshot_node-feature-discovery-operator"><div class="titlepage"><div><div><h4 class="title">3.5.2.1. -oneshot</h4></div></div></div><p>
						The <code class="literal">-oneshot</code> flag causes the NFD Topology Updater to exit after one pass of resource hardware topology detection.
					</p><p>
						Default: <code class="literal">false</code>
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -oneshot -no-publish</pre>

						</p></div><h5 id="nfd-topology-updater-podresources-socket_node-feature-discovery-operator">-podresources-socket</h5><p>
						The <code class="literal">-podresources-socket</code> flag specifies the path to the Unix socket where kubelet exports a gRPC service to enable discovery of in-use CPUs and devices, and to provide metadata for them.
					</p><p>
						Default: <code class="literal">/host-var/liblib/kubelet/pod-resources/kubelet.sock</code>
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -podresources-socket=/var/lib/kubelet/pod-resources/kubelet.sock</pre>

						</p></div><h5 id="nfd-topology-updater-server_node-feature-discovery-operator">-server</h5><p>
						The <code class="literal">-server</code> flag specifies the address of the nfd-master endpoint to connect to.
					</p><p>
						Default: <code class="literal">localhost:8080</code>
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -server=nfd-master.nfd.svc.cluster.local:443</pre>

						</p></div><h5 id="nfd-topology-updater-server-name-override_node-feature-discovery-operator">-server-name-override</h5><p>
						The <code class="literal">-server-name-override</code> flag specifies the common name (CN) which to expect from the nfd-master TLS certificate. This flag is mostly intended for development and debugging purposes.
					</p><p>
						Default: empty
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -server-name-override=localhost</pre>

						</p></div><h5 id="nfd-topology-updater-sleep-interval_node-feature-discovery-operator">-sleep-interval</h5><p>
						The <code class="literal">-sleep-interval</code> flag specifies the interval between resource hardware topology re-examination and custom resource updates. A non-positive value implies infinite sleep interval and no re-detection is done.
					</p><p>
						Default: <code class="literal">60s</code>
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -sleep-interval=1h</pre>

						</p></div><h5 id="nfd-topology-updater-version_node-feature-discovery-operator">-version</h5><p>
						Print version and exit.
					</p><h5 id="nfd-topology-updater-watch-namespace_node-feature-discovery-operator">-watch-namespace</h5><p>
						The <code class="literal">-watch-namespace</code> flag specifies the namespace to ensure that resource hardware topology examination only happens for the pods running in the specified namespace. Pods that are not running in the specified namespace are not considered during resource accounting. This is particularly useful for testing and debugging purposes. A <code class="literal">*</code> value means that all of the pods across all namespaces are considered during the accounting process.
					</p><p>
						Default: <code class="literal">*</code>
					</p><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
							
<pre class="programlisting language-terminal">$ nfd-topology-updater -watch-namespace=rte</pre>

						</p></div></section></section></section></section><section class="chapter" id="kernel-module-management-operator"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Kernel Module Management Operator</h1></div></div></div><p>
			Learn about the Kernel Module Management (KMM) Operator and how you can use it to deploy out-of-tree kernel modules and device plugins on OpenShift Container Platform clusters.
		</p><section class="section" id="about-kmm_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.1. About the Kernel Module Management Operator</h2></div></div></div><p>
				The Kernel Module Management (KMM) Operator manages, builds, signs, and deploys out-of-tree kernel modules and device plugins on OpenShift Container Platform clusters.
			</p><p>
				KMM adds a new <code class="literal">Module</code> CRD which describes an out-of-tree kernel module and its associated device plugin. You can use <code class="literal">Module</code> resources to configure how to load the module, define <code class="literal">ModuleLoader</code> images for kernel versions, and include instructions for building and signing modules for specific kernel versions.
			</p><p>
				KMM is designed to accommodate multiple kernel versions at once for any kernel module, allowing for seamless node upgrades and reduced application downtime.
			</p></section><section class="section" id="kmm-install_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.2. Installing the Kernel Module Management Operator</h2></div></div></div><p>
				As a cluster administrator, you can install the Kernel Module Management (KMM) Operator by using the OpenShift CLI or the web console.
			</p><p>
				The KMM Operator is supported on OpenShift Container Platform 4.12 and later. Installing KMM on version 4.11 does not require specific additional steps. For details on installing KMM on version 4.10 and earlier, see the section "Installing the Kernel Module Management Operator on earlier versions of OpenShift Container Platform".
			</p><section class="section" id="kmm-install-using-web-console_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.2.1. Installing the Kernel Module Management Operator using the web console</h3></div></div></div><p>
					As a cluster administrator, you can install the Kernel Module Management (KMM) Operator using the OpenShift Container Platform web console.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Log in to the OpenShift Container Platform web console.
						</li><li class="listitem"><p class="simpara">
							Install the Kernel Module Management Operator:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the OpenShift Container Platform web console, click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Kernel Module Management Operator</strong></span> from the list of available Operators, and then click <span class="strong strong"><strong>Install</strong></span>.
								</li><li class="listitem">
									From the <span class="strong strong"><strong>Installed Namespace</strong></span> list, select the <code class="literal">openshift-kmm</code> namespace.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Install</strong></span>.
								</li></ol></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify that KMM Operator installed successfully:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page.
						</li><li class="listitem"><p class="simpara">
							Ensure that <span class="strong strong"><strong>Kernel Module Management Operator</strong></span> is listed in the <span class="strong strong"><strong>openshift-kmm</strong></span> project with a <span class="strong strong"><strong>Status</strong></span> of <span class="strong strong"><strong>InstallSucceeded</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								During installation, an Operator might display a <span class="strong strong"><strong>Failed</strong></span> status. If the installation later succeeds with an <span class="strong strong"><strong>InstallSucceeded</strong></span> message, you can ignore the <span class="strong strong"><strong>Failed</strong></span> message.
							</p></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Troubleshooting</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To troubleshoot issues with Operator installation:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Navigate to the <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> page and inspect the <span class="strong strong"><strong>Operator Subscriptions</strong></span> and <span class="strong strong"><strong>Install Plans</strong></span> tabs for any failure or errors under <span class="strong strong"><strong>Status</strong></span>.
								</li><li class="listitem">
									Navigate to the <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Pods</strong></span> page and check the logs for pods in the <code class="literal">openshift-kmm</code> project.
								</li></ol></div></li></ol></div></section><section class="section" id="kmm-install-using-cli_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.2.2. Installing the Kernel Module Management Operator by using the CLI</h3></div></div></div><p>
					As a cluster administrator, you can install the Kernel Module Management (KMM) Operator by using the OpenShift CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a running OpenShift Container Platform cluster.
						</li><li class="listitem">
							You installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You are logged into the OpenShift CLI as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install KMM in the <code class="literal">openshift-kmm</code> namespace:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Namespace</code> CR and save the YAML file, for example, <code class="literal">kmm-namespace.yaml</code>:
								</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: openshift-kmm</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">OperatorGroup</code> CR and save the YAML file, for example, <code class="literal">kmm-op-group.yaml</code>:
								</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: kernel-module-management
  namespace: openshift-kmm</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Subscription</code> CR and save the YAML file, for example, <code class="literal">kmm-sub.yaml</code>:
								</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: kernel-module-management
  namespace: openshift-kmm
spec:
  channel: release-1.0
  installPlanApproval: Automatic
  name: kernel-module-management
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: kernel-module-management.v1.0.0</pre></li><li class="listitem"><p class="simpara">
									Create the subscription object by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f kmm-sub.yaml</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To verify that the Operator deployment is successful, run the following command:
						</p><pre class="programlisting language-terminal">$ oc get -n openshift-kmm deployments.apps kmm-operator-controller-manager</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                              READY UP-TO-DATE  AVAILABLE AGE
kmm-operator-controller-manager   1/1   1           1         97s</pre>

							</p></div><p class="simpara">
							The Operator is available.
						</p></li></ul></div></section><section class="section" id="kmm-install-older-version_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.2.3. Installing the Kernel Module Management Operator on earlier versions of OpenShift Container Platform</h3></div></div></div><p>
					The KMM Operator is supported on OpenShift Container Platform 4.12 and later. For version 4.10 and earlier, you must create a new <code class="literal">SecurityContextConstraint</code> object and bind it to the Operator’s <code class="literal">ServiceAccount</code>. As a cluster administrator, you can install the Kernel Module Management (KMM) Operator by using the OpenShift CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a running OpenShift Container Platform cluster.
						</li><li class="listitem">
							You installed the OpenShift CLI (<code class="literal">oc</code>).
						</li><li class="listitem">
							You are logged into the OpenShift CLI as a user with <code class="literal">cluster-admin</code> privileges.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install KMM in the <code class="literal">openshift-kmm</code> namespace:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Namespace</code> CR and save the YAML file, for example, <code class="literal">kmm-namespace.yaml</code> file:
								</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: openshift-kmm</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">SecurityContextConstraint</code> object and save the YAML file, for example, <code class="literal">kmm-security-constraint.yaml</code>:
								</p><pre class="programlisting language-yaml">allowHostDirVolumePlugin: false
allowHostIPC: false
allowHostNetwork: false
allowHostPID: false
allowHostPorts: false
allowPrivilegeEscalation: false
allowPrivilegedContainer: false
allowedCapabilities:
  - NET_BIND_SERVICE
apiVersion: security.openshift.io/v1
defaultAddCapabilities: null
fsGroup:
  type: MustRunAs
groups: []
kind: SecurityContextConstraints
metadata:
  name: restricted-v2
priority: null
readOnlyRootFilesystem: false
requiredDropCapabilities:
  - ALL
runAsUser:
  type: MustRunAsRange
seLinuxContext:
  type: MustRunAs
seccompProfiles:
  - runtime/default
supplementalGroups:
  type: RunAsAny
users: []
volumes:
  - configMap
  - downwardAPI
  - emptyDir
  - persistentVolumeClaim
  - projected
  - secret</pre></li><li class="listitem"><p class="simpara">
									Bind the <code class="literal">SecurityContextConstraint</code> object to the Operator’s <code class="literal">ServiceAccount</code> by running the following commands:
								</p><pre class="programlisting language-terminal">$ oc apply -f kmm-security-constraint.yaml</pre><pre class="programlisting language-terminal">$ oc adm policy add-scc-to-user kmm-security-constraint -z kmm-operator-controller-manager -n openshift-kmm</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">OperatorGroup</code> CR and save the YAML file, for example, <code class="literal">kmm-op-group.yaml</code>:
								</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: kernel-module-management
  namespace: openshift-kmm</pre></li><li class="listitem"><p class="simpara">
									Create the following <code class="literal">Subscription</code> CR and save the YAML file, for example, <code class="literal">kmm-sub.yaml</code>:
								</p><pre class="programlisting language-yaml">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: kernel-module-management
  namespace: openshift-kmm
spec:
  channel: release-1.0
  installPlanApproval: Automatic
  name: kernel-module-management
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: kernel-module-management.v1.0.0</pre></li><li class="listitem"><p class="simpara">
									Create the subscription object by running the following command:
								</p><pre class="programlisting language-terminal">$ oc create -f kmm-sub.yaml</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To verify that the Operator deployment is successful, run the following command:
						</p><pre class="programlisting language-terminal">$ oc get -n openshift-kmm deployments.apps kmm-operator-controller-manager</pre><div class="formalpara"><p class="title"><strong>Example output</strong></p><p>
								
<pre class="programlisting language-terminal">NAME                              READY UP-TO-DATE  AVAILABLE AGE
kmm-operator-controller-manager   1/1   1           1         97s</pre>

							</p></div><p class="simpara">
							The Operator is available.
						</p></li></ul></div></section></section><section class="section" id="kmm-deploy-kernel-modules_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.3. Kernel module deployment</h2></div></div></div><p>
				For each <code class="literal">Module</code> resource, Kernel Module Management (KMM) can create a number of <code class="literal">DaemonSet</code> resources:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						One ModuleLoader <code class="literal">DaemonSet</code> per compatible kernel version running in the cluster.
					</li><li class="listitem">
						One device plugin <code class="literal">DaemonSet</code>, if configured.
					</li></ul></div><p>
				The module loader daemon set resources run ModuleLoader images to load kernel modules. A module loader image is an OCI image that contains the <code class="literal">.ko</code> files and both the <code class="literal">modprobe</code> and <code class="literal">sleep</code> binaries.
			</p><p>
				When the module loader pod is created, the pod runs <code class="literal">modprobe</code> to insert the specified module into the kernel. It then enters a sleep state until it is terminated. When that happens, the <code class="literal">ExecPreStop</code> hook runs <code class="literal">modprobe -r</code> to unload the kernel module.
			</p><p>
				If the <code class="literal">.spec.devicePlugin</code> attribute is configured in a <code class="literal">Module</code> resource, then KMM creates a <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/">device plugin</a> daemon set in the cluster. That daemon set targets:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Nodes that match the <code class="literal">.spec.selector</code> of the <code class="literal">Module</code> resource.
					</li><li class="listitem">
						Nodes with the kernel module loaded (where the module loader pod is in the <code class="literal">Ready</code> condition).
					</li></ul></div><section class="section" id="kmm-creating-module-cr_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.3.1. The Module custom resource definition</h3></div></div></div><p>
					The <code class="literal">Module</code> custom resource definition (CRD) represents a kernel module that can be loaded on all or select nodes in the cluster, through a module loader image. A <code class="literal">Module</code> custom resource (CR) specifies one or more kernel versions with which it is compatible, and a node selector.
				</p><p>
					The compatible versions for a <code class="literal">Module</code> resource are listed under <code class="literal">.spec.moduleLoader.container.kernelMappings</code>. A kernel mapping can either match a <code class="literal">literal</code> version, or use <code class="literal">regexp</code> to match many of them at the same time.
				</p><p>
					The reconciliation loop for the <code class="literal">Module</code> resource runs the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							List all nodes matching <code class="literal">.spec.selector</code>.
						</li><li class="listitem">
							Build a set of all kernel versions running on those nodes.
						</li><li class="listitem"><p class="simpara">
							For each kernel version:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Go through <code class="literal">.spec.moduleLoader.container.kernelMappings</code> and find the appropriate container image name. If the kernel mapping has <code class="literal">build</code> or <code class="literal">sign</code> defined and the container image does not already exist, run the build, the signing job, or both, as needed.
								</li><li class="listitem">
									Create a module loader daemon set with the container image determined in the previous step.
								</li><li class="listitem">
									If <code class="literal">.spec.devicePlugin</code> is defined, create a device plugin daemon set using the configuration specified under <code class="literal">.spec.devicePlugin.container</code>.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Run <code class="literal">garbage-collect</code> on:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Existing daemon set resources targeting kernel versions that are not run by any node in the cluster.
								</li><li class="listitem">
									Successful build jobs.
								</li><li class="listitem">
									Successful signing jobs.
								</li></ol></div></li></ol></div></section><section class="section" id="kmm-setting-soft-dependencies-between-kernel-modules_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.3.2. Set soft dependencies between kernel modules</h3></div></div></div><p>
					Some configurations require that several kernel modules be loaded in a specific order to work properly, even though the modules do not directly depend on each other through symbols. These are called soft dependencies. <code class="literal">depmod</code> is usually not aware of these dependencies, and they do not appear in the files it produces. For example, if <code class="literal">mod_a</code> has a soft dependency on <code class="literal">mod_b</code>, <code class="literal">modprobe mod_a</code> will not load <code class="literal">mod_b</code>.
				</p><p>
					You can resolve these situations by declaring soft dependencies in the Module Custom Resource Definition (CRD) using the <code class="literal">modulesLoadingOrder</code> field.
				</p><pre class="programlisting language-yaml"># ...
spec:
  moduleLoader:
    container:
      modprobe:
        moduleName: mod_a
        dirName: /opt
        firmwarePath: /firmware
        parameters:
          - param=1
        modulesLoadingOrder:
          - mod_a
          - mod_b</pre><p>
					In the configuration above:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The loading order is <code class="literal">mod_b</code>, then <code class="literal">mod_a</code>.
						</li><li class="listitem">
							The unloading order is <code class="literal">mod_a</code>, then <code class="literal">mod_b</code>.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The first value in the list, to be loaded last, must be equivalent to the <code class="literal">moduleName</code>.
					</p></div></div></section><section class="section" id="kmm-security_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.3.3. Security and permissions</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Loading kernel modules is a highly sensitive operation. After they are loaded, kernel modules have all possible permissions to do any kind of operation on the node.
					</p></div></div><section class="section" id="serviceaccounts-and-securitycontextconstraint_kernel-module-management-operator"><div class="titlepage"><div><div><h4 class="title">4.3.3.1. ServiceAccounts and SecurityContextConstraints</h4></div></div></div><p>
						Kernel Module Management (KMM) creates a privileged workload to load the kernel modules on nodes. That workload needs <code class="literal">ServiceAccounts</code> allowed to use the <code class="literal">privileged</code> <code class="literal">SecurityContextConstraint</code> (SCC) resource.
					</p><p>
						The authorization model for that workload depends on the namespace of the <code class="literal">Module</code> resource, as well as its spec.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If the <code class="literal">.spec.moduleLoader.serviceAccountName</code> or <code class="literal">.spec.devicePlugin.serviceAccountName</code> fields are set, they are always used.
							</li><li class="listitem"><p class="simpara">
								If those fields are not set, then:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										If the <code class="literal">Module</code> resource is created in the operator’s namespace (<code class="literal">openshift-kmm</code> by default), then KMM uses its default, powerful <code class="literal">ServiceAccounts</code> to run the daemon sets.
									</li><li class="listitem">
										If the <code class="literal">Module</code> resource is created in any other namespace, then KMM runs the daemon sets as the namespace’s <code class="literal">default</code> <code class="literal">ServiceAccount</code>. The <code class="literal">Module</code> resource cannot run a privileged workload unless you manually enable it to use the <code class="literal">privileged</code> SCC.
									</li></ul></div></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							<code class="literal">openshift-kmm</code> is a trusted namespace.
						</p><p>
							When setting up RBAC permissions, remember that any user or <code class="literal">ServiceAccount</code> creating a <code class="literal">Module</code> resource in the <code class="literal">openshift-kmm</code> namespace results in KMM automatically running privileged workloads on potentially all nodes in the cluster.
						</p></div></div><p>
						To allow any <code class="literal">ServiceAccount</code> to use the <code class="literal">privileged</code> SCC and therefore to run module loader or device plugin pods, use the following command:
					</p><pre class="programlisting language-terminal">$ oc adm policy add-scc-to-user privileged -z "${serviceAccountName}" [ -n "${namespace}" ]</pre></section><section class="section" id="pod-security-standards_kernel-module-management-operator"><div class="titlepage"><div><div><h4 class="title">4.3.3.2. Pod security standards</h4></div></div></div><p>
						OpenShift runs a synchronization mechanism that sets the namespace Pod Security level automatically based on the security contexts in use. No action is needed.
					</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/authentication_and_authorization/#understanding-and-managing-pod-security-admission">Understanding and managing pod security admission</a>.
							</li></ul></div></section></section></section><section class="section" id="kmm-replacing-in-tree-modules-with-out-of-tree-modules_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.4. Replacing in-tree modules with out-of-tree modules</h2></div></div></div><p>
				You can use Kernel Module Management (KMM) to build kernel modules that can be loaded or unloaded into the kernel on demand. These modules extend the functionality of the kernel without the need to reboot the system. Modules can be configured as built-in or dynamically loaded.
			</p><p>
				Dynamically loaded modules include in-tree modules and out-of-tree (OOT) modules. In-tree modules are internal to the Linux kernel tree, that is, they are already part of the kernel. Out-of-tree modules are external to the Linux kernel tree. They are generally written for development and testing purposes, such as testing the new version of a kernel module that is shipped in-tree, or to deal with incompatibilities.
			</p><p>
				Some modules loaded by KMM could replace in-tree modules already loaded on the node. To unload an in-tree module before loading your module, set the <code class="literal">.spec.moduleLoader.container.inTreeModuleToRemove</code> field. The following is an example for module replacement for all kernel mappings:
			</p><pre class="programlisting language-yaml"># ...
spec:
  moduleLoader:
    container:
      modprobe:
        moduleName: mod_a

      inTreeModuleToRemove: mod_b</pre><p>
				In this example, the <code class="literal">moduleLoader</code> pod uses <code class="literal">inTreeModuleToRemove</code> to unload the in-tree <code class="literal">mod_b</code> before loading <code class="literal">mod_a</code> from the <code class="literal">moduleLoader</code> image. When the <code class="literal">moduleLoader`pod is terminated and `mod_a</code> is unloaded, <code class="literal">mod_b</code> is not loaded again.
			</p><p>
				The following is an example for module replacement for specific kernel mappings:
			</p><pre class="programlisting language-yaml"># ...
spec:
  moduleLoader:
    container:
      kernelMappings:
        - literal: 6.0.15-300.fc37.x86_64
          containerImage: some.registry/org/my-kmod:6.0.15-300.fc37.x86_64
          inTreeModuleToRemove: &lt;module_name&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://fastbitlab.com/building-a-linux-kernel-module/">Building a linux kernel module</a>
					</li></ul></div><section class="section" id="kmm-example-cr_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.4.1. Example Module CR</h3></div></div></div><p>
					The following is an annotated <code class="literal">Module</code> example:
				</p><pre class="programlisting language-yaml">apiVersion: kmm.sigs.x-k8s.io/v1beta1
kind: Module
metadata:
  name: &lt;my_kmod&gt;
spec:
  moduleLoader:
    container:
      modprobe:
        moduleName: &lt;my_kmod&gt; <span id="CO1-3"><!--Empty--></span><span class="callout">1</span>
        dirName: /opt <span id="CO1-4"><!--Empty--></span><span class="callout">2</span>
        firmwarePath: /firmware <span id="CO1-5"><!--Empty--></span><span class="callout">3</span>
        parameters:  <span id="CO1-6"><!--Empty--></span><span class="callout">4</span>
          - param=1
      kernelMappings:  <span id="CO1-7"><!--Empty--></span><span class="callout">5</span>
        - literal: 6.0.15-300.fc37.x86_64
          containerImage: some.registry/org/my-kmod:6.0.15-300.fc37.x86_64
        - regexp: '^.+\fc37\.x86_64$' <span id="CO1-8"><!--Empty--></span><span class="callout">6</span>
          containerImage: "some.other.registry/org/&lt;my_kmod&gt;:${KERNEL_FULL_VERSION}"
        - regexp: '^.+$' <span id="CO1-9"><!--Empty--></span><span class="callout">7</span>
          containerImage: "some.registry/org/&lt;my_kmod&gt;:${KERNEL_FULL_VERSION}"
          build:
            buildArgs:  <span id="CO1-10"><!--Empty--></span><span class="callout">8</span>
              - name: ARG_NAME
                value: &lt;some_value&gt;
            secrets:
              - name: &lt;some_kubernetes_secret&gt;  <span id="CO1-11"><!--Empty--></span><span class="callout">9</span>
            baseImageRegistryTLS: <span id="CO1-12"><!--Empty--></span><span class="callout">10</span>
              insecure: false
              insecureSkipTLSVerify: false <span id="CO1-13"><!--Empty--></span><span class="callout">11</span>
            dockerfileConfigMap:  <span id="CO1-14"><!--Empty--></span><span class="callout">12</span>
              name: &lt;my_kmod_dockerfile&gt;
          sign:
            certSecret:
              name: &lt;cert_secret&gt;  <span id="CO1-15"><!--Empty--></span><span class="callout">13</span>
            keySecret:
              name: &lt;key_secret&gt;  <span id="CO1-16"><!--Empty--></span><span class="callout">14</span>
            filesToSign:
              - /opt/lib/modules/${KERNEL_FULL_VERSION}/&lt;my_kmod&gt;.ko
          registryTLS: <span id="CO1-17"><!--Empty--></span><span class="callout">15</span>
            insecure: false <span id="CO1-18"><!--Empty--></span><span class="callout">16</span>
            insecureSkipTLSVerify: false
    serviceAccountName: &lt;sa_module_loader&gt;  <span id="CO1-19"><!--Empty--></span><span class="callout">17</span>
  devicePlugin:  <span id="CO1-20"><!--Empty--></span><span class="callout">18</span>
    container:
      image: some.registry/org/device-plugin:latest  <span id="CO1-21"><!--Empty--></span><span class="callout">19</span>
      env:
        - name: MY_DEVICE_PLUGIN_ENV_VAR
          value: SOME_VALUE
      volumeMounts:  <span id="CO1-22"><!--Empty--></span><span class="callout">20</span>
        - mountPath: /some/mountPath
          name: &lt;device_plugin_volume&gt;
    volumes:  <span id="CO1-23"><!--Empty--></span><span class="callout">21</span>
      - name: &lt;device_plugin_volume&gt;
        configMap:
          name: &lt;some_configmap&gt;
    serviceAccountName: &lt;sa_device_plugin&gt; <span id="CO1-24"><!--Empty--></span><span class="callout">22</span>
  imageRepoSecret:  <span id="CO1-25"><!--Empty--></span><span class="callout">23</span>
    name: &lt;secret_name&gt;
  selector:
    node-role.kubernetes.io/worker: ""</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> <a href="#CO1-2"><span class="callout">1</span></a> <a href="#CO1-3"><span class="callout">1</span></a> </dt><dd><div class="para">
							Required.
						</div></dd><dt><a href="#CO1-4"><span class="callout">2</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-5"><span class="callout">3</span></a> </dt><dd><div class="para">
							Optional: Copies <code class="literal">/firmware/*</code> into <code class="literal">/var/lib/firmware/</code> on the node.
						</div></dd><dt><a href="#CO1-6"><span class="callout">4</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-7"><span class="callout">5</span></a> </dt><dd><div class="para">
							At least one kernel item is required.
						</div></dd><dt><a href="#CO1-8"><span class="callout">6</span></a> </dt><dd><div class="para">
							For each node running a kernel matching the regular expression, KMM creates a <code class="literal">DaemonSet</code> resource running the image specified in <code class="literal">containerImage</code> with <code class="literal">${KERNEL_FULL_VERSION}</code> replaced with the kernel version.
						</div></dd><dt><a href="#CO1-9"><span class="callout">7</span></a> </dt><dd><div class="para">
							For any other kernel, build the image using the Dockerfile in the <code class="literal">my-kmod</code> ConfigMap.
						</div></dd><dt><a href="#CO1-10"><span class="callout">8</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-11"><span class="callout">9</span></a> </dt><dd><div class="para">
							Optional: A value for <code class="literal">some-kubernetes-secret</code> can be obtained from the build environment at <code class="literal">/run/secrets/some-kubernetes-secret</code>.
						</div></dd><dt><a href="#CO1-12"><span class="callout">10</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, the build is allowed to pull the image in the Dockerfile <code class="literal">FROM</code> instruction using plain HTTP.
						</div></dd><dt><a href="#CO1-13"><span class="callout">11</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, the build will skip any TLS server certificate validation when pulling the image in the Dockerfile <code class="literal">FROM</code> instruction using plain HTTP.
						</div></dd><dt><a href="#CO1-14"><span class="callout">12</span></a> </dt><dd><div class="para">
							Required.
						</div></dd><dt><a href="#CO1-15"><span class="callout">13</span></a> </dt><dd><div class="para">
							Required: A secret holding the public secureboot key with the key 'cert'.
						</div></dd><dt><a href="#CO1-16"><span class="callout">14</span></a> </dt><dd><div class="para">
							Required: A secret holding the private secureboot key with the key 'key'.
						</div></dd><dt><a href="#CO1-17"><span class="callout">15</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, KMM will be allowed to check if the container image already exists using plain HTTP.
						</div></dd><dt><a href="#CO1-18"><span class="callout">16</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, KMM will skip any TLS server certificate validation when checking if the container image already exists.
						</div></dd><dt><a href="#CO1-19"><span class="callout">17</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-20"><span class="callout">18</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-21"><span class="callout">19</span></a> </dt><dd><div class="para">
							Required: If the device plugin section is present.
						</div></dd><dt><a href="#CO1-22"><span class="callout">20</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-23"><span class="callout">21</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-24"><span class="callout">22</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO1-25"><span class="callout">23</span></a> </dt><dd><div class="para">
							Optional: Used to pull module loader and device plugin images.
						</div></dd></dl></div></section></section><section class="section" id="kmm-creating-moduleloader-image_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.5. Using a ModuleLoader image</h2></div></div></div><p>
				Kernel Module Management (KMM) works with purpose-built module loader images. These are standard OCI images that must satisfy the following requirements:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">.ko</code> files must be located in <code class="literal">/opt/lib/modules/${KERNEL_VERSION}</code>.
					</li><li class="listitem">
						<code class="literal">modprobe</code> and <code class="literal">sleep</code> binaries must be defined in the <code class="literal">$PATH</code> variable.
					</li></ul></div><section class="section" id="kmm-running-depmod_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.5.1. Running depmod</h3></div></div></div><p>
					If your module loader image contains several kernel modules and if one of the modules depends on another module, it is best practice to run <code class="literal">depmod</code> at the end of the build process to generate dependencies and map files.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must have a Red Hat subscription to download the <code class="literal">kernel-devel</code> package.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							To generate <code class="literal">modules.dep</code> and <code class="literal">.map</code> files for a specific kernel version, run <code class="literal">depmod -b /opt ${KERNEL_VERSION}</code>.
						</li></ol></div><section class="section" id="example-dockerfile_kernel-module-management-operator"><div class="titlepage"><div><div><h4 class="title">4.5.1.1. Example Dockerfile</h4></div></div></div><p>
						If you are building your image on OpenShift Container Platform, consider using the Driver Tool Kit (DTK).
					</p><p>
						For further information, see <a class="link" href="https://cloud.redhat.com/blog/how-to-use-entitled-image-builds-to-build-drivercontainers-with-ubi-on-openshift">using an entitled build</a>.
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: kmm-ci-dockerfile
data:
  dockerfile: |
    ARG DTK_AUTO
    FROM ${DTK_AUTO} as builder
    ARG KERNEL_VERSION
    WORKDIR /usr/src
    RUN ["git", "clone", "https://github.com/rh-ecosystem-edge/kernel-module-management.git"]
    WORKDIR /usr/src/kernel-module-management/ci/kmm-kmod
    RUN KERNEL_SRC_DIR=/lib/modules/${KERNEL_VERSION}/build make all
    FROM registry.redhat.io/ubi9/ubi-minimal
    ARG KERNEL_VERSION
    RUN microdnf install kmod
    COPY --from=builder /usr/src/kernel-module-management/ci/kmm-kmod/kmm_ci_a.ko /opt/lib/modules/${KERNEL_VERSION}/
    COPY --from=builder /usr/src/kernel-module-management/ci/kmm-kmod/kmm_ci_b.ko /opt/lib/modules/${KERNEL_VERSION}/
    RUN depmod -b /opt ${KERNEL_VERSION}</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/#driver-toolkit">Driver Toolkit</a>.
							</li></ul></div></section></section><section class="section" id="kmm-building-in-cluster_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.5.2. Building in the cluster</h3></div></div></div><p>
					KMM can build module loader images in the cluster. Follow these guidelines:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Provide build instructions using the <code class="literal">build</code> section of a kernel mapping.
						</li><li class="listitem">
							Copy the <code class="literal">Dockerfile</code> for your container image into a <code class="literal">ConfigMap</code> resource, under the <code class="literal">dockerfile</code> key.
						</li><li class="listitem">
							Ensure that the <code class="literal">ConfigMap</code> is located in the same namespace as the <code class="literal">Module</code>.
						</li></ul></div><p>
					KMM checks if the image name specified in the <code class="literal">containerImage</code> field exists. If it does, the build is skipped.
				</p><p>
					Otherwise, KMM creates a <code class="literal">Build</code> resource to build your image. After the image is built, KMM proceeds with the <code class="literal">Module</code> reconciliation. See the following example.
				</p><pre class="programlisting language-yaml"># ...
- regexp: '^.+$'
  containerImage: "some.registry/org/&lt;my_kmod&gt;:${KERNEL_FULL_VERSION}"
  build:
    buildArgs:  <span id="CO2-1"><!--Empty--></span><span class="callout">1</span>
      - name: ARG_NAME
        value: &lt;some_value&gt;
    secrets: <span id="CO2-2"><!--Empty--></span><span class="callout">2</span>
      - name: &lt;some_kubernetes_secret&gt; <span id="CO2-3"><!--Empty--></span><span class="callout">3</span>
    baseImageRegistryTLS:
      insecure: false <span id="CO2-4"><!--Empty--></span><span class="callout">4</span>
      insecureSkipTLSVerify: false <span id="CO2-5"><!--Empty--></span><span class="callout">5</span>
    dockerfileConfigMap:  <span id="CO2-6"><!--Empty--></span><span class="callout">6</span>
      name: &lt;my_kmod_dockerfile&gt;
  registryTLS:
    insecure: false <span id="CO2-7"><!--Empty--></span><span class="callout">7</span>
    insecureSkipTLSVerify: false <span id="CO2-8"><!--Empty--></span><span class="callout">8</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO2-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Optional.
						</div></dd><dt><a href="#CO2-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Will be mounted in the build pod as <code class="literal">/run/secrets/some-kubernetes-secret</code>.
						</div></dd><dt><a href="#CO2-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, the build will be allowed to pull the image in the Dockerfile <code class="literal">FROM</code> instruction using plain HTTP.
						</div></dd><dt><a href="#CO2-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, the build will skip any TLS server certificate validation when pulling the image in the Dockerfile <code class="literal">FROM</code> instruction using plain HTTP.
						</div></dd><dt><a href="#CO2-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							Required.
						</div></dd><dt><a href="#CO2-7"><span class="callout">7</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, KMM will be allowed to check if the container image already exists using plain HTTP.
						</div></dd><dt><a href="#CO2-8"><span class="callout">8</span></a> </dt><dd><div class="para">
							Optional: Avoid using this parameter. If set to <code class="literal">true</code>, KMM will skip any TLS server certificate validation when checking if the container image already exists.
						</div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/cicd/#build-configuration">Build configuration resources</a>.
						</li></ul></div></section><section class="section" id="kmm-using-driver-toolkit_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.5.3. Using the Driver Toolkit</h3></div></div></div><p>
					The Driver Toolkit (DTK) is a convenient base image for building build module loader images. It contains tools and libraries for the OpenShift version currently running in the cluster.
				</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						Use DTK as the first stage of a multi-stage <code class="literal">Dockerfile</code>.
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Build the kernel modules.
						</li><li class="listitem">
							Copy the <code class="literal">.ko</code> files into a smaller end-user image such as <a class="link" href="https://catalog.redhat.com/software/containers/ubi9/ubi-minimal"><code class="literal">ubi-minimal</code></a>.
						</li><li class="listitem"><p class="simpara">
							To leverage DTK in your in-cluster build, use the <code class="literal">DTK_AUTO</code> build argument. The value is automatically set by KMM when creating the <code class="literal">Build</code> resource. See the following example.
						</p><pre class="programlisting language-dockerfile">ARG DTK_AUTO
FROM ${DTK_AUTO} as builder
ARG KERNEL_VERSION
WORKDIR /usr/src
RUN ["git", "clone", "https://github.com/rh-ecosystem-edge/kernel-module-management.git"]
WORKDIR /usr/src/kernel-module-management/ci/kmm-kmod
RUN KERNEL_SRC_DIR=/lib/modules/${KERNEL_VERSION}/build make all
FROM registry.redhat.io/ubi9/ubi-minimal
ARG KERNEL_VERSION
RUN microdnf install kmod
COPY --from=builder /usr/src/kernel-module-management/ci/kmm-kmod/kmm_ci_a.ko /opt/lib/modules/${KERNEL_VERSION}/
COPY --from=builder /usr/src/kernel-module-management/ci/kmm-kmod/kmm_ci_b.ko /opt/lib/modules/${KERNEL_VERSION}/
RUN depmod -b /opt ${KERNEL_VERSION}</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/#driver-toolkit">Driver Toolkit</a>.
						</li></ul></div></section></section><section class="section" id="kmm-using-signing-with-kmm_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.6. Using signing with Kernel Module Management (KMM)</h2></div></div></div><p>
				On a Secure Boot enabled system, all kernel modules (kmods) must be signed with a public/private key-pair enrolled into the Machine Owner’s Key (MOK) database. Drivers distributed as part of a distribution should already be signed by the distribution’s private key, but for kernel modules build out-of-tree, KMM supports signing kernel modules using the <code class="literal">sign</code> section of the kernel mapping.
			</p><p>
				For more details on using Secure Boot, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot">Generating a public and private key pair</a>
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A public private key pair in the correct (DER) format.
					</li><li class="listitem">
						At least one secure-boot enabled node with the public key enrolled in its MOK database.
					</li><li class="listitem">
						Either a pre-built driver container image, or the source code and <code class="literal">Dockerfile</code> needed to build one in-cluster.
					</li></ul></div></section><section class="section" id="kmm-adding-the-keys-for-secureboot_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.7. Adding the keys for secureboot</h2></div></div></div><p>
				To use KMM Kernel Module Management (KMM) to sign kernel modules, a certificate and private key are required. For details on how to create these, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot">Generating a public and private key pair</a>.
			</p><p>
				For details on how to extract the public and private key pair, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel#signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot">Signing kernel modules with the private key</a>. Use steps 1 through 4 to extract the keys into files.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">sb_cert.cer</code> file that contains the certificate and the <code class="literal">sb_cert.priv</code> file that contains the private key:
					</p><pre class="programlisting language-terminal">$ openssl req -x509 -new -nodes -utf8 -sha256 -days 36500 -batch -config configuration_file.config -outform DER -out my_signing_key_pub.der -keyout my_signing_key.priv</pre></li><li class="listitem"><p class="simpara">
						Add the files by using one of the following methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Add the files as <a class="link" href="https://kubernetes.io/docs/concepts/configuration/secret/">secrets</a> directly:
							</p><pre class="programlisting language-terminal">$ oc create secret generic my-signing-key --from-file=key=&lt;my_signing_key.priv&gt;</pre><pre class="programlisting language-terminal">$ oc create secret generic my-signing-key-pub --from-file=key=&lt;my_signing_key_pub.der&gt;</pre></li><li class="listitem"><p class="simpara">
								Add the files by base64 encoding them:
							</p><pre class="programlisting language-terminal">$ cat sb_cert.priv | base64 -w 0 &gt; my_signing_key2.base64</pre><pre class="programlisting language-terminal">$ cat sb_cert.cer | base64 -w 0 &gt; my_signing_key_pub.base64</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Add the encoded text to a YAML file:
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: my-signing-key-pub
  namespace: default <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
type: Opaque
data:
  cert: &lt;base64_encoded_secureboot_public_key&gt;

---
apiVersion: v1
kind: Secret
metadata:
  name: my-signing-key
  namespace: default <span id="CO3-2"><!--Empty--></span><span class="callout">2</span>
type: Opaque
data:
  key: &lt;base64_encoded_secureboot_private_key&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> <a href="#CO3-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								<code class="literal">namespace</code> - Replace <code class="literal">default</code> with a valid namespace.
							</div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Apply the YAML file:
					</p><pre class="programlisting language-terminal">$ oc apply -f &lt;yaml_filename&gt;</pre></li></ol></div><section class="section" id="kmm-checking-the-keys_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.7.1. Checking the keys</h3></div></div></div><p>
					After you have added the keys, you must check them to ensure they are set correctly.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check to ensure the public key secret is set correctly:
						</p><pre class="programlisting language-terminal">$ oc get secret -o yaml &lt;certificate secret name&gt; | awk '/cert/{print $2; exit}' | base64 -d  | openssl x509 -inform der -text</pre><p class="simpara">
							This should display a certificate with a Serial Number, Issuer, Subject, and more.
						</p></li><li class="listitem"><p class="simpara">
							Check to ensure the private key secret is set correctly:
						</p><pre class="programlisting language-terminal">$ oc get secret -o yaml &lt;private key secret name&gt; | awk '/key/{print $2; exit}' | base64 -d</pre><p class="simpara">
							This should display the key enclosed in the <code class="literal">-----BEGIN PRIVATE KEY-----</code> and <code class="literal">-----END PRIVATE KEY-----</code> lines.
						</p></li></ol></div></section></section><section class="section" id="kmm-signing-a-prebuilt-driver-container_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.8. Signing a pre-built driver container</h2></div></div></div><p>
				Use this procedure if you have a pre-built image, such as an image either distributed by a hardware vendor or built elsewhere.
			</p><p>
				The following YAML file adds the public/private key-pair as secrets with the required key names - <code class="literal">key</code> for the private key, <code class="literal">cert</code> for the public key. The cluster then pulls down the <code class="literal">unsignedImage</code> image, opens it, signs the kernel modules listed in <code class="literal">filesToSign</code>, adds them back, and pushes the resulting image as <code class="literal">containerImage</code>.
			</p><p>
				Kernel Module Management (KMM) should then deploy the DaemonSet that loads the signed kmods onto all the nodes that match the selector. The driver containers should run successfully on any nodes that have the public key in their MOK database, and any nodes that are not secure-boot enabled, which ignore the signature. They should fail to load on any that have secure-boot enabled but do not have that key in their MOK database.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">keySecret</code> and <code class="literal">certSecret</code> secrets have been created.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Apply the YAML file:
					</p><pre class="programlisting language-yaml">---
apiVersion: kmm.sigs.x-k8s.io/v1beta1
kind: Module
metadata:
  name: example-module
spec:
  moduleLoader:
    serviceAccountName: default
    container:
      modprobe: <span id="CO4-1"><!--Empty--></span><span class="callout">1</span>
        moduleName: '&lt;your module name&gt;'
      kernelMappings:
        # the kmods will be deployed on all nodes in the cluster with a kernel that matches the regexp
        - regexp: '^.*\.x86_64$'
          # the container to produce containing the signed kmods
          containerImage: &lt;image name e.g. quay.io/myuser/my-driver:&lt;kernelversion&gt;-signed&gt;
          sign:
            # the image containing the unsigned kmods (we need this because we are not building the kmods within the cluster)
            unsignedImage: &lt;image name e.g. quay.io/myuser/my-driver:&lt;kernelversion&gt; &gt;
            keySecret: # a secret holding the private secureboot key with the key 'key'
              name: &lt;private key secret name&gt;
            certSecret: # a secret holding the public secureboot key with the key 'cert'
              name: &lt;certificate secret name&gt;
            filesToSign: # full path within the unsignedImage container to the kmod(s) to sign
              - /opt/lib/modules/4.18.0-348.2.1.el8_5.x86_64/kmm_ci_a.ko
  imageRepoSecret:
    # the name of a secret containing credentials to pull unsignedImage and push containerImage to the registry
    name: repo-pull-secret
  selector:
    kubernetes.io/arch: amd64</pre></li></ol></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						<code class="literal">modprobe</code> - The name of the kmod to load.
					</div></dd></dl></div></section><section class="section" id="kmm-building-and-signing-a-moduleloader-container-image_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.9. Building and signing a ModuleLoader container image</h2></div></div></div><p>
				Use this procedure if you have source code and must build your image first.
			</p><p>
				The following YAML file builds a new container image using the source code from the repository. The image produced is saved back in the registry with a temporary name, and this temporary image is then signed using the parameters in the <code class="literal">sign</code> section.
			</p><p>
				The temporary image name is based on the final image name and is set to be <code class="literal">&lt;containerImage&gt;:&lt;tag&gt;-&lt;namespace&gt;_&lt;module name&gt;_kmm_unsigned</code>.
			</p><p>
				For example, using the following YAML file, Kernel Module Management (KMM) builds an image named <code class="literal">example.org/repository/minimal-driver:final-default_example-module_kmm_unsigned</code> containing the build with unsigned kmods and push it to the registry. Then it creates a second image named <code class="literal">example.org/repository/minimal-driver:final</code> that contains the signed kmods. It is this second image that is loaded by the <code class="literal">DaemonSet</code> object and deploys the kmods to the cluster nodes.
			</p><p>
				After it is signed, the temporary image can be safely deleted from the registry. It will be rebuilt, if needed.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">keySecret</code> and <code class="literal">certSecret</code> secrets have been created.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Apply the YAML file:
					</p><pre class="programlisting language-yaml">---
apiVersion: v1
kind: ConfigMap
metadata:
  name: example-module-dockerfile
  namespace: default <span id="CO5-1"><!--Empty--></span><span class="callout">1</span>
data:
  Dockerfile: |
    ARG DTK_AUTO
    ARG KERNEL_VERSION
    FROM ${DTK_AUTO} as builder
    WORKDIR /build/
    RUN git clone -b main --single-branch https://github.com/rh-ecosystem-edge/kernel-module-management.git
    WORKDIR kernel-module-management/ci/kmm-kmod/
    RUN make
    FROM registry.access.redhat.com/ubi9/ubi:latest
    ARG KERNEL_VERSION
    RUN yum -y install kmod &amp;&amp; yum clean all
    RUN mkdir -p /opt/lib/modules/${KERNEL_VERSION}
    COPY --from=builder /build/kernel-module-management/ci/kmm-kmod/*.ko /opt/lib/modules/${KERNEL_VERSION}/
    RUN /usr/sbin/depmod -b /opt
---
apiVersion: kmm.sigs.x-k8s.io/v1beta1
kind: Module
metadata:
  name: example-module
  namespace: default <span id="CO5-2"><!--Empty--></span><span class="callout">2</span>
spec:
  moduleLoader:
    serviceAccountName: default <span id="CO5-3"><!--Empty--></span><span class="callout">3</span>
    container:
      modprobe:
        moduleName: simple_kmod
      kernelMappings:
        - regexp: '^.*\.x86_64$'
          containerImage: &lt; the name of the final driver container to produce&gt;
          build:
            dockerfileConfigMap:
              name: example-module-dockerfile
          sign:
            keySecret:
              name: &lt;private key secret name&gt;
            certSecret:
              name: &lt;certificate secret name&gt;
            filesToSign:
              - /opt/lib/modules/4.18.0-348.2.1.el8_5.x86_64/kmm_ci_a.ko
  imageRepoSecret: <span id="CO5-4"><!--Empty--></span><span class="callout">4</span>
    name: repo-pull-secret
  selector: # top-level selector
    kubernetes.io/arch: amd64</pre></li></ol></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> <a href="#CO5-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						<code class="literal">namespace</code> - Replace <code class="literal">default</code> with a valid namespace.
					</div></dd><dt><a href="#CO5-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						<code class="literal">serviceAccountName</code> - The default <code class="literal">serviceAccountName</code> does not have the required permissions to run a module that is privileged. For information on creating a service account, see "Creating service accounts" in the "Additional resources" of this section.
					</div></dd><dt><a href="#CO5-4"><span class="callout">4</span></a> </dt><dd><div class="para">
						<code class="literal">imageRepoSecret</code> - Used as <code class="literal">imagePullSecrets</code> in the <code class="literal">DaemonSet</code> object and to pull and push for the build and sign features.
					</div></dd></dl></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					For information on creating a service account, see <a class="link" href="https://docs.openshift.com/container-platform/4.12/authentication/understanding-and-creating-service-accounts.html#service-accounts-managing_understanding-service-accounts">Creating service accounts</a>.
				</p></div></section><section class="section" id="kmm-customizing-upgrades-for-kernel-modules_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.10. Customizing upgrades for kernel modules</h2></div></div></div><p>
				Use this procedure to upgrade the kernel module while running maintenance operations on the node, including rebooting the node, if needed. To minimize the impact on the workloads running in the cluster, run the kernel upgrade process sequentially, one node at a time.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					This procedure requires knowledge of the workload utilizing the kernel module and must be managed by the cluster administrator.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Before upgrading, set the <code class="literal">kmm.node.kubernetes.io/version-module.&lt;module-namespace&gt;.&lt;module-name&gt;=$moduleVersion</code> label on all the nodes that will be used by the kernel module.
					</li><li class="listitem">
						Terminate all user application workloads on the node or move them to another node.
					</li><li class="listitem">
						Unload the currently loaded kernel module.
					</li><li class="listitem">
						Ensure that the user workload (the application running in the cluster that is accessing kernel module) is not running on the node prior to kernel module unloading and that the workload is back running on the node after the new kernel module version has been loaded.
					</li><li class="listitem">
						Ensure that the device plugin managed by KMM on the node is unloaded before the upgrade process and reloaded following the upgrade process.
					</li><li class="listitem">
						Due to Kubernetes limitations in label names, the combined length of <code class="literal">Module</code> name and namespace must not exceed 39 characters.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Update the following fields in the <code class="literal">Module</code> CR:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">containerImage</code> (to the appropriate kernel version)
							</li><li class="listitem"><p class="simpara">
								<code class="literal">version</code>
							</p><p class="simpara">
								The update should be atomic; that is, both the <code class="literal">containerImage</code> and <code class="literal">version</code> fields must be updated simultaneously.
							</p></li></ul></div></li><li class="listitem">
						Terminate any workload using the kernel module on the node being upgraded.
					</li><li class="listitem">
						Remove the <code class="literal">kmm.node.kubernetes.io/version-module.&lt;module-namespace&gt;.&lt;module-name&gt;</code> label on the node. This unloads the kernel module from the node.
					</li><li class="listitem">
						If required, perform any additional maintenance required on the node for the kernel module upgrade.
					</li><li class="listitem">
						Add the <code class="literal">kmm.node.kubernetes.io/version-module.&lt;module-namespace&gt;.&lt;module-name&gt;=$moduleVersion</code> label to the node. <code class="literal">$moduleVersion</code> should be equal to the new value of the <code class="literal">version</code> field in the <code class="literal">Module</code> CR.
					</li><li class="listitem">
						Restore any workload that leverages the kernel module on the node.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If no additional upgrading is needed, you can skip Steps 3 through 6 by updating the <code class="literal">kmm.node.kubernetes.io/version-module.&lt;module-namespace&gt;.&lt;module-name&gt;</code> label value to the new <code class="literal">$moduleVersion</code> as set in the <code class="literal">Module</code>.
				</p></div></div></section><section class="section" id="kmm-day1-kernel-module-loading_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.11. Day 1 kernel module loading</h2></div></div></div><p>
				Kernel Module Management (KMM) is typically a Day 2 Operator. Kernel modules are loaded only after the complete initialization of a Linux (RHCOS) server. However, in some scenarios the kernel module must be loaded at an earlier stage. Day 1 functionality allows you to use the Machine Config Operator (MCO) to load kernel modules during the Linux <code class="literal">systemd</code> initialization stage.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/4.13/post_installation_configuration/machine-configuration-tasks.html#machine-config-operator_post-install-machine-configuration-tasks">Machine Config Operator</a>
					</li></ul></div><section class="section" id="kmm-day1-supported-use-cases_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.1. Day 1 supported use cases</h3></div></div></div><p>
					The Day 1 functionality supports a limited number of use cases. The main use case is to allow loading out-of-tree (OOT) kernel modules prior to NetworkManager service initialization. It does not support loading kernel module at the <code class="literal">initramfs</code> stage.
				</p><p>
					The following are the conditions needed for Day 1 functionality:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The kernel module is not loaded in the kernel.
						</li><li class="listitem">
							The in-tree kernel module is loaded into the kernel, but can be unloaded and replaced by the OOT kernel module. This means that the in-tree module is not referenced by any other kernel modules.
						</li><li class="listitem">
							In order for Day 1 functionlity to work, the node must have a functional network interface, that is, an in-tree kernel driver for that interface. The OOT kernel module can be a network driver that will replace the functional network driver.
						</li></ul></div></section><section class="section" id="kmm-day1-oot-kernel-module-loading-flow_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.2. OOT kernel module loading flow</h3></div></div></div><p>
					The loading of the out-of-tree (OOT) kernel module leverages the Machine Config Operator (MCO). The flow sequence is as follows:
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Apply a <code class="literal">MachineConfig</code> resource to the existing running cluster. In order to identify the necessary nodes that need to be updated, you must create an appropriate <code class="literal">MachineConfigPool</code> resource.
						</li><li class="listitem">
							MCO applies the reboots node by node. On any rebooted node, two new <code class="literal">systemd</code> services are deployed: <code class="literal">pull</code> service and <code class="literal">load</code> service.
						</li><li class="listitem">
							The <code class="literal">load</code> service is configured to run prior to the <code class="literal">NetworkConfiguration</code> service. The service tries to pull a predefined kernel module image and then, using that image, to unload an in-tree module and load an OOT kernel module.
						</li><li class="listitem">
							The <code class="literal">pull</code> service is configured to run after NetworkManager service. The service checks if the preconfigured kernel module image is located on the node’s filesystem. If it is, the service exists normally, and the server continues with the boot process. If not, it pulls the image onto the node and reboots the node afterwards.
						</li></ol></div></section><section class="section" id="kmm-day1-kernel-module-image_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.3. The kernel module image</h3></div></div></div><p>
					The Day 1 functionality uses the same DTK based image leveraged by Day 2 KMM builds. The out-of-tree kernel module should be located under <code class="literal">/opt/lib/modules/${kernelVersion}</code>.
				</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://docs.openshift.com/container-platform/4.13/hardware_enablement/psap-driver-toolkit.html">Driver Toolkit</a>
						</li></ul></div></section><section class="section" id="kmm-day1-in-tree-module-replacement_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.4. In-tree module replacement</h3></div></div></div><p>
					The Day 1 functionality always tries to replace the in-tree kernel module with the OOT version. If the in-tree kernel module is not loaded, the flow is not affected; the service proceeds and loads the OOT kernel module.
				</p></section><section class="section" id="kmm-day1-mco-yaml-creation_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.5. MCO yaml creation</h3></div></div></div><p>
					KMM provides an API to create an MCO YAML manifest for the Day 1 functionality:
				</p><pre class="programlisting language-console">ProduceMachineConfig(machineConfigName, machineConfigPoolRef, kernelModuleImage, kernelModuleName string) (string, error)</pre><p>
					The returned output is a string representation of the MCO YAML manifest to be applied. It is up to the customer to apply this YAML.
				</p><p>
					The parameters are:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">machineConfigName</code></span></dt><dd>
								The name of the MCO YAML manifest. This parameter is set as the <code class="literal">name</code> parameter of the metadata of the MCO YAML manifest.
							</dd><dt><span class="term"><code class="literal">machineConfigPoolRef</code></span></dt><dd>
								The <code class="literal">MachineConfigPool</code> name used to identify the targeted nodes.
							</dd><dt><span class="term"><code class="literal">kernelModuleImage</code></span></dt><dd>
								The name of the container image that includes the OOT kernel module.
							</dd><dt><span class="term"><code class="literal">kernelModuleName</code></span></dt><dd>
								The name of the OOT kernel module. This parameter is used both to unload the in-tree kernel module (if loaded into the kernel) and to load the OOT kernel module.
							</dd></dl></div><p>
					The API is located under <code class="literal">pkg/mcproducer</code> package of the KMM source code. The KMM operator does not need to be running to use the Day 1 functionality. You only need to import the <code class="literal">pkg/mcproducer</code> package into their operator/utility code, call the API, and apply the produced MCO YAML to the cluster.
				</p></section><section class="section" id="kmm-day1-machineconfigpool_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.11.6. The MachineConfigPool</h3></div></div></div><p>
					The <code class="literal">MachineConfigPool</code> identifies a collection of nodes that are affected by the applied MCO.
				</p><pre class="programlisting language-yaml">kind: MachineConfigPool
metadata:
  name: sfc
spec:
  machineConfigSelector: <span id="CO6-1"><!--Empty--></span><span class="callout">1</span>
    matchExpressions:
      - {key: machineconfiguration.openshift.io/role, operator: In, values: [worker, sfc]}
  nodeSelector: <span id="CO6-2"><!--Empty--></span><span class="callout">2</span>
    matchLabels:
      node-role.kubernetes.io/sfc: ""
  paused: false
  maxUnavailable: 1</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							Matches the labels in the MachineConfig.
						</div></dd><dt><a href="#CO6-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Matches the labels on the node.
						</div></dd></dl></div><p>
					There are predefined <code class="literal">MachineConfigPools</code> in the OCP cluster:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">worker</code>: Targets all worker nodes in the cluster
						</li><li class="listitem">
							<code class="literal">master</code>: Targets all master nodes in the cluster
						</li></ul></div><p>
					Define the following <code class="literal">MachineConfig</code> to target the master <code class="literal">MachineConfigPool</code>:
				</p><pre class="programlisting language-yaml">metadata:
  labels:
    machineconfiguration.opensfhit.io/role: master</pre><p>
					Define the following <code class="literal">MachineConfig</code> to target the worker <code class="literal">MachineConfigPool</code>:
				</p><pre class="programlisting language-yaml">metadata:
  labels:
    machineconfiguration.opensfhit.io/role: worker</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://www.redhat.com/en/blog/openshift-container-platform-4-how-does-machine-config-pool-work">About MachineConfigPool</a>
						</li></ul></div></section></section><section class="section" id="kmm-debugging-and-troubleshooting_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.12. Debugging and troubleshooting</h2></div></div></div><p>
				If the kmods in your driver container are not signed or are signed with the wrong key, then the container can enter a <code class="literal">PostStartHookError</code> or <code class="literal">CrashLoopBackOff</code> status. You can verify by running the <code class="literal">oc describe</code> command on your container, which displays the following message in this scenario:
			</p><pre class="programlisting language-terminal">modprobe: ERROR: could not insert '&lt;your_kmod_name&gt;': Required key not available</pre></section><section class="section" id="kmm-firmware-support_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.13. KMM firmware support</h2></div></div></div><p>
				Kernel modules sometimes need to load firmware files from the file system. KMM supports copying firmware files from the ModuleLoader image to the node’s file system.
			</p><p>
				The contents of <code class="literal">.spec.moduleLoader.container.modprobe.firmwarePath</code> are copied into the <code class="literal">/var/lib/firmware</code> path on the node before running the <code class="literal">modprobe</code> command to insert the kernel module.
			</p><p>
				All files and empty directories are removed from that location before running the <code class="literal">modprobe -r</code> command to unload the kernel module, when the pod is terminated.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/specialized_hardware_and_driver_enablement/#kmm-creating-moduleloader-image_kernel-module-management-operator">Creating a ModuleLoader image</a>.
					</li></ul></div><section class="section" id="kmm-configuring-the-lookup-path-on-nodes_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.13.1. Configuring the lookup path on nodes</h3></div></div></div><p>
					On OpenShift Container Platform nodes, the set of default lookup paths for firmwares does not include the <code class="literal">/var/lib/firmware</code> path.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the Machine Config Operator to create a <code class="literal">MachineConfig</code> custom resource (CR) that contains the <code class="literal">/var/lib/firmware</code> path:
						</p><pre class="programlisting language-yaml">apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: worker <span id="CO7-1"><!--Empty--></span><span class="callout">1</span>
  name: 99-worker-kernel-args-firmware-path
spec:
  kernelArguments:
    - 'firmware_class.path=/var/lib/firmware'</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									You can configure the label based on your needs. In the case of single-node OpenShift, use either <code class="literal">control-pane</code> or <code class="literal">master</code> objects.
								</div></dd></dl></div></li><li class="listitem">
							By applying the <code class="literal">MachineConfig</code> CR, the nodes are automatically rebooted.
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/post-installation_configuration/#understanding-the-machine-config-operator">Machine Config Operator</a>.
						</li></ul></div></section><section class="section" id="kmm-building-a-moduleloader-image_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.13.2. Building a ModuleLoader image</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							In addition to building the kernel module itself, include the binary firmware in the builder image:
						</p><pre class="programlisting language-dockerfile">FROM registry.redhat.io/ubi9/ubi-minimal as builder

# Build the kmod

RUN ["mkdir", "/firmware"]
RUN ["curl", "-o", "/firmware/firmware.bin", "https://artifacts.example.com/firmware.bin"]

FROM registry.redhat.io/ubi9/ubi-minimal

# Copy the kmod, install modprobe, run depmod

COPY --from=builder /firmware /firmware</pre></li></ul></div></section><section class="section" id="kmm-tuning-the-module-resource_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.13.3. Tuning the Module resource</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Set <code class="literal">.spec.moduleLoader.container.modprobe.firmwarePath</code> in the <code class="literal">Module</code> custom resource (CR):
						</p><pre class="programlisting language-yaml">apiVersion: kmm.sigs.x-k8s.io/v1beta1
kind: Module
metadata:
  name: my-kmod
spec:
  moduleLoader:
    container:
      modprobe:
        moduleName: my-kmod  # Required

        firmwarePath: /firmware <span id="CO8-1"><!--Empty--></span><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Optional: Copies <code class="literal">/firmware/*</code> into <code class="literal">/var/lib/firmware/</code> on the node.
								</div></dd></dl></div></li></ul></div></section></section><section class="section" id="kmm-troubleshooting_kernel-module-management-operator"><div class="titlepage"><div><div><h2 class="title">4.14. Troubleshooting KMM</h2></div></div></div><p>
				When troubleshooting KMM installation issues, you can monitor logs to determine at which stage issues occur. Then, retrieve diagnostic data relevant to that stage.
			</p><section class="section" id="kmm-must-gather-tool_kernel-module-management-operator"><div class="titlepage"><div><div><h3 class="title">4.14.1. Using the must-gather tool</h3></div></div></div><p>
					The <code class="literal">oc adm must-gather</code> command is the preferred way to collect a support bundle and provide debugging information to Red Hat Support. Collect specific information by running the command with the appropriate arguments as described in the following sections.
				</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#about-must-gather_gathering-cluster-data">About the must-gather tool</a>
						</li></ul></div><section class="section" id="kmm-gathering-data-for-kmm_kernel-module-management-operator"><div class="titlepage"><div><div><h4 class="title">4.14.1.1. Gathering data for KMM</h4></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Gather the data for the KMM Operator controller manager:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Set the <code class="literal">MUST_GATHER_IMAGE</code> variable:
									</p><pre class="programlisting language-terminal">$ export MUST_GATHER_IMAGE=$(oc get deployment -n openshift-kmm kmm-operator-controller-manager -ojsonpath='{.spec.template.spec.containers[?(@.name=="manager")].env[?(@.name=="RELATED_IMAGES_MUST_GATHER")].value}')</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Use the <code class="literal">-n &lt;namespace&gt;</code> switch to specify a namespace if you installed KMM in a custom namespace.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Run the <code class="literal">must-gather</code> tool:
									</p><pre class="programlisting language-terminal">$ oc adm must-gather --image="${MUST_GATHER_IMAGE}" -- /usr/bin/gather</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								View the Operator logs:
							</p><pre class="programlisting language-terminal">$ oc logs -fn openshift-kmm deployments/kmm-operator-controller-manager</pre><div class="example" id="idm140302643629024"><p class="title"><strong>Example 4.1. Example output</strong></p><div class="example-contents"><pre class="programlisting language-terminal">I0228 09:36:37.352405       1 request.go:682] Waited for 1.001998746s due to client-side throttling, not priority and fairness, request: GET:https://172.30.0.1:443/apis/machine.openshift.io/v1beta1?timeout=32s
I0228 09:36:40.767060       1 listener.go:44] kmm/controller-runtime/metrics "msg"="Metrics server is starting to listen" "addr"="127.0.0.1:8080"
I0228 09:36:40.769483       1 main.go:234] kmm/setup "msg"="starting manager"
I0228 09:36:40.769907       1 internal.go:366] kmm "msg"="Starting server" "addr"={"IP":"127.0.0.1","Port":8080,"Zone":""} "kind"="metrics" "path"="/metrics"
I0228 09:36:40.770025       1 internal.go:366] kmm "msg"="Starting server" "addr"={"IP":"::","Port":8081,"Zone":""} "kind"="health probe"
I0228 09:36:40.770128       1 leaderelection.go:248] attempting to acquire leader lease openshift-kmm/kmm.sigs.x-k8s.io...
I0228 09:36:40.784396       1 leaderelection.go:258] successfully acquired lease openshift-kmm/kmm.sigs.x-k8s.io
I0228 09:36:40.784876       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module" "source"="kind source: *v1beta1.Module"
I0228 09:36:40.784925       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module" "source"="kind source: *v1.DaemonSet"
I0228 09:36:40.784968       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module" "source"="kind source: *v1.Build"
I0228 09:36:40.785001       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module" "source"="kind source: *v1.Job"
I0228 09:36:40.785025       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module" "source"="kind source: *v1.Node"
I0228 09:36:40.785039       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="Module" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="Module"
I0228 09:36:40.785458       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="PodNodeModule" "controllerGroup"="" "controllerKind"="Pod" "source"="kind source: *v1.Pod"
I0228 09:36:40.786947       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="PreflightValidation" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidation" "source"="kind source: *v1beta1.PreflightValidation"
I0228 09:36:40.787406       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="PreflightValidation" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidation" "source"="kind source: *v1.Build"
I0228 09:36:40.787474       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="PreflightValidation" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidation" "source"="kind source: *v1.Job"
I0228 09:36:40.787488       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="PreflightValidation" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidation" "source"="kind source: *v1beta1.Module"
I0228 09:36:40.787603       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="NodeKernel" "controllerGroup"="" "controllerKind"="Node" "source"="kind source: *v1.Node"
I0228 09:36:40.787634       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="NodeKernel" "controllerGroup"="" "controllerKind"="Node"
I0228 09:36:40.787680       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="PreflightValidation" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidation"
I0228 09:36:40.785607       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream" "source"="kind source: *v1.ImageStream"
I0228 09:36:40.787822       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="preflightvalidationocp" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidationOCP" "source"="kind source: *v1beta1.PreflightValidationOCP"
I0228 09:36:40.787853       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream"
I0228 09:36:40.787879       1 controller.go:185] kmm "msg"="Starting EventSource" "controller"="preflightvalidationocp" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidationOCP" "source"="kind source: *v1beta1.PreflightValidation"
I0228 09:36:40.787905       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="preflightvalidationocp" "controllerGroup"="kmm.sigs.x-k8s.io" "controllerKind"="PreflightValidationOCP"
I0228 09:36:40.786489       1 controller.go:193] kmm "msg"="Starting Controller" "controller"="PodNodeModule" "controllerGroup"="" "controllerKind"="Pod"</pre></div></div></li></ol></div></section><section class="section" id="kmm-gathering-data-for-kmm-hub_kernel-module-management-operator"><div class="titlepage"><div><div><h4 class="title">4.14.1.2. Gathering data for KMM-Hub</h4></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Gather the data for the KMM Operator hub controller manager:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Set the <code class="literal">MUST_GATHER_IMAGE</code> variable:
									</p><pre class="programlisting language-terminal">$ export MUST_GATHER_IMAGE=$(oc get deployment -n openshift-kmm-hub kmm-operator-hub-controller-manager -ojsonpath='{.spec.template.spec.containers[?(@.name=="manager")].env[?(@.name=="RELATED_IMAGES_MUST_GATHER")].value}')</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Use the <code class="literal">-n &lt;namespace&gt;</code> switch to specify a namespace if you installed KMM in a custom namespace.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Run the <code class="literal">must-gather</code> tool:
									</p><pre class="programlisting language-terminal">$ oc adm must-gather --image="${MUST_GATHER_IMAGE}" -- /usr/bin/gather -u</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								View the Operator logs:
							</p><pre class="programlisting language-terminal">$ oc logs -fn openshift-kmm-hub deployments/kmm-operator-hub-controller-manager</pre><div class="example" id="idm140302642505776"><p class="title"><strong>Example 4.2. Example output</strong></p><div class="example-contents"><pre class="programlisting language-terminal">I0417 11:34:08.807472       1 request.go:682] Waited for 1.023403273s due to client-side throttling, not priority and fairness, request: GET:https://172.30.0.1:443/apis/tuned.openshift.io/v1?timeout=32s
I0417 11:34:12.373413       1 listener.go:44] kmm-hub/controller-runtime/metrics "msg"="Metrics server is starting to listen" "addr"="127.0.0.1:8080"
I0417 11:34:12.376253       1 main.go:150] kmm-hub/setup "msg"="Adding controller" "name"="ManagedClusterModule"
I0417 11:34:12.376621       1 main.go:186] kmm-hub/setup "msg"="starting manager"
I0417 11:34:12.377690       1 leaderelection.go:248] attempting to acquire leader lease openshift-kmm-hub/kmm-hub.sigs.x-k8s.io...
I0417 11:34:12.378078       1 internal.go:366] kmm-hub "msg"="Starting server" "addr"={"IP":"127.0.0.1","Port":8080,"Zone":""} "kind"="metrics" "path"="/metrics"
I0417 11:34:12.378222       1 internal.go:366] kmm-hub "msg"="Starting server" "addr"={"IP":"::","Port":8081,"Zone":""} "kind"="health probe"
I0417 11:34:12.395703       1 leaderelection.go:258] successfully acquired lease openshift-kmm-hub/kmm-hub.sigs.x-k8s.io
I0417 11:34:12.396334       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "source"="kind source: *v1beta1.ManagedClusterModule"
I0417 11:34:12.396403       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "source"="kind source: *v1.ManifestWork"
I0417 11:34:12.396430       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "source"="kind source: *v1.Build"
I0417 11:34:12.396469       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "source"="kind source: *v1.Job"
I0417 11:34:12.396522       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "source"="kind source: *v1.ManagedCluster"
I0417 11:34:12.396543       1 controller.go:193] kmm-hub "msg"="Starting Controller" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule"
I0417 11:34:12.397175       1 controller.go:185] kmm-hub "msg"="Starting EventSource" "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream" "source"="kind source: *v1.ImageStream"
I0417 11:34:12.397221       1 controller.go:193] kmm-hub "msg"="Starting Controller" "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream"
I0417 11:34:12.498335       1 filter.go:196] kmm-hub "msg"="Listing all ManagedClusterModules" "managedcluster"="local-cluster"
I0417 11:34:12.498570       1 filter.go:205] kmm-hub "msg"="Listed ManagedClusterModules" "count"=0 "managedcluster"="local-cluster"
I0417 11:34:12.498629       1 filter.go:238] kmm-hub "msg"="Adding reconciliation requests" "count"=0 "managedcluster"="local-cluster"
I0417 11:34:12.498687       1 filter.go:196] kmm-hub "msg"="Listing all ManagedClusterModules" "managedcluster"="sno1-0"
I0417 11:34:12.498750       1 filter.go:205] kmm-hub "msg"="Listed ManagedClusterModules" "count"=0 "managedcluster"="sno1-0"
I0417 11:34:12.498801       1 filter.go:238] kmm-hub "msg"="Adding reconciliation requests" "count"=0 "managedcluster"="sno1-0"
I0417 11:34:12.501947       1 controller.go:227] kmm-hub "msg"="Starting workers" "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream" "worker count"=1
I0417 11:34:12.501948       1 controller.go:227] kmm-hub "msg"="Starting workers" "controller"="ManagedClusterModule" "controllerGroup"="hub.kmm.sigs.x-k8s.io" "controllerKind"="ManagedClusterModule" "worker count"=1
I0417 11:34:12.502285       1 imagestream_reconciler.go:50] kmm-hub "msg"="registered imagestream info mapping" "ImageStream"={"name":"driver-toolkit","namespace":"openshift"} "controller"="imagestream" "controllerGroup"="image.openshift.io" "controllerKind"="ImageStream" "dtkImage"="quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:df42b4785a7a662b30da53bdb0d206120cf4d24b45674227b16051ba4b7c3934" "name"="driver-toolkit" "namespace"="openshift" "osImageVersion"="412.86.202302211547-0" "reconcileID"="e709ff0a-5664-4007-8270-49b5dff8bae9"</pre></div></div></li></ol></div></section></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140302641719904"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2023 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div>


  <nav class="pvof-doc__book-nav">
  <ol class="book-nav__list">
              </ol>
</nav>


          </div>
              </div>
              <div id="comments-footer" class="book-comments">
          

  

        </div>
          </div>
  </article>
<meta itemscope="" itemref="md1">



    </div>
      <!-- CP_PRIMER_FOOTER -->            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

              <div role="navigation" aria-label="quick">
                  <h3>Quick Links</h3>
                  <ul>
                      <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                      <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                      <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                      <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                      <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="help">
                  <h3>Help</h3>
                  <ul>
                      <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                      <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                      <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="site">
                  <h3>Site Info</h3>
                  <ul>
                      <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                      <li><a class="browser-support-policy" href="https://www.redhat.com/en/about/browser-support">Browser Support Policy</a></li>
                      <li><a class="accessibility" href="https://www.redhat.com/en/about/digital-accessibility">Accessibility</a></li>
                      <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                      <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="other">
                  <h3>Related Sites</h3>
                  <ul>
                      <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                      <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                      <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                      <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                  </ul>
              </div>

              <div role="navigation" aria-label="about">
                  <h3>About</h3>
                  <ul>
                      <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                      <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                      <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                  </ul>
              </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                        <span class="status-description"></span>
                        <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2023 Red Hat, Inc.</div>
                        <div role="navigation" aria-label="legal" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://www.redhat.com/en/about/terms-use" class="terms-of-use">Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent"></a></li>
                            </ul>
                            <div id="privacy_policy">We've updated our <a href='http://www.redhat.com/en/about/privacy-policy' class='privacy-policy'>Privacy Statement</a> effective September 15, 2023.
                            </div>
                          </div>
                        </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                        <img src="https://access.redhat.com/chrome_themes/nimbus/img/rh-summit-red-a.svg" alt="Red Hat Summit" /> <span class="offscreen">Red Hat Summit</span>
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHat" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>                        
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div>
<!-- /CP_PRIMER_FOOTER -->


  </div>

    
  </body>
</html>
